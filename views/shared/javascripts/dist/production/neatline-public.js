!function(e, t) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function(e) {
        if (!e.document) throw new Error("jQuery requires a window with a document");
        return t(e);
    } : t(e);
}("undefined" != typeof window ? window : this, function(e, t) {
    function i(e) {
        var t = "length" in e && e.length, i = K.type(e);
        return "function" !== i && !K.isWindow(e) && (!(1 !== e.nodeType || !t) || ("array" === i || 0 === t || "number" == typeof t && t > 0 && t - 1 in e));
    }
    function n(e, t, i) {
        if (K.isFunction(t)) return K.grep(e, function(e, n) {
            return !!t.call(e, n, e) !== i;
        });
        if (t.nodeType) return K.grep(e, function(e) {
            return e === t !== i;
        });
        if ("string" == typeof t) {
            if (se.test(t)) return K.filter(t, e, i);
            t = K.filter(t, e);
        }
        return K.grep(e, function(e) {
            return W.call(t, e) >= 0 !== i;
        });
    }
    function r(e, t) {
        for (;(e = e[t]) && 1 !== e.nodeType; ) ;
        return e;
    }
    function s(e) {
        var t = pe[e] = {};
        return K.each(e.match(ue) || [], function(e, i) {
            t[i] = !0;
        }), t;
    }
    function a() {
        $.removeEventListener("DOMContentLoaded", a, !1), e.removeEventListener("load", a, !1), 
        K.ready();
    }
    function o() {
        Object.defineProperty(this.cache = {}, 0, {
            "get": function() {
                return {};
            }
        }), this.expando = K.expando + o.uid++;
    }
    function l(e, t, i) {
        var n;
        if (void 0 === i && 1 === e.nodeType) if (n = "data-" + t.replace(ge, "-$1").toLowerCase(), 
        "string" == typeof (i = e.getAttribute(n))) {
            try {
                i = "true" === i || "false" !== i && ("null" === i ? null : +i + "" === i ? +i : me.test(i) ? K.parseJSON(i) : i);
            } catch (e) {}
            ye.set(e, t, i);
        } else i = void 0;
        return i;
    }
    function h() {
        return !0;
    }
    function u() {
        return !1;
    }
    function p() {
        try {
            return $.activeElement;
        } catch (e) {}
    }
    function c(e, t) {
        return K.nodeName(e, "table") && K.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e;
    }
    function d(e) {
        return e.type = (null !== e.getAttribute("type")) + "/" + e.type, e;
    }
    function f(e) {
        var t = Fe.exec(e.type);
        return t ? e.type = t[1] : e.removeAttribute("type"), e;
    }
    function y(e, t) {
        for (var i = 0, n = e.length; i < n; i++) fe.set(e[i], "globalEval", !t || fe.get(t[i], "globalEval"));
    }
    function m(e, t) {
        var i, n, r, s, a, o, l, h;
        if (1 === t.nodeType) {
            if (fe.hasData(e) && (s = fe.access(e), a = fe.set(t, s), h = s.events)) {
                delete a.handle, a.events = {};
                for (r in h) for (i = 0, n = h[r].length; i < n; i++) K.event.add(t, r, h[r][i]);
            }
            ye.hasData(e) && (o = ye.access(e), l = K.extend({}, o), ye.set(t, l));
        }
    }
    function g(e, t) {
        var i = e.getElementsByTagName ? e.getElementsByTagName(t || "*") : e.querySelectorAll ? e.querySelectorAll(t || "*") : [];
        return void 0 === t || t && K.nodeName(e, t) ? K.merge([ e ], i) : i;
    }
    function v(e, t) {
        var i = t.nodeName.toLowerCase();
        "input" === i && be.test(e.type) ? t.checked = e.checked : "input" !== i && "textarea" !== i || (t.defaultValue = e.defaultValue);
    }
    function L(t, i) {
        var n, r = K(i.createElement(t)).appendTo(i.body), s = e.getDefaultComputedStyle && (n = e.getDefaultComputedStyle(r[0])) ? n.display : K.css(r[0], "display");
        return r.detach(), s;
    }
    function O(e) {
        var t = $, i = Re[e];
        return i || ("none" !== (i = L(e, t)) && i || ((t = (Ie = (Ie || K("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(), 
        t.close(), i = L(e, t), Ie.detach()), Re[e] = i), i;
    }
    function b(e, t, i) {
        var n, r, s, a, o = e.style;
        return (i = i || Be(e)) && (a = i.getPropertyValue(t) || i[t]), i && ("" !== a || K.contains(e.ownerDocument, e) || (a = K.style(e, t)), 
        ze.test(a) && De.test(t) && (n = o.width, r = o.minWidth, s = o.maxWidth, o.minWidth = o.maxWidth = o.width = a, 
        a = i.width, o.width = n, o.minWidth = r, o.maxWidth = s)), void 0 !== a ? a + "" : a;
    }
    function w(e, t) {
        return {
            "get": function() {
                if (!e()) return (this.get = t).apply(this, arguments);
                delete this.get;
            }
        };
    }
    function C(e, t) {
        if (t in e) return t;
        for (var i = t[0].toUpperCase() + t.slice(1), n = t, r = We.length; r--; ) if ((t = We[r] + i) in e) return t;
        return n;
    }
    function S(e, t, i) {
        var n = Ge.exec(t);
        return n ? Math.max(0, n[1] - (i || 0)) + (n[2] || "px") : t;
    }
    function x(e, t, i, n, r) {
        for (var s = i === (n ? "border" : "content") ? 4 : "width" === t ? 1 : 0, a = 0; s < 4; s += 2) "margin" === i && (a += K.css(e, i + Le[s], !0, r)), 
        n ? ("content" === i && (a -= K.css(e, "padding" + Le[s], !0, r)), "margin" !== i && (a -= K.css(e, "border" + Le[s] + "Width", !0, r))) : (a += K.css(e, "padding" + Le[s], !0, r), 
        "padding" !== i && (a += K.css(e, "border" + Le[s] + "Width", !0, r)));
        return a;
    }
    function _(e, t, i) {
        var n = !0, r = "width" === t ? e.offsetWidth : e.offsetHeight, s = Be(e), a = "border-box" === K.css(e, "boxSizing", !1, s);
        if (r <= 0 || null == r) {
            if (((r = b(e, t, s)) < 0 || null == r) && (r = e.style[t]), ze.test(r)) return r;
            n = a && (Y.boxSizingReliable() || r === e.style[t]), r = parseFloat(r) || 0;
        }
        return r + x(e, t, i || (a ? "border" : "content"), n, s) + "px";
    }
    function E(e, t) {
        for (var i, n, r, s = [], a = 0, o = e.length; a < o; a++) (n = e[a]).style && (s[a] = fe.get(n, "olddisplay"), 
        i = n.style.display, t ? (s[a] || "none" !== i || (n.style.display = ""), "" === n.style.display && Oe(n) && (s[a] = fe.access(n, "olddisplay", O(n.nodeName)))) : (r = Oe(n), 
        "none" === i && r || fe.set(n, "olddisplay", r ? i : K.css(n, "display"))));
        for (a = 0; a < o; a++) (n = e[a]).style && (t && "none" !== n.style.display && "" !== n.style.display || (n.style.display = t ? s[a] || "" : "none"));
        return e;
    }
    function N(e, t, i, n, r) {
        return new N.prototype.init(e, t, i, n, r);
    }
    function P() {
        return setTimeout(function() {
            qe = void 0;
        }), qe = K.now();
    }
    function T(e, t) {
        var i, n = 0, r = {
            "height": e
        };
        for (t = t ? 1 : 0; n < 4; n += 2 - t) r["margin" + (i = Le[n])] = r["padding" + i] = e;
        return t && (r.opacity = r.width = e), r;
    }
    function M(e, t, i) {
        for (var n, r = (Qe[t] || []).concat(Qe["*"]), s = 0, a = r.length; s < a; s++) if (n = r[s].call(i, t, e)) return n;
    }
    function F(e, t) {
        var i, n, r, s, a;
        for (i in e) if (n = K.camelCase(i), r = t[n], s = e[i], K.isArray(s) && (r = s[1], 
        s = e[i] = s[0]), i !== n && (e[n] = s, delete e[i]), (a = K.cssHooks[n]) && "expand" in a) {
            s = a.expand(s), delete e[n];
            for (i in s) i in e || (e[i] = s[i], t[i] = r);
        } else t[n] = r;
    }
    function A(e, t, i) {
        var n, r, s = 0, a = Ke.length, o = K.Deferred().always(function() {
            delete l.elem;
        }), l = function() {
            if (r) return !1;
            for (var t = qe || P(), i = Math.max(0, h.startTime + h.duration - t), n = 1 - (i / h.duration || 0), s = 0, a = h.tweens.length; s < a; s++) h.tweens[s].run(n);
            return o.notifyWith(e, [ h, n, i ]), n < 1 && a ? i : (o.resolveWith(e, [ h ]), 
            !1);
        }, h = o.promise({
            "elem": e,
            "props": K.extend({}, t),
            "opts": K.extend(!0, {
                "specialEasing": {}
            }, i),
            "originalProperties": t,
            "originalOptions": i,
            "startTime": qe || P(),
            "duration": i.duration,
            "tweens": [],
            "createTween": function(t, i) {
                var n = K.Tween(e, h.opts, t, i, h.opts.specialEasing[t] || h.opts.easing);
                return h.tweens.push(n), n;
            },
            "stop": function(t) {
                var i = 0, n = t ? h.tweens.length : 0;
                if (r) return this;
                for (r = !0; i < n; i++) h.tweens[i].run(1);
                return t ? o.resolveWith(e, [ h, t ]) : o.rejectWith(e, [ h, t ]), this;
            }
        }), u = h.props;
        for (F(u, h.opts.specialEasing); s < a; s++) if (n = Ke[s].call(h, e, u, h.opts)) return n;
        return K.map(u, M, h), K.isFunction(h.opts.start) && h.opts.start.call(e, h), K.fx.timer(K.extend(l, {
            "elem": e,
            "anim": h,
            "queue": h.opts.queue
        })), h.progress(h.opts.progress).done(h.opts.done, h.opts.complete).fail(h.opts.fail).always(h.opts.always);
    }
    function k(e) {
        return function(t, i) {
            "string" != typeof t && (i = t, t = "*");
            var n, r = 0, s = t.toLowerCase().match(ue) || [];
            if (K.isFunction(i)) for (;n = s[r++]; ) "+" === n[0] ? (n = n.slice(1) || "*", 
            (e[n] = e[n] || []).unshift(i)) : (e[n] = e[n] || []).push(i);
        };
    }
    function I(e, t, i, n) {
        function r(o) {
            var l;
            return s[o] = !0, K.each(e[o] || [], function(e, o) {
                var h = o(t, i, n);
                return "string" != typeof h || a || s[h] ? a ? !(l = h) : void 0 : (t.dataTypes.unshift(h), 
                r(h), !1);
            }), l;
        }
        var s = {}, a = e === ft;
        return r(t.dataTypes[0]) || !s["*"] && r("*");
    }
    function R(e, t) {
        var i, n, r = K.ajaxSettings.flatOptions || {};
        for (i in t) void 0 !== t[i] && ((r[i] ? e : n || (n = {}))[i] = t[i]);
        return n && K.extend(!0, e, n), e;
    }
    function D(e, t, i) {
        for (var n, r, s, a, o = e.contents, l = e.dataTypes; "*" === l[0]; ) l.shift(), 
        void 0 === n && (n = e.mimeType || t.getResponseHeader("Content-Type"));
        if (n) for (r in o) if (o[r] && o[r].test(n)) {
            l.unshift(r);
            break;
        }
        if (l[0] in i) s = l[0]; else {
            for (r in i) {
                if (!l[0] || e.converters[r + " " + l[0]]) {
                    s = r;
                    break;
                }
                a || (a = r);
            }
            s = s || a;
        }
        if (s) return s !== l[0] && l.unshift(s), i[s];
    }
    function z(e, t, i, n) {
        var r, s, a, o, l, h = {}, u = e.dataTypes.slice();
        if (u[1]) for (a in e.converters) h[a.toLowerCase()] = e.converters[a];
        for (s = u.shift(); s; ) if (e.responseFields[s] && (i[e.responseFields[s]] = t), 
        !l && n && e.dataFilter && (t = e.dataFilter(t, e.dataType)), l = s, s = u.shift()) if ("*" === s) s = l; else if ("*" !== l && l !== s) {
            if (!(a = h[l + " " + s] || h["* " + s])) for (r in h) if ((o = r.split(" "))[1] === s && (a = h[l + " " + o[0]] || h["* " + o[0]])) {
                !0 === a ? a = h[r] : !0 !== h[r] && (s = o[0], u.unshift(o[1]));
                break;
            }
            if (!0 !== a) if (a && e.throws) t = a(t); else try {
                t = a(t);
            } catch (e) {
                return {
                    "state": "parsererror",
                    "error": a ? e : "No conversion from " + l + " to " + s
                };
            }
        }
        return {
            "state": "success",
            "data": t
        };
    }
    function B(e, t, i, n) {
        var r;
        if (K.isArray(t)) K.each(t, function(t, r) {
            i || Lt.test(e) ? n(e, r) : B(e + "[" + ("object" == typeof r ? t : "") + "]", r, i, n);
        }); else if (i || "object" !== K.type(t)) n(e, t); else for (r in t) B(e + "[" + r + "]", t[r], i, n);
    }
    function U(e) {
        return K.isWindow(e) ? e : 9 === e.nodeType && e.defaultView;
    }
    var G = [], H = G.slice, j = G.concat, V = G.push, W = G.indexOf, q = {}, X = q.toString, Z = q.hasOwnProperty, Y = {}, $ = e.document, K = function(e, t) {
        return new K.fn.init(e, t);
    }, Q = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, J = /^-ms-/, ee = /-([\da-z])/gi, te = function(e, t) {
        return t.toUpperCase();
    };
    K.fn = K.prototype = {
        "jquery": "2.1.4",
        "constructor": K,
        "selector": "",
        "length": 0,
        "toArray": function() {
            return H.call(this);
        },
        "get": function(e) {
            return null != e ? e < 0 ? this[e + this.length] : this[e] : H.call(this);
        },
        "pushStack": function(e) {
            var t = K.merge(this.constructor(), e);
            return t.prevObject = this, t.context = this.context, t;
        },
        "each": function(e, t) {
            return K.each(this, e, t);
        },
        "map": function(e) {
            return this.pushStack(K.map(this, function(t, i) {
                return e.call(t, i, t);
            }));
        },
        "slice": function() {
            return this.pushStack(H.apply(this, arguments));
        },
        "first": function() {
            return this.eq(0);
        },
        "last": function() {
            return this.eq(-1);
        },
        "eq": function(e) {
            var t = this.length, i = +e + (e < 0 ? t : 0);
            return this.pushStack(i >= 0 && i < t ? [ this[i] ] : []);
        },
        "end": function() {
            return this.prevObject || this.constructor(null);
        },
        "push": V,
        "sort": G.sort,
        "splice": G.splice
    }, K.extend = K.fn.extend = function() {
        var e, t, i, n, r, s, a = arguments[0] || {}, o = 1, l = arguments.length, h = !1;
        for ("boolean" == typeof a && (h = a, a = arguments[o] || {}, o++), "object" == typeof a || K.isFunction(a) || (a = {}), 
        o === l && (a = this, o--); o < l; o++) if (null != (e = arguments[o])) for (t in e) i = a[t], 
        a !== (n = e[t]) && (h && n && (K.isPlainObject(n) || (r = K.isArray(n))) ? (r ? (r = !1, 
        s = i && K.isArray(i) ? i : []) : s = i && K.isPlainObject(i) ? i : {}, a[t] = K.extend(h, s, n)) : void 0 !== n && (a[t] = n));
        return a;
    }, K.extend({
        "expando": "jQuery" + ("2.1.4" + Math.random()).replace(/\D/g, ""),
        "isReady": !0,
        "error": function(e) {
            throw new Error(e);
        },
        "noop": function() {},
        "isFunction": function(e) {
            return "function" === K.type(e);
        },
        "isArray": Array.isArray,
        "isWindow": function(e) {
            return null != e && e === e.window;
        },
        "isNumeric": function(e) {
            return !K.isArray(e) && e - parseFloat(e) + 1 >= 0;
        },
        "isPlainObject": function(e) {
            return "object" === K.type(e) && !e.nodeType && !K.isWindow(e) && !(e.constructor && !Z.call(e.constructor.prototype, "isPrototypeOf"));
        },
        "isEmptyObject": function(e) {
            var t;
            for (t in e) return !1;
            return !0;
        },
        "type": function(e) {
            return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? q[X.call(e)] || "object" : typeof e;
        },
        "globalEval": function(e) {
            var t, i = eval;
            (e = K.trim(e)) && (1 === e.indexOf("use strict") ? ((t = $.createElement("script")).text = e, 
            $.head.appendChild(t).parentNode.removeChild(t)) : i(e));
        },
        "camelCase": function(e) {
            return e.replace(J, "ms-").replace(ee, te);
        },
        "nodeName": function(e, t) {
            return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase();
        },
        "each": function(e, t, n) {
            var r = 0, s = e.length, a = i(e);
            if (n) {
                if (a) for (;r < s && !1 !== t.apply(e[r], n); r++) ; else for (r in e) if (!1 === t.apply(e[r], n)) break;
            } else if (a) for (;r < s && !1 !== t.call(e[r], r, e[r]); r++) ; else for (r in e) if (!1 === t.call(e[r], r, e[r])) break;
            return e;
        },
        "trim": function(e) {
            return null == e ? "" : (e + "").replace(Q, "");
        },
        "makeArray": function(e, t) {
            var n = t || [];
            return null != e && (i(Object(e)) ? K.merge(n, "string" == typeof e ? [ e ] : e) : V.call(n, e)), 
            n;
        },
        "inArray": function(e, t, i) {
            return null == t ? -1 : W.call(t, e, i);
        },
        "merge": function(e, t) {
            for (var i = +t.length, n = 0, r = e.length; n < i; n++) e[r++] = t[n];
            return e.length = r, e;
        },
        "grep": function(e, t, i) {
            for (var n = [], r = 0, s = e.length, a = !i; r < s; r++) !t(e[r], r) !== a && n.push(e[r]);
            return n;
        },
        "map": function(e, t, n) {
            var r, s = 0, a = e.length, o = [];
            if (i(e)) for (;s < a; s++) null != (r = t(e[s], s, n)) && o.push(r); else for (s in e) null != (r = t(e[s], s, n)) && o.push(r);
            return j.apply([], o);
        },
        "guid": 1,
        "proxy": function(e, t) {
            var i, n, r;
            if ("string" == typeof t && (i = e[t], t = e, e = i), K.isFunction(e)) return n = H.call(arguments, 2), 
            r = function() {
                return e.apply(t || this, n.concat(H.call(arguments)));
            }, r.guid = e.guid = e.guid || K.guid++, r;
        },
        "now": Date.now,
        "support": Y
    }), K.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(e, t) {
        q["[object " + t + "]"] = t.toLowerCase();
    });
    var ie = function(e) {
        function t(e, t, i, n) {
            var r, s, a, o, h, p, c, d, f, y;
            if ((t ? t.ownerDocument || t : z) !== T && P(t), t = t || T, i = i || [], o = t.nodeType, 
            "string" != typeof e || !e || 1 !== o && 9 !== o && 11 !== o) return i;
            if (!n && F) {
                if (11 !== o && (r = me.exec(e))) if (a = r[1]) {
                    if (9 === o) {
                        if (!(s = t.getElementById(a)) || !s.parentNode) return i;
                        if (s.id === a) return i.push(s), i;
                    } else if (t.ownerDocument && (s = t.ownerDocument.getElementById(a)) && R(t, s) && s.id === a) return i.push(s), 
                    i;
                } else {
                    if (r[2]) return $.apply(i, t.getElementsByTagName(e)), i;
                    if ((a = r[3]) && L.getElementsByClassName) return $.apply(i, t.getElementsByClassName(a)), 
                    i;
                }
                if (L.qsa && (!A || !A.test(e))) {
                    if (d = c = D, f = t, y = 1 !== o && e, 1 === o && "object" !== t.nodeName.toLowerCase()) {
                        for (p = C(e), (c = t.getAttribute("id")) ? d = c.replace(ve, "\\$&") : t.setAttribute("id", d), 
                        d = "[id='" + d + "'] ", h = p.length; h--; ) p[h] = d + u(p[h]);
                        f = ge.test(e) && l(t.parentNode) || t, y = p.join(",");
                    }
                    if (y) try {
                        return $.apply(i, f.querySelectorAll(y)), i;
                    } catch (e) {} finally {
                        c || t.removeAttribute("id");
                    }
                }
            }
            return x(e.replace(ae, "$1"), t, i, n);
        }
        function i() {
            function e(i, n) {
                return t.push(i + " ") > O.cacheLength && delete e[t.shift()], e[i + " "] = n;
            }
            var t = [];
            return e;
        }
        function n(e) {
            return e[D] = !0, e;
        }
        function r(e) {
            var t = T.createElement("div");
            try {
                return !!e(t);
            } catch (e) {
                return !1;
            } finally {
                t.parentNode && t.parentNode.removeChild(t), t = null;
            }
        }
        function s(e, t) {
            for (var i = e.split("|"), n = e.length; n--; ) O.attrHandle[i[n]] = t;
        }
        function a(e, t) {
            var i = t && e, n = i && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || W) - (~e.sourceIndex || W);
            if (n) return n;
            if (i) for (;i = i.nextSibling; ) if (i === t) return -1;
            return e ? 1 : -1;
        }
        function o(e) {
            return n(function(t) {
                return t = +t, n(function(i, n) {
                    for (var r, s = e([], i.length, t), a = s.length; a--; ) i[r = s[a]] && (i[r] = !(n[r] = i[r]));
                });
            });
        }
        function l(e) {
            return e && void 0 !== e.getElementsByTagName && e;
        }
        function h() {}
        function u(e) {
            for (var t = 0, i = e.length, n = ""; t < i; t++) n += e[t].value;
            return n;
        }
        function p(e, t, i) {
            var n = t.dir, r = i && "parentNode" === n, s = U++;
            return t.first ? function(t, i, s) {
                for (;t = t[n]; ) if (1 === t.nodeType || r) return e(t, i, s);
            } : function(t, i, a) {
                var o, l, h = [ B, s ];
                if (a) {
                    for (;t = t[n]; ) if ((1 === t.nodeType || r) && e(t, i, a)) return !0;
                } else for (;t = t[n]; ) if (1 === t.nodeType || r) {
                    if (l = t[D] || (t[D] = {}), (o = l[n]) && o[0] === B && o[1] === s) return h[2] = o[2];
                    if (l[n] = h, h[2] = e(t, i, a)) return !0;
                }
            };
        }
        function c(e) {
            return e.length > 1 ? function(t, i, n) {
                for (var r = e.length; r--; ) if (!e[r](t, i, n)) return !1;
                return !0;
            } : e[0];
        }
        function d(e, i, n) {
            for (var r = 0, s = i.length; r < s; r++) t(e, i[r], n);
            return n;
        }
        function f(e, t, i, n, r) {
            for (var s, a = [], o = 0, l = e.length, h = null != t; o < l; o++) (s = e[o]) && (i && !i(s, n, r) || (a.push(s), 
            h && t.push(o)));
            return a;
        }
        function y(e, t, i, r, s, a) {
            return r && !r[D] && (r = y(r)), s && !s[D] && (s = y(s, a)), n(function(n, a, o, l) {
                var h, u, p, c = [], y = [], m = a.length, g = n || d(t || "*", o.nodeType ? [ o ] : o, []), v = !e || !n && t ? g : f(g, c, e, o, l), L = i ? s || (n ? e : m || r) ? [] : a : v;
                if (i && i(v, L, o, l), r) for (h = f(L, y), r(h, [], o, l), u = h.length; u--; ) (p = h[u]) && (L[y[u]] = !(v[y[u]] = p));
                if (n) {
                    if (s || e) {
                        if (s) {
                            for (h = [], u = L.length; u--; ) (p = L[u]) && h.push(v[u] = p);
                            s(null, L = [], h, l);
                        }
                        for (u = L.length; u--; ) (p = L[u]) && (h = s ? Q(n, p) : c[u]) > -1 && (n[h] = !(a[h] = p));
                    }
                } else L = f(L === a ? L.splice(m, L.length) : L), s ? s(null, a, L, l) : $.apply(a, L);
            });
        }
        function m(e) {
            for (var t, i, n, r = e.length, s = O.relative[e[0].type], a = s || O.relative[" "], o = s ? 1 : 0, l = p(function(e) {
                return e === t;
            }, a, !0), h = p(function(e) {
                return Q(t, e) > -1;
            }, a, !0), d = [ function(e, i, n) {
                var r = !s && (n || i !== _) || ((t = i).nodeType ? l(e, i, n) : h(e, i, n));
                return t = null, r;
            } ]; o < r; o++) if (i = O.relative[e[o].type]) d = [ p(c(d), i) ]; else {
                if ((i = O.filter[e[o].type].apply(null, e[o].matches))[D]) {
                    for (n = ++o; n < r && !O.relative[e[n].type]; n++) ;
                    return y(o > 1 && c(d), o > 1 && u(e.slice(0, o - 1).concat({
                        "value": " " === e[o - 2].type ? "*" : ""
                    })).replace(ae, "$1"), i, o < n && m(e.slice(o, n)), n < r && m(e = e.slice(n)), n < r && u(e));
                }
                d.push(i);
            }
            return c(d);
        }
        function g(e, i) {
            var r = i.length > 0, s = e.length > 0, a = function(n, a, o, l, h) {
                var u, p, c, d = 0, y = "0", m = n && [], g = [], v = _, L = n || s && O.find.TAG("*", h), b = B += null == v ? 1 : Math.random() || .1, w = L.length;
                for (h && (_ = a !== T && a); y !== w && null != (u = L[y]); y++) {
                    if (s && u) {
                        for (p = 0; c = e[p++]; ) if (c(u, a, o)) {
                            l.push(u);
                            break;
                        }
                        h && (B = b);
                    }
                    r && ((u = !c && u) && d--, n && m.push(u));
                }
                if (d += y, r && y !== d) {
                    for (p = 0; c = i[p++]; ) c(m, g, a, o);
                    if (n) {
                        if (d > 0) for (;y--; ) m[y] || g[y] || (g[y] = Z.call(l));
                        g = f(g);
                    }
                    $.apply(l, g), h && !n && g.length > 0 && d + i.length > 1 && t.uniqueSort(l);
                }
                return h && (B = b, _ = v), m;
            };
            return r ? n(a) : a;
        }
        var v, L, O, b, w, C, S, x, _, E, N, P, T, M, F, A, k, I, R, D = "sizzle" + 1 * new Date(), z = e.document, B = 0, U = 0, G = i(), H = i(), j = i(), V = function(e, t) {
            return e === t && (N = !0), 0;
        }, W = 1 << 31, q = {}.hasOwnProperty, X = [], Z = X.pop, Y = X.push, $ = X.push, K = X.slice, Q = function(e, t) {
            for (var i = 0, n = e.length; i < n; i++) if (e[i] === t) return i;
            return -1;
        }, J = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", ee = "[\\x20\\t\\r\\n\\f]", te = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", ie = te.replace("w", "w#"), ne = "\\[" + ee + "*(" + te + ")(?:" + ee + "*([*^$|!~]?=)" + ee + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + ie + "))|)" + ee + "*\\]", re = ":(" + te + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + ne + ")*)|.*)\\)|)", se = new RegExp(ee + "+", "g"), ae = new RegExp("^" + ee + "+|((?:^|[^\\\\])(?:\\\\.)*)" + ee + "+$", "g"), oe = new RegExp("^" + ee + "*," + ee + "*"), le = new RegExp("^" + ee + "*([>+~]|" + ee + ")" + ee + "*"), he = new RegExp("=" + ee + "*([^\\]'\"]*?)" + ee + "*\\]", "g"), ue = new RegExp(re), pe = new RegExp("^" + ie + "$"), ce = {
            "ID": new RegExp("^#(" + te + ")"),
            "CLASS": new RegExp("^\\.(" + te + ")"),
            "TAG": new RegExp("^(" + te.replace("w", "w*") + ")"),
            "ATTR": new RegExp("^" + ne),
            "PSEUDO": new RegExp("^" + re),
            "CHILD": new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + ee + "*(even|odd|(([+-]|)(\\d*)n|)" + ee + "*(?:([+-]|)" + ee + "*(\\d+)|))" + ee + "*\\)|)", "i"),
            "bool": new RegExp("^(?:" + J + ")$", "i"),
            "needsContext": new RegExp("^" + ee + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + ee + "*((?:-\\d)?\\d*)" + ee + "*\\)|)(?=[^-]|$)", "i")
        }, de = /^(?:input|select|textarea|button)$/i, fe = /^h\d$/i, ye = /^[^{]+\{\s*\[native \w/, me = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, ge = /[+~]/, ve = /'|\\/g, Le = new RegExp("\\\\([\\da-f]{1,6}" + ee + "?|(" + ee + ")|.)", "ig"), Oe = function(e, t, i) {
            var n = "0x" + t - 65536;
            return n !== n || i ? t : n < 0 ? String.fromCharCode(n + 65536) : String.fromCharCode(n >> 10 | 55296, 1023 & n | 56320);
        }, be = function() {
            P();
        };
        try {
            $.apply(X = K.call(z.childNodes), z.childNodes), X[z.childNodes.length].nodeType;
        } catch (e) {
            $ = {
                "apply": X.length ? function(e, t) {
                    Y.apply(e, K.call(t));
                } : function(e, t) {
                    for (var i = e.length, n = 0; e[i++] = t[n++]; ) ;
                    e.length = i - 1;
                }
            };
        }
        L = t.support = {}, w = t.isXML = function(e) {
            var t = e && (e.ownerDocument || e).documentElement;
            return !!t && "HTML" !== t.nodeName;
        }, P = t.setDocument = function(e) {
            var t, i, n = e ? e.ownerDocument || e : z;
            return n !== T && 9 === n.nodeType && n.documentElement ? (T = n, M = n.documentElement, 
            (i = n.defaultView) && i !== i.top && (i.addEventListener ? i.addEventListener("unload", be, !1) : i.attachEvent && i.attachEvent("onunload", be)), 
            F = !w(n), L.attributes = r(function(e) {
                return e.className = "i", !e.getAttribute("className");
            }), L.getElementsByTagName = r(function(e) {
                return e.appendChild(n.createComment("")), !e.getElementsByTagName("*").length;
            }), L.getElementsByClassName = ye.test(n.getElementsByClassName), L.getById = r(function(e) {
                return M.appendChild(e).id = D, !n.getElementsByName || !n.getElementsByName(D).length;
            }), L.getById ? (O.find.ID = function(e, t) {
                if (void 0 !== t.getElementById && F) {
                    var i = t.getElementById(e);
                    return i && i.parentNode ? [ i ] : [];
                }
            }, O.filter.ID = function(e) {
                var t = e.replace(Le, Oe);
                return function(e) {
                    return e.getAttribute("id") === t;
                };
            }) : (delete O.find.ID, O.filter.ID = function(e) {
                var t = e.replace(Le, Oe);
                return function(e) {
                    var i = void 0 !== e.getAttributeNode && e.getAttributeNode("id");
                    return i && i.value === t;
                };
            }), O.find.TAG = L.getElementsByTagName ? function(e, t) {
                return void 0 !== t.getElementsByTagName ? t.getElementsByTagName(e) : L.qsa ? t.querySelectorAll(e) : void 0;
            } : function(e, t) {
                var i, n = [], r = 0, s = t.getElementsByTagName(e);
                if ("*" === e) {
                    for (;i = s[r++]; ) 1 === i.nodeType && n.push(i);
                    return n;
                }
                return s;
            }, O.find.CLASS = L.getElementsByClassName && function(e, t) {
                if (F) return t.getElementsByClassName(e);
            }, k = [], A = [], (L.qsa = ye.test(n.querySelectorAll)) && (r(function(e) {
                M.appendChild(e).innerHTML = "<a id='" + D + "'></a><select id='" + D + "-\f]' msallowcapture=''><option selected=''></option></select>", 
                e.querySelectorAll("[msallowcapture^='']").length && A.push("[*^$]=" + ee + "*(?:''|\"\")"), 
                e.querySelectorAll("[selected]").length || A.push("\\[" + ee + "*(?:value|" + J + ")"), 
                e.querySelectorAll("[id~=" + D + "-]").length || A.push("~="), e.querySelectorAll(":checked").length || A.push(":checked"), 
                e.querySelectorAll("a#" + D + "+*").length || A.push(".#.+[+~]");
            }), r(function(e) {
                var t = n.createElement("input");
                t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && A.push("name" + ee + "*[*^$|!~]?="), 
                e.querySelectorAll(":enabled").length || A.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), 
                A.push(",.*:");
            })), (L.matchesSelector = ye.test(I = M.matches || M.webkitMatchesSelector || M.mozMatchesSelector || M.oMatchesSelector || M.msMatchesSelector)) && r(function(e) {
                L.disconnectedMatch = I.call(e, "div"), I.call(e, "[s!='']:x"), k.push("!=", re);
            }), A = A.length && new RegExp(A.join("|")), k = k.length && new RegExp(k.join("|")), 
            t = ye.test(M.compareDocumentPosition), R = t || ye.test(M.contains) ? function(e, t) {
                var i = 9 === e.nodeType ? e.documentElement : e, n = t && t.parentNode;
                return e === n || !(!n || 1 !== n.nodeType || !(i.contains ? i.contains(n) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(n)));
            } : function(e, t) {
                if (t) for (;t = t.parentNode; ) if (t === e) return !0;
                return !1;
            }, V = t ? function(e, t) {
                if (e === t) return N = !0, 0;
                var i = !e.compareDocumentPosition - !t.compareDocumentPosition;
                return i || (1 & (i = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1) || !L.sortDetached && t.compareDocumentPosition(e) === i ? e === n || e.ownerDocument === z && R(z, e) ? -1 : t === n || t.ownerDocument === z && R(z, t) ? 1 : E ? Q(E, e) - Q(E, t) : 0 : 4 & i ? -1 : 1);
            } : function(e, t) {
                if (e === t) return N = !0, 0;
                var i, r = 0, s = e.parentNode, o = t.parentNode, l = [ e ], h = [ t ];
                if (!s || !o) return e === n ? -1 : t === n ? 1 : s ? -1 : o ? 1 : E ? Q(E, e) - Q(E, t) : 0;
                if (s === o) return a(e, t);
                for (i = e; i = i.parentNode; ) l.unshift(i);
                for (i = t; i = i.parentNode; ) h.unshift(i);
                for (;l[r] === h[r]; ) r++;
                return r ? a(l[r], h[r]) : l[r] === z ? -1 : h[r] === z ? 1 : 0;
            }, n) : T;
        }, t.matches = function(e, i) {
            return t(e, null, null, i);
        }, t.matchesSelector = function(e, i) {
            if ((e.ownerDocument || e) !== T && P(e), i = i.replace(he, "='$1']"), L.matchesSelector && F && (!k || !k.test(i)) && (!A || !A.test(i))) try {
                var n = I.call(e, i);
                if (n || L.disconnectedMatch || e.document && 11 !== e.document.nodeType) return n;
            } catch (e) {}
            return t(i, T, null, [ e ]).length > 0;
        }, t.contains = function(e, t) {
            return (e.ownerDocument || e) !== T && P(e), R(e, t);
        }, t.attr = function(e, t) {
            (e.ownerDocument || e) !== T && P(e);
            var i = O.attrHandle[t.toLowerCase()], n = i && q.call(O.attrHandle, t.toLowerCase()) ? i(e, t, !F) : void 0;
            return void 0 !== n ? n : L.attributes || !F ? e.getAttribute(t) : (n = e.getAttributeNode(t)) && n.specified ? n.value : null;
        }, t.error = function(e) {
            throw new Error("Syntax error, unrecognized expression: " + e);
        }, t.uniqueSort = function(e) {
            var t, i = [], n = 0, r = 0;
            if (N = !L.detectDuplicates, E = !L.sortStable && e.slice(0), e.sort(V), N) {
                for (;t = e[r++]; ) t === e[r] && (n = i.push(r));
                for (;n--; ) e.splice(i[n], 1);
            }
            return E = null, e;
        }, b = t.getText = function(e) {
            var t, i = "", n = 0, r = e.nodeType;
            if (r) {
                if (1 === r || 9 === r || 11 === r) {
                    if ("string" == typeof e.textContent) return e.textContent;
                    for (e = e.firstChild; e; e = e.nextSibling) i += b(e);
                } else if (3 === r || 4 === r) return e.nodeValue;
            } else for (;t = e[n++]; ) i += b(t);
            return i;
        }, (O = t.selectors = {
            "cacheLength": 50,
            "createPseudo": n,
            "match": ce,
            "attrHandle": {},
            "find": {},
            "relative": {
                ">": {
                    "dir": "parentNode",
                    "first": !0
                },
                " ": {
                    "dir": "parentNode"
                },
                "+": {
                    "dir": "previousSibling",
                    "first": !0
                },
                "~": {
                    "dir": "previousSibling"
                }
            },
            "preFilter": {
                "ATTR": function(e) {
                    return e[1] = e[1].replace(Le, Oe), e[3] = (e[3] || e[4] || e[5] || "").replace(Le, Oe), 
                    "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4);
                },
                "CHILD": function(e) {
                    return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || t.error(e[0]), 
                    e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && t.error(e[0]), 
                    e;
                },
                "PSEUDO": function(e) {
                    var t, i = !e[6] && e[2];
                    return ce.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : i && ue.test(i) && (t = C(i, !0)) && (t = i.indexOf(")", i.length - t) - i.length) && (e[0] = e[0].slice(0, t), 
                    e[2] = i.slice(0, t)), e.slice(0, 3));
                }
            },
            "filter": {
                "TAG": function(e) {
                    var t = e.replace(Le, Oe).toLowerCase();
                    return "*" === e ? function() {
                        return !0;
                    } : function(e) {
                        return e.nodeName && e.nodeName.toLowerCase() === t;
                    };
                },
                "CLASS": function(e) {
                    var t = G[e + " "];
                    return t || (t = new RegExp("(^|" + ee + ")" + e + "(" + ee + "|$)")) && G(e, function(e) {
                        return t.test("string" == typeof e.className && e.className || void 0 !== e.getAttribute && e.getAttribute("class") || "");
                    });
                },
                "ATTR": function(e, i, n) {
                    return function(r) {
                        var s = t.attr(r, e);
                        return null == s ? "!=" === i : !i || (s += "", "=" === i ? s === n : "!=" === i ? s !== n : "^=" === i ? n && 0 === s.indexOf(n) : "*=" === i ? n && s.indexOf(n) > -1 : "$=" === i ? n && s.slice(-n.length) === n : "~=" === i ? (" " + s.replace(se, " ") + " ").indexOf(n) > -1 : "|=" === i && (s === n || s.slice(0, n.length + 1) === n + "-"));
                    };
                },
                "CHILD": function(e, t, i, n, r) {
                    var s = "nth" !== e.slice(0, 3), a = "last" !== e.slice(-4), o = "of-type" === t;
                    return 1 === n && 0 === r ? function(e) {
                        return !!e.parentNode;
                    } : function(t, i, l) {
                        var h, u, p, c, d, f, y = s !== a ? "nextSibling" : "previousSibling", m = t.parentNode, g = o && t.nodeName.toLowerCase(), v = !l && !o;
                        if (m) {
                            if (s) {
                                for (;y; ) {
                                    for (p = t; p = p[y]; ) if (o ? p.nodeName.toLowerCase() === g : 1 === p.nodeType) return !1;
                                    f = y = "only" === e && !f && "nextSibling";
                                }
                                return !0;
                            }
                            if (f = [ a ? m.firstChild : m.lastChild ], a && v) {
                                for (d = (h = (u = m[D] || (m[D] = {}))[e] || [])[0] === B && h[1], c = h[0] === B && h[2], 
                                p = d && m.childNodes[d]; p = ++d && p && p[y] || (c = d = 0) || f.pop(); ) if (1 === p.nodeType && ++c && p === t) {
                                    u[e] = [ B, d, c ];
                                    break;
                                }
                            } else if (v && (h = (t[D] || (t[D] = {}))[e]) && h[0] === B) c = h[1]; else for (;(p = ++d && p && p[y] || (c = d = 0) || f.pop()) && ((o ? p.nodeName.toLowerCase() !== g : 1 !== p.nodeType) || !++c || (v && ((p[D] || (p[D] = {}))[e] = [ B, c ]), 
                            p !== t)); ) ;
                            return (c -= r) === n || c % n == 0 && c / n >= 0;
                        }
                    };
                },
                "PSEUDO": function(e, i) {
                    var r, s = O.pseudos[e] || O.setFilters[e.toLowerCase()] || t.error("unsupported pseudo: " + e);
                    return s[D] ? s(i) : s.length > 1 ? (r = [ e, e, "", i ], O.setFilters.hasOwnProperty(e.toLowerCase()) ? n(function(e, t) {
                        for (var n, r = s(e, i), a = r.length; a--; ) e[n = Q(e, r[a])] = !(t[n] = r[a]);
                    }) : function(e) {
                        return s(e, 0, r);
                    }) : s;
                }
            },
            "pseudos": {
                "not": n(function(e) {
                    var t = [], i = [], r = S(e.replace(ae, "$1"));
                    return r[D] ? n(function(e, t, i, n) {
                        for (var s, a = r(e, null, n, []), o = e.length; o--; ) (s = a[o]) && (e[o] = !(t[o] = s));
                    }) : function(e, n, s) {
                        return t[0] = e, r(t, null, s, i), t[0] = null, !i.pop();
                    };
                }),
                "has": n(function(e) {
                    return function(i) {
                        return t(e, i).length > 0;
                    };
                }),
                "contains": n(function(e) {
                    return e = e.replace(Le, Oe), function(t) {
                        return (t.textContent || t.innerText || b(t)).indexOf(e) > -1;
                    };
                }),
                "lang": n(function(e) {
                    return pe.test(e || "") || t.error("unsupported lang: " + e), e = e.replace(Le, Oe).toLowerCase(), 
                    function(t) {
                        var i;
                        do {
                            if (i = F ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return (i = i.toLowerCase()) === e || 0 === i.indexOf(e + "-");
                        } while ((t = t.parentNode) && 1 === t.nodeType);
                        return !1;
                    };
                }),
                "target": function(t) {
                    var i = e.location && e.location.hash;
                    return i && i.slice(1) === t.id;
                },
                "root": function(e) {
                    return e === M;
                },
                "focus": function(e) {
                    return e === T.activeElement && (!T.hasFocus || T.hasFocus()) && !!(e.type || e.href || ~e.tabIndex);
                },
                "enabled": function(e) {
                    return !1 === e.disabled;
                },
                "disabled": function(e) {
                    return !0 === e.disabled;
                },
                "checked": function(e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && !!e.checked || "option" === t && !!e.selected;
                },
                "selected": function(e) {
                    return e.parentNode && e.parentNode.selectedIndex, !0 === e.selected;
                },
                "empty": function(e) {
                    for (e = e.firstChild; e; e = e.nextSibling) if (e.nodeType < 6) return !1;
                    return !0;
                },
                "parent": function(e) {
                    return !O.pseudos.empty(e);
                },
                "header": function(e) {
                    return fe.test(e.nodeName);
                },
                "input": function(e) {
                    return de.test(e.nodeName);
                },
                "button": function(e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && "button" === e.type || "button" === t;
                },
                "text": function(e) {
                    var t;
                    return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase());
                },
                "first": o(function() {
                    return [ 0 ];
                }),
                "last": o(function(e, t) {
                    return [ t - 1 ];
                }),
                "eq": o(function(e, t, i) {
                    return [ i < 0 ? i + t : i ];
                }),
                "even": o(function(e, t) {
                    for (var i = 0; i < t; i += 2) e.push(i);
                    return e;
                }),
                "odd": o(function(e, t) {
                    for (var i = 1; i < t; i += 2) e.push(i);
                    return e;
                }),
                "lt": o(function(e, t, i) {
                    for (var n = i < 0 ? i + t : i; --n >= 0; ) e.push(n);
                    return e;
                }),
                "gt": o(function(e, t, i) {
                    for (var n = i < 0 ? i + t : i; ++n < t; ) e.push(n);
                    return e;
                })
            }
        }).pseudos.nth = O.pseudos.eq;
        for (v in {
            "radio": !0,
            "checkbox": !0,
            "file": !0,
            "password": !0,
            "image": !0
        }) O.pseudos[v] = function(e) {
            return function(t) {
                return "input" === t.nodeName.toLowerCase() && t.type === e;
            };
        }(v);
        for (v in {
            "submit": !0,
            "reset": !0
        }) O.pseudos[v] = function(e) {
            return function(t) {
                var i = t.nodeName.toLowerCase();
                return ("input" === i || "button" === i) && t.type === e;
            };
        }(v);
        return h.prototype = O.filters = O.pseudos, O.setFilters = new h(), C = t.tokenize = function(e, i) {
            var n, r, s, a, o, l, h, u = H[e + " "];
            if (u) return i ? 0 : u.slice(0);
            for (o = e, l = [], h = O.preFilter; o; ) {
                n && !(r = oe.exec(o)) || (r && (o = o.slice(r[0].length) || o), l.push(s = [])), 
                n = !1, (r = le.exec(o)) && (n = r.shift(), s.push({
                    "value": n,
                    "type": r[0].replace(ae, " ")
                }), o = o.slice(n.length));
                for (a in O.filter) !(r = ce[a].exec(o)) || h[a] && !(r = h[a](r)) || (n = r.shift(), 
                s.push({
                    "value": n,
                    "type": a,
                    "matches": r
                }), o = o.slice(n.length));
                if (!n) break;
            }
            return i ? o.length : o ? t.error(e) : H(e, l).slice(0);
        }, S = t.compile = function(e, t) {
            var i, n = [], r = [], s = j[e + " "];
            if (!s) {
                for (t || (t = C(e)), i = t.length; i--; ) (s = m(t[i]))[D] ? n.push(s) : r.push(s);
                (s = j(e, g(r, n))).selector = e;
            }
            return s;
        }, x = t.select = function(e, t, i, n) {
            var r, s, a, o, h, p = "function" == typeof e && e, c = !n && C(e = p.selector || e);
            if (i = i || [], 1 === c.length) {
                if ((s = c[0] = c[0].slice(0)).length > 2 && "ID" === (a = s[0]).type && L.getById && 9 === t.nodeType && F && O.relative[s[1].type]) {
                    if (!(t = (O.find.ID(a.matches[0].replace(Le, Oe), t) || [])[0])) return i;
                    p && (t = t.parentNode), e = e.slice(s.shift().value.length);
                }
                for (r = ce.needsContext.test(e) ? 0 : s.length; r-- && (a = s[r], !O.relative[o = a.type]); ) if ((h = O.find[o]) && (n = h(a.matches[0].replace(Le, Oe), ge.test(s[0].type) && l(t.parentNode) || t))) {
                    if (s.splice(r, 1), !(e = n.length && u(s))) return $.apply(i, n), i;
                    break;
                }
            }
            return (p || S(e, c))(n, t, !F, i, ge.test(e) && l(t.parentNode) || t), i;
        }, L.sortStable = D.split("").sort(V).join("") === D, L.detectDuplicates = !!N, 
        P(), L.sortDetached = r(function(e) {
            return 1 & e.compareDocumentPosition(T.createElement("div"));
        }), r(function(e) {
            return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href");
        }) || s("type|href|height|width", function(e, t, i) {
            if (!i) return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2);
        }), L.attributes && r(function(e) {
            return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value");
        }) || s("value", function(e, t, i) {
            if (!i && "input" === e.nodeName.toLowerCase()) return e.defaultValue;
        }), r(function(e) {
            return null == e.getAttribute("disabled");
        }) || s(J, function(e, t, i) {
            var n;
            if (!i) return !0 === e[t] ? t.toLowerCase() : (n = e.getAttributeNode(t)) && n.specified ? n.value : null;
        }), t;
    }(e);
    K.find = ie, K.expr = ie.selectors, K.expr[":"] = K.expr.pseudos, K.unique = ie.uniqueSort, 
    K.text = ie.getText, K.isXMLDoc = ie.isXML, K.contains = ie.contains;
    var ne = K.expr.match.needsContext, re = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, se = /^.[^:#\[\.,]*$/;
    K.filter = function(e, t, i) {
        var n = t[0];
        return i && (e = ":not(" + e + ")"), 1 === t.length && 1 === n.nodeType ? K.find.matchesSelector(n, e) ? [ n ] : [] : K.find.matches(e, K.grep(t, function(e) {
            return 1 === e.nodeType;
        }));
    }, K.fn.extend({
        "find": function(e) {
            var t, i = this.length, n = [], r = this;
            if ("string" != typeof e) return this.pushStack(K(e).filter(function() {
                for (t = 0; t < i; t++) if (K.contains(r[t], this)) return !0;
            }));
            for (t = 0; t < i; t++) K.find(e, r[t], n);
            return n = this.pushStack(i > 1 ? K.unique(n) : n), n.selector = this.selector ? this.selector + " " + e : e, 
            n;
        },
        "filter": function(e) {
            return this.pushStack(n(this, e || [], !1));
        },
        "not": function(e) {
            return this.pushStack(n(this, e || [], !0));
        },
        "is": function(e) {
            return !!n(this, "string" == typeof e && ne.test(e) ? K(e) : e || [], !1).length;
        }
    });
    var ae, oe = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;
    (K.fn.init = function(e, t) {
        var i, n;
        if (!e) return this;
        if ("string" == typeof e) {
            if (!(i = "<" === e[0] && ">" === e[e.length - 1] && e.length >= 3 ? [ null, e, null ] : oe.exec(e)) || !i[1] && t) return !t || t.jquery ? (t || ae).find(e) : this.constructor(t).find(e);
            if (i[1]) {
                if (t = t instanceof K ? t[0] : t, K.merge(this, K.parseHTML(i[1], t && t.nodeType ? t.ownerDocument || t : $, !0)), 
                re.test(i[1]) && K.isPlainObject(t)) for (i in t) K.isFunction(this[i]) ? this[i](t[i]) : this.attr(i, t[i]);
                return this;
            }
            return (n = $.getElementById(i[2])) && n.parentNode && (this.length = 1, this[0] = n), 
            this.context = $, this.selector = e, this;
        }
        return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : K.isFunction(e) ? void 0 !== ae.ready ? ae.ready(e) : e(K) : (void 0 !== e.selector && (this.selector = e.selector, 
        this.context = e.context), K.makeArray(e, this));
    }).prototype = K.fn, ae = K($);
    var le = /^(?:parents|prev(?:Until|All))/, he = {
        "children": !0,
        "contents": !0,
        "next": !0,
        "prev": !0
    };
    K.extend({
        "dir": function(e, t, i) {
            for (var n = [], r = void 0 !== i; (e = e[t]) && 9 !== e.nodeType; ) if (1 === e.nodeType) {
                if (r && K(e).is(i)) break;
                n.push(e);
            }
            return n;
        },
        "sibling": function(e, t) {
            for (var i = []; e; e = e.nextSibling) 1 === e.nodeType && e !== t && i.push(e);
            return i;
        }
    }), K.fn.extend({
        "has": function(e) {
            var t = K(e, this), i = t.length;
            return this.filter(function() {
                for (var e = 0; e < i; e++) if (K.contains(this, t[e])) return !0;
            });
        },
        "closest": function(e, t) {
            for (var i, n = 0, r = this.length, s = [], a = ne.test(e) || "string" != typeof e ? K(e, t || this.context) : 0; n < r; n++) for (i = this[n]; i && i !== t; i = i.parentNode) if (i.nodeType < 11 && (a ? a.index(i) > -1 : 1 === i.nodeType && K.find.matchesSelector(i, e))) {
                s.push(i);
                break;
            }
            return this.pushStack(s.length > 1 ? K.unique(s) : s);
        },
        "index": function(e) {
            return e ? "string" == typeof e ? W.call(K(e), this[0]) : W.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1;
        },
        "add": function(e, t) {
            return this.pushStack(K.unique(K.merge(this.get(), K(e, t))));
        },
        "addBack": function(e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e));
        }
    }), K.each({
        "parent": function(e) {
            var t = e.parentNode;
            return t && 11 !== t.nodeType ? t : null;
        },
        "parents": function(e) {
            return K.dir(e, "parentNode");
        },
        "parentsUntil": function(e, t, i) {
            return K.dir(e, "parentNode", i);
        },
        "next": function(e) {
            return r(e, "nextSibling");
        },
        "prev": function(e) {
            return r(e, "previousSibling");
        },
        "nextAll": function(e) {
            return K.dir(e, "nextSibling");
        },
        "prevAll": function(e) {
            return K.dir(e, "previousSibling");
        },
        "nextUntil": function(e, t, i) {
            return K.dir(e, "nextSibling", i);
        },
        "prevUntil": function(e, t, i) {
            return K.dir(e, "previousSibling", i);
        },
        "siblings": function(e) {
            return K.sibling((e.parentNode || {}).firstChild, e);
        },
        "children": function(e) {
            return K.sibling(e.firstChild);
        },
        "contents": function(e) {
            return e.contentDocument || K.merge([], e.childNodes);
        }
    }, function(e, t) {
        K.fn[e] = function(i, n) {
            var r = K.map(this, t, i);
            return "Until" !== e.slice(-5) && (n = i), n && "string" == typeof n && (r = K.filter(n, r)), 
            this.length > 1 && (he[e] || K.unique(r), le.test(e) && r.reverse()), this.pushStack(r);
        };
    });
    var ue = /\S+/g, pe = {};
    K.Callbacks = function(e) {
        var t, i, n, r, a, o, l = [], h = !(e = "string" == typeof e ? pe[e] || s(e) : K.extend({}, e)).once && [], u = function(s) {
            for (t = e.memory && s, i = !0, o = r || 0, r = 0, a = l.length, n = !0; l && o < a; o++) if (!1 === l[o].apply(s[0], s[1]) && e.stopOnFalse) {
                t = !1;
                break;
            }
            n = !1, l && (h ? h.length && u(h.shift()) : t ? l = [] : p.disable());
        }, p = {
            "add": function() {
                if (l) {
                    var i = l.length;
                    !function t(i) {
                        K.each(i, function(i, n) {
                            var r = K.type(n);
                            "function" === r ? e.unique && p.has(n) || l.push(n) : n && n.length && "string" !== r && t(n);
                        });
                    }(arguments), n ? a = l.length : t && (r = i, u(t));
                }
                return this;
            },
            "remove": function() {
                return l && K.each(arguments, function(e, t) {
                    for (var i; (i = K.inArray(t, l, i)) > -1; ) l.splice(i, 1), n && (i <= a && a--, 
                    i <= o && o--);
                }), this;
            },
            "has": function(e) {
                return e ? K.inArray(e, l) > -1 : !(!l || !l.length);
            },
            "empty": function() {
                return l = [], a = 0, this;
            },
            "disable": function() {
                return l = h = t = void 0, this;
            },
            "disabled": function() {
                return !l;
            },
            "lock": function() {
                return h = void 0, t || p.disable(), this;
            },
            "locked": function() {
                return !h;
            },
            "fireWith": function(e, t) {
                return !l || i && !h || (t = [ e, (t = t || []).slice ? t.slice() : t ], n ? h.push(t) : u(t)), 
                this;
            },
            "fire": function() {
                return p.fireWith(this, arguments), this;
            },
            "fired": function() {
                return !!i;
            }
        };
        return p;
    }, K.extend({
        "Deferred": function(e) {
            var t = [ [ "resolve", "done", K.Callbacks("once memory"), "resolved" ], [ "reject", "fail", K.Callbacks("once memory"), "rejected" ], [ "notify", "progress", K.Callbacks("memory") ] ], i = "pending", n = {
                "state": function() {
                    return i;
                },
                "always": function() {
                    return r.done(arguments).fail(arguments), this;
                },
                "then": function() {
                    var e = arguments;
                    return K.Deferred(function(i) {
                        K.each(t, function(t, s) {
                            var a = K.isFunction(e[t]) && e[t];
                            r[s[1]](function() {
                                var e = a && a.apply(this, arguments);
                                e && K.isFunction(e.promise) ? e.promise().done(i.resolve).fail(i.reject).progress(i.notify) : i[s[0] + "With"](this === n ? i.promise() : this, a ? [ e ] : arguments);
                            });
                        }), e = null;
                    }).promise();
                },
                "promise": function(e) {
                    return null != e ? K.extend(e, n) : n;
                }
            }, r = {};
            return n.pipe = n.then, K.each(t, function(e, s) {
                var a = s[2], o = s[3];
                n[s[1]] = a.add, o && a.add(function() {
                    i = o;
                }, t[1 ^ e][2].disable, t[2][2].lock), r[s[0]] = function() {
                    return r[s[0] + "With"](this === r ? n : this, arguments), this;
                }, r[s[0] + "With"] = a.fireWith;
            }), n.promise(r), e && e.call(r, r), r;
        },
        "when": function(e) {
            var t, i, n, r = 0, s = H.call(arguments), a = s.length, o = 1 !== a || e && K.isFunction(e.promise) ? a : 0, l = 1 === o ? e : K.Deferred(), h = function(e, i, n) {
                return function(r) {
                    i[e] = this, n[e] = arguments.length > 1 ? H.call(arguments) : r, n === t ? l.notifyWith(i, n) : --o || l.resolveWith(i, n);
                };
            };
            if (a > 1) for (t = new Array(a), i = new Array(a), n = new Array(a); r < a; r++) s[r] && K.isFunction(s[r].promise) ? s[r].promise().done(h(r, n, s)).fail(l.reject).progress(h(r, i, t)) : --o;
            return o || l.resolveWith(n, s), l.promise();
        }
    });
    var ce;
    K.fn.ready = function(e) {
        return K.ready.promise().done(e), this;
    }, K.extend({
        "isReady": !1,
        "readyWait": 1,
        "holdReady": function(e) {
            e ? K.readyWait++ : K.ready(!0);
        },
        "ready": function(e) {
            (!0 === e ? --K.readyWait : K.isReady) || (K.isReady = !0, !0 !== e && --K.readyWait > 0 || (ce.resolveWith($, [ K ]), 
            K.fn.triggerHandler && (K($).triggerHandler("ready"), K($).off("ready"))));
        }
    }), K.ready.promise = function(t) {
        return ce || (ce = K.Deferred(), "complete" === $.readyState ? setTimeout(K.ready) : ($.addEventListener("DOMContentLoaded", a, !1), 
        e.addEventListener("load", a, !1))), ce.promise(t);
    }, K.ready.promise();
    var de = K.access = function(e, t, i, n, r, s, a) {
        var o = 0, l = e.length, h = null == i;
        if ("object" === K.type(i)) {
            r = !0;
            for (o in i) K.access(e, t, o, i[o], !0, s, a);
        } else if (void 0 !== n && (r = !0, K.isFunction(n) || (a = !0), h && (a ? (t.call(e, n), 
        t = null) : (h = t, t = function(e, t, i) {
            return h.call(K(e), i);
        })), t)) for (;o < l; o++) t(e[o], i, a ? n : n.call(e[o], o, t(e[o], i)));
        return r ? e : h ? t.call(e) : l ? t(e[0], i) : s;
    };
    K.acceptData = function(e) {
        return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType;
    }, o.uid = 1, o.accepts = K.acceptData, o.prototype = {
        "key": function(e) {
            if (!o.accepts(e)) return 0;
            var t = {}, i = e[this.expando];
            if (!i) {
                i = o.uid++;
                try {
                    t[this.expando] = {
                        "value": i
                    }, Object.defineProperties(e, t);
                } catch (n) {
                    t[this.expando] = i, K.extend(e, t);
                }
            }
            return this.cache[i] || (this.cache[i] = {}), i;
        },
        "set": function(e, t, i) {
            var n, r = this.key(e), s = this.cache[r];
            if ("string" == typeof t) s[t] = i; else if (K.isEmptyObject(s)) K.extend(this.cache[r], t); else for (n in t) s[n] = t[n];
            return s;
        },
        "get": function(e, t) {
            var i = this.cache[this.key(e)];
            return void 0 === t ? i : i[t];
        },
        "access": function(e, t, i) {
            var n;
            return void 0 === t || t && "string" == typeof t && void 0 === i ? void 0 !== (n = this.get(e, t)) ? n : this.get(e, K.camelCase(t)) : (this.set(e, t, i), 
            void 0 !== i ? i : t);
        },
        "remove": function(e, t) {
            var i, n, r, s = this.key(e), a = this.cache[s];
            if (void 0 === t) this.cache[s] = {}; else {
                K.isArray(t) ? n = t.concat(t.map(K.camelCase)) : (r = K.camelCase(t), n = t in a ? [ t, r ] : (n = r) in a ? [ n ] : n.match(ue) || []), 
                i = n.length;
                for (;i--; ) delete a[n[i]];
            }
        },
        "hasData": function(e) {
            return !K.isEmptyObject(this.cache[e[this.expando]] || {});
        },
        "discard": function(e) {
            e[this.expando] && delete this.cache[e[this.expando]];
        }
    };
    var fe = new o(), ye = new o(), me = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, ge = /([A-Z])/g;
    K.extend({
        "hasData": function(e) {
            return ye.hasData(e) || fe.hasData(e);
        },
        "data": function(e, t, i) {
            return ye.access(e, t, i);
        },
        "removeData": function(e, t) {
            ye.remove(e, t);
        },
        "_data": function(e, t, i) {
            return fe.access(e, t, i);
        },
        "_removeData": function(e, t) {
            fe.remove(e, t);
        }
    }), K.fn.extend({
        "data": function(e, t) {
            var i, n, r, s = this[0], a = s && s.attributes;
            if (void 0 === e) {
                if (this.length && (r = ye.get(s), 1 === s.nodeType && !fe.get(s, "hasDataAttrs"))) {
                    for (i = a.length; i--; ) a[i] && 0 === (n = a[i].name).indexOf("data-") && (n = K.camelCase(n.slice(5)), 
                    l(s, n, r[n]));
                    fe.set(s, "hasDataAttrs", !0);
                }
                return r;
            }
            return "object" == typeof e ? this.each(function() {
                ye.set(this, e);
            }) : de(this, function(t) {
                var i, n = K.camelCase(e);
                if (s && void 0 === t) {
                    if (void 0 !== (i = ye.get(s, e))) return i;
                    if (void 0 !== (i = ye.get(s, n))) return i;
                    if (void 0 !== (i = l(s, n, void 0))) return i;
                } else this.each(function() {
                    var i = ye.get(this, n);
                    ye.set(this, n, t), -1 !== e.indexOf("-") && void 0 !== i && ye.set(this, e, t);
                });
            }, null, t, arguments.length > 1, null, !0);
        },
        "removeData": function(e) {
            return this.each(function() {
                ye.remove(this, e);
            });
        }
    }), K.extend({
        "queue": function(e, t, i) {
            var n;
            if (e) return t = (t || "fx") + "queue", n = fe.get(e, t), i && (!n || K.isArray(i) ? n = fe.access(e, t, K.makeArray(i)) : n.push(i)), 
            n || [];
        },
        "dequeue": function(e, t) {
            t = t || "fx";
            var i = K.queue(e, t), n = i.length, r = i.shift(), s = K._queueHooks(e, t);
            "inprogress" === r && (r = i.shift(), n--), r && ("fx" === t && i.unshift("inprogress"), 
            delete s.stop, r.call(e, function() {
                K.dequeue(e, t);
            }, s)), !n && s && s.empty.fire();
        },
        "_queueHooks": function(e, t) {
            var i = t + "queueHooks";
            return fe.get(e, i) || fe.access(e, i, {
                "empty": K.Callbacks("once memory").add(function() {
                    fe.remove(e, [ t + "queue", i ]);
                })
            });
        }
    }), K.fn.extend({
        "queue": function(e, t) {
            var i = 2;
            return "string" != typeof e && (t = e, e = "fx", i--), arguments.length < i ? K.queue(this[0], e) : void 0 === t ? this : this.each(function() {
                var i = K.queue(this, e, t);
                K._queueHooks(this, e), "fx" === e && "inprogress" !== i[0] && K.dequeue(this, e);
            });
        },
        "dequeue": function(e) {
            return this.each(function() {
                K.dequeue(this, e);
            });
        },
        "clearQueue": function(e) {
            return this.queue(e || "fx", []);
        },
        "promise": function(e, t) {
            var i, n = 1, r = K.Deferred(), s = this, a = this.length, o = function() {
                --n || r.resolveWith(s, [ s ]);
            };
            for ("string" != typeof e && (t = e, e = void 0), e = e || "fx"; a--; ) (i = fe.get(s[a], e + "queueHooks")) && i.empty && (n++, 
            i.empty.add(o));
            return o(), r.promise(t);
        }
    });
    var ve = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, Le = [ "Top", "Right", "Bottom", "Left" ], Oe = function(e, t) {
        return e = t || e, "none" === K.css(e, "display") || !K.contains(e.ownerDocument, e);
    }, be = /^(?:checkbox|radio)$/i;
    !function() {
        var e = $.createDocumentFragment().appendChild($.createElement("div")), t = $.createElement("input");
        t.setAttribute("type", "radio"), t.setAttribute("checked", "checked"), t.setAttribute("name", "t"), 
        e.appendChild(t), Y.checkClone = e.cloneNode(!0).cloneNode(!0).lastChild.checked, 
        e.innerHTML = "<textarea>x</textarea>", Y.noCloneChecked = !!e.cloneNode(!0).lastChild.defaultValue;
    }();
    Y.focusinBubbles = "onfocusin" in e;
    var we = /^key/, Ce = /^(?:mouse|pointer|contextmenu)|click/, Se = /^(?:focusinfocus|focusoutblur)$/, xe = /^([^.]*)(?:\.(.+)|)$/;
    K.event = {
        "global": {},
        "add": function(e, t, i, n, r) {
            var s, a, o, l, h, u, p, c, d, f, y, m = fe.get(e);
            if (m) for (i.handler && (i = (s = i).handler, r = s.selector), i.guid || (i.guid = K.guid++), 
            (l = m.events) || (l = m.events = {}), (a = m.handle) || (a = m.handle = function(t) {
                return void 0 !== K && K.event.triggered !== t.type ? K.event.dispatch.apply(e, arguments) : void 0;
            }), h = (t = (t || "").match(ue) || [ "" ]).length; h--; ) d = y = (o = xe.exec(t[h]) || [])[1], 
            f = (o[2] || "").split(".").sort(), d && (p = K.event.special[d] || {}, d = (r ? p.delegateType : p.bindType) || d, 
            p = K.event.special[d] || {}, u = K.extend({
                "type": d,
                "origType": y,
                "data": n,
                "handler": i,
                "guid": i.guid,
                "selector": r,
                "needsContext": r && K.expr.match.needsContext.test(r),
                "namespace": f.join(".")
            }, s), (c = l[d]) || ((c = l[d] = []).delegateCount = 0, p.setup && !1 !== p.setup.call(e, n, f, a) || e.addEventListener && e.addEventListener(d, a, !1)), 
            p.add && (p.add.call(e, u), u.handler.guid || (u.handler.guid = i.guid)), r ? c.splice(c.delegateCount++, 0, u) : c.push(u), 
            K.event.global[d] = !0);
        },
        "remove": function(e, t, i, n, r) {
            var s, a, o, l, h, u, p, c, d, f, y, m = fe.hasData(e) && fe.get(e);
            if (m && (l = m.events)) {
                for (h = (t = (t || "").match(ue) || [ "" ]).length; h--; ) if (o = xe.exec(t[h]) || [], 
                d = y = o[1], f = (o[2] || "").split(".").sort(), d) {
                    for (p = K.event.special[d] || {}, c = l[d = (n ? p.delegateType : p.bindType) || d] || [], 
                    o = o[2] && new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)"), a = s = c.length; s--; ) u = c[s], 
                    !r && y !== u.origType || i && i.guid !== u.guid || o && !o.test(u.namespace) || n && n !== u.selector && ("**" !== n || !u.selector) || (c.splice(s, 1), 
                    u.selector && c.delegateCount--, p.remove && p.remove.call(e, u));
                    a && !c.length && (p.teardown && !1 !== p.teardown.call(e, f, m.handle) || K.removeEvent(e, d, m.handle), 
                    delete l[d]);
                } else for (d in l) K.event.remove(e, d + t[h], i, n, !0);
                K.isEmptyObject(l) && (delete m.handle, fe.remove(e, "events"));
            }
        },
        "trigger": function(t, i, n, r) {
            var s, a, o, l, h, u, p, c = [ n || $ ], d = Z.call(t, "type") ? t.type : t, f = Z.call(t, "namespace") ? t.namespace.split(".") : [];
            if (a = o = n = n || $, 3 !== n.nodeType && 8 !== n.nodeType && !Se.test(d + K.event.triggered) && (d.indexOf(".") >= 0 && (d = (f = d.split(".")).shift(), 
            f.sort()), h = d.indexOf(":") < 0 && "on" + d, t = t[K.expando] ? t : new K.Event(d, "object" == typeof t && t), 
            t.isTrigger = r ? 2 : 3, t.namespace = f.join("."), t.namespace_re = t.namespace ? new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, 
            t.result = void 0, t.target || (t.target = n), i = null == i ? [ t ] : K.makeArray(i, [ t ]), 
            p = K.event.special[d] || {}, r || !p.trigger || !1 !== p.trigger.apply(n, i))) {
                if (!r && !p.noBubble && !K.isWindow(n)) {
                    for (l = p.delegateType || d, Se.test(l + d) || (a = a.parentNode); a; a = a.parentNode) c.push(a), 
                    o = a;
                    o === (n.ownerDocument || $) && c.push(o.defaultView || o.parentWindow || e);
                }
                for (s = 0; (a = c[s++]) && !t.isPropagationStopped(); ) t.type = s > 1 ? l : p.bindType || d, 
                (u = (fe.get(a, "events") || {})[t.type] && fe.get(a, "handle")) && u.apply(a, i), 
                (u = h && a[h]) && u.apply && K.acceptData(a) && (t.result = u.apply(a, i), !1 === t.result && t.preventDefault());
                return t.type = d, r || t.isDefaultPrevented() || p._default && !1 !== p._default.apply(c.pop(), i) || !K.acceptData(n) || h && K.isFunction(n[d]) && !K.isWindow(n) && ((o = n[h]) && (n[h] = null), 
                K.event.triggered = d, n[d](), K.event.triggered = void 0, o && (n[h] = o)), t.result;
            }
        },
        "dispatch": function(e) {
            e = K.event.fix(e);
            var t, i, n, r, s, a = [], o = H.call(arguments), l = (fe.get(this, "events") || {})[e.type] || [], h = K.event.special[e.type] || {};
            if (o[0] = e, e.delegateTarget = this, !h.preDispatch || !1 !== h.preDispatch.call(this, e)) {
                for (a = K.event.handlers.call(this, e, l), t = 0; (r = a[t++]) && !e.isPropagationStopped(); ) for (e.currentTarget = r.elem, 
                i = 0; (s = r.handlers[i++]) && !e.isImmediatePropagationStopped(); ) e.namespace_re && !e.namespace_re.test(s.namespace) || (e.handleObj = s, 
                e.data = s.data, void 0 !== (n = ((K.event.special[s.origType] || {}).handle || s.handler).apply(r.elem, o)) && !1 === (e.result = n) && (e.preventDefault(), 
                e.stopPropagation()));
                return h.postDispatch && h.postDispatch.call(this, e), e.result;
            }
        },
        "handlers": function(e, t) {
            var i, n, r, s, a = [], o = t.delegateCount, l = e.target;
            if (o && l.nodeType && (!e.button || "click" !== e.type)) for (;l !== this; l = l.parentNode || this) if (!0 !== l.disabled || "click" !== e.type) {
                for (n = [], i = 0; i < o; i++) void 0 === n[r = (s = t[i]).selector + " "] && (n[r] = s.needsContext ? K(r, this).index(l) >= 0 : K.find(r, this, null, [ l ]).length), 
                n[r] && n.push(s);
                n.length && a.push({
                    "elem": l,
                    "handlers": n
                });
            }
            return o < t.length && a.push({
                "elem": this,
                "handlers": t.slice(o)
            }), a;
        },
        "props": "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        "fixHooks": {},
        "keyHooks": {
            "props": "char charCode key keyCode".split(" "),
            "filter": function(e, t) {
                return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), 
                e;
            }
        },
        "mouseHooks": {
            "props": "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            "filter": function(e, t) {
                var i, n, r, s = t.button;
                return null == e.pageX && null != t.clientX && (n = (i = e.target.ownerDocument || $).documentElement, 
                r = i.body, e.pageX = t.clientX + (n && n.scrollLeft || r && r.scrollLeft || 0) - (n && n.clientLeft || r && r.clientLeft || 0), 
                e.pageY = t.clientY + (n && n.scrollTop || r && r.scrollTop || 0) - (n && n.clientTop || r && r.clientTop || 0)), 
                e.which || void 0 === s || (e.which = 1 & s ? 1 : 2 & s ? 3 : 4 & s ? 2 : 0), e;
            }
        },
        "fix": function(e) {
            if (e[K.expando]) return e;
            var t, i, n, r = e.type, s = e, a = this.fixHooks[r];
            for (a || (this.fixHooks[r] = a = Ce.test(r) ? this.mouseHooks : we.test(r) ? this.keyHooks : {}), 
            n = a.props ? this.props.concat(a.props) : this.props, e = new K.Event(s), t = n.length; t--; ) e[i = n[t]] = s[i];
            return e.target || (e.target = $), 3 === e.target.nodeType && (e.target = e.target.parentNode), 
            a.filter ? a.filter(e, s) : e;
        },
        "special": {
            "load": {
                "noBubble": !0
            },
            "focus": {
                "trigger": function() {
                    if (this !== p() && this.focus) return this.focus(), !1;
                },
                "delegateType": "focusin"
            },
            "blur": {
                "trigger": function() {
                    if (this === p() && this.blur) return this.blur(), !1;
                },
                "delegateType": "focusout"
            },
            "click": {
                "trigger": function() {
                    if ("checkbox" === this.type && this.click && K.nodeName(this, "input")) return this.click(), 
                    !1;
                },
                "_default": function(e) {
                    return K.nodeName(e.target, "a");
                }
            },
            "beforeunload": {
                "postDispatch": function(e) {
                    void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result);
                }
            }
        },
        "simulate": function(e, t, i, n) {
            var r = K.extend(new K.Event(), i, {
                "type": e,
                "isSimulated": !0,
                "originalEvent": {}
            });
            n ? K.event.trigger(r, null, t) : K.event.dispatch.call(t, r), r.isDefaultPrevented() && i.preventDefault();
        }
    }, K.removeEvent = function(e, t, i) {
        e.removeEventListener && e.removeEventListener(t, i, !1);
    }, K.Event = function(e, t) {
        if (!(this instanceof K.Event)) return new K.Event(e, t);
        e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && !1 === e.returnValue ? h : u) : this.type = e, 
        t && K.extend(this, t), this.timeStamp = e && e.timeStamp || K.now(), this[K.expando] = !0;
    }, K.Event.prototype = {
        "isDefaultPrevented": u,
        "isPropagationStopped": u,
        "isImmediatePropagationStopped": u,
        "preventDefault": function() {
            var e = this.originalEvent;
            this.isDefaultPrevented = h, e && e.preventDefault && e.preventDefault();
        },
        "stopPropagation": function() {
            var e = this.originalEvent;
            this.isPropagationStopped = h, e && e.stopPropagation && e.stopPropagation();
        },
        "stopImmediatePropagation": function() {
            var e = this.originalEvent;
            this.isImmediatePropagationStopped = h, e && e.stopImmediatePropagation && e.stopImmediatePropagation(), 
            this.stopPropagation();
        }
    }, K.each({
        "mouseenter": "mouseover",
        "mouseleave": "mouseout",
        "pointerenter": "pointerover",
        "pointerleave": "pointerout"
    }, function(e, t) {
        K.event.special[e] = {
            "delegateType": t,
            "bindType": t,
            "handle": function(e) {
                var i, n = this, r = e.relatedTarget, s = e.handleObj;
                return r && (r === n || K.contains(n, r)) || (e.type = s.origType, i = s.handler.apply(this, arguments), 
                e.type = t), i;
            }
        };
    }), Y.focusinBubbles || K.each({
        "focus": "focusin",
        "blur": "focusout"
    }, function(e, t) {
        var i = function(e) {
            K.event.simulate(t, e.target, K.event.fix(e), !0);
        };
        K.event.special[t] = {
            "setup": function() {
                var n = this.ownerDocument || this, r = fe.access(n, t);
                r || n.addEventListener(e, i, !0), fe.access(n, t, (r || 0) + 1);
            },
            "teardown": function() {
                var n = this.ownerDocument || this, r = fe.access(n, t) - 1;
                r ? fe.access(n, t, r) : (n.removeEventListener(e, i, !0), fe.remove(n, t));
            }
        };
    }), K.fn.extend({
        "on": function(e, t, i, n, r) {
            var s, a;
            if ("object" == typeof e) {
                "string" != typeof t && (i = i || t, t = void 0);
                for (a in e) this.on(a, t, i, e[a], r);
                return this;
            }
            if (null == i && null == n ? (n = t, i = t = void 0) : null == n && ("string" == typeof t ? (n = i, 
            i = void 0) : (n = i, i = t, t = void 0)), !1 === n) n = u; else if (!n) return this;
            return 1 === r && (s = n, (n = function(e) {
                return K().off(e), s.apply(this, arguments);
            }).guid = s.guid || (s.guid = K.guid++)), this.each(function() {
                K.event.add(this, e, n, i, t);
            });
        },
        "one": function(e, t, i, n) {
            return this.on(e, t, i, n, 1);
        },
        "off": function(e, t, i) {
            var n, r;
            if (e && e.preventDefault && e.handleObj) return n = e.handleObj, K(e.delegateTarget).off(n.namespace ? n.origType + "." + n.namespace : n.origType, n.selector, n.handler), 
            this;
            if ("object" == typeof e) {
                for (r in e) this.off(r, t, e[r]);
                return this;
            }
            return !1 !== t && "function" != typeof t || (i = t, t = void 0), !1 === i && (i = u), 
            this.each(function() {
                K.event.remove(this, e, i, t);
            });
        },
        "trigger": function(e, t) {
            return this.each(function() {
                K.event.trigger(e, t, this);
            });
        },
        "triggerHandler": function(e, t) {
            var i = this[0];
            if (i) return K.event.trigger(e, t, i, !0);
        }
    });
    var _e = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, Ee = /<([\w:]+)/, Ne = /<|&#?\w+;/, Pe = /<(?:script|style|link)/i, Te = /checked\s*(?:[^=]|=\s*.checked.)/i, Me = /^$|\/(?:java|ecma)script/i, Fe = /^true\/(.*)/, Ae = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, ke = {
        "option": [ 1, "<select multiple='multiple'>", "</select>" ],
        "thead": [ 1, "<table>", "</table>" ],
        "col": [ 2, "<table><colgroup>", "</colgroup></table>" ],
        "tr": [ 2, "<table><tbody>", "</tbody></table>" ],
        "td": [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],
        "_default": [ 0, "", "" ]
    };
    ke.optgroup = ke.option, ke.tbody = ke.tfoot = ke.colgroup = ke.caption = ke.thead, 
    ke.th = ke.td, K.extend({
        "clone": function(e, t, i) {
            var n, r, s, a, o = e.cloneNode(!0), l = K.contains(e.ownerDocument, e);
            if (!(Y.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || K.isXMLDoc(e))) for (a = g(o), 
            n = 0, r = (s = g(e)).length; n < r; n++) v(s[n], a[n]);
            if (t) if (i) for (s = s || g(e), a = a || g(o), n = 0, r = s.length; n < r; n++) m(s[n], a[n]); else m(e, o);
            return (a = g(o, "script")).length > 0 && y(a, !l && g(e, "script")), o;
        },
        "buildFragment": function(e, t, i, n) {
            for (var r, s, a, o, l, h, u = t.createDocumentFragment(), p = [], c = 0, d = e.length; c < d; c++) if ((r = e[c]) || 0 === r) if ("object" === K.type(r)) K.merge(p, r.nodeType ? [ r ] : r); else if (Ne.test(r)) {
                for (s = s || u.appendChild(t.createElement("div")), a = (Ee.exec(r) || [ "", "" ])[1].toLowerCase(), 
                o = ke[a] || ke._default, s.innerHTML = o[1] + r.replace(_e, "<$1></$2>") + o[2], 
                h = o[0]; h--; ) s = s.lastChild;
                K.merge(p, s.childNodes), (s = u.firstChild).textContent = "";
            } else p.push(t.createTextNode(r));
            for (u.textContent = "", c = 0; r = p[c++]; ) if ((!n || -1 === K.inArray(r, n)) && (l = K.contains(r.ownerDocument, r), 
            s = g(u.appendChild(r), "script"), l && y(s), i)) for (h = 0; r = s[h++]; ) Me.test(r.type || "") && i.push(r);
            return u;
        },
        "cleanData": function(e) {
            for (var t, i, n, r, s = K.event.special, a = 0; void 0 !== (i = e[a]); a++) {
                if (K.acceptData(i) && (r = i[fe.expando]) && (t = fe.cache[r])) {
                    if (t.events) for (n in t.events) s[n] ? K.event.remove(i, n) : K.removeEvent(i, n, t.handle);
                    fe.cache[r] && delete fe.cache[r];
                }
                delete ye.cache[i[ye.expando]];
            }
        }
    }), K.fn.extend({
        "text": function(e) {
            return de(this, function(e) {
                return void 0 === e ? K.text(this) : this.empty().each(function() {
                    1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e);
                });
            }, null, e, arguments.length);
        },
        "append": function() {
            return this.domManip(arguments, function(e) {
                1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || c(this, e).appendChild(e);
            });
        },
        "prepend": function() {
            return this.domManip(arguments, function(e) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = c(this, e);
                    t.insertBefore(e, t.firstChild);
                }
            });
        },
        "before": function() {
            return this.domManip(arguments, function(e) {
                this.parentNode && this.parentNode.insertBefore(e, this);
            });
        },
        "after": function() {
            return this.domManip(arguments, function(e) {
                this.parentNode && this.parentNode.insertBefore(e, this.nextSibling);
            });
        },
        "remove": function(e, t) {
            for (var i, n = e ? K.filter(e, this) : this, r = 0; null != (i = n[r]); r++) t || 1 !== i.nodeType || K.cleanData(g(i)), 
            i.parentNode && (t && K.contains(i.ownerDocument, i) && y(g(i, "script")), i.parentNode.removeChild(i));
            return this;
        },
        "empty": function() {
            for (var e, t = 0; null != (e = this[t]); t++) 1 === e.nodeType && (K.cleanData(g(e, !1)), 
            e.textContent = "");
            return this;
        },
        "clone": function(e, t) {
            return e = null != e && e, t = null == t ? e : t, this.map(function() {
                return K.clone(this, e, t);
            });
        },
        "html": function(e) {
            return de(this, function(e) {
                var t = this[0] || {}, i = 0, n = this.length;
                if (void 0 === e && 1 === t.nodeType) return t.innerHTML;
                if ("string" == typeof e && !Pe.test(e) && !ke[(Ee.exec(e) || [ "", "" ])[1].toLowerCase()]) {
                    e = e.replace(_e, "<$1></$2>");
                    try {
                        for (;i < n; i++) 1 === (t = this[i] || {}).nodeType && (K.cleanData(g(t, !1)), 
                        t.innerHTML = e);
                        t = 0;
                    } catch (e) {}
                }
                t && this.empty().append(e);
            }, null, e, arguments.length);
        },
        "replaceWith": function() {
            var e = arguments[0];
            return this.domManip(arguments, function(t) {
                e = this.parentNode, K.cleanData(g(this)), e && e.replaceChild(t, this);
            }), e && (e.length || e.nodeType) ? this : this.remove();
        },
        "detach": function(e) {
            return this.remove(e, !0);
        },
        "domManip": function(e, t) {
            e = j.apply([], e);
            var i, n, r, s, a, o, l = 0, h = this.length, u = this, p = h - 1, c = e[0], y = K.isFunction(c);
            if (y || h > 1 && "string" == typeof c && !Y.checkClone && Te.test(c)) return this.each(function(i) {
                var n = u.eq(i);
                y && (e[0] = c.call(this, i, n.html())), n.domManip(e, t);
            });
            if (h && (i = K.buildFragment(e, this[0].ownerDocument, !1, this), n = i.firstChild, 
            1 === i.childNodes.length && (i = n), n)) {
                for (s = (r = K.map(g(i, "script"), d)).length; l < h; l++) a = i, l !== p && (a = K.clone(a, !0, !0), 
                s && K.merge(r, g(a, "script"))), t.call(this[l], a, l);
                if (s) for (o = r[r.length - 1].ownerDocument, K.map(r, f), l = 0; l < s; l++) a = r[l], 
                Me.test(a.type || "") && !fe.access(a, "globalEval") && K.contains(o, a) && (a.src ? K._evalUrl && K._evalUrl(a.src) : K.globalEval(a.textContent.replace(Ae, "")));
            }
            return this;
        }
    }), K.each({
        "appendTo": "append",
        "prependTo": "prepend",
        "insertBefore": "before",
        "insertAfter": "after",
        "replaceAll": "replaceWith"
    }, function(e, t) {
        K.fn[e] = function(e) {
            for (var i, n = [], r = K(e), s = r.length - 1, a = 0; a <= s; a++) i = a === s ? this : this.clone(!0), 
            K(r[a])[t](i), V.apply(n, i.get());
            return this.pushStack(n);
        };
    });
    var Ie, Re = {}, De = /^margin/, ze = new RegExp("^(" + ve + ")(?!px)[a-z%]+$", "i"), Be = function(t) {
        return t.ownerDocument.defaultView.opener ? t.ownerDocument.defaultView.getComputedStyle(t, null) : e.getComputedStyle(t, null);
    };
    !function() {
        function t() {
            a.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", 
            a.innerHTML = "", r.appendChild(s);
            var t = e.getComputedStyle(a, null);
            i = "1%" !== t.top, n = "4px" === t.width, r.removeChild(s);
        }
        var i, n, r = $.documentElement, s = $.createElement("div"), a = $.createElement("div");
        a.style && (a.style.backgroundClip = "content-box", a.cloneNode(!0).style.backgroundClip = "", 
        Y.clearCloneStyle = "content-box" === a.style.backgroundClip, s.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute", 
        s.appendChild(a), e.getComputedStyle && K.extend(Y, {
            "pixelPosition": function() {
                return t(), i;
            },
            "boxSizingReliable": function() {
                return null == n && t(), n;
            },
            "reliableMarginRight": function() {
                var t, i = a.appendChild($.createElement("div"));
                return i.style.cssText = a.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", 
                i.style.marginRight = i.style.width = "0", a.style.width = "1px", r.appendChild(s), 
                t = !parseFloat(e.getComputedStyle(i, null).marginRight), r.removeChild(s), a.removeChild(i), 
                t;
            }
        }));
    }(), K.swap = function(e, t, i, n) {
        var r, s, a = {};
        for (s in t) a[s] = e.style[s], e.style[s] = t[s];
        r = i.apply(e, n || []);
        for (s in t) e.style[s] = a[s];
        return r;
    };
    var Ue = /^(none|table(?!-c[ea]).+)/, Ge = new RegExp("^(" + ve + ")(.*)$", "i"), He = new RegExp("^([+-])=(" + ve + ")", "i"), je = {
        "position": "absolute",
        "visibility": "hidden",
        "display": "block"
    }, Ve = {
        "letterSpacing": "0",
        "fontWeight": "400"
    }, We = [ "Webkit", "O", "Moz", "ms" ];
    K.extend({
        "cssHooks": {
            "opacity": {
                "get": function(e, t) {
                    if (t) {
                        var i = b(e, "opacity");
                        return "" === i ? "1" : i;
                    }
                }
            }
        },
        "cssNumber": {
            "columnCount": !0,
            "fillOpacity": !0,
            "flexGrow": !0,
            "flexShrink": !0,
            "fontWeight": !0,
            "lineHeight": !0,
            "opacity": !0,
            "order": !0,
            "orphans": !0,
            "widows": !0,
            "zIndex": !0,
            "zoom": !0
        },
        "cssProps": {
            "float": "cssFloat"
        },
        "style": function(e, t, i, n) {
            if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                var r, s, a, o = K.camelCase(t), l = e.style;
                if (t = K.cssProps[o] || (K.cssProps[o] = C(l, o)), a = K.cssHooks[t] || K.cssHooks[o], 
                void 0 === i) return a && "get" in a && void 0 !== (r = a.get(e, !1, n)) ? r : l[t];
                "string" == (s = typeof i) && (r = He.exec(i)) && (i = (r[1] + 1) * r[2] + parseFloat(K.css(e, t)), 
                s = "number"), null != i && i === i && ("number" !== s || K.cssNumber[o] || (i += "px"), 
                Y.clearCloneStyle || "" !== i || 0 !== t.indexOf("background") || (l[t] = "inherit"), 
                a && "set" in a && void 0 === (i = a.set(e, i, n)) || (l[t] = i));
            }
        },
        "css": function(e, t, i, n) {
            var r, s, a, o = K.camelCase(t);
            return t = K.cssProps[o] || (K.cssProps[o] = C(e.style, o)), (a = K.cssHooks[t] || K.cssHooks[o]) && "get" in a && (r = a.get(e, !0, i)), 
            void 0 === r && (r = b(e, t, n)), "normal" === r && t in Ve && (r = Ve[t]), "" === i || i ? (s = parseFloat(r), 
            !0 === i || K.isNumeric(s) ? s || 0 : r) : r;
        }
    }), K.each([ "height", "width" ], function(e, t) {
        K.cssHooks[t] = {
            "get": function(e, i, n) {
                if (i) return Ue.test(K.css(e, "display")) && 0 === e.offsetWidth ? K.swap(e, je, function() {
                    return _(e, t, n);
                }) : _(e, t, n);
            },
            "set": function(e, i, n) {
                var r = n && Be(e);
                return S(0, i, n ? x(e, t, n, "border-box" === K.css(e, "boxSizing", !1, r), r) : 0);
            }
        };
    }), K.cssHooks.marginRight = w(Y.reliableMarginRight, function(e, t) {
        if (t) return K.swap(e, {
            "display": "inline-block"
        }, b, [ e, "marginRight" ]);
    }), K.each({
        "margin": "",
        "padding": "",
        "border": "Width"
    }, function(e, t) {
        K.cssHooks[e + t] = {
            "expand": function(i) {
                for (var n = 0, r = {}, s = "string" == typeof i ? i.split(" ") : [ i ]; n < 4; n++) r[e + Le[n] + t] = s[n] || s[n - 2] || s[0];
                return r;
            }
        }, De.test(e) || (K.cssHooks[e + t].set = S);
    }), K.fn.extend({
        "css": function(e, t) {
            return de(this, function(e, t, i) {
                var n, r, s = {}, a = 0;
                if (K.isArray(t)) {
                    for (n = Be(e), r = t.length; a < r; a++) s[t[a]] = K.css(e, t[a], !1, n);
                    return s;
                }
                return void 0 !== i ? K.style(e, t, i) : K.css(e, t);
            }, e, t, arguments.length > 1);
        },
        "show": function() {
            return E(this, !0);
        },
        "hide": function() {
            return E(this);
        },
        "toggle": function(e) {
            return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function() {
                Oe(this) ? K(this).show() : K(this).hide();
            });
        }
    }), K.Tween = N, N.prototype = {
        "constructor": N,
        "init": function(e, t, i, n, r, s) {
            this.elem = e, this.prop = i, this.easing = r || "swing", this.options = t, this.start = this.now = this.cur(), 
            this.end = n, this.unit = s || (K.cssNumber[i] ? "" : "px");
        },
        "cur": function() {
            var e = N.propHooks[this.prop];
            return e && e.get ? e.get(this) : N.propHooks._default.get(this);
        },
        "run": function(e) {
            var t, i = N.propHooks[this.prop];
            return this.options.duration ? this.pos = t = K.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, 
            this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), 
            i && i.set ? i.set(this) : N.propHooks._default.set(this), this;
        }
    }, N.prototype.init.prototype = N.prototype, N.propHooks = {
        "_default": {
            "get": function(e) {
                var t;
                return null == e.elem[e.prop] || e.elem.style && null != e.elem.style[e.prop] ? (t = K.css(e.elem, e.prop, "")) && "auto" !== t ? t : 0 : e.elem[e.prop];
            },
            "set": function(e) {
                K.fx.step[e.prop] ? K.fx.step[e.prop](e) : e.elem.style && (null != e.elem.style[K.cssProps[e.prop]] || K.cssHooks[e.prop]) ? K.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now;
            }
        }
    }, N.propHooks.scrollTop = N.propHooks.scrollLeft = {
        "set": function(e) {
            e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now);
        }
    }, K.easing = {
        "linear": function(e) {
            return e;
        },
        "swing": function(e) {
            return .5 - Math.cos(e * Math.PI) / 2;
        }
    }, K.fx = N.prototype.init, K.fx.step = {};
    var qe, Xe, Ze = /^(?:toggle|show|hide)$/, Ye = new RegExp("^(?:([+-])=|)(" + ve + ")([a-z%]*)$", "i"), $e = /queueHooks$/, Ke = [ function(e, t, i) {
        var n, r, s, a, o, l, h, u = this, p = {}, c = e.style, d = e.nodeType && Oe(e), f = fe.get(e, "fxshow");
        i.queue || (null == (o = K._queueHooks(e, "fx")).unqueued && (o.unqueued = 0, l = o.empty.fire, 
        o.empty.fire = function() {
            o.unqueued || l();
        }), o.unqueued++, u.always(function() {
            u.always(function() {
                o.unqueued--, K.queue(e, "fx").length || o.empty.fire();
            });
        })), 1 === e.nodeType && ("height" in t || "width" in t) && (i.overflow = [ c.overflow, c.overflowX, c.overflowY ], 
        "inline" === ("none" === (h = K.css(e, "display")) ? fe.get(e, "olddisplay") || O(e.nodeName) : h) && "none" === K.css(e, "float") && (c.display = "inline-block")), 
        i.overflow && (c.overflow = "hidden", u.always(function() {
            c.overflow = i.overflow[0], c.overflowX = i.overflow[1], c.overflowY = i.overflow[2];
        }));
        for (n in t) if (r = t[n], Ze.exec(r)) {
            if (delete t[n], s = s || "toggle" === r, r === (d ? "hide" : "show")) {
                if ("show" !== r || !f || void 0 === f[n]) continue;
                d = !0;
            }
            p[n] = f && f[n] || K.style(e, n);
        } else h = void 0;
        if (K.isEmptyObject(p)) "inline" === ("none" === h ? O(e.nodeName) : h) && (c.display = h); else {
            f ? "hidden" in f && (d = f.hidden) : f = fe.access(e, "fxshow", {}), s && (f.hidden = !d), 
            d ? K(e).show() : u.done(function() {
                K(e).hide();
            }), u.done(function() {
                var t;
                fe.remove(e, "fxshow");
                for (t in p) K.style(e, t, p[t]);
            });
            for (n in p) a = M(d ? f[n] : 0, n, u), n in f || (f[n] = a.start, d && (a.end = a.start, 
            a.start = "width" === n || "height" === n ? 1 : 0));
        }
    } ], Qe = {
        "*": [ function(e, t) {
            var i = this.createTween(e, t), n = i.cur(), r = Ye.exec(t), s = r && r[3] || (K.cssNumber[e] ? "" : "px"), a = (K.cssNumber[e] || "px" !== s && +n) && Ye.exec(K.css(i.elem, e)), o = 1, l = 20;
            if (a && a[3] !== s) {
                s = s || a[3], r = r || [], a = +n || 1;
                do {
                    a /= o = o || ".5", K.style(i.elem, e, a + s);
                } while (o !== (o = i.cur() / n) && 1 !== o && --l);
            }
            return r && (a = i.start = +a || +n || 0, i.unit = s, i.end = r[1] ? a + (r[1] + 1) * r[2] : +r[2]), 
            i;
        } ]
    };
    K.Animation = K.extend(A, {
        "tweener": function(e, t) {
            K.isFunction(e) ? (t = e, e = [ "*" ]) : e = e.split(" ");
            for (var i, n = 0, r = e.length; n < r; n++) i = e[n], Qe[i] = Qe[i] || [], Qe[i].unshift(t);
        },
        "prefilter": function(e, t) {
            t ? Ke.unshift(e) : Ke.push(e);
        }
    }), K.speed = function(e, t, i) {
        var n = e && "object" == typeof e ? K.extend({}, e) : {
            "complete": i || !i && t || K.isFunction(e) && e,
            "duration": e,
            "easing": i && t || t && !K.isFunction(t) && t
        };
        return n.duration = K.fx.off ? 0 : "number" == typeof n.duration ? n.duration : n.duration in K.fx.speeds ? K.fx.speeds[n.duration] : K.fx.speeds._default, 
        null != n.queue && !0 !== n.queue || (n.queue = "fx"), n.old = n.complete, n.complete = function() {
            K.isFunction(n.old) && n.old.call(this), n.queue && K.dequeue(this, n.queue);
        }, n;
    }, K.fn.extend({
        "fadeTo": function(e, t, i, n) {
            return this.filter(Oe).css("opacity", 0).show().end().animate({
                "opacity": t
            }, e, i, n);
        },
        "animate": function(e, t, i, n) {
            var r = K.isEmptyObject(e), s = K.speed(t, i, n), a = function() {
                var t = A(this, K.extend({}, e), s);
                (r || fe.get(this, "finish")) && t.stop(!0);
            };
            return a.finish = a, r || !1 === s.queue ? this.each(a) : this.queue(s.queue, a);
        },
        "stop": function(e, t, i) {
            var n = function(e) {
                var t = e.stop;
                delete e.stop, t(i);
            };
            return "string" != typeof e && (i = t, t = e, e = void 0), t && !1 !== e && this.queue(e || "fx", []), 
            this.each(function() {
                var t = !0, r = null != e && e + "queueHooks", s = K.timers, a = fe.get(this);
                if (r) a[r] && a[r].stop && n(a[r]); else for (r in a) a[r] && a[r].stop && $e.test(r) && n(a[r]);
                for (r = s.length; r--; ) s[r].elem !== this || null != e && s[r].queue !== e || (s[r].anim.stop(i), 
                t = !1, s.splice(r, 1));
                !t && i || K.dequeue(this, e);
            });
        },
        "finish": function(e) {
            return !1 !== e && (e = e || "fx"), this.each(function() {
                var t, i = fe.get(this), n = i[e + "queue"], r = i[e + "queueHooks"], s = K.timers, a = n ? n.length : 0;
                for (i.finish = !0, K.queue(this, e, []), r && r.stop && r.stop.call(this, !0), 
                t = s.length; t--; ) s[t].elem === this && s[t].queue === e && (s[t].anim.stop(!0), 
                s.splice(t, 1));
                for (t = 0; t < a; t++) n[t] && n[t].finish && n[t].finish.call(this);
                delete i.finish;
            });
        }
    }), K.each([ "toggle", "show", "hide" ], function(e, t) {
        var i = K.fn[t];
        K.fn[t] = function(e, n, r) {
            return null == e || "boolean" == typeof e ? i.apply(this, arguments) : this.animate(T(t, !0), e, n, r);
        };
    }), K.each({
        "slideDown": T("show"),
        "slideUp": T("hide"),
        "slideToggle": T("toggle"),
        "fadeIn": {
            "opacity": "show"
        },
        "fadeOut": {
            "opacity": "hide"
        },
        "fadeToggle": {
            "opacity": "toggle"
        }
    }, function(e, t) {
        K.fn[e] = function(e, i, n) {
            return this.animate(t, e, i, n);
        };
    }), K.timers = [], K.fx.tick = function() {
        var e, t = 0, i = K.timers;
        for (qe = K.now(); t < i.length; t++) (e = i[t])() || i[t] !== e || i.splice(t--, 1);
        i.length || K.fx.stop(), qe = void 0;
    }, K.fx.timer = function(e) {
        K.timers.push(e), e() ? K.fx.start() : K.timers.pop();
    }, K.fx.interval = 13, K.fx.start = function() {
        Xe || (Xe = setInterval(K.fx.tick, K.fx.interval));
    }, K.fx.stop = function() {
        clearInterval(Xe), Xe = null;
    }, K.fx.speeds = {
        "slow": 600,
        "fast": 200,
        "_default": 400
    }, K.fn.delay = function(e, t) {
        return e = K.fx ? K.fx.speeds[e] || e : e, t = t || "fx", this.queue(t, function(t, i) {
            var n = setTimeout(t, e);
            i.stop = function() {
                clearTimeout(n);
            };
        });
    }, function() {
        var e = $.createElement("input"), t = $.createElement("select"), i = t.appendChild($.createElement("option"));
        e.type = "checkbox", Y.checkOn = "" !== e.value, Y.optSelected = i.selected, t.disabled = !0, 
        Y.optDisabled = !i.disabled, (e = $.createElement("input")).value = "t", e.type = "radio", 
        Y.radioValue = "t" === e.value;
    }();
    var Je, et = K.expr.attrHandle;
    K.fn.extend({
        "attr": function(e, t) {
            return de(this, K.attr, e, t, arguments.length > 1);
        },
        "removeAttr": function(e) {
            return this.each(function() {
                K.removeAttr(this, e);
            });
        }
    }), K.extend({
        "attr": function(e, t, i) {
            var n, r, s = e.nodeType;
            if (e && 3 !== s && 8 !== s && 2 !== s) return void 0 === e.getAttribute ? K.prop(e, t, i) : (1 === s && K.isXMLDoc(e) || (t = t.toLowerCase(), 
            n = K.attrHooks[t] || (K.expr.match.bool.test(t) ? Je : void 0)), void 0 === i ? n && "get" in n && null !== (r = n.get(e, t)) ? r : null == (r = K.find.attr(e, t)) ? void 0 : r : null !== i ? n && "set" in n && void 0 !== (r = n.set(e, i, t)) ? r : (e.setAttribute(t, i + ""), 
            i) : void K.removeAttr(e, t));
        },
        "removeAttr": function(e, t) {
            var i, n, r = 0, s = t && t.match(ue);
            if (s && 1 === e.nodeType) for (;i = s[r++]; ) n = K.propFix[i] || i, K.expr.match.bool.test(i) && (e[n] = !1), 
            e.removeAttribute(i);
        },
        "attrHooks": {
            "type": {
                "set": function(e, t) {
                    if (!Y.radioValue && "radio" === t && K.nodeName(e, "input")) {
                        var i = e.value;
                        return e.setAttribute("type", t), i && (e.value = i), t;
                    }
                }
            }
        }
    }), Je = {
        "set": function(e, t, i) {
            return !1 === t ? K.removeAttr(e, i) : e.setAttribute(i, i), i;
        }
    }, K.each(K.expr.match.bool.source.match(/\w+/g), function(e, t) {
        var i = et[t] || K.find.attr;
        et[t] = function(e, t, n) {
            var r, s;
            return n || (s = et[t], et[t] = r, r = null != i(e, t, n) ? t.toLowerCase() : null, 
            et[t] = s), r;
        };
    });
    var tt = /^(?:input|select|textarea|button)$/i;
    K.fn.extend({
        "prop": function(e, t) {
            return de(this, K.prop, e, t, arguments.length > 1);
        },
        "removeProp": function(e) {
            return this.each(function() {
                delete this[K.propFix[e] || e];
            });
        }
    }), K.extend({
        "propFix": {
            "for": "htmlFor",
            "class": "className"
        },
        "prop": function(e, t, i) {
            var n, r, s = e.nodeType;
            if (e && 3 !== s && 8 !== s && 2 !== s) return (1 !== s || !K.isXMLDoc(e)) && (t = K.propFix[t] || t, 
            r = K.propHooks[t]), void 0 !== i ? r && "set" in r && void 0 !== (n = r.set(e, i, t)) ? n : e[t] = i : r && "get" in r && null !== (n = r.get(e, t)) ? n : e[t];
        },
        "propHooks": {
            "tabIndex": {
                "get": function(e) {
                    return e.hasAttribute("tabindex") || tt.test(e.nodeName) || e.href ? e.tabIndex : -1;
                }
            }
        }
    }), Y.optSelected || (K.propHooks.selected = {
        "get": function(e) {
            var t = e.parentNode;
            return t && t.parentNode && t.parentNode.selectedIndex, null;
        }
    }), K.each([ "tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable" ], function() {
        K.propFix[this.toLowerCase()] = this;
    });
    var it = /[\t\r\n\f]/g;
    K.fn.extend({
        "addClass": function(e) {
            var t, i, n, r, s, a, o = "string" == typeof e && e, l = 0, h = this.length;
            if (K.isFunction(e)) return this.each(function(t) {
                K(this).addClass(e.call(this, t, this.className));
            });
            if (o) for (t = (e || "").match(ue) || []; l < h; l++) if (i = this[l], n = 1 === i.nodeType && (i.className ? (" " + i.className + " ").replace(it, " ") : " ")) {
                for (s = 0; r = t[s++]; ) n.indexOf(" " + r + " ") < 0 && (n += r + " ");
                a = K.trim(n), i.className !== a && (i.className = a);
            }
            return this;
        },
        "removeClass": function(e) {
            var t, i, n, r, s, a, o = 0 === arguments.length || "string" == typeof e && e, l = 0, h = this.length;
            if (K.isFunction(e)) return this.each(function(t) {
                K(this).removeClass(e.call(this, t, this.className));
            });
            if (o) for (t = (e || "").match(ue) || []; l < h; l++) if (i = this[l], n = 1 === i.nodeType && (i.className ? (" " + i.className + " ").replace(it, " ") : "")) {
                for (s = 0; r = t[s++]; ) for (;n.indexOf(" " + r + " ") >= 0; ) n = n.replace(" " + r + " ", " ");
                a = e ? K.trim(n) : "", i.className !== a && (i.className = a);
            }
            return this;
        },
        "toggleClass": function(e, t) {
            var i = typeof e;
            return "boolean" == typeof t && "string" === i ? t ? this.addClass(e) : this.removeClass(e) : K.isFunction(e) ? this.each(function(i) {
                K(this).toggleClass(e.call(this, i, this.className, t), t);
            }) : this.each(function() {
                if ("string" === i) for (var t, n = 0, r = K(this), s = e.match(ue) || []; t = s[n++]; ) r.hasClass(t) ? r.removeClass(t) : r.addClass(t); else "undefined" !== i && "boolean" !== i || (this.className && fe.set(this, "__className__", this.className), 
                this.className = this.className || !1 === e ? "" : fe.get(this, "__className__") || "");
            });
        },
        "hasClass": function(e) {
            for (var t = " " + e + " ", i = 0, n = this.length; i < n; i++) if (1 === this[i].nodeType && (" " + this[i].className + " ").replace(it, " ").indexOf(t) >= 0) return !0;
            return !1;
        }
    });
    var nt = /\r/g;
    K.fn.extend({
        "val": function(e) {
            var t, i, n, r = this[0];
            {
                if (arguments.length) return n = K.isFunction(e), this.each(function(i) {
                    var r;
                    1 === this.nodeType && (null == (r = n ? e.call(this, i, K(this).val()) : e) ? r = "" : "number" == typeof r ? r += "" : K.isArray(r) && (r = K.map(r, function(e) {
                        return null == e ? "" : e + "";
                    })), (t = K.valHooks[this.type] || K.valHooks[this.nodeName.toLowerCase()]) && "set" in t && void 0 !== t.set(this, r, "value") || (this.value = r));
                });
                if (r) return (t = K.valHooks[r.type] || K.valHooks[r.nodeName.toLowerCase()]) && "get" in t && void 0 !== (i = t.get(r, "value")) ? i : "string" == typeof (i = r.value) ? i.replace(nt, "") : null == i ? "" : i;
            }
        }
    }), K.extend({
        "valHooks": {
            "option": {
                "get": function(e) {
                    var t = K.find.attr(e, "value");
                    return null != t ? t : K.trim(K.text(e));
                }
            },
            "select": {
                "get": function(e) {
                    for (var t, i, n = e.options, r = e.selectedIndex, s = "select-one" === e.type || r < 0, a = s ? null : [], o = s ? r + 1 : n.length, l = r < 0 ? o : s ? r : 0; l < o; l++) if (((i = n[l]).selected || l === r) && (Y.optDisabled ? !i.disabled : null === i.getAttribute("disabled")) && (!i.parentNode.disabled || !K.nodeName(i.parentNode, "optgroup"))) {
                        if (t = K(i).val(), s) return t;
                        a.push(t);
                    }
                    return a;
                },
                "set": function(e, t) {
                    for (var i, n, r = e.options, s = K.makeArray(t), a = r.length; a--; ) ((n = r[a]).selected = K.inArray(n.value, s) >= 0) && (i = !0);
                    return i || (e.selectedIndex = -1), s;
                }
            }
        }
    }), K.each([ "radio", "checkbox" ], function() {
        K.valHooks[this] = {
            "set": function(e, t) {
                if (K.isArray(t)) return e.checked = K.inArray(K(e).val(), t) >= 0;
            }
        }, Y.checkOn || (K.valHooks[this].get = function(e) {
            return null === e.getAttribute("value") ? "on" : e.value;
        });
    }), K.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(e, t) {
        K.fn[t] = function(e, i) {
            return arguments.length > 0 ? this.on(t, null, e, i) : this.trigger(t);
        };
    }), K.fn.extend({
        "hover": function(e, t) {
            return this.mouseenter(e).mouseleave(t || e);
        },
        "bind": function(e, t, i) {
            return this.on(e, null, t, i);
        },
        "unbind": function(e, t) {
            return this.off(e, null, t);
        },
        "delegate": function(e, t, i, n) {
            return this.on(t, e, i, n);
        },
        "undelegate": function(e, t, i) {
            return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", i);
        }
    });
    var rt = K.now(), st = /\?/;
    K.parseJSON = function(e) {
        return JSON.parse(e + "");
    }, K.parseXML = function(e) {
        var t, i;
        if (!e || "string" != typeof e) return null;
        try {
            i = new DOMParser(), t = i.parseFromString(e, "text/xml");
        } catch (e) {
            t = void 0;
        }
        return t && !t.getElementsByTagName("parsererror").length || K.error("Invalid XML: " + e), 
        t;
    };
    var at = /#.*$/, ot = /([?&])_=[^&]*/, lt = /^(.*?):[ \t]*([^\r\n]*)$/gm, ht = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/, ut = /^(?:GET|HEAD)$/, pt = /^\/\//, ct = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/, dt = {}, ft = {}, yt = "*/".concat("*"), mt = e.location.href, gt = ct.exec(mt.toLowerCase()) || [];
    K.extend({
        "active": 0,
        "lastModified": {},
        "etag": {},
        "ajaxSettings": {
            "url": mt,
            "type": "GET",
            "isLocal": ht.test(gt[1]),
            "global": !0,
            "processData": !0,
            "async": !0,
            "contentType": "application/x-www-form-urlencoded; charset=UTF-8",
            "accepts": {
                "*": yt,
                "text": "text/plain",
                "html": "text/html",
                "xml": "application/xml, text/xml",
                "json": "application/json, text/javascript"
            },
            "contents": {
                "xml": /xml/,
                "html": /html/,
                "json": /json/
            },
            "responseFields": {
                "xml": "responseXML",
                "text": "responseText",
                "json": "responseJSON"
            },
            "converters": {
                "* text": String,
                "text html": !0,
                "text json": K.parseJSON,
                "text xml": K.parseXML
            },
            "flatOptions": {
                "url": !0,
                "context": !0
            }
        },
        "ajaxSetup": function(e, t) {
            return t ? R(R(e, K.ajaxSettings), t) : R(K.ajaxSettings, e);
        },
        "ajaxPrefilter": k(dt),
        "ajaxTransport": k(ft),
        "ajax": function(e, t) {
            function i(e, t, i, a) {
                var l, u, g, v, O, w = t;
                2 !== L && (L = 2, o && clearTimeout(o), n = void 0, s = a || "", b.readyState = e > 0 ? 4 : 0, 
                l = e >= 200 && e < 300 || 304 === e, i && (v = D(p, b, i)), v = z(p, v, b, l), 
                l ? (p.ifModified && ((O = b.getResponseHeader("Last-Modified")) && (K.lastModified[r] = O), 
                (O = b.getResponseHeader("etag")) && (K.etag[r] = O)), 204 === e || "HEAD" === p.type ? w = "nocontent" : 304 === e ? w = "notmodified" : (w = v.state, 
                u = v.data, l = !(g = v.error))) : (g = w, !e && w || (w = "error", e < 0 && (e = 0))), 
                b.status = e, b.statusText = (t || w) + "", l ? f.resolveWith(c, [ u, w, b ]) : f.rejectWith(c, [ b, w, g ]), 
                b.statusCode(m), m = void 0, h && d.trigger(l ? "ajaxSuccess" : "ajaxError", [ b, p, l ? u : g ]), 
                y.fireWith(c, [ b, w ]), h && (d.trigger("ajaxComplete", [ b, p ]), --K.active || K.event.trigger("ajaxStop")));
            }
            "object" == typeof e && (t = e, e = void 0), t = t || {};
            var n, r, s, a, o, l, h, u, p = K.ajaxSetup({}, t), c = p.context || p, d = p.context && (c.nodeType || c.jquery) ? K(c) : K.event, f = K.Deferred(), y = K.Callbacks("once memory"), m = p.statusCode || {}, g = {}, v = {}, L = 0, O = "canceled", b = {
                "readyState": 0,
                "getResponseHeader": function(e) {
                    var t;
                    if (2 === L) {
                        if (!a) for (a = {}; t = lt.exec(s); ) a[t[1].toLowerCase()] = t[2];
                        t = a[e.toLowerCase()];
                    }
                    return null == t ? null : t;
                },
                "getAllResponseHeaders": function() {
                    return 2 === L ? s : null;
                },
                "setRequestHeader": function(e, t) {
                    var i = e.toLowerCase();
                    return L || (e = v[i] = v[i] || e, g[e] = t), this;
                },
                "overrideMimeType": function(e) {
                    return L || (p.mimeType = e), this;
                },
                "statusCode": function(e) {
                    var t;
                    if (e) if (L < 2) for (t in e) m[t] = [ m[t], e[t] ]; else b.always(e[b.status]);
                    return this;
                },
                "abort": function(e) {
                    var t = e || O;
                    return n && n.abort(t), i(0, t), this;
                }
            };
            if (f.promise(b).complete = y.add, b.success = b.done, b.error = b.fail, p.url = ((e || p.url || mt) + "").replace(at, "").replace(pt, gt[1] + "//"), 
            p.type = t.method || t.type || p.method || p.type, p.dataTypes = K.trim(p.dataType || "*").toLowerCase().match(ue) || [ "" ], 
            null == p.crossDomain && (l = ct.exec(p.url.toLowerCase()), p.crossDomain = !(!l || l[1] === gt[1] && l[2] === gt[2] && (l[3] || ("http:" === l[1] ? "80" : "443")) === (gt[3] || ("http:" === gt[1] ? "80" : "443")))), 
            p.data && p.processData && "string" != typeof p.data && (p.data = K.param(p.data, p.traditional)), 
            I(dt, p, t, b), 2 === L) return b;
            (h = K.event && p.global) && 0 == K.active++ && K.event.trigger("ajaxStart"), p.type = p.type.toUpperCase(), 
            p.hasContent = !ut.test(p.type), r = p.url, p.hasContent || (p.data && (r = p.url += (st.test(r) ? "&" : "?") + p.data, 
            delete p.data), !1 === p.cache && (p.url = ot.test(r) ? r.replace(ot, "$1_=" + rt++) : r + (st.test(r) ? "&" : "?") + "_=" + rt++)), 
            p.ifModified && (K.lastModified[r] && b.setRequestHeader("If-Modified-Since", K.lastModified[r]), 
            K.etag[r] && b.setRequestHeader("If-None-Match", K.etag[r])), (p.data && p.hasContent && !1 !== p.contentType || t.contentType) && b.setRequestHeader("Content-Type", p.contentType), 
            b.setRequestHeader("Accept", p.dataTypes[0] && p.accepts[p.dataTypes[0]] ? p.accepts[p.dataTypes[0]] + ("*" !== p.dataTypes[0] ? ", " + yt + "; q=0.01" : "") : p.accepts["*"]);
            for (u in p.headers) b.setRequestHeader(u, p.headers[u]);
            if (p.beforeSend && (!1 === p.beforeSend.call(c, b, p) || 2 === L)) return b.abort();
            O = "abort";
            for (u in {
                "success": 1,
                "error": 1,
                "complete": 1
            }) b[u](p[u]);
            if (n = I(ft, p, t, b)) {
                b.readyState = 1, h && d.trigger("ajaxSend", [ b, p ]), p.async && p.timeout > 0 && (o = setTimeout(function() {
                    b.abort("timeout");
                }, p.timeout));
                try {
                    L = 1, n.send(g, i);
                } catch (e) {
                    if (!(L < 2)) throw e;
                    i(-1, e);
                }
            } else i(-1, "No Transport");
            return b;
        },
        "getJSON": function(e, t, i) {
            return K.get(e, t, i, "json");
        },
        "getScript": function(e, t) {
            return K.get(e, void 0, t, "script");
        }
    }), K.each([ "get", "post" ], function(e, t) {
        K[t] = function(e, i, n, r) {
            return K.isFunction(i) && (r = r || n, n = i, i = void 0), K.ajax({
                "url": e,
                "type": t,
                "dataType": r,
                "data": i,
                "success": n
            });
        };
    }), K._evalUrl = function(e) {
        return K.ajax({
            "url": e,
            "type": "GET",
            "dataType": "script",
            "async": !1,
            "global": !1,
            "throws": !0
        });
    }, K.fn.extend({
        "wrapAll": function(e) {
            var t;
            return K.isFunction(e) ? this.each(function(t) {
                K(this).wrapAll(e.call(this, t));
            }) : (this[0] && (t = K(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), 
            t.map(function() {
                for (var e = this; e.firstElementChild; ) e = e.firstElementChild;
                return e;
            }).append(this)), this);
        },
        "wrapInner": function(e) {
            return K.isFunction(e) ? this.each(function(t) {
                K(this).wrapInner(e.call(this, t));
            }) : this.each(function() {
                var t = K(this), i = t.contents();
                i.length ? i.wrapAll(e) : t.append(e);
            });
        },
        "wrap": function(e) {
            var t = K.isFunction(e);
            return this.each(function(i) {
                K(this).wrapAll(t ? e.call(this, i) : e);
            });
        },
        "unwrap": function() {
            return this.parent().each(function() {
                K.nodeName(this, "body") || K(this).replaceWith(this.childNodes);
            }).end();
        }
    }), K.expr.filters.hidden = function(e) {
        return e.offsetWidth <= 0 && e.offsetHeight <= 0;
    }, K.expr.filters.visible = function(e) {
        return !K.expr.filters.hidden(e);
    };
    var vt = /%20/g, Lt = /\[\]$/, Ot = /\r?\n/g, bt = /^(?:submit|button|image|reset|file)$/i, wt = /^(?:input|select|textarea|keygen)/i;
    K.param = function(e, t) {
        var i, n = [], r = function(e, t) {
            t = K.isFunction(t) ? t() : null == t ? "" : t, n[n.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t);
        };
        if (void 0 === t && (t = K.ajaxSettings && K.ajaxSettings.traditional), K.isArray(e) || e.jquery && !K.isPlainObject(e)) K.each(e, function() {
            r(this.name, this.value);
        }); else for (i in e) B(i, e[i], t, r);
        return n.join("&").replace(vt, "+");
    }, K.fn.extend({
        "serialize": function() {
            return K.param(this.serializeArray());
        },
        "serializeArray": function() {
            return this.map(function() {
                var e = K.prop(this, "elements");
                return e ? K.makeArray(e) : this;
            }).filter(function() {
                var e = this.type;
                return this.name && !K(this).is(":disabled") && wt.test(this.nodeName) && !bt.test(e) && (this.checked || !be.test(e));
            }).map(function(e, t) {
                var i = K(this).val();
                return null == i ? null : K.isArray(i) ? K.map(i, function(e) {
                    return {
                        "name": t.name,
                        "value": e.replace(Ot, "\r\n")
                    };
                }) : {
                    "name": t.name,
                    "value": i.replace(Ot, "\r\n")
                };
            }).get();
        }
    }), K.ajaxSettings.xhr = function() {
        try {
            return new XMLHttpRequest();
        } catch (e) {}
    };
    var Ct = 0, St = {}, xt = {
        "0": 200,
        "1223": 204
    }, _t = K.ajaxSettings.xhr();
    e.attachEvent && e.attachEvent("onunload", function() {
        for (var e in St) St[e]();
    }), Y.cors = !!_t && "withCredentials" in _t, Y.ajax = _t = !!_t, K.ajaxTransport(function(e) {
        var t;
        if (Y.cors || _t && !e.crossDomain) return {
            "send": function(i, n) {
                var r, s = e.xhr(), a = ++Ct;
                if (s.open(e.type, e.url, e.async, e.username, e.password), e.xhrFields) for (r in e.xhrFields) s[r] = e.xhrFields[r];
                e.mimeType && s.overrideMimeType && s.overrideMimeType(e.mimeType), e.crossDomain || i["X-Requested-With"] || (i["X-Requested-With"] = "XMLHttpRequest");
                for (r in i) s.setRequestHeader(r, i[r]);
                t = function(e) {
                    return function() {
                        t && (delete St[a], t = s.onload = s.onerror = null, "abort" === e ? s.abort() : "error" === e ? n(s.status, s.statusText) : n(xt[s.status] || s.status, s.statusText, "string" == typeof s.responseText ? {
                            "text": s.responseText
                        } : void 0, s.getAllResponseHeaders()));
                    };
                }, s.onload = t(), s.onerror = t("error"), t = St[a] = t("abort");
                try {
                    s.send(e.hasContent && e.data || null);
                } catch (e) {
                    if (t) throw e;
                }
            },
            "abort": function() {
                t && t();
            }
        };
    }), K.ajaxSetup({
        "accepts": {
            "script": "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        "contents": {
            "script": /(?:java|ecma)script/
        },
        "converters": {
            "text script": function(e) {
                return K.globalEval(e), e;
            }
        }
    }), K.ajaxPrefilter("script", function(e) {
        void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET");
    }), K.ajaxTransport("script", function(e) {
        if (e.crossDomain) {
            var t, i;
            return {
                "send": function(n, r) {
                    t = K("<script>").prop({
                        "async": !0,
                        "charset": e.scriptCharset,
                        "src": e.url
                    }).on("load error", i = function(e) {
                        t.remove(), i = null, e && r("error" === e.type ? 404 : 200, e.type);
                    }), $.head.appendChild(t[0]);
                },
                "abort": function() {
                    i && i();
                }
            };
        }
    });
    var Et = [], Nt = /(=)\?(?=&|$)|\?\?/;
    K.ajaxSetup({
        "jsonp": "callback",
        "jsonpCallback": function() {
            var e = Et.pop() || K.expando + "_" + rt++;
            return this[e] = !0, e;
        }
    }), K.ajaxPrefilter("json jsonp", function(t, i, n) {
        var r, s, a, o = !1 !== t.jsonp && (Nt.test(t.url) ? "url" : "string" == typeof t.data && !(t.contentType || "").indexOf("application/x-www-form-urlencoded") && Nt.test(t.data) && "data");
        if (o || "jsonp" === t.dataTypes[0]) return r = t.jsonpCallback = K.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback, 
        o ? t[o] = t[o].replace(Nt, "$1" + r) : !1 !== t.jsonp && (t.url += (st.test(t.url) ? "&" : "?") + t.jsonp + "=" + r), 
        t.converters["script json"] = function() {
            return a || K.error(r + " was not called"), a[0];
        }, t.dataTypes[0] = "json", s = e[r], e[r] = function() {
            a = arguments;
        }, n.always(function() {
            e[r] = s, t[r] && (t.jsonpCallback = i.jsonpCallback, Et.push(r)), a && K.isFunction(s) && s(a[0]), 
            a = s = void 0;
        }), "script";
    }), K.parseHTML = function(e, t, i) {
        if (!e || "string" != typeof e) return null;
        "boolean" == typeof t && (i = t, t = !1), t = t || $;
        var n = re.exec(e), r = !i && [];
        return n ? [ t.createElement(n[1]) ] : (n = K.buildFragment([ e ], t, r), r && r.length && K(r).remove(), 
        K.merge([], n.childNodes));
    };
    var Pt = K.fn.load;
    K.fn.load = function(e, t, i) {
        if ("string" != typeof e && Pt) return Pt.apply(this, arguments);
        var n, r, s, a = this, o = e.indexOf(" ");
        return o >= 0 && (n = K.trim(e.slice(o)), e = e.slice(0, o)), K.isFunction(t) ? (i = t, 
        t = void 0) : t && "object" == typeof t && (r = "POST"), a.length > 0 && K.ajax({
            "url": e,
            "type": r,
            "dataType": "html",
            "data": t
        }).done(function(e) {
            s = arguments, a.html(n ? K("<div>").append(K.parseHTML(e)).find(n) : e);
        }).complete(i && function(e, t) {
            a.each(i, s || [ e.responseText, t, e ]);
        }), this;
    }, K.each([ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function(e, t) {
        K.fn[t] = function(e) {
            return this.on(t, e);
        };
    }), K.expr.filters.animated = function(e) {
        return K.grep(K.timers, function(t) {
            return e === t.elem;
        }).length;
    };
    var Tt = e.document.documentElement;
    K.offset = {
        "setOffset": function(e, t, i) {
            var n, r, s, a, o, l, h = K.css(e, "position"), u = K(e), p = {};
            "static" === h && (e.style.position = "relative"), o = u.offset(), s = K.css(e, "top"), 
            l = K.css(e, "left"), ("absolute" === h || "fixed" === h) && (s + l).indexOf("auto") > -1 ? (a = (n = u.position()).top, 
            r = n.left) : (a = parseFloat(s) || 0, r = parseFloat(l) || 0), K.isFunction(t) && (t = t.call(e, i, o)), 
            null != t.top && (p.top = t.top - o.top + a), null != t.left && (p.left = t.left - o.left + r), 
            "using" in t ? t.using.call(e, p) : u.css(p);
        }
    }, K.fn.extend({
        "offset": function(e) {
            if (arguments.length) return void 0 === e ? this : this.each(function(t) {
                K.offset.setOffset(this, e, t);
            });
            var t, i, n = this[0], r = {
                "top": 0,
                "left": 0
            }, s = n && n.ownerDocument;
            if (s) return t = s.documentElement, K.contains(t, n) ? (void 0 !== n.getBoundingClientRect && (r = n.getBoundingClientRect()), 
            i = U(s), {
                "top": r.top + i.pageYOffset - t.clientTop,
                "left": r.left + i.pageXOffset - t.clientLeft
            }) : r;
        },
        "position": function() {
            if (this[0]) {
                var e, t, i = this[0], n = {
                    "top": 0,
                    "left": 0
                };
                return "fixed" === K.css(i, "position") ? t = i.getBoundingClientRect() : (e = this.offsetParent(), 
                t = this.offset(), K.nodeName(e[0], "html") || (n = e.offset()), n.top += K.css(e[0], "borderTopWidth", !0), 
                n.left += K.css(e[0], "borderLeftWidth", !0)), {
                    "top": t.top - n.top - K.css(i, "marginTop", !0),
                    "left": t.left - n.left - K.css(i, "marginLeft", !0)
                };
            }
        },
        "offsetParent": function() {
            return this.map(function() {
                for (var e = this.offsetParent || Tt; e && !K.nodeName(e, "html") && "static" === K.css(e, "position"); ) e = e.offsetParent;
                return e || Tt;
            });
        }
    }), K.each({
        "scrollLeft": "pageXOffset",
        "scrollTop": "pageYOffset"
    }, function(t, i) {
        var n = "pageYOffset" === i;
        K.fn[t] = function(r) {
            return de(this, function(t, r, s) {
                var a = U(t);
                if (void 0 === s) return a ? a[i] : t[r];
                a ? a.scrollTo(n ? e.pageXOffset : s, n ? s : e.pageYOffset) : t[r] = s;
            }, t, r, arguments.length, null);
        };
    }), K.each([ "top", "left" ], function(e, t) {
        K.cssHooks[t] = w(Y.pixelPosition, function(e, i) {
            if (i) return i = b(e, t), ze.test(i) ? K(e).position()[t] + "px" : i;
        });
    }), K.each({
        "Height": "height",
        "Width": "width"
    }, function(e, t) {
        K.each({
            "padding": "inner" + e,
            "content": t,
            "": "outer" + e
        }, function(i, n) {
            K.fn[n] = function(n, r) {
                var s = arguments.length && (i || "boolean" != typeof n), a = i || (!0 === n || !0 === r ? "margin" : "border");
                return de(this, function(t, i, n) {
                    var r;
                    return K.isWindow(t) ? t.document.documentElement["client" + e] : 9 === t.nodeType ? (r = t.documentElement, 
                    Math.max(t.body["scroll" + e], r["scroll" + e], t.body["offset" + e], r["offset" + e], r["client" + e])) : void 0 === n ? K.css(t, i, a) : K.style(t, i, n, a);
                }, t, s ? n : void 0, s, null);
            };
        });
    }), K.fn.size = function() {
        return this.length;
    }, K.fn.andSelf = K.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function() {
        return K;
    });
    var Mt = e.jQuery, Ft = e.$;
    return K.noConflict = function(t) {
        return e.$ === K && (e.$ = Ft), t && e.jQuery === K && (e.jQuery = Mt), K;
    }, void 0 === t && (e.jQuery = e.$ = K), K;
}), function(e, t) {
    function i(t, i) {
        var r, s, a, o = t.nodeName.toLowerCase();
        return "area" === o ? (r = t.parentNode, s = r.name, !(!t.href || !s || "map" !== r.nodeName.toLowerCase()) && (!!(a = e("img[usemap=#" + s + "]")[0]) && n(a))) : (/input|select|textarea|button|object/.test(o) ? !t.disabled : "a" === o ? t.href || i : i) && n(t);
    }
    function n(t) {
        return e.expr.filters.visible(t) && !e(t).parents().addBack().filter(function() {
            return "hidden" === e.css(this, "visibility");
        }).length;
    }
    var r = 0, s = /^ui-id-\d+$/;
    e.ui = e.ui || {}, e.extend(e.ui, {
        "version": "1.10.4",
        "keyCode": {
            "BACKSPACE": 8,
            "COMMA": 188,
            "DELETE": 46,
            "DOWN": 40,
            "END": 35,
            "ENTER": 13,
            "ESCAPE": 27,
            "HOME": 36,
            "LEFT": 37,
            "NUMPAD_ADD": 107,
            "NUMPAD_DECIMAL": 110,
            "NUMPAD_DIVIDE": 111,
            "NUMPAD_ENTER": 108,
            "NUMPAD_MULTIPLY": 106,
            "NUMPAD_SUBTRACT": 109,
            "PAGE_DOWN": 34,
            "PAGE_UP": 33,
            "PERIOD": 190,
            "RIGHT": 39,
            "SPACE": 32,
            "TAB": 9,
            "UP": 38
        }
    }), e.fn.extend({
        "focus": function(t) {
            return function(i, n) {
                return "number" == typeof i ? this.each(function() {
                    var t = this;
                    setTimeout(function() {
                        e(t).focus(), n && n.call(t);
                    }, i);
                }) : t.apply(this, arguments);
            };
        }(e.fn.focus),
        "scrollParent": function() {
            var t;
            return t = e.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? this.parents().filter(function() {
                return /(relative|absolute|fixed)/.test(e.css(this, "position")) && /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"));
            }).eq(0) : this.parents().filter(function() {
                return /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"));
            }).eq(0), /fixed/.test(this.css("position")) || !t.length ? e(document) : t;
        },
        "zIndex": function(t) {
            if (void 0 !== t) return this.css("zIndex", t);
            if (this.length) for (var i, n, r = e(this[0]); r.length && r[0] !== document; ) {
                if (("absolute" === (i = r.css("position")) || "relative" === i || "fixed" === i) && (n = parseInt(r.css("zIndex"), 10), 
                !isNaN(n) && 0 !== n)) return n;
                r = r.parent();
            }
            return 0;
        },
        "uniqueId": function() {
            return this.each(function() {
                this.id || (this.id = "ui-id-" + ++r);
            });
        },
        "removeUniqueId": function() {
            return this.each(function() {
                s.test(this.id) && e(this).removeAttr("id");
            });
        }
    }), e.extend(e.expr[":"], {
        "data": e.expr.createPseudo ? e.expr.createPseudo(function(t) {
            return function(i) {
                return !!e.data(i, t);
            };
        }) : function(t, i, n) {
            return !!e.data(t, n[3]);
        },
        "focusable": function(t) {
            return i(t, !isNaN(e.attr(t, "tabindex")));
        },
        "tabbable": function(t) {
            var n = e.attr(t, "tabindex"), r = isNaN(n);
            return (r || n >= 0) && i(t, !r);
        }
    }), e("<a>").outerWidth(1).jquery || e.each([ "Width", "Height" ], function(t, i) {
        function n(t, i, n, s) {
            return e.each(r, function() {
                i -= parseFloat(e.css(t, "padding" + this)) || 0, n && (i -= parseFloat(e.css(t, "border" + this + "Width")) || 0), 
                s && (i -= parseFloat(e.css(t, "margin" + this)) || 0);
            }), i;
        }
        var r = "Width" === i ? [ "Left", "Right" ] : [ "Top", "Bottom" ], s = i.toLowerCase(), a = {
            "innerWidth": e.fn.innerWidth,
            "innerHeight": e.fn.innerHeight,
            "outerWidth": e.fn.outerWidth,
            "outerHeight": e.fn.outerHeight
        };
        e.fn["inner" + i] = function(t) {
            return void 0 === t ? a["inner" + i].call(this) : this.each(function() {
                e(this).css(s, n(this, t) + "px");
            });
        }, e.fn["outer" + i] = function(t, r) {
            return "number" != typeof t ? a["outer" + i].call(this, t) : this.each(function() {
                e(this).css(s, n(this, t, !0, r) + "px");
            });
        };
    }), e.fn.addBack || (e.fn.addBack = function(e) {
        return this.add(null == e ? this.prevObject : this.prevObject.filter(e));
    }), e("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (e.fn.removeData = function(t) {
        return function(i) {
            return arguments.length ? t.call(this, e.camelCase(i)) : t.call(this);
        };
    }(e.fn.removeData)), e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), 
    e.support.selectstart = "onselectstart" in document.createElement("div"), e.fn.extend({
        "disableSelection": function() {
            return this.bind((e.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function(e) {
                e.preventDefault();
            });
        },
        "enableSelection": function() {
            return this.unbind(".ui-disableSelection");
        }
    }), e.extend(e.ui, {
        "plugin": {
            "add": function(t, i, n) {
                var r, s = e.ui[t].prototype;
                for (r in n) s.plugins[r] = s.plugins[r] || [], s.plugins[r].push([ i, n[r] ]);
            },
            "call": function(e, t, i) {
                var n, r = e.plugins[t];
                if (r && e.element[0].parentNode && 11 !== e.element[0].parentNode.nodeType) for (n = 0; n < r.length; n++) e.options[r[n][0]] && r[n][1].apply(e.element, i);
            }
        },
        "hasScroll": function(t, i) {
            if ("hidden" === e(t).css("overflow")) return !1;
            var n = i && "left" === i ? "scrollLeft" : "scrollTop", r = !1;
            return t[n] > 0 || (t[n] = 1, r = t[n] > 0, t[n] = 0, r);
        }
    });
}(jQuery), function(e, t) {
    var i = 0, n = Array.prototype.slice, r = e.cleanData;
    e.cleanData = function(t) {
        for (var i, n = 0; null != (i = t[n]); n++) try {
            e(i).triggerHandler("remove");
        } catch (e) {}
        r(t);
    }, e.widget = function(t, i, n) {
        var r, s, a, o, l = {}, h = t.split(".")[0];
        t = t.split(".")[1], r = h + "-" + t, n || (n = i, i = e.Widget), e.expr[":"][r.toLowerCase()] = function(t) {
            return !!e.data(t, r);
        }, e[h] = e[h] || {}, s = e[h][t], a = e[h][t] = function(e, t) {
            if (!this._createWidget) return new a(e, t);
            arguments.length && this._createWidget(e, t);
        }, e.extend(a, s, {
            "version": n.version,
            "_proto": e.extend({}, n),
            "_childConstructors": []
        }), (o = new i()).options = e.widget.extend({}, o.options), e.each(n, function(t, n) {
            e.isFunction(n) ? l[t] = function() {
                var e = function() {
                    return i.prototype[t].apply(this, arguments);
                }, r = function(e) {
                    return i.prototype[t].apply(this, e);
                };
                return function() {
                    var t, i = this._super, s = this._superApply;
                    return this._super = e, this._superApply = r, t = n.apply(this, arguments), this._super = i, 
                    this._superApply = s, t;
                };
            }() : l[t] = n;
        }), a.prototype = e.widget.extend(o, {
            "widgetEventPrefix": s ? o.widgetEventPrefix || t : t
        }, l, {
            "constructor": a,
            "namespace": h,
            "widgetName": t,
            "widgetFullName": r
        }), s ? (e.each(s._childConstructors, function(t, i) {
            var n = i.prototype;
            e.widget(n.namespace + "." + n.widgetName, a, i._proto);
        }), delete s._childConstructors) : i._childConstructors.push(a), e.widget.bridge(t, a);
    }, e.widget.extend = function(t) {
        for (var i, r, s = n.call(arguments, 1), a = 0, o = s.length; a < o; a++) for (i in s[a]) r = s[a][i], 
        s[a].hasOwnProperty(i) && void 0 !== r && (e.isPlainObject(r) ? t[i] = e.isPlainObject(t[i]) ? e.widget.extend({}, t[i], r) : e.widget.extend({}, r) : t[i] = r);
        return t;
    }, e.widget.bridge = function(t, i) {
        var r = i.prototype.widgetFullName || t;
        e.fn[t] = function(s) {
            var a = "string" == typeof s, o = n.call(arguments, 1), l = this;
            return s = !a && o.length ? e.widget.extend.apply(null, [ s ].concat(o)) : s, a ? this.each(function() {
                var i, n = e.data(this, r);
                return n ? e.isFunction(n[s]) && "_" !== s.charAt(0) ? (i = n[s].apply(n, o)) !== n && void 0 !== i ? (l = i && i.jquery ? l.pushStack(i.get()) : i, 
                !1) : void 0 : e.error("no such method '" + s + "' for " + t + " widget instance") : e.error("cannot call methods on " + t + " prior to initialization; attempted to call method '" + s + "'");
            }) : this.each(function() {
                var t = e.data(this, r);
                t ? t.option(s || {})._init() : e.data(this, r, new i(s, this));
            }), l;
        };
    }, e.Widget = function() {}, e.Widget._childConstructors = [], e.Widget.prototype = {
        "widgetName": "widget",
        "widgetEventPrefix": "",
        "defaultElement": "<div>",
        "options": {
            "disabled": !1,
            "create": null
        },
        "_createWidget": function(t, n) {
            n = e(n || this.defaultElement || this)[0], this.element = e(n), this.uuid = i++, 
            this.eventNamespace = "." + this.widgetName + this.uuid, this.options = e.widget.extend({}, this.options, this._getCreateOptions(), t), 
            this.bindings = e(), this.hoverable = e(), this.focusable = e(), n !== this && (e.data(n, this.widgetFullName, this), 
            this._on(!0, this.element, {
                "remove": function(e) {
                    e.target === n && this.destroy();
                }
            }), this.document = e(n.style ? n.ownerDocument : n.document || n), this.window = e(this.document[0].defaultView || this.document[0].parentWindow)), 
            this._create(), this._trigger("create", null, this._getCreateEventData()), this._init();
        },
        "_getCreateOptions": e.noop,
        "_getCreateEventData": e.noop,
        "_create": e.noop,
        "_init": e.noop,
        "destroy": function() {
            this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)), 
            this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"), 
            this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), 
            this.focusable.removeClass("ui-state-focus");
        },
        "_destroy": e.noop,
        "widget": function() {
            return this.element;
        },
        "option": function(t, i) {
            var n, r, s, a = t;
            if (0 === arguments.length) return e.widget.extend({}, this.options);
            if ("string" == typeof t) if (a = {}, n = t.split("."), t = n.shift(), n.length) {
                for (r = a[t] = e.widget.extend({}, this.options[t]), s = 0; s < n.length - 1; s++) r[n[s]] = r[n[s]] || {}, 
                r = r[n[s]];
                if (t = n.pop(), 1 === arguments.length) return void 0 === r[t] ? null : r[t];
                r[t] = i;
            } else {
                if (1 === arguments.length) return void 0 === this.options[t] ? null : this.options[t];
                a[t] = i;
            }
            return this._setOptions(a), this;
        },
        "_setOptions": function(e) {
            var t;
            for (t in e) this._setOption(t, e[t]);
            return this;
        },
        "_setOption": function(e, t) {
            return this.options[e] = t, "disabled" === e && (this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!t).attr("aria-disabled", t), 
            this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")), 
            this;
        },
        "enable": function() {
            return this._setOption("disabled", !1);
        },
        "disable": function() {
            return this._setOption("disabled", !0);
        },
        "_on": function(t, i, n) {
            var r, s = this;
            "boolean" != typeof t && (n = i, i = t, t = !1), n ? (i = r = e(i), this.bindings = this.bindings.add(i)) : (n = i, 
            i = this.element, r = this.widget()), e.each(n, function(n, a) {
                function o() {
                    if (t || !0 !== s.options.disabled && !e(this).hasClass("ui-state-disabled")) return ("string" == typeof a ? s[a] : a).apply(s, arguments);
                }
                "string" != typeof a && (o.guid = a.guid = a.guid || o.guid || e.guid++);
                var l = n.match(/^(\w+)\s*(.*)$/), h = l[1] + s.eventNamespace, u = l[2];
                u ? r.delegate(u, h, o) : i.bind(h, o);
            });
        },
        "_off": function(e, t) {
            t = (t || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, 
            e.unbind(t).undelegate(t);
        },
        "_delay": function(e, t) {
            var i = this;
            return setTimeout(function() {
                return ("string" == typeof e ? i[e] : e).apply(i, arguments);
            }, t || 0);
        },
        "_hoverable": function(t) {
            this.hoverable = this.hoverable.add(t), this._on(t, {
                "mouseenter": function(t) {
                    e(t.currentTarget).addClass("ui-state-hover");
                },
                "mouseleave": function(t) {
                    e(t.currentTarget).removeClass("ui-state-hover");
                }
            });
        },
        "_focusable": function(t) {
            this.focusable = this.focusable.add(t), this._on(t, {
                "focusin": function(t) {
                    e(t.currentTarget).addClass("ui-state-focus");
                },
                "focusout": function(t) {
                    e(t.currentTarget).removeClass("ui-state-focus");
                }
            });
        },
        "_trigger": function(t, i, n) {
            var r, s, a = this.options[t];
            if (n = n || {}, i = e.Event(i), i.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), 
            i.target = this.element[0], s = i.originalEvent) for (r in s) r in i || (i[r] = s[r]);
            return this.element.trigger(i, n), !(e.isFunction(a) && !1 === a.apply(this.element[0], [ i ].concat(n)) || i.isDefaultPrevented());
        }
    }, e.each({
        "show": "fadeIn",
        "hide": "fadeOut"
    }, function(t, i) {
        e.Widget.prototype["_" + t] = function(n, r, s) {
            "string" == typeof r && (r = {
                "effect": r
            });
            var a, o = r ? !0 === r || "number" == typeof r ? i : r.effect || i : t;
            "number" == typeof (r = r || {}) && (r = {
                "duration": r
            }), a = !e.isEmptyObject(r), r.complete = s, r.delay && n.delay(r.delay), a && e.effects && e.effects.effect[o] ? n[t](r) : o !== t && n[o] ? n[o](r.duration, r.easing, s) : n.queue(function(i) {
                e(this)[t](), s && s.call(n[0]), i();
            });
        };
    });
}(jQuery), function(e, t) {
    var i = !1;
    e(document).mouseup(function() {
        i = !1;
    }), e.widget("ui.mouse", {
        "version": "1.10.4",
        "options": {
            "cancel": "input,textarea,button,select,option",
            "distance": 1,
            "delay": 0
        },
        "_mouseInit": function() {
            var t = this;
            this.element.bind("mousedown." + this.widgetName, function(e) {
                return t._mouseDown(e);
            }).bind("click." + this.widgetName, function(i) {
                if (!0 === e.data(i.target, t.widgetName + ".preventClickEvent")) return e.removeData(i.target, t.widgetName + ".preventClickEvent"), 
                i.stopImmediatePropagation(), !1;
            }), this.started = !1;
        },
        "_mouseDestroy": function() {
            this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate);
        },
        "_mouseDown": function(t) {
            if (!i) {
                this._mouseStarted && this._mouseUp(t), this._mouseDownEvent = t;
                var n = this, r = 1 === t.which, s = !("string" != typeof this.options.cancel || !t.target.nodeName) && e(t.target).closest(this.options.cancel).length;
                return !(r && !s && this._mouseCapture(t)) || (this.mouseDelayMet = !this.options.delay, 
                this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                    n.mouseDelayMet = !0;
                }, this.options.delay)), this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = !1 !== this._mouseStart(t), 
                !this._mouseStarted) ? (t.preventDefault(), !0) : (!0 === e.data(t.target, this.widgetName + ".preventClickEvent") && e.removeData(t.target, this.widgetName + ".preventClickEvent"), 
                this._mouseMoveDelegate = function(e) {
                    return n._mouseMove(e);
                }, this._mouseUpDelegate = function(e) {
                    return n._mouseUp(e);
                }, e(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), 
                t.preventDefault(), i = !0, !0));
            }
        },
        "_mouseMove": function(t) {
            return e.ui.ie && (!document.documentMode || document.documentMode < 9) && !t.button ? this._mouseUp(t) : this._mouseStarted ? (this._mouseDrag(t), 
            t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = !1 !== this._mouseStart(this._mouseDownEvent, t), 
            this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted);
        },
        "_mouseUp": function(t) {
            return e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), 
            this._mouseStarted && (this._mouseStarted = !1, t.target === this._mouseDownEvent.target && e.data(t.target, this.widgetName + ".preventClickEvent", !0), 
            this._mouseStop(t)), !1;
        },
        "_mouseDistanceMet": function(e) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance;
        },
        "_mouseDelayMet": function() {
            return this.mouseDelayMet;
        },
        "_mouseStart": function() {},
        "_mouseDrag": function() {},
        "_mouseStop": function() {},
        "_mouseCapture": function() {
            return !0;
        }
    });
}(jQuery), function(e, t) {
    function i(e, t, i) {
        return [ parseFloat(e[0]) * (d.test(e[0]) ? t / 100 : 1), parseFloat(e[1]) * (d.test(e[1]) ? i / 100 : 1) ];
    }
    function n(t, i) {
        return parseInt(e.css(t, i), 10) || 0;
    }
    function r(t) {
        var i = t[0];
        return 9 === i.nodeType ? {
            "width": t.width(),
            "height": t.height(),
            "offset": {
                "top": 0,
                "left": 0
            }
        } : e.isWindow(i) ? {
            "width": t.width(),
            "height": t.height(),
            "offset": {
                "top": t.scrollTop(),
                "left": t.scrollLeft()
            }
        } : i.preventDefault ? {
            "width": 0,
            "height": 0,
            "offset": {
                "top": i.pageY,
                "left": i.pageX
            }
        } : {
            "width": t.outerWidth(),
            "height": t.outerHeight(),
            "offset": t.offset()
        };
    }
    e.ui = e.ui || {};
    var s, a = Math.max, o = Math.abs, l = Math.round, h = /left|center|right/, u = /top|center|bottom/, p = /[\+\-]\d+(\.[\d]+)?%?/, c = /^\w+/, d = /%$/, f = e.fn.position;
    e.position = {
        "scrollbarWidth": function() {
            if (void 0 !== s) return s;
            var t, i, n = e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"), r = n.children()[0];
            return e("body").append(n), t = r.offsetWidth, n.css("overflow", "scroll"), i = r.offsetWidth, 
            t === i && (i = n[0].clientWidth), n.remove(), s = t - i;
        },
        "getScrollInfo": function(t) {
            var i = t.isWindow || t.isDocument ? "" : t.element.css("overflow-x"), n = t.isWindow || t.isDocument ? "" : t.element.css("overflow-y"), r = "scroll" === i || "auto" === i && t.width < t.element[0].scrollWidth;
            return {
                "width": "scroll" === n || "auto" === n && t.height < t.element[0].scrollHeight ? e.position.scrollbarWidth() : 0,
                "height": r ? e.position.scrollbarWidth() : 0
            };
        },
        "getWithinInfo": function(t) {
            var i = e(t || window), n = e.isWindow(i[0]);
            return {
                "element": i,
                "isWindow": n,
                "isDocument": !!i[0] && 9 === i[0].nodeType,
                "offset": i.offset() || {
                    "left": 0,
                    "top": 0
                },
                "scrollLeft": i.scrollLeft(),
                "scrollTop": i.scrollTop(),
                "width": n ? i.width() : i.outerWidth(),
                "height": n ? i.height() : i.outerHeight()
            };
        }
    }, e.fn.position = function(t) {
        if (!t || !t.of) return f.apply(this, arguments);
        t = e.extend({}, t);
        var s, d, y, m, g, v, L = e(t.of), O = e.position.getWithinInfo(t.within), b = e.position.getScrollInfo(O), w = (t.collision || "flip").split(" "), C = {};
        return v = r(L), L[0].preventDefault && (t.at = "left top"), d = v.width, y = v.height, 
        m = v.offset, g = e.extend({}, m), e.each([ "my", "at" ], function() {
            var e, i, n = (t[this] || "").split(" ");
            1 === n.length && (n = h.test(n[0]) ? n.concat([ "center" ]) : u.test(n[0]) ? [ "center" ].concat(n) : [ "center", "center" ]), 
            n[0] = h.test(n[0]) ? n[0] : "center", n[1] = u.test(n[1]) ? n[1] : "center", e = p.exec(n[0]), 
            i = p.exec(n[1]), C[this] = [ e ? e[0] : 0, i ? i[0] : 0 ], t[this] = [ c.exec(n[0])[0], c.exec(n[1])[0] ];
        }), 1 === w.length && (w[1] = w[0]), "right" === t.at[0] ? g.left += d : "center" === t.at[0] && (g.left += d / 2), 
        "bottom" === t.at[1] ? g.top += y : "center" === t.at[1] && (g.top += y / 2), s = i(C.at, d, y), 
        g.left += s[0], g.top += s[1], this.each(function() {
            var r, h, u = e(this), p = u.outerWidth(), c = u.outerHeight(), f = n(this, "marginLeft"), v = n(this, "marginTop"), S = p + f + n(this, "marginRight") + b.width, x = c + v + n(this, "marginBottom") + b.height, _ = e.extend({}, g), E = i(C.my, u.outerWidth(), u.outerHeight());
            "right" === t.my[0] ? _.left -= p : "center" === t.my[0] && (_.left -= p / 2), "bottom" === t.my[1] ? _.top -= c : "center" === t.my[1] && (_.top -= c / 2), 
            _.left += E[0], _.top += E[1], e.support.offsetFractions || (_.left = l(_.left), 
            _.top = l(_.top)), r = {
                "marginLeft": f,
                "marginTop": v
            }, e.each([ "left", "top" ], function(i, n) {
                e.ui.position[w[i]] && e.ui.position[w[i]][n](_, {
                    "targetWidth": d,
                    "targetHeight": y,
                    "elemWidth": p,
                    "elemHeight": c,
                    "collisionPosition": r,
                    "collisionWidth": S,
                    "collisionHeight": x,
                    "offset": [ s[0] + E[0], s[1] + E[1] ],
                    "my": t.my,
                    "at": t.at,
                    "within": O,
                    "elem": u
                });
            }), t.using && (h = function(e) {
                var i = m.left - _.left, n = i + d - p, r = m.top - _.top, s = r + y - c, l = {
                    "target": {
                        "element": L,
                        "left": m.left,
                        "top": m.top,
                        "width": d,
                        "height": y
                    },
                    "element": {
                        "element": u,
                        "left": _.left,
                        "top": _.top,
                        "width": p,
                        "height": c
                    },
                    "horizontal": n < 0 ? "left" : i > 0 ? "right" : "center",
                    "vertical": s < 0 ? "top" : r > 0 ? "bottom" : "middle"
                };
                d < p && o(i + n) < d && (l.horizontal = "center"), y < c && o(r + s) < y && (l.vertical = "middle"), 
                a(o(i), o(n)) > a(o(r), o(s)) ? l.important = "horizontal" : l.important = "vertical", 
                t.using.call(this, e, l);
            }), u.offset(e.extend(_, {
                "using": h
            }));
        });
    }, e.ui.position = {
        "fit": {
            "left": function(e, t) {
                var i, n = t.within, r = n.isWindow ? n.scrollLeft : n.offset.left, s = n.width, o = e.left - t.collisionPosition.marginLeft, l = r - o, h = o + t.collisionWidth - s - r;
                t.collisionWidth > s ? l > 0 && h <= 0 ? (i = e.left + l + t.collisionWidth - s - r, 
                e.left += l - i) : e.left = h > 0 && l <= 0 ? r : l > h ? r + s - t.collisionWidth : r : l > 0 ? e.left += l : h > 0 ? e.left -= h : e.left = a(e.left - o, e.left);
            },
            "top": function(e, t) {
                var i, n = t.within, r = n.isWindow ? n.scrollTop : n.offset.top, s = t.within.height, o = e.top - t.collisionPosition.marginTop, l = r - o, h = o + t.collisionHeight - s - r;
                t.collisionHeight > s ? l > 0 && h <= 0 ? (i = e.top + l + t.collisionHeight - s - r, 
                e.top += l - i) : e.top = h > 0 && l <= 0 ? r : l > h ? r + s - t.collisionHeight : r : l > 0 ? e.top += l : h > 0 ? e.top -= h : e.top = a(e.top - o, e.top);
            }
        },
        "flip": {
            "left": function(e, t) {
                var i, n, r = t.within, s = r.offset.left + r.scrollLeft, a = r.width, l = r.isWindow ? r.scrollLeft : r.offset.left, h = e.left - t.collisionPosition.marginLeft, u = h - l, p = h + t.collisionWidth - a - l, c = "left" === t.my[0] ? -t.elemWidth : "right" === t.my[0] ? t.elemWidth : 0, d = "left" === t.at[0] ? t.targetWidth : "right" === t.at[0] ? -t.targetWidth : 0, f = -2 * t.offset[0];
                u < 0 ? ((i = e.left + c + d + f + t.collisionWidth - a - s) < 0 || i < o(u)) && (e.left += c + d + f) : p > 0 && ((n = e.left - t.collisionPosition.marginLeft + c + d + f - l) > 0 || o(n) < p) && (e.left += c + d + f);
            },
            "top": function(e, t) {
                var i, n, r = t.within, s = r.offset.top + r.scrollTop, a = r.height, l = r.isWindow ? r.scrollTop : r.offset.top, h = e.top - t.collisionPosition.marginTop, u = h - l, p = h + t.collisionHeight - a - l, c = "top" === t.my[1] ? -t.elemHeight : "bottom" === t.my[1] ? t.elemHeight : 0, d = "top" === t.at[1] ? t.targetHeight : "bottom" === t.at[1] ? -t.targetHeight : 0, f = -2 * t.offset[1];
                u < 0 ? (n = e.top + c + d + f + t.collisionHeight - a - s, e.top + c + d + f > u && (n < 0 || n < o(u)) && (e.top += c + d + f)) : p > 0 && (i = e.top - t.collisionPosition.marginTop + c + d + f - l, 
                e.top + c + d + f > p && (i > 0 || o(i) < p) && (e.top += c + d + f));
            }
        },
        "flipfit": {
            "left": function() {
                e.ui.position.flip.left.apply(this, arguments), e.ui.position.fit.left.apply(this, arguments);
            },
            "top": function() {
                e.ui.position.flip.top.apply(this, arguments), e.ui.position.fit.top.apply(this, arguments);
            }
        }
    }, function() {
        var t, i, n, r, s, a = document.getElementsByTagName("body")[0], o = document.createElement("div");
        t = document.createElement(a ? "div" : "body"), n = {
            "visibility": "hidden",
            "width": 0,
            "height": 0,
            "border": 0,
            "margin": 0,
            "background": "none"
        }, a && e.extend(n, {
            "position": "absolute",
            "left": "-1000px",
            "top": "-1000px"
        });
        for (s in n) t.style[s] = n[s];
        t.appendChild(o), (i = a || document.documentElement).insertBefore(t, i.firstChild), 
        o.style.cssText = "position: absolute; left: 10.7432222px;", r = e(o).offset().left, 
        e.support.offsetFractions = r > 10 && r < 11, t.innerHTML = "", i.removeChild(t);
    }();
}(jQuery), function(e, t) {
    var i = 0, n = {}, r = {};
    n.height = n.paddingTop = n.paddingBottom = n.borderTopWidth = n.borderBottomWidth = "hide", 
    r.height = r.paddingTop = r.paddingBottom = r.borderTopWidth = r.borderBottomWidth = "show", 
    e.widget("ui.accordion", {
        "version": "1.10.4",
        "options": {
            "active": 0,
            "animate": {},
            "collapsible": !1,
            "event": "click",
            "header": "> li > :first-child,> :not(li):even",
            "heightStyle": "auto",
            "icons": {
                "activeHeader": "ui-icon-triangle-1-s",
                "header": "ui-icon-triangle-1-e"
            },
            "activate": null,
            "beforeActivate": null
        },
        "_create": function() {
            var t = this.options;
            this.prevShow = this.prevHide = e(), this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role", "tablist"), 
            t.collapsible || !1 !== t.active && null != t.active || (t.active = 0), this._processPanels(), 
            t.active < 0 && (t.active += this.headers.length), this._refresh();
        },
        "_getCreateEventData": function() {
            return {
                "header": this.active,
                "panel": this.active.length ? this.active.next() : e(),
                "content": this.active.length ? this.active.next() : e()
            };
        },
        "_createIcons": function() {
            var t = this.options.icons;
            t && (e("<span>").addClass("ui-accordion-header-icon ui-icon " + t.header).prependTo(this.headers), 
            this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader), 
            this.headers.addClass("ui-accordion-icons"));
        },
        "_destroyIcons": function() {
            this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove();
        },
        "_destroy": function() {
            var e;
            this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"), 
            this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function() {
                /^ui-accordion/.test(this.id) && this.removeAttribute("id");
            }), this._destroyIcons(), e = this.headers.next().css("display", "").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function() {
                /^ui-accordion/.test(this.id) && this.removeAttribute("id");
            }), "content" !== this.options.heightStyle && e.css("height", "");
        },
        "_setOption": function(e, t) {
            "active" !== e ? ("event" === e && (this.options.event && this._off(this.headers, this.options.event), 
            this._setupEvents(t)), this._super(e, t), "collapsible" !== e || t || !1 !== this.options.active || this._activate(0), 
            "icons" === e && (this._destroyIcons(), t && this._createIcons()), "disabled" === e && this.headers.add(this.headers.next()).toggleClass("ui-state-disabled", !!t)) : this._activate(t);
        },
        "_keydown": function(t) {
            if (!t.altKey && !t.ctrlKey) {
                var i = e.ui.keyCode, n = this.headers.length, r = this.headers.index(t.target), s = !1;
                switch (t.keyCode) {
                  case i.RIGHT:
                  case i.DOWN:
                    s = this.headers[(r + 1) % n];
                    break;

                  case i.LEFT:
                  case i.UP:
                    s = this.headers[(r - 1 + n) % n];
                    break;

                  case i.SPACE:
                  case i.ENTER:
                    this._eventHandler(t);
                    break;

                  case i.HOME:
                    s = this.headers[0];
                    break;

                  case i.END:
                    s = this.headers[n - 1];
                }
                s && (e(t.target).attr("tabIndex", -1), e(s).attr("tabIndex", 0), s.focus(), t.preventDefault());
            }
        },
        "_panelKeyDown": function(t) {
            t.keyCode === e.ui.keyCode.UP && t.ctrlKey && e(t.currentTarget).prev().focus();
        },
        "refresh": function() {
            var t = this.options;
            this._processPanels(), !1 === t.active && !0 === t.collapsible || !this.headers.length ? (t.active = !1, 
            this.active = e()) : !1 === t.active ? this._activate(0) : this.active.length && !e.contains(this.element[0], this.active[0]) ? this.headers.length === this.headers.find(".ui-state-disabled").length ? (t.active = !1, 
            this.active = e()) : this._activate(Math.max(0, t.active - 1)) : t.active = this.headers.index(this.active), 
            this._destroyIcons(), this._refresh();
        },
        "_processPanels": function() {
            this.headers = this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"), 
            this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide();
        },
        "_refresh": function() {
            var t, n = this.options, r = n.heightStyle, s = this.element.parent(), a = this.accordionId = "ui-accordion-" + (this.element.attr("id") || ++i);
            this.active = this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"), 
            this.active.next().addClass("ui-accordion-content-active").show(), this.headers.attr("role", "tab").each(function(t) {
                var i = e(this), n = i.attr("id"), r = i.next(), s = r.attr("id");
                n || (n = a + "-header-" + t, i.attr("id", n)), s || (s = a + "-panel-" + t, r.attr("id", s)), 
                i.attr("aria-controls", s), r.attr("aria-labelledby", n);
            }).next().attr("role", "tabpanel"), this.headers.not(this.active).attr({
                "aria-selected": "false",
                "aria-expanded": "false",
                "tabIndex": -1
            }).next().attr({
                "aria-hidden": "true"
            }).hide(), this.active.length ? this.active.attr({
                "aria-selected": "true",
                "aria-expanded": "true",
                "tabIndex": 0
            }).next().attr({
                "aria-hidden": "false"
            }) : this.headers.eq(0).attr("tabIndex", 0), this._createIcons(), this._setupEvents(n.event), 
            "fill" === r ? (t = s.height(), this.element.siblings(":visible").each(function() {
                var i = e(this), n = i.css("position");
                "absolute" !== n && "fixed" !== n && (t -= i.outerHeight(!0));
            }), this.headers.each(function() {
                t -= e(this).outerHeight(!0);
            }), this.headers.next().each(function() {
                e(this).height(Math.max(0, t - e(this).innerHeight() + e(this).height()));
            }).css("overflow", "auto")) : "auto" === r && (t = 0, this.headers.next().each(function() {
                t = Math.max(t, e(this).css("height", "").height());
            }).height(t));
        },
        "_activate": function(t) {
            var i = this._findActive(t)[0];
            i !== this.active[0] && (i = i || this.active[0], this._eventHandler({
                "target": i,
                "currentTarget": i,
                "preventDefault": e.noop
            }));
        },
        "_findActive": function(t) {
            return "number" == typeof t ? this.headers.eq(t) : e();
        },
        "_setupEvents": function(t) {
            var i = {
                "keydown": "_keydown"
            };
            t && e.each(t.split(" "), function(e, t) {
                i[t] = "_eventHandler";
            }), this._off(this.headers.add(this.headers.next())), this._on(this.headers, i), 
            this._on(this.headers.next(), {
                "keydown": "_panelKeyDown"
            }), this._hoverable(this.headers), this._focusable(this.headers);
        },
        "_eventHandler": function(t) {
            var i = this.options, n = this.active, r = e(t.currentTarget), s = r[0] === n[0], a = s && i.collapsible, o = a ? e() : r.next(), l = {
                "oldHeader": n,
                "oldPanel": n.next(),
                "newHeader": a ? e() : r,
                "newPanel": o
            };
            t.preventDefault(), s && !i.collapsible || !1 === this._trigger("beforeActivate", t, l) || (i.active = !a && this.headers.index(r), 
            this.active = s ? e() : r, this._toggle(l), n.removeClass("ui-accordion-header-active ui-state-active"), 
            i.icons && n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header), 
            s || (r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"), 
            i.icons && r.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader), 
            r.next().addClass("ui-accordion-content-active")));
        },
        "_toggle": function(t) {
            var i = t.newPanel, n = this.prevShow.length ? this.prevShow : t.oldPanel;
            this.prevShow.add(this.prevHide).stop(!0, !0), this.prevShow = i, this.prevHide = n, 
            this.options.animate ? this._animate(i, n, t) : (n.hide(), i.show(), this._toggleComplete(t)), 
            n.attr({
                "aria-hidden": "true"
            }), n.prev().attr("aria-selected", "false"), i.length && n.length ? n.prev().attr({
                "tabIndex": -1,
                "aria-expanded": "false"
            }) : i.length && this.headers.filter(function() {
                return 0 === e(this).attr("tabIndex");
            }).attr("tabIndex", -1), i.attr("aria-hidden", "false").prev().attr({
                "aria-selected": "true",
                "tabIndex": 0,
                "aria-expanded": "true"
            });
        },
        "_animate": function(e, t, i) {
            var s, a, o, l = this, h = 0, u = e.length && (!t.length || e.index() < t.index()), p = this.options.animate || {}, c = u && p.down || p, d = function() {
                l._toggleComplete(i);
            };
            return "number" == typeof c && (o = c), "string" == typeof c && (a = c), a = a || c.easing || p.easing, 
            o = o || c.duration || p.duration, t.length ? e.length ? (s = e.show().outerHeight(), 
            t.animate(n, {
                "duration": o,
                "easing": a,
                "step": function(e, t) {
                    t.now = Math.round(e);
                }
            }), void e.hide().animate(r, {
                "duration": o,
                "easing": a,
                "complete": d,
                "step": function(e, i) {
                    i.now = Math.round(e), "height" !== i.prop ? h += i.now : "content" !== l.options.heightStyle && (i.now = Math.round(s - t.outerHeight() - h), 
                    h = 0);
                }
            })) : t.animate(n, o, a, d) : e.animate(r, o, a, d);
        },
        "_toggleComplete": function(e) {
            var t = e.oldPanel;
            t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"), 
            t.length && (t.parent()[0].className = t.parent()[0].className), this._trigger("activate", null, e);
        }
    });
}(jQuery), function(e, t) {
    e.widget("ui.autocomplete", {
        "version": "1.10.4",
        "defaultElement": "<input>",
        "options": {
            "appendTo": null,
            "autoFocus": !1,
            "delay": 300,
            "minLength": 1,
            "position": {
                "my": "left top",
                "at": "left bottom",
                "collision": "none"
            },
            "source": null,
            "change": null,
            "close": null,
            "focus": null,
            "open": null,
            "response": null,
            "search": null,
            "select": null
        },
        "requestIndex": 0,
        "pending": 0,
        "_create": function() {
            var t, i, n, r = this.element[0].nodeName.toLowerCase(), s = "textarea" === r, a = "input" === r;
            this.isMultiLine = !!s || !a && this.element.prop("isContentEditable"), this.valueMethod = this.element[s || a ? "val" : "text"], 
            this.isNewMenu = !0, this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off"), 
            this._on(this.element, {
                "keydown": function(r) {
                    if (this.element.prop("readOnly")) return t = !0, n = !0, void (i = !0);
                    t = !1, n = !1, i = !1;
                    var s = e.ui.keyCode;
                    switch (r.keyCode) {
                      case s.PAGE_UP:
                        t = !0, this._move("previousPage", r);
                        break;

                      case s.PAGE_DOWN:
                        t = !0, this._move("nextPage", r);
                        break;

                      case s.UP:
                        t = !0, this._keyEvent("previous", r);
                        break;

                      case s.DOWN:
                        t = !0, this._keyEvent("next", r);
                        break;

                      case s.ENTER:
                      case s.NUMPAD_ENTER:
                        this.menu.active && (t = !0, r.preventDefault(), this.menu.select(r));
                        break;

                      case s.TAB:
                        this.menu.active && this.menu.select(r);
                        break;

                      case s.ESCAPE:
                        this.menu.element.is(":visible") && (this._value(this.term), this.close(r), r.preventDefault());
                        break;

                      default:
                        i = !0, this._searchTimeout(r);
                    }
                },
                "keypress": function(n) {
                    if (t) return t = !1, void (this.isMultiLine && !this.menu.element.is(":visible") || n.preventDefault());
                    if (!i) {
                        var r = e.ui.keyCode;
                        switch (n.keyCode) {
                          case r.PAGE_UP:
                            this._move("previousPage", n);
                            break;

                          case r.PAGE_DOWN:
                            this._move("nextPage", n);
                            break;

                          case r.UP:
                            this._keyEvent("previous", n);
                            break;

                          case r.DOWN:
                            this._keyEvent("next", n);
                        }
                    }
                },
                "input": function(e) {
                    if (n) return n = !1, void e.preventDefault();
                    this._searchTimeout(e);
                },
                "focus": function() {
                    this.selectedItem = null, this.previous = this._value();
                },
                "blur": function(e) {
                    this.cancelBlur ? delete this.cancelBlur : (clearTimeout(this.searching), this.close(e), 
                    this._change(e));
                }
            }), this._initSource(), this.menu = e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({
                "role": null
            }).hide().data("ui-menu"), this._on(this.menu.element, {
                "mousedown": function(t) {
                    t.preventDefault(), this.cancelBlur = !0, this._delay(function() {
                        delete this.cancelBlur;
                    });
                    var i = this.menu.element[0];
                    e(t.target).closest(".ui-menu-item").length || this._delay(function() {
                        var t = this;
                        this.document.one("mousedown", function(n) {
                            n.target === t.element[0] || n.target === i || e.contains(i, n.target) || t.close();
                        });
                    });
                },
                "menufocus": function(t, i) {
                    if (this.isNewMenu && (this.isNewMenu = !1, t.originalEvent && /^mouse/.test(t.originalEvent.type))) return this.menu.blur(), 
                    void this.document.one("mousemove", function() {
                        e(t.target).trigger(t.originalEvent);
                    });
                    var n = i.item.data("ui-autocomplete-item");
                    !1 !== this._trigger("focus", t, {
                        "item": n
                    }) ? t.originalEvent && /^key/.test(t.originalEvent.type) && this._value(n.value) : this.liveRegion.text(n.value);
                },
                "menuselect": function(e, t) {
                    var i = t.item.data("ui-autocomplete-item"), n = this.previous;
                    this.element[0] !== this.document[0].activeElement && (this.element.focus(), this.previous = n, 
                    this._delay(function() {
                        this.previous = n, this.selectedItem = i;
                    })), !1 !== this._trigger("select", e, {
                        "item": i
                    }) && this._value(i.value), this.term = this._value(), this.close(e), this.selectedItem = i;
                }
            }), this.liveRegion = e("<span>", {
                "role": "status",
                "aria-live": "polite"
            }).addClass("ui-helper-hidden-accessible").insertBefore(this.element), this._on(this.window, {
                "beforeunload": function() {
                    this.element.removeAttr("autocomplete");
                }
            });
        },
        "_destroy": function() {
            clearTimeout(this.searching), this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"), 
            this.menu.element.remove(), this.liveRegion.remove();
        },
        "_setOption": function(e, t) {
            this._super(e, t), "source" === e && this._initSource(), "appendTo" === e && this.menu.element.appendTo(this._appendTo()), 
            "disabled" === e && t && this.xhr && this.xhr.abort();
        },
        "_appendTo": function() {
            var t = this.options.appendTo;
            return t && (t = t.jquery || t.nodeType ? e(t) : this.document.find(t).eq(0)), t || (t = this.element.closest(".ui-front")), 
            t.length || (t = this.document[0].body), t;
        },
        "_initSource": function() {
            var t, i, n = this;
            e.isArray(this.options.source) ? (t = this.options.source, this.source = function(i, n) {
                n(e.ui.autocomplete.filter(t, i.term));
            }) : "string" == typeof this.options.source ? (i = this.options.source, this.source = function(t, r) {
                n.xhr && n.xhr.abort(), n.xhr = e.ajax({
                    "url": i,
                    "data": t,
                    "dataType": "json",
                    "success": function(e) {
                        r(e);
                    },
                    "error": function() {
                        r([]);
                    }
                });
            }) : this.source = this.options.source;
        },
        "_searchTimeout": function(e) {
            clearTimeout(this.searching), this.searching = this._delay(function() {
                this.term !== this._value() && (this.selectedItem = null, this.search(null, e));
            }, this.options.delay);
        },
        "search": function(e, t) {
            return e = null != e ? e : this._value(), this.term = this._value(), e.length < this.options.minLength ? this.close(t) : !1 !== this._trigger("search", t) ? this._search(e) : void 0;
        },
        "_search": function(e) {
            this.pending++, this.element.addClass("ui-autocomplete-loading"), this.cancelSearch = !1, 
            this.source({
                "term": e
            }, this._response());
        },
        "_response": function() {
            var t = ++this.requestIndex;
            return e.proxy(function(e) {
                t === this.requestIndex && this.__response(e), --this.pending || this.element.removeClass("ui-autocomplete-loading");
            }, this);
        },
        "__response": function(e) {
            e && (e = this._normalize(e)), this._trigger("response", null, {
                "content": e
            }), !this.options.disabled && e && e.length && !this.cancelSearch ? (this._suggest(e), 
            this._trigger("open")) : this._close();
        },
        "close": function(e) {
            this.cancelSearch = !0, this._close(e);
        },
        "_close": function(e) {
            this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.blur(), 
            this.isNewMenu = !0, this._trigger("close", e));
        },
        "_change": function(e) {
            this.previous !== this._value() && this._trigger("change", e, {
                "item": this.selectedItem
            });
        },
        "_normalize": function(t) {
            return t.length && t[0].label && t[0].value ? t : e.map(t, function(t) {
                return "string" == typeof t ? {
                    "label": t,
                    "value": t
                } : e.extend({
                    "label": t.label || t.value,
                    "value": t.value || t.label
                }, t);
            });
        },
        "_suggest": function(t) {
            var i = this.menu.element.empty();
            this._renderMenu(i, t), this.isNewMenu = !0, this.menu.refresh(), i.show(), this._resizeMenu(), 
            i.position(e.extend({
                "of": this.element
            }, this.options.position)), this.options.autoFocus && this.menu.next();
        },
        "_resizeMenu": function() {
            var e = this.menu.element;
            e.outerWidth(Math.max(e.width("").outerWidth() + 1, this.element.outerWidth()));
        },
        "_renderMenu": function(t, i) {
            var n = this;
            e.each(i, function(e, i) {
                n._renderItemData(t, i);
            });
        },
        "_renderItemData": function(e, t) {
            return this._renderItem(e, t).data("ui-autocomplete-item", t);
        },
        "_renderItem": function(t, i) {
            return e("<li>").append(e("<a>").text(i.label)).appendTo(t);
        },
        "_move": function(e, t) {
            if (this.menu.element.is(":visible")) return this.menu.isFirstItem() && /^previous/.test(e) || this.menu.isLastItem() && /^next/.test(e) ? (this._value(this.term), 
            void this.menu.blur()) : void this.menu[e](t);
            this.search(null, t);
        },
        "widget": function() {
            return this.menu.element;
        },
        "_value": function() {
            return this.valueMethod.apply(this.element, arguments);
        },
        "_keyEvent": function(e, t) {
            this.isMultiLine && !this.menu.element.is(":visible") || (this._move(e, t), t.preventDefault());
        }
    }), e.extend(e.ui.autocomplete, {
        "escapeRegex": function(e) {
            return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
        },
        "filter": function(t, i) {
            var n = new RegExp(e.ui.autocomplete.escapeRegex(i), "i");
            return e.grep(t, function(e) {
                return n.test(e.label || e.value || e);
            });
        }
    }), e.widget("ui.autocomplete", e.ui.autocomplete, {
        "options": {
            "messages": {
                "noResults": "No search results.",
                "results": function(e) {
                    return e + (e > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate.";
                }
            }
        },
        "__response": function(e) {
            var t;
            this._superApply(arguments), this.options.disabled || this.cancelSearch || (t = e && e.length ? this.options.messages.results(e.length) : this.options.messages.noResults, 
            this.liveRegion.text(t));
        }
    });
}(jQuery), function(e, t) {
    var i, n = "ui-button ui-widget ui-state-default ui-corner-all", r = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only", s = function() {
        var t = e(this);
        setTimeout(function() {
            t.find(":ui-button").button("refresh");
        }, 1);
    }, a = function(t) {
        var i = t.name, n = t.form, r = e([]);
        return i && (i = i.replace(/'/g, "\\'"), r = n ? e(n).find("[name='" + i + "']") : e("[name='" + i + "']", t.ownerDocument).filter(function() {
            return !this.form;
        })), r;
    };
    e.widget("ui.button", {
        "version": "1.10.4",
        "defaultElement": "<button>",
        "options": {
            "disabled": null,
            "text": !0,
            "label": null,
            "icons": {
                "primary": null,
                "secondary": null
            }
        },
        "_create": function() {
            this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, s), 
            "boolean" != typeof this.options.disabled ? this.options.disabled = !!this.element.prop("disabled") : this.element.prop("disabled", this.options.disabled), 
            this._determineButtonType(), this.hasTitle = !!this.buttonElement.attr("title");
            var t = this, r = this.options, o = "checkbox" === this.type || "radio" === this.type, l = o ? "" : "ui-state-active";
            null === r.label && (r.label = "input" === this.type ? this.buttonElement.val() : this.buttonElement.html()), 
            this._hoverable(this.buttonElement), this.buttonElement.addClass(n).attr("role", "button").bind("mouseenter" + this.eventNamespace, function() {
                r.disabled || this === i && e(this).addClass("ui-state-active");
            }).bind("mouseleave" + this.eventNamespace, function() {
                r.disabled || e(this).removeClass(l);
            }).bind("click" + this.eventNamespace, function(e) {
                r.disabled && (e.preventDefault(), e.stopImmediatePropagation());
            }), this._on({
                "focus": function() {
                    this.buttonElement.addClass("ui-state-focus");
                },
                "blur": function() {
                    this.buttonElement.removeClass("ui-state-focus");
                }
            }), o && this.element.bind("change" + this.eventNamespace, function() {
                t.refresh();
            }), "checkbox" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                if (r.disabled) return !1;
            }) : "radio" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                if (r.disabled) return !1;
                e(this).addClass("ui-state-active"), t.buttonElement.attr("aria-pressed", "true");
                var i = t.element[0];
                a(i).not(i).map(function() {
                    return e(this).button("widget")[0];
                }).removeClass("ui-state-active").attr("aria-pressed", "false");
            }) : (this.buttonElement.bind("mousedown" + this.eventNamespace, function() {
                if (r.disabled) return !1;
                e(this).addClass("ui-state-active"), i = this, t.document.one("mouseup", function() {
                    i = null;
                });
            }).bind("mouseup" + this.eventNamespace, function() {
                if (r.disabled) return !1;
                e(this).removeClass("ui-state-active");
            }).bind("keydown" + this.eventNamespace, function(t) {
                if (r.disabled) return !1;
                t.keyCode !== e.ui.keyCode.SPACE && t.keyCode !== e.ui.keyCode.ENTER || e(this).addClass("ui-state-active");
            }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function() {
                e(this).removeClass("ui-state-active");
            }), this.buttonElement.is("a") && this.buttonElement.keyup(function(t) {
                t.keyCode === e.ui.keyCode.SPACE && e(this).click();
            })), this._setOption("disabled", r.disabled), this._resetButton();
        },
        "_determineButtonType": function() {
            var e, t, i;
            this.element.is("[type=checkbox]") ? this.type = "checkbox" : this.element.is("[type=radio]") ? this.type = "radio" : this.element.is("input") ? this.type = "input" : this.type = "button", 
            "checkbox" === this.type || "radio" === this.type ? (e = this.element.parents().last(), 
            t = "label[for='" + this.element.attr("id") + "']", this.buttonElement = e.find(t), 
            this.buttonElement.length || (e = e.length ? e.siblings() : this.element.siblings(), 
            this.buttonElement = e.filter(t), this.buttonElement.length || (this.buttonElement = e.find(t))), 
            this.element.addClass("ui-helper-hidden-accessible"), (i = this.element.is(":checked")) && this.buttonElement.addClass("ui-state-active"), 
            this.buttonElement.prop("aria-pressed", i)) : this.buttonElement = this.element;
        },
        "widget": function() {
            return this.buttonElement;
        },
        "_destroy": function() {
            this.element.removeClass("ui-helper-hidden-accessible"), this.buttonElement.removeClass(n + " ui-state-active " + r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()), 
            this.hasTitle || this.buttonElement.removeAttr("title");
        },
        "_setOption": function(e, t) {
            if (this._super(e, t), "disabled" === e) return this.element.prop("disabled", !!t), 
            void (t && this.buttonElement.removeClass("ui-state-focus"));
            this._resetButton();
        },
        "refresh": function() {
            var t = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled");
            t !== this.options.disabled && this._setOption("disabled", t), "radio" === this.type ? a(this.element[0]).each(function() {
                e(this).is(":checked") ? e(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") : e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false");
            }) : "checkbox" === this.type && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false"));
        },
        "_resetButton": function() {
            if ("input" !== this.type) {
                var t = this.buttonElement.removeClass(r), i = e("<span></span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(), n = this.options.icons, s = n.primary && n.secondary, a = [];
                n.primary || n.secondary ? (this.options.text && a.push("ui-button-text-icon" + (s ? "s" : n.primary ? "-primary" : "-secondary")), 
                n.primary && t.prepend("<span class='ui-button-icon-primary ui-icon " + n.primary + "'></span>"), 
                n.secondary && t.append("<span class='ui-button-icon-secondary ui-icon " + n.secondary + "'></span>"), 
                this.options.text || (a.push(s ? "ui-button-icons-only" : "ui-button-icon-only"), 
                this.hasTitle || t.attr("title", e.trim(i)))) : a.push("ui-button-text-only"), t.addClass(a.join(" "));
            } else this.options.label && this.element.val(this.options.label);
        }
    }), e.widget("ui.buttonset", {
        "version": "1.10.4",
        "options": {
            "items": "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"
        },
        "_create": function() {
            this.element.addClass("ui-buttonset");
        },
        "_init": function() {
            this.refresh();
        },
        "_setOption": function(e, t) {
            "disabled" === e && this.buttons.button("option", e, t), this._super(e, t);
        },
        "refresh": function() {
            var t = "rtl" === this.element.css("direction");
            this.buttons = this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function() {
                return e(this).button("widget")[0];
            }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(t ? "ui-corner-left" : "ui-corner-right").end().end();
        },
        "_destroy": function() {
            this.element.removeClass("ui-buttonset"), this.buttons.map(function() {
                return e(this).button("widget")[0];
            }).removeClass("ui-corner-left ui-corner-right").end().button("destroy");
        }
    });
}(jQuery), function(e, t) {
    function i() {
        this._curInst = null, this._keyEvent = !1, this._disabledInputs = [], this._datepickerShowing = !1, 
        this._inDialog = !1, this._mainDivId = "ui-datepicker-div", this._inlineClass = "ui-datepicker-inline", 
        this._appendClass = "ui-datepicker-append", this._triggerClass = "ui-datepicker-trigger", 
        this._dialogClass = "ui-datepicker-dialog", this._disableClass = "ui-datepicker-disabled", 
        this._unselectableClass = "ui-datepicker-unselectable", this._currentClass = "ui-datepicker-current-day", 
        this._dayOverClass = "ui-datepicker-days-cell-over", this.regional = [], this.regional[""] = {
            "closeText": "Done",
            "prevText": "Prev",
            "nextText": "Next",
            "currentText": "Today",
            "monthNames": [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ],
            "monthNamesShort": [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ],
            "dayNames": [ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" ],
            "dayNamesShort": [ "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" ],
            "dayNamesMin": [ "Su", "Mo", "Tu", "We", "Th", "Fr", "Sa" ],
            "weekHeader": "Wk",
            "dateFormat": "mm/dd/yy",
            "firstDay": 0,
            "isRTL": !1,
            "showMonthAfterYear": !1,
            "yearSuffix": ""
        }, this._defaults = {
            "showOn": "focus",
            "showAnim": "fadeIn",
            "showOptions": {},
            "defaultDate": null,
            "appendText": "",
            "buttonText": "...",
            "buttonImage": "",
            "buttonImageOnly": !1,
            "hideIfNoPrevNext": !1,
            "navigationAsDateFormat": !1,
            "gotoCurrent": !1,
            "changeMonth": !1,
            "changeYear": !1,
            "yearRange": "c-10:c+10",
            "showOtherMonths": !1,
            "selectOtherMonths": !1,
            "showWeek": !1,
            "calculateWeek": this.iso8601Week,
            "shortYearCutoff": "+10",
            "minDate": null,
            "maxDate": null,
            "duration": "fast",
            "beforeShowDay": null,
            "beforeShow": null,
            "onSelect": null,
            "onChangeMonthYear": null,
            "onClose": null,
            "numberOfMonths": 1,
            "showCurrentAtPos": 0,
            "stepMonths": 1,
            "stepBigMonths": 12,
            "altField": "",
            "altFormat": "",
            "constrainInput": !0,
            "showButtonPanel": !1,
            "autoSize": !1,
            "disabled": !1
        }, e.extend(this._defaults, this.regional[""]), this.dpDiv = n(e("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));
    }
    function n(t) {
        var i = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
        return t.delegate(i, "mouseout", function() {
            e(this).removeClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && e(this).removeClass("ui-datepicker-prev-hover"), 
            -1 !== this.className.indexOf("ui-datepicker-next") && e(this).removeClass("ui-datepicker-next-hover");
        }).delegate(i, "mouseover", function() {
            e.datepicker._isDisabledDatepicker(s.inline ? t.parent()[0] : s.input[0]) || (e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"), 
            e(this).addClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && e(this).addClass("ui-datepicker-prev-hover"), 
            -1 !== this.className.indexOf("ui-datepicker-next") && e(this).addClass("ui-datepicker-next-hover"));
        });
    }
    function r(t, i) {
        e.extend(t, i);
        for (var n in i) null == i[n] && (t[n] = i[n]);
        return t;
    }
    e.extend(e.ui, {
        "datepicker": {
            "version": "1.10.4"
        }
    });
    var s, a = "datepicker";
    e.extend(i.prototype, {
        "markerClassName": "hasDatepicker",
        "maxRows": 4,
        "_widgetDatepicker": function() {
            return this.dpDiv;
        },
        "setDefaults": function(e) {
            return r(this._defaults, e || {}), this;
        },
        "_attachDatepicker": function(t, i) {
            var n, r, s;
            r = "div" === (n = t.nodeName.toLowerCase()) || "span" === n, t.id || (this.uuid += 1, 
            t.id = "dp" + this.uuid), (s = this._newInst(e(t), r)).settings = e.extend({}, i || {}), 
            "input" === n ? this._connectDatepicker(t, s) : r && this._inlineDatepicker(t, s);
        },
        "_newInst": function(t, i) {
            return {
                "id": t[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1"),
                "input": t,
                "selectedDay": 0,
                "selectedMonth": 0,
                "selectedYear": 0,
                "drawMonth": 0,
                "drawYear": 0,
                "inline": i,
                "dpDiv": i ? n(e("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")) : this.dpDiv
            };
        },
        "_connectDatepicker": function(t, i) {
            var n = e(t);
            i.append = e([]), i.trigger = e([]), n.hasClass(this.markerClassName) || (this._attachments(n, i), 
            n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp), 
            this._autoSize(i), e.data(t, a, i), i.settings.disabled && this._disableDatepicker(t));
        },
        "_attachments": function(t, i) {
            var n, r, s, a = this._get(i, "appendText"), o = this._get(i, "isRTL");
            i.append && i.append.remove(), a && (i.append = e("<span class='" + this._appendClass + "'>" + a + "</span>"), 
            t[o ? "before" : "after"](i.append)), t.unbind("focus", this._showDatepicker), i.trigger && i.trigger.remove(), 
            "focus" !== (n = this._get(i, "showOn")) && "both" !== n || t.focus(this._showDatepicker), 
            "button" !== n && "both" !== n || (r = this._get(i, "buttonText"), s = this._get(i, "buttonImage"), 
            i.trigger = e(this._get(i, "buttonImageOnly") ? e("<img/>").addClass(this._triggerClass).attr({
                "src": s,
                "alt": r,
                "title": r
            }) : e("<button type='button'></button>").addClass(this._triggerClass).html(s ? e("<img/>").attr({
                "src": s,
                "alt": r,
                "title": r
            }) : r)), t[o ? "before" : "after"](i.trigger), i.trigger.click(function() {
                return e.datepicker._datepickerShowing && e.datepicker._lastInput === t[0] ? e.datepicker._hideDatepicker() : e.datepicker._datepickerShowing && e.datepicker._lastInput !== t[0] ? (e.datepicker._hideDatepicker(), 
                e.datepicker._showDatepicker(t[0])) : e.datepicker._showDatepicker(t[0]), !1;
            }));
        },
        "_autoSize": function(e) {
            if (this._get(e, "autoSize") && !e.inline) {
                var t, i, n, r, s = new Date(2009, 11, 20), a = this._get(e, "dateFormat");
                a.match(/[DM]/) && (t = function(e) {
                    for (i = 0, n = 0, r = 0; r < e.length; r++) e[r].length > i && (i = e[r].length, 
                    n = r);
                    return n;
                }, s.setMonth(t(this._get(e, a.match(/MM/) ? "monthNames" : "monthNamesShort"))), 
                s.setDate(t(this._get(e, a.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - s.getDay())), 
                e.input.attr("size", this._formatDate(e, s).length);
            }
        },
        "_inlineDatepicker": function(t, i) {
            var n = e(t);
            n.hasClass(this.markerClassName) || (n.addClass(this.markerClassName).append(i.dpDiv), 
            e.data(t, a, i), this._setDate(i, this._getDefaultDate(i), !0), this._updateDatepicker(i), 
            this._updateAlternate(i), i.settings.disabled && this._disableDatepicker(t), i.dpDiv.css("display", "block"));
        },
        "_dialogDatepicker": function(t, i, n, s, o) {
            var l, h, u, p, c, d = this._dialogInst;
            return d || (this.uuid += 1, l = "dp" + this.uuid, this._dialogInput = e("<input type='text' id='" + l + "' style='position: absolute; top: -100px; width: 0px;'/>"), 
            this._dialogInput.keydown(this._doKeyDown), e("body").append(this._dialogInput), 
            (d = this._dialogInst = this._newInst(this._dialogInput, !1)).settings = {}, e.data(this._dialogInput[0], a, d)), 
            r(d.settings, s || {}), i = i && i.constructor === Date ? this._formatDate(d, i) : i, 
            this._dialogInput.val(i), this._pos = o ? o.length ? o : [ o.pageX, o.pageY ] : null, 
            this._pos || (h = document.documentElement.clientWidth, u = document.documentElement.clientHeight, 
            p = document.documentElement.scrollLeft || document.body.scrollLeft, c = document.documentElement.scrollTop || document.body.scrollTop, 
            this._pos = [ h / 2 - 100 + p, u / 2 - 150 + c ]), this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"), 
            d.settings.onSelect = n, this._inDialog = !0, this.dpDiv.addClass(this._dialogClass), 
            this._showDatepicker(this._dialogInput[0]), e.blockUI && e.blockUI(this.dpDiv), 
            e.data(this._dialogInput[0], a, d), this;
        },
        "_destroyDatepicker": function(t) {
            var i, n = e(t), r = e.data(t, a);
            n.hasClass(this.markerClassName) && (i = t.nodeName.toLowerCase(), e.removeData(t, a), 
            "input" === i ? (r.append.remove(), r.trigger.remove(), n.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) : "div" !== i && "span" !== i || n.removeClass(this.markerClassName).empty());
        },
        "_enableDatepicker": function(t) {
            var i, n, r = e(t), s = e.data(t, a);
            r.hasClass(this.markerClassName) && ("input" === (i = t.nodeName.toLowerCase()) ? (t.disabled = !1, 
            s.trigger.filter("button").each(function() {
                this.disabled = !1;
            }).end().filter("img").css({
                "opacity": "1.0",
                "cursor": ""
            })) : "div" !== i && "span" !== i || ((n = r.children("." + this._inlineClass)).children().removeClass("ui-state-disabled"), 
            n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !1)), 
            this._disabledInputs = e.map(this._disabledInputs, function(e) {
                return e === t ? null : e;
            }));
        },
        "_disableDatepicker": function(t) {
            var i, n, r = e(t), s = e.data(t, a);
            r.hasClass(this.markerClassName) && ("input" === (i = t.nodeName.toLowerCase()) ? (t.disabled = !0, 
            s.trigger.filter("button").each(function() {
                this.disabled = !0;
            }).end().filter("img").css({
                "opacity": "0.5",
                "cursor": "default"
            })) : "div" !== i && "span" !== i || ((n = r.children("." + this._inlineClass)).children().addClass("ui-state-disabled"), 
            n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !0)), 
            this._disabledInputs = e.map(this._disabledInputs, function(e) {
                return e === t ? null : e;
            }), this._disabledInputs[this._disabledInputs.length] = t);
        },
        "_isDisabledDatepicker": function(e) {
            if (!e) return !1;
            for (var t = 0; t < this._disabledInputs.length; t++) if (this._disabledInputs[t] === e) return !0;
            return !1;
        },
        "_getInst": function(t) {
            try {
                return e.data(t, a);
            } catch (e) {
                throw "Missing instance data for this datepicker";
            }
        },
        "_optionDatepicker": function(t, i, n) {
            var s, a, o, l, h = this._getInst(t);
            if (2 === arguments.length && "string" == typeof i) return "defaults" === i ? e.extend({}, e.datepicker._defaults) : h ? "all" === i ? e.extend({}, h.settings) : this._get(h, i) : null;
            s = i || {}, "string" == typeof i && ((s = {})[i] = n), h && (this._curInst === h && this._hideDatepicker(), 
            a = this._getDateDatepicker(t, !0), o = this._getMinMaxDate(h, "min"), l = this._getMinMaxDate(h, "max"), 
            r(h.settings, s), null !== o && void 0 !== s.dateFormat && void 0 === s.minDate && (h.settings.minDate = this._formatDate(h, o)), 
            null !== l && void 0 !== s.dateFormat && void 0 === s.maxDate && (h.settings.maxDate = this._formatDate(h, l)), 
            "disabled" in s && (s.disabled ? this._disableDatepicker(t) : this._enableDatepicker(t)), 
            this._attachments(e(t), h), this._autoSize(h), this._setDate(h, a), this._updateAlternate(h), 
            this._updateDatepicker(h));
        },
        "_changeDatepicker": function(e, t, i) {
            this._optionDatepicker(e, t, i);
        },
        "_refreshDatepicker": function(e) {
            var t = this._getInst(e);
            t && this._updateDatepicker(t);
        },
        "_setDateDatepicker": function(e, t) {
            var i = this._getInst(e);
            i && (this._setDate(i, t), this._updateDatepicker(i), this._updateAlternate(i));
        },
        "_getDateDatepicker": function(e, t) {
            var i = this._getInst(e);
            return i && !i.inline && this._setDateFromField(i, t), i ? this._getDate(i) : null;
        },
        "_doKeyDown": function(t) {
            var i, n, r, s = e.datepicker._getInst(t.target), a = !0, o = s.dpDiv.is(".ui-datepicker-rtl");
            if (s._keyEvent = !0, e.datepicker._datepickerShowing) switch (t.keyCode) {
              case 9:
                e.datepicker._hideDatepicker(), a = !1;
                break;

              case 13:
                return (r = e("td." + e.datepicker._dayOverClass + ":not(." + e.datepicker._currentClass + ")", s.dpDiv))[0] && e.datepicker._selectDay(t.target, s.selectedMonth, s.selectedYear, r[0]), 
                (i = e.datepicker._get(s, "onSelect")) ? (n = e.datepicker._formatDate(s), i.apply(s.input ? s.input[0] : null, [ n, s ])) : e.datepicker._hideDatepicker(), 
                !1;

              case 27:
                e.datepicker._hideDatepicker();
                break;

              case 33:
                e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(s, "stepBigMonths") : -e.datepicker._get(s, "stepMonths"), "M");
                break;

              case 34:
                e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(s, "stepBigMonths") : +e.datepicker._get(s, "stepMonths"), "M");
                break;

              case 35:
                (t.ctrlKey || t.metaKey) && e.datepicker._clearDate(t.target), a = t.ctrlKey || t.metaKey;
                break;

              case 36:
                (t.ctrlKey || t.metaKey) && e.datepicker._gotoToday(t.target), a = t.ctrlKey || t.metaKey;
                break;

              case 37:
                (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, o ? 1 : -1, "D"), 
                a = t.ctrlKey || t.metaKey, t.originalEvent.altKey && e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(s, "stepBigMonths") : -e.datepicker._get(s, "stepMonths"), "M");
                break;

              case 38:
                (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, -7, "D"), a = t.ctrlKey || t.metaKey;
                break;

              case 39:
                (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, o ? -1 : 1, "D"), 
                a = t.ctrlKey || t.metaKey, t.originalEvent.altKey && e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(s, "stepBigMonths") : +e.datepicker._get(s, "stepMonths"), "M");
                break;

              case 40:
                (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, 7, "D"), a = t.ctrlKey || t.metaKey;
                break;

              default:
                a = !1;
            } else 36 === t.keyCode && t.ctrlKey ? e.datepicker._showDatepicker(this) : a = !1;
            a && (t.preventDefault(), t.stopPropagation());
        },
        "_doKeyPress": function(t) {
            var i, n, r = e.datepicker._getInst(t.target);
            if (e.datepicker._get(r, "constrainInput")) return i = e.datepicker._possibleChars(e.datepicker._get(r, "dateFormat")), 
            n = String.fromCharCode(null == t.charCode ? t.keyCode : t.charCode), t.ctrlKey || t.metaKey || n < " " || !i || i.indexOf(n) > -1;
        },
        "_doKeyUp": function(t) {
            var i = e.datepicker._getInst(t.target);
            if (i.input.val() !== i.lastVal) try {
                e.datepicker.parseDate(e.datepicker._get(i, "dateFormat"), i.input ? i.input.val() : null, e.datepicker._getFormatConfig(i)) && (e.datepicker._setDateFromField(i), 
                e.datepicker._updateAlternate(i), e.datepicker._updateDatepicker(i));
            } catch (e) {}
            return !0;
        },
        "_showDatepicker": function(t) {
            if ("input" !== (t = t.target || t).nodeName.toLowerCase() && (t = e("input", t.parentNode)[0]), 
            !e.datepicker._isDisabledDatepicker(t) && e.datepicker._lastInput !== t) {
                var i, n, s, a, o, l, h;
                i = e.datepicker._getInst(t), e.datepicker._curInst && e.datepicker._curInst !== i && (e.datepicker._curInst.dpDiv.stop(!0, !0), 
                i && e.datepicker._datepickerShowing && e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])), 
                !1 !== (s = (n = e.datepicker._get(i, "beforeShow")) ? n.apply(t, [ t, i ]) : {}) && (r(i.settings, s), 
                i.lastVal = null, e.datepicker._lastInput = t, e.datepicker._setDateFromField(i), 
                e.datepicker._inDialog && (t.value = ""), e.datepicker._pos || (e.datepicker._pos = e.datepicker._findPos(t), 
                e.datepicker._pos[1] += t.offsetHeight), a = !1, e(t).parents().each(function() {
                    return !(a |= "fixed" === e(this).css("position"));
                }), o = {
                    "left": e.datepicker._pos[0],
                    "top": e.datepicker._pos[1]
                }, e.datepicker._pos = null, i.dpDiv.empty(), i.dpDiv.css({
                    "position": "absolute",
                    "display": "block",
                    "top": "-1000px"
                }), e.datepicker._updateDatepicker(i), o = e.datepicker._checkOffset(i, o, a), i.dpDiv.css({
                    "position": e.datepicker._inDialog && e.blockUI ? "static" : a ? "fixed" : "absolute",
                    "display": "none",
                    "left": o.left + "px",
                    "top": o.top + "px"
                }), i.inline || (l = e.datepicker._get(i, "showAnim"), h = e.datepicker._get(i, "duration"), 
                i.dpDiv.zIndex(e(t).zIndex() + 1), e.datepicker._datepickerShowing = !0, e.effects && e.effects.effect[l] ? i.dpDiv.show(l, e.datepicker._get(i, "showOptions"), h) : i.dpDiv[l || "show"](l ? h : null), 
                e.datepicker._shouldFocusInput(i) && i.input.focus(), e.datepicker._curInst = i));
            }
        },
        "_updateDatepicker": function(t) {
            this.maxRows = 4, s = t, t.dpDiv.empty().append(this._generateHTML(t)), this._attachHandlers(t), 
            t.dpDiv.find("." + this._dayOverClass + " a").mouseover();
            var i, n = this._getNumberOfMonths(t), r = n[1];
            t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""), 
            r > 1 && t.dpDiv.addClass("ui-datepicker-multi-" + r).css("width", 17 * r + "em"), 
            t.dpDiv[(1 !== n[0] || 1 !== n[1] ? "add" : "remove") + "Class"]("ui-datepicker-multi"), 
            t.dpDiv[(this._get(t, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"), 
            t === e.datepicker._curInst && e.datepicker._datepickerShowing && e.datepicker._shouldFocusInput(t) && t.input.focus(), 
            t.yearshtml && (i = t.yearshtml, setTimeout(function() {
                i === t.yearshtml && t.yearshtml && t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml), 
                i = t.yearshtml = null;
            }, 0));
        },
        "_shouldFocusInput": function(e) {
            return e.input && e.input.is(":visible") && !e.input.is(":disabled") && !e.input.is(":focus");
        },
        "_checkOffset": function(t, i, n) {
            var r = t.dpDiv.outerWidth(), s = t.dpDiv.outerHeight(), a = t.input ? t.input.outerWidth() : 0, o = t.input ? t.input.outerHeight() : 0, l = document.documentElement.clientWidth + (n ? 0 : e(document).scrollLeft()), h = document.documentElement.clientHeight + (n ? 0 : e(document).scrollTop());
            return i.left -= this._get(t, "isRTL") ? r - a : 0, i.left -= n && i.left === t.input.offset().left ? e(document).scrollLeft() : 0, 
            i.top -= n && i.top === t.input.offset().top + o ? e(document).scrollTop() : 0, 
            i.left -= Math.min(i.left, i.left + r > l && l > r ? Math.abs(i.left + r - l) : 0), 
            i.top -= Math.min(i.top, i.top + s > h && h > s ? Math.abs(s + o) : 0), i;
        },
        "_findPos": function(t) {
            for (var i, n = this._getInst(t), r = this._get(n, "isRTL"); t && ("hidden" === t.type || 1 !== t.nodeType || e.expr.filters.hidden(t)); ) t = t[r ? "previousSibling" : "nextSibling"];
            return i = e(t).offset(), [ i.left, i.top ];
        },
        "_hideDatepicker": function(t) {
            var i, n, r, s, o = this._curInst;
            !o || t && o !== e.data(t, a) || this._datepickerShowing && (i = this._get(o, "showAnim"), 
            n = this._get(o, "duration"), r = function() {
                e.datepicker._tidyDialog(o);
            }, e.effects && (e.effects.effect[i] || e.effects[i]) ? o.dpDiv.hide(i, e.datepicker._get(o, "showOptions"), n, r) : o.dpDiv["slideDown" === i ? "slideUp" : "fadeIn" === i ? "fadeOut" : "hide"](i ? n : null, r), 
            i || r(), this._datepickerShowing = !1, (s = this._get(o, "onClose")) && s.apply(o.input ? o.input[0] : null, [ o.input ? o.input.val() : "", o ]), 
            this._lastInput = null, this._inDialog && (this._dialogInput.css({
                "position": "absolute",
                "left": "0",
                "top": "-100px"
            }), e.blockUI && (e.unblockUI(), e("body").append(this.dpDiv))), this._inDialog = !1);
        },
        "_tidyDialog": function(e) {
            e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");
        },
        "_checkExternalClick": function(t) {
            if (e.datepicker._curInst) {
                var i = e(t.target), n = e.datepicker._getInst(i[0]);
                (i[0].id === e.datepicker._mainDivId || 0 !== i.parents("#" + e.datepicker._mainDivId).length || i.hasClass(e.datepicker.markerClassName) || i.closest("." + e.datepicker._triggerClass).length || !e.datepicker._datepickerShowing || e.datepicker._inDialog && e.blockUI) && (!i.hasClass(e.datepicker.markerClassName) || e.datepicker._curInst === n) || e.datepicker._hideDatepicker();
            }
        },
        "_adjustDate": function(t, i, n) {
            var r = e(t), s = this._getInst(r[0]);
            this._isDisabledDatepicker(r[0]) || (this._adjustInstDate(s, i + ("M" === n ? this._get(s, "showCurrentAtPos") : 0), n), 
            this._updateDatepicker(s));
        },
        "_gotoToday": function(t) {
            var i, n = e(t), r = this._getInst(n[0]);
            this._get(r, "gotoCurrent") && r.currentDay ? (r.selectedDay = r.currentDay, r.drawMonth = r.selectedMonth = r.currentMonth, 
            r.drawYear = r.selectedYear = r.currentYear) : (i = new Date(), r.selectedDay = i.getDate(), 
            r.drawMonth = r.selectedMonth = i.getMonth(), r.drawYear = r.selectedYear = i.getFullYear()), 
            this._notifyChange(r), this._adjustDate(n);
        },
        "_selectMonthYear": function(t, i, n) {
            var r = e(t), s = this._getInst(r[0]);
            s["selected" + ("M" === n ? "Month" : "Year")] = s["draw" + ("M" === n ? "Month" : "Year")] = parseInt(i.options[i.selectedIndex].value, 10), 
            this._notifyChange(s), this._adjustDate(r);
        },
        "_selectDay": function(t, i, n, r) {
            var s, a = e(t);
            e(r).hasClass(this._unselectableClass) || this._isDisabledDatepicker(a[0]) || ((s = this._getInst(a[0])).selectedDay = s.currentDay = e("a", r).html(), 
            s.selectedMonth = s.currentMonth = i, s.selectedYear = s.currentYear = n, this._selectDate(t, this._formatDate(s, s.currentDay, s.currentMonth, s.currentYear)));
        },
        "_clearDate": function(t) {
            var i = e(t);
            this._selectDate(i, "");
        },
        "_selectDate": function(t, i) {
            var n, r = e(t), s = this._getInst(r[0]);
            i = null != i ? i : this._formatDate(s), s.input && s.input.val(i), this._updateAlternate(s), 
            (n = this._get(s, "onSelect")) ? n.apply(s.input ? s.input[0] : null, [ i, s ]) : s.input && s.input.trigger("change"), 
            s.inline ? this._updateDatepicker(s) : (this._hideDatepicker(), this._lastInput = s.input[0], 
            "object" != typeof s.input[0] && s.input.focus(), this._lastInput = null);
        },
        "_updateAlternate": function(t) {
            var i, n, r, s = this._get(t, "altField");
            s && (i = this._get(t, "altFormat") || this._get(t, "dateFormat"), n = this._getDate(t), 
            r = this.formatDate(i, n, this._getFormatConfig(t)), e(s).each(function() {
                e(this).val(r);
            }));
        },
        "noWeekends": function(e) {
            var t = e.getDay();
            return [ t > 0 && t < 6, "" ];
        },
        "iso8601Week": function(e) {
            var t, i = new Date(e.getTime());
            return i.setDate(i.getDate() + 4 - (i.getDay() || 7)), t = i.getTime(), i.setMonth(0), 
            i.setDate(1), Math.floor(Math.round((t - i) / 864e5) / 7) + 1;
        },
        "parseDate": function(t, i, n) {
            if (null == t || null == i) throw "Invalid arguments";
            if ("" === (i = "object" == typeof i ? i.toString() : i + "")) return null;
            var r, s, a, o, l = 0, h = (n ? n.shortYearCutoff : null) || this._defaults.shortYearCutoff, u = "string" != typeof h ? h : new Date().getFullYear() % 100 + parseInt(h, 10), p = (n ? n.dayNamesShort : null) || this._defaults.dayNamesShort, c = (n ? n.dayNames : null) || this._defaults.dayNames, d = (n ? n.monthNamesShort : null) || this._defaults.monthNamesShort, f = (n ? n.monthNames : null) || this._defaults.monthNames, y = -1, m = -1, g = -1, v = -1, L = !1, O = function(e) {
                var i = r + 1 < t.length && t.charAt(r + 1) === e;
                return i && r++, i;
            }, b = function(e) {
                var t = O(e), n = "@" === e ? 14 : "!" === e ? 20 : "y" === e && t ? 4 : "o" === e ? 3 : 2, r = new RegExp("^\\d{1," + n + "}"), s = i.substring(l).match(r);
                if (!s) throw "Missing number at position " + l;
                return l += s[0].length, parseInt(s[0], 10);
            }, w = function(t, n, r) {
                var s = -1, a = e.map(O(t) ? r : n, function(e, t) {
                    return [ [ t, e ] ];
                }).sort(function(e, t) {
                    return -(e[1].length - t[1].length);
                });
                if (e.each(a, function(e, t) {
                    var n = t[1];
                    if (i.substr(l, n.length).toLowerCase() === n.toLowerCase()) return s = t[0], l += n.length, 
                    !1;
                }), -1 !== s) return s + 1;
                throw "Unknown name at position " + l;
            }, C = function() {
                if (i.charAt(l) !== t.charAt(r)) throw "Unexpected literal at position " + l;
                l++;
            };
            for (r = 0; r < t.length; r++) if (L) "'" !== t.charAt(r) || O("'") ? C() : L = !1; else switch (t.charAt(r)) {
              case "d":
                g = b("d");
                break;

              case "D":
                w("D", p, c);
                break;

              case "o":
                v = b("o");
                break;

              case "m":
                m = b("m");
                break;

              case "M":
                m = w("M", d, f);
                break;

              case "y":
                y = b("y");
                break;

              case "@":
                y = (o = new Date(b("@"))).getFullYear(), m = o.getMonth() + 1, g = o.getDate();
                break;

              case "!":
                y = (o = new Date((b("!") - this._ticksTo1970) / 1e4)).getFullYear(), m = o.getMonth() + 1, 
                g = o.getDate();
                break;

              case "'":
                O("'") ? C() : L = !0;
                break;

              default:
                C();
            }
            if (l < i.length && (a = i.substr(l), !/^\s+/.test(a))) throw "Extra/unparsed characters found in date: " + a;
            if (-1 === y ? y = new Date().getFullYear() : y < 100 && (y += new Date().getFullYear() - new Date().getFullYear() % 100 + (y <= u ? 0 : -100)), 
            v > -1) for (m = 1, g = v; ;) {
                if (s = this._getDaysInMonth(y, m - 1), g <= s) break;
                m++, g -= s;
            }
            if ((o = this._daylightSavingAdjust(new Date(y, m - 1, g))).getFullYear() !== y || o.getMonth() + 1 !== m || o.getDate() !== g) throw "Invalid date";
            return o;
        },
        "ATOM": "yy-mm-dd",
        "COOKIE": "D, dd M yy",
        "ISO_8601": "yy-mm-dd",
        "RFC_822": "D, d M y",
        "RFC_850": "DD, dd-M-y",
        "RFC_1036": "D, d M y",
        "RFC_1123": "D, d M yy",
        "RFC_2822": "D, d M yy",
        "RSS": "D, d M y",
        "TICKS": "!",
        "TIMESTAMP": "@",
        "W3C": "yy-mm-dd",
        "_ticksTo1970": 24 * (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)) * 60 * 60 * 1e7,
        "formatDate": function(e, t, i) {
            if (!t) return "";
            var n, r = (i ? i.dayNamesShort : null) || this._defaults.dayNamesShort, s = (i ? i.dayNames : null) || this._defaults.dayNames, a = (i ? i.monthNamesShort : null) || this._defaults.monthNamesShort, o = (i ? i.monthNames : null) || this._defaults.monthNames, l = function(t) {
                var i = n + 1 < e.length && e.charAt(n + 1) === t;
                return i && n++, i;
            }, h = function(e, t, i) {
                var n = "" + t;
                if (l(e)) for (;n.length < i; ) n = "0" + n;
                return n;
            }, u = function(e, t, i, n) {
                return l(e) ? n[t] : i[t];
            }, p = "", c = !1;
            if (t) for (n = 0; n < e.length; n++) if (c) "'" !== e.charAt(n) || l("'") ? p += e.charAt(n) : c = !1; else switch (e.charAt(n)) {
              case "d":
                p += h("d", t.getDate(), 2);
                break;

              case "D":
                p += u("D", t.getDay(), r, s);
                break;

              case "o":
                p += h("o", Math.round((new Date(t.getFullYear(), t.getMonth(), t.getDate()).getTime() - new Date(t.getFullYear(), 0, 0).getTime()) / 864e5), 3);
                break;

              case "m":
                p += h("m", t.getMonth() + 1, 2);
                break;

              case "M":
                p += u("M", t.getMonth(), a, o);
                break;

              case "y":
                p += l("y") ? t.getFullYear() : (t.getYear() % 100 < 10 ? "0" : "") + t.getYear() % 100;
                break;

              case "@":
                p += t.getTime();
                break;

              case "!":
                p += 1e4 * t.getTime() + this._ticksTo1970;
                break;

              case "'":
                l("'") ? p += "'" : c = !0;
                break;

              default:
                p += e.charAt(n);
            }
            return p;
        },
        "_possibleChars": function(e) {
            var t, i = "", n = !1, r = function(i) {
                var n = t + 1 < e.length && e.charAt(t + 1) === i;
                return n && t++, n;
            };
            for (t = 0; t < e.length; t++) if (n) "'" !== e.charAt(t) || r("'") ? i += e.charAt(t) : n = !1; else switch (e.charAt(t)) {
              case "d":
              case "m":
              case "y":
              case "@":
                i += "0123456789";
                break;

              case "D":
              case "M":
                return null;

              case "'":
                r("'") ? i += "'" : n = !0;
                break;

              default:
                i += e.charAt(t);
            }
            return i;
        },
        "_get": function(e, t) {
            return void 0 !== e.settings[t] ? e.settings[t] : this._defaults[t];
        },
        "_setDateFromField": function(e, t) {
            if (e.input.val() !== e.lastVal) {
                var i = this._get(e, "dateFormat"), n = e.lastVal = e.input ? e.input.val() : null, r = this._getDefaultDate(e), s = r, a = this._getFormatConfig(e);
                try {
                    s = this.parseDate(i, n, a) || r;
                } catch (e) {
                    n = t ? "" : n;
                }
                e.selectedDay = s.getDate(), e.drawMonth = e.selectedMonth = s.getMonth(), e.drawYear = e.selectedYear = s.getFullYear(), 
                e.currentDay = n ? s.getDate() : 0, e.currentMonth = n ? s.getMonth() : 0, e.currentYear = n ? s.getFullYear() : 0, 
                this._adjustInstDate(e);
            }
        },
        "_getDefaultDate": function(e) {
            return this._restrictMinMax(e, this._determineDate(e, this._get(e, "defaultDate"), new Date()));
        },
        "_determineDate": function(t, i, n) {
            var r = null == i || "" === i ? n : "string" == typeof i ? function(i) {
                try {
                    return e.datepicker.parseDate(e.datepicker._get(t, "dateFormat"), i, e.datepicker._getFormatConfig(t));
                } catch (e) {}
                for (var n = (i.toLowerCase().match(/^c/) ? e.datepicker._getDate(t) : null) || new Date(), r = n.getFullYear(), s = n.getMonth(), a = n.getDate(), o = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, l = o.exec(i); l; ) {
                    switch (l[2] || "d") {
                      case "d":
                      case "D":
                        a += parseInt(l[1], 10);
                        break;

                      case "w":
                      case "W":
                        a += 7 * parseInt(l[1], 10);
                        break;

                      case "m":
                      case "M":
                        s += parseInt(l[1], 10), a = Math.min(a, e.datepicker._getDaysInMonth(r, s));
                        break;

                      case "y":
                      case "Y":
                        r += parseInt(l[1], 10), a = Math.min(a, e.datepicker._getDaysInMonth(r, s));
                    }
                    l = o.exec(i);
                }
                return new Date(r, s, a);
            }(i) : "number" == typeof i ? isNaN(i) ? n : function(e) {
                var t = new Date();
                return t.setDate(t.getDate() + e), t;
            }(i) : new Date(i.getTime());
            return (r = r && "Invalid Date" === r.toString() ? n : r) && (r.setHours(0), r.setMinutes(0), 
            r.setSeconds(0), r.setMilliseconds(0)), this._daylightSavingAdjust(r);
        },
        "_daylightSavingAdjust": function(e) {
            return e ? (e.setHours(e.getHours() > 12 ? e.getHours() + 2 : 0), e) : null;
        },
        "_setDate": function(e, t, i) {
            var n = !t, r = e.selectedMonth, s = e.selectedYear, a = this._restrictMinMax(e, this._determineDate(e, t, new Date()));
            e.selectedDay = e.currentDay = a.getDate(), e.drawMonth = e.selectedMonth = e.currentMonth = a.getMonth(), 
            e.drawYear = e.selectedYear = e.currentYear = a.getFullYear(), r === e.selectedMonth && s === e.selectedYear || i || this._notifyChange(e), 
            this._adjustInstDate(e), e.input && e.input.val(n ? "" : this._formatDate(e));
        },
        "_getDate": function(e) {
            return !e.currentYear || e.input && "" === e.input.val() ? null : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
        },
        "_attachHandlers": function(t) {
            var i = this._get(t, "stepMonths"), n = "#" + t.id.replace(/\\\\/g, "\\");
            t.dpDiv.find("[data-handler]").map(function() {
                var t = {
                    "prev": function() {
                        e.datepicker._adjustDate(n, -i, "M");
                    },
                    "next": function() {
                        e.datepicker._adjustDate(n, +i, "M");
                    },
                    "hide": function() {
                        e.datepicker._hideDatepicker();
                    },
                    "today": function() {
                        e.datepicker._gotoToday(n);
                    },
                    "selectDay": function() {
                        return e.datepicker._selectDay(n, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this), 
                        !1;
                    },
                    "selectMonth": function() {
                        return e.datepicker._selectMonthYear(n, this, "M"), !1;
                    },
                    "selectYear": function() {
                        return e.datepicker._selectMonthYear(n, this, "Y"), !1;
                    }
                };
                e(this).bind(this.getAttribute("data-event"), t[this.getAttribute("data-handler")]);
            });
        },
        "_generateHTML": function(e) {
            var t, i, n, r, s, a, o, l, h, u, p, c, d, f, y, m, g, v, L, O, b, w, C, S, x, _, E, N, P, T, M, F, A, k, I, R, D, z, B, U = new Date(), G = this._daylightSavingAdjust(new Date(U.getFullYear(), U.getMonth(), U.getDate())), H = this._get(e, "isRTL"), j = this._get(e, "showButtonPanel"), V = this._get(e, "hideIfNoPrevNext"), W = this._get(e, "navigationAsDateFormat"), q = this._getNumberOfMonths(e), X = this._get(e, "showCurrentAtPos"), Z = this._get(e, "stepMonths"), Y = 1 !== q[0] || 1 !== q[1], $ = this._daylightSavingAdjust(e.currentDay ? new Date(e.currentYear, e.currentMonth, e.currentDay) : new Date(9999, 9, 9)), K = this._getMinMaxDate(e, "min"), Q = this._getMinMaxDate(e, "max"), J = e.drawMonth - X, ee = e.drawYear;
            if (J < 0 && (J += 12, ee--), Q) for (t = this._daylightSavingAdjust(new Date(Q.getFullYear(), Q.getMonth() - q[0] * q[1] + 1, Q.getDate())), 
            t = K && t < K ? K : t; this._daylightSavingAdjust(new Date(ee, J, 1)) > t; ) --J < 0 && (J = 11, 
            ee--);
            for (e.drawMonth = J, e.drawYear = ee, i = this._get(e, "prevText"), i = W ? this.formatDate(i, this._daylightSavingAdjust(new Date(ee, J - Z, 1)), this._getFormatConfig(e)) : i, 
            n = this._canAdjustMonth(e, -1, ee, J) ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (H ? "e" : "w") + "'>" + i + "</span></a>" : V ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (H ? "e" : "w") + "'>" + i + "</span></a>", 
            r = this._get(e, "nextText"), r = W ? this.formatDate(r, this._daylightSavingAdjust(new Date(ee, J + Z, 1)), this._getFormatConfig(e)) : r, 
            s = this._canAdjustMonth(e, 1, ee, J) ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='" + r + "'><span class='ui-icon ui-icon-circle-triangle-" + (H ? "w" : "e") + "'>" + r + "</span></a>" : V ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" + r + "'><span class='ui-icon ui-icon-circle-triangle-" + (H ? "w" : "e") + "'>" + r + "</span></a>", 
            a = this._get(e, "currentText"), o = this._get(e, "gotoCurrent") && e.currentDay ? $ : G, 
            a = W ? this.formatDate(a, o, this._getFormatConfig(e)) : a, l = e.inline ? "" : "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" + this._get(e, "closeText") + "</button>", 
            h = j ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (H ? l : "") + (this._isInRange(e, o) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>" + a + "</button>" : "") + (H ? "" : l) + "</div>" : "", 
            u = parseInt(this._get(e, "firstDay"), 10), u = isNaN(u) ? 0 : u, p = this._get(e, "showWeek"), 
            c = this._get(e, "dayNames"), d = this._get(e, "dayNamesMin"), f = this._get(e, "monthNames"), 
            y = this._get(e, "monthNamesShort"), m = this._get(e, "beforeShowDay"), g = this._get(e, "showOtherMonths"), 
            v = this._get(e, "selectOtherMonths"), L = this._getDefaultDate(e), O = "", w = 0; w < q[0]; w++) {
                for (C = "", this.maxRows = 4, S = 0; S < q[1]; S++) {
                    if (x = this._daylightSavingAdjust(new Date(ee, J, e.selectedDay)), _ = " ui-corner-all", 
                    E = "", Y) {
                        if (E += "<div class='ui-datepicker-group", q[1] > 1) switch (S) {
                          case 0:
                            E += " ui-datepicker-group-first", _ = " ui-corner-" + (H ? "right" : "left");
                            break;

                          case q[1] - 1:
                            E += " ui-datepicker-group-last", _ = " ui-corner-" + (H ? "left" : "right");
                            break;

                          default:
                            E += " ui-datepicker-group-middle", _ = "";
                        }
                        E += "'>";
                    }
                    for (E += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + _ + "'>" + (/all|left/.test(_) && 0 === w ? H ? s : n : "") + (/all|right/.test(_) && 0 === w ? H ? n : s : "") + this._generateMonthYearHeader(e, J, ee, K, Q, w > 0 || S > 0, f, y) + "</div><table class='ui-datepicker-calendar'><thead><tr>", 
                    N = p ? "<th class='ui-datepicker-week-col'>" + this._get(e, "weekHeader") + "</th>" : "", 
                    b = 0; b < 7; b++) P = (b + u) % 7, N += "<th" + ((b + u + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + "><span title='" + c[P] + "'>" + d[P] + "</span></th>";
                    for (E += N + "</tr></thead><tbody>", T = this._getDaysInMonth(ee, J), ee === e.selectedYear && J === e.selectedMonth && (e.selectedDay = Math.min(e.selectedDay, T)), 
                    M = (this._getFirstDayOfMonth(ee, J) - u + 7) % 7, F = Math.ceil((M + T) / 7), A = Y && this.maxRows > F ? this.maxRows : F, 
                    this.maxRows = A, k = this._daylightSavingAdjust(new Date(ee, J, 1 - M)), I = 0; I < A; I++) {
                        for (E += "<tr>", R = p ? "<td class='ui-datepicker-week-col'>" + this._get(e, "calculateWeek")(k) + "</td>" : "", 
                        b = 0; b < 7; b++) D = m ? m.apply(e.input ? e.input[0] : null, [ k ]) : [ !0, "" ], 
                        B = (z = k.getMonth() !== J) && !v || !D[0] || K && k < K || Q && k > Q, R += "<td class='" + ((b + u + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (z ? " ui-datepicker-other-month" : "") + (k.getTime() === x.getTime() && J === e.selectedMonth && e._keyEvent || L.getTime() === k.getTime() && L.getTime() === x.getTime() ? " " + this._dayOverClass : "") + (B ? " " + this._unselectableClass + " ui-state-disabled" : "") + (z && !g ? "" : " " + D[1] + (k.getTime() === $.getTime() ? " " + this._currentClass : "") + (k.getTime() === G.getTime() ? " ui-datepicker-today" : "")) + "'" + (z && !g || !D[2] ? "" : " title='" + D[2].replace(/'/g, "&#39;") + "'") + (B ? "" : " data-handler='selectDay' data-event='click' data-month='" + k.getMonth() + "' data-year='" + k.getFullYear() + "'") + ">" + (z && !g ? "&#xa0;" : B ? "<span class='ui-state-default'>" + k.getDate() + "</span>" : "<a class='ui-state-default" + (k.getTime() === G.getTime() ? " ui-state-highlight" : "") + (k.getTime() === $.getTime() ? " ui-state-active" : "") + (z ? " ui-priority-secondary" : "") + "' href='#'>" + k.getDate() + "</a>") + "</td>", 
                        k.setDate(k.getDate() + 1), k = this._daylightSavingAdjust(k);
                        E += R + "</tr>";
                    }
                    ++J > 11 && (J = 0, ee++), C += E += "</tbody></table>" + (Y ? "</div>" + (q[0] > 0 && S === q[1] - 1 ? "<div class='ui-datepicker-row-break'></div>" : "") : "");
                }
                O += C;
            }
            return O += h, e._keyEvent = !1, O;
        },
        "_generateMonthYearHeader": function(e, t, i, n, r, s, a, o) {
            var l, h, u, p, c, d, f, y, m = this._get(e, "changeMonth"), g = this._get(e, "changeYear"), v = this._get(e, "showMonthAfterYear"), L = "<div class='ui-datepicker-title'>", O = "";
            if (s || !m) O += "<span class='ui-datepicker-month'>" + a[t] + "</span>"; else {
                for (l = n && n.getFullYear() === i, h = r && r.getFullYear() === i, O += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>", 
                u = 0; u < 12; u++) (!l || u >= n.getMonth()) && (!h || u <= r.getMonth()) && (O += "<option value='" + u + "'" + (u === t ? " selected='selected'" : "") + ">" + o[u] + "</option>");
                O += "</select>";
            }
            if (v || (L += O + (!s && m && g ? "" : "&#xa0;")), !e.yearshtml) if (e.yearshtml = "", 
            s || !g) L += "<span class='ui-datepicker-year'>" + i + "</span>"; else {
                for (p = this._get(e, "yearRange").split(":"), c = new Date().getFullYear(), f = (d = function(e) {
                    var t = e.match(/c[+\-].*/) ? i + parseInt(e.substring(1), 10) : e.match(/[+\-].*/) ? c + parseInt(e, 10) : parseInt(e, 10);
                    return isNaN(t) ? c : t;
                })(p[0]), y = Math.max(f, d(p[1] || "")), f = n ? Math.max(f, n.getFullYear()) : f, 
                y = r ? Math.min(y, r.getFullYear()) : y, e.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>"; f <= y; f++) e.yearshtml += "<option value='" + f + "'" + (f === i ? " selected='selected'" : "") + ">" + f + "</option>";
                e.yearshtml += "</select>", L += e.yearshtml, e.yearshtml = null;
            }
            return L += this._get(e, "yearSuffix"), v && (L += (!s && m && g ? "" : "&#xa0;") + O), 
            L += "</div>";
        },
        "_adjustInstDate": function(e, t, i) {
            var n = e.drawYear + ("Y" === i ? t : 0), r = e.drawMonth + ("M" === i ? t : 0), s = Math.min(e.selectedDay, this._getDaysInMonth(n, r)) + ("D" === i ? t : 0), a = this._restrictMinMax(e, this._daylightSavingAdjust(new Date(n, r, s)));
            e.selectedDay = a.getDate(), e.drawMonth = e.selectedMonth = a.getMonth(), e.drawYear = e.selectedYear = a.getFullYear(), 
            "M" !== i && "Y" !== i || this._notifyChange(e);
        },
        "_restrictMinMax": function(e, t) {
            var i = this._getMinMaxDate(e, "min"), n = this._getMinMaxDate(e, "max"), r = i && t < i ? i : t;
            return n && r > n ? n : r;
        },
        "_notifyChange": function(e) {
            var t = this._get(e, "onChangeMonthYear");
            t && t.apply(e.input ? e.input[0] : null, [ e.selectedYear, e.selectedMonth + 1, e ]);
        },
        "_getNumberOfMonths": function(e) {
            var t = this._get(e, "numberOfMonths");
            return null == t ? [ 1, 1 ] : "number" == typeof t ? [ 1, t ] : t;
        },
        "_getMinMaxDate": function(e, t) {
            return this._determineDate(e, this._get(e, t + "Date"), null);
        },
        "_getDaysInMonth": function(e, t) {
            return 32 - this._daylightSavingAdjust(new Date(e, t, 32)).getDate();
        },
        "_getFirstDayOfMonth": function(e, t) {
            return new Date(e, t, 1).getDay();
        },
        "_canAdjustMonth": function(e, t, i, n) {
            var r = this._getNumberOfMonths(e), s = this._daylightSavingAdjust(new Date(i, n + (t < 0 ? t : r[0] * r[1]), 1));
            return t < 0 && s.setDate(this._getDaysInMonth(s.getFullYear(), s.getMonth())), 
            this._isInRange(e, s);
        },
        "_isInRange": function(e, t) {
            var i, n, r = this._getMinMaxDate(e, "min"), s = this._getMinMaxDate(e, "max"), a = null, o = null, l = this._get(e, "yearRange");
            return l && (i = l.split(":"), n = new Date().getFullYear(), a = parseInt(i[0], 10), 
            o = parseInt(i[1], 10), i[0].match(/[+\-].*/) && (a += n), i[1].match(/[+\-].*/) && (o += n)), 
            (!r || t.getTime() >= r.getTime()) && (!s || t.getTime() <= s.getTime()) && (!a || t.getFullYear() >= a) && (!o || t.getFullYear() <= o);
        },
        "_getFormatConfig": function(e) {
            var t = this._get(e, "shortYearCutoff");
            return t = "string" != typeof t ? t : new Date().getFullYear() % 100 + parseInt(t, 10), 
            {
                "shortYearCutoff": t,
                "dayNamesShort": this._get(e, "dayNamesShort"),
                "dayNames": this._get(e, "dayNames"),
                "monthNamesShort": this._get(e, "monthNamesShort"),
                "monthNames": this._get(e, "monthNames")
            };
        },
        "_formatDate": function(e, t, i, n) {
            t || (e.currentDay = e.selectedDay, e.currentMonth = e.selectedMonth, e.currentYear = e.selectedYear);
            var r = t ? "object" == typeof t ? t : this._daylightSavingAdjust(new Date(n, i, t)) : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
            return this.formatDate(this._get(e, "dateFormat"), r, this._getFormatConfig(e));
        }
    }), e.fn.datepicker = function(t) {
        if (!this.length) return this;
        e.datepicker.initialized || (e(document).mousedown(e.datepicker._checkExternalClick), 
        e.datepicker.initialized = !0), 0 === e("#" + e.datepicker._mainDivId).length && e("body").append(e.datepicker.dpDiv);
        var i = Array.prototype.slice.call(arguments, 1);
        return "string" != typeof t || "isDisabled" !== t && "getDate" !== t && "widget" !== t ? "option" === t && 2 === arguments.length && "string" == typeof arguments[1] ? e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [ this[0] ].concat(i)) : this.each(function() {
            "string" == typeof t ? e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [ this ].concat(i)) : e.datepicker._attachDatepicker(this, t);
        }) : e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [ this[0] ].concat(i));
    }, e.datepicker = new i(), e.datepicker.initialized = !1, e.datepicker.uuid = new Date().getTime(), 
    e.datepicker.version = "1.10.4";
}(jQuery), function(e, t) {
    var i = {
        "buttons": !0,
        "height": !0,
        "maxHeight": !0,
        "maxWidth": !0,
        "minHeight": !0,
        "minWidth": !0,
        "width": !0
    }, n = {
        "maxHeight": !0,
        "maxWidth": !0,
        "minHeight": !0,
        "minWidth": !0
    };
    e.widget("ui.dialog", {
        "version": "1.10.4",
        "options": {
            "appendTo": "body",
            "autoOpen": !0,
            "buttons": [],
            "closeOnEscape": !0,
            "closeText": "close",
            "dialogClass": "",
            "draggable": !0,
            "hide": null,
            "height": "auto",
            "maxHeight": null,
            "maxWidth": null,
            "minHeight": 150,
            "minWidth": 150,
            "modal": !1,
            "position": {
                "my": "center",
                "at": "center",
                "of": window,
                "collision": "fit",
                "using": function(t) {
                    var i = e(this).css(t).offset().top;
                    i < 0 && e(this).css("top", t.top - i);
                }
            },
            "resizable": !0,
            "show": null,
            "title": null,
            "width": 300,
            "beforeClose": null,
            "close": null,
            "drag": null,
            "dragStart": null,
            "dragStop": null,
            "focus": null,
            "open": null,
            "resize": null,
            "resizeStart": null,
            "resizeStop": null
        },
        "_create": function() {
            this.originalCss = {
                "display": this.element[0].style.display,
                "width": this.element[0].style.width,
                "minHeight": this.element[0].style.minHeight,
                "maxHeight": this.element[0].style.maxHeight,
                "height": this.element[0].style.height
            }, this.originalPosition = {
                "parent": this.element.parent(),
                "index": this.element.parent().children().index(this.element)
            }, this.originalTitle = this.element.attr("title"), this.options.title = this.options.title || this.originalTitle, 
            this._createWrapper(), this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog), 
            this._createTitlebar(), this._createButtonPane(), this.options.draggable && e.fn.draggable && this._makeDraggable(), 
            this.options.resizable && e.fn.resizable && this._makeResizable(), this._isOpen = !1;
        },
        "_init": function() {
            this.options.autoOpen && this.open();
        },
        "_appendTo": function() {
            var t = this.options.appendTo;
            return t && (t.jquery || t.nodeType) ? e(t) : this.document.find(t || "body").eq(0);
        },
        "_destroy": function() {
            var e, t = this.originalPosition;
            this._destroyOverlay(), this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(), 
            this.uiDialog.stop(!0, !0).remove(), this.originalTitle && this.element.attr("title", this.originalTitle), 
            (e = t.parent.children().eq(t.index)).length && e[0] !== this.element[0] ? e.before(this.element) : t.parent.append(this.element);
        },
        "widget": function() {
            return this.uiDialog;
        },
        "disable": e.noop,
        "enable": e.noop,
        "close": function(t) {
            var i, n = this;
            if (this._isOpen && !1 !== this._trigger("beforeClose", t)) {
                if (this._isOpen = !1, this._destroyOverlay(), !this.opener.filter(":focusable").focus().length) try {
                    (i = this.document[0].activeElement) && "body" !== i.nodeName.toLowerCase() && e(i).blur();
                } catch (e) {}
                this._hide(this.uiDialog, this.options.hide, function() {
                    n._trigger("close", t);
                });
            }
        },
        "isOpen": function() {
            return this._isOpen;
        },
        "moveToTop": function() {
            this._moveToTop();
        },
        "_moveToTop": function(e, t) {
            var i = !!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;
            return i && !t && this._trigger("focus", e), i;
        },
        "open": function() {
            var t = this;
            this._isOpen ? this._moveToTop() && this._focusTabbable() : (this._isOpen = !0, 
            this.opener = e(this.document[0].activeElement), this._size(), this._position(), 
            this._createOverlay(), this._moveToTop(null, !0), this._show(this.uiDialog, this.options.show, function() {
                t._focusTabbable(), t._trigger("focus");
            }), this._trigger("open"));
        },
        "_focusTabbable": function() {
            var e = this.element.find("[autofocus]");
            e.length || (e = this.element.find(":tabbable")), e.length || (e = this.uiDialogButtonPane.find(":tabbable")), 
            e.length || (e = this.uiDialogTitlebarClose.filter(":tabbable")), e.length || (e = this.uiDialog), 
            e.eq(0).focus();
        },
        "_keepFocus": function(t) {
            function i() {
                var t = this.document[0].activeElement;
                this.uiDialog[0] === t || e.contains(this.uiDialog[0], t) || this._focusTabbable();
            }
            t.preventDefault(), i.call(this), this._delay(i);
        },
        "_createWrapper": function() {
            this.uiDialog = e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " + this.options.dialogClass).hide().attr({
                "tabIndex": -1,
                "role": "dialog"
            }).appendTo(this._appendTo()), this._on(this.uiDialog, {
                "keydown": function(t) {
                    if (this.options.closeOnEscape && !t.isDefaultPrevented() && t.keyCode && t.keyCode === e.ui.keyCode.ESCAPE) return t.preventDefault(), 
                    void this.close(t);
                    if (t.keyCode === e.ui.keyCode.TAB) {
                        var i = this.uiDialog.find(":tabbable"), n = i.filter(":first"), r = i.filter(":last");
                        t.target !== r[0] && t.target !== this.uiDialog[0] || t.shiftKey ? t.target !== n[0] && t.target !== this.uiDialog[0] || !t.shiftKey || (r.focus(1), 
                        t.preventDefault()) : (n.focus(1), t.preventDefault());
                    }
                },
                "mousedown": function(e) {
                    this._moveToTop(e) && this._focusTabbable();
                }
            }), this.element.find("[aria-describedby]").length || this.uiDialog.attr({
                "aria-describedby": this.element.uniqueId().attr("id")
            });
        },
        "_createTitlebar": function() {
            var t;
            this.uiDialogTitlebar = e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog), 
            this._on(this.uiDialogTitlebar, {
                "mousedown": function(t) {
                    e(t.target).closest(".ui-dialog-titlebar-close") || this.uiDialog.focus();
                }
            }), this.uiDialogTitlebarClose = e("<button type='button'></button>").button({
                "label": this.options.closeText,
                "icons": {
                    "primary": "ui-icon-closethick"
                },
                "text": !1
            }).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar), this._on(this.uiDialogTitlebarClose, {
                "click": function(e) {
                    e.preventDefault(), this.close(e);
                }
            }), t = e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar), 
            this._title(t), this.uiDialog.attr({
                "aria-labelledby": t.attr("id")
            });
        },
        "_title": function(e) {
            this.options.title || e.html("&#160;"), e.text(this.options.title);
        },
        "_createButtonPane": function() {
            this.uiDialogButtonPane = e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"), 
            this.uiButtonSet = e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane), 
            this._createButtons();
        },
        "_createButtons": function() {
            var t = this, i = this.options.buttons;
            this.uiDialogButtonPane.remove(), this.uiButtonSet.empty(), e.isEmptyObject(i) || e.isArray(i) && !i.length ? this.uiDialog.removeClass("ui-dialog-buttons") : (e.each(i, function(i, n) {
                var r, s;
                n = e.isFunction(n) ? {
                    "click": n,
                    "text": i
                } : n, n = e.extend({
                    "type": "button"
                }, n), r = n.click, n.click = function() {
                    r.apply(t.element[0], arguments);
                }, s = {
                    "icons": n.icons,
                    "text": n.showText
                }, delete n.icons, delete n.showText, e("<button></button>", n).button(s).appendTo(t.uiButtonSet);
            }), this.uiDialog.addClass("ui-dialog-buttons"), this.uiDialogButtonPane.appendTo(this.uiDialog));
        },
        "_makeDraggable": function() {
            function t(e) {
                return {
                    "position": e.position,
                    "offset": e.offset
                };
            }
            var i = this, n = this.options;
            this.uiDialog.draggable({
                "cancel": ".ui-dialog-content, .ui-dialog-titlebar-close",
                "handle": ".ui-dialog-titlebar",
                "containment": "document",
                "start": function(n, r) {
                    e(this).addClass("ui-dialog-dragging"), i._blockFrames(), i._trigger("dragStart", n, t(r));
                },
                "drag": function(e, n) {
                    i._trigger("drag", e, t(n));
                },
                "stop": function(r, s) {
                    n.position = [ s.position.left - i.document.scrollLeft(), s.position.top - i.document.scrollTop() ], 
                    e(this).removeClass("ui-dialog-dragging"), i._unblockFrames(), i._trigger("dragStop", r, t(s));
                }
            });
        },
        "_makeResizable": function() {
            function t(e) {
                return {
                    "originalPosition": e.originalPosition,
                    "originalSize": e.originalSize,
                    "position": e.position,
                    "size": e.size
                };
            }
            var i = this, n = this.options, r = n.resizable, s = this.uiDialog.css("position"), a = "string" == typeof r ? r : "n,e,s,w,se,sw,ne,nw";
            this.uiDialog.resizable({
                "cancel": ".ui-dialog-content",
                "containment": "document",
                "alsoResize": this.element,
                "maxWidth": n.maxWidth,
                "maxHeight": n.maxHeight,
                "minWidth": n.minWidth,
                "minHeight": this._minHeight(),
                "handles": a,
                "start": function(n, r) {
                    e(this).addClass("ui-dialog-resizing"), i._blockFrames(), i._trigger("resizeStart", n, t(r));
                },
                "resize": function(e, n) {
                    i._trigger("resize", e, t(n));
                },
                "stop": function(r, s) {
                    n.height = e(this).height(), n.width = e(this).width(), e(this).removeClass("ui-dialog-resizing"), 
                    i._unblockFrames(), i._trigger("resizeStop", r, t(s));
                }
            }).css("position", s);
        },
        "_minHeight": function() {
            var e = this.options;
            return "auto" === e.height ? e.minHeight : Math.min(e.minHeight, e.height);
        },
        "_position": function() {
            var e = this.uiDialog.is(":visible");
            e || this.uiDialog.show(), this.uiDialog.position(this.options.position), e || this.uiDialog.hide();
        },
        "_setOptions": function(t) {
            var r = this, s = !1, a = {};
            e.each(t, function(e, t) {
                r._setOption(e, t), e in i && (s = !0), e in n && (a[e] = t);
            }), s && (this._size(), this._position()), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", a);
        },
        "_setOption": function(e, t) {
            var i, n, r = this.uiDialog;
            "dialogClass" === e && r.removeClass(this.options.dialogClass).addClass(t), "disabled" !== e && (this._super(e, t), 
            "appendTo" === e && this.uiDialog.appendTo(this._appendTo()), "buttons" === e && this._createButtons(), 
            "closeText" === e && this.uiDialogTitlebarClose.button({
                "label": "" + t
            }), "draggable" === e && ((i = r.is(":data(ui-draggable)")) && !t && r.draggable("destroy"), 
            !i && t && this._makeDraggable()), "position" === e && this._position(), "resizable" === e && ((n = r.is(":data(ui-resizable)")) && !t && r.resizable("destroy"), 
            n && "string" == typeof t && r.resizable("option", "handles", t), n || !1 === t || this._makeResizable()), 
            "title" === e && this._title(this.uiDialogTitlebar.find(".ui-dialog-title")));
        },
        "_size": function() {
            var e, t, i, n = this.options;
            this.element.show().css({
                "width": "auto",
                "minHeight": 0,
                "maxHeight": "none",
                "height": 0
            }), n.minWidth > n.width && (n.width = n.minWidth), e = this.uiDialog.css({
                "height": "auto",
                "width": n.width
            }).outerHeight(), t = Math.max(0, n.minHeight - e), i = "number" == typeof n.maxHeight ? Math.max(0, n.maxHeight - e) : "none", 
            "auto" === n.height ? this.element.css({
                "minHeight": t,
                "maxHeight": i,
                "height": "auto"
            }) : this.element.height(Math.max(0, n.height - e)), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight());
        },
        "_blockFrames": function() {
            this.iframeBlocks = this.document.find("iframe").map(function() {
                var t = e(this);
                return e("<div>").css({
                    "position": "absolute",
                    "width": t.outerWidth(),
                    "height": t.outerHeight()
                }).appendTo(t.parent()).offset(t.offset())[0];
            });
        },
        "_unblockFrames": function() {
            this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks);
        },
        "_allowInteraction": function(t) {
            return !!e(t.target).closest(".ui-dialog").length || !!e(t.target).closest(".ui-datepicker").length;
        },
        "_createOverlay": function() {
            if (this.options.modal) {
                var t = this, i = this.widgetFullName;
                e.ui.dialog.overlayInstances || this._delay(function() {
                    e.ui.dialog.overlayInstances && this.document.bind("focusin.dialog", function(n) {
                        t._allowInteraction(n) || (n.preventDefault(), e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable());
                    });
                }), this.overlay = e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()), 
                this._on(this.overlay, {
                    "mousedown": "_keepFocus"
                }), e.ui.dialog.overlayInstances++;
            }
        },
        "_destroyOverlay": function() {
            this.options.modal && this.overlay && (e.ui.dialog.overlayInstances--, e.ui.dialog.overlayInstances || this.document.unbind("focusin.dialog"), 
            this.overlay.remove(), this.overlay = null);
        }
    }), e.ui.dialog.overlayInstances = 0, !1 !== e.uiBackCompat && e.widget("ui.dialog", e.ui.dialog, {
        "_position": function() {
            var t, i = this.options.position, n = [], r = [ 0, 0 ];
            i ? (("string" == typeof i || "object" == typeof i && "0" in i) && (1 === (n = i.split ? i.split(" ") : [ i[0], i[1] ]).length && (n[1] = n[0]), 
            e.each([ "left", "top" ], function(e, t) {
                +n[e] === n[e] && (r[e] = n[e], n[e] = t);
            }), i = {
                "my": n[0] + (r[0] < 0 ? r[0] : "+" + r[0]) + " " + n[1] + (r[1] < 0 ? r[1] : "+" + r[1]),
                "at": n.join(" ")
            }), i = e.extend({}, e.ui.dialog.prototype.options.position, i)) : i = e.ui.dialog.prototype.options.position, 
            (t = this.uiDialog.is(":visible")) || this.uiDialog.show(), this.uiDialog.position(i), 
            t || this.uiDialog.hide();
        }
    });
}(jQuery), function(e, t) {
    e.widget("ui.draggable", e.ui.mouse, {
        "version": "1.10.4",
        "widgetEventPrefix": "drag",
        "options": {
            "addClasses": !0,
            "appendTo": "parent",
            "axis": !1,
            "connectToSortable": !1,
            "containment": !1,
            "cursor": "auto",
            "cursorAt": !1,
            "grid": !1,
            "handle": !1,
            "helper": "original",
            "iframeFix": !1,
            "opacity": !1,
            "refreshPositions": !1,
            "revert": !1,
            "revertDuration": 500,
            "scope": "default",
            "scroll": !0,
            "scrollSensitivity": 20,
            "scrollSpeed": 20,
            "snap": !1,
            "snapMode": "both",
            "snapTolerance": 20,
            "stack": !1,
            "zIndex": !1,
            "drag": null,
            "start": null,
            "stop": null
        },
        "_create": function() {
            "original" !== this.options.helper || /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative"), 
            this.options.addClasses && this.element.addClass("ui-draggable"), this.options.disabled && this.element.addClass("ui-draggable-disabled"), 
            this._mouseInit();
        },
        "_destroy": function() {
            this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"), 
            this._mouseDestroy();
        },
        "_mouseCapture": function(t) {
            var i = this.options;
            return !(this.helper || i.disabled || e(t.target).closest(".ui-resizable-handle").length > 0) && (this.handle = this._getHandle(t), 
            !!this.handle && (e(!0 === i.iframeFix ? "iframe" : i.iframeFix).each(function() {
                e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({
                    "width": this.offsetWidth + "px",
                    "height": this.offsetHeight + "px",
                    "position": "absolute",
                    "opacity": "0.001",
                    "zIndex": 1e3
                }).css(e(this).offset()).appendTo("body");
            }), !0));
        },
        "_mouseStart": function(t) {
            var i = this.options;
            return this.helper = this._createHelper(t), this.helper.addClass("ui-draggable-dragging"), 
            this._cacheHelperProportions(), e.ui.ddmanager && (e.ui.ddmanager.current = this), 
            this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(), 
            this.offsetParent = this.helper.offsetParent(), this.offsetParentCssPosition = this.offsetParent.css("position"), 
            this.offset = this.positionAbs = this.element.offset(), this.offset = {
                "top": this.offset.top - this.margins.top,
                "left": this.offset.left - this.margins.left
            }, this.offset.scroll = !1, e.extend(this.offset, {
                "click": {
                    "left": t.pageX - this.offset.left,
                    "top": t.pageY - this.offset.top
                },
                "parent": this._getParentOffset(),
                "relative": this._getRelativeOffset()
            }), this.originalPosition = this.position = this._generatePosition(t), this.originalPageX = t.pageX, 
            this.originalPageY = t.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), 
            this._setContainment(), !1 === this._trigger("start", t) ? (this._clear(), !1) : (this._cacheHelperProportions(), 
            e.ui.ddmanager && !i.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this._mouseDrag(t, !0), 
            e.ui.ddmanager && e.ui.ddmanager.dragStart(this, t), !0);
        },
        "_mouseDrag": function(t, i) {
            if ("fixed" === this.offsetParentCssPosition && (this.offset.parent = this._getParentOffset()), 
            this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), 
            !i) {
                var n = this._uiHash();
                if (!1 === this._trigger("drag", t, n)) return this._mouseUp({}), !1;
                this.position = n.position;
            }
            return this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), 
            this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), 
            e.ui.ddmanager && e.ui.ddmanager.drag(this, t), !1;
        },
        "_mouseStop": function(t) {
            var i = this, n = !1;
            return e.ui.ddmanager && !this.options.dropBehaviour && (n = e.ui.ddmanager.drop(this, t)), 
            this.dropped && (n = this.dropped, this.dropped = !1), !("original" === this.options.helper && !e.contains(this.element[0].ownerDocument, this.element[0])) && ("invalid" === this.options.revert && !n || "valid" === this.options.revert && n || !0 === this.options.revert || e.isFunction(this.options.revert) && this.options.revert.call(this.element, n) ? e(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                !1 !== i._trigger("stop", t) && i._clear();
            }) : !1 !== this._trigger("stop", t) && this._clear(), !1);
        },
        "_mouseUp": function(t) {
            return e("div.ui-draggable-iframeFix").each(function() {
                this.parentNode.removeChild(this);
            }), e.ui.ddmanager && e.ui.ddmanager.dragStop(this, t), e.ui.mouse.prototype._mouseUp.call(this, t);
        },
        "cancel": function() {
            return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(), 
            this;
        },
        "_getHandle": function(t) {
            return !this.options.handle || !!e(t.target).closest(this.element.find(this.options.handle)).length;
        },
        "_createHelper": function(t) {
            var i = this.options, n = e.isFunction(i.helper) ? e(i.helper.apply(this.element[0], [ t ])) : "clone" === i.helper ? this.element.clone().removeAttr("id") : this.element;
            return n.parents("body").length || n.appendTo("parent" === i.appendTo ? this.element[0].parentNode : i.appendTo), 
            n[0] === this.element[0] || /(fixed|absolute)/.test(n.css("position")) || n.css("position", "absolute"), 
            n;
        },
        "_adjustOffsetFromHelper": function(t) {
            "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = {
                "left": +t[0],
                "top": +t[1] || 0
            }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), 
            "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top);
        },
        "_getParentOffset": function() {
            var t = this.offsetParent.offset();
            return "absolute" === this.cssPosition && this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), 
            t.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && e.ui.ie) && (t = {
                "top": 0,
                "left": 0
            }), {
                "top": t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                "left": t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            };
        },
        "_getRelativeOffset": function() {
            if ("relative" === this.cssPosition) {
                var e = this.element.position();
                return {
                    "top": e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    "left": e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                };
            }
            return {
                "top": 0,
                "left": 0
            };
        },
        "_cacheMargins": function() {
            this.margins = {
                "left": parseInt(this.element.css("marginLeft"), 10) || 0,
                "top": parseInt(this.element.css("marginTop"), 10) || 0,
                "right": parseInt(this.element.css("marginRight"), 10) || 0,
                "bottom": parseInt(this.element.css("marginBottom"), 10) || 0
            };
        },
        "_cacheHelperProportions": function() {
            this.helperProportions = {
                "width": this.helper.outerWidth(),
                "height": this.helper.outerHeight()
            };
        },
        "_setContainment": function() {
            var t, i, n, r = this.options;
            r.containment ? "window" !== r.containment ? "document" !== r.containment ? r.containment.constructor !== Array ? ("parent" === r.containment && (r.containment = this.helper[0].parentNode), 
            (n = (i = e(r.containment))[0]) && (t = "hidden" !== i.css("overflow"), this.containment = [ (parseInt(i.css("borderLeftWidth"), 10) || 0) + (parseInt(i.css("paddingLeft"), 10) || 0), (parseInt(i.css("borderTopWidth"), 10) || 0) + (parseInt(i.css("paddingTop"), 10) || 0), (t ? Math.max(n.scrollWidth, n.offsetWidth) : n.offsetWidth) - (parseInt(i.css("borderRightWidth"), 10) || 0) - (parseInt(i.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (t ? Math.max(n.scrollHeight, n.offsetHeight) : n.offsetHeight) - (parseInt(i.css("borderBottomWidth"), 10) || 0) - (parseInt(i.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom ], 
            this.relative_container = i)) : this.containment = r.containment : this.containment = [ 0, 0, e(document).width() - this.helperProportions.width - this.margins.left, (e(document).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top ] : this.containment = [ e(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, e(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, e(window).scrollLeft() + e(window).width() - this.helperProportions.width - this.margins.left, e(window).scrollTop() + (e(window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top ] : this.containment = null;
        },
        "_convertPositionTo": function(t, i) {
            i || (i = this.position);
            var n = "absolute" === t ? 1 : -1, r = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent;
            return this.offset.scroll || (this.offset.scroll = {
                "top": r.scrollTop(),
                "left": r.scrollLeft()
            }), {
                "top": i.top + this.offset.relative.top * n + this.offset.parent.top * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : this.offset.scroll.top) * n,
                "left": i.left + this.offset.relative.left * n + this.offset.parent.left * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : this.offset.scroll.left) * n
            };
        },
        "_generatePosition": function(t) {
            var i, n, r, s, a = this.options, o = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, l = t.pageX, h = t.pageY;
            return this.offset.scroll || (this.offset.scroll = {
                "top": o.scrollTop(),
                "left": o.scrollLeft()
            }), this.originalPosition && (this.containment && (this.relative_container ? (n = this.relative_container.offset(), 
            i = [ this.containment[0] + n.left, this.containment[1] + n.top, this.containment[2] + n.left, this.containment[3] + n.top ]) : i = this.containment, 
            t.pageX - this.offset.click.left < i[0] && (l = i[0] + this.offset.click.left), 
            t.pageY - this.offset.click.top < i[1] && (h = i[1] + this.offset.click.top), t.pageX - this.offset.click.left > i[2] && (l = i[2] + this.offset.click.left), 
            t.pageY - this.offset.click.top > i[3] && (h = i[3] + this.offset.click.top)), a.grid && (r = a.grid[1] ? this.originalPageY + Math.round((h - this.originalPageY) / a.grid[1]) * a.grid[1] : this.originalPageY, 
            h = i ? r - this.offset.click.top >= i[1] || r - this.offset.click.top > i[3] ? r : r - this.offset.click.top >= i[1] ? r - a.grid[1] : r + a.grid[1] : r, 
            s = a.grid[0] ? this.originalPageX + Math.round((l - this.originalPageX) / a.grid[0]) * a.grid[0] : this.originalPageX, 
            l = i ? s - this.offset.click.left >= i[0] || s - this.offset.click.left > i[2] ? s : s - this.offset.click.left >= i[0] ? s - a.grid[0] : s + a.grid[0] : s)), 
            {
                "top": h - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : this.offset.scroll.top),
                "left": l - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : this.offset.scroll.left)
            };
        },
        "_clear": function() {
            this.helper.removeClass("ui-draggable-dragging"), this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(), 
            this.helper = null, this.cancelHelperRemoval = !1;
        },
        "_trigger": function(t, i, n) {
            return n = n || this._uiHash(), e.ui.plugin.call(this, t, [ i, n ]), "drag" === t && (this.positionAbs = this._convertPositionTo("absolute")), 
            e.Widget.prototype._trigger.call(this, t, i, n);
        },
        "plugins": {},
        "_uiHash": function() {
            return {
                "helper": this.helper,
                "position": this.position,
                "originalPosition": this.originalPosition,
                "offset": this.positionAbs
            };
        }
    }), e.ui.plugin.add("draggable", "connectToSortable", {
        "start": function(t, i) {
            var n = e(this).data("ui-draggable"), r = n.options, s = e.extend({}, i, {
                "item": n.element
            });
            n.sortables = [], e(r.connectToSortable).each(function() {
                var i = e.data(this, "ui-sortable");
                i && !i.options.disabled && (n.sortables.push({
                    "instance": i,
                    "shouldRevert": i.options.revert
                }), i.refreshPositions(), i._trigger("activate", t, s));
            });
        },
        "stop": function(t, i) {
            var n = e(this).data("ui-draggable"), r = e.extend({}, i, {
                "item": n.element
            });
            e.each(n.sortables, function() {
                this.instance.isOver ? (this.instance.isOver = 0, n.cancelHelperRemoval = !0, this.instance.cancelHelperRemoval = !1, 
                this.shouldRevert && (this.instance.options.revert = this.shouldRevert), this.instance._mouseStop(t), 
                this.instance.options.helper = this.instance.options._helper, "original" === n.options.helper && this.instance.currentItem.css({
                    "top": "auto",
                    "left": "auto"
                })) : (this.instance.cancelHelperRemoval = !1, this.instance._trigger("deactivate", t, r));
            });
        },
        "drag": function(t, i) {
            var n = e(this).data("ui-draggable"), r = this;
            e.each(n.sortables, function() {
                var s = !1, a = this;
                this.instance.positionAbs = n.positionAbs, this.instance.helperProportions = n.helperProportions, 
                this.instance.offset.click = n.offset.click, this.instance._intersectsWith(this.instance.containerCache) && (s = !0, 
                e.each(n.sortables, function() {
                    return this.instance.positionAbs = n.positionAbs, this.instance.helperProportions = n.helperProportions, 
                    this.instance.offset.click = n.offset.click, this !== a && this.instance._intersectsWith(this.instance.containerCache) && e.contains(a.instance.element[0], this.instance.element[0]) && (s = !1), 
                    s;
                })), s ? (this.instance.isOver || (this.instance.isOver = 1, this.instance.currentItem = e(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item", !0), 
                this.instance.options._helper = this.instance.options.helper, this.instance.options.helper = function() {
                    return i.helper[0];
                }, t.target = this.instance.currentItem[0], this.instance._mouseCapture(t, !0), 
                this.instance._mouseStart(t, !0, !0), this.instance.offset.click.top = n.offset.click.top, 
                this.instance.offset.click.left = n.offset.click.left, this.instance.offset.parent.left -= n.offset.parent.left - this.instance.offset.parent.left, 
                this.instance.offset.parent.top -= n.offset.parent.top - this.instance.offset.parent.top, 
                n._trigger("toSortable", t), n.dropped = this.instance.element, n.currentItem = n.element, 
                this.instance.fromOutside = n), this.instance.currentItem && this.instance._mouseDrag(t)) : this.instance.isOver && (this.instance.isOver = 0, 
                this.instance.cancelHelperRemoval = !0, this.instance.options.revert = !1, this.instance._trigger("out", t, this.instance._uiHash(this.instance)), 
                this.instance._mouseStop(t, !0), this.instance.options.helper = this.instance.options._helper, 
                this.instance.currentItem.remove(), this.instance.placeholder && this.instance.placeholder.remove(), 
                n._trigger("fromSortable", t), n.dropped = !1);
            });
        }
    }), e.ui.plugin.add("draggable", "cursor", {
        "start": function() {
            var t = e("body"), i = e(this).data("ui-draggable").options;
            t.css("cursor") && (i._cursor = t.css("cursor")), t.css("cursor", i.cursor);
        },
        "stop": function() {
            var t = e(this).data("ui-draggable").options;
            t._cursor && e("body").css("cursor", t._cursor);
        }
    }), e.ui.plugin.add("draggable", "opacity", {
        "start": function(t, i) {
            var n = e(i.helper), r = e(this).data("ui-draggable").options;
            n.css("opacity") && (r._opacity = n.css("opacity")), n.css("opacity", r.opacity);
        },
        "stop": function(t, i) {
            var n = e(this).data("ui-draggable").options;
            n._opacity && e(i.helper).css("opacity", n._opacity);
        }
    }), e.ui.plugin.add("draggable", "scroll", {
        "start": function() {
            var t = e(this).data("ui-draggable");
            t.scrollParent[0] !== document && "HTML" !== t.scrollParent[0].tagName && (t.overflowOffset = t.scrollParent.offset());
        },
        "drag": function(t) {
            var i = e(this).data("ui-draggable"), n = i.options, r = !1;
            i.scrollParent[0] !== document && "HTML" !== i.scrollParent[0].tagName ? (n.axis && "x" === n.axis || (i.overflowOffset.top + i.scrollParent[0].offsetHeight - t.pageY < n.scrollSensitivity ? i.scrollParent[0].scrollTop = r = i.scrollParent[0].scrollTop + n.scrollSpeed : t.pageY - i.overflowOffset.top < n.scrollSensitivity && (i.scrollParent[0].scrollTop = r = i.scrollParent[0].scrollTop - n.scrollSpeed)), 
            n.axis && "y" === n.axis || (i.overflowOffset.left + i.scrollParent[0].offsetWidth - t.pageX < n.scrollSensitivity ? i.scrollParent[0].scrollLeft = r = i.scrollParent[0].scrollLeft + n.scrollSpeed : t.pageX - i.overflowOffset.left < n.scrollSensitivity && (i.scrollParent[0].scrollLeft = r = i.scrollParent[0].scrollLeft - n.scrollSpeed))) : (n.axis && "x" === n.axis || (t.pageY - e(document).scrollTop() < n.scrollSensitivity ? r = e(document).scrollTop(e(document).scrollTop() - n.scrollSpeed) : e(window).height() - (t.pageY - e(document).scrollTop()) < n.scrollSensitivity && (r = e(document).scrollTop(e(document).scrollTop() + n.scrollSpeed))), 
            n.axis && "y" === n.axis || (t.pageX - e(document).scrollLeft() < n.scrollSensitivity ? r = e(document).scrollLeft(e(document).scrollLeft() - n.scrollSpeed) : e(window).width() - (t.pageX - e(document).scrollLeft()) < n.scrollSensitivity && (r = e(document).scrollLeft(e(document).scrollLeft() + n.scrollSpeed)))), 
            !1 !== r && e.ui.ddmanager && !n.dropBehaviour && e.ui.ddmanager.prepareOffsets(i, t);
        }
    }), e.ui.plugin.add("draggable", "snap", {
        "start": function() {
            var t = e(this).data("ui-draggable"), i = t.options;
            t.snapElements = [], e(i.snap.constructor !== String ? i.snap.items || ":data(ui-draggable)" : i.snap).each(function() {
                var i = e(this), n = i.offset();
                this !== t.element[0] && t.snapElements.push({
                    "item": this,
                    "width": i.outerWidth(),
                    "height": i.outerHeight(),
                    "top": n.top,
                    "left": n.left
                });
            });
        },
        "drag": function(t, i) {
            var n, r, s, a, o, l, h, u, p, c, d = e(this).data("ui-draggable"), f = d.options, y = f.snapTolerance, m = i.offset.left, g = m + d.helperProportions.width, v = i.offset.top, L = v + d.helperProportions.height;
            for (p = d.snapElements.length - 1; p >= 0; p--) l = (o = d.snapElements[p].left) + d.snapElements[p].width, 
            u = (h = d.snapElements[p].top) + d.snapElements[p].height, g < o - y || m > l + y || L < h - y || v > u + y || !e.contains(d.snapElements[p].item.ownerDocument, d.snapElements[p].item) ? (d.snapElements[p].snapping && d.options.snap.release && d.options.snap.release.call(d.element, t, e.extend(d._uiHash(), {
                "snapItem": d.snapElements[p].item
            })), d.snapElements[p].snapping = !1) : ("inner" !== f.snapMode && (n = Math.abs(h - L) <= y, 
            r = Math.abs(u - v) <= y, s = Math.abs(o - g) <= y, a = Math.abs(l - m) <= y, n && (i.position.top = d._convertPositionTo("relative", {
                "top": h - d.helperProportions.height,
                "left": 0
            }).top - d.margins.top), r && (i.position.top = d._convertPositionTo("relative", {
                "top": u,
                "left": 0
            }).top - d.margins.top), s && (i.position.left = d._convertPositionTo("relative", {
                "top": 0,
                "left": o - d.helperProportions.width
            }).left - d.margins.left), a && (i.position.left = d._convertPositionTo("relative", {
                "top": 0,
                "left": l
            }).left - d.margins.left)), c = n || r || s || a, "outer" !== f.snapMode && (n = Math.abs(h - v) <= y, 
            r = Math.abs(u - L) <= y, s = Math.abs(o - m) <= y, a = Math.abs(l - g) <= y, n && (i.position.top = d._convertPositionTo("relative", {
                "top": h,
                "left": 0
            }).top - d.margins.top), r && (i.position.top = d._convertPositionTo("relative", {
                "top": u - d.helperProportions.height,
                "left": 0
            }).top - d.margins.top), s && (i.position.left = d._convertPositionTo("relative", {
                "top": 0,
                "left": o
            }).left - d.margins.left), a && (i.position.left = d._convertPositionTo("relative", {
                "top": 0,
                "left": l - d.helperProportions.width
            }).left - d.margins.left)), !d.snapElements[p].snapping && (n || r || s || a || c) && d.options.snap.snap && d.options.snap.snap.call(d.element, t, e.extend(d._uiHash(), {
                "snapItem": d.snapElements[p].item
            })), d.snapElements[p].snapping = n || r || s || a || c);
        }
    }), e.ui.plugin.add("draggable", "stack", {
        "start": function() {
            var t, i = this.data("ui-draggable").options, n = e.makeArray(e(i.stack)).sort(function(t, i) {
                return (parseInt(e(t).css("zIndex"), 10) || 0) - (parseInt(e(i).css("zIndex"), 10) || 0);
            });
            n.length && (t = parseInt(e(n[0]).css("zIndex"), 10) || 0, e(n).each(function(i) {
                e(this).css("zIndex", t + i);
            }), this.css("zIndex", t + n.length));
        }
    }), e.ui.plugin.add("draggable", "zIndex", {
        "start": function(t, i) {
            var n = e(i.helper), r = e(this).data("ui-draggable").options;
            n.css("zIndex") && (r._zIndex = n.css("zIndex")), n.css("zIndex", r.zIndex);
        },
        "stop": function(t, i) {
            var n = e(this).data("ui-draggable").options;
            n._zIndex && e(i.helper).css("zIndex", n._zIndex);
        }
    });
}(jQuery), function(e, t) {
    function i(e, t, i) {
        return e > t && e < t + i;
    }
    e.widget("ui.droppable", {
        "version": "1.10.4",
        "widgetEventPrefix": "drop",
        "options": {
            "accept": "*",
            "activeClass": !1,
            "addClasses": !0,
            "greedy": !1,
            "hoverClass": !1,
            "scope": "default",
            "tolerance": "intersect",
            "activate": null,
            "deactivate": null,
            "drop": null,
            "out": null,
            "over": null
        },
        "_create": function() {
            var t, i = this.options, n = i.accept;
            this.isover = !1, this.isout = !0, this.accept = e.isFunction(n) ? n : function(e) {
                return e.is(n);
            }, this.proportions = function() {
                if (!arguments.length) return t || (t = {
                    "width": this.element[0].offsetWidth,
                    "height": this.element[0].offsetHeight
                });
                t = arguments[0];
            }, e.ui.ddmanager.droppables[i.scope] = e.ui.ddmanager.droppables[i.scope] || [], 
            e.ui.ddmanager.droppables[i.scope].push(this), i.addClasses && this.element.addClass("ui-droppable");
        },
        "_destroy": function() {
            for (var t = 0, i = e.ui.ddmanager.droppables[this.options.scope]; t < i.length; t++) i[t] === this && i.splice(t, 1);
            this.element.removeClass("ui-droppable ui-droppable-disabled");
        },
        "_setOption": function(t, i) {
            "accept" === t && (this.accept = e.isFunction(i) ? i : function(e) {
                return e.is(i);
            }), e.Widget.prototype._setOption.apply(this, arguments);
        },
        "_activate": function(t) {
            var i = e.ui.ddmanager.current;
            this.options.activeClass && this.element.addClass(this.options.activeClass), i && this._trigger("activate", t, this.ui(i));
        },
        "_deactivate": function(t) {
            var i = e.ui.ddmanager.current;
            this.options.activeClass && this.element.removeClass(this.options.activeClass), 
            i && this._trigger("deactivate", t, this.ui(i));
        },
        "_over": function(t) {
            var i = e.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass), 
            this._trigger("over", t, this.ui(i)));
        },
        "_out": function(t) {
            var i = e.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass), 
            this._trigger("out", t, this.ui(i)));
        },
        "_drop": function(t, i) {
            var n = i || e.ui.ddmanager.current, r = !1;
            return !(!n || (n.currentItem || n.element)[0] === this.element[0]) && (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function() {
                var t = e.data(this, "ui-droppable");
                if (t.options.greedy && !t.options.disabled && t.options.scope === n.options.scope && t.accept.call(t.element[0], n.currentItem || n.element) && e.ui.intersect(n, e.extend(t, {
                    "offset": t.element.offset()
                }), t.options.tolerance)) return r = !0, !1;
            }), !r && (!!this.accept.call(this.element[0], n.currentItem || n.element) && (this.options.activeClass && this.element.removeClass(this.options.activeClass), 
            this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("drop", t, this.ui(n)), 
            this.element)));
        },
        "ui": function(e) {
            return {
                "draggable": e.currentItem || e.element,
                "helper": e.helper,
                "position": e.position,
                "offset": e.positionAbs
            };
        }
    }), e.ui.intersect = function(e, t, n) {
        if (!t.offset) return !1;
        var r, s, a = (e.positionAbs || e.position.absolute).left, o = (e.positionAbs || e.position.absolute).top, l = a + e.helperProportions.width, h = o + e.helperProportions.height, u = t.offset.left, p = t.offset.top, c = u + t.proportions().width, d = p + t.proportions().height;
        switch (n) {
          case "fit":
            return u <= a && l <= c && p <= o && h <= d;

          case "intersect":
            return u < a + e.helperProportions.width / 2 && l - e.helperProportions.width / 2 < c && p < o + e.helperProportions.height / 2 && h - e.helperProportions.height / 2 < d;

          case "pointer":
            return r = (e.positionAbs || e.position.absolute).left + (e.clickOffset || e.offset.click).left, 
            s = (e.positionAbs || e.position.absolute).top + (e.clickOffset || e.offset.click).top, 
            i(s, p, t.proportions().height) && i(r, u, t.proportions().width);

          case "touch":
            return (o >= p && o <= d || h >= p && h <= d || o < p && h > d) && (a >= u && a <= c || l >= u && l <= c || a < u && l > c);

          default:
            return !1;
        }
    }, e.ui.ddmanager = {
        "current": null,
        "droppables": {
            "default": []
        },
        "prepareOffsets": function(t, i) {
            var n, r, s = e.ui.ddmanager.droppables[t.options.scope] || [], a = i ? i.type : null, o = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();
            e: for (n = 0; n < s.length; n++) if (!(s[n].options.disabled || t && !s[n].accept.call(s[n].element[0], t.currentItem || t.element))) {
                for (r = 0; r < o.length; r++) if (o[r] === s[n].element[0]) {
                    s[n].proportions().height = 0;
                    continue e;
                }
                s[n].visible = "none" !== s[n].element.css("display"), s[n].visible && ("mousedown" === a && s[n]._activate.call(s[n], i), 
                s[n].offset = s[n].element.offset(), s[n].proportions({
                    "width": s[n].element[0].offsetWidth,
                    "height": s[n].element[0].offsetHeight
                }));
            }
        },
        "drop": function(t, i) {
            var n = !1;
            return e.each((e.ui.ddmanager.droppables[t.options.scope] || []).slice(), function() {
                this.options && (!this.options.disabled && this.visible && e.ui.intersect(t, this, this.options.tolerance) && (n = this._drop.call(this, i) || n), 
                !this.options.disabled && this.visible && this.accept.call(this.element[0], t.currentItem || t.element) && (this.isout = !0, 
                this.isover = !1, this._deactivate.call(this, i)));
            }), n;
        },
        "dragStart": function(t, i) {
            t.element.parentsUntil("body").bind("scroll.droppable", function() {
                t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, i);
            });
        },
        "drag": function(t, i) {
            t.options.refreshPositions && e.ui.ddmanager.prepareOffsets(t, i), e.each(e.ui.ddmanager.droppables[t.options.scope] || [], function() {
                if (!this.options.disabled && !this.greedyChild && this.visible) {
                    var n, r, s, a = e.ui.intersect(t, this, this.options.tolerance), o = !a && this.isover ? "isout" : a && !this.isover ? "isover" : null;
                    o && (this.options.greedy && (r = this.options.scope, (s = this.element.parents(":data(ui-droppable)").filter(function() {
                        return e.data(this, "ui-droppable").options.scope === r;
                    })).length && ((n = e.data(s[0], "ui-droppable")).greedyChild = "isover" === o)), 
                    n && "isover" === o && (n.isover = !1, n.isout = !0, n._out.call(n, i)), this[o] = !0, 
                    this["isout" === o ? "isover" : "isout"] = !1, this["isover" === o ? "_over" : "_out"].call(this, i), 
                    n && "isout" === o && (n.isout = !1, n.isover = !0, n._over.call(n, i)));
                }
            });
        },
        "dragStop": function(t, i) {
            t.element.parentsUntil("body").unbind("scroll.droppable"), t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, i);
        }
    };
}(jQuery), function(e, t) {
    e.effects = {
        "effect": {}
    }, function(e, t) {
        function i(e, t, i) {
            var n = u[t.type] || {};
            return null == e ? i || !t.def ? null : t.def : (e = n.floor ? ~~e : parseFloat(e), 
            isNaN(e) ? t.def : n.mod ? (e + n.mod) % n.mod : 0 > e ? 0 : n.max < e ? n.max : e);
        }
        function n(t) {
            var i = l(), n = i._rgba = [];
            return t = t.toLowerCase(), d(o, function(e, r) {
                var s, a = r.re.exec(t), o = a && r.parse(a), l = r.space || "rgba";
                if (o) return s = i[l](o), i[h[l].cache] = s[h[l].cache], n = i._rgba = s._rgba, 
                !1;
            }), n.length ? ("0,0,0,0" === n.join() && e.extend(n, s.transparent), i) : s[t];
        }
        function r(e, t, i) {
            return 6 * (i = (i + 1) % 1) < 1 ? e + (t - e) * i * 6 : 2 * i < 1 ? t : 3 * i < 2 ? e + (t - e) * (2 / 3 - i) * 6 : e;
        }
        var s, a = /^([\-+])=\s*(\d+\.?\d*)/, o = [ {
            "re": /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
            "parse": function(e) {
                return [ e[1], e[2], e[3], e[4] ];
            }
        }, {
            "re": /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
            "parse": function(e) {
                return [ 2.55 * e[1], 2.55 * e[2], 2.55 * e[3], e[4] ];
            }
        }, {
            "re": /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
            "parse": function(e) {
                return [ parseInt(e[1], 16), parseInt(e[2], 16), parseInt(e[3], 16) ];
            }
        }, {
            "re": /#([a-f0-9])([a-f0-9])([a-f0-9])/,
            "parse": function(e) {
                return [ parseInt(e[1] + e[1], 16), parseInt(e[2] + e[2], 16), parseInt(e[3] + e[3], 16) ];
            }
        }, {
            "re": /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
            "space": "hsla",
            "parse": function(e) {
                return [ e[1], e[2] / 100, e[3] / 100, e[4] ];
            }
        } ], l = e.Color = function(t, i, n, r) {
            return new e.Color.fn.parse(t, i, n, r);
        }, h = {
            "rgba": {
                "props": {
                    "red": {
                        "idx": 0,
                        "type": "byte"
                    },
                    "green": {
                        "idx": 1,
                        "type": "byte"
                    },
                    "blue": {
                        "idx": 2,
                        "type": "byte"
                    }
                }
            },
            "hsla": {
                "props": {
                    "hue": {
                        "idx": 0,
                        "type": "degrees"
                    },
                    "saturation": {
                        "idx": 1,
                        "type": "percent"
                    },
                    "lightness": {
                        "idx": 2,
                        "type": "percent"
                    }
                }
            }
        }, u = {
            "byte": {
                "floor": !0,
                "max": 255
            },
            "percent": {
                "max": 1
            },
            "degrees": {
                "mod": 360,
                "floor": !0
            }
        }, p = l.support = {}, c = e("<p>")[0], d = e.each;
        c.style.cssText = "background-color:rgba(1,1,1,.5)", p.rgba = c.style.backgroundColor.indexOf("rgba") > -1, 
        d(h, function(e, t) {
            t.cache = "_" + e, t.props.alpha = {
                "idx": 3,
                "type": "percent",
                "def": 1
            };
        }), l.fn = e.extend(l.prototype, {
            "parse": function(t, r, a, o) {
                if (void 0 === t) return this._rgba = [ null, null, null, null ], this;
                (t.jquery || t.nodeType) && (t = e(t).css(r), r = void 0);
                var u = this, p = e.type(t), c = this._rgba = [];
                return void 0 !== r && (t = [ t, r, a, o ], p = "array"), "string" === p ? this.parse(n(t) || s._default) : "array" === p ? (d(h.rgba.props, function(e, n) {
                    c[n.idx] = i(t[n.idx], n);
                }), this) : "object" === p ? (t instanceof l ? d(h, function(e, i) {
                    t[i.cache] && (u[i.cache] = t[i.cache].slice());
                }) : d(h, function(n, r) {
                    var s = r.cache;
                    d(r.props, function(e, n) {
                        if (!u[s] && r.to) {
                            if ("alpha" === e || null == t[e]) return;
                            u[s] = r.to(u._rgba);
                        }
                        u[s][n.idx] = i(t[e], n, !0);
                    }), u[s] && e.inArray(null, u[s].slice(0, 3)) < 0 && (u[s][3] = 1, r.from && (u._rgba = r.from(u[s])));
                }), this) : void 0;
            },
            "is": function(e) {
                var t = l(e), i = !0, n = this;
                return d(h, function(e, r) {
                    var s, a = t[r.cache];
                    return a && (s = n[r.cache] || r.to && r.to(n._rgba) || [], d(r.props, function(e, t) {
                        if (null != a[t.idx]) return i = a[t.idx] === s[t.idx];
                    })), i;
                }), i;
            },
            "_space": function() {
                var e = [], t = this;
                return d(h, function(i, n) {
                    t[n.cache] && e.push(i);
                }), e.pop();
            },
            "transition": function(e, t) {
                var n = l(e), r = n._space(), s = h[r], a = 0 === this.alpha() ? l("transparent") : this, o = a[s.cache] || s.to(a._rgba), p = o.slice();
                return n = n[s.cache], d(s.props, function(e, r) {
                    var s = r.idx, a = o[s], l = n[s], h = u[r.type] || {};
                    null !== l && (null === a ? p[s] = l : (h.mod && (l - a > h.mod / 2 ? a += h.mod : a - l > h.mod / 2 && (a -= h.mod)), 
                    p[s] = i((l - a) * t + a, r)));
                }), this[r](p);
            },
            "blend": function(t) {
                if (1 === this._rgba[3]) return this;
                var i = this._rgba.slice(), n = i.pop(), r = l(t)._rgba;
                return l(e.map(i, function(e, t) {
                    return (1 - n) * r[t] + n * e;
                }));
            },
            "toRgbaString": function() {
                var t = "rgba(", i = e.map(this._rgba, function(e, t) {
                    return null == e ? t > 2 ? 1 : 0 : e;
                });
                return 1 === i[3] && (i.pop(), t = "rgb("), t + i.join() + ")";
            },
            "toHslaString": function() {
                var t = "hsla(", i = e.map(this.hsla(), function(e, t) {
                    return null == e && (e = t > 2 ? 1 : 0), t && t < 3 && (e = Math.round(100 * e) + "%"), 
                    e;
                });
                return 1 === i[3] && (i.pop(), t = "hsl("), t + i.join() + ")";
            },
            "toHexString": function(t) {
                var i = this._rgba.slice(), n = i.pop();
                return t && i.push(~~(255 * n)), "#" + e.map(i, function(e) {
                    return 1 === (e = (e || 0).toString(16)).length ? "0" + e : e;
                }).join("");
            },
            "toString": function() {
                return 0 === this._rgba[3] ? "transparent" : this.toRgbaString();
            }
        }), l.fn.parse.prototype = l.fn, h.hsla.to = function(e) {
            if (null == e[0] || null == e[1] || null == e[2]) return [ null, null, null, e[3] ];
            var t, i, n = e[0] / 255, r = e[1] / 255, s = e[2] / 255, a = e[3], o = Math.max(n, r, s), l = Math.min(n, r, s), h = o - l, u = o + l, p = .5 * u;
            return t = l === o ? 0 : n === o ? 60 * (r - s) / h + 360 : r === o ? 60 * (s - n) / h + 120 : 60 * (n - r) / h + 240, 
            i = 0 === h ? 0 : p <= .5 ? h / u : h / (2 - u), [ Math.round(t) % 360, i, p, null == a ? 1 : a ];
        }, h.hsla.from = function(e) {
            if (null == e[0] || null == e[1] || null == e[2]) return [ null, null, null, e[3] ];
            var t = e[0] / 360, i = e[1], n = e[2], s = e[3], a = n <= .5 ? n * (1 + i) : n + i - n * i, o = 2 * n - a;
            return [ Math.round(255 * r(o, a, t + 1 / 3)), Math.round(255 * r(o, a, t)), Math.round(255 * r(o, a, t - 1 / 3)), s ];
        }, d(h, function(t, n) {
            var r = n.props, s = n.cache, o = n.to, h = n.from;
            l.fn[t] = function(t) {
                if (o && !this[s] && (this[s] = o(this._rgba)), void 0 === t) return this[s].slice();
                var n, a = e.type(t), u = "array" === a || "object" === a ? t : arguments, p = this[s].slice();
                return d(r, function(e, t) {
                    var n = u["object" === a ? e : t.idx];
                    null == n && (n = p[t.idx]), p[t.idx] = i(n, t);
                }), h ? (n = l(h(p)), n[s] = p, n) : l(p);
            }, d(r, function(i, n) {
                l.fn[i] || (l.fn[i] = function(r) {
                    var s, o = e.type(r), l = "alpha" === i ? this._hsla ? "hsla" : "rgba" : t, h = this[l](), u = h[n.idx];
                    return "undefined" === o ? u : ("function" === o && (r = r.call(this, u), o = e.type(r)), 
                    null == r && n.empty ? this : ("string" === o && (s = a.exec(r)) && (r = u + parseFloat(s[2]) * ("+" === s[1] ? 1 : -1)), 
                    h[n.idx] = r, this[l](h)));
                });
            });
        }), l.hook = function(t) {
            var i = t.split(" ");
            d(i, function(t, i) {
                e.cssHooks[i] = {
                    "set": function(t, r) {
                        var s, a, o = "";
                        if ("transparent" !== r && ("string" !== e.type(r) || (s = n(r)))) {
                            if (r = l(s || r), !p.rgba && 1 !== r._rgba[3]) {
                                for (a = "backgroundColor" === i ? t.parentNode : t; ("" === o || "transparent" === o) && a && a.style; ) try {
                                    o = e.css(a, "backgroundColor"), a = a.parentNode;
                                } catch (e) {}
                                r = r.blend(o && "transparent" !== o ? o : "_default");
                            }
                            r = r.toRgbaString();
                        }
                        try {
                            t.style[i] = r;
                        } catch (e) {}
                    }
                }, e.fx.step[i] = function(t) {
                    t.colorInit || (t.start = l(t.elem, i), t.end = l(t.end), t.colorInit = !0), e.cssHooks[i].set(t.elem, t.start.transition(t.end, t.pos));
                };
            });
        }, l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"), 
        e.cssHooks.borderColor = {
            "expand": function(e) {
                var t = {};
                return d([ "Top", "Right", "Bottom", "Left" ], function(i, n) {
                    t["border" + n + "Color"] = e;
                }), t;
            }
        }, s = e.Color.names = {
            "aqua": "#00ffff",
            "black": "#000000",
            "blue": "#0000ff",
            "fuchsia": "#ff00ff",
            "gray": "#808080",
            "green": "#008000",
            "lime": "#00ff00",
            "maroon": "#800000",
            "navy": "#000080",
            "olive": "#808000",
            "purple": "#800080",
            "red": "#ff0000",
            "silver": "#c0c0c0",
            "teal": "#008080",
            "white": "#ffffff",
            "yellow": "#ffff00",
            "transparent": [ null, null, null, 0 ],
            "_default": "#ffffff"
        };
    }(jQuery), function() {
        function t(t) {
            var i, n, r = t.ownerDocument.defaultView ? t.ownerDocument.defaultView.getComputedStyle(t, null) : t.currentStyle, s = {};
            if (r && r.length && r[0] && r[r[0]]) for (n = r.length; n--; ) "string" == typeof r[i = r[n]] && (s[e.camelCase(i)] = r[i]); else for (i in r) "string" == typeof r[i] && (s[i] = r[i]);
            return s;
        }
        function i(t, i) {
            var n, s, a = {};
            for (n in i) s = i[n], t[n] !== s && (r[n] || !e.fx.step[n] && isNaN(parseFloat(s)) || (a[n] = s));
            return a;
        }
        var n = [ "add", "remove", "toggle" ], r = {
            "border": 1,
            "borderBottom": 1,
            "borderColor": 1,
            "borderLeft": 1,
            "borderRight": 1,
            "borderTop": 1,
            "borderWidth": 1,
            "margin": 1,
            "padding": 1
        };
        e.each([ "borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle" ], function(t, i) {
            e.fx.step[i] = function(e) {
                ("none" !== e.end && !e.setAttr || 1 === e.pos && !e.setAttr) && (jQuery.style(e.elem, i, e.end), 
                e.setAttr = !0);
            };
        }), e.fn.addBack || (e.fn.addBack = function(e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e));
        }), e.effects.animateClass = function(r, s, a, o) {
            var l = e.speed(s, a, o);
            return this.queue(function() {
                var s, a = e(this), o = a.attr("class") || "", h = l.children ? a.find("*").addBack() : a;
                h = h.map(function() {
                    return {
                        "el": e(this),
                        "start": t(this)
                    };
                }), (s = function() {
                    e.each(n, function(e, t) {
                        r[t] && a[t + "Class"](r[t]);
                    });
                })(), h = h.map(function() {
                    return this.end = t(this.el[0]), this.diff = i(this.start, this.end), this;
                }), a.attr("class", o), h = h.map(function() {
                    var t = this, i = e.Deferred(), n = e.extend({}, l, {
                        "queue": !1,
                        "complete": function() {
                            i.resolve(t);
                        }
                    });
                    return this.el.animate(this.diff, n), i.promise();
                }), e.when.apply(e, h.get()).done(function() {
                    s(), e.each(arguments, function() {
                        var t = this.el;
                        e.each(this.diff, function(e) {
                            t.css(e, "");
                        });
                    }), l.complete.call(a[0]);
                });
            });
        }, e.fn.extend({
            "addClass": function(t) {
                return function(i, n, r, s) {
                    return n ? e.effects.animateClass.call(this, {
                        "add": i
                    }, n, r, s) : t.apply(this, arguments);
                };
            }(e.fn.addClass),
            "removeClass": function(t) {
                return function(i, n, r, s) {
                    return arguments.length > 1 ? e.effects.animateClass.call(this, {
                        "remove": i
                    }, n, r, s) : t.apply(this, arguments);
                };
            }(e.fn.removeClass),
            "toggleClass": function(t) {
                return function(i, n, r, s, a) {
                    return "boolean" == typeof n || void 0 === n ? r ? e.effects.animateClass.call(this, n ? {
                        "add": i
                    } : {
                        "remove": i
                    }, r, s, a) : t.apply(this, arguments) : e.effects.animateClass.call(this, {
                        "toggle": i
                    }, n, r, s);
                };
            }(e.fn.toggleClass),
            "switchClass": function(t, i, n, r, s) {
                return e.effects.animateClass.call(this, {
                    "add": i,
                    "remove": t
                }, n, r, s);
            }
        });
    }(), function() {
        function t(t, i, n, r) {
            return e.isPlainObject(t) && (i = t, t = t.effect), t = {
                "effect": t
            }, null == i && (i = {}), e.isFunction(i) && (r = i, n = null, i = {}), ("number" == typeof i || e.fx.speeds[i]) && (r = n, 
            n = i, i = {}), e.isFunction(n) && (r = n, n = null), i && e.extend(t, i), n = n || i.duration, 
            t.duration = e.fx.off ? 0 : "number" == typeof n ? n : n in e.fx.speeds ? e.fx.speeds[n] : e.fx.speeds._default, 
            t.complete = r || i.complete, t;
        }
        function i(t) {
            return !(t && "number" != typeof t && !e.fx.speeds[t]) || ("string" == typeof t && !e.effects.effect[t] || (!!e.isFunction(t) || "object" == typeof t && !t.effect));
        }
        e.extend(e.effects, {
            "version": "1.10.4",
            "save": function(e, t) {
                for (var i = 0; i < t.length; i++) null !== t[i] && e.data("ui-effects-" + t[i], e[0].style[t[i]]);
            },
            "restore": function(e, t) {
                var i, n;
                for (n = 0; n < t.length; n++) null !== t[n] && (void 0 === (i = e.data("ui-effects-" + t[n])) && (i = ""), 
                e.css(t[n], i));
            },
            "setMode": function(e, t) {
                return "toggle" === t && (t = e.is(":hidden") ? "show" : "hide"), t;
            },
            "getBaseline": function(e, t) {
                var i, n;
                switch (e[0]) {
                  case "top":
                    i = 0;
                    break;

                  case "middle":
                    i = .5;
                    break;

                  case "bottom":
                    i = 1;
                    break;

                  default:
                    i = e[0] / t.height;
                }
                switch (e[1]) {
                  case "left":
                    n = 0;
                    break;

                  case "center":
                    n = .5;
                    break;

                  case "right":
                    n = 1;
                    break;

                  default:
                    n = e[1] / t.width;
                }
                return {
                    "x": n,
                    "y": i
                };
            },
            "createWrapper": function(t) {
                if (t.parent().is(".ui-effects-wrapper")) return t.parent();
                var i = {
                    "width": t.outerWidth(!0),
                    "height": t.outerHeight(!0),
                    "float": t.css("float")
                }, n = e("<div></div>").addClass("ui-effects-wrapper").css({
                    "fontSize": "100%",
                    "background": "transparent",
                    "border": "none",
                    "margin": 0,
                    "padding": 0
                }), r = {
                    "width": t.width(),
                    "height": t.height()
                }, s = document.activeElement;
                try {
                    s.id;
                } catch (e) {
                    s = document.body;
                }
                return t.wrap(n), (t[0] === s || e.contains(t[0], s)) && e(s).focus(), n = t.parent(), 
                "static" === t.css("position") ? (n.css({
                    "position": "relative"
                }), t.css({
                    "position": "relative"
                })) : (e.extend(i, {
                    "position": t.css("position"),
                    "zIndex": t.css("z-index")
                }), e.each([ "top", "left", "bottom", "right" ], function(e, n) {
                    i[n] = t.css(n), isNaN(parseInt(i[n], 10)) && (i[n] = "auto");
                }), t.css({
                    "position": "relative",
                    "top": 0,
                    "left": 0,
                    "right": "auto",
                    "bottom": "auto"
                })), t.css(r), n.css(i).show();
            },
            "removeWrapper": function(t) {
                var i = document.activeElement;
                return t.parent().is(".ui-effects-wrapper") && (t.parent().replaceWith(t), (t[0] === i || e.contains(t[0], i)) && e(i).focus()), 
                t;
            },
            "setTransition": function(t, i, n, r) {
                return r = r || {}, e.each(i, function(e, i) {
                    var s = t.cssUnit(i);
                    s[0] > 0 && (r[i] = s[0] * n + s[1]);
                }), r;
            }
        }), e.fn.extend({
            "effect": function() {
                function i(t) {
                    function i() {
                        e.isFunction(s) && s.call(r[0]), e.isFunction(t) && t();
                    }
                    var r = e(this), s = n.complete, o = n.mode;
                    (r.is(":hidden") ? "hide" === o : "show" === o) ? (r[o](), i()) : a.call(r[0], n, i);
                }
                var n = t.apply(this, arguments), r = n.mode, s = n.queue, a = e.effects.effect[n.effect];
                return e.fx.off || !a ? r ? this[r](n.duration, n.complete) : this.each(function() {
                    n.complete && n.complete.call(this);
                }) : !1 === s ? this.each(i) : this.queue(s || "fx", i);
            },
            "show": function(e) {
                return function(n) {
                    if (i(n)) return e.apply(this, arguments);
                    var r = t.apply(this, arguments);
                    return r.mode = "show", this.effect.call(this, r);
                };
            }(e.fn.show),
            "hide": function(e) {
                return function(n) {
                    if (i(n)) return e.apply(this, arguments);
                    var r = t.apply(this, arguments);
                    return r.mode = "hide", this.effect.call(this, r);
                };
            }(e.fn.hide),
            "toggle": function(e) {
                return function(n) {
                    if (i(n) || "boolean" == typeof n) return e.apply(this, arguments);
                    var r = t.apply(this, arguments);
                    return r.mode = "toggle", this.effect.call(this, r);
                };
            }(e.fn.toggle),
            "cssUnit": function(t) {
                var i = this.css(t), n = [];
                return e.each([ "em", "px", "%", "pt" ], function(e, t) {
                    i.indexOf(t) > 0 && (n = [ parseFloat(i), t ]);
                }), n;
            }
        });
    }(), function() {
        var t = {};
        e.each([ "Quad", "Cubic", "Quart", "Quint", "Expo" ], function(e, i) {
            t[i] = function(t) {
                return Math.pow(t, e + 2);
            };
        }), e.extend(t, {
            "Sine": function(e) {
                return 1 - Math.cos(e * Math.PI / 2);
            },
            "Circ": function(e) {
                return 1 - Math.sqrt(1 - e * e);
            },
            "Elastic": function(e) {
                return 0 === e || 1 === e ? e : -Math.pow(2, 8 * (e - 1)) * Math.sin((80 * (e - 1) - 7.5) * Math.PI / 15);
            },
            "Back": function(e) {
                return e * e * (3 * e - 2);
            },
            "Bounce": function(e) {
                for (var t, i = 4; e < ((t = Math.pow(2, --i)) - 1) / 11; ) ;
                return 1 / Math.pow(4, 3 - i) - 7.5625 * Math.pow((3 * t - 2) / 22 - e, 2);
            }
        }), e.each(t, function(t, i) {
            e.easing["easeIn" + t] = i, e.easing["easeOut" + t] = function(e) {
                return 1 - i(1 - e);
            }, e.easing["easeInOut" + t] = function(e) {
                return e < .5 ? i(2 * e) / 2 : 1 - i(-2 * e + 2) / 2;
            };
        });
    }();
}(jQuery), function(e, t) {
    var i = /up|down|vertical/, n = /up|left|vertical|horizontal/;
    e.effects.effect.blind = function(t, r) {
        var s, a, o, l = e(this), h = [ "position", "top", "bottom", "left", "right", "height", "width" ], u = e.effects.setMode(l, t.mode || "hide"), p = t.direction || "up", c = i.test(p), d = c ? "height" : "width", f = c ? "top" : "left", y = n.test(p), m = {}, g = "show" === u;
        l.parent().is(".ui-effects-wrapper") ? e.effects.save(l.parent(), h) : e.effects.save(l, h), 
        l.show(), a = (s = e.effects.createWrapper(l).css({
            "overflow": "hidden"
        }))[d](), o = parseFloat(s.css(f)) || 0, m[d] = g ? a : 0, y || (l.css(c ? "bottom" : "right", 0).css(c ? "top" : "left", "auto").css({
            "position": "absolute"
        }), m[f] = g ? o : a + o), g && (s.css(d, 0), y || s.css(f, o + a)), s.animate(m, {
            "duration": t.duration,
            "easing": t.easing,
            "queue": !1,
            "complete": function() {
                "hide" === u && l.hide(), e.effects.restore(l, h), e.effects.removeWrapper(l), r();
            }
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.bounce = function(t, i) {
        var n, r, s, a = e(this), o = [ "position", "top", "bottom", "left", "right", "height", "width" ], l = e.effects.setMode(a, t.mode || "effect"), h = "hide" === l, u = "show" === l, p = t.direction || "up", c = t.distance, d = t.times || 5, f = 2 * d + (u || h ? 1 : 0), y = t.duration / f, m = t.easing, g = "up" === p || "down" === p ? "top" : "left", v = "up" === p || "left" === p, L = a.queue(), O = L.length;
        for ((u || h) && o.push("opacity"), e.effects.save(a, o), a.show(), e.effects.createWrapper(a), 
        c || (c = a["top" === g ? "outerHeight" : "outerWidth"]() / 3), u && ((s = {
            "opacity": 1
        })[g] = 0, a.css("opacity", 0).css(g, v ? 2 * -c : 2 * c).animate(s, y, m)), h && (c /= Math.pow(2, d - 1)), 
        (s = {})[g] = 0, n = 0; n < d; n++) (r = {})[g] = (v ? "-=" : "+=") + c, a.animate(r, y, m).animate(s, y, m), 
        c = h ? 2 * c : c / 2;
        h && ((r = {
            "opacity": 0
        })[g] = (v ? "-=" : "+=") + c, a.animate(r, y, m)), a.queue(function() {
            h && a.hide(), e.effects.restore(a, o), e.effects.removeWrapper(a), i();
        }), O > 1 && L.splice.apply(L, [ 1, 0 ].concat(L.splice(O, f + 1))), a.dequeue();
    };
}(jQuery), function(e, t) {
    e.effects.effect.clip = function(t, i) {
        var n, r, s, a = e(this), o = [ "position", "top", "bottom", "left", "right", "height", "width" ], l = "show" === e.effects.setMode(a, t.mode || "hide"), h = "vertical" === (t.direction || "vertical"), u = h ? "height" : "width", p = h ? "top" : "left", c = {};
        e.effects.save(a, o), a.show(), n = e.effects.createWrapper(a).css({
            "overflow": "hidden"
        }), s = (r = "IMG" === a[0].tagName ? n : a)[u](), l && (r.css(u, 0), r.css(p, s / 2)), 
        c[u] = l ? s : 0, c[p] = l ? 0 : s / 2, r.animate(c, {
            "queue": !1,
            "duration": t.duration,
            "easing": t.easing,
            "complete": function() {
                l || a.hide(), e.effects.restore(a, o), e.effects.removeWrapper(a), i();
            }
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.drop = function(t, i) {
        var n, r = e(this), s = [ "position", "top", "bottom", "left", "right", "opacity", "height", "width" ], a = e.effects.setMode(r, t.mode || "hide"), o = "show" === a, l = t.direction || "left", h = "up" === l || "down" === l ? "top" : "left", u = "up" === l || "left" === l ? "pos" : "neg", p = {
            "opacity": o ? 1 : 0
        };
        e.effects.save(r, s), r.show(), e.effects.createWrapper(r), n = t.distance || r["top" === h ? "outerHeight" : "outerWidth"](!0) / 2, 
        o && r.css("opacity", 0).css(h, "pos" === u ? -n : n), p[h] = (o ? "pos" === u ? "+=" : "-=" : "pos" === u ? "-=" : "+=") + n, 
        r.animate(p, {
            "queue": !1,
            "duration": t.duration,
            "easing": t.easing,
            "complete": function() {
                "hide" === a && r.hide(), e.effects.restore(r, s), e.effects.removeWrapper(r), i();
            }
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.explode = function(t, i) {
        function n() {
            c.css({
                "visibility": "visible"
            }), e(g).remove(), d || c.hide(), i();
        }
        var r, s, a, o, l, h, u = t.pieces ? Math.round(Math.sqrt(t.pieces)) : 3, p = u, c = e(this), d = "show" === e.effects.setMode(c, t.mode || "hide"), f = c.show().css("visibility", "hidden").offset(), y = Math.ceil(c.outerWidth() / p), m = Math.ceil(c.outerHeight() / u), g = [];
        for (r = 0; r < u; r++) for (o = f.top + r * m, h = r - (u - 1) / 2, s = 0; s < p; s++) a = f.left + s * y, 
        l = s - (p - 1) / 2, c.clone().appendTo("body").wrap("<div></div>").css({
            "position": "absolute",
            "visibility": "visible",
            "left": -s * y,
            "top": -r * m
        }).parent().addClass("ui-effects-explode").css({
            "position": "absolute",
            "overflow": "hidden",
            "width": y,
            "height": m,
            "left": a + (d ? l * y : 0),
            "top": o + (d ? h * m : 0),
            "opacity": d ? 0 : 1
        }).animate({
            "left": a + (d ? 0 : l * y),
            "top": o + (d ? 0 : h * m),
            "opacity": d ? 1 : 0
        }, t.duration || 500, t.easing, function() {
            g.push(this), g.length === u * p && n();
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.fade = function(t, i) {
        var n = e(this), r = e.effects.setMode(n, t.mode || "toggle");
        n.animate({
            "opacity": r
        }, {
            "queue": !1,
            "duration": t.duration,
            "easing": t.easing,
            "complete": i
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.fold = function(t, i) {
        var n, r, s = e(this), a = [ "position", "top", "bottom", "left", "right", "height", "width" ], o = e.effects.setMode(s, t.mode || "hide"), l = "show" === o, h = "hide" === o, u = t.size || 15, p = /([0-9]+)%/.exec(u), c = !!t.horizFirst, d = l !== c, f = d ? [ "width", "height" ] : [ "height", "width" ], y = t.duration / 2, m = {}, g = {};
        e.effects.save(s, a), s.show(), n = e.effects.createWrapper(s).css({
            "overflow": "hidden"
        }), r = d ? [ n.width(), n.height() ] : [ n.height(), n.width() ], p && (u = parseInt(p[1], 10) / 100 * r[h ? 0 : 1]), 
        l && n.css(c ? {
            "height": 0,
            "width": u
        } : {
            "height": u,
            "width": 0
        }), m[f[0]] = l ? r[0] : u, g[f[1]] = l ? r[1] : 0, n.animate(m, y, t.easing).animate(g, y, t.easing, function() {
            h && s.hide(), e.effects.restore(s, a), e.effects.removeWrapper(s), i();
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.highlight = function(t, i) {
        var n = e(this), r = [ "backgroundImage", "backgroundColor", "opacity" ], s = e.effects.setMode(n, t.mode || "show"), a = {
            "backgroundColor": n.css("backgroundColor")
        };
        "hide" === s && (a.opacity = 0), e.effects.save(n, r), n.show().css({
            "backgroundImage": "none",
            "backgroundColor": t.color || "#ffff99"
        }).animate(a, {
            "queue": !1,
            "duration": t.duration,
            "easing": t.easing,
            "complete": function() {
                "hide" === s && n.hide(), e.effects.restore(n, r), i();
            }
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.pulsate = function(t, i) {
        var n, r = e(this), s = e.effects.setMode(r, t.mode || "show"), a = "show" === s, o = "hide" === s, l = a || "hide" === s, h = 2 * (t.times || 5) + (l ? 1 : 0), u = t.duration / h, p = 0, c = r.queue(), d = c.length;
        for (!a && r.is(":visible") || (r.css("opacity", 0).show(), p = 1), n = 1; n < h; n++) r.animate({
            "opacity": p
        }, u, t.easing), p = 1 - p;
        r.animate({
            "opacity": p
        }, u, t.easing), r.queue(function() {
            o && r.hide(), i();
        }), d > 1 && c.splice.apply(c, [ 1, 0 ].concat(c.splice(d, h + 1))), r.dequeue();
    };
}(jQuery), function(e, t) {
    e.effects.effect.puff = function(t, i) {
        var n = e(this), r = e.effects.setMode(n, t.mode || "hide"), s = "hide" === r, a = parseInt(t.percent, 10) || 150, o = a / 100, l = {
            "height": n.height(),
            "width": n.width(),
            "outerHeight": n.outerHeight(),
            "outerWidth": n.outerWidth()
        };
        e.extend(t, {
            "effect": "scale",
            "queue": !1,
            "fade": !0,
            "mode": r,
            "complete": i,
            "percent": s ? a : 100,
            "from": s ? l : {
                "height": l.height * o,
                "width": l.width * o,
                "outerHeight": l.outerHeight * o,
                "outerWidth": l.outerWidth * o
            }
        }), n.effect(t);
    }, e.effects.effect.scale = function(t, i) {
        var n = e(this), r = e.extend(!0, {}, t), s = e.effects.setMode(n, t.mode || "effect"), a = parseInt(t.percent, 10) || (0 === parseInt(t.percent, 10) ? 0 : "hide" === s ? 0 : 100), o = t.direction || "both", l = t.origin, h = {
            "height": n.height(),
            "width": n.width(),
            "outerHeight": n.outerHeight(),
            "outerWidth": n.outerWidth()
        }, u = {
            "y": "horizontal" !== o ? a / 100 : 1,
            "x": "vertical" !== o ? a / 100 : 1
        };
        r.effect = "size", r.queue = !1, r.complete = i, "effect" !== s && (r.origin = l || [ "middle", "center" ], 
        r.restore = !0), r.from = t.from || ("show" === s ? {
            "height": 0,
            "width": 0,
            "outerHeight": 0,
            "outerWidth": 0
        } : h), r.to = {
            "height": h.height * u.y,
            "width": h.width * u.x,
            "outerHeight": h.outerHeight * u.y,
            "outerWidth": h.outerWidth * u.x
        }, r.fade && ("show" === s && (r.from.opacity = 0, r.to.opacity = 1), "hide" === s && (r.from.opacity = 1, 
        r.to.opacity = 0)), n.effect(r);
    }, e.effects.effect.size = function(t, i) {
        var n, r, s, a = e(this), o = [ "position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity" ], l = [ "position", "top", "bottom", "left", "right", "overflow", "opacity" ], h = [ "width", "height", "overflow" ], u = [ "fontSize" ], p = [ "borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom" ], c = [ "borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight" ], d = e.effects.setMode(a, t.mode || "effect"), f = t.restore || "effect" !== d, y = t.scale || "both", m = t.origin || [ "middle", "center" ], g = a.css("position"), v = f ? o : l, L = {
            "height": 0,
            "width": 0,
            "outerHeight": 0,
            "outerWidth": 0
        };
        "show" === d && a.show(), n = {
            "height": a.height(),
            "width": a.width(),
            "outerHeight": a.outerHeight(),
            "outerWidth": a.outerWidth()
        }, "toggle" === t.mode && "show" === d ? (a.from = t.to || L, a.to = t.from || n) : (a.from = t.from || ("show" === d ? L : n), 
        a.to = t.to || ("hide" === d ? L : n)), s = {
            "from": {
                "y": a.from.height / n.height,
                "x": a.from.width / n.width
            },
            "to": {
                "y": a.to.height / n.height,
                "x": a.to.width / n.width
            }
        }, "box" !== y && "both" !== y || (s.from.y !== s.to.y && (v = v.concat(p), a.from = e.effects.setTransition(a, p, s.from.y, a.from), 
        a.to = e.effects.setTransition(a, p, s.to.y, a.to)), s.from.x !== s.to.x && (v = v.concat(c), 
        a.from = e.effects.setTransition(a, c, s.from.x, a.from), a.to = e.effects.setTransition(a, c, s.to.x, a.to))), 
        "content" !== y && "both" !== y || s.from.y !== s.to.y && (v = v.concat(u).concat(h), 
        a.from = e.effects.setTransition(a, u, s.from.y, a.from), a.to = e.effects.setTransition(a, u, s.to.y, a.to)), 
        e.effects.save(a, v), a.show(), e.effects.createWrapper(a), a.css("overflow", "hidden").css(a.from), 
        m && (r = e.effects.getBaseline(m, n), a.from.top = (n.outerHeight - a.outerHeight()) * r.y, 
        a.from.left = (n.outerWidth - a.outerWidth()) * r.x, a.to.top = (n.outerHeight - a.to.outerHeight) * r.y, 
        a.to.left = (n.outerWidth - a.to.outerWidth) * r.x), a.css(a.from), "content" !== y && "both" !== y || (p = p.concat([ "marginTop", "marginBottom" ]).concat(u), 
        c = c.concat([ "marginLeft", "marginRight" ]), h = o.concat(p).concat(c), a.find("*[width]").each(function() {
            var i = e(this), n = {
                "height": i.height(),
                "width": i.width(),
                "outerHeight": i.outerHeight(),
                "outerWidth": i.outerWidth()
            };
            f && e.effects.save(i, h), i.from = {
                "height": n.height * s.from.y,
                "width": n.width * s.from.x,
                "outerHeight": n.outerHeight * s.from.y,
                "outerWidth": n.outerWidth * s.from.x
            }, i.to = {
                "height": n.height * s.to.y,
                "width": n.width * s.to.x,
                "outerHeight": n.height * s.to.y,
                "outerWidth": n.width * s.to.x
            }, s.from.y !== s.to.y && (i.from = e.effects.setTransition(i, p, s.from.y, i.from), 
            i.to = e.effects.setTransition(i, p, s.to.y, i.to)), s.from.x !== s.to.x && (i.from = e.effects.setTransition(i, c, s.from.x, i.from), 
            i.to = e.effects.setTransition(i, c, s.to.x, i.to)), i.css(i.from), i.animate(i.to, t.duration, t.easing, function() {
                f && e.effects.restore(i, h);
            });
        })), a.animate(a.to, {
            "queue": !1,
            "duration": t.duration,
            "easing": t.easing,
            "complete": function() {
                0 === a.to.opacity && a.css("opacity", a.from.opacity), "hide" === d && a.hide(), 
                e.effects.restore(a, v), f || ("static" === g ? a.css({
                    "position": "relative",
                    "top": a.to.top,
                    "left": a.to.left
                }) : e.each([ "top", "left" ], function(e, t) {
                    a.css(t, function(t, i) {
                        var n = parseInt(i, 10), r = e ? a.to.left : a.to.top;
                        return "auto" === i ? r + "px" : n + r + "px";
                    });
                })), e.effects.removeWrapper(a), i();
            }
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.shake = function(t, i) {
        var n, r = e(this), s = [ "position", "top", "bottom", "left", "right", "height", "width" ], a = e.effects.setMode(r, t.mode || "effect"), o = t.direction || "left", l = t.distance || 20, h = t.times || 3, u = 2 * h + 1, p = Math.round(t.duration / u), c = "up" === o || "down" === o ? "top" : "left", d = "up" === o || "left" === o, f = {}, y = {}, m = {}, g = r.queue(), v = g.length;
        for (e.effects.save(r, s), r.show(), e.effects.createWrapper(r), f[c] = (d ? "-=" : "+=") + l, 
        y[c] = (d ? "+=" : "-=") + 2 * l, m[c] = (d ? "-=" : "+=") + 2 * l, r.animate(f, p, t.easing), 
        n = 1; n < h; n++) r.animate(y, p, t.easing).animate(m, p, t.easing);
        r.animate(y, p, t.easing).animate(f, p / 2, t.easing).queue(function() {
            "hide" === a && r.hide(), e.effects.restore(r, s), e.effects.removeWrapper(r), i();
        }), v > 1 && g.splice.apply(g, [ 1, 0 ].concat(g.splice(v, u + 1))), r.dequeue();
    };
}(jQuery), function(e, t) {
    e.effects.effect.slide = function(t, i) {
        var n, r = e(this), s = [ "position", "top", "bottom", "left", "right", "width", "height" ], a = e.effects.setMode(r, t.mode || "show"), o = "show" === a, l = t.direction || "left", h = "up" === l || "down" === l ? "top" : "left", u = "up" === l || "left" === l, p = {};
        e.effects.save(r, s), r.show(), n = t.distance || r["top" === h ? "outerHeight" : "outerWidth"](!0), 
        e.effects.createWrapper(r).css({
            "overflow": "hidden"
        }), o && r.css(h, u ? isNaN(n) ? "-" + n : -n : n), p[h] = (o ? u ? "+=" : "-=" : u ? "-=" : "+=") + n, 
        r.animate(p, {
            "queue": !1,
            "duration": t.duration,
            "easing": t.easing,
            "complete": function() {
                "hide" === a && r.hide(), e.effects.restore(r, s), e.effects.removeWrapper(r), i();
            }
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.transfer = function(t, i) {
        var n = e(this), r = e(t.to), s = "fixed" === r.css("position"), a = e("body"), o = s ? a.scrollTop() : 0, l = s ? a.scrollLeft() : 0, h = r.offset(), u = {
            "top": h.top - o,
            "left": h.left - l,
            "height": r.innerHeight(),
            "width": r.innerWidth()
        }, p = n.offset(), c = e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({
            "top": p.top - o,
            "left": p.left - l,
            "height": n.innerHeight(),
            "width": n.innerWidth(),
            "position": s ? "fixed" : "absolute"
        }).animate(u, t.duration, t.easing, function() {
            c.remove(), i();
        });
    };
}(jQuery), function(e, t) {
    e.widget("ui.menu", {
        "version": "1.10.4",
        "defaultElement": "<ul>",
        "delay": 300,
        "options": {
            "icons": {
                "submenu": "ui-icon-carat-1-e"
            },
            "menus": "ul",
            "position": {
                "my": "left top",
                "at": "right top"
            },
            "role": "menu",
            "blur": null,
            "focus": null,
            "select": null
        },
        "_create": function() {
            this.activeMenu = this.element, this.mouseHandled = !1, this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({
                "role": this.options.role,
                "tabIndex": 0
            }).bind("click" + this.eventNamespace, e.proxy(function(e) {
                this.options.disabled && e.preventDefault();
            }, this)), this.options.disabled && this.element.addClass("ui-state-disabled").attr("aria-disabled", "true"), 
            this._on({
                "mousedown .ui-menu-item > a": function(e) {
                    e.preventDefault();
                },
                "click .ui-state-disabled > a": function(e) {
                    e.preventDefault();
                },
                "click .ui-menu-item:has(a)": function(t) {
                    var i = e(t.target).closest(".ui-menu-item");
                    !this.mouseHandled && i.not(".ui-state-disabled").length && (this.select(t), t.isPropagationStopped() || (this.mouseHandled = !0), 
                    i.has(".ui-menu").length ? this.expand(t) : !this.element.is(":focus") && e(this.document[0].activeElement).closest(".ui-menu").length && (this.element.trigger("focus", [ !0 ]), 
                    this.active && 1 === this.active.parents(".ui-menu").length && clearTimeout(this.timer)));
                },
                "mouseenter .ui-menu-item": function(t) {
                    var i = e(t.currentTarget);
                    i.siblings().children(".ui-state-active").removeClass("ui-state-active"), this.focus(t, i);
                },
                "mouseleave": "collapseAll",
                "mouseleave .ui-menu": "collapseAll",
                "focus": function(e, t) {
                    var i = this.active || this.element.children(".ui-menu-item").eq(0);
                    t || this.focus(e, i);
                },
                "blur": function(t) {
                    this._delay(function() {
                        e.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(t);
                    });
                },
                "keydown": "_keydown"
            }), this.refresh(), this._on(this.document, {
                "click": function(t) {
                    e(t.target).closest(".ui-menu").length || this.collapseAll(t), this.mouseHandled = !1;
                }
            });
        },
        "_destroy": function() {
            this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(), 
            this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function() {
                var t = e(this);
                t.data("ui-menu-submenu-carat") && t.remove();
            }), this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content");
        },
        "_keydown": function(t) {
            function i(e) {
                return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
            }
            var n, r, s, a, o, l = !0;
            switch (t.keyCode) {
              case e.ui.keyCode.PAGE_UP:
                this.previousPage(t);
                break;

              case e.ui.keyCode.PAGE_DOWN:
                this.nextPage(t);
                break;

              case e.ui.keyCode.HOME:
                this._move("first", "first", t);
                break;

              case e.ui.keyCode.END:
                this._move("last", "last", t);
                break;

              case e.ui.keyCode.UP:
                this.previous(t);
                break;

              case e.ui.keyCode.DOWN:
                this.next(t);
                break;

              case e.ui.keyCode.LEFT:
                this.collapse(t);
                break;

              case e.ui.keyCode.RIGHT:
                this.active && !this.active.is(".ui-state-disabled") && this.expand(t);
                break;

              case e.ui.keyCode.ENTER:
              case e.ui.keyCode.SPACE:
                this._activate(t);
                break;

              case e.ui.keyCode.ESCAPE:
                this.collapse(t);
                break;

              default:
                l = !1, r = this.previousFilter || "", s = String.fromCharCode(t.keyCode), a = !1, 
                clearTimeout(this.filterTimer), s === r ? a = !0 : s = r + s, o = new RegExp("^" + i(s), "i"), 
                n = this.activeMenu.children(".ui-menu-item").filter(function() {
                    return o.test(e(this).children("a").text());
                }), (n = a && -1 !== n.index(this.active.next()) ? this.active.nextAll(".ui-menu-item") : n).length || (s = String.fromCharCode(t.keyCode), 
                o = new RegExp("^" + i(s), "i"), n = this.activeMenu.children(".ui-menu-item").filter(function() {
                    return o.test(e(this).children("a").text());
                })), n.length ? (this.focus(t, n), n.length > 1 ? (this.previousFilter = s, this.filterTimer = this._delay(function() {
                    delete this.previousFilter;
                }, 1e3)) : delete this.previousFilter) : delete this.previousFilter;
            }
            l && t.preventDefault();
        },
        "_activate": function(e) {
            this.active.is(".ui-state-disabled") || (this.active.children("a[aria-haspopup='true']").length ? this.expand(e) : this.select(e));
        },
        "refresh": function() {
            var t, i = this.options.icons.submenu, n = this.element.find(this.options.menus);
            this.element.toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length), 
            n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({
                "role": this.options.role,
                "aria-hidden": "true",
                "aria-expanded": "false"
            }).each(function() {
                var t = e(this), n = t.prev("a"), r = e("<span>").addClass("ui-menu-icon ui-icon " + i).data("ui-menu-submenu-carat", !0);
                n.attr("aria-haspopup", "true").prepend(r), t.attr("aria-labelledby", n.attr("id"));
            }), (t = n.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role", "presentation").children("a").uniqueId().addClass("ui-corner-all").attr({
                "tabIndex": -1,
                "role": this._itemRole()
            }), t.children(":not(.ui-menu-item)").each(function() {
                var t = e(this);
                /[^\-\u2014\u2013\s]/.test(t.text()) || t.addClass("ui-widget-content ui-menu-divider");
            }), t.children(".ui-state-disabled").attr("aria-disabled", "true"), this.active && !e.contains(this.element[0], this.active[0]) && this.blur();
        },
        "_itemRole": function() {
            return {
                "menu": "menuitem",
                "listbox": "option"
            }[this.options.role];
        },
        "_setOption": function(e, t) {
            "icons" === e && this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu), 
            this._super(e, t);
        },
        "focus": function(e, t) {
            var i, n;
            this.blur(e, e && "focus" === e.type), this._scrollIntoView(t), this.active = t.first(), 
            n = this.active.children("a").addClass("ui-state-focus"), this.options.role && this.element.attr("aria-activedescendant", n.attr("id")), 
            this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"), 
            e && "keydown" === e.type ? this._close() : this.timer = this._delay(function() {
                this._close();
            }, this.delay), (i = t.children(".ui-menu")).length && e && /^mouse/.test(e.type) && this._startOpening(i), 
            this.activeMenu = t.parent(), this._trigger("focus", e, {
                "item": t
            });
        },
        "_scrollIntoView": function(t) {
            var i, n, r, s, a, o;
            this._hasScroll() && (i = parseFloat(e.css(this.activeMenu[0], "borderTopWidth")) || 0, 
            n = parseFloat(e.css(this.activeMenu[0], "paddingTop")) || 0, r = t.offset().top - this.activeMenu.offset().top - i - n, 
            s = this.activeMenu.scrollTop(), a = this.activeMenu.height(), o = t.height(), r < 0 ? this.activeMenu.scrollTop(s + r) : r + o > a && this.activeMenu.scrollTop(s + r - a + o));
        },
        "blur": function(e, t) {
            t || clearTimeout(this.timer), this.active && (this.active.children("a").removeClass("ui-state-focus"), 
            this.active = null, this._trigger("blur", e, {
                "item": this.active
            }));
        },
        "_startOpening": function(e) {
            clearTimeout(this.timer), "true" === e.attr("aria-hidden") && (this.timer = this._delay(function() {
                this._close(), this._open(e);
            }, this.delay));
        },
        "_open": function(t) {
            var i = e.extend({
                "of": this.active
            }, this.options.position);
            clearTimeout(this.timer), this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden", "true"), 
            t.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(i);
        },
        "collapseAll": function(t, i) {
            clearTimeout(this.timer), this.timer = this._delay(function() {
                var n = i ? this.element : e(t && t.target).closest(this.element.find(".ui-menu"));
                n.length || (n = this.element), this._close(n), this.blur(t), this.activeMenu = n;
            }, this.delay);
        },
        "_close": function(e) {
            e || (e = this.active ? this.active.parent() : this.element), e.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find("a.ui-state-active").removeClass("ui-state-active");
        },
        "collapse": function(e) {
            var t = this.active && this.active.parent().closest(".ui-menu-item", this.element);
            t && t.length && (this._close(), this.focus(e, t));
        },
        "expand": function(e) {
            var t = this.active && this.active.children(".ui-menu ").children(".ui-menu-item").first();
            t && t.length && (this._open(t.parent()), this._delay(function() {
                this.focus(e, t);
            }));
        },
        "next": function(e) {
            this._move("next", "first", e);
        },
        "previous": function(e) {
            this._move("prev", "last", e);
        },
        "isFirstItem": function() {
            return this.active && !this.active.prevAll(".ui-menu-item").length;
        },
        "isLastItem": function() {
            return this.active && !this.active.nextAll(".ui-menu-item").length;
        },
        "_move": function(e, t, i) {
            var n;
            this.active && (n = "first" === e || "last" === e ? this.active["first" === e ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : this.active[e + "All"](".ui-menu-item").eq(0)), 
            n && n.length && this.active || (n = this.activeMenu.children(".ui-menu-item")[t]()), 
            this.focus(i, n);
        },
        "nextPage": function(t) {
            var i, n, r;
            this.active ? this.isLastItem() || (this._hasScroll() ? (n = this.active.offset().top, 
            r = this.element.height(), this.active.nextAll(".ui-menu-item").each(function() {
                return (i = e(this)).offset().top - n - r < 0;
            }), this.focus(t, i)) : this.focus(t, this.activeMenu.children(".ui-menu-item")[this.active ? "last" : "first"]())) : this.next(t);
        },
        "previousPage": function(t) {
            var i, n, r;
            this.active ? this.isFirstItem() || (this._hasScroll() ? (n = this.active.offset().top, 
            r = this.element.height(), this.active.prevAll(".ui-menu-item").each(function() {
                return (i = e(this)).offset().top - n + r > 0;
            }), this.focus(t, i)) : this.focus(t, this.activeMenu.children(".ui-menu-item").first())) : this.next(t);
        },
        "_hasScroll": function() {
            return this.element.outerHeight() < this.element.prop("scrollHeight");
        },
        "select": function(t) {
            this.active = this.active || e(t.target).closest(".ui-menu-item");
            var i = {
                "item": this.active
            };
            this.active.has(".ui-menu").length || this.collapseAll(t, !0), this._trigger("select", t, i);
        }
    });
}(jQuery), function(e, t) {
    e.widget("ui.progressbar", {
        "version": "1.10.4",
        "options": {
            "max": 100,
            "value": 0,
            "change": null,
            "complete": null
        },
        "min": 0,
        "_create": function() {
            this.oldValue = this.options.value = this._constrainedValue(), this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({
                "role": "progressbar",
                "aria-valuemin": this.min
            }), this.valueDiv = e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element), 
            this._refreshValue();
        },
        "_destroy": function() {
            this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), 
            this.valueDiv.remove();
        },
        "value": function(e) {
            if (void 0 === e) return this.options.value;
            this.options.value = this._constrainedValue(e), this._refreshValue();
        },
        "_constrainedValue": function(e) {
            return void 0 === e && (e = this.options.value), this.indeterminate = !1 === e, 
            "number" != typeof e && (e = 0), !this.indeterminate && Math.min(this.options.max, Math.max(this.min, e));
        },
        "_setOptions": function(e) {
            var t = e.value;
            delete e.value, this._super(e), this.options.value = this._constrainedValue(t), 
            this._refreshValue();
        },
        "_setOption": function(e, t) {
            "max" === e && (t = Math.max(this.min, t)), this._super(e, t);
        },
        "_percentage": function() {
            return this.indeterminate ? 100 : 100 * (this.options.value - this.min) / (this.options.max - this.min);
        },
        "_refreshValue": function() {
            var t = this.options.value, i = this._percentage();
            this.valueDiv.toggle(this.indeterminate || t > this.min).toggleClass("ui-corner-right", t === this.options.max).width(i.toFixed(0) + "%"), 
            this.element.toggleClass("ui-progressbar-indeterminate", this.indeterminate), this.indeterminate ? (this.element.removeAttr("aria-valuenow"), 
            this.overlayDiv || (this.overlayDiv = e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))) : (this.element.attr({
                "aria-valuemax": this.options.max,
                "aria-valuenow": t
            }), this.overlayDiv && (this.overlayDiv.remove(), this.overlayDiv = null)), this.oldValue !== t && (this.oldValue = t, 
            this._trigger("change")), t === this.options.max && this._trigger("complete");
        }
    });
}(jQuery), function(e, t) {
    function i(e) {
        return parseInt(e, 10) || 0;
    }
    function n(e) {
        return !isNaN(parseInt(e, 10));
    }
    e.widget("ui.resizable", e.ui.mouse, {
        "version": "1.10.4",
        "widgetEventPrefix": "resize",
        "options": {
            "alsoResize": !1,
            "animate": !1,
            "animateDuration": "slow",
            "animateEasing": "swing",
            "aspectRatio": !1,
            "autoHide": !1,
            "containment": !1,
            "ghost": !1,
            "grid": !1,
            "handles": "e,s,se",
            "helper": !1,
            "maxHeight": null,
            "maxWidth": null,
            "minHeight": 10,
            "minWidth": 10,
            "zIndex": 90,
            "resize": null,
            "start": null,
            "stop": null
        },
        "_create": function() {
            var t, i, n, r, s = this, a = this.options;
            if (this.element.addClass("ui-resizable"), e.extend(this, {
                "_aspectRatio": !!a.aspectRatio,
                "aspectRatio": a.aspectRatio,
                "originalElement": this.element,
                "_proportionallyResizeElements": [],
                "_helper": a.helper || a.ghost || a.animate ? a.helper || "ui-resizable-helper" : null
            }), this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
                "position": this.element.css("position"),
                "width": this.element.outerWidth(),
                "height": this.element.outerHeight(),
                "top": this.element.css("top"),
                "left": this.element.css("left")
            })), this.element = this.element.parent().data("ui-resizable", this.element.data("ui-resizable")), 
            this.elementIsWrapper = !0, this.element.css({
                "marginLeft": this.originalElement.css("marginLeft"),
                "marginTop": this.originalElement.css("marginTop"),
                "marginRight": this.originalElement.css("marginRight"),
                "marginBottom": this.originalElement.css("marginBottom")
            }), this.originalElement.css({
                "marginLeft": 0,
                "marginTop": 0,
                "marginRight": 0,
                "marginBottom": 0
            }), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), 
            this._proportionallyResizeElements.push(this.originalElement.css({
                "position": "static",
                "zoom": 1,
                "display": "block"
            })), this.originalElement.css({
                "margin": this.originalElement.css("margin")
            }), this._proportionallyResize()), this.handles = a.handles || (e(".ui-resizable-handle", this.element).length ? {
                "n": ".ui-resizable-n",
                "e": ".ui-resizable-e",
                "s": ".ui-resizable-s",
                "w": ".ui-resizable-w",
                "se": ".ui-resizable-se",
                "sw": ".ui-resizable-sw",
                "ne": ".ui-resizable-ne",
                "nw": ".ui-resizable-nw"
            } : "e,s,se"), this.handles.constructor === String) for ("all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"), 
            t = this.handles.split(","), this.handles = {}, i = 0; i < t.length; i++) n = e.trim(t[i]), 
            (r = e("<div class='ui-resizable-handle " + ("ui-resizable-" + n) + "'></div>")).css({
                "zIndex": a.zIndex
            }), "se" === n && r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[n] = ".ui-resizable-" + n, 
            this.element.append(r);
            this._renderAxis = function(t) {
                var i, n, r, s;
                t = t || this.element;
                for (i in this.handles) this.handles[i].constructor === String && (this.handles[i] = e(this.handles[i], this.element).show()), 
                this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i) && (n = e(this.handles[i], this.element), 
                s = /sw|ne|nw|se|n|s/.test(i) ? n.outerHeight() : n.outerWidth(), r = [ "padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left" ].join(""), 
                t.css(r, s), this._proportionallyResize()), e(this.handles[i]).length;
            }, this._renderAxis(this.element), this._handles = e(".ui-resizable-handle", this.element).disableSelection(), 
            this._handles.mouseover(function() {
                s.resizing || (this.className && (r = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), 
                s.axis = r && r[1] ? r[1] : "se");
            }), a.autoHide && (this._handles.hide(), e(this.element).addClass("ui-resizable-autohide").mouseenter(function() {
                a.disabled || (e(this).removeClass("ui-resizable-autohide"), s._handles.show());
            }).mouseleave(function() {
                a.disabled || s.resizing || (e(this).addClass("ui-resizable-autohide"), s._handles.hide());
            })), this._mouseInit();
        },
        "_destroy": function() {
            this._mouseDestroy();
            var t, i = function(t) {
                e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();
            };
            return this.elementIsWrapper && (i(this.element), t = this.element, this.originalElement.css({
                "position": t.css("position"),
                "width": t.outerWidth(),
                "height": t.outerHeight(),
                "top": t.css("top"),
                "left": t.css("left")
            }).insertAfter(t), t.remove()), this.originalElement.css("resize", this.originalResizeStyle), 
            i(this.originalElement), this;
        },
        "_mouseCapture": function(t) {
            var i, n, r = !1;
            for (i in this.handles) ((n = e(this.handles[i])[0]) === t.target || e.contains(n, t.target)) && (r = !0);
            return !this.options.disabled && r;
        },
        "_mouseStart": function(t) {
            var n, r, s, a = this.options, o = this.element.position(), l = this.element;
            return this.resizing = !0, /absolute/.test(l.css("position")) ? l.css({
                "position": "absolute",
                "top": l.css("top"),
                "left": l.css("left")
            }) : l.is(".ui-draggable") && l.css({
                "position": "absolute",
                "top": o.top,
                "left": o.left
            }), this._renderProxy(), n = i(this.helper.css("left")), r = i(this.helper.css("top")), 
            a.containment && (n += e(a.containment).scrollLeft() || 0, r += e(a.containment).scrollTop() || 0), 
            this.offset = this.helper.offset(), this.position = {
                "left": n,
                "top": r
            }, this.size = this._helper ? {
                "width": this.helper.width(),
                "height": this.helper.height()
            } : {
                "width": l.width(),
                "height": l.height()
            }, this.originalSize = this._helper ? {
                "width": l.outerWidth(),
                "height": l.outerHeight()
            } : {
                "width": l.width(),
                "height": l.height()
            }, this.originalPosition = {
                "left": n,
                "top": r
            }, this.sizeDiff = {
                "width": l.outerWidth() - l.width(),
                "height": l.outerHeight() - l.height()
            }, this.originalMousePosition = {
                "left": t.pageX,
                "top": t.pageY
            }, this.aspectRatio = "number" == typeof a.aspectRatio ? a.aspectRatio : this.originalSize.width / this.originalSize.height || 1, 
            s = e(".ui-resizable-" + this.axis).css("cursor"), e("body").css("cursor", "auto" === s ? this.axis + "-resize" : s), 
            l.addClass("ui-resizable-resizing"), this._propagate("start", t), !0;
        },
        "_mouseDrag": function(t) {
            var i, n = this.helper, r = {}, s = this.originalMousePosition, a = this.axis, o = this.position.top, l = this.position.left, h = this.size.width, u = this.size.height, p = t.pageX - s.left || 0, c = t.pageY - s.top || 0, d = this._change[a];
            return !!d && (i = d.apply(this, [ t, p, c ]), this._updateVirtualBoundaries(t.shiftKey), 
            (this._aspectRatio || t.shiftKey) && (i = this._updateRatio(i, t)), i = this._respectSize(i, t), 
            this._updateCache(i), this._propagate("resize", t), this.position.top !== o && (r.top = this.position.top + "px"), 
            this.position.left !== l && (r.left = this.position.left + "px"), this.size.width !== h && (r.width = this.size.width + "px"), 
            this.size.height !== u && (r.height = this.size.height + "px"), n.css(r), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), 
            e.isEmptyObject(r) || this._trigger("resize", t, this.ui()), !1);
        },
        "_mouseStop": function(t) {
            this.resizing = !1;
            var i, n, r, s, a, o, l, h = this.options, u = this;
            return this._helper && (r = (n = (i = this._proportionallyResizeElements).length && /textarea/i.test(i[0].nodeName)) && e.ui.hasScroll(i[0], "left") ? 0 : u.sizeDiff.height, 
            s = n ? 0 : u.sizeDiff.width, a = {
                "width": u.helper.width() - s,
                "height": u.helper.height() - r
            }, o = parseInt(u.element.css("left"), 10) + (u.position.left - u.originalPosition.left) || null, 
            l = parseInt(u.element.css("top"), 10) + (u.position.top - u.originalPosition.top) || null, 
            h.animate || this.element.css(e.extend(a, {
                "top": l,
                "left": o
            })), u.helper.height(u.size.height), u.helper.width(u.size.width), this._helper && !h.animate && this._proportionallyResize()), 
            e("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), 
            this._propagate("stop", t), this._helper && this.helper.remove(), !1;
        },
        "_updateVirtualBoundaries": function(e) {
            var t, i, r, s, a, o = this.options;
            a = {
                "minWidth": n(o.minWidth) ? o.minWidth : 0,
                "maxWidth": n(o.maxWidth) ? o.maxWidth : 1 / 0,
                "minHeight": n(o.minHeight) ? o.minHeight : 0,
                "maxHeight": n(o.maxHeight) ? o.maxHeight : 1 / 0
            }, (this._aspectRatio || e) && (t = a.minHeight * this.aspectRatio, r = a.minWidth / this.aspectRatio, 
            i = a.maxHeight * this.aspectRatio, s = a.maxWidth / this.aspectRatio, t > a.minWidth && (a.minWidth = t), 
            r > a.minHeight && (a.minHeight = r), i < a.maxWidth && (a.maxWidth = i), s < a.maxHeight && (a.maxHeight = s)), 
            this._vBoundaries = a;
        },
        "_updateCache": function(e) {
            this.offset = this.helper.offset(), n(e.left) && (this.position.left = e.left), 
            n(e.top) && (this.position.top = e.top), n(e.height) && (this.size.height = e.height), 
            n(e.width) && (this.size.width = e.width);
        },
        "_updateRatio": function(e) {
            var t = this.position, i = this.size, r = this.axis;
            return n(e.height) ? e.width = e.height * this.aspectRatio : n(e.width) && (e.height = e.width / this.aspectRatio), 
            "sw" === r && (e.left = t.left + (i.width - e.width), e.top = null), "nw" === r && (e.top = t.top + (i.height - e.height), 
            e.left = t.left + (i.width - e.width)), e;
        },
        "_respectSize": function(e) {
            var t = this._vBoundaries, i = this.axis, r = n(e.width) && t.maxWidth && t.maxWidth < e.width, s = n(e.height) && t.maxHeight && t.maxHeight < e.height, a = n(e.width) && t.minWidth && t.minWidth > e.width, o = n(e.height) && t.minHeight && t.minHeight > e.height, l = this.originalPosition.left + this.originalSize.width, h = this.position.top + this.size.height, u = /sw|nw|w/.test(i), p = /nw|ne|n/.test(i);
            return a && (e.width = t.minWidth), o && (e.height = t.minHeight), r && (e.width = t.maxWidth), 
            s && (e.height = t.maxHeight), a && u && (e.left = l - t.minWidth), r && u && (e.left = l - t.maxWidth), 
            o && p && (e.top = h - t.minHeight), s && p && (e.top = h - t.maxHeight), e.width || e.height || e.left || !e.top ? e.width || e.height || e.top || !e.left || (e.left = null) : e.top = null, 
            e;
        },
        "_proportionallyResize": function() {
            if (this._proportionallyResizeElements.length) {
                var e, t, i, n, r, s = this.helper || this.element;
                for (e = 0; e < this._proportionallyResizeElements.length; e++) {
                    if (r = this._proportionallyResizeElements[e], !this.borderDif) for (this.borderDif = [], 
                    i = [ r.css("borderTopWidth"), r.css("borderRightWidth"), r.css("borderBottomWidth"), r.css("borderLeftWidth") ], 
                    n = [ r.css("paddingTop"), r.css("paddingRight"), r.css("paddingBottom"), r.css("paddingLeft") ], 
                    t = 0; t < i.length; t++) this.borderDif[t] = (parseInt(i[t], 10) || 0) + (parseInt(n[t], 10) || 0);
                    r.css({
                        "height": s.height() - this.borderDif[0] - this.borderDif[2] || 0,
                        "width": s.width() - this.borderDif[1] - this.borderDif[3] || 0
                    });
                }
            }
        },
        "_renderProxy": function() {
            var t = this.element, i = this.options;
            this.elementOffset = t.offset(), this._helper ? (this.helper = this.helper || e("<div style='overflow:hidden;'></div>"), 
            this.helper.addClass(this._helper).css({
                "width": this.element.outerWidth() - 1,
                "height": this.element.outerHeight() - 1,
                "position": "absolute",
                "left": this.elementOffset.left + "px",
                "top": this.elementOffset.top + "px",
                "zIndex": ++i.zIndex
            }), this.helper.appendTo("body").disableSelection()) : this.helper = this.element;
        },
        "_change": {
            "e": function(e, t) {
                return {
                    "width": this.originalSize.width + t
                };
            },
            "w": function(e, t) {
                var i = this.originalSize;
                return {
                    "left": this.originalPosition.left + t,
                    "width": i.width - t
                };
            },
            "n": function(e, t, i) {
                var n = this.originalSize;
                return {
                    "top": this.originalPosition.top + i,
                    "height": n.height - i
                };
            },
            "s": function(e, t, i) {
                return {
                    "height": this.originalSize.height + i
                };
            },
            "se": function(t, i, n) {
                return e.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [ t, i, n ]));
            },
            "sw": function(t, i, n) {
                return e.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [ t, i, n ]));
            },
            "ne": function(t, i, n) {
                return e.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [ t, i, n ]));
            },
            "nw": function(t, i, n) {
                return e.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [ t, i, n ]));
            }
        },
        "_propagate": function(t, i) {
            e.ui.plugin.call(this, t, [ i, this.ui() ]), "resize" !== t && this._trigger(t, i, this.ui());
        },
        "plugins": {},
        "ui": function() {
            return {
                "originalElement": this.originalElement,
                "element": this.element,
                "helper": this.helper,
                "position": this.position,
                "size": this.size,
                "originalSize": this.originalSize,
                "originalPosition": this.originalPosition
            };
        }
    }), e.ui.plugin.add("resizable", "animate", {
        "stop": function(t) {
            var i = e(this).data("ui-resizable"), n = i.options, r = i._proportionallyResizeElements, s = r.length && /textarea/i.test(r[0].nodeName), a = s && e.ui.hasScroll(r[0], "left") ? 0 : i.sizeDiff.height, o = s ? 0 : i.sizeDiff.width, l = {
                "width": i.size.width - o,
                "height": i.size.height - a
            }, h = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null, u = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null;
            i.element.animate(e.extend(l, u && h ? {
                "top": u,
                "left": h
            } : {}), {
                "duration": n.animateDuration,
                "easing": n.animateEasing,
                "step": function() {
                    var n = {
                        "width": parseInt(i.element.css("width"), 10),
                        "height": parseInt(i.element.css("height"), 10),
                        "top": parseInt(i.element.css("top"), 10),
                        "left": parseInt(i.element.css("left"), 10)
                    };
                    r && r.length && e(r[0]).css({
                        "width": n.width,
                        "height": n.height
                    }), i._updateCache(n), i._propagate("resize", t);
                }
            });
        }
    }), e.ui.plugin.add("resizable", "containment", {
        "start": function() {
            var t, n, r, s, a, o, l, h = e(this).data("ui-resizable"), u = h.options, p = h.element, c = u.containment, d = c instanceof e ? c.get(0) : /parent/.test(c) ? p.parent().get(0) : c;
            d && (h.containerElement = e(d), /document/.test(c) || c === document ? (h.containerOffset = {
                "left": 0,
                "top": 0
            }, h.containerPosition = {
                "left": 0,
                "top": 0
            }, h.parentData = {
                "element": e(document),
                "left": 0,
                "top": 0,
                "width": e(document).width(),
                "height": e(document).height() || document.body.parentNode.scrollHeight
            }) : (t = e(d), n = [], e([ "Top", "Right", "Left", "Bottom" ]).each(function(e, r) {
                n[e] = i(t.css("padding" + r));
            }), h.containerOffset = t.offset(), h.containerPosition = t.position(), h.containerSize = {
                "height": t.innerHeight() - n[3],
                "width": t.innerWidth() - n[1]
            }, r = h.containerOffset, s = h.containerSize.height, a = h.containerSize.width, 
            o = e.ui.hasScroll(d, "left") ? d.scrollWidth : a, l = e.ui.hasScroll(d) ? d.scrollHeight : s, 
            h.parentData = {
                "element": d,
                "left": r.left,
                "top": r.top,
                "width": o,
                "height": l
            }));
        },
        "resize": function(t) {
            var i, n, r, s, a = e(this).data("ui-resizable"), o = a.options, l = a.containerOffset, h = a.position, u = a._aspectRatio || t.shiftKey, p = {
                "top": 0,
                "left": 0
            }, c = a.containerElement;
            c[0] !== document && /static/.test(c.css("position")) && (p = l), h.left < (a._helper ? l.left : 0) && (a.size.width = a.size.width + (a._helper ? a.position.left - l.left : a.position.left - p.left), 
            u && (a.size.height = a.size.width / a.aspectRatio), a.position.left = o.helper ? l.left : 0), 
            h.top < (a._helper ? l.top : 0) && (a.size.height = a.size.height + (a._helper ? a.position.top - l.top : a.position.top), 
            u && (a.size.width = a.size.height * a.aspectRatio), a.position.top = a._helper ? l.top : 0), 
            a.offset.left = a.parentData.left + a.position.left, a.offset.top = a.parentData.top + a.position.top, 
            i = Math.abs((a._helper, a.offset.left - p.left + a.sizeDiff.width)), n = Math.abs((a._helper ? a.offset.top - p.top : a.offset.top - l.top) + a.sizeDiff.height), 
            r = a.containerElement.get(0) === a.element.parent().get(0), s = /relative|absolute/.test(a.containerElement.css("position")), 
            r && s && (i -= Math.abs(a.parentData.left)), i + a.size.width >= a.parentData.width && (a.size.width = a.parentData.width - i, 
            u && (a.size.height = a.size.width / a.aspectRatio)), n + a.size.height >= a.parentData.height && (a.size.height = a.parentData.height - n, 
            u && (a.size.width = a.size.height * a.aspectRatio));
        },
        "stop": function() {
            var t = e(this).data("ui-resizable"), i = t.options, n = t.containerOffset, r = t.containerPosition, s = t.containerElement, a = e(t.helper), o = a.offset(), l = a.outerWidth() - t.sizeDiff.width, h = a.outerHeight() - t.sizeDiff.height;
            t._helper && !i.animate && /relative/.test(s.css("position")) && e(this).css({
                "left": o.left - r.left - n.left,
                "width": l,
                "height": h
            }), t._helper && !i.animate && /static/.test(s.css("position")) && e(this).css({
                "left": o.left - r.left - n.left,
                "width": l,
                "height": h
            });
        }
    }), e.ui.plugin.add("resizable", "alsoResize", {
        "start": function() {
            var t = e(this).data("ui-resizable").options, i = function(t) {
                e(t).each(function() {
                    var t = e(this);
                    t.data("ui-resizable-alsoresize", {
                        "width": parseInt(t.width(), 10),
                        "height": parseInt(t.height(), 10),
                        "left": parseInt(t.css("left"), 10),
                        "top": parseInt(t.css("top"), 10)
                    });
                });
            };
            "object" != typeof t.alsoResize || t.alsoResize.parentNode ? i(t.alsoResize) : t.alsoResize.length ? (t.alsoResize = t.alsoResize[0], 
            i(t.alsoResize)) : e.each(t.alsoResize, function(e) {
                i(e);
            });
        },
        "resize": function(t, i) {
            var n = e(this).data("ui-resizable"), r = n.options, s = n.originalSize, a = n.originalPosition, o = {
                "height": n.size.height - s.height || 0,
                "width": n.size.width - s.width || 0,
                "top": n.position.top - a.top || 0,
                "left": n.position.left - a.left || 0
            }, l = function(t, n) {
                e(t).each(function() {
                    var t = e(this), r = e(this).data("ui-resizable-alsoresize"), s = {}, a = n && n.length ? n : t.parents(i.originalElement[0]).length ? [ "width", "height" ] : [ "width", "height", "top", "left" ];
                    e.each(a, function(e, t) {
                        var i = (r[t] || 0) + (o[t] || 0);
                        i && i >= 0 && (s[t] = i || null);
                    }), t.css(s);
                });
            };
            "object" != typeof r.alsoResize || r.alsoResize.nodeType ? l(r.alsoResize) : e.each(r.alsoResize, function(e, t) {
                l(e, t);
            });
        },
        "stop": function() {
            e(this).removeData("resizable-alsoresize");
        }
    }), e.ui.plugin.add("resizable", "ghost", {
        "start": function() {
            var t = e(this).data("ui-resizable"), i = t.options, n = t.size;
            t.ghost = t.originalElement.clone(), t.ghost.css({
                "opacity": .25,
                "display": "block",
                "position": "relative",
                "height": n.height,
                "width": n.width,
                "margin": 0,
                "left": 0,
                "top": 0
            }).addClass("ui-resizable-ghost").addClass("string" == typeof i.ghost ? i.ghost : ""), 
            t.ghost.appendTo(t.helper);
        },
        "resize": function() {
            var t = e(this).data("ui-resizable");
            t.ghost && t.ghost.css({
                "position": "relative",
                "height": t.size.height,
                "width": t.size.width
            });
        },
        "stop": function() {
            var t = e(this).data("ui-resizable");
            t.ghost && t.helper && t.helper.get(0).removeChild(t.ghost.get(0));
        }
    }), e.ui.plugin.add("resizable", "grid", {
        "resize": function() {
            var t = e(this).data("ui-resizable"), i = t.options, n = t.size, r = t.originalSize, s = t.originalPosition, a = t.axis, o = "number" == typeof i.grid ? [ i.grid, i.grid ] : i.grid, l = o[0] || 1, h = o[1] || 1, u = Math.round((n.width - r.width) / l) * l, p = Math.round((n.height - r.height) / h) * h, c = r.width + u, d = r.height + p, f = i.maxWidth && i.maxWidth < c, y = i.maxHeight && i.maxHeight < d, m = i.minWidth && i.minWidth > c, g = i.minHeight && i.minHeight > d;
            i.grid = o, m && (c += l), g && (d += h), f && (c -= l), y && (d -= h), /^(se|s|e)$/.test(a) ? (t.size.width = c, 
            t.size.height = d) : /^(ne)$/.test(a) ? (t.size.width = c, t.size.height = d, t.position.top = s.top - p) : /^(sw)$/.test(a) ? (t.size.width = c, 
            t.size.height = d, t.position.left = s.left - u) : (d - h > 0 ? (t.size.height = d, 
            t.position.top = s.top - p) : (t.size.height = h, t.position.top = s.top + r.height - h), 
            c - l > 0 ? (t.size.width = c, t.position.left = s.left - u) : (t.size.width = l, 
            t.position.left = s.left + r.width - l));
        }
    });
}(jQuery), function(e, t) {
    e.widget("ui.selectable", e.ui.mouse, {
        "version": "1.10.4",
        "options": {
            "appendTo": "body",
            "autoRefresh": !0,
            "distance": 0,
            "filter": "*",
            "tolerance": "touch",
            "selected": null,
            "selecting": null,
            "start": null,
            "stop": null,
            "unselected": null,
            "unselecting": null
        },
        "_create": function() {
            var t, i = this;
            this.element.addClass("ui-selectable"), this.dragged = !1, this.refresh = function() {
                (t = e(i.options.filter, i.element[0])).addClass("ui-selectee"), t.each(function() {
                    var t = e(this), i = t.offset();
                    e.data(this, "selectable-item", {
                        "element": this,
                        "$element": t,
                        "left": i.left,
                        "top": i.top,
                        "right": i.left + t.outerWidth(),
                        "bottom": i.top + t.outerHeight(),
                        "startselected": !1,
                        "selected": t.hasClass("ui-selected"),
                        "selecting": t.hasClass("ui-selecting"),
                        "unselecting": t.hasClass("ui-unselecting")
                    });
                });
            }, this.refresh(), this.selectees = t.addClass("ui-selectee"), this._mouseInit(), 
            this.helper = e("<div class='ui-selectable-helper'></div>");
        },
        "_destroy": function() {
            this.selectees.removeClass("ui-selectee").removeData("selectable-item"), this.element.removeClass("ui-selectable ui-selectable-disabled"), 
            this._mouseDestroy();
        },
        "_mouseStart": function(t) {
            var i = this, n = this.options;
            this.opos = [ t.pageX, t.pageY ], this.options.disabled || (this.selectees = e(n.filter, this.element[0]), 
            this._trigger("start", t), e(n.appendTo).append(this.helper), this.helper.css({
                "left": t.pageX,
                "top": t.pageY,
                "width": 0,
                "height": 0
            }), n.autoRefresh && this.refresh(), this.selectees.filter(".ui-selected").each(function() {
                var n = e.data(this, "selectable-item");
                n.startselected = !0, t.metaKey || t.ctrlKey || (n.$element.removeClass("ui-selected"), 
                n.selected = !1, n.$element.addClass("ui-unselecting"), n.unselecting = !0, i._trigger("unselecting", t, {
                    "unselecting": n.element
                }));
            }), e(t.target).parents().addBack().each(function() {
                var n, r = e.data(this, "selectable-item");
                if (r) return n = !t.metaKey && !t.ctrlKey || !r.$element.hasClass("ui-selected"), 
                r.$element.removeClass(n ? "ui-unselecting" : "ui-selected").addClass(n ? "ui-selecting" : "ui-unselecting"), 
                r.unselecting = !n, r.selecting = n, r.selected = n, n ? i._trigger("selecting", t, {
                    "selecting": r.element
                }) : i._trigger("unselecting", t, {
                    "unselecting": r.element
                }), !1;
            }));
        },
        "_mouseDrag": function(t) {
            if (this.dragged = !0, !this.options.disabled) {
                var i, n = this, r = this.options, s = this.opos[0], a = this.opos[1], o = t.pageX, l = t.pageY;
                return s > o && (i = o, o = s, s = i), a > l && (i = l, l = a, a = i), this.helper.css({
                    "left": s,
                    "top": a,
                    "width": o - s,
                    "height": l - a
                }), this.selectees.each(function() {
                    var i = e.data(this, "selectable-item"), h = !1;
                    i && i.element !== n.element[0] && ("touch" === r.tolerance ? h = !(i.left > o || i.right < s || i.top > l || i.bottom < a) : "fit" === r.tolerance && (h = i.left > s && i.right < o && i.top > a && i.bottom < l), 
                    h ? (i.selected && (i.$element.removeClass("ui-selected"), i.selected = !1), i.unselecting && (i.$element.removeClass("ui-unselecting"), 
                    i.unselecting = !1), i.selecting || (i.$element.addClass("ui-selecting"), i.selecting = !0, 
                    n._trigger("selecting", t, {
                        "selecting": i.element
                    }))) : (i.selecting && ((t.metaKey || t.ctrlKey) && i.startselected ? (i.$element.removeClass("ui-selecting"), 
                    i.selecting = !1, i.$element.addClass("ui-selected"), i.selected = !0) : (i.$element.removeClass("ui-selecting"), 
                    i.selecting = !1, i.startselected && (i.$element.addClass("ui-unselecting"), i.unselecting = !0), 
                    n._trigger("unselecting", t, {
                        "unselecting": i.element
                    }))), i.selected && (t.metaKey || t.ctrlKey || i.startselected || (i.$element.removeClass("ui-selected"), 
                    i.selected = !1, i.$element.addClass("ui-unselecting"), i.unselecting = !0, n._trigger("unselecting", t, {
                        "unselecting": i.element
                    })))));
                }), !1;
            }
        },
        "_mouseStop": function(t) {
            var i = this;
            return this.dragged = !1, e(".ui-unselecting", this.element[0]).each(function() {
                var n = e.data(this, "selectable-item");
                n.$element.removeClass("ui-unselecting"), n.unselecting = !1, n.startselected = !1, 
                i._trigger("unselected", t, {
                    "unselected": n.element
                });
            }), e(".ui-selecting", this.element[0]).each(function() {
                var n = e.data(this, "selectable-item");
                n.$element.removeClass("ui-selecting").addClass("ui-selected"), n.selecting = !1, 
                n.selected = !0, n.startselected = !0, i._trigger("selected", t, {
                    "selected": n.element
                });
            }), this._trigger("stop", t), this.helper.remove(), !1;
        }
    });
}(jQuery), function(e, t) {
    e.widget("ui.slider", e.ui.mouse, {
        "version": "1.10.4",
        "widgetEventPrefix": "slide",
        "options": {
            "animate": !1,
            "distance": 0,
            "max": 100,
            "min": 0,
            "orientation": "horizontal",
            "range": !1,
            "step": 1,
            "value": 0,
            "values": null,
            "change": null,
            "slide": null,
            "start": null,
            "stop": null
        },
        "_create": function() {
            this._keySliding = !1, this._mouseSliding = !1, this._animateOff = !0, this._handleIndex = null, 
            this._detectOrientation(), this._mouseInit(), this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget ui-widget-content ui-corner-all"), 
            this._refresh(), this._setOption("disabled", this.options.disabled), this._animateOff = !1;
        },
        "_refresh": function() {
            this._createRange(), this._createHandles(), this._setupEvents(), this._refreshValue();
        },
        "_createHandles": function() {
            var t, i, n = this.options, r = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"), s = [];
            for (i = n.values && n.values.length || 1, r.length > i && (r.slice(i).remove(), 
            r = r.slice(0, i)), t = r.length; t < i; t++) s.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
            this.handles = r.add(e(s.join("")).appendTo(this.element)), this.handle = this.handles.eq(0), 
            this.handles.each(function(t) {
                e(this).data("ui-slider-handle-index", t);
            });
        },
        "_createRange": function() {
            var t = this.options, i = "";
            t.range ? (!0 === t.range && (t.values ? t.values.length && 2 !== t.values.length ? t.values = [ t.values[0], t.values[0] ] : e.isArray(t.values) && (t.values = t.values.slice(0)) : t.values = [ this._valueMin(), this._valueMin() ]), 
            this.range && this.range.length ? this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({
                "left": "",
                "bottom": ""
            }) : (this.range = e("<div></div>").appendTo(this.element), i = "ui-slider-range ui-widget-header ui-corner-all"), 
            this.range.addClass(i + ("min" === t.range || "max" === t.range ? " ui-slider-range-" + t.range : ""))) : (this.range && this.range.remove(), 
            this.range = null);
        },
        "_setupEvents": function() {
            var e = this.handles.add(this.range).filter("a");
            this._off(e), this._on(e, this._handleEvents), this._hoverable(e), this._focusable(e);
        },
        "_destroy": function() {
            this.handles.remove(), this.range && this.range.remove(), this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"), 
            this._mouseDestroy();
        },
        "_mouseCapture": function(t) {
            var i, n, r, s, a, o, l, h = this, u = this.options;
            return !u.disabled && (this.elementSize = {
                "width": this.element.outerWidth(),
                "height": this.element.outerHeight()
            }, this.elementOffset = this.element.offset(), i = {
                "x": t.pageX,
                "y": t.pageY
            }, n = this._normValueFromMouse(i), r = this._valueMax() - this._valueMin() + 1, 
            this.handles.each(function(t) {
                var i = Math.abs(n - h.values(t));
                (r > i || r === i && (t === h._lastChangedValue || h.values(t) === u.min)) && (r = i, 
                s = e(this), a = t);
            }), !1 !== this._start(t, a) && (this._mouseSliding = !0, this._handleIndex = a, 
            s.addClass("ui-state-active").focus(), o = s.offset(), l = !e(t.target).parents().addBack().is(".ui-slider-handle"), 
            this._clickOffset = l ? {
                "left": 0,
                "top": 0
            } : {
                "left": t.pageX - o.left - s.width() / 2,
                "top": t.pageY - o.top - s.height() / 2 - (parseInt(s.css("borderTopWidth"), 10) || 0) - (parseInt(s.css("borderBottomWidth"), 10) || 0) + (parseInt(s.css("marginTop"), 10) || 0)
            }, this.handles.hasClass("ui-state-hover") || this._slide(t, a, n), this._animateOff = !0, 
            !0));
        },
        "_mouseStart": function() {
            return !0;
        },
        "_mouseDrag": function(e) {
            var t = {
                "x": e.pageX,
                "y": e.pageY
            }, i = this._normValueFromMouse(t);
            return this._slide(e, this._handleIndex, i), !1;
        },
        "_mouseStop": function(e) {
            return this.handles.removeClass("ui-state-active"), this._mouseSliding = !1, this._stop(e, this._handleIndex), 
            this._change(e, this._handleIndex), this._handleIndex = null, this._clickOffset = null, 
            this._animateOff = !1, !1;
        },
        "_detectOrientation": function() {
            this.orientation = "vertical" === this.options.orientation ? "vertical" : "horizontal";
        },
        "_normValueFromMouse": function(e) {
            var t, i, n, r, s;
            return "horizontal" === this.orientation ? (t = this.elementSize.width, i = e.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (t = this.elementSize.height, 
            i = e.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)), 
            (n = i / t) > 1 && (n = 1), n < 0 && (n = 0), "vertical" === this.orientation && (n = 1 - n), 
            r = this._valueMax() - this._valueMin(), s = this._valueMin() + n * r, this._trimAlignValue(s);
        },
        "_start": function(e, t) {
            var i = {
                "handle": this.handles[t],
                "value": this.value()
            };
            return this.options.values && this.options.values.length && (i.value = this.values(t), 
            i.values = this.values()), this._trigger("start", e, i);
        },
        "_slide": function(e, t, i) {
            var n, r, s;
            this.options.values && this.options.values.length ? (n = this.values(t ? 0 : 1), 
            2 === this.options.values.length && !0 === this.options.range && (0 === t && i > n || 1 === t && i < n) && (i = n), 
            i !== this.values(t) && ((r = this.values())[t] = i, s = this._trigger("slide", e, {
                "handle": this.handles[t],
                "value": i,
                "values": r
            }), n = this.values(t ? 0 : 1), !1 !== s && this.values(t, i))) : i !== this.value() && !1 !== (s = this._trigger("slide", e, {
                "handle": this.handles[t],
                "value": i
            })) && this.value(i);
        },
        "_stop": function(e, t) {
            var i = {
                "handle": this.handles[t],
                "value": this.value()
            };
            this.options.values && this.options.values.length && (i.value = this.values(t), 
            i.values = this.values()), this._trigger("stop", e, i);
        },
        "_change": function(e, t) {
            if (!this._keySliding && !this._mouseSliding) {
                var i = {
                    "handle": this.handles[t],
                    "value": this.value()
                };
                this.options.values && this.options.values.length && (i.value = this.values(t), 
                i.values = this.values()), this._lastChangedValue = t, this._trigger("change", e, i);
            }
        },
        "value": function(e) {
            return arguments.length ? (this.options.value = this._trimAlignValue(e), this._refreshValue(), 
            void this._change(null, 0)) : this._value();
        },
        "values": function(t, i) {
            var n, r, s;
            if (arguments.length > 1) return this.options.values[t] = this._trimAlignValue(i), 
            this._refreshValue(), void this._change(null, t);
            if (!arguments.length) return this._values();
            if (!e.isArray(arguments[0])) return this.options.values && this.options.values.length ? this._values(t) : this.value();
            for (n = this.options.values, r = arguments[0], s = 0; s < n.length; s += 1) n[s] = this._trimAlignValue(r[s]), 
            this._change(null, s);
            this._refreshValue();
        },
        "_setOption": function(t, i) {
            var n, r = 0;
            switch ("range" === t && !0 === this.options.range && ("min" === i ? (this.options.value = this._values(0), 
            this.options.values = null) : "max" === i && (this.options.value = this._values(this.options.values.length - 1), 
            this.options.values = null)), e.isArray(this.options.values) && (r = this.options.values.length), 
            e.Widget.prototype._setOption.apply(this, arguments), t) {
              case "orientation":
                this._detectOrientation(), this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation), 
                this._refreshValue();
                break;

              case "value":
                this._animateOff = !0, this._refreshValue(), this._change(null, 0), this._animateOff = !1;
                break;

              case "values":
                for (this._animateOff = !0, this._refreshValue(), n = 0; n < r; n += 1) this._change(null, n);
                this._animateOff = !1;
                break;

              case "min":
              case "max":
                this._animateOff = !0, this._refreshValue(), this._animateOff = !1;
                break;

              case "range":
                this._animateOff = !0, this._refresh(), this._animateOff = !1;
            }
        },
        "_value": function() {
            var e = this.options.value;
            return e = this._trimAlignValue(e);
        },
        "_values": function(e) {
            var t, i, n;
            if (arguments.length) return t = this.options.values[e], t = this._trimAlignValue(t);
            if (this.options.values && this.options.values.length) {
                for (i = this.options.values.slice(), n = 0; n < i.length; n += 1) i[n] = this._trimAlignValue(i[n]);
                return i;
            }
            return [];
        },
        "_trimAlignValue": function(e) {
            if (e <= this._valueMin()) return this._valueMin();
            if (e >= this._valueMax()) return this._valueMax();
            var t = this.options.step > 0 ? this.options.step : 1, i = (e - this._valueMin()) % t, n = e - i;
            return 2 * Math.abs(i) >= t && (n += i > 0 ? t : -t), parseFloat(n.toFixed(5));
        },
        "_valueMin": function() {
            return this.options.min;
        },
        "_valueMax": function() {
            return this.options.max;
        },
        "_refreshValue": function() {
            var t, i, n, r, s, a = this.options.range, o = this.options, l = this, h = !this._animateOff && o.animate, u = {};
            this.options.values && this.options.values.length ? this.handles.each(function(n) {
                i = (l.values(n) - l._valueMin()) / (l._valueMax() - l._valueMin()) * 100, u["horizontal" === l.orientation ? "left" : "bottom"] = i + "%", 
                e(this).stop(1, 1)[h ? "animate" : "css"](u, o.animate), !0 === l.options.range && ("horizontal" === l.orientation ? (0 === n && l.range.stop(1, 1)[h ? "animate" : "css"]({
                    "left": i + "%"
                }, o.animate), 1 === n && l.range[h ? "animate" : "css"]({
                    "width": i - t + "%"
                }, {
                    "queue": !1,
                    "duration": o.animate
                })) : (0 === n && l.range.stop(1, 1)[h ? "animate" : "css"]({
                    "bottom": i + "%"
                }, o.animate), 1 === n && l.range[h ? "animate" : "css"]({
                    "height": i - t + "%"
                }, {
                    "queue": !1,
                    "duration": o.animate
                }))), t = i;
            }) : (n = this.value(), r = this._valueMin(), s = this._valueMax(), i = s !== r ? (n - r) / (s - r) * 100 : 0, 
            u["horizontal" === this.orientation ? "left" : "bottom"] = i + "%", this.handle.stop(1, 1)[h ? "animate" : "css"](u, o.animate), 
            "min" === a && "horizontal" === this.orientation && this.range.stop(1, 1)[h ? "animate" : "css"]({
                "width": i + "%"
            }, o.animate), "max" === a && "horizontal" === this.orientation && this.range[h ? "animate" : "css"]({
                "width": 100 - i + "%"
            }, {
                "queue": !1,
                "duration": o.animate
            }), "min" === a && "vertical" === this.orientation && this.range.stop(1, 1)[h ? "animate" : "css"]({
                "height": i + "%"
            }, o.animate), "max" === a && "vertical" === this.orientation && this.range[h ? "animate" : "css"]({
                "height": 100 - i + "%"
            }, {
                "queue": !1,
                "duration": o.animate
            }));
        },
        "_handleEvents": {
            "keydown": function(t) {
                var i, n, r, s = e(t.target).data("ui-slider-handle-index");
                switch (t.keyCode) {
                  case e.ui.keyCode.HOME:
                  case e.ui.keyCode.END:
                  case e.ui.keyCode.PAGE_UP:
                  case e.ui.keyCode.PAGE_DOWN:
                  case e.ui.keyCode.UP:
                  case e.ui.keyCode.RIGHT:
                  case e.ui.keyCode.DOWN:
                  case e.ui.keyCode.LEFT:
                    if (t.preventDefault(), !this._keySliding && (this._keySliding = !0, e(t.target).addClass("ui-state-active"), 
                    !1 === this._start(t, s))) return;
                }
                switch (r = this.options.step, i = n = this.options.values && this.options.values.length ? this.values(s) : this.value(), 
                t.keyCode) {
                  case e.ui.keyCode.HOME:
                    n = this._valueMin();
                    break;

                  case e.ui.keyCode.END:
                    n = this._valueMax();
                    break;

                  case e.ui.keyCode.PAGE_UP:
                    n = this._trimAlignValue(i + (this._valueMax() - this._valueMin()) / 5);
                    break;

                  case e.ui.keyCode.PAGE_DOWN:
                    n = this._trimAlignValue(i - (this._valueMax() - this._valueMin()) / 5);
                    break;

                  case e.ui.keyCode.UP:
                  case e.ui.keyCode.RIGHT:
                    if (i === this._valueMax()) return;
                    n = this._trimAlignValue(i + r);
                    break;

                  case e.ui.keyCode.DOWN:
                  case e.ui.keyCode.LEFT:
                    if (i === this._valueMin()) return;
                    n = this._trimAlignValue(i - r);
                }
                this._slide(t, s, n);
            },
            "click": function(e) {
                e.preventDefault();
            },
            "keyup": function(t) {
                var i = e(t.target).data("ui-slider-handle-index");
                this._keySliding && (this._keySliding = !1, this._stop(t, i), this._change(t, i), 
                e(t.target).removeClass("ui-state-active"));
            }
        }
    });
}(jQuery), function(e, t) {
    function i(e, t, i) {
        return e > t && e < t + i;
    }
    function n(e) {
        return /left|right/.test(e.css("float")) || /inline|table-cell/.test(e.css("display"));
    }
    e.widget("ui.sortable", e.ui.mouse, {
        "version": "1.10.4",
        "widgetEventPrefix": "sort",
        "ready": !1,
        "options": {
            "appendTo": "parent",
            "axis": !1,
            "connectWith": !1,
            "containment": !1,
            "cursor": "auto",
            "cursorAt": !1,
            "dropOnEmpty": !0,
            "forcePlaceholderSize": !1,
            "forceHelperSize": !1,
            "grid": !1,
            "handle": !1,
            "helper": "original",
            "items": "> *",
            "opacity": !1,
            "placeholder": !1,
            "revert": !1,
            "scroll": !0,
            "scrollSensitivity": 20,
            "scrollSpeed": 20,
            "scope": "default",
            "tolerance": "intersect",
            "zIndex": 1e3,
            "activate": null,
            "beforeStop": null,
            "change": null,
            "deactivate": null,
            "out": null,
            "over": null,
            "receive": null,
            "remove": null,
            "sort": null,
            "start": null,
            "stop": null,
            "update": null
        },
        "_create": function() {
            var e = this.options;
            this.containerCache = {}, this.element.addClass("ui-sortable"), this.refresh(), 
            this.floating = !!this.items.length && ("x" === e.axis || n(this.items[0].item)), 
            this.offset = this.element.offset(), this._mouseInit(), this.ready = !0;
        },
        "_destroy": function() {
            this.element.removeClass("ui-sortable ui-sortable-disabled"), this._mouseDestroy();
            for (var e = this.items.length - 1; e >= 0; e--) this.items[e].item.removeData(this.widgetName + "-item");
            return this;
        },
        "_setOption": function(t, i) {
            "disabled" === t ? (this.options[t] = i, this.widget().toggleClass("ui-sortable-disabled", !!i)) : e.Widget.prototype._setOption.apply(this, arguments);
        },
        "_mouseCapture": function(t, i) {
            var n = null, r = !1, s = this;
            return !this.reverting && (!this.options.disabled && "static" !== this.options.type && (this._refreshItems(t), 
            e(t.target).parents().each(function() {
                if (e.data(this, s.widgetName + "-item") === s) return n = e(this), !1;
            }), e.data(t.target, s.widgetName + "-item") === s && (n = e(t.target)), !!n && (!(this.options.handle && !i && (e(this.options.handle, n).find("*").addBack().each(function() {
                this === t.target && (r = !0);
            }), !r)) && (this.currentItem = n, this._removeCurrentsFromItems(), !0))));
        },
        "_mouseStart": function(t, i, n) {
            var r, s, a = this.options;
            if (this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(t), 
            this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), 
            this.offset = this.currentItem.offset(), this.offset = {
                "top": this.offset.top - this.margins.top,
                "left": this.offset.left - this.margins.left
            }, e.extend(this.offset, {
                "click": {
                    "left": t.pageX - this.offset.left,
                    "top": t.pageY - this.offset.top
                },
                "parent": this._getParentOffset(),
                "relative": this._getRelativeOffset()
            }), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), 
            this.originalPosition = this._generatePosition(t), this.originalPageX = t.pageX, 
            this.originalPageY = t.pageY, a.cursorAt && this._adjustOffsetFromHelper(a.cursorAt), 
            this.domPosition = {
                "prev": this.currentItem.prev()[0],
                "parent": this.currentItem.parent()[0]
            }, this.helper[0] !== this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), 
            a.containment && this._setContainment(), a.cursor && "auto" !== a.cursor && (s = this.document.find("body"), 
            this.storedCursor = s.css("cursor"), s.css("cursor", a.cursor), this.storedStylesheet = e("<style>*{ cursor: " + a.cursor + " !important; }</style>").appendTo(s)), 
            a.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), 
            this.helper.css("opacity", a.opacity)), a.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), 
            this.helper.css("zIndex", a.zIndex)), this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()), 
            this._trigger("start", t, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions(), 
            !n) for (r = this.containers.length - 1; r >= 0; r--) this.containers[r]._trigger("activate", t, this._uiHash(this));
            return e.ui.ddmanager && (e.ui.ddmanager.current = this), e.ui.ddmanager && !a.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), 
            this.dragging = !0, this.helper.addClass("ui-sortable-helper"), this._mouseDrag(t), 
            !0;
        },
        "_mouseDrag": function(t) {
            var i, n, r, s, a = this.options, o = !1;
            for (this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), 
            this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll && (this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - t.pageY < a.scrollSensitivity ? this.scrollParent[0].scrollTop = o = this.scrollParent[0].scrollTop + a.scrollSpeed : t.pageY - this.overflowOffset.top < a.scrollSensitivity && (this.scrollParent[0].scrollTop = o = this.scrollParent[0].scrollTop - a.scrollSpeed), 
            this.overflowOffset.left + this.scrollParent[0].offsetWidth - t.pageX < a.scrollSensitivity ? this.scrollParent[0].scrollLeft = o = this.scrollParent[0].scrollLeft + a.scrollSpeed : t.pageX - this.overflowOffset.left < a.scrollSensitivity && (this.scrollParent[0].scrollLeft = o = this.scrollParent[0].scrollLeft - a.scrollSpeed)) : (t.pageY - e(document).scrollTop() < a.scrollSensitivity ? o = e(document).scrollTop(e(document).scrollTop() - a.scrollSpeed) : e(window).height() - (t.pageY - e(document).scrollTop()) < a.scrollSensitivity && (o = e(document).scrollTop(e(document).scrollTop() + a.scrollSpeed)), 
            t.pageX - e(document).scrollLeft() < a.scrollSensitivity ? o = e(document).scrollLeft(e(document).scrollLeft() - a.scrollSpeed) : e(window).width() - (t.pageX - e(document).scrollLeft()) < a.scrollSensitivity && (o = e(document).scrollLeft(e(document).scrollLeft() + a.scrollSpeed))), 
            !1 !== o && e.ui.ddmanager && !a.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t)), 
            this.positionAbs = this._convertPositionTo("absolute"), this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), 
            this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), 
            i = this.items.length - 1; i >= 0; i--) if (n = this.items[i], r = n.item[0], (s = this._intersectsWithPointer(n)) && n.instance === this.currentContainer && !(r === this.currentItem[0] || this.placeholder[1 === s ? "next" : "prev"]()[0] === r || e.contains(this.placeholder[0], r) || "semi-dynamic" === this.options.type && e.contains(this.element[0], r))) {
                if (this.direction = 1 === s ? "down" : "up", "pointer" !== this.options.tolerance && !this._intersectsWithSides(n)) break;
                this._rearrange(t, n), this._trigger("change", t, this._uiHash());
                break;
            }
            return this._contactContainers(t), e.ui.ddmanager && e.ui.ddmanager.drag(this, t), 
            this._trigger("sort", t, this._uiHash()), this.lastPositionAbs = this.positionAbs, 
            !1;
        },
        "_mouseStop": function(t, i) {
            if (t) {
                if (e.ui.ddmanager && !this.options.dropBehaviour && e.ui.ddmanager.drop(this, t), 
                this.options.revert) {
                    var n = this, r = this.placeholder.offset(), s = this.options.axis, a = {};
                    s && "x" !== s || (a.left = r.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft)), 
                    s && "y" !== s || (a.top = r.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop)), 
                    this.reverting = !0, e(this.helper).animate(a, parseInt(this.options.revert, 10) || 500, function() {
                        n._clear(t);
                    });
                } else this._clear(t, i);
                return !1;
            }
        },
        "cancel": function() {
            if (this.dragging) {
                this._mouseUp({
                    "target": null
                }), "original" === this.options.helper ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                for (var t = this.containers.length - 1; t >= 0; t--) this.containers[t]._trigger("deactivate", null, this._uiHash(this)), 
                this.containers[t].containerCache.over && (this.containers[t]._trigger("out", null, this._uiHash(this)), 
                this.containers[t].containerCache.over = 0);
            }
            return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), 
            "original" !== this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(), 
            e.extend(this, {
                "helper": null,
                "dragging": !1,
                "reverting": !1,
                "_noFinalSort": null
            }), this.domPosition.prev ? e(this.domPosition.prev).after(this.currentItem) : e(this.domPosition.parent).prepend(this.currentItem)), 
            this;
        },
        "serialize": function(t) {
            var i = this._getItemsAsjQuery(t && t.connected), n = [];
            return t = t || {}, e(i).each(function() {
                var i = (e(t.item || this).attr(t.attribute || "id") || "").match(t.expression || /(.+)[\-=_](.+)/);
                i && n.push((t.key || i[1] + "[]") + "=" + (t.key && t.expression ? i[1] : i[2]));
            }), !n.length && t.key && n.push(t.key + "="), n.join("&");
        },
        "toArray": function(t) {
            var i = this._getItemsAsjQuery(t && t.connected), n = [];
            return t = t || {}, i.each(function() {
                n.push(e(t.item || this).attr(t.attribute || "id") || "");
            }), n;
        },
        "_intersectsWith": function(e) {
            var t = this.positionAbs.left, i = t + this.helperProportions.width, n = this.positionAbs.top, r = n + this.helperProportions.height, s = e.left, a = s + e.width, o = e.top, l = o + e.height, h = this.offset.click.top, u = this.offset.click.left, p = "x" === this.options.axis || n + h > o && n + h < l, c = "y" === this.options.axis || t + u > s && t + u < a, d = p && c;
            return "pointer" === this.options.tolerance || this.options.forcePointerForContainers || "pointer" !== this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > e[this.floating ? "width" : "height"] ? d : s < t + this.helperProportions.width / 2 && i - this.helperProportions.width / 2 < a && o < n + this.helperProportions.height / 2 && r - this.helperProportions.height / 2 < l;
        },
        "_intersectsWithPointer": function(e) {
            var t = "x" === this.options.axis || i(this.positionAbs.top + this.offset.click.top, e.top, e.height), n = "y" === this.options.axis || i(this.positionAbs.left + this.offset.click.left, e.left, e.width), r = t && n, s = this._getDragVerticalDirection(), a = this._getDragHorizontalDirection();
            return !!r && (this.floating ? a && "right" === a || "down" === s ? 2 : 1 : s && ("down" === s ? 2 : 1));
        },
        "_intersectsWithSides": function(e) {
            var t = i(this.positionAbs.top + this.offset.click.top, e.top + e.height / 2, e.height), n = i(this.positionAbs.left + this.offset.click.left, e.left + e.width / 2, e.width), r = this._getDragVerticalDirection(), s = this._getDragHorizontalDirection();
            return this.floating && s ? "right" === s && n || "left" === s && !n : r && ("down" === r && t || "up" === r && !t);
        },
        "_getDragVerticalDirection": function() {
            var e = this.positionAbs.top - this.lastPositionAbs.top;
            return 0 !== e && (e > 0 ? "down" : "up");
        },
        "_getDragHorizontalDirection": function() {
            var e = this.positionAbs.left - this.lastPositionAbs.left;
            return 0 !== e && (e > 0 ? "right" : "left");
        },
        "refresh": function(e) {
            return this._refreshItems(e), this.refreshPositions(), this;
        },
        "_connectWith": function() {
            var e = this.options;
            return e.connectWith.constructor === String ? [ e.connectWith ] : e.connectWith;
        },
        "_getItemsAsjQuery": function(t) {
            var i, n, r, s, a = [], o = [], l = this._connectWith();
            if (l && t) for (i = l.length - 1; i >= 0; i--) for (n = (r = e(l[i])).length - 1; n >= 0; n--) (s = e.data(r[n], this.widgetFullName)) && s !== this && !s.options.disabled && o.push([ e.isFunction(s.options.items) ? s.options.items.call(s.element) : e(s.options.items, s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), s ]);
            for (o.push([ e.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                "options": this.options,
                "item": this.currentItem
            }) : e(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this ]), 
            i = o.length - 1; i >= 0; i--) o[i][0].each(function() {
                a.push(this);
            });
            return e(a);
        },
        "_removeCurrentsFromItems": function() {
            var t = this.currentItem.find(":data(" + this.widgetName + "-item)");
            this.items = e.grep(this.items, function(e) {
                for (var i = 0; i < t.length; i++) if (t[i] === e.item[0]) return !1;
                return !0;
            });
        },
        "_refreshItems": function(t) {
            this.items = [], this.containers = [ this ];
            var i, n, r, s, a, o, l, h, u = this.items, p = [ [ e.isFunction(this.options.items) ? this.options.items.call(this.element[0], t, {
                "item": this.currentItem
            }) : e(this.options.items, this.element), this ] ], c = this._connectWith();
            if (c && this.ready) for (i = c.length - 1; i >= 0; i--) for (n = (r = e(c[i])).length - 1; n >= 0; n--) (s = e.data(r[n], this.widgetFullName)) && s !== this && !s.options.disabled && (p.push([ e.isFunction(s.options.items) ? s.options.items.call(s.element[0], t, {
                "item": this.currentItem
            }) : e(s.options.items, s.element), s ]), this.containers.push(s));
            for (i = p.length - 1; i >= 0; i--) for (a = p[i][1], n = 0, h = (o = p[i][0]).length; n < h; n++) (l = e(o[n])).data(this.widgetName + "-item", a), 
            u.push({
                "item": l,
                "instance": a,
                "width": 0,
                "height": 0,
                "left": 0,
                "top": 0
            });
        },
        "refreshPositions": function(t) {
            this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
            var i, n, r, s;
            for (i = this.items.length - 1; i >= 0; i--) (n = this.items[i]).instance !== this.currentContainer && this.currentContainer && n.item[0] !== this.currentItem[0] || (r = this.options.toleranceElement ? e(this.options.toleranceElement, n.item) : n.item, 
            t || (n.width = r.outerWidth(), n.height = r.outerHeight()), s = r.offset(), n.left = s.left, 
            n.top = s.top);
            if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this); else for (i = this.containers.length - 1; i >= 0; i--) s = this.containers[i].element.offset(), 
            this.containers[i].containerCache.left = s.left, this.containers[i].containerCache.top = s.top, 
            this.containers[i].containerCache.width = this.containers[i].element.outerWidth(), 
            this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
            return this;
        },
        "_createPlaceholder": function(t) {
            var i, n = (t = t || this).options;
            n.placeholder && n.placeholder.constructor !== String || (i = n.placeholder, n.placeholder = {
                "element": function() {
                    var n = t.currentItem[0].nodeName.toLowerCase(), r = e("<" + n + ">", t.document[0]).addClass(i || t.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper");
                    return "tr" === n ? t.currentItem.children().each(function() {
                        e("<td>&#160;</td>", t.document[0]).attr("colspan", e(this).attr("colspan") || 1).appendTo(r);
                    }) : "img" === n && r.attr("src", t.currentItem.attr("src")), i || r.css("visibility", "hidden"), 
                    r;
                },
                "update": function(e, r) {
                    i && !n.forcePlaceholderSize || (r.height() || r.height(t.currentItem.innerHeight() - parseInt(t.currentItem.css("paddingTop") || 0, 10) - parseInt(t.currentItem.css("paddingBottom") || 0, 10)), 
                    r.width() || r.width(t.currentItem.innerWidth() - parseInt(t.currentItem.css("paddingLeft") || 0, 10) - parseInt(t.currentItem.css("paddingRight") || 0, 10)));
                }
            }), t.placeholder = e(n.placeholder.element.call(t.element, t.currentItem)), t.currentItem.after(t.placeholder), 
            n.placeholder.update(t, t.placeholder);
        },
        "_contactContainers": function(t) {
            var r, s, a, o, l, h, u, p, c, d, f = null, y = null;
            for (r = this.containers.length - 1; r >= 0; r--) if (!e.contains(this.currentItem[0], this.containers[r].element[0])) if (this._intersectsWith(this.containers[r].containerCache)) {
                if (f && e.contains(this.containers[r].element[0], f.element[0])) continue;
                f = this.containers[r], y = r;
            } else this.containers[r].containerCache.over && (this.containers[r]._trigger("out", t, this._uiHash(this)), 
            this.containers[r].containerCache.over = 0);
            if (f) if (1 === this.containers.length) this.containers[y].containerCache.over || (this.containers[y]._trigger("over", t, this._uiHash(this)), 
            this.containers[y].containerCache.over = 1); else {
                for (a = 1e4, o = null, l = (d = f.floating || n(this.currentItem)) ? "left" : "top", 
                h = d ? "width" : "height", u = this.positionAbs[l] + this.offset.click[l], s = this.items.length - 1; s >= 0; s--) e.contains(this.containers[y].element[0], this.items[s].item[0]) && this.items[s].item[0] !== this.currentItem[0] && (d && !i(this.positionAbs.top + this.offset.click.top, this.items[s].top, this.items[s].height) || (p = this.items[s].item.offset()[l], 
                c = !1, Math.abs(p - u) > Math.abs(p + this.items[s][h] - u) && (c = !0, p += this.items[s][h]), 
                Math.abs(p - u) < a && (a = Math.abs(p - u), o = this.items[s], this.direction = c ? "up" : "down")));
                if (!o && !this.options.dropOnEmpty) return;
                if (this.currentContainer === this.containers[y]) return;
                o ? this._rearrange(t, o, null, !0) : this._rearrange(t, null, this.containers[y].element, !0), 
                this._trigger("change", t, this._uiHash()), this.containers[y]._trigger("change", t, this._uiHash(this)), 
                this.currentContainer = this.containers[y], this.options.placeholder.update(this.currentContainer, this.placeholder), 
                this.containers[y]._trigger("over", t, this._uiHash(this)), this.containers[y].containerCache.over = 1;
            }
        },
        "_createHelper": function(t) {
            var i = this.options, n = e.isFunction(i.helper) ? e(i.helper.apply(this.element[0], [ t, this.currentItem ])) : "clone" === i.helper ? this.currentItem.clone() : this.currentItem;
            return n.parents("body").length || e("parent" !== i.appendTo ? i.appendTo : this.currentItem[0].parentNode)[0].appendChild(n[0]), 
            n[0] === this.currentItem[0] && (this._storedCSS = {
                "width": this.currentItem[0].style.width,
                "height": this.currentItem[0].style.height,
                "position": this.currentItem.css("position"),
                "top": this.currentItem.css("top"),
                "left": this.currentItem.css("left")
            }), n[0].style.width && !i.forceHelperSize || n.width(this.currentItem.width()), 
            n[0].style.height && !i.forceHelperSize || n.height(this.currentItem.height()), 
            n;
        },
        "_adjustOffsetFromHelper": function(t) {
            "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = {
                "left": +t[0],
                "top": +t[1] || 0
            }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), 
            "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top);
        },
        "_getParentOffset": function() {
            this.offsetParent = this.helper.offsetParent();
            var t = this.offsetParent.offset();
            return "absolute" === this.cssPosition && this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), 
            t.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && e.ui.ie) && (t = {
                "top": 0,
                "left": 0
            }), {
                "top": t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                "left": t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            };
        },
        "_getRelativeOffset": function() {
            if ("relative" === this.cssPosition) {
                var e = this.currentItem.position();
                return {
                    "top": e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    "left": e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                };
            }
            return {
                "top": 0,
                "left": 0
            };
        },
        "_cacheMargins": function() {
            this.margins = {
                "left": parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                "top": parseInt(this.currentItem.css("marginTop"), 10) || 0
            };
        },
        "_cacheHelperProportions": function() {
            this.helperProportions = {
                "width": this.helper.outerWidth(),
                "height": this.helper.outerHeight()
            };
        },
        "_setContainment": function() {
            var t, i, n, r = this.options;
            "parent" === r.containment && (r.containment = this.helper[0].parentNode), "document" !== r.containment && "window" !== r.containment || (this.containment = [ 0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, e("document" === r.containment ? document : window).width() - this.helperProportions.width - this.margins.left, (e("document" === r.containment ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top ]), 
            /^(document|window|parent)$/.test(r.containment) || (t = e(r.containment)[0], i = e(r.containment).offset(), 
            n = "hidden" !== e(t).css("overflow"), this.containment = [ i.left + (parseInt(e(t).css("borderLeftWidth"), 10) || 0) + (parseInt(e(t).css("paddingLeft"), 10) || 0) - this.margins.left, i.top + (parseInt(e(t).css("borderTopWidth"), 10) || 0) + (parseInt(e(t).css("paddingTop"), 10) || 0) - this.margins.top, i.left + (n ? Math.max(t.scrollWidth, t.offsetWidth) : t.offsetWidth) - (parseInt(e(t).css("borderLeftWidth"), 10) || 0) - (parseInt(e(t).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, i.top + (n ? Math.max(t.scrollHeight, t.offsetHeight) : t.offsetHeight) - (parseInt(e(t).css("borderTopWidth"), 10) || 0) - (parseInt(e(t).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top ]);
        },
        "_convertPositionTo": function(t, i) {
            i || (i = this.position);
            var n = "absolute" === t ? 1 : -1, r = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, s = /(html|body)/i.test(r[0].tagName);
            return {
                "top": i.top + this.offset.relative.top * n + this.offset.parent.top * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : s ? 0 : r.scrollTop()) * n,
                "left": i.left + this.offset.relative.left * n + this.offset.parent.left * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : s ? 0 : r.scrollLeft()) * n
            };
        },
        "_generatePosition": function(t) {
            var i, n, r = this.options, s = t.pageX, a = t.pageY, o = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, l = /(html|body)/i.test(o[0].tagName);
            return "relative" !== this.cssPosition || this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()), 
            this.originalPosition && (this.containment && (t.pageX - this.offset.click.left < this.containment[0] && (s = this.containment[0] + this.offset.click.left), 
            t.pageY - this.offset.click.top < this.containment[1] && (a = this.containment[1] + this.offset.click.top), 
            t.pageX - this.offset.click.left > this.containment[2] && (s = this.containment[2] + this.offset.click.left), 
            t.pageY - this.offset.click.top > this.containment[3] && (a = this.containment[3] + this.offset.click.top)), 
            r.grid && (i = this.originalPageY + Math.round((a - this.originalPageY) / r.grid[1]) * r.grid[1], 
            a = this.containment ? i - this.offset.click.top >= this.containment[1] && i - this.offset.click.top <= this.containment[3] ? i : i - this.offset.click.top >= this.containment[1] ? i - r.grid[1] : i + r.grid[1] : i, 
            n = this.originalPageX + Math.round((s - this.originalPageX) / r.grid[0]) * r.grid[0], 
            s = this.containment ? n - this.offset.click.left >= this.containment[0] && n - this.offset.click.left <= this.containment[2] ? n : n - this.offset.click.left >= this.containment[0] ? n - r.grid[0] : n + r.grid[0] : n)), 
            {
                "top": a - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : l ? 0 : o.scrollTop()),
                "left": s - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : l ? 0 : o.scrollLeft())
            };
        },
        "_rearrange": function(e, t, i, n) {
            i ? i[0].appendChild(this.placeholder[0]) : t.item[0].parentNode.insertBefore(this.placeholder[0], "down" === this.direction ? t.item[0] : t.item[0].nextSibling), 
            this.counter = this.counter ? ++this.counter : 1;
            var r = this.counter;
            this._delay(function() {
                r === this.counter && this.refreshPositions(!n);
            });
        },
        "_clear": function(e, t) {
            function i(e, t, i) {
                return function(n) {
                    i._trigger(e, n, t._uiHash(t));
                };
            }
            this.reverting = !1;
            var n, r = [];
            if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), 
            this._noFinalSort = null, this.helper[0] === this.currentItem[0]) {
                for (n in this._storedCSS) "auto" !== this._storedCSS[n] && "static" !== this._storedCSS[n] || (this._storedCSS[n] = "");
                this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
            } else this.currentItem.show();
            for (this.fromOutside && !t && r.push(function(e) {
                this._trigger("receive", e, this._uiHash(this.fromOutside));
            }), !this.fromOutside && this.domPosition.prev === this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent === this.currentItem.parent()[0] || t || r.push(function(e) {
                this._trigger("update", e, this._uiHash());
            }), this !== this.currentContainer && (t || (r.push(function(e) {
                this._trigger("remove", e, this._uiHash());
            }), r.push(function(e) {
                return function(t) {
                    e._trigger("receive", t, this._uiHash(this));
                };
            }.call(this, this.currentContainer)), r.push(function(e) {
                return function(t) {
                    e._trigger("update", t, this._uiHash(this));
                };
            }.call(this, this.currentContainer)))), n = this.containers.length - 1; n >= 0; n--) t || r.push(i("deactivate", this, this.containers[n])), 
            this.containers[n].containerCache.over && (r.push(i("out", this, this.containers[n])), 
            this.containers[n].containerCache.over = 0);
            if (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor), 
            this.storedStylesheet.remove()), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), 
            this._storedZIndex && this.helper.css("zIndex", "auto" === this._storedZIndex ? "" : this._storedZIndex), 
            this.dragging = !1, this.cancelHelperRemoval) {
                if (!t) {
                    for (this._trigger("beforeStop", e, this._uiHash()), n = 0; n < r.length; n++) r[n].call(this, e);
                    this._trigger("stop", e, this._uiHash());
                }
                return this.fromOutside = !1, !1;
            }
            if (t || this._trigger("beforeStop", e, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), 
            this.helper[0] !== this.currentItem[0] && this.helper.remove(), this.helper = null, 
            !t) {
                for (n = 0; n < r.length; n++) r[n].call(this, e);
                this._trigger("stop", e, this._uiHash());
            }
            return this.fromOutside = !1, !0;
        },
        "_trigger": function() {
            !1 === e.Widget.prototype._trigger.apply(this, arguments) && this.cancel();
        },
        "_uiHash": function(t) {
            var i = t || this;
            return {
                "helper": i.helper,
                "placeholder": i.placeholder || e([]),
                "position": i.position,
                "originalPosition": i.originalPosition,
                "offset": i.positionAbs,
                "item": i.currentItem,
                "sender": t ? t.element : null
            };
        }
    });
}(jQuery), function(e) {
    function t(e) {
        return function() {
            var t = this.element.val();
            e.apply(this, arguments), this._refresh(), t !== this.element.val() && this._trigger("change");
        };
    }
    e.widget("ui.spinner", {
        "version": "1.10.4",
        "defaultElement": "<input>",
        "widgetEventPrefix": "spin",
        "options": {
            "culture": null,
            "icons": {
                "down": "ui-icon-triangle-1-s",
                "up": "ui-icon-triangle-1-n"
            },
            "incremental": !0,
            "max": null,
            "min": null,
            "numberFormat": null,
            "page": 10,
            "step": 1,
            "change": null,
            "spin": null,
            "start": null,
            "stop": null
        },
        "_create": function() {
            this._setOption("max", this.options.max), this._setOption("min", this.options.min), 
            this._setOption("step", this.options.step), "" !== this.value() && this._value(this.element.val(), !0), 
            this._draw(), this._on(this._events), this._refresh(), this._on(this.window, {
                "beforeunload": function() {
                    this.element.removeAttr("autocomplete");
                }
            });
        },
        "_getCreateOptions": function() {
            var t = {}, i = this.element;
            return e.each([ "min", "max", "step" ], function(e, n) {
                var r = i.attr(n);
                void 0 !== r && r.length && (t[n] = r);
            }), t;
        },
        "_events": {
            "keydown": function(e) {
                this._start(e) && this._keydown(e) && e.preventDefault();
            },
            "keyup": "_stop",
            "focus": function() {
                this.previous = this.element.val();
            },
            "blur": function(e) {
                this.cancelBlur ? delete this.cancelBlur : (this._stop(), this._refresh(), this.previous !== this.element.val() && this._trigger("change", e));
            },
            "mousewheel": function(e, t) {
                if (t) {
                    if (!this.spinning && !this._start(e)) return !1;
                    this._spin((t > 0 ? 1 : -1) * this.options.step, e), clearTimeout(this.mousewheelTimer), 
                    this.mousewheelTimer = this._delay(function() {
                        this.spinning && this._stop(e);
                    }, 100), e.preventDefault();
                }
            },
            "mousedown .ui-spinner-button": function(t) {
                function i() {
                    this.element[0] === this.document[0].activeElement || (this.element.focus(), this.previous = n, 
                    this._delay(function() {
                        this.previous = n;
                    }));
                }
                var n;
                n = this.element[0] === this.document[0].activeElement ? this.previous : this.element.val(), 
                t.preventDefault(), i.call(this), this.cancelBlur = !0, this._delay(function() {
                    delete this.cancelBlur, i.call(this);
                }), !1 !== this._start(t) && this._repeat(null, e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t);
            },
            "mouseup .ui-spinner-button": "_stop",
            "mouseenter .ui-spinner-button": function(t) {
                if (e(t.currentTarget).hasClass("ui-state-active")) return !1 !== this._start(t) && void this._repeat(null, e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t);
            },
            "mouseleave .ui-spinner-button": "_stop"
        },
        "_draw": function() {
            var e = this.uiSpinner = this.element.addClass("ui-spinner-input").attr("autocomplete", "off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());
            this.element.attr("role", "spinbutton"), this.buttons = e.find(".ui-spinner-button").attr("tabIndex", -1).button().removeClass("ui-corner-all"), 
            this.buttons.height() > Math.ceil(.5 * e.height()) && e.height() > 0 && e.height(e.height()), 
            this.options.disabled && this.disable();
        },
        "_keydown": function(t) {
            var i = this.options, n = e.ui.keyCode;
            switch (t.keyCode) {
              case n.UP:
                return this._repeat(null, 1, t), !0;

              case n.DOWN:
                return this._repeat(null, -1, t), !0;

              case n.PAGE_UP:
                return this._repeat(null, i.page, t), !0;

              case n.PAGE_DOWN:
                return this._repeat(null, -i.page, t), !0;
            }
            return !1;
        },
        "_uiSpinnerHtml": function() {
            return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";
        },
        "_buttonHtml": function() {
            return "<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon " + this.options.icons.up + "'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon " + this.options.icons.down + "'>&#9660;</span></a>";
        },
        "_start": function(e) {
            return !(!this.spinning && !1 === this._trigger("start", e)) && (this.counter || (this.counter = 1), 
            this.spinning = !0, !0);
        },
        "_repeat": function(e, t, i) {
            e = e || 500, clearTimeout(this.timer), this.timer = this._delay(function() {
                this._repeat(40, t, i);
            }, e), this._spin(t * this.options.step, i);
        },
        "_spin": function(e, t) {
            var i = this.value() || 0;
            this.counter || (this.counter = 1), i = this._adjustValue(i + e * this._increment(this.counter)), 
            this.spinning && !1 === this._trigger("spin", t, {
                "value": i
            }) || (this._value(i), this.counter++);
        },
        "_increment": function(t) {
            var i = this.options.incremental;
            return i ? e.isFunction(i) ? i(t) : Math.floor(t * t * t / 5e4 - t * t / 500 + 17 * t / 200 + 1) : 1;
        },
        "_precision": function() {
            var e = this._precisionOf(this.options.step);
            return null !== this.options.min && (e = Math.max(e, this._precisionOf(this.options.min))), 
            e;
        },
        "_precisionOf": function(e) {
            var t = e.toString(), i = t.indexOf(".");
            return -1 === i ? 0 : t.length - i - 1;
        },
        "_adjustValue": function(e) {
            var t, i, n = this.options;
            return t = null !== n.min ? n.min : 0, i = e - t, i = Math.round(i / n.step) * n.step, 
            e = t + i, e = parseFloat(e.toFixed(this._precision())), null !== n.max && e > n.max ? n.max : null !== n.min && e < n.min ? n.min : e;
        },
        "_stop": function(e) {
            this.spinning && (clearTimeout(this.timer), clearTimeout(this.mousewheelTimer), 
            this.counter = 0, this.spinning = !1, this._trigger("stop", e));
        },
        "_setOption": function(e, t) {
            if ("culture" === e || "numberFormat" === e) {
                var i = this._parse(this.element.val());
                return this.options[e] = t, void this.element.val(this._format(i));
            }
            "max" !== e && "min" !== e && "step" !== e || "string" == typeof t && (t = this._parse(t)), 
            "icons" === e && (this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up), 
            this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)), 
            this._super(e, t), "disabled" === e && (t ? (this.element.prop("disabled", !0), 
            this.buttons.button("disable")) : (this.element.prop("disabled", !1), this.buttons.button("enable")));
        },
        "_setOptions": t(function(e) {
            this._super(e), this._value(this.element.val());
        }),
        "_parse": function(e) {
            return "string" == typeof e && "" !== e && (e = window.Globalize && this.options.numberFormat ? Globalize.parseFloat(e, 10, this.options.culture) : +e), 
            "" === e || isNaN(e) ? null : e;
        },
        "_format": function(e) {
            return "" === e ? "" : window.Globalize && this.options.numberFormat ? Globalize.format(e, this.options.numberFormat, this.options.culture) : e;
        },
        "_refresh": function() {
            this.element.attr({
                "aria-valuemin": this.options.min,
                "aria-valuemax": this.options.max,
                "aria-valuenow": this._parse(this.element.val())
            });
        },
        "_value": function(e, t) {
            var i;
            "" !== e && null !== (i = this._parse(e)) && (t || (i = this._adjustValue(i)), e = this._format(i)), 
            this.element.val(e), this._refresh();
        },
        "_destroy": function() {
            this.element.removeClass("ui-spinner-input").prop("disabled", !1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), 
            this.uiSpinner.replaceWith(this.element);
        },
        "stepUp": t(function(e) {
            this._stepUp(e);
        }),
        "_stepUp": function(e) {
            this._start() && (this._spin((e || 1) * this.options.step), this._stop());
        },
        "stepDown": t(function(e) {
            this._stepDown(e);
        }),
        "_stepDown": function(e) {
            this._start() && (this._spin((e || 1) * -this.options.step), this._stop());
        },
        "pageUp": t(function(e) {
            this._stepUp((e || 1) * this.options.page);
        }),
        "pageDown": t(function(e) {
            this._stepDown((e || 1) * this.options.page);
        }),
        "value": function(e) {
            if (!arguments.length) return this._parse(this.element.val());
            t(this._value).call(this, e);
        },
        "widget": function() {
            return this.uiSpinner;
        }
    });
}(jQuery), function(e, t) {
    function i() {
        return ++r;
    }
    function n(e) {
        return (e = e.cloneNode(!1)).hash.length > 1 && decodeURIComponent(e.href.replace(s, "")) === decodeURIComponent(location.href.replace(s, ""));
    }
    var r = 0, s = /#.*$/;
    e.widget("ui.tabs", {
        "version": "1.10.4",
        "delay": 300,
        "options": {
            "active": null,
            "collapsible": !1,
            "event": "click",
            "heightStyle": "content",
            "hide": null,
            "show": null,
            "activate": null,
            "beforeActivate": null,
            "beforeLoad": null,
            "load": null
        },
        "_create": function() {
            var t = this, i = this.options;
            this.running = !1, this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible", i.collapsible).delegate(".ui-tabs-nav > li", "mousedown" + this.eventNamespace, function(t) {
                e(this).is(".ui-state-disabled") && t.preventDefault();
            }).delegate(".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
                e(this).closest("li").is(".ui-state-disabled") && this.blur();
            }), this._processTabs(), i.active = this._initialActive(), e.isArray(i.disabled) && (i.disabled = e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"), function(e) {
                return t.tabs.index(e);
            }))).sort()), !1 !== this.options.active && this.anchors.length ? this.active = this._findActive(i.active) : this.active = e(), 
            this._refresh(), this.active.length && this.load(i.active);
        },
        "_initialActive": function() {
            var t = this.options.active, i = this.options.collapsible, n = location.hash.substring(1);
            return null === t && (n && this.tabs.each(function(i, r) {
                if (e(r).attr("aria-controls") === n) return t = i, !1;
            }), null === t && (t = this.tabs.index(this.tabs.filter(".ui-tabs-active"))), null !== t && -1 !== t || (t = !!this.tabs.length && 0)), 
            !1 !== t && -1 === (t = this.tabs.index(this.tabs.eq(t))) && (t = !i && 0), !i && !1 === t && this.anchors.length && (t = 0), 
            t;
        },
        "_getCreateEventData": function() {
            return {
                "tab": this.active,
                "panel": this.active.length ? this._getPanelForTab(this.active) : e()
            };
        },
        "_tabKeydown": function(t) {
            var i = e(this.document[0].activeElement).closest("li"), n = this.tabs.index(i), r = !0;
            if (!this._handlePageNav(t)) {
                switch (t.keyCode) {
                  case e.ui.keyCode.RIGHT:
                  case e.ui.keyCode.DOWN:
                    n++;
                    break;

                  case e.ui.keyCode.UP:
                  case e.ui.keyCode.LEFT:
                    r = !1, n--;
                    break;

                  case e.ui.keyCode.END:
                    n = this.anchors.length - 1;
                    break;

                  case e.ui.keyCode.HOME:
                    n = 0;
                    break;

                  case e.ui.keyCode.SPACE:
                    return t.preventDefault(), clearTimeout(this.activating), void this._activate(n);

                  case e.ui.keyCode.ENTER:
                    return t.preventDefault(), clearTimeout(this.activating), void this._activate(n !== this.options.active && n);

                  default:
                    return;
                }
                t.preventDefault(), clearTimeout(this.activating), n = this._focusNextTab(n, r), 
                t.ctrlKey || (i.attr("aria-selected", "false"), this.tabs.eq(n).attr("aria-selected", "true"), 
                this.activating = this._delay(function() {
                    this.option("active", n);
                }, this.delay));
            }
        },
        "_panelKeydown": function(t) {
            this._handlePageNav(t) || t.ctrlKey && t.keyCode === e.ui.keyCode.UP && (t.preventDefault(), 
            this.active.focus());
        },
        "_handlePageNav": function(t) {
            return t.altKey && t.keyCode === e.ui.keyCode.PAGE_UP ? (this._activate(this._focusNextTab(this.options.active - 1, !1)), 
            !0) : t.altKey && t.keyCode === e.ui.keyCode.PAGE_DOWN ? (this._activate(this._focusNextTab(this.options.active + 1, !0)), 
            !0) : void 0;
        },
        "_findNextTab": function(t, i) {
            for (var n = this.tabs.length - 1; -1 !== e.inArray((t > n && (t = 0), t < 0 && (t = n), 
            t), this.options.disabled); ) t = i ? t + 1 : t - 1;
            return t;
        },
        "_focusNextTab": function(e, t) {
            return e = this._findNextTab(e, t), this.tabs.eq(e).focus(), e;
        },
        "_setOption": function(e, t) {
            "active" !== e ? "disabled" !== e ? (this._super(e, t), "collapsible" === e && (this.element.toggleClass("ui-tabs-collapsible", t), 
            t || !1 !== this.options.active || this._activate(0)), "event" === e && this._setupEvents(t), 
            "heightStyle" === e && this._setupHeightStyle(t)) : this._setupDisabled(t) : this._activate(t);
        },
        "_tabId": function(e) {
            return e.attr("aria-controls") || "ui-tabs-" + i();
        },
        "_sanitizeSelector": function(e) {
            return e ? e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : "";
        },
        "refresh": function() {
            var t = this.options, i = this.tablist.children(":has(a[href])");
            t.disabled = e.map(i.filter(".ui-state-disabled"), function(e) {
                return i.index(e);
            }), this._processTabs(), !1 !== t.active && this.anchors.length ? this.active.length && !e.contains(this.tablist[0], this.active[0]) ? this.tabs.length === t.disabled.length ? (t.active = !1, 
            this.active = e()) : this._activate(this._findNextTab(Math.max(0, t.active - 1), !1)) : t.active = this.tabs.index(this.active) : (t.active = !1, 
            this.active = e()), this._refresh();
        },
        "_refresh": function() {
            this._setupDisabled(this.options.disabled), this._setupEvents(this.options.event), 
            this._setupHeightStyle(this.options.heightStyle), this.tabs.not(this.active).attr({
                "aria-selected": "false",
                "tabIndex": -1
            }), this.panels.not(this._getPanelForTab(this.active)).hide().attr({
                "aria-expanded": "false",
                "aria-hidden": "true"
            }), this.active.length ? (this.active.addClass("ui-tabs-active ui-state-active").attr({
                "aria-selected": "true",
                "tabIndex": 0
            }), this._getPanelForTab(this.active).show().attr({
                "aria-expanded": "true",
                "aria-hidden": "false"
            })) : this.tabs.eq(0).attr("tabIndex", 0);
        },
        "_processTabs": function() {
            var t = this;
            this.tablist = this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role", "tablist"), 
            this.tabs = this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({
                "role": "tab",
                "tabIndex": -1
            }), this.anchors = this.tabs.map(function() {
                return e("a", this)[0];
            }).addClass("ui-tabs-anchor").attr({
                "role": "presentation",
                "tabIndex": -1
            }), this.panels = e(), this.anchors.each(function(i, r) {
                var s, a, o, l = e(r).uniqueId().attr("id"), h = e(r).closest("li"), u = h.attr("aria-controls");
                n(r) ? (s = r.hash, a = t.element.find(t._sanitizeSelector(s))) : (s = "#" + (o = t._tabId(h)), 
                (a = t.element.find(s)).length || (a = t._createPanel(o)).insertAfter(t.panels[i - 1] || t.tablist), 
                a.attr("aria-live", "polite")), a.length && (t.panels = t.panels.add(a)), u && h.data("ui-tabs-aria-controls", u), 
                h.attr({
                    "aria-controls": s.substring(1),
                    "aria-labelledby": l
                }), a.attr("aria-labelledby", l);
            }), this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role", "tabpanel");
        },
        "_getList": function() {
            return this.tablist || this.element.find("ol,ul").eq(0);
        },
        "_createPanel": function(t) {
            return e("<div>").attr("id", t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy", !0);
        },
        "_setupDisabled": function(t) {
            e.isArray(t) && (t.length ? t.length === this.anchors.length && (t = !0) : t = !1);
            for (var i, n = 0; i = this.tabs[n]; n++) !0 === t || -1 !== e.inArray(n, t) ? e(i).addClass("ui-state-disabled").attr("aria-disabled", "true") : e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");
            this.options.disabled = t;
        },
        "_setupEvents": function(t) {
            var i = {
                "click": function(e) {
                    e.preventDefault();
                }
            };
            t && e.each(t.split(" "), function(e, t) {
                i[t] = "_eventHandler";
            }), this._off(this.anchors.add(this.tabs).add(this.panels)), this._on(this.anchors, i), 
            this._on(this.tabs, {
                "keydown": "_tabKeydown"
            }), this._on(this.panels, {
                "keydown": "_panelKeydown"
            }), this._focusable(this.tabs), this._hoverable(this.tabs);
        },
        "_setupHeightStyle": function(t) {
            var i, n = this.element.parent();
            "fill" === t ? (i = n.height(), i -= this.element.outerHeight() - this.element.height(), 
            this.element.siblings(":visible").each(function() {
                var t = e(this), n = t.css("position");
                "absolute" !== n && "fixed" !== n && (i -= t.outerHeight(!0));
            }), this.element.children().not(this.panels).each(function() {
                i -= e(this).outerHeight(!0);
            }), this.panels.each(function() {
                e(this).height(Math.max(0, i - e(this).innerHeight() + e(this).height()));
            }).css("overflow", "auto")) : "auto" === t && (i = 0, this.panels.each(function() {
                i = Math.max(i, e(this).height("").height());
            }).height(i));
        },
        "_eventHandler": function(t) {
            var i = this.options, n = this.active, r = e(t.currentTarget).closest("li"), s = r[0] === n[0], a = s && i.collapsible, o = a ? e() : this._getPanelForTab(r), l = n.length ? this._getPanelForTab(n) : e(), h = {
                "oldTab": n,
                "oldPanel": l,
                "newTab": a ? e() : r,
                "newPanel": o
            };
            t.preventDefault(), r.hasClass("ui-state-disabled") || r.hasClass("ui-tabs-loading") || this.running || s && !i.collapsible || !1 === this._trigger("beforeActivate", t, h) || (i.active = !a && this.tabs.index(r), 
            this.active = s ? e() : r, this.xhr && this.xhr.abort(), l.length || o.length || e.error("jQuery UI Tabs: Mismatching fragment identifier."), 
            o.length && this.load(this.tabs.index(r), t), this._toggle(t, h));
        },
        "_toggle": function(t, i) {
            function n() {
                s.running = !1, s._trigger("activate", t, i);
            }
            function r() {
                i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"), a.length && s.options.show ? s._show(a, s.options.show, n) : (a.show(), 
                n());
            }
            var s = this, a = i.newPanel, o = i.oldPanel;
            this.running = !0, o.length && this.options.hide ? this._hide(o, this.options.hide, function() {
                i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), r();
            }) : (i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), o.hide(), 
            r()), o.attr({
                "aria-expanded": "false",
                "aria-hidden": "true"
            }), i.oldTab.attr("aria-selected", "false"), a.length && o.length ? i.oldTab.attr("tabIndex", -1) : a.length && this.tabs.filter(function() {
                return 0 === e(this).attr("tabIndex");
            }).attr("tabIndex", -1), a.attr({
                "aria-expanded": "true",
                "aria-hidden": "false"
            }), i.newTab.attr({
                "aria-selected": "true",
                "tabIndex": 0
            });
        },
        "_activate": function(t) {
            var i, n = this._findActive(t);
            n[0] !== this.active[0] && (n.length || (n = this.active), i = n.find(".ui-tabs-anchor")[0], 
            this._eventHandler({
                "target": i,
                "currentTarget": i,
                "preventDefault": e.noop
            }));
        },
        "_findActive": function(t) {
            return !1 === t ? e() : this.tabs.eq(t);
        },
        "_getIndex": function(e) {
            return "string" == typeof e && (e = this.anchors.index(this.anchors.filter("[href$='" + e + "']"))), 
            e;
        },
        "_destroy": function() {
            this.xhr && this.xhr.abort(), this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"), 
            this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"), 
            this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(), 
            this.tabs.add(this.panels).each(function() {
                e.data(this, "ui-tabs-destroy") ? e(this).remove() : e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role");
            }), this.tabs.each(function() {
                var t = e(this), i = t.data("ui-tabs-aria-controls");
                i ? t.attr("aria-controls", i).removeData("ui-tabs-aria-controls") : t.removeAttr("aria-controls");
            }), this.panels.show(), "content" !== this.options.heightStyle && this.panels.css("height", "");
        },
        "enable": function(t) {
            var i = this.options.disabled;
            !1 !== i && (void 0 === t ? i = !1 : (t = this._getIndex(t), i = e.isArray(i) ? e.map(i, function(e) {
                return e !== t ? e : null;
            }) : e.map(this.tabs, function(e, i) {
                return i !== t ? i : null;
            })), this._setupDisabled(i));
        },
        "disable": function(t) {
            var i = this.options.disabled;
            if (!0 !== i) {
                if (void 0 === t) i = !0; else {
                    if (t = this._getIndex(t), -1 !== e.inArray(t, i)) return;
                    i = e.isArray(i) ? e.merge([ t ], i).sort() : [ t ];
                }
                this._setupDisabled(i);
            }
        },
        "load": function(t, i) {
            t = this._getIndex(t);
            var r = this, s = this.tabs.eq(t), a = s.find(".ui-tabs-anchor"), o = this._getPanelForTab(s), l = {
                "tab": s,
                "panel": o
            };
            n(a[0]) || (this.xhr = e.ajax(this._ajaxSettings(a, i, l)), this.xhr && "canceled" !== this.xhr.statusText && (s.addClass("ui-tabs-loading"), 
            o.attr("aria-busy", "true"), this.xhr.success(function(e) {
                setTimeout(function() {
                    o.html(e), r._trigger("load", i, l);
                }, 1);
            }).complete(function(e, t) {
                setTimeout(function() {
                    "abort" === t && r.panels.stop(!1, !0), s.removeClass("ui-tabs-loading"), o.removeAttr("aria-busy"), 
                    e === r.xhr && delete r.xhr;
                }, 1);
            })));
        },
        "_ajaxSettings": function(t, i, n) {
            var r = this;
            return {
                "url": t.attr("href"),
                "beforeSend": function(t, s) {
                    return r._trigger("beforeLoad", i, e.extend({
                        "jqXHR": t,
                        "ajaxSettings": s
                    }, n));
                }
            };
        },
        "_getPanelForTab": function(t) {
            var i = e(t).attr("aria-controls");
            return this.element.find(this._sanitizeSelector("#" + i));
        }
    });
}(jQuery), function(e) {
    function t(t, i) {
        var n = (t.attr("aria-describedby") || "").split(/\s+/);
        n.push(i), t.data("ui-tooltip-id", i).attr("aria-describedby", e.trim(n.join(" ")));
    }
    function i(t) {
        var i = t.data("ui-tooltip-id"), n = (t.attr("aria-describedby") || "").split(/\s+/), r = e.inArray(i, n);
        -1 !== r && n.splice(r, 1), t.removeData("ui-tooltip-id"), (n = e.trim(n.join(" "))) ? t.attr("aria-describedby", n) : t.removeAttr("aria-describedby");
    }
    var n = 0;
    e.widget("ui.tooltip", {
        "version": "1.10.4",
        "options": {
            "content": function() {
                var t = e(this).attr("title") || "";
                return e("<a>").text(t).html();
            },
            "hide": !0,
            "items": "[title]:not([disabled])",
            "position": {
                "my": "left top+15",
                "at": "left bottom",
                "collision": "flipfit flip"
            },
            "show": !0,
            "tooltipClass": null,
            "track": !1,
            "close": null,
            "open": null
        },
        "_create": function() {
            this._on({
                "mouseover": "open",
                "focusin": "open"
            }), this.tooltips = {}, this.parents = {}, this.options.disabled && this._disable();
        },
        "_setOption": function(t, i) {
            var n = this;
            if ("disabled" === t) return this[i ? "_disable" : "_enable"](), void (this.options[t] = i);
            this._super(t, i), "content" === t && e.each(this.tooltips, function(e, t) {
                n._updateContent(t);
            });
        },
        "_disable": function() {
            var t = this;
            e.each(this.tooltips, function(i, n) {
                var r = e.Event("blur");
                r.target = r.currentTarget = n[0], t.close(r, !0);
            }), this.element.find(this.options.items).addBack().each(function() {
                var t = e(this);
                t.is("[title]") && t.data("ui-tooltip-title", t.attr("title")).attr("title", "");
            });
        },
        "_enable": function() {
            this.element.find(this.options.items).addBack().each(function() {
                var t = e(this);
                t.data("ui-tooltip-title") && t.attr("title", t.data("ui-tooltip-title"));
            });
        },
        "open": function(t) {
            var i = this, n = e(t ? t.target : this.element).closest(this.options.items);
            n.length && !n.data("ui-tooltip-id") && (n.attr("title") && n.data("ui-tooltip-title", n.attr("title")), 
            n.data("ui-tooltip-open", !0), t && "mouseover" === t.type && n.parents().each(function() {
                var t, n = e(this);
                n.data("ui-tooltip-open") && ((t = e.Event("blur")).target = t.currentTarget = this, 
                i.close(t, !0)), n.attr("title") && (n.uniqueId(), i.parents[this.id] = {
                    "element": this,
                    "title": n.attr("title")
                }, n.attr("title", ""));
            }), this._updateContent(n, t));
        },
        "_updateContent": function(e, t) {
            var i, n = this.options.content, r = this, s = t ? t.type : null;
            if ("string" == typeof n) return this._open(t, e, n);
            (i = n.call(e[0], function(i) {
                e.data("ui-tooltip-open") && r._delay(function() {
                    t && (t.type = s), this._open(t, e, i);
                });
            })) && this._open(t, e, i);
        },
        "_open": function(i, n, r) {
            function s(e) {
                h.of = e, a.is(":hidden") || a.position(h);
            }
            var a, o, l, h = e.extend({}, this.options.position);
            r && ((a = this._find(n)).length ? a.find(".ui-tooltip-content").html(r) : (n.is("[title]") && (i && "mouseover" === i.type ? n.attr("title", "") : n.removeAttr("title")), 
            a = this._tooltip(n), t(n, a.attr("id")), a.find(".ui-tooltip-content").html(r), 
            this.options.track && i && /^mouse/.test(i.type) ? (this._on(this.document, {
                "mousemove": s
            }), s(i)) : a.position(e.extend({
                "of": n
            }, this.options.position)), a.hide(), this._show(a, this.options.show), this.options.show && this.options.show.delay && (l = this.delayedShow = setInterval(function() {
                a.is(":visible") && (s(h.of), clearInterval(l));
            }, e.fx.interval)), this._trigger("open", i, {
                "tooltip": a
            }), o = {
                "keyup": function(t) {
                    if (t.keyCode === e.ui.keyCode.ESCAPE) {
                        var i = e.Event(t);
                        i.currentTarget = n[0], this.close(i, !0);
                    }
                },
                "remove": function() {
                    this._removeTooltip(a);
                }
            }, i && "mouseover" !== i.type || (o.mouseleave = "close"), i && "focusin" !== i.type || (o.focusout = "close"), 
            this._on(!0, n, o)));
        },
        "close": function(t) {
            var n = this, r = e(t ? t.currentTarget : this.element), s = this._find(r);
            this.closing || (clearInterval(this.delayedShow), r.data("ui-tooltip-title") && r.attr("title", r.data("ui-tooltip-title")), 
            i(r), s.stop(!0), this._hide(s, this.options.hide, function() {
                n._removeTooltip(e(this));
            }), r.removeData("ui-tooltip-open"), this._off(r, "mouseleave focusout keyup"), 
            r[0] !== this.element[0] && this._off(r, "remove"), this._off(this.document, "mousemove"), 
            t && "mouseleave" === t.type && e.each(this.parents, function(t, i) {
                e(i.element).attr("title", i.title), delete n.parents[t];
            }), this.closing = !0, this._trigger("close", t, {
                "tooltip": s
            }), this.closing = !1);
        },
        "_tooltip": function(t) {
            var i = "ui-tooltip-" + n++, r = e("<div>").attr({
                "id": i,
                "role": "tooltip"
            }).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content " + (this.options.tooltipClass || ""));
            return e("<div>").addClass("ui-tooltip-content").appendTo(r), r.appendTo(this.document[0].body), 
            this.tooltips[i] = t, r;
        },
        "_find": function(t) {
            var i = t.data("ui-tooltip-id");
            return i ? e("#" + i) : e();
        },
        "_removeTooltip": function(e) {
            e.remove(), delete this.tooltips[e.attr("id")];
        },
        "_destroy": function() {
            var t = this;
            e.each(this.tooltips, function(i, n) {
                var r = e.Event("blur");
                r.target = r.currentTarget = n[0], t.close(r, !0), e("#" + i).remove(), n.data("ui-tooltip-title") && (n.attr("title", n.data("ui-tooltip-title")), 
                n.removeData("ui-tooltip-title"));
            });
        }
    });
}(jQuery), function() {
    function e(e, t, i) {
        for (var n = (i || 0) - 1, r = e ? e.length : 0; ++n < r; ) if (e[n] === t) return n;
        return -1;
    }
    function t(t, i) {
        var n = typeof i;
        if (t = t.cache, "boolean" == n || null == i) return t[i] ? 0 : -1;
        "number" != n && "string" != n && (n = "object");
        var r = "number" == n ? i : g + i;
        return t = (t = t[n]) && t[r], "object" == n ? t && e(t, i) > -1 ? 0 : -1 : t ? 0 : -1;
    }
    function i(e) {
        var t = this.cache, i = typeof e;
        if ("boolean" == i || null == e) t[e] = !0; else {
            "number" != i && "string" != i && (i = "object");
            var n = "number" == i ? e : g + e, r = t[i] || (t[i] = {});
            "object" == i ? (r[n] || (r[n] = [])).push(e) : r[n] = !0;
        }
    }
    function n(e) {
        return e.charCodeAt(0);
    }
    function r(e, t) {
        for (var i = e.criteria, n = t.criteria, r = -1, s = i.length; ++r < s; ) {
            var a = i[r], o = n[r];
            if (a !== o) {
                if (a > o || void 0 === a) return 1;
                if (a < o || void 0 === o) return -1;
            }
        }
        return e.index - t.index;
    }
    function s(e) {
        var t = -1, n = e.length, r = e[0], s = e[n / 2 | 0], a = e[n - 1];
        if (r && "object" == typeof r && s && "object" == typeof s && a && "object" == typeof a) return !1;
        var o = l();
        o.false = o.null = o.true = o.undefined = !1;
        var h = l();
        for (h.array = e, h.cache = o, h.push = i; ++t < n; ) h.push(e[t]);
        return h;
    }
    function a(e) {
        return "\\" + X[e];
    }
    function o() {
        return f.pop() || [];
    }
    function l() {
        return y.pop() || {
            "array": null,
            "cache": null,
            "criteria": null,
            "false": !1,
            "index": 0,
            "null": !1,
            "number": null,
            "object": null,
            "push": null,
            "string": null,
            "true": !1,
            "undefined": !1,
            "value": null
        };
    }
    function h(e) {
        e.length = 0, f.length < L && f.push(e);
    }
    function u(e) {
        var t = e.cache;
        t && u(t), e.array = e.cache = e.criteria = e.object = e.number = e.string = e.value = null, 
        y.length < L && y.push(e);
    }
    function p(e, t, i) {
        t || (t = 0), void 0 === i && (i = e ? e.length : 0);
        for (var n = -1, r = i - t || 0, s = Array(r < 0 ? 0 : r); ++n < r; ) s[n] = e[t + n];
        return s;
    }
    function c(i) {
        function f(e) {
            return e && "object" == typeof e && !Mt(e) && dt.call(e, "__wrapped__") ? e : new y(e);
        }
        function y(e, t) {
            this.__chain__ = !!t, this.__wrapped__ = e;
        }
        function L(e) {
            function t() {
                if (n) {
                    var e = p(n);
                    ft.apply(e, arguments);
                }
                if (this instanceof t) {
                    var s = Y(i.prototype), a = i.apply(s, e || arguments);
                    return ge(a) ? a : s;
                }
                return i.apply(r, e || arguments);
            }
            var i = e[0], n = e[2], r = e[4];
            return Tt(t, e), t;
        }
        function X(e, t, i, n, r) {
            if (i) {
                var s = i(e);
                if (void 0 !== s) return s;
            }
            if (!ge(e)) return e;
            var a = at.call(e);
            if (!j[a]) return e;
            var l = Nt[a];
            switch (a) {
              case R:
              case D:
                return new l(+e);

              case B:
              case H:
                return new l(e);

              case G:
                return s = l(e.source, x.exec(e)), s.lastIndex = e.lastIndex, s;
            }
            var u = Mt(e);
            if (t) {
                var c = !n;
                n || (n = o()), r || (r = o());
                for (var d = n.length; d--; ) if (n[d] == e) return r[d];
                s = u ? l(e.length) : {};
            } else s = u ? p(e) : Dt({}, e);
            return u && (dt.call(e, "index") && (s.index = e.index), dt.call(e, "input") && (s.input = e.input)), 
            t ? (n.push(e), r.push(s), (u ? xe : Ut)(e, function(e, a) {
                s[a] = X(e, t, i, n, r);
            }), c && (h(n), h(r)), s) : s;
        }
        function Y(e, t) {
            return ge(e) ? Lt(e) : {};
        }
        function $(e, t, i) {
            if ("function" != typeof e) return He;
            if (void 0 === t || !("prototype" in e)) return e;
            var n = e.__bindData__;
            if (void 0 === n && (Pt.funcNames && (n = !e.name), !(n = n || !Pt.funcDecomp))) {
                var r = pt.call(e);
                Pt.funcNames || (n = !_.test(r)), n || (n = T.test(r), Tt(e, n));
            }
            if (!1 === n || !0 !== n && 1 & n[1]) return e;
            switch (i) {
              case 1:
                return function(i) {
                    return e.call(t, i);
                };

              case 2:
                return function(i, n) {
                    return e.call(t, i, n);
                };

              case 3:
                return function(i, n, r) {
                    return e.call(t, i, n, r);
                };

              case 4:
                return function(i, n, r, s) {
                    return e.call(t, i, n, r, s);
                };
            }
            return Ue(e, t);
        }
        function K(e) {
            function t() {
                var e = l ? a : this;
                if (r) {
                    var f = p(r);
                    ft.apply(f, arguments);
                }
                if ((s || u) && (f || (f = p(arguments)), s && ft.apply(f, s), u && f.length < o)) return n |= 16, 
                K([ i, c ? n : -4 & n, f, null, a, o ]);
                if (f || (f = arguments), h && (i = e[d]), this instanceof t) {
                    e = Y(i.prototype);
                    var y = i.apply(e, f);
                    return ge(y) ? y : e;
                }
                return i.apply(e, f);
            }
            var i = e[0], n = e[1], r = e[2], s = e[3], a = e[4], o = e[5], l = 1 & n, h = 2 & n, u = 4 & n, c = 8 & n, d = i;
            return Tt(t, e), t;
        }
        function Q(i, n) {
            var r = -1, a = le(), o = i ? i.length : 0, l = o >= v && a === e, h = [];
            if (l) {
                var p = s(n);
                p ? (a = t, n = p) : l = !1;
            }
            for (;++r < o; ) {
                var c = i[r];
                a(n, c) < 0 && h.push(c);
            }
            return l && u(n), h;
        }
        function ee(e, t, i, n) {
            for (var r = (n || 0) - 1, s = e ? e.length : 0, a = []; ++r < s; ) {
                var o = e[r];
                if (o && "object" == typeof o && "number" == typeof o.length && (Mt(o) || ce(o))) {
                    t || (o = ee(o, t, i));
                    var l = -1, h = o.length, u = a.length;
                    for (a.length += h; ++l < h; ) a[u++] = o[l];
                } else i || a.push(o);
            }
            return a;
        }
        function te(e, t, i, n, r, s) {
            if (i) {
                var a = i(e, t);
                if (void 0 !== a) return !!a;
            }
            if (e === t) return 0 !== e || 1 / e == 1 / t;
            var l = typeof e, u = typeof t;
            if (!(e !== e || e && q[l] || t && q[u])) return !1;
            if (null == e || null == t) return e === t;
            var p = at.call(e), c = at.call(t);
            if (p == k && (p = U), c == k && (c = U), p != c) return !1;
            switch (p) {
              case R:
              case D:
                return +e == +t;

              case B:
                return e != +e ? t != +t : 0 == e ? 1 / e == 1 / t : e == +t;

              case G:
              case H:
                return e == tt(t);
            }
            var d = p == I;
            if (!d) {
                var f = dt.call(e, "__wrapped__"), y = dt.call(t, "__wrapped__");
                if (f || y) return te(f ? e.__wrapped__ : e, y ? t.__wrapped__ : t, i, n, r, s);
                if (p != U) return !1;
                var m = e.constructor, g = t.constructor;
                if (m != g && !(me(m) && m instanceof m && me(g) && g instanceof g) && "constructor" in e && "constructor" in t) return !1;
            }
            var v = !r;
            r || (r = o()), s || (s = o());
            for (var L = r.length; L--; ) if (r[L] == e) return s[L] == t;
            var O = 0;
            if (a = !0, r.push(e), s.push(t), d) {
                if (L = e.length, O = t.length, (a = O == L) || n) for (;O--; ) {
                    var b = L, w = t[O];
                    if (n) for (;b-- && !(a = te(e[b], w, i, n, r, s)); ) ; else if (!(a = te(e[O], w, i, n, r, s))) break;
                }
            } else Bt(t, function(t, o, l) {
                if (dt.call(l, o)) return O++, a = dt.call(e, o) && te(e[o], t, i, n, r, s);
            }), a && !n && Bt(e, function(e, t, i) {
                if (dt.call(i, t)) return a = --O > -1;
            });
            return r.pop(), s.pop(), v && (h(r), h(s)), a;
        }
        function ie(e, t, i, n, r) {
            (Mt(t) ? xe : Ut)(t, function(t, s) {
                var a, o, l = t, h = e[s];
                if (t && ((o = Mt(t)) || Gt(t))) {
                    for (var u = n.length; u--; ) if (a = n[u] == t) {
                        h = r[u];
                        break;
                    }
                    if (!a) {
                        var p;
                        i && (p = void 0 !== (l = i(h, t))) && (h = l), p || (h = o ? Mt(h) ? h : [] : Gt(h) ? h : {}), 
                        n.push(t), r.push(h), p || ie(h, t, i, n, r);
                    }
                } else i && void 0 === (l = i(h, t)) && (l = t), void 0 !== l && (h = l);
                e[s] = h;
            });
        }
        function ne(e, t) {
            return e + ut(Et() * (t - e + 1));
        }
        function re(i, n, r) {
            var a = -1, l = le(), p = i ? i.length : 0, c = [], d = !n && p >= v && l === e, f = r || d ? o() : c;
            for (d && (l = t, f = s(f)); ++a < p; ) {
                var y = i[a], m = r ? r(y, a, i) : y;
                (n ? !a || f[f.length - 1] !== m : l(f, m) < 0) && ((r || d) && f.push(m), c.push(y));
            }
            return d ? (h(f.array), u(f)) : r && h(f), c;
        }
        function se(e) {
            return function(t, i, n) {
                var r = {};
                i = f.createCallback(i, n, 3);
                var s = -1, a = t ? t.length : 0;
                if ("number" == typeof a) for (;++s < a; ) {
                    var o = t[s];
                    e(r, o, i(o, s, t), t);
                } else Ut(t, function(t, n, s) {
                    e(r, t, i(t, n, s), s);
                });
                return r;
            };
        }
        function ae(e, t, i, n, r, s) {
            var a = 1 & t, o = 4 & t, l = 16 & t, h = 32 & t;
            if (!(2 & t) && !me(e)) throw new it();
            l && !i.length && (t &= -17, l = i = !1), h && !n.length && (t &= -33, h = n = !1);
            var u = e && e.__bindData__;
            return u && !0 !== u ? ((u = p(u))[2] && (u[2] = p(u[2])), u[3] && (u[3] = p(u[3])), 
            !a || 1 & u[1] || (u[4] = r), !a && 1 & u[1] && (t |= 8), !o || 4 & u[1] || (u[5] = s), 
            l && ft.apply(u[2] || (u[2] = []), i), h && gt.apply(u[3] || (u[3] = []), n), u[1] |= t, 
            ae.apply(null, u)) : (1 == t || 17 === t ? L : K)([ e, t, i, n, r, s ]);
        }
        function oe(e) {
            return At[e];
        }
        function le() {
            var t = (t = f.indexOf) === ke ? e : t;
            return t;
        }
        function he(e) {
            return "function" == typeof e && ot.test(e);
        }
        function ue(e) {
            var t, i;
            return !!(e && at.call(e) == U && (t = e.constructor, !me(t) || t instanceof t)) && (Bt(e, function(e, t) {
                i = t;
            }), void 0 === i || dt.call(e, i));
        }
        function pe(e) {
            return kt[e];
        }
        function ce(e) {
            return e && "object" == typeof e && "number" == typeof e.length && at.call(e) == k || !1;
        }
        function de(e, t, i) {
            var n = Ft(e), r = n.length;
            for (t = $(t, i, 3); r--; ) {
                var s = n[r];
                if (!1 === t(e[s], s, e)) break;
            }
            return e;
        }
        function fe(e) {
            var t = [];
            return Bt(e, function(e, i) {
                me(e) && t.push(i);
            }), t.sort();
        }
        function ye(e) {
            for (var t = -1, i = Ft(e), n = i.length, r = {}; ++t < n; ) {
                var s = i[t];
                r[e[s]] = s;
            }
            return r;
        }
        function me(e) {
            return "function" == typeof e;
        }
        function ge(e) {
            return !(!e || !q[typeof e]);
        }
        function ve(e) {
            return "number" == typeof e || e && "object" == typeof e && at.call(e) == B || !1;
        }
        function Le(e) {
            return "string" == typeof e || e && "object" == typeof e && at.call(e) == H || !1;
        }
        function Oe(e) {
            for (var t = -1, i = Ft(e), n = i.length, r = Xe(n); ++t < n; ) r[t] = e[i[t]];
            return r;
        }
        function be(e, t, i) {
            var n = -1, r = le(), s = e ? e.length : 0, a = !1;
            return i = (i < 0 ? St(0, s + i) : i) || 0, Mt(e) ? a = r(e, t, i) > -1 : "number" == typeof s ? a = (Le(e) ? e.indexOf(t, i) : r(e, t, i)) > -1 : Ut(e, function(e) {
                if (++n >= i) return !(a = e === t);
            }), a;
        }
        function we(e, t, i) {
            var n = !0;
            t = f.createCallback(t, i, 3);
            var r = -1, s = e ? e.length : 0;
            if ("number" == typeof s) for (;++r < s && (n = !!t(e[r], r, e)); ) ; else Ut(e, function(e, i, r) {
                return n = !!t(e, i, r);
            });
            return n;
        }
        function Ce(e, t, i) {
            var n = [];
            t = f.createCallback(t, i, 3);
            var r = -1, s = e ? e.length : 0;
            if ("number" == typeof s) for (;++r < s; ) {
                var a = e[r];
                t(a, r, e) && n.push(a);
            } else Ut(e, function(e, i, r) {
                t(e, i, r) && n.push(e);
            });
            return n;
        }
        function Se(e, t, i) {
            t = f.createCallback(t, i, 3);
            var n = -1, r = e ? e.length : 0;
            if ("number" != typeof r) {
                var s;
                return Ut(e, function(e, i, n) {
                    if (t(e, i, n)) return s = e, !1;
                }), s;
            }
            for (;++n < r; ) {
                var a = e[n];
                if (t(a, n, e)) return a;
            }
        }
        function xe(e, t, i) {
            var n = -1, r = e ? e.length : 0;
            if (t = t && void 0 === i ? t : $(t, i, 3), "number" == typeof r) for (;++n < r && !1 !== t(e[n], n, e); ) ; else Ut(e, t);
            return e;
        }
        function _e(e, t, i) {
            var n = e ? e.length : 0;
            if (t = t && void 0 === i ? t : $(t, i, 3), "number" == typeof n) for (;n-- && !1 !== t(e[n], n, e); ) ; else {
                var r = Ft(e);
                n = r.length, Ut(e, function(e, i, s) {
                    return i = r ? r[--n] : --n, t(s[i], i, s);
                });
            }
            return e;
        }
        function Ee(e, t, i) {
            var n = -1, r = e ? e.length : 0;
            if (t = f.createCallback(t, i, 3), "number" == typeof r) for (var s = Xe(r); ++n < r; ) s[n] = t(e[n], n, e); else s = [], 
            Ut(e, function(e, i, r) {
                s[++n] = t(e, i, r);
            });
            return s;
        }
        function Ne(e, t, i) {
            var r = -1 / 0, s = r;
            if ("function" != typeof t && i && i[t] === e && (t = null), null == t && Mt(e)) for (var a = -1, o = e.length; ++a < o; ) {
                var l = e[a];
                l > s && (s = l);
            } else t = null == t && Le(e) ? n : f.createCallback(t, i, 3), xe(e, function(e, i, n) {
                var a = t(e, i, n);
                a > r && (r = a, s = e);
            });
            return s;
        }
        function Pe(e, t, i, n) {
            if (!e) return i;
            var r = arguments.length < 3;
            t = f.createCallback(t, n, 4);
            var s = -1, a = e.length;
            if ("number" == typeof a) for (r && (i = e[++s]); ++s < a; ) i = t(i, e[s], s, e); else Ut(e, function(e, n, s) {
                i = r ? (r = !1, e) : t(i, e, n, s);
            });
            return i;
        }
        function Te(e, t, i, n) {
            var r = arguments.length < 3;
            return t = f.createCallback(t, n, 4), _e(e, function(e, n, s) {
                i = r ? (r = !1, e) : t(i, e, n, s);
            }), i;
        }
        function Me(e) {
            var t = -1, i = e ? e.length : 0, n = Xe("number" == typeof i ? i : 0);
            return xe(e, function(e) {
                var i = ne(0, ++t);
                n[t] = n[i], n[i] = e;
            }), n;
        }
        function Fe(e, t, i) {
            var n;
            t = f.createCallback(t, i, 3);
            var r = -1, s = e ? e.length : 0;
            if ("number" == typeof s) for (;++r < s && !(n = t(e[r], r, e)); ) ; else Ut(e, function(e, i, r) {
                return !(n = t(e, i, r));
            });
            return !!n;
        }
        function Ae(e, t, i) {
            var n = 0, r = e ? e.length : 0;
            if ("number" != typeof t && null != t) {
                var s = -1;
                for (t = f.createCallback(t, i, 3); ++s < r && t(e[s], s, e); ) n++;
            } else if (null == (n = t) || i) return e ? e[0] : d;
            return p(e, 0, xt(St(0, n), r));
        }
        function ke(t, i, n) {
            if ("number" == typeof n) {
                var r = t ? t.length : 0;
                n = n < 0 ? St(0, r + n) : n || 0;
            } else if (n) {
                var s = Re(t, i);
                return t[s] === i ? s : -1;
            }
            return e(t, i, n);
        }
        function Ie(e, t, i) {
            if ("number" != typeof t && null != t) {
                var n = 0, r = -1, s = e ? e.length : 0;
                for (t = f.createCallback(t, i, 3); ++r < s && t(e[r], r, e); ) n++;
            } else n = null == t || i ? 1 : St(0, t);
            return p(e, n);
        }
        function Re(e, t, i, n) {
            var r = 0, s = e ? e.length : r;
            for (t = (i = i ? f.createCallback(i, n, 1) : He)(t); r < s; ) {
                var a = r + s >>> 1;
                i(e[a]) < t ? r = a + 1 : s = a;
            }
            return r;
        }
        function De(e, t, i, n) {
            return "boolean" != typeof t && null != t && (n = i, i = "function" != typeof t && n && n[t] === e ? null : t, 
            t = !1), null != i && (i = f.createCallback(i, n, 3)), re(e, t, i);
        }
        function ze() {
            for (var e = arguments.length > 1 ? arguments : arguments[0], t = -1, i = e ? Ne(Wt(e, "length")) : 0, n = Xe(i < 0 ? 0 : i); ++t < i; ) n[t] = Wt(e, t);
            return n;
        }
        function Be(e, t) {
            var i = -1, n = e ? e.length : 0, r = {};
            for (t || !n || Mt(e[0]) || (t = []); ++i < n; ) {
                var s = e[i];
                t ? r[s] = t[i] : s && (r[s[0]] = s[1]);
            }
            return r;
        }
        function Ue(e, t) {
            return arguments.length > 2 ? ae(e, 17, p(arguments, 2), null, t) : ae(e, 1, null, null, t);
        }
        function Ge(e, t, i) {
            var n, r, s, a, o, l, h, u = 0, p = !1, c = !0;
            if (!me(e)) throw new it();
            if (t = St(0, t) || 0, !0 === i) {
                var f = !0;
                c = !1;
            } else ge(i) && (f = i.leading, p = "maxWait" in i && (St(t, i.maxWait) || 0), c = "trailing" in i ? i.trailing : c);
            var y = function() {
                var i = t - (Xt() - a);
                if (i <= 0) {
                    r && ht(r);
                    var p = h;
                    r = l = h = d, p && (u = Xt(), s = e.apply(o, n), l || r || (n = o = null));
                } else l = yt(y, i);
            }, m = function() {
                l && ht(l), r = l = h = d, (c || p !== t) && (u = Xt(), s = e.apply(o, n), l || r || (n = o = null));
            };
            return function() {
                if (n = arguments, a = Xt(), o = this, h = c && (l || !f), !1 === p) var i = f && !l; else {
                    r || f || (u = a);
                    var d = p - (a - u), g = d <= 0;
                    g ? (r && (r = ht(r)), u = a, s = e.apply(o, n)) : r || (r = yt(m, d));
                }
                return g && l ? l = ht(l) : l || t === p || (l = yt(y, t)), i && (g = !0, s = e.apply(o, n)), 
                !g || l || r || (n = o = null), s;
            };
        }
        function He(e) {
            return e;
        }
        function je(e, t, i) {
            var n = !0, r = t && fe(t);
            t && (i || r.length) || (null == i && (i = t), s = y, t = e, e = f, r = fe(t)), 
            !1 === i ? n = !1 : ge(i) && "chain" in i && (n = i.chain);
            var s = e, a = me(s);
            xe(r, function(i) {
                var r = e[i] = t[i];
                a && (s.prototype[i] = function() {
                    var t = this.__chain__, i = this.__wrapped__, a = [ i ];
                    ft.apply(a, arguments);
                    var o = r.apply(e, a);
                    if (n || t) {
                        if (i === o && ge(o)) return this;
                        (o = new s(o)).__chain__ = t;
                    }
                    return o;
                });
            });
        }
        function Ve() {}
        function We(e) {
            return function(t) {
                return t[e];
            };
        }
        function qe() {
            return this.__wrapped__;
        }
        var Xe = (i = i ? J.defaults(Z.Object(), i, J.pick(Z, F)) : Z).Array, Ze = i.Boolean, Ye = i.Date, $e = i.Function, Ke = i.Math, Qe = i.Number, Je = i.Object, et = i.RegExp, tt = i.String, it = i.TypeError, nt = [], rt = Je.prototype, st = i._, at = rt.toString, ot = et("^" + tt(at).replace(/[.*+?^${}()|[\]\\]/g, "\\$&").replace(/toString| for [^\]]+/g, ".*?") + "$"), lt = Ke.ceil, ht = i.clearTimeout, ut = Ke.floor, pt = $e.prototype.toString, ct = he(ct = Je.getPrototypeOf) && ct, dt = rt.hasOwnProperty, ft = nt.push, yt = i.setTimeout, mt = nt.splice, gt = nt.unshift, vt = function() {
            try {
                var e = {}, t = he(t = Je.defineProperty) && t, i = t(e, e, e) && t;
            } catch (e) {}
            return i;
        }(), Lt = he(Lt = Je.create) && Lt, Ot = he(Ot = Xe.isArray) && Ot, bt = i.isFinite, wt = i.isNaN, Ct = he(Ct = Je.keys) && Ct, St = Ke.max, xt = Ke.min, _t = i.parseInt, Et = Ke.random, Nt = {};
        Nt[I] = Xe, Nt[R] = Ze, Nt[D] = Ye, Nt[z] = $e, Nt[U] = Je, Nt[B] = Qe, Nt[G] = et, 
        Nt[H] = tt, y.prototype = f.prototype;
        var Pt = f.support = {};
        Pt.funcDecomp = !he(i.WinRTError) && T.test(c), Pt.funcNames = "string" == typeof $e.name, 
        f.templateSettings = {
            "escape": /<%-([\s\S]+?)%>/g,
            "evaluate": /<%([\s\S]+?)%>/g,
            "interpolate": E,
            "variable": "",
            "imports": {
                "_": f
            }
        }, Lt || (Y = function() {
            function e() {}
            return function(t) {
                if (ge(t)) {
                    e.prototype = t;
                    var n = new e();
                    e.prototype = null;
                }
                return n || i.Object();
            };
        }());
        var Tt = vt ? function(e, t) {
            W.value = t, vt(e, "__bindData__", W), W.value = null;
        } : Ve, Mt = Ot || function(e) {
            return e && "object" == typeof e && "number" == typeof e.length && at.call(e) == I || !1;
        }, Ft = Ct ? function(e) {
            return ge(e) ? Ct(e) : [];
        } : function(e) {
            var t, i = e, n = [];
            if (!i) return n;
            if (!q[typeof e]) return n;
            for (t in i) dt.call(i, t) && n.push(t);
            return n;
        }, At = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;"
        }, kt = ye(At), It = et("(" + Ft(kt).join("|") + ")", "g"), Rt = et("[" + Ft(At).join("") + "]", "g"), Dt = function(e, t, i) {
            var n, r = e, s = r;
            if (!r) return s;
            var a = arguments, o = 0, l = "number" == typeof i ? 2 : a.length;
            if (l > 3 && "function" == typeof a[l - 2]) var h = $(a[--l - 1], a[l--], 2); else l > 2 && "function" == typeof a[l - 1] && (h = a[--l]);
            for (;++o < l; ) if ((r = a[o]) && q[typeof r]) for (var u = -1, p = q[typeof r] && Ft(r), c = p ? p.length : 0; ++u < c; ) s[n = p[u]] = h ? h(s[n], r[n]) : r[n];
            return s;
        }, zt = function(e, t, i) {
            var n, r = e, s = r;
            if (!r) return s;
            for (var a = arguments, o = 0, l = "number" == typeof i ? 2 : a.length; ++o < l; ) if ((r = a[o]) && q[typeof r]) for (var h = -1, u = q[typeof r] && Ft(r), p = u ? u.length : 0; ++h < p; ) void 0 === s[n = u[h]] && (s[n] = r[n]);
            return s;
        }, Bt = function(e, t, i) {
            var n, r = e, s = r;
            if (!r) return s;
            if (!q[typeof r]) return s;
            t = t && void 0 === i ? t : $(t, i, 3);
            for (n in r) if (!1 === t(r[n], n, e)) return s;
            return s;
        }, Ut = function(e, t, i) {
            var n, r = e, s = r;
            if (!r) return s;
            if (!q[typeof r]) return s;
            t = t && void 0 === i ? t : $(t, i, 3);
            for (var a = -1, o = q[typeof r] && Ft(r), l = o ? o.length : 0; ++a < l; ) if (n = o[a], 
            !1 === t(r[n], n, e)) return s;
            return s;
        }, Gt = ct ? function(e) {
            if (!e || at.call(e) != U) return !1;
            var t = e.valueOf, i = he(t) && (i = ct(t)) && ct(i);
            return i ? e == i || ct(e) == i : ue(e);
        } : ue, Ht = se(function(e, t, i) {
            dt.call(e, i) ? e[i]++ : e[i] = 1;
        }), jt = se(function(e, t, i) {
            (dt.call(e, i) ? e[i] : e[i] = []).push(t);
        }), Vt = se(function(e, t, i) {
            e[i] = t;
        }), Wt = Ee, qt = Ce, Xt = he(Xt = Ye.now) && Xt || function() {
            return new Ye().getTime();
        }, Zt = 8 == _t(O + "08") ? _t : function(e, t) {
            return _t(Le(e) ? e.replace(N, "") : e, t || 0);
        };
        return f.after = function(e, t) {
            if (!me(t)) throw new it();
            return function() {
                if (--e < 1) return t.apply(this, arguments);
            };
        }, f.assign = Dt, f.at = function(e) {
            for (var t = arguments, i = -1, n = ee(t, !0, !1, 1), r = t[2] && t[2][t[1]] === e ? 1 : n.length, s = Xe(r); ++i < r; ) s[i] = e[n[i]];
            return s;
        }, f.bind = Ue, f.bindAll = function(e) {
            for (var t = arguments.length > 1 ? ee(arguments, !0, !1, 1) : fe(e), i = -1, n = t.length; ++i < n; ) {
                var r = t[i];
                e[r] = ae(e[r], 1, null, null, e);
            }
            return e;
        }, f.bindKey = function(e, t) {
            return arguments.length > 2 ? ae(t, 19, p(arguments, 2), null, e) : ae(t, 3, null, null, e);
        }, f.chain = function(e) {
            return e = new y(e), e.__chain__ = !0, e;
        }, f.compact = function(e) {
            for (var t = -1, i = e ? e.length : 0, n = []; ++t < i; ) {
                var r = e[t];
                r && n.push(r);
            }
            return n;
        }, f.compose = function() {
            for (var e = arguments, t = e.length; t--; ) if (!me(e[t])) throw new it();
            return function() {
                for (var t = arguments, i = e.length; i--; ) t = [ e[i].apply(this, t) ];
                return t[0];
            };
        }, f.constant = function(e) {
            return function() {
                return e;
            };
        }, f.countBy = Ht, f.create = function(e, t) {
            var i = Y(e);
            return t ? Dt(i, t) : i;
        }, f.createCallback = function(e, t, i) {
            var n = typeof e;
            if (null == e || "function" == n) return $(e, t, i);
            if ("object" != n) return We(e);
            var r = Ft(e), s = r[0], a = e[s];
            return 1 != r.length || a !== a || ge(a) ? function(t) {
                for (var i = r.length, n = !1; i-- && (n = te(t[r[i]], e[r[i]], null, !0)); ) ;
                return n;
            } : function(e) {
                var t = e[s];
                return a === t && (0 !== a || 1 / a == 1 / t);
            };
        }, f.curry = function(e, t) {
            return t = "number" == typeof t ? t : +t || e.length, ae(e, 4, null, null, null, t);
        }, f.debounce = Ge, f.defaults = zt, f.defer = function(e) {
            if (!me(e)) throw new it();
            var t = p(arguments, 1);
            return yt(function() {
                e.apply(d, t);
            }, 1);
        }, f.delay = function(e, t) {
            if (!me(e)) throw new it();
            var i = p(arguments, 2);
            return yt(function() {
                e.apply(d, i);
            }, t);
        }, f.difference = function(e) {
            return Q(e, ee(arguments, !0, !0, 1));
        }, f.filter = Ce, f.flatten = function(e, t, i, n) {
            return "boolean" != typeof t && null != t && (n = i, i = "function" != typeof t && n && n[t] === e ? null : t, 
            t = !1), null != i && (e = Ee(e, i, n)), ee(e, t);
        }, f.forEach = xe, f.forEachRight = _e, f.forIn = Bt, f.forInRight = function(e, t, i) {
            var n = [];
            Bt(e, function(e, t) {
                n.push(t, e);
            });
            var r = n.length;
            for (t = $(t, i, 3); r-- && !1 !== t(n[r--], n[r], e); ) ;
            return e;
        }, f.forOwn = Ut, f.forOwnRight = de, f.functions = fe, f.groupBy = jt, f.indexBy = Vt, 
        f.initial = function(e, t, i) {
            var n = 0, r = e ? e.length : 0;
            if ("number" != typeof t && null != t) {
                var s = r;
                for (t = f.createCallback(t, i, 3); s-- && t(e[s], s, e); ) n++;
            } else n = null == t || i ? 1 : t || n;
            return p(e, 0, xt(St(0, r - n), r));
        }, f.intersection = function() {
            for (var i = [], n = -1, r = arguments.length, a = o(), l = le(), p = l === e, c = o(); ++n < r; ) {
                var d = arguments[n];
                (Mt(d) || ce(d)) && (i.push(d), a.push(p && d.length >= v && s(n ? i[n] : c)));
            }
            var f = i[0], y = -1, m = f ? f.length : 0, g = [];
            e: for (;++y < m; ) {
                var L = a[0];
                if (d = f[y], (L ? t(L, d) : l(c, d)) < 0) {
                    for (n = r, (L || c).push(d); --n; ) if (((L = a[n]) ? t(L, d) : l(i[n], d)) < 0) continue e;
                    g.push(d);
                }
            }
            for (;r--; ) (L = a[r]) && u(L);
            return h(a), h(c), g;
        }, f.invert = ye, f.invoke = function(e, t) {
            var i = p(arguments, 2), n = -1, r = "function" == typeof t, s = e ? e.length : 0, a = Xe("number" == typeof s ? s : 0);
            return xe(e, function(e) {
                a[++n] = (r ? t : e[t]).apply(e, i);
            }), a;
        }, f.keys = Ft, f.map = Ee, f.mapValues = function(e, t, i) {
            var n = {};
            return t = f.createCallback(t, i, 3), Ut(e, function(e, i, r) {
                n[i] = t(e, i, r);
            }), n;
        }, f.max = Ne, f.memoize = function(e, t) {
            if (!me(e)) throw new it();
            var i = function() {
                var n = i.cache, r = t ? t.apply(this, arguments) : g + arguments[0];
                return dt.call(n, r) ? n[r] : n[r] = e.apply(this, arguments);
            };
            return i.cache = {}, i;
        }, f.merge = function(e) {
            var t = arguments, i = 2;
            if (!ge(e)) return e;
            if ("number" != typeof t[2] && (i = t.length), i > 3 && "function" == typeof t[i - 2]) var n = $(t[--i - 1], t[i--], 2); else i > 2 && "function" == typeof t[i - 1] && (n = t[--i]);
            for (var r = p(arguments, 1, i), s = -1, a = o(), l = o(); ++s < i; ) ie(e, r[s], n, a, l);
            return h(a), h(l), e;
        }, f.min = function(e, t, i) {
            var r = 1 / 0, s = r;
            if ("function" != typeof t && i && i[t] === e && (t = null), null == t && Mt(e)) for (var a = -1, o = e.length; ++a < o; ) {
                var l = e[a];
                l < s && (s = l);
            } else t = null == t && Le(e) ? n : f.createCallback(t, i, 3), xe(e, function(e, i, n) {
                var a = t(e, i, n);
                a < r && (r = a, s = e);
            });
            return s;
        }, f.omit = function(e, t, i) {
            var n = {};
            if ("function" != typeof t) {
                var r = [];
                Bt(e, function(e, t) {
                    r.push(t);
                });
                for (var s = -1, a = (r = Q(r, ee(arguments, !0, !1, 1))).length; ++s < a; ) {
                    var o = r[s];
                    n[o] = e[o];
                }
            } else t = f.createCallback(t, i, 3), Bt(e, function(e, i, r) {
                t(e, i, r) || (n[i] = e);
            });
            return n;
        }, f.once = function(e) {
            var t, i;
            if (!me(e)) throw new it();
            return function() {
                return t ? i : (t = !0, i = e.apply(this, arguments), e = null, i);
            };
        }, f.pairs = function(e) {
            for (var t = -1, i = Ft(e), n = i.length, r = Xe(n); ++t < n; ) {
                var s = i[t];
                r[t] = [ s, e[s] ];
            }
            return r;
        }, f.partial = function(e) {
            return ae(e, 16, p(arguments, 1));
        }, f.partialRight = function(e) {
            return ae(e, 32, null, p(arguments, 1));
        }, f.pick = function(e, t, i) {
            var n = {};
            if ("function" != typeof t) for (var r = -1, s = ee(arguments, !0, !1, 1), a = ge(e) ? s.length : 0; ++r < a; ) {
                var o = s[r];
                o in e && (n[o] = e[o]);
            } else t = f.createCallback(t, i, 3), Bt(e, function(e, i, r) {
                t(e, i, r) && (n[i] = e);
            });
            return n;
        }, f.pluck = Wt, f.property = We, f.pull = function(e) {
            for (var t = arguments, i = 0, n = t.length, r = e ? e.length : 0; ++i < n; ) for (var s = -1, a = t[i]; ++s < r; ) e[s] === a && (mt.call(e, s--, 1), 
            r--);
            return e;
        }, f.range = function(e, t, i) {
            e = +e || 0, i = "number" == typeof i ? i : +i || 1, null == t && (t = e, e = 0);
            for (var n = -1, r = St(0, lt((t - e) / (i || 1))), s = Xe(r); ++n < r; ) s[n] = e, 
            e += i;
            return s;
        }, f.reject = function(e, t, i) {
            return t = f.createCallback(t, i, 3), Ce(e, function(e, i, n) {
                return !t(e, i, n);
            });
        }, f.remove = function(e, t, i) {
            var n = -1, r = e ? e.length : 0, s = [];
            for (t = f.createCallback(t, i, 3); ++n < r; ) {
                var a = e[n];
                t(a, n, e) && (s.push(a), mt.call(e, n--, 1), r--);
            }
            return s;
        }, f.rest = Ie, f.shuffle = Me, f.sortBy = function(e, t, i) {
            var n = -1, s = Mt(t), a = e ? e.length : 0, p = Xe("number" == typeof a ? a : 0);
            for (s || (t = f.createCallback(t, i, 3)), xe(e, function(e, i, r) {
                var a = p[++n] = l();
                s ? a.criteria = Ee(t, function(t) {
                    return e[t];
                }) : (a.criteria = o())[0] = t(e, i, r), a.index = n, a.value = e;
            }), a = p.length, p.sort(r); a--; ) {
                var c = p[a];
                p[a] = c.value, s || h(c.criteria), u(c);
            }
            return p;
        }, f.tap = function(e, t) {
            return t(e), e;
        }, f.throttle = function(e, t, i) {
            var n = !0, r = !0;
            if (!me(e)) throw new it();
            return !1 === i ? n = !1 : ge(i) && (n = "leading" in i ? i.leading : n, r = "trailing" in i ? i.trailing : r), 
            V.leading = n, V.maxWait = t, V.trailing = r, Ge(e, t, V);
        }, f.times = function(e, t, i) {
            e = (e = +e) > -1 ? e : 0;
            var n = -1, r = Xe(e);
            for (t = $(t, i, 1); ++n < e; ) r[n] = t(n);
            return r;
        }, f.toArray = function(e) {
            return e && "number" == typeof e.length ? p(e) : Oe(e);
        }, f.transform = function(e, t, i, n) {
            var r = Mt(e);
            if (null == i) if (r) i = []; else {
                var s = e && e.constructor, a = s && s.prototype;
                i = Y(a);
            }
            return t && (t = f.createCallback(t, n, 4), (r ? xe : Ut)(e, function(e, n, r) {
                return t(i, e, n, r);
            })), i;
        }, f.union = function() {
            return re(ee(arguments, !0, !0));
        }, f.uniq = De, f.values = Oe, f.where = qt, f.without = function(e) {
            return Q(e, p(arguments, 1));
        }, f.wrap = function(e, t) {
            return ae(t, 16, [ e ]);
        }, f.xor = function() {
            for (var e = -1, t = arguments.length; ++e < t; ) {
                var i = arguments[e];
                if (Mt(i) || ce(i)) var n = n ? re(Q(n, i).concat(Q(i, n))) : i;
            }
            return n || [];
        }, f.zip = ze, f.zipObject = Be, f.collect = Ee, f.drop = Ie, f.each = xe, f.eachRight = _e, 
        f.extend = Dt, f.methods = fe, f.object = Be, f.select = Ce, f.tail = Ie, f.unique = De, 
        f.unzip = ze, je(f), f.clone = function(e, t, i, n) {
            return "boolean" != typeof t && null != t && (n = i, i = t, t = !1), X(e, t, "function" == typeof i && $(i, n, 1));
        }, f.cloneDeep = function(e, t, i) {
            return X(e, !0, "function" == typeof t && $(t, i, 1));
        }, f.contains = be, f.escape = function(e) {
            return null == e ? "" : tt(e).replace(Rt, oe);
        }, f.every = we, f.find = Se, f.findIndex = function(e, t, i) {
            var n = -1, r = e ? e.length : 0;
            for (t = f.createCallback(t, i, 3); ++n < r; ) if (t(e[n], n, e)) return n;
            return -1;
        }, f.findKey = function(e, t, i) {
            var n;
            return t = f.createCallback(t, i, 3), Ut(e, function(e, i, r) {
                if (t(e, i, r)) return n = i, !1;
            }), n;
        }, f.findLast = function(e, t, i) {
            var n;
            return t = f.createCallback(t, i, 3), _e(e, function(e, i, r) {
                if (t(e, i, r)) return n = e, !1;
            }), n;
        }, f.findLastIndex = function(e, t, i) {
            var n = e ? e.length : 0;
            for (t = f.createCallback(t, i, 3); n--; ) if (t(e[n], n, e)) return n;
            return -1;
        }, f.findLastKey = function(e, t, i) {
            var n;
            return t = f.createCallback(t, i, 3), de(e, function(e, i, r) {
                if (t(e, i, r)) return n = i, !1;
            }), n;
        }, f.has = function(e, t) {
            return !!e && dt.call(e, t);
        }, f.identity = He, f.indexOf = ke, f.isArguments = ce, f.isArray = Mt, f.isBoolean = function(e) {
            return !0 === e || !1 === e || e && "object" == typeof e && at.call(e) == R || !1;
        }, f.isDate = function(e) {
            return e && "object" == typeof e && at.call(e) == D || !1;
        }, f.isElement = function(e) {
            return e && 1 === e.nodeType || !1;
        }, f.isEmpty = function(e) {
            var t = !0;
            if (!e) return t;
            var i = at.call(e), n = e.length;
            return i == I || i == H || i == k || i == U && "number" == typeof n && me(e.splice) ? !n : (Ut(e, function() {
                return t = !1;
            }), t);
        }, f.isEqual = function(e, t, i, n) {
            return te(e, t, "function" == typeof i && $(i, n, 2));
        }, f.isFinite = function(e) {
            return bt(e) && !wt(parseFloat(e));
        }, f.isFunction = me, f.isNaN = function(e) {
            return ve(e) && e != +e;
        }, f.isNull = function(e) {
            return null === e;
        }, f.isNumber = ve, f.isObject = ge, f.isPlainObject = Gt, f.isRegExp = function(e) {
            return e && "object" == typeof e && at.call(e) == G || !1;
        }, f.isString = Le, f.isUndefined = function(e) {
            return void 0 === e;
        }, f.lastIndexOf = function(e, t, i) {
            var n = e ? e.length : 0;
            for ("number" == typeof i && (n = (i < 0 ? St(0, n + i) : xt(i, n - 1)) + 1); n--; ) if (e[n] === t) return n;
            return -1;
        }, f.mixin = je, f.noConflict = function() {
            return i._ = st, this;
        }, f.noop = Ve, f.now = Xt, f.parseInt = Zt, f.random = function(e, t, i) {
            var n = null == e, r = null == t;
            if (null == i && ("boolean" == typeof e && r ? (i = e, e = 1) : r || "boolean" != typeof t || (i = t, 
            r = !0)), n && r && (t = 1), e = +e || 0, r ? (t = e, e = 0) : t = +t || 0, i || e % 1 || t % 1) {
                var s = Et();
                return xt(e + s * (t - e + parseFloat("1e-" + ((s + "").length - 1))), t);
            }
            return ne(e, t);
        }, f.reduce = Pe, f.reduceRight = Te, f.result = function(e, t) {
            if (e) {
                var i = e[t];
                return me(i) ? e[t]() : i;
            }
        }, f.runInContext = c, f.size = function(e) {
            var t = e ? e.length : 0;
            return "number" == typeof t ? t : Ft(e).length;
        }, f.some = Fe, f.sortedIndex = Re, f.template = function(e, t, i) {
            var n = f.templateSettings;
            e = tt(e || ""), i = zt({}, i, n);
            var r, s = zt({}, i.imports, n.imports), o = Ft(s), l = Oe(s), h = 0, u = i.interpolate || P, p = "__p += '", c = et((i.escape || P).source + "|" + u.source + "|" + (u === E ? S : P).source + "|" + (i.evaluate || P).source + "|$", "g");
            e.replace(c, function(t, i, n, s, o, l) {
                return n || (n = s), p += e.slice(h, l).replace(M, a), i && (p += "' +\n__e(" + i + ") +\n'"), 
                o && (r = !0, p += "';\n" + o + ";\n__p += '"), n && (p += "' +\n((__t = (" + n + ")) == null ? '' : __t) +\n'"), 
                h = l + t.length, t;
            }), p += "';\n";
            var y = i.variable, m = y;
            m || (p = "with (" + (y = "obj") + ") {\n" + p + "\n}\n"), p = (r ? p.replace(b, "") : p).replace(w, "$1").replace(C, "$1;"), 
            p = "function(" + y + ") {\n" + (m ? "" : y + " || (" + y + " = {});\n") + "var __t, __p = '', __e = _.escape" + (r ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n" : ";\n") + p + "return __p\n}";
            var g = "\n/*\n//# sourceURL=" + (i.sourceURL || "/lodash/template/source[" + A++ + "]") + "\n*/";
            try {
                var v = $e(o, "return " + p + g).apply(d, l);
            } catch (e) {
                throw e.source = p, e;
            }
            return t ? v(t) : (v.source = p, v);
        }, f.unescape = function(e) {
            return null == e ? "" : tt(e).replace(It, pe);
        }, f.uniqueId = function(e) {
            var t = ++m;
            return tt(null == e ? "" : e) + t;
        }, f.all = we, f.any = Fe, f.detect = Se, f.findWhere = Se, f.foldl = Pe, f.foldr = Te, 
        f.include = be, f.inject = Pe, je(function() {
            var e = {};
            return Ut(f, function(t, i) {
                f.prototype[i] || (e[i] = t);
            }), e;
        }(), !1), f.first = Ae, f.last = function(e, t, i) {
            var n = 0, r = e ? e.length : 0;
            if ("number" != typeof t && null != t) {
                var s = r;
                for (t = f.createCallback(t, i, 3); s-- && t(e[s], s, e); ) n++;
            } else if (null == (n = t) || i) return e ? e[r - 1] : d;
            return p(e, St(0, r - n));
        }, f.sample = function(e, t, i) {
            if (e && "number" != typeof e.length && (e = Oe(e)), null == t || i) return e ? e[ne(0, e.length - 1)] : d;
            var n = Me(e);
            return n.length = xt(St(0, t), n.length), n;
        }, f.take = Ae, f.head = Ae, Ut(f, function(e, t) {
            var i = "sample" !== t;
            f.prototype[t] || (f.prototype[t] = function(t, n) {
                var r = this.__chain__, s = e(this.__wrapped__, t, n);
                return r || null != t && (!n || i && "function" == typeof t) ? new y(s, r) : s;
            });
        }), f.VERSION = "2.4.2", f.prototype.chain = function() {
            return this.__chain__ = !0, this;
        }, f.prototype.toString = function() {
            return tt(this.__wrapped__);
        }, f.prototype.value = qe, f.prototype.valueOf = qe, xe([ "join", "pop", "shift" ], function(e) {
            var t = nt[e];
            f.prototype[e] = function() {
                var e = this.__chain__, i = t.apply(this.__wrapped__, arguments);
                return e ? new y(i, e) : i;
            };
        }), xe([ "push", "reverse", "sort", "unshift" ], function(e) {
            var t = nt[e];
            f.prototype[e] = function() {
                return t.apply(this.__wrapped__, arguments), this;
            };
        }), xe([ "concat", "slice", "splice" ], function(e) {
            var t = nt[e];
            f.prototype[e] = function() {
                return new y(t.apply(this.__wrapped__, arguments), this.__chain__);
            };
        }), f;
    }
    var d, f = [], y = [], m = 0, g = +new Date() + "", v = 75, L = 40, O = " \t\v\f\ufeff\n\r\u2028\u2029", b = /\b__p \+= '';/g, w = /\b(__p \+=) '' \+/g, C = /(__e\(.*?\)|\b__t\)) \+\n'';/g, S = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, x = /\w*$/, _ = /^\s*function[ \n\r\t]+\w/, E = /<%=([\s\S]+?)%>/g, N = RegExp("^[" + O + "]*0+(?=.$)"), P = /($^)/, T = /\bthis\b/, M = /['\n\r\t\u2028\u2029\\]/g, F = [ "Array", "Boolean", "Date", "Function", "Math", "Number", "Object", "RegExp", "String", "_", "attachEvent", "clearTimeout", "isFinite", "isNaN", "parseInt", "setTimeout" ], A = 0, k = "[object Arguments]", I = "[object Array]", R = "[object Boolean]", D = "[object Date]", z = "[object Function]", B = "[object Number]", U = "[object Object]", G = "[object RegExp]", H = "[object String]", j = {};
    j[z] = !1, j[k] = j[I] = j[R] = j[D] = j[B] = j[U] = j[G] = j[H] = !0;
    var V = {
        "leading": !1,
        "maxWait": 0,
        "trailing": !1
    }, W = {
        "configurable": !1,
        "enumerable": !1,
        "value": null,
        "writable": !1
    }, q = {
        "boolean": !1,
        "function": !0,
        "object": !0,
        "number": !1,
        "string": !1,
        "undefined": !1
    }, X = {
        "\\": "\\",
        "'": "'",
        "\n": "n",
        "\r": "r",
        "\t": "t",
        "\u2028": "u2028",
        "\u2029": "u2029"
    }, Z = q[typeof window] && window || this, Y = q[typeof exports] && exports && !exports.nodeType && exports, $ = q[typeof module] && module && !module.nodeType && module, K = $ && $.exports === Y && Y, Q = q[typeof global] && global;
    !Q || Q.global !== Q && Q.window !== Q || (Z = Q);
    var J = c();
    "function" == typeof define && "object" == typeof define.amd && define.amd ? (Z._ = J, 
    define(function() {
        return J;
    })) : Y && $ ? K ? ($.exports = J)._ = J : Y._ = J : Z._ = J;
}.call(this), function(e, t) {
    "use strict";
    function i(e, t) {
        var i, n, r = e.toLowerCase();
        for (t = [].concat(t), i = 0; i < t.length; i += 1) if (n = t[i]) {
            if (n.test && n.test(e)) return !0;
            if (n.toLowerCase() === r) return !0;
        }
    }
    var n = t.prototype.trim, r = t.prototype.trimRight, s = t.prototype.trimLeft, a = function(e) {
        return 1 * e || 0;
    }, o = function(e, t) {
        if (t < 1) return "";
        for (var i = ""; t > 0; ) 1 & t && (i += e), t >>= 1, e += e;
        return i;
    }, l = [].slice, h = function(e) {
        return null == e ? "\\s" : e.source ? e.source : "[" + f.escapeRegExp(e) + "]";
    }, u = {
        "lt": "<",
        "gt": ">",
        "quot": '"',
        "amp": "&",
        "apos": "'"
    }, p = {};
    for (var c in u) p[u[c]] = c;
    p["'"] = "#39";
    var d = function() {
        function e(e) {
            return Object.prototype.toString.call(e).slice(8, -1).toLowerCase();
        }
        var i = o, n = function() {
            return n.cache.hasOwnProperty(arguments[0]) || (n.cache[arguments[0]] = n.parse(arguments[0])), 
            n.format.call(null, n.cache[arguments[0]], arguments);
        };
        return n.format = function(n, r) {
            var s, a, o, l, h, u, p, c = 1, f = n.length, y = "", m = [];
            for (a = 0; a < f; a++) if ("string" === (y = e(n[a]))) m.push(n[a]); else if ("array" === y) {
                if ((l = n[a])[2]) for (s = r[c], o = 0; o < l[2].length; o++) {
                    if (!s.hasOwnProperty(l[2][o])) throw new Error(d('[_.sprintf] property "%s" does not exist', l[2][o]));
                    s = s[l[2][o]];
                } else s = l[1] ? r[l[1]] : r[c++];
                if (/[^s]/.test(l[8]) && "number" != e(s)) throw new Error(d("[_.sprintf] expecting number but found %s", e(s)));
                switch (l[8]) {
                  case "b":
                    s = s.toString(2);
                    break;

                  case "c":
                    s = t.fromCharCode(s);
                    break;

                  case "d":
                    s = parseInt(s, 10);
                    break;

                  case "e":
                    s = l[7] ? s.toExponential(l[7]) : s.toExponential();
                    break;

                  case "f":
                    s = l[7] ? parseFloat(s).toFixed(l[7]) : parseFloat(s);
                    break;

                  case "o":
                    s = s.toString(8);
                    break;

                  case "s":
                    s = (s = t(s)) && l[7] ? s.substring(0, l[7]) : s;
                    break;

                  case "u":
                    s = Math.abs(s);
                    break;

                  case "x":
                    s = s.toString(16);
                    break;

                  case "X":
                    s = s.toString(16).toUpperCase();
                }
                s = /[def]/.test(l[8]) && l[3] && s >= 0 ? "+" + s : s, u = l[4] ? "0" == l[4] ? "0" : l[4].charAt(1) : " ", 
                p = l[6] - t(s).length, h = l[6] ? i(u, p) : "", m.push(l[5] ? s + h : h + s);
            }
            return m.join("");
        }, n.cache = {}, n.parse = function(e) {
            for (var t = e, i = [], n = [], r = 0; t; ) {
                if (null !== (i = /^[^\x25]+/.exec(t))) n.push(i[0]); else if (null !== (i = /^\x25{2}/.exec(t))) n.push("%"); else {
                    if (null === (i = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))) throw new Error("[_.sprintf] huh?");
                    if (i[2]) {
                        r |= 1;
                        var s = [], a = i[2], o = [];
                        if (null === (o = /^([a-z_][a-z_\d]*)/i.exec(a))) throw new Error("[_.sprintf] huh?");
                        for (s.push(o[1]); "" !== (a = a.substring(o[0].length)); ) if (null !== (o = /^\.([a-z_][a-z_\d]*)/i.exec(a))) s.push(o[1]); else {
                            if (null === (o = /^\[(\d+)\]/.exec(a))) throw new Error("[_.sprintf] huh?");
                            s.push(o[1]);
                        }
                        i[2] = s;
                    } else r |= 2;
                    if (3 === r) throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");
                    n.push(i);
                }
                t = t.substring(i[0].length);
            }
            return n;
        }, n;
    }(), f = {
        "VERSION": "2.3.0",
        "isBlank": function(e) {
            return null == e && (e = ""), /^\s*$/.test(e);
        },
        "stripTags": function(e) {
            return null == e ? "" : t(e).replace(/<\/?[^>]+>/g, "");
        },
        "capitalize": function(e) {
            return (e = null == e ? "" : t(e)).charAt(0).toUpperCase() + e.slice(1);
        },
        "chop": function(e, i) {
            return null == e ? [] : (e = t(e), (i = ~~i) > 0 ? e.match(new RegExp(".{1," + i + "}", "g")) : [ e ]);
        },
        "clean": function(e) {
            return f.strip(e).replace(/\s+/g, " ");
        },
        "count": function(e, i) {
            if (null == e || null == i) return 0;
            e = t(e);
            for (var n = 0, r = 0, s = (i = t(i)).length; ;) {
                if (-1 === (r = e.indexOf(i, r))) break;
                n++, r += s;
            }
            return n;
        },
        "chars": function(e) {
            return null == e ? [] : t(e).split("");
        },
        "swapCase": function(e) {
            return null == e ? "" : t(e).replace(/\S/g, function(e) {
                return e === e.toUpperCase() ? e.toLowerCase() : e.toUpperCase();
            });
        },
        "escapeHTML": function(e) {
            return null == e ? "" : t(e).replace(/[&<>"']/g, function(e) {
                return "&" + p[e] + ";";
            });
        },
        "unescapeHTML": function(e) {
            return null == e ? "" : t(e).replace(/\&([^;]+);/g, function(e, i) {
                var n;
                return i in u ? u[i] : (n = i.match(/^#x([\da-fA-F]+)$/)) ? t.fromCharCode(parseInt(n[1], 16)) : (n = i.match(/^#(\d+)$/)) ? t.fromCharCode(~~n[1]) : e;
            });
        },
        "escapeRegExp": function(e) {
            return null == e ? "" : t(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1");
        },
        "splice": function(e, t, i, n) {
            var r = f.chars(e);
            return r.splice(~~t, ~~i, n), r.join("");
        },
        "insert": function(e, t, i) {
            return f.splice(e, t, 0, i);
        },
        "include": function(e, i) {
            return "" === i || null != e && -1 !== t(e).indexOf(i);
        },
        "join": function() {
            var e = l.call(arguments), t = e.shift();
            return null == t && (t = ""), e.join(t);
        },
        "lines": function(e) {
            return null == e ? [] : t(e).split("\n");
        },
        "reverse": function(e) {
            return f.chars(e).reverse().join("");
        },
        "startsWith": function(e, i) {
            return "" === i || null != e && null != i && (e = t(e), i = t(i), e.length >= i.length && e.slice(0, i.length) === i);
        },
        "endsWith": function(e, i) {
            return "" === i || null != e && null != i && (e = t(e), i = t(i), e.length >= i.length && e.slice(e.length - i.length) === i);
        },
        "succ": function(e) {
            return null == e ? "" : (e = t(e)).slice(0, -1) + t.fromCharCode(e.charCodeAt(e.length - 1) + 1);
        },
        "titleize": function(e) {
            return null == e ? "" : (e = t(e).toLowerCase()).replace(/(?:^|\s|-)\S/g, function(e) {
                return e.toUpperCase();
            });
        },
        "camelize": function(e) {
            return f.trim(e).replace(/[-_\s]+(.)?/g, function(e, t) {
                return t ? t.toUpperCase() : "";
            });
        },
        "underscored": function(e) {
            return f.trim(e).replace(/([a-z\d])([A-Z]+)/g, "$1_$2").replace(/[-\s]+/g, "_").toLowerCase();
        },
        "dasherize": function(e) {
            return f.trim(e).replace(/([A-Z])/g, "-$1").replace(/[-_\s]+/g, "-").toLowerCase();
        },
        "classify": function(e) {
            return f.titleize(t(e).replace(/[\W_]/g, " ")).replace(/\s/g, "");
        },
        "humanize": function(e) {
            return f.capitalize(f.underscored(e).replace(/_id$/, "").replace(/_/g, " "));
        },
        "trim": function(e, i) {
            return null == e ? "" : !i && n ? n.call(e) : (i = h(i), t(e).replace(new RegExp("^" + i + "+|" + i + "+$", "g"), ""));
        },
        "ltrim": function(e, i) {
            return null == e ? "" : !i && s ? s.call(e) : (i = h(i), t(e).replace(new RegExp("^" + i + "+"), ""));
        },
        "rtrim": function(e, i) {
            return null == e ? "" : !i && r ? r.call(e) : (i = h(i), t(e).replace(new RegExp(i + "+$"), ""));
        },
        "truncate": function(e, i, n) {
            return null == e ? "" : (e = t(e), n = n || "...", i = ~~i, e.length > i ? e.slice(0, i) + n : e);
        },
        "prune": function(e, i, n) {
            if (null == e) return "";
            if (e = t(e), i = ~~i, n = null != n ? t(n) : "...", e.length <= i) return e;
            var r = e.slice(0, i + 1).replace(/.(?=\W*\w*$)/g, function(e) {
                return e.toUpperCase() !== e.toLowerCase() ? "A" : " ";
            });
            return ((r = r.slice(r.length - 2).match(/\w\w/) ? r.replace(/\s*\S+$/, "") : f.rtrim(r.slice(0, r.length - 1))) + n).length > e.length ? e : e.slice(0, r.length) + n;
        },
        "words": function(e, t) {
            return f.isBlank(e) ? [] : f.trim(e, t).split(t || /\s+/);
        },
        "pad": function(e, i, n, r) {
            e = null == e ? "" : t(e), i = ~~i;
            var s = 0;
            switch (n ? n.length > 1 && (n = n.charAt(0)) : n = " ", r) {
              case "right":
                return s = i - e.length, e + o(n, s);

              case "both":
                return s = i - e.length, o(n, Math.ceil(s / 2)) + e + o(n, Math.floor(s / 2));

              default:
                return s = i - e.length, o(n, s) + e;
            }
        },
        "lpad": function(e, t, i) {
            return f.pad(e, t, i);
        },
        "rpad": function(e, t, i) {
            return f.pad(e, t, i, "right");
        },
        "lrpad": function(e, t, i) {
            return f.pad(e, t, i, "both");
        },
        "sprintf": d,
        "vsprintf": function(e, t) {
            return t.unshift(e), d.apply(null, t);
        },
        "toNumber": function(e, t) {
            return e ? (e = f.trim(e)).match(/^-?\d+(?:\.\d+)?$/) ? a(a(e).toFixed(~~t)) : NaN : 0;
        },
        "numberFormat": function(e, t, i, n) {
            if (isNaN(e) || null == e) return "";
            e = e.toFixed(~~t), n = "string" == typeof n ? n : ",";
            var r = e.split("."), s = r[0], a = r[1] ? (i || ".") + r[1] : "";
            return s.replace(/(\d)(?=(?:\d{3})+$)/g, "$1" + n) + a;
        },
        "strRight": function(e, i) {
            if (null == e) return "";
            e = t(e);
            var n = (i = null != i ? t(i) : i) ? e.indexOf(i) : -1;
            return ~n ? e.slice(n + i.length, e.length) : e;
        },
        "strRightBack": function(e, i) {
            if (null == e) return "";
            e = t(e);
            var n = (i = null != i ? t(i) : i) ? e.lastIndexOf(i) : -1;
            return ~n ? e.slice(n + i.length, e.length) : e;
        },
        "strLeft": function(e, i) {
            if (null == e) return "";
            e = t(e);
            var n = (i = null != i ? t(i) : i) ? e.indexOf(i) : -1;
            return ~n ? e.slice(0, n) : e;
        },
        "strLeftBack": function(e, t) {
            if (null == e) return "";
            e += "", t = null != t ? "" + t : t;
            var i = e.lastIndexOf(t);
            return ~i ? e.slice(0, i) : e;
        },
        "toSentence": function(e, t, i, n) {
            t = t || ", ", i = i || " and ";
            var r = e.slice(), s = r.pop();
            return e.length > 2 && n && (i = f.rtrim(t) + i), r.length ? r.join(t) + i + s : s;
        },
        "toSentenceSerial": function() {
            var e = l.call(arguments);
            return e[3] = !0, f.toSentence.apply(f, e);
        },
        "slugify": function(e) {
            if (null == e) return "";
            var i = "", n = new RegExp(h(i), "g");
            return e = t(e).toLowerCase().replace(n, function(e) {
                var t = i.indexOf(e);
                return "aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz".charAt(t) || "-";
            }), f.dasherize(e.replace(/[^\w\s-]/g, ""));
        },
        "surround": function(e, t) {
            return [ t, e, t ].join("");
        },
        "quote": function(e, t) {
            return f.surround(e, t || '"');
        },
        "unquote": function(e, t) {
            return t = t || '"', e[0] === t && e[e.length - 1] === t ? e.slice(1, e.length - 1) : e;
        },
        "exports": function() {
            var e = {};
            for (var t in this) this.hasOwnProperty(t) && !t.match(/^(?:include|contains|reverse)$/) && (e[t] = this[t]);
            return e;
        },
        "repeat": function(e, i, n) {
            if (null == e) return "";
            if (i = ~~i, null == n) return o(t(e), i);
            for (var r = []; i > 0; r[--i] = e) ;
            return r.join(n);
        },
        "naturalCmp": function(e, i) {
            if (e == i) return 0;
            if (!e) return -1;
            if (!i) return 1;
            for (var n = /(\.\d+)|(\d+)|(\D+)/g, r = t(e).toLowerCase().match(n), s = t(i).toLowerCase().match(n), a = Math.min(r.length, s.length), o = 0; o < a; o++) {
                var l = r[o], h = s[o];
                if (l !== h) {
                    var u = parseInt(l, 10);
                    if (!isNaN(u)) {
                        var p = parseInt(h, 10);
                        if (!isNaN(p) && u - p) return u - p;
                    }
                    return l < h ? -1 : 1;
                }
            }
            return r.length === s.length ? r.length - s.length : e < i ? -1 : 1;
        },
        "levenshtein": function(e, i) {
            if (null == e && null == i) return 0;
            if (null == e) return t(i).length;
            if (null == i) return t(e).length;
            e = t(e), i = t(i);
            for (var n, r, s = [], a = 0; a <= i.length; a++) for (var o = 0; o <= e.length; o++) r = a && o ? e.charAt(o - 1) === i.charAt(a - 1) ? n : Math.min(s[o], s[o - 1], n) + 1 : a + o, 
            n = s[o], s[o] = r;
            return s.pop();
        },
        "toBoolean": function(e, t, n) {
            return "number" == typeof e && (e = "" + e), "string" != typeof e ? !!e : (e = f.trim(e), 
            !!i(e, t || [ "true", "1" ]) || !i(e, n || [ "false", "0" ]) && void 0);
        }
    };
    f.strip = f.trim, f.lstrip = f.ltrim, f.rstrip = f.rtrim, f.center = f.lrpad, f.rjust = f.lpad, 
    f.ljust = f.rpad, f.contains = f.include, f.q = f.quote, f.toBool = f.toBoolean, 
    "undefined" != typeof exports && ("undefined" != typeof module && module.exports && (module.exports = f), 
    exports._s = f), "function" == typeof define && define.amd && define("underscore.string", [], function() {
        return f;
    }), e._ = e._ || {}, e._.string = e._.str = f;
}(this, String), function(e, t) {
    if ("function" == typeof define && define.amd) define([ "underscore", "jquery", "exports" ], function(i, n, r) {
        e.Backbone = t(e, r, i, n);
    }); else if ("undefined" != typeof exports) {
        var i = require("underscore");
        t(e, exports, i);
    } else e.Backbone = t(e, {}, e._, e.jQuery || e.Zepto || e.ender || e.$);
}(this, function(e, t, i, n) {
    var r = e.Backbone, s = [], a = s.slice;
    t.VERSION = "1.1.2", t.$ = n, t.noConflict = function() {
        return e.Backbone = r, this;
    }, t.emulateHTTP = !1, t.emulateJSON = !1;
    var o = t.Events = {
        "on": function(e, t, i) {
            return h(this, "on", e, [ t, i ]) && t ? (this._events || (this._events = {}), (this._events[e] || (this._events[e] = [])).push({
                "callback": t,
                "context": i,
                "ctx": i || this
            }), this) : this;
        },
        "once": function(e, t, n) {
            if (!h(this, "once", e, [ t, n ]) || !t) return this;
            var r = this, s = i.once(function() {
                r.off(e, s), t.apply(this, arguments);
            });
            return s._callback = t, this.on(e, s, n);
        },
        "off": function(e, t, n) {
            var r, s, a, o, l, u, p, c;
            if (!this._events || !h(this, "off", e, [ t, n ])) return this;
            if (!e && !t && !n) return this._events = void 0, this;
            for (l = 0, u = (o = e ? [ e ] : i.keys(this._events)).length; l < u; l++) if (e = o[l], 
            a = this._events[e]) {
                if (this._events[e] = r = [], t || n) for (p = 0, c = a.length; p < c; p++) s = a[p], 
                (t && t !== s.callback && t !== s.callback._callback || n && n !== s.context) && r.push(s);
                r.length || delete this._events[e];
            }
            return this;
        },
        "trigger": function(e) {
            if (!this._events) return this;
            var t = a.call(arguments, 1);
            if (!h(this, "trigger", e, t)) return this;
            var i = this._events[e], n = this._events.all;
            return i && u(i, t), n && u(n, arguments), this;
        },
        "stopListening": function(e, t, n) {
            var r = this._listeningTo;
            if (!r) return this;
            var s = !t && !n;
            n || "object" != typeof t || (n = this), e && ((r = {})[e._listenId] = e);
            for (var a in r) (e = r[a]).off(t, n, this), (s || i.isEmpty(e._events)) && delete this._listeningTo[a];
            return this;
        }
    }, l = /\s+/, h = function(e, t, i, n) {
        if (!i) return !0;
        if ("object" == typeof i) {
            for (var r in i) e[t].apply(e, [ r, i[r] ].concat(n));
            return !1;
        }
        if (l.test(i)) {
            for (var s = i.split(l), a = 0, o = s.length; a < o; a++) e[t].apply(e, [ s[a] ].concat(n));
            return !1;
        }
        return !0;
    }, u = function(e, t) {
        var i, n = -1, r = e.length, s = t[0], a = t[1], o = t[2];
        switch (t.length) {
          case 0:
            for (;++n < r; ) (i = e[n]).callback.call(i.ctx);
            return;

          case 1:
            for (;++n < r; ) (i = e[n]).callback.call(i.ctx, s);
            return;

          case 2:
            for (;++n < r; ) (i = e[n]).callback.call(i.ctx, s, a);
            return;

          case 3:
            for (;++n < r; ) (i = e[n]).callback.call(i.ctx, s, a, o);
            return;

          default:
            for (;++n < r; ) (i = e[n]).callback.apply(i.ctx, t);
            return;
        }
    }, p = {
        "listenTo": "on",
        "listenToOnce": "once"
    };
    i.each(p, function(e, t) {
        o[t] = function(t, n, r) {
            return (this._listeningTo || (this._listeningTo = {}))[t._listenId || (t._listenId = i.uniqueId("l"))] = t, 
            r || "object" != typeof n || (r = this), t[e](n, r, this), this;
        };
    }), o.bind = o.on, o.unbind = o.off, i.extend(t, o);
    var c = t.Model = function(e, t) {
        var n = e || {};
        t || (t = {}), this.cid = i.uniqueId("c"), this.attributes = {}, t.collection && (this.collection = t.collection), 
        t.parse && (n = this.parse(n, t) || {}), n = i.defaults({}, n, i.result(this, "defaults")), 
        this.set(n, t), this.changed = {}, this.initialize.apply(this, arguments);
    };
    i.extend(c.prototype, o, {
        "changed": null,
        "validationError": null,
        "idAttribute": "id",
        "initialize": function() {},
        "toJSON": function(e) {
            return i.clone(this.attributes);
        },
        "sync": function() {
            return t.sync.apply(this, arguments);
        },
        "get": function(e) {
            return this.attributes[e];
        },
        "escape": function(e) {
            return i.escape(this.get(e));
        },
        "has": function(e) {
            return null != this.get(e);
        },
        "set": function(e, t, n) {
            var r, s, a, o, l, h, u, p;
            if (null == e) return this;
            if ("object" == typeof e ? (s = e, n = t) : (s = {})[e] = t, n || (n = {}), !this._validate(s, n)) return !1;
            a = n.unset, l = n.silent, o = [], h = this._changing, this._changing = !0, h || (this._previousAttributes = i.clone(this.attributes), 
            this.changed = {}), p = this.attributes, u = this._previousAttributes, this.idAttribute in s && (this.id = s[this.idAttribute]);
            for (r in s) t = s[r], i.isEqual(p[r], t) || o.push(r), i.isEqual(u[r], t) ? delete this.changed[r] : this.changed[r] = t, 
            a ? delete p[r] : p[r] = t;
            if (!l) {
                o.length && (this._pending = n);
                for (var c = 0, d = o.length; c < d; c++) this.trigger("change:" + o[c], this, p[o[c]], n);
            }
            if (h) return this;
            if (!l) for (;this._pending; ) n = this._pending, this._pending = !1, this.trigger("change", this, n);
            return this._pending = !1, this._changing = !1, this;
        },
        "unset": function(e, t) {
            return this.set(e, void 0, i.extend({}, t, {
                "unset": !0
            }));
        },
        "clear": function(e) {
            var t = {};
            for (var n in this.attributes) t[n] = void 0;
            return this.set(t, i.extend({}, e, {
                "unset": !0
            }));
        },
        "hasChanged": function(e) {
            return null == e ? !i.isEmpty(this.changed) : i.has(this.changed, e);
        },
        "changedAttributes": function(e) {
            if (!e) return !!this.hasChanged() && i.clone(this.changed);
            var t, n = !1, r = this._changing ? this._previousAttributes : this.attributes;
            for (var s in e) i.isEqual(r[s], t = e[s]) || ((n || (n = {}))[s] = t);
            return n;
        },
        "previous": function(e) {
            return null != e && this._previousAttributes ? this._previousAttributes[e] : null;
        },
        "previousAttributes": function() {
            return i.clone(this._previousAttributes);
        },
        "fetch": function(e) {
            void 0 === (e = e ? i.clone(e) : {}).parse && (e.parse = !0);
            var t = this, n = e.success;
            return e.success = function(i) {
                if (!t.set(t.parse(i, e), e)) return !1;
                n && n(t, i, e), t.trigger("sync", t, i, e);
            }, R(this, e), this.sync("read", this, e);
        },
        "save": function(e, t, n) {
            var r, s, a, o = this.attributes;
            if (null == e || "object" == typeof e ? (r = e, n = t) : (r = {})[e] = t, n = i.extend({
                "validate": !0
            }, n), r && !n.wait) {
                if (!this.set(r, n)) return !1;
            } else if (!this._validate(r, n)) return !1;
            r && n.wait && (this.attributes = i.extend({}, o, r)), void 0 === n.parse && (n.parse = !0);
            var l = this, h = n.success;
            return n.success = function(e) {
                l.attributes = o;
                var t = l.parse(e, n);
                if (n.wait && (t = i.extend(r || {}, t)), i.isObject(t) && !l.set(t, n)) return !1;
                h && h(l, e, n), l.trigger("sync", l, e, n);
            }, R(this, n), "patch" === (s = this.isNew() ? "create" : n.patch ? "patch" : "update") && (n.attrs = r), 
            a = this.sync(s, this, n), r && n.wait && (this.attributes = o), a;
        },
        "destroy": function(e) {
            var t = this, n = (e = e ? i.clone(e) : {}).success, r = function() {
                t.trigger("destroy", t, t.collection, e);
            };
            if (e.success = function(i) {
                (e.wait || t.isNew()) && r(), n && n(t, i, e), t.isNew() || t.trigger("sync", t, i, e);
            }, this.isNew()) return e.success(), !1;
            R(this, e);
            var s = this.sync("delete", this, e);
            return e.wait || r(), s;
        },
        "url": function() {
            var e = i.result(this, "urlRoot") || i.result(this.collection, "url") || I();
            return this.isNew() ? e : e.replace(/([^\/])$/, "$1/") + encodeURIComponent(this.id);
        },
        "parse": function(e, t) {
            return e;
        },
        "clone": function() {
            return new this.constructor(this.attributes);
        },
        "isNew": function() {
            return !this.has(this.idAttribute);
        },
        "isValid": function(e) {
            return this._validate({}, i.extend(e || {}, {
                "validate": !0
            }));
        },
        "_validate": function(e, t) {
            if (!t.validate || !this.validate) return !0;
            e = i.extend({}, this.attributes, e);
            var n = this.validationError = this.validate(e, t) || null;
            return !n || (this.trigger("invalid", this, n, i.extend(t, {
                "validationError": n
            })), !1);
        }
    });
    var d = [ "keys", "values", "pairs", "invert", "pick", "omit" ];
    i.each(d, function(e) {
        c.prototype[e] = function() {
            var t = a.call(arguments);
            return t.unshift(this.attributes), i[e].apply(i, t);
        };
    });
    var f = t.Collection = function(e, t) {
        t || (t = {}), t.model && (this.model = t.model), void 0 !== t.comparator && (this.comparator = t.comparator), 
        this._reset(), this.initialize.apply(this, arguments), e && this.reset(e, i.extend({
            "silent": !0
        }, t));
    }, y = {
        "add": !0,
        "remove": !0,
        "merge": !0
    }, m = {
        "add": !0,
        "remove": !1
    };
    i.extend(f.prototype, o, {
        "model": c,
        "initialize": function() {},
        "toJSON": function(e) {
            return this.map(function(t) {
                return t.toJSON(e);
            });
        },
        "sync": function() {
            return t.sync.apply(this, arguments);
        },
        "add": function(e, t) {
            return this.set(e, i.extend({
                "merge": !1
            }, t, m));
        },
        "remove": function(e, t) {
            var n = !i.isArray(e);
            e = n ? [ e ] : i.clone(e), t || (t = {});
            var r, s, a, o;
            for (r = 0, s = e.length; r < s; r++) (o = e[r] = this.get(e[r])) && (delete this._byId[o.id], 
            delete this._byId[o.cid], a = this.indexOf(o), this.models.splice(a, 1), this.length--, 
            t.silent || (t.index = a, o.trigger("remove", o, this, t)), this._removeReference(o, t));
            return n ? e[0] : e;
        },
        "set": function(e, t) {
            (t = i.defaults({}, t, y)).parse && (e = this.parse(e, t));
            var n = !i.isArray(e);
            e = n ? e ? [ e ] : [] : i.clone(e);
            var r, s, a, o, l, h, u, p = t.at, d = this.model, f = this.comparator && null == p && !1 !== t.sort, m = i.isString(this.comparator) ? this.comparator : null, g = [], v = [], L = {}, O = t.add, b = t.merge, w = t.remove, C = !(f || !O || !w) && [];
            for (r = 0, s = e.length; r < s; r++) {
                if (l = e[r] || {}, a = l instanceof c ? o = l : l[d.prototype.idAttribute || "id"], 
                h = this.get(a)) w && (L[h.cid] = !0), b && (l = l === o ? o.attributes : l, t.parse && (l = h.parse(l, t)), 
                h.set(l, t), f && !u && h.hasChanged(m) && (u = !0)), e[r] = h; else if (O) {
                    if (!(o = e[r] = this._prepareModel(l, t))) continue;
                    g.push(o), this._addReference(o, t);
                }
                o = h || o, !C || !o.isNew() && L[o.id] || C.push(o), L[o.id] = !0;
            }
            if (w) {
                for (r = 0, s = this.length; r < s; ++r) L[(o = this.models[r]).cid] || v.push(o);
                v.length && this.remove(v, t);
            }
            if (g.length || C && C.length) if (f && (u = !0), this.length += g.length, null != p) for (r = 0, 
            s = g.length; r < s; r++) this.models.splice(p + r, 0, g[r]); else {
                C && (this.models.length = 0);
                var S = C || g;
                for (r = 0, s = S.length; r < s; r++) this.models.push(S[r]);
            }
            if (u && this.sort({
                "silent": !0
            }), !t.silent) {
                for (r = 0, s = g.length; r < s; r++) (o = g[r]).trigger("add", o, this, t);
                (u || C && C.length) && this.trigger("sort", this, t);
            }
            return n ? e[0] : e;
        },
        "reset": function(e, t) {
            t || (t = {});
            for (var n = 0, r = this.models.length; n < r; n++) this._removeReference(this.models[n], t);
            return t.previousModels = this.models, this._reset(), e = this.add(e, i.extend({
                "silent": !0
            }, t)), t.silent || this.trigger("reset", this, t), e;
        },
        "push": function(e, t) {
            return this.add(e, i.extend({
                "at": this.length
            }, t));
        },
        "pop": function(e) {
            var t = this.at(this.length - 1);
            return this.remove(t, e), t;
        },
        "unshift": function(e, t) {
            return this.add(e, i.extend({
                "at": 0
            }, t));
        },
        "shift": function(e) {
            var t = this.at(0);
            return this.remove(t, e), t;
        },
        "slice": function() {
            return a.apply(this.models, arguments);
        },
        "get": function(e) {
            if (null != e) return this._byId[e] || this._byId[e.id] || this._byId[e.cid];
        },
        "at": function(e) {
            return this.models[e];
        },
        "where": function(e, t) {
            return i.isEmpty(e) ? t ? void 0 : [] : this[t ? "find" : "filter"](function(t) {
                for (var i in e) if (e[i] !== t.get(i)) return !1;
                return !0;
            });
        },
        "findWhere": function(e) {
            return this.where(e, !0);
        },
        "sort": function(e) {
            if (!this.comparator) throw new Error("Cannot sort a set without a comparator");
            return e || (e = {}), i.isString(this.comparator) || 1 === this.comparator.length ? this.models = this.sortBy(this.comparator, this) : this.models.sort(i.bind(this.comparator, this)), 
            e.silent || this.trigger("sort", this, e), this;
        },
        "pluck": function(e) {
            return i.invoke(this.models, "get", e);
        },
        "fetch": function(e) {
            void 0 === (e = e ? i.clone(e) : {}).parse && (e.parse = !0);
            var t = e.success, n = this;
            return e.success = function(i) {
                var r = e.reset ? "reset" : "set";
                n[r](i, e), t && t(n, i, e), n.trigger("sync", n, i, e);
            }, R(this, e), this.sync("read", this, e);
        },
        "create": function(e, t) {
            if (t = t ? i.clone(t) : {}, !(e = this._prepareModel(e, t))) return !1;
            t.wait || this.add(e, t);
            var n = this, r = t.success;
            return t.success = function(e, i) {
                t.wait && n.add(e, t), r && r(e, i, t);
            }, e.save(null, t), e;
        },
        "parse": function(e, t) {
            return e;
        },
        "clone": function() {
            return new this.constructor(this.models);
        },
        "_reset": function() {
            this.length = 0, this.models = [], this._byId = {};
        },
        "_prepareModel": function(e, t) {
            if (e instanceof c) return e;
            (t = t ? i.clone(t) : {}).collection = this;
            var n = new this.model(e, t);
            return n.validationError ? (this.trigger("invalid", this, n.validationError, t), 
            !1) : n;
        },
        "_addReference": function(e, t) {
            this._byId[e.cid] = e, null != e.id && (this._byId[e.id] = e), e.collection || (e.collection = this), 
            e.on("all", this._onModelEvent, this);
        },
        "_removeReference": function(e, t) {
            this === e.collection && delete e.collection, e.off("all", this._onModelEvent, this);
        },
        "_onModelEvent": function(e, t, i, n) {
            ("add" !== e && "remove" !== e || i === this) && ("destroy" === e && this.remove(t, n), 
            t && e === "change:" + t.idAttribute && (delete this._byId[t.previous(t.idAttribute)], 
            null != t.id && (this._byId[t.id] = t)), this.trigger.apply(this, arguments));
        }
    });
    var g = [ "forEach", "each", "map", "collect", "reduce", "foldl", "inject", "reduceRight", "foldr", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "max", "min", "toArray", "size", "first", "head", "take", "initial", "rest", "tail", "drop", "last", "without", "difference", "indexOf", "shuffle", "lastIndexOf", "isEmpty", "chain", "sample" ];
    i.each(g, function(e) {
        f.prototype[e] = function() {
            var t = a.call(arguments);
            return t.unshift(this.models), i[e].apply(i, t);
        };
    });
    var v = [ "groupBy", "countBy", "sortBy", "indexBy" ];
    i.each(v, function(e) {
        f.prototype[e] = function(t, n) {
            var r = i.isFunction(t) ? t : function(e) {
                return e.get(t);
            };
            return i[e](this.models, r, n);
        };
    });
    var L = t.View = function(e) {
        this.cid = i.uniqueId("view"), e || (e = {}), i.extend(this, i.pick(e, b)), this._ensureElement(), 
        this.initialize.apply(this, arguments), this.delegateEvents();
    }, O = /^(\S+)\s*(.*)$/, b = [ "model", "collection", "el", "id", "attributes", "className", "tagName", "events" ];
    i.extend(L.prototype, o, {
        "tagName": "div",
        "$": function(e) {
            return this.$el.find(e);
        },
        "initialize": function() {},
        "render": function() {
            return this;
        },
        "remove": function() {
            return this.$el.remove(), this.stopListening(), this;
        },
        "setElement": function(e, i) {
            return this.$el && this.undelegateEvents(), this.$el = e instanceof t.$ ? e : t.$(e), 
            this.el = this.$el[0], !1 !== i && this.delegateEvents(), this;
        },
        "delegateEvents": function(e) {
            if (!e && !(e = i.result(this, "events"))) return this;
            this.undelegateEvents();
            for (var t in e) {
                var n = e[t];
                if (i.isFunction(n) || (n = this[e[t]]), n) {
                    var r = t.match(O), s = r[1], a = r[2];
                    n = i.bind(n, this), s += ".delegateEvents" + this.cid, "" === a ? this.$el.on(s, n) : this.$el.on(s, a, n);
                }
            }
            return this;
        },
        "undelegateEvents": function() {
            return this.$el.off(".delegateEvents" + this.cid), this;
        },
        "_ensureElement": function() {
            if (this.el) this.setElement(i.result(this, "el"), !1); else {
                var e = i.extend({}, i.result(this, "attributes"));
                this.id && (e.id = i.result(this, "id")), this.className && (e.class = i.result(this, "className"));
                var n = t.$("<" + i.result(this, "tagName") + ">").attr(e);
                this.setElement(n, !1);
            }
        }
    }), t.sync = function(e, n, r) {
        var s = C[e];
        i.defaults(r || (r = {}), {
            "emulateHTTP": t.emulateHTTP,
            "emulateJSON": t.emulateJSON
        });
        var a = {
            "type": s,
            "dataType": "json"
        };
        if (r.url || (a.url = i.result(n, "url") || I()), null != r.data || !n || "create" !== e && "update" !== e && "patch" !== e || (a.contentType = "application/json", 
        a.data = JSON.stringify(r.attrs || n.toJSON(r))), r.emulateJSON && (a.contentType = "application/x-www-form-urlencoded", 
        a.data = a.data ? {
            "model": a.data
        } : {}), r.emulateHTTP && ("PUT" === s || "DELETE" === s || "PATCH" === s)) {
            a.type = "POST", r.emulateJSON && (a.data._method = s);
            var o = r.beforeSend;
            r.beforeSend = function(e) {
                if (e.setRequestHeader("X-HTTP-Method-Override", s), o) return o.apply(this, arguments);
            };
        }
        "GET" === a.type || r.emulateJSON || (a.processData = !1), "PATCH" === a.type && w && (a.xhr = function() {
            return new ActiveXObject("Microsoft.XMLHTTP");
        });
        var l = r.xhr = t.ajax(i.extend(a, r));
        return n.trigger("request", n, l, r), l;
    };
    var w = !("undefined" == typeof window || !window.ActiveXObject || window.XMLHttpRequest && new XMLHttpRequest().dispatchEvent), C = {
        "create": "POST",
        "update": "PUT",
        "patch": "PATCH",
        "delete": "DELETE",
        "read": "GET"
    };
    t.ajax = function() {
        return t.$.ajax.apply(t.$, arguments);
    };
    var S = t.Router = function(e) {
        e || (e = {}), e.routes && (this.routes = e.routes), this._bindRoutes(), this.initialize.apply(this, arguments);
    }, x = /\((.*?)\)/g, _ = /(\(\?)?:\w+/g, E = /\*\w+/g, N = /[\-{}\[\]+?.,\\\^$|#\s]/g;
    i.extend(S.prototype, o, {
        "initialize": function() {},
        "route": function(e, n, r) {
            i.isRegExp(e) || (e = this._routeToRegExp(e)), i.isFunction(n) && (r = n, n = ""), 
            r || (r = this[n]);
            var s = this;
            return t.history.route(e, function(i) {
                var a = s._extractParameters(e, i);
                s.execute(r, a), s.trigger.apply(s, [ "route:" + n ].concat(a)), s.trigger("route", n, a), 
                t.history.trigger("route", s, n, a);
            }), this;
        },
        "execute": function(e, t) {
            e && e.apply(this, t);
        },
        "navigate": function(e, i) {
            return t.history.navigate(e, i), this;
        },
        "_bindRoutes": function() {
            if (this.routes) {
                this.routes = i.result(this, "routes");
                for (var e, t = i.keys(this.routes); null != (e = t.pop()); ) this.route(e, this.routes[e]);
            }
        },
        "_routeToRegExp": function(e) {
            return e = e.replace(N, "\\$&").replace(x, "(?:$1)?").replace(_, function(e, t) {
                return t ? e : "([^/?]+)";
            }).replace(E, "([^?]*?)"), new RegExp("^" + e + "(?:\\?([\\s\\S]*))?$");
        },
        "_extractParameters": function(e, t) {
            var n = e.exec(t).slice(1);
            return i.map(n, function(e, t) {
                return t === n.length - 1 ? e || null : e ? decodeURIComponent(e) : null;
            });
        }
    });
    var P = t.History = function() {
        this.handlers = [], i.bindAll(this, "checkUrl"), "undefined" != typeof window && (this.location = window.location, 
        this.history = window.history);
    }, T = /^[#\/]|\s+$/g, M = /^\/+|\/+$/g, F = /msie [\w.]+/, A = /\/$/, k = /#.*$/;
    P.started = !1, i.extend(P.prototype, o, {
        "interval": 50,
        "atRoot": function() {
            return this.location.pathname.replace(/[^\/]$/, "$&/") === this.root;
        },
        "getHash": function(e) {
            var t = (e || this).location.href.match(/#(.*)$/);
            return t ? t[1] : "";
        },
        "getFragment": function(e, t) {
            if (null == e) if (this._hasPushState || !this._wantsHashChange || t) {
                e = decodeURI(this.location.pathname + this.location.search);
                var i = this.root.replace(A, "");
                e.indexOf(i) || (e = e.slice(i.length));
            } else e = this.getHash();
            return e.replace(T, "");
        },
        "start": function(e) {
            if (P.started) throw new Error("Backbone.history has already been started");
            P.started = !0, this.options = i.extend({
                "root": "/"
            }, this.options, e), this.root = this.options.root, this._wantsHashChange = !1 !== this.options.hashChange, 
            this._wantsPushState = !!this.options.pushState, this._hasPushState = !!(this.options.pushState && this.history && this.history.pushState);
            var n = this.getFragment(), r = document.documentMode, s = F.exec(navigator.userAgent.toLowerCase()) && (!r || r <= 7);
            if (this.root = ("/" + this.root + "/").replace(M, "/"), s && this._wantsHashChange) {
                var a = t.$('<iframe src="javascript:0" tabindex="-1">');
                this.iframe = a.hide().appendTo("body")[0].contentWindow, this.navigate(n);
            }
            this._hasPushState ? t.$(window).on("popstate", this.checkUrl) : this._wantsHashChange && "onhashchange" in window && !s ? t.$(window).on("hashchange", this.checkUrl) : this._wantsHashChange && (this._checkUrlInterval = setInterval(this.checkUrl, this.interval)), 
            this.fragment = n;
            var o = this.location;
            if (this._wantsHashChange && this._wantsPushState) {
                if (!this._hasPushState && !this.atRoot()) return this.fragment = this.getFragment(null, !0), 
                this.location.replace(this.root + "#" + this.fragment), !0;
                this._hasPushState && this.atRoot() && o.hash && (this.fragment = this.getHash().replace(T, ""), 
                this.history.replaceState({}, document.title, this.root + this.fragment));
            }
            if (!this.options.silent) return this.loadUrl();
        },
        "stop": function() {
            t.$(window).off("popstate", this.checkUrl).off("hashchange", this.checkUrl), this._checkUrlInterval && clearInterval(this._checkUrlInterval), 
            P.started = !1;
        },
        "route": function(e, t) {
            this.handlers.unshift({
                "route": e,
                "callback": t
            });
        },
        "checkUrl": function(e) {
            var t = this.getFragment();
            if (t === this.fragment && this.iframe && (t = this.getFragment(this.getHash(this.iframe))), 
            t === this.fragment) return !1;
            this.iframe && this.navigate(t), this.loadUrl();
        },
        "loadUrl": function(e) {
            return e = this.fragment = this.getFragment(e), i.any(this.handlers, function(t) {
                if (t.route.test(e)) return t.callback(e), !0;
            });
        },
        "navigate": function(e, t) {
            if (!P.started) return !1;
            t && !0 !== t || (t = {
                "trigger": !!t
            });
            var i = this.root + (e = this.getFragment(e || ""));
            if (e = e.replace(k, ""), this.fragment !== e) {
                if (this.fragment = e, "" === e && "/" !== i && (i = i.slice(0, -1)), this._hasPushState) this.history[t.replace ? "replaceState" : "pushState"]({}, document.title, i); else {
                    if (!this._wantsHashChange) return this.location.assign(i);
                    this._updateHash(this.location, e, t.replace), this.iframe && e !== this.getFragment(this.getHash(this.iframe)) && (t.replace || this.iframe.document.open().close(), 
                    this._updateHash(this.iframe.location, e, t.replace));
                }
                return t.trigger ? this.loadUrl(e) : void 0;
            }
        },
        "_updateHash": function(e, t, i) {
            if (i) {
                var n = e.href.replace(/(javascript:|#).*$/, "");
                e.replace(n + "#" + t);
            } else e.hash = "#" + t;
        }
    }), t.history = new P();
    c.extend = f.extend = S.extend = L.extend = P.extend = function(e, t) {
        var n, r = this;
        n = e && i.has(e, "constructor") ? e.constructor : function() {
            return r.apply(this, arguments);
        }, i.extend(n, r, t);
        var s = function() {
            this.constructor = n;
        };
        return s.prototype = r.prototype, n.prototype = new s(), e && i.extend(n.prototype, e), 
        n.__super__ = r.prototype, n;
    };
    var I = function() {
        throw new Error('A "url" property or function must be specified');
    }, R = function(e, t) {
        var i = t.error;
        t.error = function(n) {
            i && i(e, n, t), e.trigger("error", e, n, t);
        };
    };
    return t;
}), function(e, t, i) {
    "use strict";
    "object" == typeof exports ? module.exports = t(require("underscore"), require("backbone")) : "function" == typeof define && define.amd ? define([ "underscore", "backbone" ], function(i, n) {
        return i = void 0 === i ? e._ : i, n = void 0 === n ? e.Backbone : n, e.returnExportsGlobal = t(i, n, e);
    }) : e.returnExportsGlobal = t(e._, e.Backbone);
}(this, function(e, t, i, n) {
    "use strict";
    t = t === n ? i.Backbone : t, e = e === n ? i._ : e;
    var r = function() {}, s = t.Model.prototype.get, a = t.Model.prototype.set, o = t.Model.prototype.toJSON;
    return r.prototype.mutators = {}, r.prototype.get = function(t) {
        var i = this.mutators !== n;
        return !0 === i && !0 === e.isFunction(this.mutators[t]) ? this.mutators[t].call(this) : !0 === i && !0 === e.isObject(this.mutators[t]) && !0 === e.isFunction(this.mutators[t].get) ? this.mutators[t].get.call(this) : s.call(this, t);
    }, r.prototype.set = function(t, i, r) {
        var s = this.mutators !== n, o = null, l = null;
        return o = a.call(this, t, i, r), e.isObject(t) || null === t ? (l = t, r = i) : (l = {})[t] = i, 
        !0 !== s || e.isObject(t) || !0 !== e.isObject(this.mutators[t]) || (!0 === e.isFunction(this.mutators[t].set) ? o = this.mutators[t].set.call(this, t, l[t], r, e.bind(a, this)) : e.isFunction(this.mutators[t]) && (o = this.mutators[t].call(this, t, l[t], r, e.bind(a, this)))), 
        !0 === s && e.isObject(l) && e.each(l, e.bind(function(t, i) {
            if (!0 === e.isObject(this.mutators[i])) {
                var s = this.mutators[i];
                e.isFunction(s.set) && (s = s.set), e.isFunction(s) && ((r === n || !0 === e.isObject(r) && !0 !== r.silent && r.mutators !== n && !0 !== r.mutators.silent) && this.trigger("mutators:set:" + i), 
                s.call(this, i, t, r, e.bind(a, this)));
            }
        }, this)), o;
    }, r.prototype.toJSON = function(t) {
        var i, n, r = o.call(this);
        return e.each(this.mutators, e.bind(function(s, a) {
            !0 === e.isObject(this.mutators[a]) && e.isFunction(this.mutators[a].get) ? (i = this.isSaving ? this.isSaving(t, s, a) : e.has(t || {}, "emulateHTTP"), 
            n = this.mutators[a].transient, i && n || (r[a] = e.bind(this.mutators[a].get, this)())) : e.isFunction(this.mutators[a]) && (r[a] = e.bind(this.mutators[a], this)());
        }, this)), r;
    }, r.prototype.escape = function(t) {
        var i = this.get(t);
        return e.escape(null == i ? "" : "" + i);
    }, e.extend(t.Model.prototype, r.prototype), t.Mutators = r, r;
}), function(e) {
    "use strict";
    var t = "object" == typeof module && "object" == typeof exports, i = t ? {
        "_": require("underscore"),
        "Backbone": require("backbone"),
        "Globalize": require("globalize")
    } : window;
    (t ? exports : Backbone).Schema = e(i);
}(function(e) {
    "use strict";
    var t = e._, i = e.Backbone, n = e.Globalize, r = i.Schema = function(e) {
        if (!(this instanceof r)) return new r(e);
        this.model = e, this.attributes = {}, e.schema = this, t.extend(e, {
            "toJSON": t.wrap(e.toJSON, function(e, n) {
                var r = e.call(this, n);
                return t.each(r, function(e, r, s) {
                    e instanceof i.Model ? e = e.source ? e.id : e.toJSON(n) : e instanceof i.Collection && (e = e.source ? t.pluck(e.models, "id") : e.toJSON(n)), 
                    s[r] = e;
                }), r;
            }),
            "get": t.wrap(e.get, function(e, t) {
                var i = this.schema.attributes[t], n = i && i.getter, r = e.call(this, t);
                return n ? n(t, r) : r;
            }),
            "set": t.wrap(e.set, function(e, i, n, r) {
                var s;
                !i || t.isObject(i) ? (s = i, r = n) : (s = {})[i] = n;
                var a = {};
                return t.each(s, function(e, i, n) {
                    var r = this.schema.attributes[i], s = r && r.setter, o = s ? s(i, e) : t.pick(n, i);
                    t.each(o, function(e, t) {
                        a[t] = e;
                    });
                }, this), e.call(this, a, r);
            })
        });
    };
    return t.extend(r, {
        "extend": i.Model.extend
    }, {
        "handlers": {
            "string": {
                "getter": function(e, t) {
                    return t;
                },
                "setter": function(e, i) {
                    return t.isString(i) ? i : String(i);
                }
            },
            "boolean": {
                "getter": function(e, t) {
                    return t;
                },
                "setter": function(e, i) {
                    return t.isBoolean(i) ? i : Boolean(i);
                }
            },
            "number": {
                "getter": function(e, t, i) {
                    var r = i.culture, s = i.format;
                    return s ? n.format(t, s, r) : t;
                },
                "setter": function(e, i, r) {
                    var s = r.culture, a = Number(i);
                    return isNaN(a) && (a = t.isString(i) ? i : String(i)), t.isNumber(a) ? a : n.parseFloat(a, s) || "NaN";
                }
            },
            "datetime": {
                "getter": function(e, i, r) {
                    var s = r.culture, a = r.format;
                    return t.isDate(i) || (i = new Date(i)), a ? n.format(i, a, s) : i;
                },
                "setter": function(e, t, i) {
                    var r = i.culture, s = i.format, a = i.standard;
                    t = s ? n.parseDate(t, s, r) || new Date(t) : new Date(t);
                    var o;
                    switch (a) {
                      case "iso":
                        o = t.toJSON() ? t.toISOString() : t.toString();
                        break;

                      case "unix":
                        o = t.getTime();
                        break;

                      default:
                        o = t;
                    }
                    return o;
                }
            },
            "locale": {
                "getter": function(e, t, i) {
                    var r = i.culture;
                    return n.localize(t, r) || t;
                },
                "setter": function(e, i, r) {
                    var s, a = r.culture, o = n.findClosestCulture(a).messages;
                    return t.find(o, function(e, t) {
                        return e === i && (s = t);
                    }), s || String(i);
                }
            },
            "model": {
                "getter": function(e, t) {
                    return t;
                },
                "setter": function(e, n, r) {
                    var s, a = (r = t.clone(r)).source, o = r.clear;
                    s = r.model || a.model;
                    var l, h = this.model.get(e);
                    return (l = n instanceof i.Model ? n === h ? n : t.clone(n.attributes) : a ? a.get(n) : n) instanceof s ? h = l : h instanceof s ? o ? h.clear().set(l, r) : h.set(l, r) : h = new s(l, r), 
                    h.source = a || null, h;
                }
            },
            "collection": {
                "getter": function(e, t) {
                    return t;
                },
                "setter": function(e, n, r) {
                    var s, a = (r = t.clone(r)).source, o = r.reset;
                    s = r.collection || a.constructor;
                    var l, h = this.model.get(e);
                    return (l = n instanceof i.Collection ? n === h ? n : t.clone(n.models) : a ? a.filter(function(e) {
                        return t.contains(n, e.id);
                    }) : n) instanceof s ? h = l : h instanceof s ? o ? h.reset(l, r) : h.set(l, r) : h = new s(l, r), 
                    h.source = a || null, h;
                }
            }
        }
    }), t.extend(r.prototype, {
        "constructor": r
    }, {
        "define": function(e, i) {
            var n;
            return !e || t.isObject(e) ? n = e : (n = {})[e] = i, t.each(n, function(e, t) {
                e = e || {}, this._addAttribute(t, e);
            }, this), this.refresh(), this;
        },
        "refresh": function() {
            var e = this.attributes, i = {};
            return t.each(e, function(e, t) {
                i[t] = this.model.attributes[t];
            }, this), this.model.set(i), this;
        },
        "defaultValue": function(e) {
            var i = t.result(this.model, "defaults");
            return i && t.has(i, e) ? i[e] : null;
        },
        "_addAttribute": function(e, i) {
            var n = i.type, r = i.array, s = i.model, a = i.collection;
            n || (r ? n = r : s ? n = "model" : a && (n = "collection"));
            var o = this.constructor.handlers[n], l = o && o.getter, h = o && o.setter;
            return this.attributes[e] = t.defaults(i, {
                "getter": t.wrap(l, function(e, n, s) {
                    var a = [], o = r ? s : [ s ];
                    return t.each(o, function(r) {
                        var s;
                        s = t.isNull(r) ? r : e ? e.call(this, n, r, i) : r, a.push(s);
                    }, this), r ? a : a[0];
                }),
                "setter": t.wrap(h, function(e, s, a) {
                    var o = [], l = r ? a : [ a ];
                    return t.each(l, function(r) {
                        t.isUndefined(r) && (r = this.defaultValue(s));
                        var a;
                        if (t.isNull(r)) switch (n) {
                          case "model":
                            a = e ? e.call(this, s, {}, i) : r;
                            break;

                          case "collection":
                            a = e ? e.call(this, s, [], i) : r;
                            break;

                          default:
                            a = r;
                        } else a = e ? e.call(this, s, r, i) : r;
                        o.push(a);
                    }, this), t.object([ s ], [ r ? o : o[0] ]);
                })
            }), this._bindHandlers(i), this;
        },
        "_bindHandlers": function(e) {
            var i = e.getter, n = e.setter;
            return i && (e.getter = t.bind(i, this)), n && (e.setter = t.bind(n, this)), this;
        }
    }), r;
});

var Marionette = function(e, t, i) {
    "use strict";
    function n(e, t) {
        var i = new Error(e);
        throw i.name = t || "Error", i;
    }
    !function(e, t) {
        var i = e.ChildViewContainer;
        e.ChildViewContainer = function(e, t) {
            var i = function(e) {
                this._views = {}, this._indexByModel = {}, this._indexByCustom = {}, this._updateLength(), 
                t.each(e, this.add, this);
            };
            t.extend(i.prototype, {
                "add": function(e, t) {
                    var i = e.cid;
                    return this._views[i] = e, e.model && (this._indexByModel[e.model.cid] = i), t && (this._indexByCustom[t] = i), 
                    this._updateLength(), this;
                },
                "findByModel": function(e) {
                    return this.findByModelCid(e.cid);
                },
                "findByModelCid": function(e) {
                    var t = this._indexByModel[e];
                    return this.findByCid(t);
                },
                "findByCustom": function(e) {
                    var t = this._indexByCustom[e];
                    return this.findByCid(t);
                },
                "findByIndex": function(e) {
                    return t.values(this._views)[e];
                },
                "findByCid": function(e) {
                    return this._views[e];
                },
                "remove": function(e) {
                    var i = e.cid;
                    return e.model && delete this._indexByModel[e.model.cid], t.any(this._indexByCustom, function(e, t) {
                        if (e === i) return delete this._indexByCustom[t], !0;
                    }, this), delete this._views[i], this._updateLength(), this;
                },
                "call": function(e) {
                    this.apply(e, t.tail(arguments));
                },
                "apply": function(e, i) {
                    t.each(this._views, function(n) {
                        t.isFunction(n[e]) && n[e].apply(n, i || []);
                    });
                },
                "_updateLength": function() {
                    this.length = t.size(this._views);
                }
            });
            var n = [ "forEach", "each", "map", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "toArray", "first", "initial", "rest", "last", "without", "isEmpty", "pluck" ];
            return t.each(n, function(e) {
                i.prototype[e] = function() {
                    var i = [ t.values(this._views) ].concat(t.toArray(arguments));
                    return t[e].apply(t, i);
                };
            }), i;
        }(0, t), e.ChildViewContainer.VERSION = "0.1.4", e.ChildViewContainer.noConflict = function() {
            return e.ChildViewContainer = i, this;
        }, e.ChildViewContainer;
    }(t, i), function(e, t) {
        var i = e.Wreqr, n = e.Wreqr = {};
        e.Wreqr.VERSION = "1.3.1", e.Wreqr.noConflict = function() {
            return e.Wreqr = i, this;
        }, n.Handlers = function(e, t) {
            var i = function(e) {
                this.options = e, this._wreqrHandlers = {}, t.isFunction(this.initialize) && this.initialize(e);
            };
            return i.extend = e.Model.extend, t.extend(i.prototype, e.Events, {
                "setHandlers": function(e) {
                    t.each(e, function(e, i) {
                        var n = null;
                        t.isObject(e) && !t.isFunction(e) && (n = e.context, e = e.callback), this.setHandler(i, e, n);
                    }, this);
                },
                "setHandler": function(e, t, i) {
                    var n = {
                        "callback": t,
                        "context": i
                    };
                    this._wreqrHandlers[e] = n, this.trigger("handler:add", e, t, i);
                },
                "hasHandler": function(e) {
                    return !!this._wreqrHandlers[e];
                },
                "getHandler": function(e) {
                    var t = this._wreqrHandlers[e];
                    if (t) return function() {
                        var e = Array.prototype.slice.apply(arguments);
                        return t.callback.apply(t.context, e);
                    };
                },
                "removeHandler": function(e) {
                    delete this._wreqrHandlers[e];
                },
                "removeAllHandlers": function() {
                    this._wreqrHandlers = {};
                }
            }), i;
        }(e, t), n.CommandStorage = function() {
            var i = function(e) {
                this.options = e, this._commands = {}, t.isFunction(this.initialize) && this.initialize(e);
            };
            return t.extend(i.prototype, e.Events, {
                "getCommands": function(e) {
                    var t = this._commands[e];
                    return t || (t = {
                        "command": e,
                        "instances": []
                    }, this._commands[e] = t), t;
                },
                "addCommand": function(e, t) {
                    this.getCommands(e).instances.push(t);
                },
                "clearCommands": function(e) {
                    this.getCommands(e).instances = [];
                }
            }), i;
        }(), n.Commands = function(e) {
            return e.Handlers.extend({
                "storageType": e.CommandStorage,
                "constructor": function(t) {
                    this.options = t || {}, this._initializeStorage(this.options), this.on("handler:add", this._executeCommands, this);
                    var i = Array.prototype.slice.call(arguments);
                    e.Handlers.prototype.constructor.apply(this, i);
                },
                "execute": function(e, t) {
                    e = arguments[0], t = Array.prototype.slice.call(arguments, 1), this.hasHandler(e) ? this.getHandler(e).apply(this, t) : this.storage.addCommand(e, t);
                },
                "_executeCommands": function(e, i, n) {
                    var r = this.storage.getCommands(e);
                    t.each(r.instances, function(e) {
                        i.apply(n, e);
                    }), this.storage.clearCommands(e);
                },
                "_initializeStorage": function(e) {
                    var i, n = e.storageType || this.storageType;
                    i = t.isFunction(n) ? new n() : n, this.storage = i;
                }
            });
        }(n), n.RequestResponse = function(e) {
            return e.Handlers.extend({
                "request": function() {
                    var e = arguments[0], t = Array.prototype.slice.call(arguments, 1);
                    if (this.hasHandler(e)) return this.getHandler(e).apply(this, t);
                }
            });
        }(n), n.EventAggregator = function(e, t) {
            var i = function() {};
            return i.extend = e.Model.extend, t.extend(i.prototype, e.Events), i;
        }(e, t), n.Channel = function(i) {
            var n = function(t) {
                this.vent = new e.Wreqr.EventAggregator(), this.reqres = new e.Wreqr.RequestResponse(), 
                this.commands = new e.Wreqr.Commands(), this.channelName = t;
            };
            return t.extend(n.prototype, {
                "reset": function() {
                    return this.vent.off(), this.vent.stopListening(), this.reqres.removeAllHandlers(), 
                    this.commands.removeAllHandlers(), this;
                },
                "connectEvents": function(e, t) {
                    return this._connect("vent", e, t), this;
                },
                "connectCommands": function(e, t) {
                    return this._connect("commands", e, t), this;
                },
                "connectRequests": function(e, t) {
                    return this._connect("reqres", e, t), this;
                },
                "_connect": function(e, i, n) {
                    if (i) {
                        n = n || this;
                        var r = "vent" === e ? "on" : "setHandler";
                        t.each(i, function(i, s) {
                            this[e][r](s, t.bind(i, n));
                        }, this);
                    }
                }
            }), n;
        }(), n.radio = function(e) {
            var i = function() {
                this._channels = {}, this.vent = {}, this.commands = {}, this.reqres = {}, this._proxyMethods();
            };
            t.extend(i.prototype, {
                "channel": function(e) {
                    if (!e) throw new Error("Channel must receive a name");
                    return this._getChannel(e);
                },
                "_getChannel": function(t) {
                    var i = this._channels[t];
                    return i || (i = new e.Channel(t), this._channels[t] = i), i;
                },
                "_proxyMethods": function() {
                    t.each([ "vent", "commands", "reqres" ], function(e) {
                        t.each(n[e], function(t) {
                            this[e][t] = r(this, e, t);
                        }, this);
                    }, this);
                }
            });
            var n = {
                "vent": [ "on", "off", "trigger", "once", "stopListening", "listenTo", "listenToOnce" ],
                "commands": [ "execute", "setHandler", "setHandlers", "removeHandler", "removeAllHandlers" ],
                "reqres": [ "request", "setHandler", "setHandlers", "removeHandler", "removeAllHandlers" ]
            }, r = function(e, t, i) {
                return function(n) {
                    var r = e._getChannel(n)[t], s = Array.prototype.slice.call(arguments, 1);
                    return r[i].apply(r, s);
                };
            };
            return new i();
        }(n), e.Wreqr;
    }(t, i);
    var r = {};
    t.Marionette = r, r.$ = t.$;
    var s = Array.prototype.slice;
    return r.extend = t.Model.extend, r.getOption = function(e, t) {
        if (e && t) {
            return e.options && t in e.options && void 0 !== e.options[t] ? e.options[t] : e[t];
        }
    }, r.normalizeMethods = function(e) {
        var t, n = {};
        return i.each(e, function(e, r) {
            t = e, i.isFunction(t) || (t = this[t]), t && (n[r] = t);
        }, this), n;
    }, r.normalizeUIKeys = function(e, t) {
        if (void 0 !== e) return i.each(i.keys(e), function(i) {
            var n = /@ui.[a-zA-Z_$0-9]*/g;
            i.match(n) && (e[i.replace(n, function(e) {
                return t[e.slice(4)];
            })] = e[i], delete e[i]);
        }), e;
    }, r.actAsCollection = function(e, t) {
        var n = [ "forEach", "each", "map", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "toArray", "first", "initial", "rest", "last", "without", "isEmpty", "pluck" ];
        i.each(n, function(n) {
            e[n] = function() {
                var e = [ i.values(i.result(this, t)) ].concat(i.toArray(arguments));
                return i[n].apply(i, e);
            };
        });
    }, r.triggerMethod = function() {
        function e(e, t, i) {
            return i.toUpperCase();
        }
        var t = /(^|:)(\w)/gi;
        return function(n) {
            var r = this["on" + n.replace(t, e)];
            if (i.isFunction(this.trigger) && this.trigger.apply(this, arguments), i.isFunction(r)) return r.apply(this, i.tail(arguments));
        };
    }(), r.MonitorDOMRefresh = function(e) {
        function t(e) {
            e._isShown = !0, r(e);
        }
        function n(e) {
            e._isRendered = !0, r(e);
        }
        function r(e) {
            e._isShown && e._isRendered && s(e) && i.isFunction(e.triggerMethod) && e.triggerMethod("dom:refresh");
        }
        function s(t) {
            return e.contains(t.el);
        }
        return function(e) {
            e.listenTo(e, "show", function() {
                t(e);
            }), e.listenTo(e, "render", function() {
                n(e);
            });
        };
    }(document.documentElement), function(e) {
        function t(e, t, r, s) {
            var a = s.split(/\s+/);
            i.each(a, function(i) {
                var s = e[i];
                s || n("Method '" + i + "' was configured as an event handler, but does not exist."), 
                e.listenTo(t, r, s);
            });
        }
        function r(e, t, i, n) {
            e.listenTo(t, i, n);
        }
        function s(e, t, n, r) {
            var s = r.split(/\s+/);
            i.each(s, function(i) {
                var r = e[i];
                e.stopListening(t, n, r);
            });
        }
        function a(e, t, i, n) {
            e.stopListening(t, i, n);
        }
        function o(e, t, n, r, s) {
            t && n && (i.isFunction(n) && (n = n.call(e)), i.each(n, function(n, a) {
                i.isFunction(n) ? r(e, t, a, n) : s(e, t, a, n);
            }));
        }
        e.bindEntityEvents = function(e, i, n) {
            o(e, i, n, r, t);
        }, e.unbindEntityEvents = function(e, t, i) {
            o(e, t, i, a, s);
        };
    }(r), r.Callbacks = function() {
        this._deferred = r.$.Deferred(), this._callbacks = [];
    }, i.extend(r.Callbacks.prototype, {
        "add": function(e, t) {
            this._callbacks.push({
                "cb": e,
                "ctx": t
            }), this._deferred.done(function(i, n) {
                t && (i = t), e.call(i, n);
            });
        },
        "run": function(e, t) {
            this._deferred.resolve(t, e);
        },
        "reset": function() {
            var e = this._callbacks;
            this._deferred = r.$.Deferred(), this._callbacks = [], i.each(e, function(e) {
                this.add(e.cb, e.ctx);
            }, this);
        }
    }), r.Controller = function(e) {
        this.triggerMethod = r.triggerMethod, this.options = e || {}, i.isFunction(this.initialize) && this.initialize(this.options);
    }, r.Controller.extend = r.extend, i.extend(r.Controller.prototype, t.Events, {
        "close": function() {
            this.stopListening();
            var e = Array.prototype.slice.call(arguments);
            this.triggerMethod.apply(this, [ "close" ].concat(e)), this.off();
        }
    }), r.Region = function(e) {
        if (this.options = e || {}, this.el = r.getOption(this, "el"), this.el || n("An 'el' must be specified for a region.", "NoElError"), 
        this.initialize) {
            var t = Array.prototype.slice.apply(arguments);
            this.initialize.apply(this, t);
        }
    }, i.extend(r.Region, {
        "buildRegion": function(e, t) {
            var r = i.isString(e), s = i.isString(e.selector), a = i.isUndefined(e.regionType), o = i.isFunction(e);
            o || r || s || n("Region must be specified as a Region type, a selector string or an object with selector property");
            var l, h;
            r && (l = e), e.selector && (l = e.selector, delete e.selector), o && (h = e), !o && a && (h = t), 
            e.regionType && (h = e.regionType, delete e.regionType), (r || o) && (e = {}), e.el = l;
            var u = new h(e);
            return e.parentEl && (u.getEl = function(t) {
                var n = e.parentEl;
                return i.isFunction(n) && (n = n()), n.find(t);
            }), u;
        }
    }), i.extend(r.Region.prototype, t.Events, {
        "show": function(e, t) {
            this.ensureEl();
            var n = t || {}, s = e.isClosed || i.isUndefined(e.$el), a = e !== this.currentView;
            return !!!n.preventClose && a && this.close(), e.render(), r.triggerMethod.call(this, "before:show", e), 
            i.isFunction(e.triggerMethod) ? e.triggerMethod("before:show") : r.triggerMethod.call(e, "before:show"), 
            (a || s) && this.open(e), this.currentView = e, r.triggerMethod.call(this, "show", e), 
            i.isFunction(e.triggerMethod) ? e.triggerMethod("show") : r.triggerMethod.call(e, "show"), 
            this;
        },
        "ensureEl": function() {
            this.$el && 0 !== this.$el.length || (this.$el = this.getEl(this.el));
        },
        "getEl": function(e) {
            return r.$(e);
        },
        "open": function(e) {
            this.$el.empty().append(e.el);
        },
        "close": function() {
            var e = this.currentView;
            e && !e.isClosed && (e.close ? e.close() : e.remove && e.remove(), r.triggerMethod.call(this, "close", e), 
            delete this.currentView);
        },
        "attachView": function(e) {
            this.currentView = e;
        },
        "reset": function() {
            this.close(), delete this.$el;
        }
    }), r.Region.extend = r.extend, r.RegionManager = function(e) {
        var t = e.Controller.extend({
            "constructor": function(t) {
                this._regions = {}, e.Controller.prototype.constructor.call(this, t);
            },
            "addRegions": function(e, t) {
                var n = {};
                return i.each(e, function(e, r) {
                    i.isString(e) && (e = {
                        "selector": e
                    }), e.selector && (e = i.defaults({}, e, t));
                    var s = this.addRegion(r, e);
                    n[r] = s;
                }, this), n;
            },
            "addRegion": function(t, n) {
                var r, s = i.isObject(n), a = i.isString(n), o = !!n.selector;
                return r = a || s && o ? e.Region.buildRegion(n, e.Region) : i.isFunction(n) ? e.Region.buildRegion(n, e.Region) : n, 
                this._store(t, r), this.triggerMethod("region:add", t, r), r;
            },
            "get": function(e) {
                return this._regions[e];
            },
            "removeRegion": function(e) {
                var t = this._regions[e];
                this._remove(e, t);
            },
            "removeRegions": function() {
                i.each(this._regions, function(e, t) {
                    this._remove(t, e);
                }, this);
            },
            "closeRegions": function() {
                i.each(this._regions, function(e, t) {
                    e.close();
                }, this);
            },
            "close": function() {
                this.removeRegions(), e.Controller.prototype.close.apply(this, arguments);
            },
            "_store": function(e, t) {
                this._regions[e] = t, this._setLength();
            },
            "_remove": function(e, t) {
                t.close(), t.stopListening(), delete this._regions[e], this._setLength(), this.triggerMethod("region:remove", e, t);
            },
            "_setLength": function() {
                this.length = i.size(this._regions);
            }
        });
        return e.actAsCollection(t.prototype, "_regions"), t;
    }(r), r.TemplateCache = function(e) {
        this.templateId = e;
    }, i.extend(r.TemplateCache, {
        "templateCaches": {},
        "get": function(e) {
            var t = this.templateCaches[e];
            return t || (t = new r.TemplateCache(e), this.templateCaches[e] = t), t.load();
        },
        "clear": function() {
            var e, t = s.call(arguments), i = t.length;
            if (i > 0) for (e = 0; e < i; e++) delete this.templateCaches[t[e]]; else this.templateCaches = {};
        }
    }), i.extend(r.TemplateCache.prototype, {
        "load": function() {
            if (this.compiledTemplate) return this.compiledTemplate;
            var e = this.loadTemplate(this.templateId);
            return this.compiledTemplate = this.compileTemplate(e), this.compiledTemplate;
        },
        "loadTemplate": function(e) {
            var t = r.$(e).html();
            return t && 0 !== t.length || n("Could not find template: '" + e + "'", "NoTemplateError"), 
            t;
        },
        "compileTemplate": function(e) {
            return i.template(e);
        }
    }), r.Renderer = {
        "render": function(e, t) {
            e || n("Cannot render the template since it's false, null or undefined.", "TemplateNotFoundError");
            return ("function" == typeof e ? e : r.TemplateCache.get(e))(t);
        }
    }, r.View = t.View.extend({
        "constructor": function(e) {
            i.bindAll(this, "render"), this.options = i.extend({}, i.result(this, "options"), i.isFunction(e) ? e.call(this) : e), 
            this.events = this.normalizeUIKeys(i.result(this, "events")), i.isObject(this.behaviors) && new r.Behaviors(this), 
            t.View.prototype.constructor.apply(this, arguments), r.MonitorDOMRefresh(this), 
            this.listenTo(this, "show", this.onShowCalled);
        },
        "triggerMethod": r.triggerMethod,
        "normalizeMethods": r.normalizeMethods,
        "getTemplate": function() {
            return r.getOption(this, "template");
        },
        "mixinTemplateHelpers": function(e) {
            e = e || {};
            var t = r.getOption(this, "templateHelpers");
            return i.isFunction(t) && (t = t.call(this)), i.extend(e, t);
        },
        "normalizeUIKeys": function(e) {
            var t = i.result(this, "ui");
            return r.normalizeUIKeys(e, t);
        },
        "configureTriggers": function() {
            if (this.triggers) {
                var e = {}, t = this.normalizeUIKeys(i.result(this, "triggers"));
                return i.each(t, function(t, n) {
                    var r = i.isObject(t), s = r ? t.event : t;
                    e[n] = function(e) {
                        if (e) {
                            var i = e.preventDefault, n = e.stopPropagation, a = r ? t.preventDefault : i, o = r ? t.stopPropagation : n;
                            a && i && i.apply(e), o && n && n.apply(e);
                        }
                        var l = {
                            "view": this,
                            "model": this.model,
                            "collection": this.collection
                        };
                        this.triggerMethod(s, l);
                    };
                }, this), e;
            }
        },
        "delegateEvents": function(e) {
            this._delegateDOMEvents(e), r.bindEntityEvents(this, this.model, r.getOption(this, "modelEvents")), 
            r.bindEntityEvents(this, this.collection, r.getOption(this, "collectionEvents"));
        },
        "_delegateDOMEvents": function(e) {
            e = e || this.events, i.isFunction(e) && (e = e.call(this));
            var n = {}, r = i.result(this, "behaviorEvents") || {}, s = this.configureTriggers();
            i.extend(n, r, e, s), t.View.prototype.delegateEvents.call(this, n);
        },
        "undelegateEvents": function() {
            var e = Array.prototype.slice.call(arguments);
            t.View.prototype.undelegateEvents.apply(this, e), r.unbindEntityEvents(this, this.model, r.getOption(this, "modelEvents")), 
            r.unbindEntityEvents(this, this.collection, r.getOption(this, "collectionEvents"));
        },
        "onShowCalled": function() {},
        "close": function() {
            if (!this.isClosed) {
                var e = Array.prototype.slice.call(arguments);
                !1 !== this.triggerMethod.apply(this, [ "before:close" ].concat(e)) && (this.isClosed = !0, 
                this.triggerMethod.apply(this, [ "close" ].concat(e)), this.unbindUIElements(), 
                this.remove());
            }
        },
        "bindUIElements": function() {
            if (this.ui) {
                this._uiBindings || (this._uiBindings = this.ui);
                var e = i.result(this, "_uiBindings");
                this.ui = {}, i.each(i.keys(e), function(t) {
                    var i = e[t];
                    this.ui[t] = this.$(i);
                }, this);
            }
        },
        "unbindUIElements": function() {
            this.ui && this._uiBindings && (i.each(this.ui, function(e, t) {
                delete this.ui[t];
            }, this), this.ui = this._uiBindings, delete this._uiBindings);
        }
    }), r.ItemView = r.View.extend({
        "constructor": function() {
            r.View.prototype.constructor.apply(this, arguments);
        },
        "serializeData": function() {
            var e = {};
            return this.model ? e = this.model.toJSON() : this.collection && (e = {
                "items": this.collection.toJSON()
            }), e;
        },
        "render": function() {
            this.isClosed = !1, this.triggerMethod("before:render", this), this.triggerMethod("item:before:render", this);
            var e = this.serializeData();
            e = this.mixinTemplateHelpers(e);
            var t = this.getTemplate(), i = r.Renderer.render(t, e);
            return this.$el.html(i), this.bindUIElements(), this.triggerMethod("render", this), 
            this.triggerMethod("item:rendered", this), this;
        },
        "close": function() {
            this.isClosed || (this.triggerMethod("item:before:close"), r.View.prototype.close.apply(this, arguments), 
            this.triggerMethod("item:closed"));
        }
    }), r.CollectionView = r.View.extend({
        "itemViewEventPrefix": "itemview",
        "constructor": function(e) {
            this._initChildViewStorage(), r.View.prototype.constructor.apply(this, arguments), 
            this._initialEvents(), this.initRenderBuffer();
        },
        "initRenderBuffer": function() {
            this.elBuffer = document.createDocumentFragment(), this._bufferedChildren = [];
        },
        "startBuffering": function() {
            this.initRenderBuffer(), this.isBuffering = !0;
        },
        "endBuffering": function() {
            this.isBuffering = !1, this.appendBuffer(this, this.elBuffer), this._triggerShowBufferedChildren(), 
            this.initRenderBuffer();
        },
        "_triggerShowBufferedChildren": function() {
            this._isShown && (i.each(this._bufferedChildren, function(e) {
                i.isFunction(e.triggerMethod) ? e.triggerMethod("show") : r.triggerMethod.call(e, "show");
            }), this._bufferedChildren = []);
        },
        "_initialEvents": function() {
            this.collection && (this.listenTo(this.collection, "add", this.addChildView), this.listenTo(this.collection, "remove", this.removeItemView), 
            this.listenTo(this.collection, "reset", this.render));
        },
        "addChildView": function(e, t, i) {
            this.closeEmptyView();
            var n = this.getItemView(e), r = this.collection.indexOf(e);
            this.addItemView(e, n, r);
        },
        "onShowCalled": function() {
            this.children.each(function(e) {
                i.isFunction(e.triggerMethod) ? e.triggerMethod("show") : r.triggerMethod.call(e, "show");
            });
        },
        "triggerBeforeRender": function() {
            this.triggerMethod("before:render", this), this.triggerMethod("collection:before:render", this);
        },
        "triggerRendered": function() {
            this.triggerMethod("render", this), this.triggerMethod("collection:rendered", this);
        },
        "render": function() {
            return this.isClosed = !1, this.triggerBeforeRender(), this._renderChildren(), this.triggerRendered(), 
            this;
        },
        "_renderChildren": function() {
            this.startBuffering(), this.closeEmptyView(), this.closeChildren(), this.isEmpty(this.collection) ? this.showEmptyView() : this.showCollection(), 
            this.endBuffering();
        },
        "showCollection": function() {
            var e;
            this.collection.each(function(t, i) {
                e = this.getItemView(t), this.addItemView(t, e, i);
            }, this);
        },
        "showEmptyView": function() {
            var e = this.getEmptyView();
            if (e && !this._showingEmptyView) {
                this._showingEmptyView = !0;
                var i = new t.Model();
                this.addItemView(i, e, 0);
            }
        },
        "closeEmptyView": function() {
            this._showingEmptyView && (this.closeChildren(), delete this._showingEmptyView);
        },
        "getEmptyView": function() {
            return r.getOption(this, "emptyView");
        },
        "getItemView": function(e) {
            var t = r.getOption(this, "itemView");
            return t || n("An `itemView` must be specified", "NoItemViewError"), t;
        },
        "addItemView": function(e, t, n) {
            var s = r.getOption(this, "itemViewOptions");
            i.isFunction(s) && (s = s.call(this, e, n));
            var a = this.buildItemView(e, t, s);
            return this.addChildViewEventForwarding(a), this.triggerMethod("before:item:added", a), 
            this.children.add(a), this.renderItemView(a, n), this._isShown && !this.isBuffering && (i.isFunction(a.triggerMethod) ? a.triggerMethod("show") : r.triggerMethod.call(a, "show")), 
            this.triggerMethod("after:item:added", a), a;
        },
        "addChildViewEventForwarding": function(e) {
            var t = r.getOption(this, "itemViewEventPrefix");
            this.listenTo(e, "all", function() {
                var n = s.call(arguments), a = n[0], o = this.normalizeMethods(this.getItemEvents());
                n[0] = t + ":" + a, n.splice(1, 0, e), void 0 !== o && i.isFunction(o[a]) && o[a].apply(this, n), 
                r.triggerMethod.apply(this, n);
            }, this);
        },
        "getItemEvents": function() {
            return i.isFunction(this.itemEvents) ? this.itemEvents.call(this) : this.itemEvents;
        },
        "renderItemView": function(e, t) {
            e.render(), this.appendHtml(this, e, t);
        },
        "buildItemView": function(e, t, n) {
            return new t(i.extend({
                "model": e
            }, n));
        },
        "removeItemView": function(e) {
            var t = this.children.findByModel(e);
            this.removeChildView(t), this.checkEmpty();
        },
        "removeChildView": function(e) {
            e && (e.close ? e.close() : e.remove && e.remove(), this.stopListening(e), this.children.remove(e)), 
            this.triggerMethod("item:removed", e);
        },
        "isEmpty": function(e) {
            return !this.collection || 0 === this.collection.length;
        },
        "checkEmpty": function() {
            this.isEmpty(this.collection) && this.showEmptyView();
        },
        "appendBuffer": function(e, t) {
            e.$el.append(t);
        },
        "appendHtml": function(e, t, i) {
            e.isBuffering ? (e.elBuffer.appendChild(t.el), e._bufferedChildren.push(t)) : e.$el.append(t.el);
        },
        "_initChildViewStorage": function() {
            this.children = new t.ChildViewContainer();
        },
        "close": function() {
            this.isClosed || (this.triggerMethod("collection:before:close"), this.closeChildren(), 
            this.triggerMethod("collection:closed"), r.View.prototype.close.apply(this, arguments));
        },
        "closeChildren": function() {
            this.children.each(function(e) {
                this.removeChildView(e);
            }, this), this.checkEmpty();
        }
    }), r.CompositeView = r.CollectionView.extend({
        "constructor": function() {
            r.CollectionView.prototype.constructor.apply(this, arguments);
        },
        "_initialEvents": function() {
            this.once("render", function() {
                this.collection && (this.listenTo(this.collection, "add", this.addChildView), this.listenTo(this.collection, "remove", this.removeItemView), 
                this.listenTo(this.collection, "reset", this._renderChildren));
            });
        },
        "getItemView": function(e) {
            var t = r.getOption(this, "itemView") || this.constructor;
            return t || n("An `itemView` must be specified", "NoItemViewError"), t;
        },
        "serializeData": function() {
            var e = {};
            return this.model && (e = this.model.toJSON()), e;
        },
        "render": function() {
            this.isRendered = !0, this.isClosed = !1, this.resetItemViewContainer(), this.triggerBeforeRender();
            var e = this.renderModel();
            return this.$el.html(e), this.bindUIElements(), this.triggerMethod("composite:model:rendered"), 
            this._renderChildren(), this.triggerMethod("composite:rendered"), this.triggerRendered(), 
            this;
        },
        "_renderChildren": function() {
            this.isRendered && (this.triggerMethod("composite:collection:before:render"), r.CollectionView.prototype._renderChildren.call(this), 
            this.triggerMethod("composite:collection:rendered"));
        },
        "renderModel": function() {
            var e = {};
            e = this.serializeData(), e = this.mixinTemplateHelpers(e);
            var t = this.getTemplate();
            return r.Renderer.render(t, e);
        },
        "appendBuffer": function(e, t) {
            this.getItemViewContainer(e).append(t);
        },
        "appendHtml": function(e, t, i) {
            e.isBuffering ? (e.elBuffer.appendChild(t.el), e._bufferedChildren.push(t)) : this.getItemViewContainer(e).append(t.el);
        },
        "getItemViewContainer": function(e) {
            if ("$itemViewContainer" in e) return e.$itemViewContainer;
            var t, s = r.getOption(e, "itemViewContainer");
            if (s) {
                var a = i.isFunction(s) ? s.call(e) : s;
                (t = "@" === a.charAt(0) && e.ui ? e.ui[a.substr(4)] : e.$(a)).length <= 0 && n("The specified `itemViewContainer` was not found: " + e.itemViewContainer, "ItemViewContainerMissingError");
            } else t = e.$el;
            return e.$itemViewContainer = t, t;
        },
        "resetItemViewContainer": function() {
            this.$itemViewContainer && delete this.$itemViewContainer;
        }
    }), r.Layout = r.ItemView.extend({
        "regionType": r.Region,
        "constructor": function(e) {
            e = e || {}, this._firstRender = !0, this._initializeRegions(e), r.ItemView.prototype.constructor.call(this, e);
        },
        "render": function() {
            return this.isClosed && this._initializeRegions(), this._firstRender ? this._firstRender = !1 : this.isClosed || this._reInitializeRegions(), 
            r.ItemView.prototype.render.apply(this, arguments);
        },
        "close": function() {
            this.isClosed || (this.regionManager.close(), r.ItemView.prototype.close.apply(this, arguments));
        },
        "addRegion": function(e, t) {
            var i = {};
            return i[e] = t, this._buildRegions(i)[e];
        },
        "addRegions": function(e) {
            return this.regions = i.extend({}, this.regions, e), this._buildRegions(e);
        },
        "removeRegion": function(e) {
            return delete this.regions[e], this.regionManager.removeRegion(e);
        },
        "getRegion": function(e) {
            return this.regionManager.get(e);
        },
        "_buildRegions": function(e) {
            var t = this, i = {
                "regionType": r.getOption(this, "regionType"),
                "parentEl": function() {
                    return t.$el;
                }
            };
            return this.regionManager.addRegions(e, i);
        },
        "_initializeRegions": function(e) {
            var t;
            this._initRegionManager(), t = i.isFunction(this.regions) ? this.regions(e) : this.regions || {}, 
            this.addRegions(t);
        },
        "_reInitializeRegions": function() {
            this.regionManager.closeRegions(), this.regionManager.each(function(e) {
                e.reset();
            });
        },
        "_initRegionManager": function() {
            this.regionManager = new r.RegionManager(), this.listenTo(this.regionManager, "region:add", function(e, t) {
                this[e] = t, this.trigger("region:add", e, t);
            }), this.listenTo(this.regionManager, "region:remove", function(e, t) {
                delete this[e], this.trigger("region:remove", e, t);
            });
        }
    }), r.Behavior = function(e, t) {
        function i(t, i) {
            this.view = i, this.defaults = e.result(this, "defaults") || {}, this.options = e.extend({}, this.defaults, t), 
            this.$ = function() {
                return this.view.$.apply(this.view, arguments);
            }, this.initialize.apply(this, arguments);
        }
        return e.extend(i.prototype, t.Events, {
            "initialize": function() {},
            "close": function() {
                this.stopListening();
            },
            "triggerMethod": r.triggerMethod
        }), i.extend = r.extend, i;
    }(i, t), r.Behaviors = function(e, t) {
        function i(e) {
            this.behaviors = i.parseBehaviors(e, t.result(e, "behaviors")), i.wrap(e, this.behaviors, [ "bindUIElements", "unbindUIElements", "delegateEvents", "undelegateEvents", "behaviorEvents", "triggerMethod", "setElement", "close" ]);
        }
        var n = {
            "setElement": function(e, i) {
                e.apply(this, t.tail(arguments, 2)), t.each(i, function(e) {
                    e.$el = this.$el;
                }, this);
            },
            "close": function(e, i) {
                var n = t.tail(arguments, 2);
                e.apply(this, n), t.invoke(i, "close", n);
            },
            "bindUIElements": function(e, i) {
                e.apply(this), t.invoke(i, e);
            },
            "unbindUIElements": function(e, i) {
                e.apply(this), t.invoke(i, e);
            },
            "triggerMethod": function(e, i) {
                var n = t.tail(arguments, 2);
                e.apply(this, n), t.each(i, function(t) {
                    e.apply(t, n);
                });
            },
            "delegateEvents": function(i, n) {
                var r = t.tail(arguments, 2);
                i.apply(this, r), t.each(n, function(t) {
                    e.bindEntityEvents(t, this.model, e.getOption(t, "modelEvents")), e.bindEntityEvents(t, this.collection, e.getOption(t, "collectionEvents"));
                }, this);
            },
            "undelegateEvents": function(i, n) {
                var r = t.tail(arguments, 2);
                i.apply(this, r), t.each(n, function(t) {
                    e.unbindEntityEvents(t, this.model, e.getOption(t, "modelEvents")), e.unbindEntityEvents(t, this.collection, e.getOption(t, "collectionEvents"));
                }, this);
            },
            "behaviorEvents": function(i, n) {
                var r = {}, s = t.result(this, "ui");
                return t.each(n, function(i, n) {
                    var a = {}, o = t.clone(t.result(i, "events")) || {}, l = t.result(i, "ui"), h = t.extend({}, s, l);
                    o = e.normalizeUIKeys(o, h), t.each(t.keys(o), function(e) {
                        var r = e + new Array(n + 2).join(" "), s = t.isFunction(o[e]) ? o[e] : i[o[e]];
                        a[r] = t.bind(s, i);
                    }), r = t.extend(r, a);
                }), r;
            }
        };
        return t.extend(i, {
            "behaviorsLookup": function() {
                throw new Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup");
            },
            "getBehaviorClass": function(e, n) {
                return e.behaviorClass ? e.behaviorClass : t.isFunction(i.behaviorsLookup) ? i.behaviorsLookup.apply(this, arguments)[n] : i.behaviorsLookup[n];
            },
            "parseBehaviors": function(e, n) {
                return t.map(n, function(t, n) {
                    return new (i.getBehaviorClass(t, n))(t, e);
                });
            },
            "wrap": function(e, i, r) {
                t.each(r, function(r) {
                    e[r] = t.partial(n[r], e[r], i);
                });
            }
        }), i;
    }(r, i), r.AppRouter = t.Router.extend({
        "constructor": function(e) {
            t.Router.prototype.constructor.apply(this, arguments), this.options = e || {};
            var i = r.getOption(this, "appRoutes"), n = this._getController();
            this.processAppRoutes(n, i), this.on("route", this._processOnRoute, this);
        },
        "appRoute": function(e, t) {
            var i = this._getController();
            this._addAppRoute(i, e, t);
        },
        "_processOnRoute": function(e, t) {
            var n = i.invert(this.appRoutes)[e];
            i.isFunction(this.onRoute) && this.onRoute(e, n, t);
        },
        "processAppRoutes": function(e, t) {
            if (t) {
                var n = i.keys(t).reverse();
                i.each(n, function(i) {
                    this._addAppRoute(e, i, t[i]);
                }, this);
            }
        },
        "_getController": function() {
            return r.getOption(this, "controller");
        },
        "_addAppRoute": function(e, t, r) {
            var s = e[r];
            s || n("Method '" + r + "' was not found on the controller"), this.route(t, r, i.bind(s, e));
        }
    }), r.Application = function(e) {
        this._initRegionManager(), this._initCallbacks = new r.Callbacks(), this.vent = new t.Wreqr.EventAggregator(), 
        this.commands = new t.Wreqr.Commands(), this.reqres = new t.Wreqr.RequestResponse(), 
        this.submodules = {}, i.extend(this, e), this.triggerMethod = r.triggerMethod;
    }, i.extend(r.Application.prototype, t.Events, {
        "execute": function() {
            this.commands.execute.apply(this.commands, arguments);
        },
        "request": function() {
            return this.reqres.request.apply(this.reqres, arguments);
        },
        "addInitializer": function(e) {
            this._initCallbacks.add(e);
        },
        "start": function(e) {
            this.triggerMethod("initialize:before", e), this._initCallbacks.run(e, this), this.triggerMethod("initialize:after", e), 
            this.triggerMethod("start", e);
        },
        "addRegions": function(e) {
            return this._regionManager.addRegions(e);
        },
        "closeRegions": function() {
            this._regionManager.closeRegions();
        },
        "removeRegion": function(e) {
            this._regionManager.removeRegion(e);
        },
        "getRegion": function(e) {
            return this._regionManager.get(e);
        },
        "module": function(e, t) {
            var i = r.Module.getClass(t), n = s.call(arguments);
            return n.unshift(this), i.create.apply(i, n);
        },
        "_initRegionManager": function() {
            this._regionManager = new r.RegionManager(), this.listenTo(this._regionManager, "region:add", function(e, t) {
                this[e] = t;
            }), this.listenTo(this._regionManager, "region:remove", function(e, t) {
                delete this[e];
            });
        }
    }), r.Application.extend = r.extend, r.Module = function(e, t, n) {
        this.moduleName = e, this.options = i.extend({}, this.options, n), this.initialize = n.initialize || this.initialize, 
        this.submodules = {}, this._setupInitializersAndFinalizers(), this.app = t, this.startWithParent = !0, 
        this.triggerMethod = r.triggerMethod, i.isFunction(this.initialize) && this.initialize(this.options, e, t);
    }, r.Module.extend = r.extend, i.extend(r.Module.prototype, t.Events, {
        "initialize": function() {},
        "addInitializer": function(e) {
            this._initializerCallbacks.add(e);
        },
        "addFinalizer": function(e) {
            this._finalizerCallbacks.add(e);
        },
        "start": function(e) {
            this._isInitialized || (i.each(this.submodules, function(t) {
                t.startWithParent && t.start(e);
            }), this.triggerMethod("before:start", e), this._initializerCallbacks.run(e, this), 
            this._isInitialized = !0, this.triggerMethod("start", e));
        },
        "stop": function() {
            this._isInitialized && (this._isInitialized = !1, r.triggerMethod.call(this, "before:stop"), 
            i.each(this.submodules, function(e) {
                e.stop();
            }), this._finalizerCallbacks.run(void 0, this), this._initializerCallbacks.reset(), 
            this._finalizerCallbacks.reset(), r.triggerMethod.call(this, "stop"));
        },
        "addDefinition": function(e, t) {
            this._runModuleDefinition(e, t);
        },
        "_runModuleDefinition": function(e, n) {
            if (e) {
                var s = i.flatten([ this, this.app, t, r, r.$, i, n ]);
                e.apply(this, s);
            }
        },
        "_setupInitializersAndFinalizers": function() {
            this._initializerCallbacks = new r.Callbacks(), this._finalizerCallbacks = new r.Callbacks();
        }
    }), i.extend(r.Module, {
        "create": function(e, t, n) {
            var r = e, a = s.call(arguments);
            a.splice(0, 3);
            var o = (t = t.split(".")).length, l = [];
            return l[o - 1] = n, i.each(t, function(t, i) {
                var s = r;
                r = this._getModule(s, t, e, n), this._addModuleDefinition(s, r, l[i], a);
            }, this), r;
        },
        "_getModule": function(e, t, n, r, s) {
            var a = i.extend({}, r), o = this.getClass(r), l = e[t];
            return l || (l = new o(t, n, a), e[t] = l, e.submodules[t] = l), l;
        },
        "getClass": function(e) {
            var t = r.Module;
            return e ? e.prototype instanceof t ? e : e.moduleClass || t : t;
        },
        "_addModuleDefinition": function(e, t, i, n) {
            var r = this._getDefine(i), s = this._getStartWithParent(i, t);
            r && t.addDefinition(r, n), this._addStartWithParent(e, t, s);
        },
        "_getStartWithParent": function(e, t) {
            var n;
            return i.isFunction(e) && e.prototype instanceof r.Module ? (n = t.constructor.prototype.startWithParent, 
            !!i.isUndefined(n) || n) : !i.isObject(e) || (n = e.startWithParent, !!i.isUndefined(n) || n);
        },
        "_getDefine": function(e) {
            return !i.isFunction(e) || e.prototype instanceof r.Module ? i.isObject(e) ? e.define : null : e;
        },
        "_addStartWithParent": function(e, t, i) {
            t.startWithParent = t.startWithParent && i, t.startWithParent && !t.startWithParentIsConfigured && (t.startWithParentIsConfigured = !0, 
            e.addInitializer(function(e) {
                t.startWithParent && t.start(e);
            }));
        }
    }), r;
}(0, Backbone, _);

!function(e, t) {
    var i = t.sync;
    t.sync = function(e, t, n) {
        var r = t._lastXHR && t._lastXHR[e];
        return r && 4 != r.readyState && n && !1 !== n.safe && r.abort("stale"), t._lastXHR || (t._lastXHR = {}), 
        t._lastXHR[e] = i.apply(this, arguments);
    };
}(window._, window.Backbone);

var OpenLayers = {
    "VERSION_NUMBER": "Release 2.14 dev",
    "singleFile": !0,
    "_getScriptLocation": function() {
        for (var e, t, i = new RegExp("(^|(.*?\\/))(OpenLayers[^\\/]*?\\.js)(\\?|$)"), n = document.getElementsByTagName("script"), r = "", s = 0, a = n.length; s < a; s++) if ((e = n[s].getAttribute("src")) && (t = e.match(i))) {
            r = t[1];
            break;
        }
        return function() {
            return r;
        };
    }(),
    "ImgPath": ""
};

OpenLayers.Util = OpenLayers.Util || {}, OpenLayers.Util.vendorPrefix = function() {
    "use strict";
    function e(e) {
        return e ? e.replace(/([A-Z])/g, function(e) {
            return "-" + e.toLowerCase();
        }).replace(/^ms-/, "-ms-") : null;
    }
    function t(e, t) {
        if (void 0 === a[t]) {
            var i, r, s = 0, o = n.length, l = void 0 !== e.cssText;
            for (a[t] = null; s < o; s++) if ((r = n[s]) ? (l || (r = r.toLowerCase()), i = r + t.charAt(0).toUpperCase() + t.slice(1)) : i = t, 
            void 0 !== e[i]) {
                a[t] = i;
                break;
            }
        }
        return a[t];
    }
    function i(e) {
        return t(r, e);
    }
    var n = [ "", "O", "ms", "Moz", "Webkit" ], r = document.createElement("div").style, s = {}, a = {};
    return {
        "css": function(t) {
            if (void 0 === s[t]) {
                var n = i(t.replace(/(-[\s\S])/g, function(e) {
                    return e.charAt(1).toUpperCase();
                }));
                s[t] = e(n);
            }
            return s[t];
        },
        "js": t,
        "style": i,
        "cssCache": s,
        "jsCache": a
    };
}(), OpenLayers.Animation = function(e) {
    var t = OpenLayers.Util.vendorPrefix.js(e, "requestAnimationFrame"), i = !!t, n = function() {
        var i = e[t] || function(t, i) {
            e.setTimeout(t, 16);
        };
        return function(t, n) {
            i.apply(e, [ t, n ]);
        };
    }(), r = 0, s = {};
    return {
        "isNative": i,
        "requestFrame": n,
        "start": function(e, t, i) {
            t = t > 0 ? t : Number.POSITIVE_INFINITY;
            var a = ++r, o = +new Date();
            return s[a] = function() {
                s[a] && +new Date() - o <= t ? (e(), s[a] && n(s[a], i)) : delete s[a];
            }, n(s[a], i), a;
        },
        "stop": function(e) {
            delete s[e];
        }
    };
}(window), OpenLayers.String = {
    "startsWith": function(e, t) {
        return 0 == e.indexOf(t);
    },
    "contains": function(e, t) {
        return -1 != e.indexOf(t);
    },
    "trim": function(e) {
        return e.replace(/^\s\s*/, "").replace(/\s\s*$/, "");
    },
    "camelize": function(e) {
        for (var t = e.split("-"), i = t[0], n = 1, r = t.length; n < r; n++) {
            var s = t[n];
            i += s.charAt(0).toUpperCase() + s.substring(1);
        }
        return i;
    },
    "format": function(e, t, i) {
        t || (t = window);
        return e.replace(OpenLayers.String.tokenRegEx, function(e, n) {
            for (var r, s = n.split(/\.+/), a = 0; a < s.length && (0 == a && (r = t), void 0 !== r); a++) r = r[s[a]];
            return "function" == typeof r && (r = i ? r.apply(null, i) : r()), void 0 === r ? "undefined" : r;
        });
    },
    "tokenRegEx": /\$\{([\w.]+?)\}/g,
    "numberRegEx": /^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,
    "isNumeric": function(e) {
        return OpenLayers.String.numberRegEx.test(e);
    },
    "numericIf": function(e, t) {
        var i = e;
        return !0 === t && null != e && e.replace && (e = e.replace(/^\s*|\s*$/g, "")), 
        OpenLayers.String.isNumeric(e) ? parseFloat(e) : i;
    }
}, OpenLayers.Number = {
    "decimalSeparator": ".",
    "thousandsSeparator": ",",
    "limitSigDigs": function(e, t) {
        var i = 0;
        return t > 0 && (i = parseFloat(e.toPrecision(t))), i;
    },
    "format": function(e, t, i, n) {
        t = void 0 !== t ? t : 0, i = void 0 !== i ? i : OpenLayers.Number.thousandsSeparator, 
        n = void 0 !== n ? n : OpenLayers.Number.decimalSeparator, null != t && (e = parseFloat(e.toFixed(t)));
        var r = e.toString().split(".");
        1 == r.length && null == t && (t = 0);
        var s = r[0];
        if (i) for (var a = /(-?[0-9]+)([0-9]{3})/; a.test(s); ) s = s.replace(a, "$1" + i + "$2");
        var o;
        if (0 == t) o = s; else {
            var l = r.length > 1 ? r[1] : "0";
            null != t && (l += new Array(t - l.length + 1).join("0")), o = s + n + l;
        }
        return o;
    },
    "zeroPad": function(e, t, i) {
        for (var n = e.toString(i || 10); n.length < t; ) n = "0" + n;
        return n;
    }
}, OpenLayers.Function = {
    "bind": function(e, t) {
        var i = Array.prototype.slice.call(arguments, 2);
        return function() {
            var n = i.concat(Array.prototype.slice.call(arguments, 0));
            return e.apply(t, n);
        };
    },
    "bindAsEventListener": function(e, t) {
        return function(i) {
            return e.call(t, i || window.event);
        };
    },
    "False": function() {
        return !1;
    },
    "True": function() {
        return !0;
    },
    "Void": function() {}
}, OpenLayers.Array = {
    "filter": function(e, t, i) {
        var n = [];
        if (Array.prototype.filter) n = e.filter(t, i); else {
            var r = e.length;
            if ("function" != typeof t) throw new TypeError();
            for (var s = 0; s < r; s++) if (s in e) {
                var a = e[s];
                t.call(i, a, s, e) && n.push(a);
            }
        }
        return n;
    }
}, OpenLayers.Class = function() {
    var e = arguments.length, t = arguments[0], i = arguments[e - 1], n = "function" == typeof i.initialize ? i.initialize : function() {
        t.prototype.initialize.apply(this, arguments);
    };
    if (e > 1) {
        var r = [ n, t ].concat(Array.prototype.slice.call(arguments).slice(1, e - 1), i);
        OpenLayers.inherit.apply(null, r);
    } else n.prototype = i;
    return n;
}, OpenLayers.inherit = function(e, t) {
    var i = function() {};
    i.prototype = t.prototype, e.prototype = new i();
    var n, r, s;
    for (n = 2, r = arguments.length; n < r; n++) "function" == typeof (s = arguments[n]) && (s = s.prototype), 
    OpenLayers.Util.extend(e.prototype, s);
}, OpenLayers.Util = OpenLayers.Util || {}, OpenLayers.Util.extend = function(e, t) {
    if (e = e || {}, t) {
        for (var i in t) {
            var n = t[i];
            void 0 !== n && (e[i] = n);
        }
        !("function" == typeof window.Event && t instanceof window.Event) && t.hasOwnProperty && t.hasOwnProperty("toString") && (e.toString = t.toString);
    }
    return e;
}, OpenLayers.Console = {
    "log": function() {},
    "debug": function() {},
    "info": function() {},
    "warn": function() {},
    "error": function() {},
    "userError": function(e) {
        alert(e);
    },
    "assert": function() {},
    "dir": function() {},
    "dirxml": function() {},
    "trace": function() {},
    "group": function() {},
    "groupEnd": function() {},
    "time": function() {},
    "timeEnd": function() {},
    "profile": function() {},
    "profileEnd": function() {},
    "count": function() {},
    "CLASS_NAME": "OpenLayers.Console"
}, function() {
    for (var e = document.getElementsByTagName("script"), t = 0, i = e.length; t < i; ++t) if (-1 != e[t].src.indexOf("firebug.js") && console) {
        OpenLayers.Util.extend(OpenLayers.Console, console);
        break;
    }
}(), OpenLayers.Control = OpenLayers.Class({
    "id": null,
    "map": null,
    "div": null,
    "type": null,
    "allowSelection": !1,
    "displayClass": "",
    "title": "",
    "autoActivate": !1,
    "active": null,
    "handlerOptions": null,
    "handler": null,
    "eventListeners": null,
    "events": null,
    "initialize": function(e) {
        this.displayClass = this.CLASS_NAME.replace("OpenLayers.", "ol").replace(/\./g, ""), 
        OpenLayers.Util.extend(this, e), this.events = new OpenLayers.Events(this), this.eventListeners instanceof Object && this.events.on(this.eventListeners), 
        null == this.id && (this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_"));
    },
    "destroy": function() {
        if (this.events && (this.eventListeners && this.events.un(this.eventListeners), 
        this.events.destroy(), this.events = null), this.eventListeners = null, this.handler && (this.handler.destroy(), 
        this.handler = null), this.handlers) {
            for (var e in this.handlers) this.handlers.hasOwnProperty(e) && "function" == typeof this.handlers[e].destroy && this.handlers[e].destroy();
            this.handlers = null;
        }
        this.map && (this.map.removeControl(this), this.map = null), this.div = null;
    },
    "setMap": function(e) {
        this.map = e, this.handler && this.handler.setMap(e);
    },
    "draw": function(e) {
        return null == this.div && (this.div = OpenLayers.Util.createDiv(this.id), this.div.className = this.displayClass, 
        this.allowSelection || (this.div.className += " olControlNoSelect", this.div.setAttribute("unselectable", "on", 0), 
        this.div.onselectstart = OpenLayers.Function.False), "" != this.title && (this.div.title = this.title)), 
        null != e && (this.position = e.clone()), this.moveTo(this.position), this.div;
    },
    "moveTo": function(e) {
        null != e && null != this.div && (this.div.style.left = e.x + "px", this.div.style.top = e.y + "px");
    },
    "activate": function() {
        return !this.active && (this.handler && this.handler.activate(), this.active = !0, 
        this.map && OpenLayers.Element.addClass(this.map.viewPortDiv, this.displayClass.replace(/ /g, "") + "Active"), 
        this.events.triggerEvent("activate"), !0);
    },
    "deactivate": function() {
        return !!this.active && (this.handler && this.handler.deactivate(), this.active = !1, 
        this.map && OpenLayers.Element.removeClass(this.map.viewPortDiv, this.displayClass.replace(/ /g, "") + "Active"), 
        this.events.triggerEvent("deactivate"), !0);
    },
    "CLASS_NAME": "OpenLayers.Control"
}), OpenLayers.Control.TYPE_BUTTON = 1, OpenLayers.Control.TYPE_TOGGLE = 2, OpenLayers.Control.TYPE_TOOL = 3, 
OpenLayers.Bounds = OpenLayers.Class({
    "left": null,
    "bottom": null,
    "right": null,
    "top": null,
    "centerLonLat": null,
    "initialize": function(e, t, i, n) {
        OpenLayers.Util.isArray(e) && (n = e[3], i = e[2], t = e[1], e = e[0]), null != e && (this.left = OpenLayers.Util.toFloat(e)), 
        null != t && (this.bottom = OpenLayers.Util.toFloat(t)), null != i && (this.right = OpenLayers.Util.toFloat(i)), 
        null != n && (this.top = OpenLayers.Util.toFloat(n));
    },
    "clone": function() {
        return new OpenLayers.Bounds(this.left, this.bottom, this.right, this.top);
    },
    "equals": function(e) {
        var t = !1;
        return null != e && (t = this.left == e.left && this.right == e.right && this.top == e.top && this.bottom == e.bottom), 
        t;
    },
    "toString": function() {
        return [ this.left, this.bottom, this.right, this.top ].join(",");
    },
    "toArray": function(e) {
        return !0 === e ? [ this.bottom, this.left, this.top, this.right ] : [ this.left, this.bottom, this.right, this.top ];
    },
    "toBBOX": function(e, t) {
        null == e && (e = 6);
        var i = Math.pow(10, e), n = Math.round(this.left * i) / i, r = Math.round(this.bottom * i) / i, s = Math.round(this.right * i) / i, a = Math.round(this.top * i) / i;
        return !0 === t ? r + "," + n + "," + a + "," + s : n + "," + r + "," + s + "," + a;
    },
    "toGeometry": function() {
        return new OpenLayers.Geometry.Polygon([ new OpenLayers.Geometry.LinearRing([ new OpenLayers.Geometry.Point(this.left, this.bottom), new OpenLayers.Geometry.Point(this.right, this.bottom), new OpenLayers.Geometry.Point(this.right, this.top), new OpenLayers.Geometry.Point(this.left, this.top) ]) ]);
    },
    "getWidth": function() {
        return this.right - this.left;
    },
    "getHeight": function() {
        return this.top - this.bottom;
    },
    "getSize": function() {
        return new OpenLayers.Size(this.getWidth(), this.getHeight());
    },
    "getCenterPixel": function() {
        return new OpenLayers.Pixel((this.left + this.right) / 2, (this.bottom + this.top) / 2);
    },
    "getCenterLonLat": function() {
        return this.centerLonLat || (this.centerLonLat = new OpenLayers.LonLat((this.left + this.right) / 2, (this.bottom + this.top) / 2)), 
        this.centerLonLat;
    },
    "scale": function(e, t) {
        null == t && (t = this.getCenterLonLat());
        var i, n;
        "OpenLayers.LonLat" == t.CLASS_NAME ? (i = t.lon, n = t.lat) : (i = t.x, n = t.y);
        var r = (this.left - i) * e + i, s = (this.bottom - n) * e + n, a = (this.right - i) * e + i, o = (this.top - n) * e + n;
        return new OpenLayers.Bounds(r, s, a, o);
    },
    "add": function(e, t) {
        if (null == e || null == t) throw new TypeError("Bounds.add cannot receive null values");
        return new OpenLayers.Bounds(this.left + e, this.bottom + t, this.right + e, this.top + t);
    },
    "extend": function(e) {
        if (e) switch (e.CLASS_NAME) {
          case "OpenLayers.LonLat":
            this.extendXY(e.lon, e.lat);
            break;

          case "OpenLayers.Geometry.Point":
            this.extendXY(e.x, e.y);
            break;

          case "OpenLayers.Bounds":
            this.centerLonLat = null, (null == this.left || e.left < this.left) && (this.left = e.left), 
            (null == this.bottom || e.bottom < this.bottom) && (this.bottom = e.bottom), (null == this.right || e.right > this.right) && (this.right = e.right), 
            (null == this.top || e.top > this.top) && (this.top = e.top);
        }
    },
    "extendXY": function(e, t) {
        this.centerLonLat = null, (null == this.left || e < this.left) && (this.left = e), 
        (null == this.bottom || t < this.bottom) && (this.bottom = t), (null == this.right || e > this.right) && (this.right = e), 
        (null == this.top || t > this.top) && (this.top = t);
    },
    "containsLonLat": function(e, t) {
        "boolean" == typeof t && (t = {
            "inclusive": t
        }), t = t || {};
        var i = this.contains(e.lon, e.lat, t.inclusive), n = t.worldBounds;
        if (n && !i) {
            var r = n.getWidth(), s = (n.left + n.right) / 2, a = Math.round((e.lon - s) / r);
            i = this.containsLonLat({
                "lon": e.lon - a * r,
                "lat": e.lat
            }, {
                "inclusive": t.inclusive
            });
        }
        return i;
    },
    "containsPixel": function(e, t) {
        return this.contains(e.x, e.y, t);
    },
    "contains": function(e, t, i) {
        if (null == i && (i = !0), null == e || null == t) return !1;
        e = OpenLayers.Util.toFloat(e), t = OpenLayers.Util.toFloat(t);
        return i ? e >= this.left && e <= this.right && t >= this.bottom && t <= this.top : e > this.left && e < this.right && t > this.bottom && t < this.top;
    },
    "intersectsBounds": function(e, t) {
        if ("boolean" == typeof t && (t = {
            "inclusive": t
        }), (t = t || {}).worldBounds) {
            var i = this.wrapDateLine(t.worldBounds);
            e = e.wrapDateLine(t.worldBounds);
        } else i = this;
        null == t.inclusive && (t.inclusive = !0);
        var n = !1, r = i.left == e.right || i.right == e.left || i.top == e.bottom || i.bottom == e.top;
        if (t.inclusive || !r) {
            var s = e.bottom >= i.bottom && e.bottom <= i.top || i.bottom >= e.bottom && i.bottom <= e.top, a = e.top >= i.bottom && e.top <= i.top || i.top > e.bottom && i.top < e.top, o = e.left >= i.left && e.left <= i.right || i.left >= e.left && i.left <= e.right, l = e.right >= i.left && e.right <= i.right || i.right >= e.left && i.right <= e.right;
            n = (s || a) && (o || l);
        }
        if (t.worldBounds && !n) {
            var h = t.worldBounds, u = h.getWidth(), p = !h.containsBounds(i), c = !h.containsBounds(e);
            p && !c ? (e = e.add(-u, 0), n = i.intersectsBounds(e, {
                "inclusive": t.inclusive
            })) : c && !p && (i = i.add(-u, 0), n = e.intersectsBounds(i, {
                "inclusive": t.inclusive
            }));
        }
        return n;
    },
    "containsBounds": function(e, t, i) {
        null == t && (t = !1), null == i && (i = !0);
        var n = this.contains(e.left, e.bottom, i), r = this.contains(e.right, e.bottom, i), s = this.contains(e.left, e.top, i), a = this.contains(e.right, e.top, i);
        return t ? n || r || s || a : n && r && s && a;
    },
    "determineQuadrant": function(e) {
        var t = "", i = this.getCenterLonLat();
        return t += e.lat < i.lat ? "b" : "t", t += e.lon < i.lon ? "l" : "r";
    },
    "transform": function(e, t) {
        this.centerLonLat = null;
        var i = OpenLayers.Projection.transform({
            "x": this.left,
            "y": this.bottom
        }, e, t), n = OpenLayers.Projection.transform({
            "x": this.right,
            "y": this.bottom
        }, e, t), r = OpenLayers.Projection.transform({
            "x": this.left,
            "y": this.top
        }, e, t), s = OpenLayers.Projection.transform({
            "x": this.right,
            "y": this.top
        }, e, t);
        return this.left = Math.min(i.x, r.x), this.bottom = Math.min(i.y, n.y), this.right = Math.max(n.x, s.x), 
        this.top = Math.max(r.y, s.y), this;
    },
    "wrapDateLine": function(e, t) {
        var i = (t = t || {}).leftTolerance || 0, n = t.rightTolerance || 0, r = this.clone();
        if (e) {
            for (var s = e.getWidth(); r.left < e.left && r.right - n <= e.left; ) r = r.add(s, 0);
            for (;r.left + i >= e.right && r.right > e.right; ) r = r.add(-s, 0);
            var a = r.left + i;
            a < e.right && a > e.left && r.right - n > e.right && (r = r.add(-s, 0));
        }
        return r;
    },
    "CLASS_NAME": "OpenLayers.Bounds"
}), OpenLayers.Bounds.fromString = function(e, t) {
    var i = e.split(",");
    return OpenLayers.Bounds.fromArray(i, t);
}, OpenLayers.Bounds.fromArray = function(e, t) {
    return !0 === t ? new OpenLayers.Bounds(e[1], e[0], e[3], e[2]) : new OpenLayers.Bounds(e[0], e[1], e[2], e[3]);
}, OpenLayers.Bounds.fromSize = function(e) {
    return new OpenLayers.Bounds(0, e.h, e.w, 0);
}, OpenLayers.Bounds.oppositeQuadrant = function(e) {
    var t = "";
    return t += "t" == e.charAt(0) ? "b" : "t", t += "l" == e.charAt(1) ? "r" : "l";
}, OpenLayers.Element = {
    "visible": function(e) {
        return "none" != OpenLayers.Util.getElement(e).style.display;
    },
    "toggle": function() {
        for (var e = 0, t = arguments.length; e < t; e++) {
            var i = OpenLayers.Util.getElement(arguments[e]), n = OpenLayers.Element.visible(i) ? "none" : "";
            i.style.display = n;
        }
    },
    "remove": function(e) {
        (e = OpenLayers.Util.getElement(e)).parentNode.removeChild(e);
    },
    "getHeight": function(e) {
        return (e = OpenLayers.Util.getElement(e)).offsetHeight;
    },
    "hasClass": function(e, t) {
        var i = e.className;
        return !!i && new RegExp("(^|\\s)" + t + "(\\s|$)").test(i);
    },
    "addClass": function(e, t) {
        return OpenLayers.Element.hasClass(e, t) || (e.className += (e.className ? " " : "") + t), 
        e;
    },
    "removeClass": function(e, t) {
        var i = e.className;
        return i && (e.className = OpenLayers.String.trim(i.replace(new RegExp("(^|\\s+)" + t + "(\\s+|$)"), " "))), 
        e;
    },
    "toggleClass": function(e, t) {
        return OpenLayers.Element.hasClass(e, t) ? OpenLayers.Element.removeClass(e, t) : OpenLayers.Element.addClass(e, t), 
        e;
    },
    "getStyle": function(e, t) {
        var i = null;
        if ((e = OpenLayers.Util.getElement(e)) && e.style) {
            if (!(i = e.style[OpenLayers.String.camelize(t)])) if (document.defaultView && document.defaultView.getComputedStyle) {
                var n = document.defaultView.getComputedStyle(e, null);
                i = n ? n.getPropertyValue(t) : null;
            } else e.currentStyle && (i = e.currentStyle[OpenLayers.String.camelize(t)]);
            var r = [ "left", "top", "right", "bottom" ];
            window.opera && -1 != OpenLayers.Util.indexOf(r, t) && "static" == OpenLayers.Element.getStyle(e, "position") && (i = "auto");
        }
        return "auto" == i ? null : i;
    }
}, OpenLayers.LonLat = OpenLayers.Class({
    "lon": 0,
    "lat": 0,
    "initialize": function(e, t) {
        OpenLayers.Util.isArray(e) && (t = e[1], e = e[0]), this.lon = OpenLayers.Util.toFloat(e), 
        this.lat = OpenLayers.Util.toFloat(t);
    },
    "toString": function() {
        return "lon=" + this.lon + ",lat=" + this.lat;
    },
    "toShortString": function() {
        return this.lon + ", " + this.lat;
    },
    "clone": function() {
        return new OpenLayers.LonLat(this.lon, this.lat);
    },
    "add": function(e, t) {
        if (null == e || null == t) throw new TypeError("LonLat.add cannot receive null values");
        return new OpenLayers.LonLat(this.lon + OpenLayers.Util.toFloat(e), this.lat + OpenLayers.Util.toFloat(t));
    },
    "equals": function(e) {
        var t = !1;
        return null != e && (t = this.lon == e.lon && this.lat == e.lat || isNaN(this.lon) && isNaN(this.lat) && isNaN(e.lon) && isNaN(e.lat)), 
        t;
    },
    "transform": function(e, t) {
        var i = OpenLayers.Projection.transform({
            "x": this.lon,
            "y": this.lat
        }, e, t);
        return this.lon = i.x, this.lat = i.y, this;
    },
    "wrapDateLine": function(e) {
        var t = this.clone();
        if (e) {
            for (;t.lon < e.left; ) t.lon += e.getWidth();
            for (;t.lon > e.right; ) t.lon -= e.getWidth();
        }
        return t;
    },
    "CLASS_NAME": "OpenLayers.LonLat"
}), OpenLayers.LonLat.fromString = function(e) {
    var t = e.split(",");
    return new OpenLayers.LonLat(t[0], t[1]);
}, OpenLayers.LonLat.fromArray = function(e) {
    var t = OpenLayers.Util.isArray(e), i = t && e[0], n = t && e[1];
    return new OpenLayers.LonLat(i, n);
}, OpenLayers.Pixel = OpenLayers.Class({
    "x": 0,
    "y": 0,
    "initialize": function(e, t) {
        this.x = parseFloat(e), this.y = parseFloat(t);
    },
    "toString": function() {
        return "x=" + this.x + ",y=" + this.y;
    },
    "clone": function() {
        return new OpenLayers.Pixel(this.x, this.y);
    },
    "equals": function(e) {
        var t = !1;
        return null != e && (t = this.x == e.x && this.y == e.y || isNaN(this.x) && isNaN(this.y) && isNaN(e.x) && isNaN(e.y)), 
        t;
    },
    "distanceTo": function(e) {
        return Math.sqrt(Math.pow(this.x - e.x, 2) + Math.pow(this.y - e.y, 2));
    },
    "add": function(e, t) {
        if (null == e || null == t) throw new TypeError("Pixel.add cannot receive null values");
        return new OpenLayers.Pixel(this.x + e, this.y + t);
    },
    "offset": function(e) {
        var t = this.clone();
        return e && (t = this.add(e.x, e.y)), t;
    },
    "CLASS_NAME": "OpenLayers.Pixel"
}), OpenLayers.Size = OpenLayers.Class({
    "w": 0,
    "h": 0,
    "initialize": function(e, t) {
        this.w = parseFloat(e), this.h = parseFloat(t);
    },
    "toString": function() {
        return "w=" + this.w + ",h=" + this.h;
    },
    "clone": function() {
        return new OpenLayers.Size(this.w, this.h);
    },
    "equals": function(e) {
        var t = !1;
        return null != e && (t = this.w == e.w && this.h == e.h || isNaN(this.w) && isNaN(this.h) && isNaN(e.w) && isNaN(e.h)), 
        t;
    },
    "CLASS_NAME": "OpenLayers.Size"
}), OpenLayers.Lang = {
    "code": null,
    "defaultCode": "en",
    "getCode": function() {
        return OpenLayers.Lang.code || OpenLayers.Lang.setCode(), OpenLayers.Lang.code;
    },
    "setCode": function(e) {
        var t;
        e || (e = "msie" == OpenLayers.BROWSER_NAME ? navigator.userLanguage : navigator.language);
        var i = e.split("-");
        if (i[0] = i[0].toLowerCase(), "object" == typeof OpenLayers.Lang[i[0]] && (t = i[0]), 
        i[1]) {
            var n = i[0] + "-" + i[1].toUpperCase();
            "object" == typeof OpenLayers.Lang[n] && (t = n);
        }
        t || (OpenLayers.Console.warn("Failed to find OpenLayers.Lang." + i.join("-") + " dictionary, falling back to default language"), 
        t = OpenLayers.Lang.defaultCode), OpenLayers.Lang.code = t;
    },
    "translate": function(e, t) {
        var i = OpenLayers.Lang[OpenLayers.Lang.getCode()], n = i && i[e];
        return n || (n = e), t && (n = OpenLayers.String.format(n, t)), n;
    }
}, OpenLayers.i18n = OpenLayers.Lang.translate, OpenLayers.Util = OpenLayers.Util || {}, 
OpenLayers.Util.getElement = function() {
    for (var e = [], t = 0, i = arguments.length; t < i; t++) {
        var n = arguments[t];
        if ("string" == typeof n && (n = document.getElementById(n)), 1 == arguments.length) return n;
        e.push(n);
    }
    return e;
}, OpenLayers.Util.isElement = function(e) {
    return !(!e || 1 !== e.nodeType);
}, OpenLayers.Util.isArray = function(e) {
    return "[object Array]" === Object.prototype.toString.call(e);
}, OpenLayers.Util.removeItem = function(e, t) {
    for (var i = e.length - 1; i >= 0; i--) e[i] == t && e.splice(i, 1);
    return e;
}, OpenLayers.Util.indexOf = function(e, t) {
    if ("function" == typeof e.indexOf) return e.indexOf(t);
    for (var i = 0, n = e.length; i < n; i++) if (e[i] == t) return i;
    return -1;
}, OpenLayers.Util.dotless = /\./g, OpenLayers.Util.modifyDOMElement = function(e, t, i, n, r, s, a, o) {
    t && (e.id = t.replace(OpenLayers.Util.dotless, "_")), i && (e.style.left = i.x + "px", 
    e.style.top = i.y + "px"), n && (e.style.width = n.w + "px", e.style.height = n.h + "px"), 
    r && (e.style.position = r), s && (e.style.border = s), a && (e.style.overflow = a), 
    parseFloat(o) >= 0 && parseFloat(o) < 1 ? (e.style.filter = "alpha(opacity=" + 100 * o + ")", 
    e.style.opacity = o) : 1 == parseFloat(o) && (e.style.filter = "", e.style.opacity = "");
}, OpenLayers.Util.createDiv = function(e, t, i, n, r, s, a, o) {
    var l = document.createElement("div");
    return n && (l.style.backgroundImage = "url(" + n + ")"), e || (e = OpenLayers.Util.createUniqueID("OpenLayersDiv")), 
    r || (r = "absolute"), OpenLayers.Util.modifyDOMElement(l, e, t, i, r, s, a, o), 
    l;
}, OpenLayers.Util.createImage = function(e, t, i, n, r, s, a, o) {
    function l() {
        h.style.display = "", OpenLayers.Event.stopObservingElement(h);
    }
    var h = document.createElement("img");
    return e || (e = OpenLayers.Util.createUniqueID("OpenLayersDiv")), r || (r = "relative"), 
    OpenLayers.Util.modifyDOMElement(h, e, t, i, r, s, null, a), o && (h.style.display = "none", 
    OpenLayers.Event.observe(h, "load", l), OpenLayers.Event.observe(h, "error", l)), 
    h.style.alt = e, h.galleryImg = "no", n && (h.src = n), h;
}, OpenLayers.IMAGE_RELOAD_ATTEMPTS = 0, OpenLayers.Util.alphaHackNeeded = null, 
OpenLayers.Util.alphaHack = function() {
    if (null == OpenLayers.Util.alphaHackNeeded) {
        var e = navigator.appVersion.split("MSIE"), t = parseFloat(e[1]), i = !1;
        try {
            i = !!document.body.filters;
        } catch (e) {}
        OpenLayers.Util.alphaHackNeeded = i && t >= 5.5 && t < 7;
    }
    return OpenLayers.Util.alphaHackNeeded;
}, OpenLayers.Util.modifyAlphaImageDiv = function(e, t, i, n, r, s, a, o, l) {
    OpenLayers.Util.modifyDOMElement(e, t, i, n, s, null, null, l);
    var h = e.childNodes[0];
    r && (h.src = r), OpenLayers.Util.modifyDOMElement(h, e.id + "_innerImage", null, n, "relative", a), 
    OpenLayers.Util.alphaHack() && ("none" != e.style.display && (e.style.display = "inline-block"), 
    null == o && (o = "scale"), e.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + h.src + "', sizingMethod='" + o + "')", 
    parseFloat(e.style.opacity) >= 0 && parseFloat(e.style.opacity) < 1 && (e.style.filter += " alpha(opacity=" + 100 * e.style.opacity + ")"), 
    h.style.filter = "alpha(opacity=0)");
}, OpenLayers.Util.createAlphaImageDiv = function(e, t, i, n, r, s, a, o, l) {
    var h = OpenLayers.Util.createDiv(), u = OpenLayers.Util.createImage(null, null, null, null, null, null, null, l);
    return u.className = "olAlphaImg", h.appendChild(u), OpenLayers.Util.modifyAlphaImageDiv(h, e, t, i, n, r, s, a, o), 
    h;
}, OpenLayers.Util.upperCaseObject = function(e) {
    var t = {};
    for (var i in e) t[i.toUpperCase()] = e[i];
    return t;
}, OpenLayers.Util.applyDefaults = function(e, t) {
    e = e || {};
    var i = "function" == typeof window.Event && t instanceof window.Event;
    for (var n in t) (void 0 === e[n] || !i && t.hasOwnProperty && t.hasOwnProperty(n) && !e.hasOwnProperty(n)) && (e[n] = t[n]);
    return !i && t && t.hasOwnProperty && t.hasOwnProperty("toString") && !e.hasOwnProperty("toString") && (e.toString = t.toString), 
    e;
}, OpenLayers.Util.getParameterString = function(e) {
    var t = [];
    for (var i in e) {
        var n = e[i];
        if (null != n && "function" != typeof n) {
            var r;
            if ("object" == typeof n && n.constructor == Array) {
                for (var s, a = [], o = 0, l = n.length; o < l; o++) s = n[o], a.push(encodeURIComponent(null === s || void 0 === s ? "" : s));
                r = a.join(",");
            } else r = encodeURIComponent(n);
            t.push(encodeURIComponent(i) + "=" + r);
        }
    }
    return t.join("&");
}, OpenLayers.Util.urlAppend = function(e, t) {
    var i = e;
    if (t) {
        var n = (e + " ").split(/[?&]/);
        i += " " === n.pop() ? t : n.length ? "&" + t : "?" + t;
    }
    return i;
}, OpenLayers.Util.getImagesLocation = function() {
    return OpenLayers.ImgPath || OpenLayers._getScriptLocation() + "img/";
}, OpenLayers.Util.getImageLocation = function(e) {
    return OpenLayers.Util.getImagesLocation() + e;
}, OpenLayers.Util.Try = function() {
    for (var e = null, t = 0, i = arguments.length; t < i; t++) {
        var n = arguments[t];
        try {
            e = n();
            break;
        } catch (e) {}
    }
    return e;
}, OpenLayers.Util.getXmlNodeValue = function(e) {
    var t = null;
    return OpenLayers.Util.Try(function() {
        (t = e.text) || (t = e.textContent), t || (t = e.firstChild.nodeValue);
    }, function() {
        t = e.textContent;
    }), t;
}, OpenLayers.Util.mouseLeft = function(e, t) {
    for (var i = e.relatedTarget ? e.relatedTarget : e.toElement; i != t && null != i; ) i = i.parentNode;
    return i != t;
}, OpenLayers.Util.DEFAULT_PRECISION = 14, OpenLayers.Util.toFloat = function(e, t) {
    return null == t && (t = OpenLayers.Util.DEFAULT_PRECISION), "number" != typeof e && (e = parseFloat(e)), 
    0 === t ? e : parseFloat(e.toPrecision(t));
}, OpenLayers.Util.rad = function(e) {
    return e * Math.PI / 180;
}, OpenLayers.Util.deg = function(e) {
    return 180 * e / Math.PI;
}, OpenLayers.Util.VincentyConstants = {
    "a": 6378137,
    "b": 6356752.3142,
    "f": 1 / 298.257223563
}, OpenLayers.Util.distVincenty = function(e, t) {
    for (var i = OpenLayers.Util.VincentyConstants, n = i.a, r = i.b, s = i.f, a = OpenLayers.Util.rad(t.lon - e.lon), o = Math.atan((1 - s) * Math.tan(OpenLayers.Util.rad(e.lat))), l = Math.atan((1 - s) * Math.tan(OpenLayers.Util.rad(t.lat))), h = Math.sin(o), u = Math.cos(o), p = Math.sin(l), c = Math.cos(l), d = a, f = 2 * Math.PI, y = 20; Math.abs(d - f) > 1e-12 && --y > 0; ) {
        var m = Math.sin(d), g = Math.cos(d), v = Math.sqrt(c * m * (c * m) + (u * p - h * c * g) * (u * p - h * c * g));
        if (0 == v) return 0;
        var L = h * p + u * c * g, O = Math.atan2(v, L), b = Math.asin(u * c * m / v), w = Math.cos(b) * Math.cos(b), C = L - 2 * h * p / w, S = s / 16 * w * (4 + s * (4 - 3 * w));
        f = d, d = a + (1 - S) * s * Math.sin(b) * (O + S * v * (C + S * L * (2 * C * C - 1)));
    }
    if (0 == y) return NaN;
    var x = w * (n * n - r * r) / (r * r), _ = x / 1024 * (256 + x * (x * (74 - 47 * x) - 128));
    return (r * (1 + x / 16384 * (4096 + x * (x * (320 - 175 * x) - 768))) * (O - _ * v * (C + _ / 4 * (L * (2 * C * C - 1) - _ / 6 * C * (4 * v * v - 3) * (4 * C * C - 3))))).toFixed(3) / 1e3;
}, OpenLayers.Util.destinationVincenty = function(e, t, i) {
    for (var n = OpenLayers.Util, r = n.VincentyConstants, s = r.a, a = r.b, o = r.f, l = e.lon, h = e.lat, u = i, p = n.rad(t), c = Math.sin(p), d = Math.cos(p), f = (1 - o) * Math.tan(n.rad(h)), y = 1 / Math.sqrt(1 + f * f), m = f * y, g = Math.atan2(f, d), v = y * c, L = 1 - v * v, O = L * (s * s - a * a) / (a * a), b = 1 + O / 16384 * (4096 + O * (O * (320 - 175 * O) - 768)), w = O / 1024 * (256 + O * (O * (74 - 47 * O) - 128)), C = u / (a * b), S = 2 * Math.PI; Math.abs(C - S) > 1e-12; ) {
        var x = Math.cos(2 * g + C), _ = Math.sin(C), E = Math.cos(C);
        S = C, C = u / (a * b) + w * _ * (x + w / 4 * (E * (2 * x * x - 1) - w / 6 * x * (4 * _ * _ - 3) * (4 * x * x - 3)));
    }
    var N = m * _ - y * E * d, P = Math.atan2(m * E + y * _ * d, (1 - o) * Math.sqrt(v * v + N * N)), T = o / 16 * L * (4 + o * (4 - 3 * L)), M = Math.atan2(_ * c, y * E - m * _ * d) - (1 - T) * o * v * (C + T * _ * (x + T * E * (2 * x * x - 1)));
    Math.atan2(v, -N);
    return new OpenLayers.LonLat(l + n.deg(M), n.deg(P));
}, OpenLayers.Util.getParameters = function(e, t) {
    t = t || {}, e = null === e || void 0 === e ? window.location.href : e;
    var i = "";
    if (OpenLayers.String.contains(e, "?")) {
        var n = e.indexOf("?") + 1, r = OpenLayers.String.contains(e, "#") ? e.indexOf("#") : e.length;
        i = e.substring(n, r);
    }
    for (var s = {}, a = i.split(/[&;]/), o = 0, l = a.length; o < l; ++o) {
        var h = a[o].split("=");
        if (h[0]) {
            var u = h[0];
            try {
                u = decodeURIComponent(u);
            } catch (e) {
                u = unescape(u);
            }
            var p = (h[1] || "").replace(/\+/g, " ");
            try {
                p = decodeURIComponent(p);
            } catch (e) {
                p = unescape(p);
            }
            !1 !== t.splitArgs && (p = p.split(",")), 1 == p.length && (p = p[0]), s[u] = p;
        }
    }
    return s;
}, OpenLayers.Util.lastSeqID = 0, OpenLayers.Util.createUniqueID = function(e) {
    return e = null == e ? "id_" : e.replace(OpenLayers.Util.dotless, "_"), OpenLayers.Util.lastSeqID += 1, 
    e + OpenLayers.Util.lastSeqID;
}, OpenLayers.INCHES_PER_UNIT = {
    "inches": 1,
    "ft": 12,
    "mi": 63360,
    "m": 39.37,
    "km": 39370,
    "dd": 4374754,
    "yd": 36
}, OpenLayers.INCHES_PER_UNIT.in = OpenLayers.INCHES_PER_UNIT.inches, OpenLayers.INCHES_PER_UNIT.degrees = OpenLayers.INCHES_PER_UNIT.dd, 
OpenLayers.INCHES_PER_UNIT.nmi = 1852 * OpenLayers.INCHES_PER_UNIT.m, OpenLayers.METERS_PER_INCH = .0254000508001016, 
OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT, {
    "Inch": OpenLayers.INCHES_PER_UNIT.inches,
    "Meter": 1 / OpenLayers.METERS_PER_INCH,
    "Foot": .3048006096012192 / OpenLayers.METERS_PER_INCH,
    "IFoot": .3048 / OpenLayers.METERS_PER_INCH,
    "ClarkeFoot": .3047972651151 / OpenLayers.METERS_PER_INCH,
    "SearsFoot": .30479947153867626 / OpenLayers.METERS_PER_INCH,
    "GoldCoastFoot": .3047997101815088 / OpenLayers.METERS_PER_INCH,
    "IInch": .0254 / OpenLayers.METERS_PER_INCH,
    "MicroInch": 254e-7 / OpenLayers.METERS_PER_INCH,
    "Mil": 2.54e-8 / OpenLayers.METERS_PER_INCH,
    "Centimeter": .01 / OpenLayers.METERS_PER_INCH,
    "Kilometer": 1e3 / OpenLayers.METERS_PER_INCH,
    "Yard": .9144018288036576 / OpenLayers.METERS_PER_INCH,
    "SearsYard": .914398414616029 / OpenLayers.METERS_PER_INCH,
    "IndianYard": .9143985307444408 / OpenLayers.METERS_PER_INCH,
    "IndianYd37": .91439523 / OpenLayers.METERS_PER_INCH,
    "IndianYd62": .9143988 / OpenLayers.METERS_PER_INCH,
    "IndianYd75": .9143985 / OpenLayers.METERS_PER_INCH,
    "IndianFoot": .30479951 / OpenLayers.METERS_PER_INCH,
    "IndianFt37": .30479841 / OpenLayers.METERS_PER_INCH,
    "IndianFt62": .3047996 / OpenLayers.METERS_PER_INCH,
    "IndianFt75": .3047995 / OpenLayers.METERS_PER_INCH,
    "Mile": 1609.3472186944373 / OpenLayers.METERS_PER_INCH,
    "IYard": .9144 / OpenLayers.METERS_PER_INCH,
    "IMile": 1609.344 / OpenLayers.METERS_PER_INCH,
    "NautM": 1852 / OpenLayers.METERS_PER_INCH,
    "Lat-66": 110943.31648893273 / OpenLayers.METERS_PER_INCH,
    "Lat-83": 110946.25736872235 / OpenLayers.METERS_PER_INCH,
    "Decimeter": .1 / OpenLayers.METERS_PER_INCH,
    "Millimeter": .001 / OpenLayers.METERS_PER_INCH,
    "Dekameter": 10 / OpenLayers.METERS_PER_INCH,
    "Decameter": 10 / OpenLayers.METERS_PER_INCH,
    "Hectometer": 100 / OpenLayers.METERS_PER_INCH,
    "GermanMeter": 1.0000135965 / OpenLayers.METERS_PER_INCH,
    "CaGrid": .999738 / OpenLayers.METERS_PER_INCH,
    "ClarkeChain": 20.1166194976 / OpenLayers.METERS_PER_INCH,
    "GunterChain": 20.11684023368047 / OpenLayers.METERS_PER_INCH,
    "BenoitChain": 20.116782494375872 / OpenLayers.METERS_PER_INCH,
    "SearsChain": 20.11676512155 / OpenLayers.METERS_PER_INCH,
    "ClarkeLink": .201166194976 / OpenLayers.METERS_PER_INCH,
    "GunterLink": .2011684023368047 / OpenLayers.METERS_PER_INCH,
    "BenoitLink": .20116782494375873 / OpenLayers.METERS_PER_INCH,
    "SearsLink": .2011676512155 / OpenLayers.METERS_PER_INCH,
    "Rod": 5.02921005842012 / OpenLayers.METERS_PER_INCH,
    "IntnlChain": 20.1168 / OpenLayers.METERS_PER_INCH,
    "IntnlLink": .201168 / OpenLayers.METERS_PER_INCH,
    "Perch": 5.02921005842012 / OpenLayers.METERS_PER_INCH,
    "Pole": 5.02921005842012 / OpenLayers.METERS_PER_INCH,
    "Furlong": 201.1684023368046 / OpenLayers.METERS_PER_INCH,
    "Rood": 3.778266898 / OpenLayers.METERS_PER_INCH,
    "CapeFoot": .3047972615 / OpenLayers.METERS_PER_INCH,
    "Brealey": 375 / OpenLayers.METERS_PER_INCH,
    "ModAmFt": .304812252984506 / OpenLayers.METERS_PER_INCH,
    "Fathom": 1.8288 / OpenLayers.METERS_PER_INCH,
    "NautM-UK": 1853.184 / OpenLayers.METERS_PER_INCH,
    "50kilometers": 5e4 / OpenLayers.METERS_PER_INCH,
    "150kilometers": 15e4 / OpenLayers.METERS_PER_INCH
}), OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT, {
    "mm": OpenLayers.INCHES_PER_UNIT.Meter / 1e3,
    "cm": OpenLayers.INCHES_PER_UNIT.Meter / 100,
    "dm": 100 * OpenLayers.INCHES_PER_UNIT.Meter,
    "km": 1e3 * OpenLayers.INCHES_PER_UNIT.Meter,
    "kmi": OpenLayers.INCHES_PER_UNIT.nmi,
    "fath": OpenLayers.INCHES_PER_UNIT.Fathom,
    "ch": OpenLayers.INCHES_PER_UNIT.IntnlChain,
    "link": OpenLayers.INCHES_PER_UNIT.IntnlLink,
    "us-in": OpenLayers.INCHES_PER_UNIT.inches,
    "us-ft": OpenLayers.INCHES_PER_UNIT.Foot,
    "us-yd": OpenLayers.INCHES_PER_UNIT.Yard,
    "us-ch": OpenLayers.INCHES_PER_UNIT.GunterChain,
    "us-mi": OpenLayers.INCHES_PER_UNIT.Mile,
    "ind-yd": OpenLayers.INCHES_PER_UNIT.IndianYd37,
    "ind-ft": OpenLayers.INCHES_PER_UNIT.IndianFt37,
    "ind-ch": 20.11669506 / OpenLayers.METERS_PER_INCH
}), OpenLayers.DOTS_PER_INCH = 72, OpenLayers.Util.normalizeScale = function(e) {
    return e > 1 ? 1 / e : e;
}, OpenLayers.Util.getResolutionFromScale = function(e, t) {
    var i;
    return e && (null == t && (t = "degrees"), i = 1 / (OpenLayers.Util.normalizeScale(e) * OpenLayers.INCHES_PER_UNIT[t] * OpenLayers.DOTS_PER_INCH)), 
    i;
}, OpenLayers.Util.getScaleFromResolution = function(e, t) {
    return null == t && (t = "degrees"), e * OpenLayers.INCHES_PER_UNIT[t] * OpenLayers.DOTS_PER_INCH;
}, OpenLayers.Util.pagePosition = function(e) {
    var t = [ 0, 0 ], i = OpenLayers.Util.getViewportElement();
    if (!e || e == window || e == i) return t;
    var n, r = OpenLayers.IS_GECKO && document.getBoxObjectFor && "absolute" == OpenLayers.Element.getStyle(e, "position") && ("" == e.style.top || "" == e.style.left), s = null;
    if (e.getBoundingClientRect) {
        n = e.getBoundingClientRect();
        var a = window.pageYOffset || i.scrollTop, o = window.pageXOffset || i.scrollLeft;
        t[0] = n.left + o, t[1] = n.top + a;
    } else if (document.getBoxObjectFor && !r) {
        n = document.getBoxObjectFor(e);
        var l = document.getBoxObjectFor(i);
        t[0] = n.screenX - l.screenX, t[1] = n.screenY - l.screenY;
    } else {
        if (t[0] = e.offsetLeft, t[1] = e.offsetTop, (s = e.offsetParent) != e) for (;s; ) t[0] += s.offsetLeft, 
        t[1] += s.offsetTop, s = s.offsetParent;
        var h = OpenLayers.BROWSER_NAME;
        for (("opera" == h || "safari" == h && "absolute" == OpenLayers.Element.getStyle(e, "position")) && (t[1] -= document.body.offsetTop), 
        s = e.offsetParent; s && s != document.body; ) t[0] -= s.scrollLeft, "opera" == h && "TR" == s.tagName || (t[1] -= s.scrollTop), 
        s = s.offsetParent;
    }
    return t;
}, OpenLayers.Util.getViewportElement = function() {
    var e = arguments.callee.viewportElement;
    return void 0 == e && (e = "msie" == OpenLayers.BROWSER_NAME && "CSS1Compat" != document.compatMode ? document.body : document.documentElement, 
    arguments.callee.viewportElement = e), e;
}, OpenLayers.Util.isEquivalentUrl = function(e, t, i) {
    i = i || {}, OpenLayers.Util.applyDefaults(i, {
        "ignoreCase": !0,
        "ignorePort80": !0,
        "ignoreHash": !0,
        "splitArgs": !1
    });
    var n = OpenLayers.Util.createUrlObject(e, i), r = OpenLayers.Util.createUrlObject(t, i);
    for (var s in n) if ("args" !== s && n[s] != r[s]) return !1;
    for (var s in n.args) {
        if (n.args[s] != r.args[s]) return !1;
        delete r.args[s];
    }
    for (var s in r.args) return !1;
    return !0;
}, OpenLayers.Util.createUrlObject = function(e, t) {
    if (t = t || {}, !/^\w+:\/\//.test(e)) {
        var i = window.location, n = i.port ? ":" + i.port : "", r = i.protocol + "//" + i.host.split(":").shift() + n;
        if (0 === e.indexOf("/")) e = r + e; else {
            var s = i.pathname.split("/");
            s.pop(), e = r + s.join("/") + "/" + e;
        }
    }
    t.ignoreCase && (e = e.toLowerCase());
    var a = document.createElement("a");
    a.href = e;
    var o = {};
    o.host = a.host.split(":").shift(), o.protocol = a.protocol, t.ignorePort80 ? o.port = "80" == a.port || "0" == a.port ? "" : a.port : o.port = "" == a.port || "0" == a.port ? "80" : a.port, 
    o.hash = t.ignoreHash || "#" === a.hash ? "" : a.hash;
    var l = a.search;
    if (!l) {
        var h = e.indexOf("?");
        l = -1 != h ? e.substr(h) : "";
    }
    return o.args = OpenLayers.Util.getParameters(l, {
        "splitArgs": t.splitArgs
    }), o.pathname = "/" == a.pathname.charAt(0) ? a.pathname : "/" + a.pathname, o;
}, OpenLayers.Util.removeTail = function(e) {
    var t = e.indexOf("?"), i = e.indexOf("#");
    return -1 == t ? -1 != i ? e.substr(0, i) : e : -1 != i ? e.substr(0, Math.min(t, i)) : e.substr(0, t);
}, OpenLayers.IS_GECKO = function() {
    var e = navigator.userAgent.toLowerCase();
    return -1 == e.indexOf("webkit") && -1 != e.indexOf("gecko");
}(), OpenLayers.CANVAS_SUPPORTED = function() {
    var e = document.createElement("canvas");
    return !(!e.getContext || !e.getContext("2d"));
}(), OpenLayers.BROWSER_NAME = function() {
    var e = "", t = navigator.userAgent.toLowerCase();
    return -1 != t.indexOf("opera") ? e = "opera" : -1 != t.indexOf("msie") ? e = "msie" : -1 != t.indexOf("safari") ? e = "safari" : -1 != t.indexOf("mozilla") && (e = -1 != t.indexOf("firefox") ? "firefox" : "mozilla"), 
    e;
}(), OpenLayers.Util.getBrowserName = function() {
    return OpenLayers.BROWSER_NAME;
}, OpenLayers.Util.getRenderedDimensions = function(e, t, i) {
    var n, r, s = document.createElement("div");
    s.style.visibility = "hidden";
    for (var a = i && i.containerElement ? i.containerElement : document.body, o = !1, l = null, h = a; h && "body" != h.tagName.toLowerCase(); ) {
        var u = OpenLayers.Element.getStyle(h, "position");
        if ("absolute" == u) {
            o = !0;
            break;
        }
        if (u && "static" != u) break;
        h = h.parentNode;
    }
    !o || 0 !== a.clientHeight && 0 !== a.clientWidth || ((l = document.createElement("div")).style.visibility = "hidden", 
    l.style.position = "absolute", l.style.overflow = "visible", l.style.width = document.body.clientWidth + "px", 
    l.style.height = document.body.clientHeight + "px", l.appendChild(s)), s.style.position = "absolute", 
    t && (t.w ? (n = t.w, s.style.width = n + "px") : t.h && (r = t.h, s.style.height = r + "px")), 
    i && i.displayClass && (s.className = i.displayClass);
    var p = document.createElement("div");
    if (p.innerHTML = e, p.style.overflow = "visible", p.childNodes) for (var c = 0, d = p.childNodes.length; c < d; c++) p.childNodes[c].style && (p.childNodes[c].style.overflow = "visible");
    return s.appendChild(p), l ? a.appendChild(l) : a.appendChild(s), n || (n = parseInt(p.scrollWidth), 
    s.style.width = n + "px"), r || (r = parseInt(p.scrollHeight)), s.removeChild(p), 
    l ? (l.removeChild(s), a.removeChild(l)) : a.removeChild(s), new OpenLayers.Size(n, r);
}, OpenLayers.Util.getScrollbarWidth = function() {
    var e = OpenLayers.Util._scrollbarWidth;
    if (null == e) {
        var t = null, i = null, n = 0, r = 0;
        (t = document.createElement("div")).style.position = "absolute", t.style.top = "-1000px", 
        t.style.left = "-1000px", t.style.width = "100px", t.style.height = "50px", t.style.overflow = "hidden", 
        (i = document.createElement("div")).style.width = "100%", i.style.height = "200px", 
        t.appendChild(i), document.body.appendChild(t), n = i.offsetWidth, t.style.overflow = "scroll", 
        r = i.offsetWidth, document.body.removeChild(document.body.lastChild), OpenLayers.Util._scrollbarWidth = n - r, 
        e = OpenLayers.Util._scrollbarWidth;
    }
    return e;
}, OpenLayers.Util.getFormattedLonLat = function(e, t, i) {
    i || (i = "dms"), e = (e + 540) % 360 - 180;
    var n = Math.abs(e), r = Math.floor(n), s = (n - r) / (1 / 60), a = (s - (s = Math.floor(s))) / (1 / 60);
    a = Math.round(10 * a), (a /= 10) >= 60 && (a -= 60, (s += 1) >= 60 && (s -= 60, 
    r += 1)), r < 10 && (r = "0" + r);
    var o = r + "";
    return i.indexOf("dm") >= 0 && (s < 10 && (s = "0" + s), o += s + "'", i.indexOf("dms") >= 0 && (a < 10 && (a = "0" + a), 
    o += a + '"')), o += "lon" == t ? e < 0 ? OpenLayers.i18n("W") : OpenLayers.i18n("E") : e < 0 ? OpenLayers.i18n("S") : OpenLayers.i18n("N");
}, OpenLayers.Util.getConstructor = function(e) {
    var t, i = e.split(".");
    t = "OpenLayers" === i[0] ? OpenLayers : window[i[0]];
    for (var n = 1, r = i.length; n < r; ++n) t = t[i[n]];
    return t;
}, OpenLayers.Event = {
    "observers": !1,
    "KEY_SPACE": 32,
    "KEY_BACKSPACE": 8,
    "KEY_TAB": 9,
    "KEY_RETURN": 13,
    "KEY_ESC": 27,
    "KEY_LEFT": 37,
    "KEY_UP": 38,
    "KEY_RIGHT": 39,
    "KEY_DOWN": 40,
    "KEY_DELETE": 46,
    "element": function(e) {
        return e.target || e.srcElement;
    },
    "isSingleTouch": function(e) {
        return e.touches && 1 == e.touches.length;
    },
    "isMultiTouch": function(e) {
        return e.touches && e.touches.length > 1;
    },
    "isTouchEvent": function(e) {
        return 0 === ("" + e.type).indexOf("touch") || "pointerType" in e && (e.pointerType === e.MSPOINTER_TYPE_TOUCH || "touch" === e.pointerType);
    },
    "isLeftClick": function(e) {
        return e.which && 1 == e.which || e.button && 1 == e.button;
    },
    "isRightClick": function(e) {
        return e.which && 3 == e.which || e.button && 2 == e.button;
    },
    "stop": function(e, t) {
        t || OpenLayers.Event.preventDefault(e), e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0;
    },
    "preventDefault": function(e) {
        e.preventDefault ? e.preventDefault() : e.returnValue = !1;
    },
    "findElement": function(e, t) {
        for (var i = OpenLayers.Event.element(e); i.parentNode && (!i.tagName || i.tagName.toUpperCase() != t.toUpperCase()); ) i = i.parentNode;
        return i;
    },
    "observe": function(e, t, i, n) {
        var r = OpenLayers.Util.getElement(e);
        if (n = n || !1, "keypress" == t && (navigator.appVersion.match(/Konqueror|Safari|KHTML/) || r.attachEvent) && (t = "keydown"), 
        this.observers || (this.observers = {}), !r._eventCacheID) {
            var s = "eventCacheID_";
            r.id && (s = r.id + "_" + s), r._eventCacheID = OpenLayers.Util.createUniqueID(s);
        }
        var a = r._eventCacheID;
        this.observers[a] || (this.observers[a] = []), this.observers[a].push({
            "element": r,
            "name": t,
            "observer": i,
            "useCapture": n
        }), r.addEventListener ? r.addEventListener(t, i, n) : r.attachEvent && r.attachEvent("on" + t, i);
    },
    "stopObservingElement": function(e) {
        var t = OpenLayers.Util.getElement(e)._eventCacheID;
        this._removeElementObservers(OpenLayers.Event.observers[t]);
    },
    "_removeElementObservers": function(e) {
        if (e) for (var t = e.length - 1; t >= 0; t--) {
            var i = e[t];
            OpenLayers.Event.stopObserving.apply(this, [ i.element, i.name, i.observer, i.useCapture ]);
        }
    },
    "stopObserving": function(e, t, i, n) {
        n = n || !1;
        var r = OpenLayers.Util.getElement(e), s = r._eventCacheID;
        "keypress" == t && (navigator.appVersion.match(/Konqueror|Safari|KHTML/) || r.detachEvent) && (t = "keydown");
        var a = !1, o = OpenLayers.Event.observers[s];
        if (o) for (var l = 0; !a && l < o.length; ) {
            var h = o[l];
            if (h.name == t && h.observer == i && h.useCapture == n) {
                o.splice(l, 1), 0 == o.length && delete OpenLayers.Event.observers[s], a = !0;
                break;
            }
            l++;
        }
        return a && (r.removeEventListener ? r.removeEventListener(t, i, n) : r && r.detachEvent && r.detachEvent("on" + t, i)), 
        a;
    },
    "unloadCache": function() {
        if (OpenLayers.Event && OpenLayers.Event.observers) {
            for (var e in OpenLayers.Event.observers) {
                var t = OpenLayers.Event.observers[e];
                OpenLayers.Event._removeElementObservers.apply(this, [ t ]);
            }
            OpenLayers.Event.observers = !1;
        }
    },
    "CLASS_NAME": "OpenLayers.Event"
}, OpenLayers.Event.observe(window, "unload", OpenLayers.Event.unloadCache, !1), 
OpenLayers.Events = OpenLayers.Class({
    "BROWSER_EVENTS": [ "mouseover", "mouseout", "mousedown", "mouseup", "mousemove", "click", "dblclick", "rightclick", "dblrightclick", "resize", "focus", "blur", "touchstart", "touchmove", "touchend", "keydown" ],
    "TOUCH_MODEL_POINTER": "pointer",
    "TOUCH_MODEL_MSPOINTER": "MSPointer",
    "TOUCH_MODEL_TOUCH": "touch",
    "listeners": null,
    "object": null,
    "element": null,
    "eventHandler": null,
    "fallThrough": null,
    "includeXY": !1,
    "extensions": null,
    "extensionCount": null,
    "clearMouseListener": null,
    "initialize": function(e, t, i, n, r) {
        OpenLayers.Util.extend(this, r), this.object = e, this.fallThrough = n, this.listeners = {}, 
        this.extensions = {}, this.extensionCount = {}, this._pointerTouches = [], null != t && this.attachToElement(t);
    },
    "destroy": function() {
        for (var e in this.extensions) "boolean" != typeof this.extensions[e] && this.extensions[e].destroy();
        this.extensions = null, this.element && (OpenLayers.Event.stopObservingElement(this.element), 
        this.element.hasScrollEvent && OpenLayers.Event.stopObserving(window, "scroll", this.clearMouseListener)), 
        this.element = null, this.listeners = null, this.object = null, this.fallThrough = null, 
        this.eventHandler = null;
    },
    "addEventType": function(e) {},
    "attachToElement": function(e) {
        this.element ? OpenLayers.Event.stopObservingElement(this.element) : (this.eventHandler = OpenLayers.Function.bindAsEventListener(this.handleBrowserEvent, this), 
        this.clearMouseListener = OpenLayers.Function.bind(this.clearMouseCache, this)), 
        this.element = e;
        for (var t, i = this.getTouchModel(), n = 0, r = this.BROWSER_EVENTS.length; n < r; n++) t = this.BROWSER_EVENTS[n], 
        i !== this.TOUCH_MODEL_POINTER && i !== this.TOUCH_MODEL_MSPOINTER || 0 !== t.indexOf("touch") ? OpenLayers.Event.observe(e, t, this.eventHandler) : this.addPointerTouchListener(e, t, this.eventHandler);
        OpenLayers.Event.observe(e, "dragstart", OpenLayers.Event.stop);
    },
    "on": function(e) {
        for (var t in e) "scope" != t && e.hasOwnProperty(t) && this.register(t, e.scope, e[t]);
    },
    "register": function(e, t, i, n) {
        if (e in OpenLayers.Events && !this.extensions[e] && (this.extensions[e] = new OpenLayers.Events[e](this)), 
        null != i) {
            null == t && (t = this.object);
            var r = this.listeners[e];
            r || (r = [], this.listeners[e] = r, this.extensionCount[e] = 0);
            var s = {
                "obj": t,
                "func": i
            };
            n ? (r.splice(this.extensionCount[e], 0, s), "object" == typeof n && n.extension && this.extensionCount[e]++) : r.push(s);
        }
    },
    "registerPriority": function(e, t, i) {
        this.register(e, t, i, !0);
    },
    "un": function(e) {
        for (var t in e) "scope" != t && e.hasOwnProperty(t) && this.unregister(t, e.scope, e[t]);
    },
    "unregister": function(e, t, i) {
        null == t && (t = this.object);
        var n = this.listeners[e];
        if (null != n) for (var r = 0, s = n.length; r < s; r++) if (n[r].obj == t && n[r].func == i) {
            n.splice(r, 1);
            break;
        }
    },
    "remove": function(e) {
        null != this.listeners[e] && (this.listeners[e] = []);
    },
    "triggerEvent": function(e, t) {
        var i = this.listeners[e];
        if (i && 0 != i.length) {
            null == t && (t = {}), t.object = this.object, t.element = this.element, t.type || (t.type = e);
            for (var n, r = 0, s = (i = i.slice()).length; r < s; r++) {
                var a = i[r];
                if (void 0 != (n = a.func.apply(a.obj, [ t ])) && 0 == n) break;
            }
            return this.fallThrough || OpenLayers.Event.stop(t, !0), n;
        }
    },
    "handleBrowserEvent": function(e) {
        var t = e.type, i = this.listeners[t];
        if (i && 0 != i.length) {
            var n = e.touches;
            if (n && n[0]) {
                for (var r, s = 0, a = 0, o = n.length, l = 0; l < o; ++l) s += (r = this.getTouchClientXY(n[l])).clientX, 
                a += r.clientY;
                e.clientX = s / o, e.clientY = a / o;
            }
            this.includeXY && (e.xy = this.getMousePosition(e)), this.triggerEvent(t, e);
        }
    },
    "getTouchClientXY": function(e) {
        var t = window.olMockWin || window, i = t.pageXOffset, n = t.pageYOffset, r = e.clientX, s = e.clientY;
        return 0 === e.pageY && Math.floor(s) > Math.floor(e.pageY) || 0 === e.pageX && Math.floor(r) > Math.floor(e.pageX) ? (r -= i, 
        s -= n) : (s < e.pageY - n || r < e.pageX - i) && (r = e.pageX - i, s = e.pageY - n), 
        e.olClientX = r, e.olClientY = s, {
            "clientX": r,
            "clientY": s
        };
    },
    "clearMouseCache": function() {
        this.element.scrolls = null, this.element.lefttop = null, this.element.offsets = null;
    },
    "getMousePosition": function(e) {
        if (this.includeXY ? this.element.hasScrollEvent || (OpenLayers.Event.observe(window, "scroll", this.clearMouseListener), 
        this.element.hasScrollEvent = !0) : this.clearMouseCache(), !this.element.scrolls) {
            var t = OpenLayers.Util.getViewportElement();
            this.element.scrolls = [ window.pageXOffset || t.scrollLeft, window.pageYOffset || t.scrollTop ];
        }
        return this.element.lefttop || (this.element.lefttop = [ document.documentElement.clientLeft || 0, document.documentElement.clientTop || 0 ]), 
        this.element.offsets || (this.element.offsets = OpenLayers.Util.pagePosition(this.element)), 
        new OpenLayers.Pixel(e.clientX + this.element.scrolls[0] - this.element.offsets[0] - this.element.lefttop[0], e.clientY + this.element.scrolls[1] - this.element.offsets[1] - this.element.lefttop[1]);
    },
    "getTouchModel": function() {
        return "_TOUCH_MODEL" in OpenLayers.Events || (OpenLayers.Events._TOUCH_MODEL = window.PointerEvent && "pointer" || window.MSPointerEvent && "MSPointer" || "ontouchdown" in document && "touch" || null), 
        OpenLayers.Events._TOUCH_MODEL;
    },
    "addPointerTouchListener": function(e, t, i) {
        function n(e) {
            i(OpenLayers.Util.applyDefaults({
                "stopPropagation": function() {
                    for (var e = r.length - 1; e >= 0; --e) r[e].stopPropagation();
                },
                "preventDefault": function() {
                    for (var e = r.length - 1; e >= 0; --e) r[e].preventDefault();
                },
                "type": t
            }, e));
        }
        this.eventHandler;
        var r = this._pointerTouches;
        switch (t) {
          case "touchstart":
            return this.addPointerTouchListenerStart(e, t, n);

          case "touchend":
            return this.addPointerTouchListenerEnd(e, t, n);

          case "touchmove":
            return this.addPointerTouchListenerMove(e, t, n);

          default:
            throw "Unknown touch event type";
        }
    },
    "addPointerTouchListenerStart": function(e, t, i) {
        var n = this._pointerTouches;
        OpenLayers.Event.observe(e, this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ? "MSPointerDown" : "pointerdown", function(e) {
            if (OpenLayers.Event.isTouchEvent(e)) {
                for (var t = !1, r = 0, s = n.length; r < s; ++r) if (n[r].pointerId == e.pointerId) {
                    t = !0;
                    break;
                }
                t || n.push(e), e.touches = n.slice(), i(e);
            }
        });
        OpenLayers.Event.observe(e, this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ? "MSPointerOut" : "pointerout", function(e) {
            if (OpenLayers.Event.isTouchEvent(e)) for (var t = 0, i = n.length; t < i; ++t) if (n[t].pointerId == e.pointerId) {
                0 != this.clientWidth && 0 != this.clientHeight && (Math.ceil(e.clientX) >= this.clientWidth || Math.ceil(e.clientY) >= this.clientHeight) && n.splice(t, 1);
                break;
            }
        });
    },
    "addPointerTouchListenerMove": function(e, t, i) {
        var n = this._pointerTouches;
        OpenLayers.Event.observe(e, this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ? "MSPointerMove" : "pointermove", function(e) {
            if (OpenLayers.Event.isTouchEvent(e) && (1 != n.length || n[0].pageX != e.pageX || n[0].pageY != e.pageY)) {
                for (var t = 0, r = n.length; t < r; ++t) if (n[t].pointerId == e.pointerId) {
                    n[t] = e;
                    break;
                }
                e.touches = n.slice(), i(e);
            }
        });
    },
    "addPointerTouchListenerEnd": function(e, t, i) {
        var n = this._pointerTouches;
        OpenLayers.Event.observe(e, this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ? "MSPointerUp" : "pointerup", function(e) {
            if (OpenLayers.Event.isTouchEvent(e)) {
                for (var t = 0, r = n.length; t < r; ++t) if (n[t].pointerId == e.pointerId) {
                    n.splice(t, 1);
                    break;
                }
                e.touches = n.slice(), i(e);
            }
        });
    },
    "CLASS_NAME": "OpenLayers.Events"
}), OpenLayers.Feature = OpenLayers.Class({
    "layer": null,
    "id": null,
    "lonlat": null,
    "data": null,
    "marker": null,
    "popupClass": null,
    "popup": null,
    "initialize": function(e, t, i) {
        this.layer = e, this.lonlat = t, this.data = null != i ? i : {}, this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_");
    },
    "destroy": function() {
        null != this.layer && null != this.layer.map && null != this.popup && this.layer.map.removePopup(this.popup), 
        null != this.layer && null != this.marker && this.layer.removeMarker(this.marker), 
        this.layer = null, this.id = null, this.lonlat = null, this.data = null, null != this.marker && (this.destroyMarker(this.marker), 
        this.marker = null), null != this.popup && (this.destroyPopup(this.popup), this.popup = null);
    },
    "onScreen": function() {
        var e = !1;
        return null != this.layer && null != this.layer.map && (e = this.layer.map.getExtent().containsLonLat(this.lonlat)), 
        e;
    },
    "createMarker": function() {
        return null != this.lonlat && (this.marker = new OpenLayers.Marker(this.lonlat, this.data.icon)), 
        this.marker;
    },
    "destroyMarker": function() {
        this.marker.destroy();
    },
    "createPopup": function(e) {
        if (null != this.lonlat) {
            if (!this.popup) {
                var t = this.marker ? this.marker.icon : null, i = this.popupClass ? this.popupClass : OpenLayers.Popup.Anchored;
                this.popup = new i(this.id + "_popup", this.lonlat, this.data.popupSize, this.data.popupContentHTML, t, e);
            }
            null != this.data.overflow && (this.popup.contentDiv.style.overflow = this.data.overflow), 
            this.popup.feature = this;
        }
        return this.popup;
    },
    "destroyPopup": function() {
        this.popup && (this.popup.feature = null, this.popup.destroy(), this.popup = null);
    },
    "CLASS_NAME": "OpenLayers.Feature"
}), OpenLayers.State = {
    "UNKNOWN": "Unknown",
    "INSERT": "Insert",
    "UPDATE": "Update",
    "DELETE": "Delete"
}, OpenLayers.Feature.Vector = OpenLayers.Class(OpenLayers.Feature, {
    "fid": null,
    "geometry": null,
    "attributes": null,
    "bounds": null,
    "state": null,
    "style": null,
    "url": null,
    "renderIntent": "default",
    "modified": null,
    "initialize": function(e, t, i) {
        OpenLayers.Feature.prototype.initialize.apply(this, [ null, null, t ]), this.lonlat = null, 
        this.geometry = e || null, this.state = null, this.attributes = {}, t && (this.attributes = OpenLayers.Util.extend(this.attributes, t)), 
        this.style = i || null;
    },
    "destroy": function() {
        this.layer && (this.layer.removeFeatures(this), this.layer = null), this.geometry = null, 
        this.modified = null, OpenLayers.Feature.prototype.destroy.apply(this, arguments);
    },
    "clone": function() {
        return new OpenLayers.Feature.Vector(this.geometry ? this.geometry.clone() : null, this.attributes, this.style);
    },
    "onScreen": function(e) {
        var t = !1;
        if (this.layer && this.layer.map) {
            var i = this.layer.map.getExtent();
            if (e) {
                var n = this.geometry.getBounds();
                t = i.intersectsBounds(n);
            } else t = i.toGeometry().intersects(this.geometry);
        }
        return t;
    },
    "getVisibility": function() {
        return !(this.style && "none" == this.style.display || !this.layer || this.layer && this.layer.styleMap && "none" == this.layer.styleMap.createSymbolizer(this, this.renderIntent).display || this.layer && !this.layer.getVisibility());
    },
    "createMarker": function() {
        return null;
    },
    "destroyMarker": function() {},
    "createPopup": function() {
        return null;
    },
    "atPoint": function(e, t, i) {
        var n = !1;
        return this.geometry && (n = this.geometry.atPoint(e, t, i)), n;
    },
    "destroyPopup": function() {},
    "move": function(e) {
        if (this.layer && this.geometry.move) {
            var t;
            t = "OpenLayers.LonLat" == e.CLASS_NAME ? this.layer.getViewPortPxFromLonLat(e) : e;
            var i = this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat()), n = this.layer.map.getResolution();
            return this.geometry.move(n * (t.x - i.x), n * (i.y - t.y)), this.layer.drawFeature(this), 
            i;
        }
    },
    "toState": function(e) {
        if (e == OpenLayers.State.UPDATE) switch (this.state) {
          case OpenLayers.State.UNKNOWN:
          case OpenLayers.State.DELETE:
            this.state = e;
            break;

          case OpenLayers.State.UPDATE:
          case OpenLayers.State.INSERT:
        } else if (e == OpenLayers.State.INSERT) switch (this.state) {
          case OpenLayers.State.UNKNOWN:
            break;

          default:
            this.state = e;
        } else if (e == OpenLayers.State.DELETE) switch (this.state) {
          case OpenLayers.State.INSERT:
          case OpenLayers.State.DELETE:
            break;

          case OpenLayers.State.UNKNOWN:
          case OpenLayers.State.UPDATE:
            this.state = e;
        } else e == OpenLayers.State.UNKNOWN && (this.state = e);
    },
    "CLASS_NAME": "OpenLayers.Feature.Vector"
}), OpenLayers.Feature.Vector.style = {
    "default": {
        "fillColor": "#ee9900",
        "fillOpacity": .4,
        "hoverFillColor": "white",
        "hoverFillOpacity": .8,
        "strokeColor": "#ee9900",
        "strokeOpacity": 1,
        "strokeWidth": 1,
        "strokeLinecap": "round",
        "strokeDashstyle": "solid",
        "hoverStrokeColor": "red",
        "hoverStrokeOpacity": 1,
        "hoverStrokeWidth": .2,
        "pointRadius": 6,
        "hoverPointRadius": 1,
        "hoverPointUnit": "%",
        "pointerEvents": "visiblePainted",
        "cursor": "inherit",
        "fontColor": "#000000",
        "labelAlign": "cm",
        "labelOutlineColor": "white",
        "labelOutlineWidth": 3
    },
    "select": {
        "fillColor": "blue",
        "fillOpacity": .4,
        "hoverFillColor": "white",
        "hoverFillOpacity": .8,
        "strokeColor": "blue",
        "strokeOpacity": 1,
        "strokeWidth": 2,
        "strokeLinecap": "round",
        "strokeDashstyle": "solid",
        "hoverStrokeColor": "red",
        "hoverStrokeOpacity": 1,
        "hoverStrokeWidth": .2,
        "pointRadius": 6,
        "hoverPointRadius": 1,
        "hoverPointUnit": "%",
        "pointerEvents": "visiblePainted",
        "cursor": "pointer",
        "fontColor": "#000000",
        "labelAlign": "cm",
        "labelOutlineColor": "white",
        "labelOutlineWidth": 3
    },
    "temporary": {
        "fillColor": "#66cccc",
        "fillOpacity": .2,
        "hoverFillColor": "white",
        "hoverFillOpacity": .8,
        "strokeColor": "#66cccc",
        "strokeOpacity": 1,
        "strokeLinecap": "round",
        "strokeWidth": 2,
        "strokeDashstyle": "solid",
        "hoverStrokeColor": "red",
        "hoverStrokeOpacity": 1,
        "hoverStrokeWidth": .2,
        "pointRadius": 6,
        "hoverPointRadius": 1,
        "hoverPointUnit": "%",
        "pointerEvents": "visiblePainted",
        "cursor": "inherit",
        "fontColor": "#000000",
        "labelAlign": "cm",
        "labelOutlineColor": "white",
        "labelOutlineWidth": 3
    },
    "delete": {
        "display": "none"
    }
}, OpenLayers.Style = OpenLayers.Class({
    "id": null,
    "name": null,
    "title": null,
    "description": null,
    "layerName": null,
    "isDefault": !1,
    "rules": null,
    "context": null,
    "defaultStyle": null,
    "defaultsPerSymbolizer": !1,
    "propertyStyles": null,
    "initialize": function(e, t) {
        OpenLayers.Util.extend(this, t), this.rules = [], t && t.rules && this.addRules(t.rules), 
        this.setDefaultStyle(e || OpenLayers.Feature.Vector.style.default), this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_");
    },
    "destroy": function() {
        for (var e = 0, t = this.rules.length; e < t; e++) this.rules[e].destroy(), this.rules[e] = null;
        this.rules = null, this.defaultStyle = null;
    },
    "createSymbolizer": function(e) {
        for (var t, i = this.defaultsPerSymbolizer ? {} : this.createLiterals(OpenLayers.Util.extend({}, this.defaultStyle), e), n = this.rules, r = [], s = !1, a = 0, o = n.length; a < o; a++) (t = n[a]).evaluate(e) && (t instanceof OpenLayers.Rule && t.elseFilter ? r.push(t) : (s = !0, 
        this.applySymbolizer(t, i, e)));
        if (0 == s && r.length > 0) {
            s = !0;
            for (var a = 0, o = r.length; a < o; a++) this.applySymbolizer(r[a], i, e);
        }
        return n.length > 0 && 0 == s && (i.display = "none"), null != i.label && "string" != typeof i.label && (i.label = String(i.label)), 
        i;
    },
    "applySymbolizer": function(e, t, i) {
        var n = i.geometry ? this.getSymbolizerPrefix(i.geometry) : OpenLayers.Style.SYMBOLIZER_PREFIXES[0], r = e.symbolizer[n] || e.symbolizer;
        if (!0 === this.defaultsPerSymbolizer) {
            var s = this.defaultStyle;
            OpenLayers.Util.applyDefaults(r, {
                "pointRadius": s.pointRadius
            }), !0 !== r.stroke && !0 !== r.graphic || OpenLayers.Util.applyDefaults(r, {
                "strokeWidth": s.strokeWidth,
                "strokeColor": s.strokeColor,
                "strokeOpacity": s.strokeOpacity,
                "strokeDashstyle": s.strokeDashstyle,
                "strokeLinecap": s.strokeLinecap
            }), !0 !== r.fill && !0 !== r.graphic || OpenLayers.Util.applyDefaults(r, {
                "fillColor": s.fillColor,
                "fillOpacity": s.fillOpacity
            }), !0 === r.graphic && OpenLayers.Util.applyDefaults(r, {
                "pointRadius": this.defaultStyle.pointRadius,
                "externalGraphic": this.defaultStyle.externalGraphic,
                "graphicName": this.defaultStyle.graphicName,
                "graphicOpacity": this.defaultStyle.graphicOpacity,
                "graphicWidth": this.defaultStyle.graphicWidth,
                "graphicHeight": this.defaultStyle.graphicHeight,
                "graphicXOffset": this.defaultStyle.graphicXOffset,
                "graphicYOffset": this.defaultStyle.graphicYOffset
            });
        }
        return this.createLiterals(OpenLayers.Util.extend(t, r), i);
    },
    "createLiterals": function(e, t) {
        var i = OpenLayers.Util.extend({}, t.attributes || t.data);
        OpenLayers.Util.extend(i, this.context);
        for (var n in this.propertyStyles) e[n] = OpenLayers.Style.createLiteral(e[n], i, t, n);
        return e;
    },
    "findPropertyStyles": function() {
        var e = {}, t = this.defaultStyle;
        this.addPropertyStyles(e, t);
        for (var i, n, r = this.rules, s = 0, a = r.length; s < a; s++) {
            i = r[s].symbolizer;
            for (var o in i) {
                if ("object" != typeof (n = i[o])) {
                    this.addPropertyStyles(e, i);
                    break;
                }
                this.addPropertyStyles(e, n);
            }
        }
        return e;
    },
    "addPropertyStyles": function(e, t) {
        var i;
        for (var n in t) "string" == typeof (i = t[n]) && i.match(/\$\{\w+\}/) && (e[n] = !0);
        return e;
    },
    "addRules": function(e) {
        Array.prototype.push.apply(this.rules, e), this.propertyStyles = this.findPropertyStyles();
    },
    "setDefaultStyle": function(e) {
        this.defaultStyle = e, this.propertyStyles = this.findPropertyStyles();
    },
    "getSymbolizerPrefix": function(e) {
        for (var t = OpenLayers.Style.SYMBOLIZER_PREFIXES, i = 0, n = t.length; i < n; i++) if (-1 != e.CLASS_NAME.indexOf(t[i])) return t[i];
    },
    "clone": function() {
        var e = OpenLayers.Util.extend({}, this);
        if (this.rules) {
            e.rules = [];
            for (var t = 0, i = this.rules.length; t < i; ++t) e.rules.push(this.rules[t].clone());
        }
        e.context = this.context && OpenLayers.Util.extend({}, this.context);
        var n = OpenLayers.Util.extend({}, this.defaultStyle);
        return new OpenLayers.Style(n, e);
    },
    "CLASS_NAME": "OpenLayers.Style"
}), OpenLayers.Style.createLiteral = function(e, t, i, n) {
    return "string" == typeof e && -1 != e.indexOf("${") && (e = OpenLayers.String.format(e, t, [ i, n ]), 
    e = isNaN(e) || !e ? e : parseFloat(e)), e;
}, OpenLayers.Style.SYMBOLIZER_PREFIXES = [ "Point", "Line", "Polygon", "Text", "Raster" ], 
OpenLayers.Filter = OpenLayers.Class({
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e);
    },
    "destroy": function() {},
    "evaluate": function(e) {
        return !0;
    },
    "clone": function() {
        return null;
    },
    "toString": function() {
        return OpenLayers.Format && OpenLayers.Format.CQL ? OpenLayers.Format.CQL.prototype.write(this) : Object.prototype.toString.call(this);
    },
    "CLASS_NAME": "OpenLayers.Filter"
}), OpenLayers.Format = OpenLayers.Class({
    "options": null,
    "externalProjection": null,
    "internalProjection": null,
    "data": null,
    "keepData": !1,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e), this.options = e;
    },
    "destroy": function() {},
    "read": function(e) {
        throw new Error("Read not implemented.");
    },
    "write": function(e) {
        throw new Error("Write not implemented.");
    },
    "CLASS_NAME": "OpenLayers.Format"
}), OpenLayers.Geometry = OpenLayers.Class({
    "id": null,
    "parent": null,
    "bounds": null,
    "initialize": function() {
        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_");
    },
    "destroy": function() {
        this.id = null, this.bounds = null;
    },
    "clone": function() {
        return new OpenLayers.Geometry();
    },
    "setBounds": function(e) {
        e && (this.bounds = e.clone());
    },
    "clearBounds": function() {
        this.bounds = null, this.parent && this.parent.clearBounds();
    },
    "extendBounds": function(e) {
        this.getBounds() ? this.bounds.extend(e) : this.setBounds(e);
    },
    "getBounds": function() {
        return null == this.bounds && this.calculateBounds(), this.bounds;
    },
    "calculateBounds": function() {},
    "distanceTo": function(e, t) {},
    "getVertices": function(e) {},
    "atPoint": function(e, t, i) {
        var n = !1;
        if (null != this.getBounds() && null != e) {
            var r = null != t ? t : 0, s = null != i ? i : 0;
            n = new OpenLayers.Bounds(this.bounds.left - r, this.bounds.bottom - s, this.bounds.right + r, this.bounds.top + s).containsLonLat(e);
        }
        return n;
    },
    "getLength": function() {
        return 0;
    },
    "getArea": function() {
        return 0;
    },
    "getCentroid": function() {
        return null;
    },
    "toString": function() {
        return OpenLayers.Format && OpenLayers.Format.WKT ? OpenLayers.Format.WKT.prototype.write(new OpenLayers.Feature.Vector(this)) : Object.prototype.toString.call(this);
    },
    "CLASS_NAME": "OpenLayers.Geometry"
}), OpenLayers.Geometry.fromWKT = function(e) {
    var t;
    if (OpenLayers.Format && OpenLayers.Format.WKT) {
        var i = OpenLayers.Geometry.fromWKT.format;
        i || (i = new OpenLayers.Format.WKT(), OpenLayers.Geometry.fromWKT.format = i);
        var n = i.read(e);
        if (n instanceof OpenLayers.Feature.Vector) t = n.geometry; else if (OpenLayers.Util.isArray(n)) {
            for (var r = n.length, s = new Array(r), a = 0; a < r; ++a) s[a] = n[a].geometry;
            t = new OpenLayers.Geometry.Collection(s);
        }
    }
    return t;
}, OpenLayers.Geometry.segmentsIntersect = function(e, t, i) {
    var n = i && i.point, r = i && i.tolerance, s = !1, a = e.x1 - t.x1, o = e.y1 - t.y1, l = e.x2 - e.x1, h = e.y2 - e.y1, u = t.y2 - t.y1, p = t.x2 - t.x1, c = u * l - p * h, d = p * o - u * a, f = l * o - h * a;
    if (0 == c) 0 == d && 0 == f && (s = !0); else {
        var y = d / c, m = f / c;
        if (y >= 0 && y <= 1 && m >= 0 && m <= 1) if (n) {
            var g = e.x1 + y * l, v = e.y1 + y * h;
            s = new OpenLayers.Geometry.Point(g, v);
        } else s = !0;
    }
    if (r) {
        if (s) {
            if (n) {
                var L, O = [ e, t ];
                e: for (S = 0; S < 2; ++S) {
                    L = O[S];
                    for (x = 1; x < 3; ++x) if (g = L["x" + x], v = L["y" + x], Math.sqrt(Math.pow(g - s.x, 2) + Math.pow(v - s.y, 2)) < r) {
                        s.x = g, s.y = v;
                        break e;
                    }
                }
            }
        } else {
            var b, w, C, O = [ e, t ];
            e: for (var S = 0; S < 2; ++S) {
                b = O[S], w = O[(S + 1) % 2];
                for (var x = 1; x < 3; ++x) if (C = {
                    "x": b["x" + x],
                    "y": b["y" + x]
                }, OpenLayers.Geometry.distanceToSegment(C, w).distance < r) {
                    s = !n || new OpenLayers.Geometry.Point(C.x, C.y);
                    break e;
                }
            }
        }
    }
    return s;
}, OpenLayers.Geometry.distanceToSegment = function(e, t) {
    var i = OpenLayers.Geometry.distanceSquaredToSegment(e, t);
    return i.distance = Math.sqrt(i.distance), i;
}, OpenLayers.Geometry.distanceSquaredToSegment = function(e, t) {
    var i, n, r = e.x, s = e.y, a = t.x1, o = t.y1, l = t.x2, h = t.y2, u = l - a, p = h - o, c = 0 == u && 0 == p ? 0 : (u * (r - a) + p * (s - o)) / (Math.pow(u, 2) + Math.pow(p, 2));
    return c <= 0 ? (i = a, n = o) : c >= 1 ? (i = l, n = h) : (i = a + c * u, n = o + c * p), 
    {
        "distance": Math.pow(i - r, 2) + Math.pow(n - s, 2),
        "x": i,
        "y": n,
        "along": c
    };
}, OpenLayers.Handler = OpenLayers.Class({
    "id": null,
    "control": null,
    "map": null,
    "keyMask": null,
    "active": !1,
    "evt": null,
    "touch": !1,
    "initialize": function(e, t, i) {
        OpenLayers.Util.extend(this, i), this.control = e, this.callbacks = t;
        var n = this.map || e.map;
        n && this.setMap(n), this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_");
    },
    "setMap": function(e) {
        this.map = e;
    },
    "checkModifiers": function(e) {
        return null == this.keyMask || ((e.shiftKey ? OpenLayers.Handler.MOD_SHIFT : 0) | (e.ctrlKey ? OpenLayers.Handler.MOD_CTRL : 0) | (e.altKey ? OpenLayers.Handler.MOD_ALT : 0) | (e.metaKey ? OpenLayers.Handler.MOD_META : 0)) == this.keyMask;
    },
    "activate": function() {
        if (this.active) return !1;
        for (var e = OpenLayers.Events.prototype.BROWSER_EVENTS, t = 0, i = e.length; t < i; t++) this[e[t]] && this.register(e[t], this[e[t]]);
        return this.active = !0, !0;
    },
    "deactivate": function() {
        if (!this.active) return !1;
        for (var e = OpenLayers.Events.prototype.BROWSER_EVENTS, t = 0, i = e.length; t < i; t++) this[e[t]] && this.unregister(e[t], this[e[t]]);
        return this.touch = !1, this.active = !1, !0;
    },
    "startTouch": function() {
        if (!this.touch) {
            this.touch = !0;
            for (var e = [ "mousedown", "mouseup", "mousemove", "click", "dblclick", "mouseout" ], t = 0, i = e.length; t < i; t++) this[e[t]] && this.unregister(e[t], this[e[t]]);
        }
    },
    "callback": function(e, t) {
        e && this.callbacks[e] && this.callbacks[e].apply(this.control, t);
    },
    "register": function(e, t) {
        this.map.events.registerPriority(e, this, t), this.map.events.registerPriority(e, this, this.setEvent);
    },
    "unregister": function(e, t) {
        this.map.events.unregister(e, this, t), this.map.events.unregister(e, this, this.setEvent);
    },
    "setEvent": function(e) {
        return this.evt = e, !0;
    },
    "destroy": function() {
        this.deactivate(), this.control = this.map = null;
    },
    "CLASS_NAME": "OpenLayers.Handler"
}), OpenLayers.Handler.MOD_NONE = 0, OpenLayers.Handler.MOD_SHIFT = 1, OpenLayers.Handler.MOD_CTRL = 2, 
OpenLayers.Handler.MOD_ALT = 4, OpenLayers.Handler.MOD_META = 8, OpenLayers.Icon = OpenLayers.Class({
    "url": null,
    "size": null,
    "offset": null,
    "calculateOffset": null,
    "imageDiv": null,
    "px": null,
    "initialize": function(e, t, i, n) {
        this.url = e, this.size = t || {
            "w": 20,
            "h": 20
        }, this.offset = i || {
            "x": -this.size.w / 2,
            "y": -this.size.h / 2
        }, this.calculateOffset = n;
        var r = OpenLayers.Util.createUniqueID("OL_Icon_");
        this.imageDiv = OpenLayers.Util.createAlphaImageDiv(r);
    },
    "destroy": function() {
        this.erase(), OpenLayers.Event.stopObservingElement(this.imageDiv.firstChild), this.imageDiv.innerHTML = "", 
        this.imageDiv = null;
    },
    "clone": function() {
        return new OpenLayers.Icon(this.url, this.size, this.offset, this.calculateOffset);
    },
    "setSize": function(e) {
        null != e && (this.size = e), this.draw();
    },
    "setUrl": function(e) {
        null != e && (this.url = e), this.draw();
    },
    "draw": function(e) {
        return OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, null, null, this.size, this.url, "absolute"), 
        this.moveTo(e), this.imageDiv;
    },
    "erase": function() {
        null != this.imageDiv && null != this.imageDiv.parentNode && OpenLayers.Element.remove(this.imageDiv);
    },
    "setOpacity": function(e) {
        OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, null, null, null, null, null, null, null, e);
    },
    "moveTo": function(e) {
        null != e && (this.px = e), null != this.imageDiv && (null == this.px ? this.display(!1) : (this.calculateOffset && (this.offset = this.calculateOffset(this.size)), 
        OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, null, {
            "x": this.px.x + this.offset.x,
            "y": this.px.y + this.offset.y
        })));
    },
    "display": function(e) {
        this.imageDiv.style.display = e ? "" : "none";
    },
    "isDrawn": function() {
        return this.imageDiv && this.imageDiv.parentNode && 11 != this.imageDiv.parentNode.nodeType;
    },
    "CLASS_NAME": "OpenLayers.Icon"
}), OpenLayers.Kinetic = OpenLayers.Class({
    "threshold": 0,
    "deceleration": .0035,
    "nbPoints": 100,
    "delay": 200,
    "points": void 0,
    "timerId": void 0,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e);
    },
    "begin": function() {
        OpenLayers.Animation.stop(this.timerId), this.timerId = void 0, this.points = [];
    },
    "update": function(e) {
        this.points.unshift({
            "xy": e,
            "tick": new Date().getTime()
        }), this.points.length > this.nbPoints && this.points.pop();
    },
    "end": function(e) {
        for (var t, i, n = new Date().getTime(), r = 0, s = this.points.length; r < s && (i = this.points[r], 
        !(n - i.tick > this.delay)); r++) t = i;
        if (t) {
            var a = new Date().getTime() - t.tick, o = Math.sqrt(Math.pow(e.x - t.xy.x, 2) + Math.pow(e.y - t.xy.y, 2)), l = o / a;
            if (!(0 == l || l < this.threshold)) {
                var h = Math.asin((e.y - t.xy.y) / o);
                return t.xy.x <= e.x && (h = Math.PI - h), {
                    "speed": l,
                    "theta": h
                };
            }
        }
    },
    "move": function(e, t) {
        var i = e.speed, n = Math.cos(e.theta), r = -Math.sin(e.theta), s = new Date().getTime(), a = 0, o = 0;
        this.timerId = OpenLayers.Animation.start(OpenLayers.Function.bind(function() {
            if (null != this.timerId) {
                var e = new Date().getTime() - s, l = -this.deceleration * Math.pow(e, 2) / 2 + i * e, h = l * n, u = l * r, p = {};
                p.end = !1, -this.deceleration * e + i <= 0 && (OpenLayers.Animation.stop(this.timerId), 
                this.timerId = null, p.end = !0), p.x = h - a, p.y = u - o, a = h, o = u, t(p.x, p.y, p.end);
            }
        }, this));
    },
    "CLASS_NAME": "OpenLayers.Kinetic"
}), OpenLayers.Tween = OpenLayers.Class({
    "easing": null,
    "begin": null,
    "finish": null,
    "duration": null,
    "callbacks": null,
    "time": null,
    "minFrameRate": null,
    "startTime": null,
    "animationId": null,
    "playing": !1,
    "initialize": function(e) {
        this.easing = e || OpenLayers.Easing.Expo.easeOut;
    },
    "start": function(e, t, i, n) {
        this.playing = !0, this.begin = e, this.finish = t, this.duration = i, this.callbacks = n.callbacks, 
        this.minFrameRate = n.minFrameRate || 30, this.time = 0, this.startTime = new Date().getTime(), 
        OpenLayers.Animation.stop(this.animationId), this.animationId = null, this.callbacks && this.callbacks.start && this.callbacks.start.call(this, this.begin), 
        this.animationId = OpenLayers.Animation.start(OpenLayers.Function.bind(this.play, this));
    },
    "stop": function() {
        this.playing && (this.callbacks && this.callbacks.done && this.callbacks.done.call(this, this.finish), 
        OpenLayers.Animation.stop(this.animationId), this.animationId = null, this.playing = !1);
    },
    "play": function() {
        var e = {};
        for (var t in this.begin) {
            var i = this.begin[t], n = this.finish[t];
            if (null == i || null == n || isNaN(i) || isNaN(n)) throw new TypeError("invalid value for Tween");
            var r = n - i;
            e[t] = this.easing.apply(this, [ this.time, i, r, this.duration ]);
        }
        this.time++, this.callbacks && this.callbacks.eachStep && (new Date().getTime() - this.startTime) / this.time <= 1e3 / this.minFrameRate && this.callbacks.eachStep.call(this, e), 
        this.time > this.duration && this.stop();
    },
    "CLASS_NAME": "OpenLayers.Tween"
}), OpenLayers.Easing = {
    "CLASS_NAME": "OpenLayers.Easing"
}, OpenLayers.Easing.Linear = {
    "easeIn": function(e, t, i, n) {
        return i * e / n + t;
    },
    "easeOut": function(e, t, i, n) {
        return i * e / n + t;
    },
    "easeInOut": function(e, t, i, n) {
        return i * e / n + t;
    },
    "CLASS_NAME": "OpenLayers.Easing.Linear"
}, OpenLayers.Easing.Expo = {
    "easeIn": function(e, t, i, n) {
        return 0 == e ? t : i * Math.pow(2, 10 * (e / n - 1)) + t;
    },
    "easeOut": function(e, t, i, n) {
        return e == n ? t + i : i * (1 - Math.pow(2, -10 * e / n)) + t;
    },
    "easeInOut": function(e, t, i, n) {
        return 0 == e ? t : e == n ? t + i : (e /= n / 2) < 1 ? i / 2 * Math.pow(2, 10 * (e - 1)) + t : i / 2 * (2 - Math.pow(2, -10 * --e)) + t;
    },
    "CLASS_NAME": "OpenLayers.Easing.Expo"
}, OpenLayers.Easing.Quad = {
    "easeIn": function(e, t, i, n) {
        return i * (e /= n) * e + t;
    },
    "easeOut": function(e, t, i, n) {
        return -i * (e /= n) * (e - 2) + t;
    },
    "easeInOut": function(e, t, i, n) {
        return (e /= n / 2) < 1 ? i / 2 * e * e + t : -i / 2 * (--e * (e - 2) - 1) + t;
    },
    "CLASS_NAME": "OpenLayers.Easing.Quad"
}, OpenLayers.Projection = OpenLayers.Class({
    "proj": null,
    "projCode": null,
    "titleRegEx": /\+title=[^\+]*/,
    "initialize": function(e, t) {
        OpenLayers.Util.extend(this, t), this.projCode = e, "object" == typeof Proj4js && (this.proj = new Proj4js.Proj(e));
    },
    "getCode": function() {
        return this.proj ? this.proj.srsCode : this.projCode;
    },
    "getUnits": function() {
        return this.proj ? this.proj.units : null;
    },
    "toString": function() {
        return this.getCode();
    },
    "equals": function(e) {
        var t = e, i = !1;
        if (t) if (t instanceof OpenLayers.Projection || (t = new OpenLayers.Projection(t)), 
        "object" == typeof Proj4js && this.proj.defData && t.proj.defData) i = this.proj.defData.replace(this.titleRegEx, "") == t.proj.defData.replace(this.titleRegEx, ""); else if (t.getCode) {
            var n = this.getCode(), r = t.getCode();
            i = n == r || !!OpenLayers.Projection.transforms[n] && OpenLayers.Projection.transforms[n][r] === OpenLayers.Projection.nullTransform;
        }
        return i;
    },
    "destroy": function() {
        delete this.proj, delete this.projCode;
    },
    "CLASS_NAME": "OpenLayers.Projection"
}), OpenLayers.Projection.transforms = {}, OpenLayers.Projection.defaults = {
    "EPSG:4326": {
        "units": "degrees",
        "maxExtent": [ -180, -90, 180, 90 ],
        "worldExtent": [ -180, -90, 180, 90 ],
        "yx": !0
    },
    "CRS:84": {
        "units": "degrees",
        "maxExtent": [ -180, -90, 180, 90 ],
        "worldExtent": [ -180, -90, 180, 90 ]
    },
    "EPSG:900913": {
        "units": "m",
        "maxExtent": [ -20037508.34, -20037508.34, 20037508.34, 20037508.34 ],
        "worldExtent": [ -180, -89, 180, 89 ]
    }
}, OpenLayers.Projection.addTransform = function(e, t, i) {
    if (i === OpenLayers.Projection.nullTransform) {
        var n = OpenLayers.Projection.defaults[e];
        n && !OpenLayers.Projection.defaults[t] && (OpenLayers.Projection.defaults[t] = n);
    }
    OpenLayers.Projection.transforms[e] || (OpenLayers.Projection.transforms[e] = {}), 
    OpenLayers.Projection.transforms[e][t] = i;
}, OpenLayers.Projection.transform = function(e, t, i) {
    if (t && i) if (t instanceof OpenLayers.Projection || (t = new OpenLayers.Projection(t)), 
    i instanceof OpenLayers.Projection || (i = new OpenLayers.Projection(i)), t.proj && i.proj) e = Proj4js.transform(t.proj, i.proj, e); else {
        var n = t.getCode(), r = i.getCode(), s = OpenLayers.Projection.transforms;
        s[n] && s[n][r] && s[n][r](e);
    }
    return e;
}, OpenLayers.Projection.nullTransform = function(e) {
    return e;
}, function() {
    function e(e) {
        return e.x = 180 * e.x / r, e.y = 180 / Math.PI * (2 * Math.atan(Math.exp(e.y / r * Math.PI)) - Math.PI / 2), 
        e;
    }
    function t(e) {
        e.x = e.x * r / 180;
        var t = Math.log(Math.tan((90 + e.y) * Math.PI / 360)) / Math.PI * r;
        return e.y = Math.max(-20037508.34, Math.min(t, 20037508.34)), e;
    }
    function i(i, n) {
        var r, s, a, o, l, h = OpenLayers.Projection.addTransform, u = OpenLayers.Projection.nullTransform;
        for (r = 0, s = n.length; r < s; ++r) for (h(i, a = n[r], t), h(a, i, e), l = r + 1; l < s; ++l) h(a, o = n[l], u), 
        h(o, a, u);
    }
    var n, r = 20037508.34, s = [ "EPSG:900913", "EPSG:3857", "EPSG:102113", "EPSG:102100", "OSGEO:41001" ], a = [ "CRS:84", "urn:ogc:def:crs:EPSG:6.6:4326", "EPSG:4326" ];
    for (n = s.length - 1; n >= 0; --n) i(s[n], a);
    for (n = a.length - 1; n >= 0; --n) i(a[n], s);
}(), OpenLayers.Map = OpenLayers.Class({
    "Z_INDEX_BASE": {
        "BaseLayer": 100,
        "Overlay": 325,
        "Feature": 725,
        "Popup": 750,
        "Control": 1e3
    },
    "id": null,
    "fractionalZoom": !1,
    "events": null,
    "allOverlays": !1,
    "div": null,
    "dragging": !1,
    "size": null,
    "viewPortDiv": null,
    "layerContainerOrigin": null,
    "layerContainerDiv": null,
    "layers": null,
    "controls": null,
    "popups": null,
    "baseLayer": null,
    "center": null,
    "resolution": null,
    "zoom": 0,
    "panRatio": 1.5,
    "options": null,
    "tileSize": null,
    "projection": "EPSG:4326",
    "units": null,
    "resolutions": null,
    "maxResolution": null,
    "minResolution": null,
    "maxScale": null,
    "minScale": null,
    "maxExtent": null,
    "minExtent": null,
    "restrictedExtent": null,
    "numZoomLevels": 16,
    "theme": null,
    "displayProjection": null,
    "fallThrough": !1,
    "autoUpdateSize": !0,
    "eventListeners": null,
    "panTween": null,
    "panMethod": OpenLayers.Easing.Expo.easeOut,
    "panDuration": 50,
    "zoomTween": null,
    "zoomMethod": OpenLayers.Easing.Quad.easeOut,
    "zoomDuration": 20,
    "paddingForPopups": null,
    "layerContainerOriginPx": null,
    "minPx": null,
    "maxPx": null,
    "initialize": function(e, t) {
        var i = OpenLayers.Util.isElement(e);
        1 !== arguments.length || "object" != typeof e || i || (e = (t = e) && t.div), this.tileSize = new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH, OpenLayers.Map.TILE_HEIGHT), 
        this.paddingForPopups = new OpenLayers.Bounds(15, 15, 15, 15), this.theme = OpenLayers._getScriptLocation() + "theme/default/style.css", 
        this.options = OpenLayers.Util.extend({}, t), OpenLayers.Util.extend(this, t);
        var n = this.projection instanceof OpenLayers.Projection ? this.projection.projCode : this.projection;
        OpenLayers.Util.applyDefaults(this, OpenLayers.Projection.defaults[n]), !this.maxExtent || this.maxExtent instanceof OpenLayers.Bounds || (this.maxExtent = new OpenLayers.Bounds(this.maxExtent)), 
        !this.minExtent || this.minExtent instanceof OpenLayers.Bounds || (this.minExtent = new OpenLayers.Bounds(this.minExtent)), 
        !this.restrictedExtent || this.restrictedExtent instanceof OpenLayers.Bounds || (this.restrictedExtent = new OpenLayers.Bounds(this.restrictedExtent)), 
        !this.center || this.center instanceof OpenLayers.LonLat || (this.center = new OpenLayers.LonLat(this.center)), 
        this.layers = [], this.id = OpenLayers.Util.createUniqueID("OpenLayers.Map_"), this.div = OpenLayers.Util.getElement(e), 
        this.div || (this.div = document.createElement("div"), this.div.style.height = "1px", 
        this.div.style.width = "1px"), OpenLayers.Element.addClass(this.div, "olMap");
        var r = this.id + "_OpenLayers_ViewPort";
        if (this.viewPortDiv = OpenLayers.Util.createDiv(r, null, null, null, "relative", null, "hidden"), 
        this.viewPortDiv.style.width = "100%", this.viewPortDiv.style.height = "100%", this.viewPortDiv.className = "olMapViewport", 
        this.div.appendChild(this.viewPortDiv), this.events = new OpenLayers.Events(this, this.viewPortDiv, null, this.fallThrough, {
            "includeXY": !0
        }), OpenLayers.TileManager && null !== this.tileManager && (this.tileManager instanceof OpenLayers.TileManager || (this.tileManager = new OpenLayers.TileManager(this.tileManager)), 
        this.tileManager.addMap(this)), r = this.id + "_OpenLayers_Container", this.layerContainerDiv = OpenLayers.Util.createDiv(r), 
        this.layerContainerDiv.style.zIndex = this.Z_INDEX_BASE.Popup - 1, this.layerContainerOriginPx = {
            "x": 0,
            "y": 0
        }, this.applyTransform(), this.viewPortDiv.appendChild(this.layerContainerDiv), 
        this.updateSize(), this.eventListeners instanceof Object && this.events.on(this.eventListeners), 
        !0 === this.autoUpdateSize && (this.updateSizeDestroy = OpenLayers.Function.bind(this.updateSize, this), 
        OpenLayers.Event.observe(window, "resize", this.updateSizeDestroy)), this.theme) {
            for (var s = !0, a = document.getElementsByTagName("link"), o = 0, l = a.length; o < l; ++o) if (OpenLayers.Util.isEquivalentUrl(a.item(o).href, this.theme)) {
                s = !1;
                break;
            }
            if (s) {
                var h = document.createElement("link");
                h.setAttribute("rel", "stylesheet"), h.setAttribute("type", "text/css"), h.setAttribute("href", this.theme), 
                document.getElementsByTagName("head")[0].appendChild(h);
            }
        }
        null == this.controls && (this.controls = [], null != OpenLayers.Control && (OpenLayers.Control.Navigation ? this.controls.push(new OpenLayers.Control.Navigation()) : OpenLayers.Control.TouchNavigation && this.controls.push(new OpenLayers.Control.TouchNavigation()), 
        OpenLayers.Control.Zoom ? this.controls.push(new OpenLayers.Control.Zoom()) : OpenLayers.Control.PanZoom && this.controls.push(new OpenLayers.Control.PanZoom()), 
        OpenLayers.Control.ArgParser && this.controls.push(new OpenLayers.Control.ArgParser()), 
        OpenLayers.Control.Attribution && this.controls.push(new OpenLayers.Control.Attribution())));
        for (var o = 0, l = this.controls.length; o < l; o++) this.addControlToMap(this.controls[o]);
        this.popups = [], this.unloadDestroy = OpenLayers.Function.bind(this.destroy, this), 
        OpenLayers.Event.observe(window, "unload", this.unloadDestroy), t && t.layers && (delete this.center, 
        delete this.zoom, this.addLayers(t.layers), t.center && !this.getCenter() && this.setCenter(t.center, t.zoom)), 
        this.panMethod && (this.panTween = new OpenLayers.Tween(this.panMethod)), this.zoomMethod && this.applyTransform.transform && (this.zoomTween = new OpenLayers.Tween(this.zoomMethod));
    },
    "getViewport": function() {
        return this.viewPortDiv;
    },
    "render": function(e) {
        this.div = OpenLayers.Util.getElement(e), OpenLayers.Element.addClass(this.div, "olMap"), 
        this.viewPortDiv.parentNode.removeChild(this.viewPortDiv), this.div.appendChild(this.viewPortDiv), 
        this.updateSize();
    },
    "unloadDestroy": null,
    "updateSizeDestroy": null,
    "destroy": function() {
        if (!this.unloadDestroy) return !1;
        if (this.panTween && (this.panTween.stop(), this.panTween = null), this.zoomTween && (this.zoomTween.stop(), 
        this.zoomTween = null), OpenLayers.Event.stopObserving(window, "unload", this.unloadDestroy), 
        this.unloadDestroy = null, this.updateSizeDestroy && OpenLayers.Event.stopObserving(window, "resize", this.updateSizeDestroy), 
        this.paddingForPopups = null, null != this.controls) {
            for (e = this.controls.length - 1; e >= 0; --e) this.controls[e].destroy();
            this.controls = null;
        }
        if (null != this.layers) {
            for (var e = this.layers.length - 1; e >= 0; --e) this.layers[e].destroy(!1);
            this.layers = null;
        }
        this.viewPortDiv && this.viewPortDiv.parentNode && this.viewPortDiv.parentNode.removeChild(this.viewPortDiv), 
        this.viewPortDiv = null, this.tileManager && (this.tileManager.removeMap(this), 
        this.tileManager = null), this.eventListeners && (this.events.un(this.eventListeners), 
        this.eventListeners = null), this.events.destroy(), this.events = null, this.options = null;
    },
    "setOptions": function(e) {
        var t = this.minPx && e.restrictedExtent != this.restrictedExtent;
        OpenLayers.Util.extend(this, e), t && this.moveTo(this.getCachedCenter(), this.zoom, {
            "forceZoomChange": !0
        });
    },
    "getTileSize": function() {
        return this.tileSize;
    },
    "getBy": function(e, t, i) {
        var n = "function" == typeof i.test;
        return OpenLayers.Array.filter(this[e], function(e) {
            return e[t] == i || n && i.test(e[t]);
        });
    },
    "getLayersBy": function(e, t) {
        return this.getBy("layers", e, t);
    },
    "getLayersByName": function(e) {
        return this.getLayersBy("name", e);
    },
    "getLayersByClass": function(e) {
        return this.getLayersBy("CLASS_NAME", e);
    },
    "getControlsBy": function(e, t) {
        return this.getBy("controls", e, t);
    },
    "getControlsByClass": function(e) {
        return this.getControlsBy("CLASS_NAME", e);
    },
    "getLayer": function(e) {
        for (var t = null, i = 0, n = this.layers.length; i < n; i++) {
            var r = this.layers[i];
            if (r.id == e) {
                t = r;
                break;
            }
        }
        return t;
    },
    "setLayerZIndex": function(e, t) {
        e.setZIndex(this.Z_INDEX_BASE[e.isBaseLayer ? "BaseLayer" : "Overlay"] + 5 * t);
    },
    "resetLayersZIndex": function() {
        for (var e = 0, t = this.layers.length; e < t; e++) {
            var i = this.layers[e];
            this.setLayerZIndex(i, e);
        }
    },
    "addLayer": function(e) {
        for (var t = 0, i = this.layers.length; t < i; t++) if (this.layers[t] == e) return !1;
        return !1 !== this.events.triggerEvent("preaddlayer", {
            "layer": e
        }) && (this.allOverlays && (e.isBaseLayer = !1), e.div.className = "olLayerDiv", 
        e.div.style.overflow = "", this.setLayerZIndex(e, this.layers.length), e.isFixed ? this.viewPortDiv.appendChild(e.div) : this.layerContainerDiv.appendChild(e.div), 
        this.layers.push(e), e.setMap(this), e.isBaseLayer || this.allOverlays && !this.baseLayer ? null == this.baseLayer ? this.setBaseLayer(e) : e.setVisibility(!1) : e.redraw(), 
        this.events.triggerEvent("addlayer", {
            "layer": e
        }), e.events.triggerEvent("added", {
            "map": this,
            "layer": e
        }), e.afterAdd(), !0);
    },
    "addLayers": function(e) {
        for (var t = 0, i = e.length; t < i; t++) this.addLayer(e[t]);
    },
    "removeLayer": function(e, t) {
        if (!1 !== this.events.triggerEvent("preremovelayer", {
            "layer": e
        })) {
            if (null == t && (t = !0), e.isFixed ? this.viewPortDiv.removeChild(e.div) : this.layerContainerDiv.removeChild(e.div), 
            OpenLayers.Util.removeItem(this.layers, e), e.removeMap(this), e.map = null, this.baseLayer == e && (this.baseLayer = null, 
            t)) for (var i = 0, n = this.layers.length; i < n; i++) {
                var r = this.layers[i];
                if (r.isBaseLayer || this.allOverlays) {
                    this.setBaseLayer(r);
                    break;
                }
            }
            this.resetLayersZIndex(), this.events.triggerEvent("removelayer", {
                "layer": e
            }), e.events.triggerEvent("removed", {
                "map": this,
                "layer": e
            });
        }
    },
    "getNumLayers": function() {
        return this.layers.length;
    },
    "getLayerIndex": function(e) {
        return OpenLayers.Util.indexOf(this.layers, e);
    },
    "setLayerIndex": function(e, t) {
        var i = this.getLayerIndex(e);
        if (t < 0 ? t = 0 : t > this.layers.length && (t = this.layers.length), i != t) {
            this.layers.splice(i, 1), this.layers.splice(t, 0, e);
            for (var n = 0, r = this.layers.length; n < r; n++) this.setLayerZIndex(this.layers[n], n);
            this.events.triggerEvent("changelayer", {
                "layer": e,
                "property": "order"
            }), this.allOverlays && (0 === t ? this.setBaseLayer(e) : this.baseLayer !== this.layers[0] && this.setBaseLayer(this.layers[0]));
        }
    },
    "raiseLayer": function(e, t) {
        var i = this.getLayerIndex(e) + t;
        this.setLayerIndex(e, i);
    },
    "setBaseLayer": function(e) {
        if (e != this.baseLayer && -1 != OpenLayers.Util.indexOf(this.layers, e)) {
            var t = this.getCachedCenter(), i = this.getResolution(), n = OpenLayers.Util.getResolutionFromScale(this.getScale(), e.units);
            if (null == this.baseLayer || this.allOverlays || this.baseLayer.setVisibility(!1), 
            this.baseLayer = e, this.allOverlays && !this.baseLayer.visibility || (this.baseLayer.setVisibility(!0), 
            !1 === this.baseLayer.inRange && this.baseLayer.redraw()), null != t) {
                var r = this.getZoomForResolution(n || this.resolution, !0);
                this.setCenter(t, r, !1, i != n);
            }
            this.events.triggerEvent("changebaselayer", {
                "layer": this.baseLayer
            });
        }
    },
    "addControl": function(e, t) {
        this.controls.push(e), this.addControlToMap(e, t);
    },
    "addControls": function(e, t) {
        for (var i = 1 === arguments.length ? [] : t, n = 0, r = e.length; n < r; n++) {
            var s = e[n], a = i[n] ? i[n] : null;
            this.addControl(s, a);
        }
    },
    "addControlToMap": function(e, t) {
        e.outsideViewport = null != e.div, this.displayProjection && !e.displayProjection && (e.displayProjection = this.displayProjection), 
        e.setMap(this);
        var i = e.draw(t);
        i && (e.outsideViewport || (i.style.zIndex = this.Z_INDEX_BASE.Control + this.controls.length, 
        this.viewPortDiv.appendChild(i))), e.autoActivate && e.activate();
    },
    "getControl": function(e) {
        for (var t = null, i = 0, n = this.controls.length; i < n; i++) {
            var r = this.controls[i];
            if (r.id == e) {
                t = r;
                break;
            }
        }
        return t;
    },
    "removeControl": function(e) {
        e && e == this.getControl(e.id) && (e.div && e.div.parentNode == this.viewPortDiv && this.viewPortDiv.removeChild(e.div), 
        OpenLayers.Util.removeItem(this.controls, e));
    },
    "addPopup": function(e, t) {
        if (t) for (var i = this.popups.length - 1; i >= 0; --i) this.removePopup(this.popups[i]);
        e.map = this, this.popups.push(e);
        var n = e.draw();
        n && (n.style.zIndex = this.Z_INDEX_BASE.Popup + this.popups.length, this.layerContainerDiv.appendChild(n));
    },
    "removePopup": function(e) {
        if (OpenLayers.Util.removeItem(this.popups, e), e.div) try {
            this.layerContainerDiv.removeChild(e.div);
        } catch (e) {}
        e.map = null;
    },
    "getSize": function() {
        var e = null;
        return null != this.size && (e = this.size.clone()), e;
    },
    "updateSize": function() {
        var e = this.getCurrentSize();
        if (e && !isNaN(e.h) && !isNaN(e.w)) {
            this.events.clearMouseCache();
            var t = this.getSize();
            if (null == t && (this.size = t = e), !e.equals(t)) {
                this.size = e;
                for (var i = 0, n = this.layers.length; i < n; i++) this.layers[i].onMapResize();
                var r = this.getCachedCenter();
                if (null != this.baseLayer && null != r) {
                    var s = this.getZoom();
                    this.zoom = null, this.setCenter(r, s);
                }
            }
        }
        this.events.triggerEvent("updatesize");
    },
    "getCurrentSize": function() {
        var e = new OpenLayers.Size(this.div.clientWidth, this.div.clientHeight);
        return (0 == e.w && 0 == e.h || isNaN(e.w) && isNaN(e.h)) && (e.w = this.div.offsetWidth, 
        e.h = this.div.offsetHeight), (0 == e.w && 0 == e.h || isNaN(e.w) && isNaN(e.h)) && (e.w = parseInt(this.div.style.width), 
        e.h = parseInt(this.div.style.height)), e;
    },
    "calculateBounds": function(e, t) {
        var i = null;
        if (null == e && (e = this.getCachedCenter()), null == t && (t = this.getResolution()), 
        null != e && null != t) {
            var n = this.size.w * t / 2, r = this.size.h * t / 2;
            i = new OpenLayers.Bounds(e.lon - n, e.lat - r, e.lon + n, e.lat + r);
        }
        return i;
    },
    "getCenter": function() {
        var e = null, t = this.getCachedCenter();
        return t && (e = t.clone()), e;
    },
    "getCachedCenter": function() {
        return !this.center && this.size && (this.center = this.getLonLatFromViewPortPx({
            "x": this.size.w / 2,
            "y": this.size.h / 2
        })), this.center;
    },
    "getZoom": function() {
        return this.zoom;
    },
    "pan": function(e, t, i) {
        if ((i = OpenLayers.Util.applyDefaults(i, {
            "animate": !0,
            "dragging": !1
        })).dragging) 0 == e && 0 == t || this.moveByPx(e, t); else {
            var n = this.getViewPortPxFromLonLat(this.getCachedCenter()), r = n.add(e, t);
            if (this.dragging || !r.equals(n)) {
                var s = this.getLonLatFromViewPortPx(r);
                i.animate ? this.panTo(s) : (this.moveTo(s), this.dragging && (this.dragging = !1, 
                this.events.triggerEvent("moveend")));
            }
        }
    },
    "panTo": function(e) {
        if (this.panTween && this.getExtent().scale(this.panRatio).containsLonLat(e)) {
            var t = this.getCachedCenter();
            if (e.equals(t)) return;
            var i = this.getPixelFromLonLat(t), n = this.getPixelFromLonLat(e), r = {
                "x": n.x - i.x,
                "y": n.y - i.y
            }, s = {
                "x": 0,
                "y": 0
            };
            this.panTween.start({
                "x": 0,
                "y": 0
            }, r, this.panDuration, {
                "callbacks": {
                    "eachStep": OpenLayers.Function.bind(function(e) {
                        var t = e.x - s.x, i = e.y - s.y;
                        this.moveByPx(t, i), s.x = Math.round(e.x), s.y = Math.round(e.y);
                    }, this),
                    "done": OpenLayers.Function.bind(function(t) {
                        this.moveTo(e), this.dragging = !1, this.events.triggerEvent("moveend");
                    }, this)
                }
            });
        } else this.setCenter(e);
    },
    "setCenter": function(e, t, i, n) {
        this.panTween && this.panTween.stop(), this.zoomTween && this.zoomTween.stop(), 
        this.moveTo(e, t, {
            "dragging": i,
            "forceZoomChange": n
        });
    },
    "moveByPx": function(e, t) {
        var i = this.size.w / 2, n = this.size.h / 2, r = i + e, s = n + t, a = this.baseLayer.wrapDateLine, o = 0, l = 0;
        if (this.restrictedExtent && (o = i, l = n, a = !1), e = a || r <= this.maxPx.x - o && r >= this.minPx.x + o ? Math.round(e) : 0, 
        t = s <= this.maxPx.y - l && s >= this.minPx.y + l ? Math.round(t) : 0, e || t) {
            this.dragging || (this.dragging = !0, this.events.triggerEvent("movestart")), this.center = null, 
            e && (this.layerContainerOriginPx.x -= e, this.minPx.x -= e, this.maxPx.x -= e), 
            t && (this.layerContainerOriginPx.y -= t, this.minPx.y -= t, this.maxPx.y -= t), 
            this.applyTransform();
            var h, u, p;
            for (u = 0, p = this.layers.length; u < p; ++u) (h = this.layers[u]).visibility && (h === this.baseLayer || h.inRange) && (h.moveByPx(e, t), 
            h.events.triggerEvent("move"));
            this.events.triggerEvent("move");
        }
    },
    "adjustZoom": function(e) {
        if (this.baseLayer && this.baseLayer.wrapDateLine) {
            var t = this.baseLayer.resolutions, i = this.getMaxExtent().getWidth() / this.size.w;
            if (this.getResolutionForZoom(e) > i) if (this.fractionalZoom) e = this.getZoomForResolution(i); else for (var n = 0 | e, r = t.length; n < r; ++n) if (t[n] <= i) {
                e = n;
                break;
            }
        }
        return e;
    },
    "getMinZoom": function() {
        return this.adjustZoom(0);
    },
    "moveTo": function(e, t, i) {
        null == e || e instanceof OpenLayers.LonLat || (e = new OpenLayers.LonLat(e)), i || (i = {}), 
        null != t && (t = parseFloat(t), this.fractionalZoom || (t = Math.round(t)));
        var n = t;
        (t = this.adjustZoom(t)) !== n && (e = this.getCenter());
        var r = i.dragging || this.dragging, s = i.forceZoomChange;
        if (this.getCachedCenter() || this.isValidLonLat(e) || (e = this.maxExtent.getCenterLonLat(), 
        this.center = e.clone()), null != this.restrictedExtent) {
            null == e && (e = this.center), null == t && (t = this.getZoom());
            var a = this.getResolutionForZoom(t), o = this.calculateBounds(e, a);
            if (!this.restrictedExtent.containsBounds(o)) {
                var l = this.restrictedExtent.getCenterLonLat();
                o.getWidth() > this.restrictedExtent.getWidth() ? e = new OpenLayers.LonLat(l.lon, e.lat) : o.left < this.restrictedExtent.left ? e = e.add(this.restrictedExtent.left - o.left, 0) : o.right > this.restrictedExtent.right && (e = e.add(this.restrictedExtent.right - o.right, 0)), 
                o.getHeight() > this.restrictedExtent.getHeight() ? e = new OpenLayers.LonLat(e.lon, l.lat) : o.bottom < this.restrictedExtent.bottom ? e = e.add(0, this.restrictedExtent.bottom - o.bottom) : o.top > this.restrictedExtent.top && (e = e.add(0, this.restrictedExtent.top - o.top));
            }
        }
        var h = s || this.isValidZoomLevel(t) && t != this.getZoom(), u = this.isValidLonLat(e) && !e.equals(this.center);
        if (h || u || r) {
            r || this.events.triggerEvent("movestart", {
                "zoomChanged": h
            }), u && (!h && this.center && this.centerLayerContainer(e), this.center = e.clone());
            var p = h ? this.getResolutionForZoom(t) : this.getResolution();
            if (h || null == this.layerContainerOrigin) {
                this.layerContainerOrigin = this.getCachedCenter(), this.layerContainerOriginPx.x = 0, 
                this.layerContainerOriginPx.y = 0, this.applyTransform();
                var c = this.getMaxExtent({
                    "restricted": !0
                }), d = c.getCenterLonLat(), f = this.center.lon - d.lon, y = d.lat - this.center.lat, m = Math.round(c.getWidth() / p), g = Math.round(c.getHeight() / p);
                this.minPx = {
                    "x": (this.size.w - m) / 2 - f / p,
                    "y": (this.size.h - g) / 2 - y / p
                }, this.maxPx = {
                    "x": this.minPx.x + Math.round(c.getWidth() / p),
                    "y": this.minPx.y + Math.round(c.getHeight() / p)
                };
            }
            h && (this.zoom = t, this.resolution = p);
            var v = this.getExtent();
            this.baseLayer.visibility && (this.baseLayer.moveTo(v, h, i.dragging), i.dragging || this.baseLayer.events.triggerEvent("moveend", {
                "zoomChanged": h
            })), v = this.baseLayer.getExtent();
            for (b = this.layers.length - 1; b >= 0; --b) {
                var L = this.layers[b];
                if (L !== this.baseLayer && !L.isBaseLayer) {
                    var O = L.calculateInRange();
                    L.inRange != O && (L.inRange = O, O || L.display(!1), this.events.triggerEvent("changelayer", {
                        "layer": L,
                        "property": "visibility"
                    })), O && L.visibility && (L.moveTo(v, h, i.dragging), i.dragging || L.events.triggerEvent("moveend", {
                        "zoomChanged": h
                    }));
                }
            }
            if (this.events.triggerEvent("move"), r || this.events.triggerEvent("moveend"), 
            h) {
                for (var b = 0, w = this.popups.length; b < w; b++) this.popups[b].updatePosition();
                this.events.triggerEvent("zoomend");
            }
        }
    },
    "centerLayerContainer": function(e) {
        var t = this.getViewPortPxFromLonLat(this.layerContainerOrigin), i = this.getViewPortPxFromLonLat(e);
        if (null != t && null != i) {
            var n = this.layerContainerOriginPx.x, r = this.layerContainerOriginPx.y, s = Math.round(t.x - i.x), a = Math.round(t.y - i.y);
            this.applyTransform(this.layerContainerOriginPx.x = s, this.layerContainerOriginPx.y = a);
            var o = n - s, l = r - a;
            this.minPx.x -= o, this.maxPx.x -= o, this.minPx.y -= l, this.maxPx.y -= l;
        }
    },
    "isValidZoomLevel": function(e) {
        return null != e && e >= 0 && e < this.getNumZoomLevels();
    },
    "isValidLonLat": function(e) {
        var t = !1;
        if (null != e) {
            var i = this.getMaxExtent(), n = this.baseLayer.wrapDateLine && i;
            t = i.containsLonLat(e, {
                "worldBounds": n
            });
        }
        return t;
    },
    "getProjection": function() {
        var e = this.getProjectionObject();
        return e ? e.getCode() : null;
    },
    "getProjectionObject": function() {
        var e = null;
        return null != this.baseLayer && (e = this.baseLayer.projection), e;
    },
    "getMaxResolution": function() {
        var e = null;
        return null != this.baseLayer && (e = this.baseLayer.maxResolution), e;
    },
    "getMaxExtent": function(e) {
        var t = null;
        return e && e.restricted && this.restrictedExtent ? t = this.restrictedExtent : null != this.baseLayer && (t = this.baseLayer.maxExtent), 
        t;
    },
    "getNumZoomLevels": function() {
        var e = null;
        return null != this.baseLayer && (e = this.baseLayer.numZoomLevels), e;
    },
    "getExtent": function() {
        var e = null;
        return null != this.baseLayer && (e = this.baseLayer.getExtent()), e;
    },
    "getResolution": function() {
        var e = null;
        return null != this.baseLayer ? e = this.baseLayer.getResolution() : !0 === this.allOverlays && this.layers.length > 0 && (e = this.layers[0].getResolution()), 
        e;
    },
    "getUnits": function() {
        var e = null;
        return null != this.baseLayer && (e = this.baseLayer.units), e;
    },
    "getScale": function() {
        var e = null;
        if (null != this.baseLayer) {
            var t = this.getResolution(), i = this.baseLayer.units;
            e = OpenLayers.Util.getScaleFromResolution(t, i);
        }
        return e;
    },
    "getZoomForExtent": function(e, t) {
        var i = null;
        return null != this.baseLayer && (i = this.baseLayer.getZoomForExtent(e, t)), i;
    },
    "getResolutionForZoom": function(e) {
        var t = null;
        return this.baseLayer && (t = this.baseLayer.getResolutionForZoom(e)), t;
    },
    "getZoomForResolution": function(e, t) {
        var i = null;
        return null != this.baseLayer && (i = this.baseLayer.getZoomForResolution(e, t)), 
        i;
    },
    "zoomTo": function(e, t) {
        var i = this;
        if (i.isValidZoomLevel(e)) {
            i.baseLayer.wrapDateLine && (e = i.adjustZoom(e));
            var n = t ? i.getZoomTargetCenter(t, i.getResolutionForZoom(e)) : i.getCenter();
            if (n && i.events.triggerEvent("zoomstart", {
                "center": n,
                "zoom": e
            }), i.zoomTween) {
                i.zoomTween.stop();
                var r = {
                    "scale": 1
                }, s = {
                    "scale": i.getResolution() / i.getResolutionForZoom(e)
                };
                if (!t) {
                    var a = i.getSize();
                    t = {
                        "x": a.w / 2,
                        "y": a.h / 2
                    };
                }
                i.zoomTween.start(r, s, i.zoomDuration, {
                    "minFrameRate": 50,
                    "callbacks": {
                        "eachStep": function(e) {
                            var n = i.layerContainerOriginPx, r = e.scale, s = (r - 1) * (n.x - t.x) | 0, a = (r - 1) * (n.y - t.y) | 0;
                            i.applyTransform(n.x + s, n.y + a, r);
                        },
                        "done": function(e) {
                            i.applyTransform();
                            var r = i.getResolution() / e.scale, s = i.getZoomForResolution(r, !0), a = 1 === e.scale ? n : i.getZoomTargetCenter(t, r);
                            i.moveTo(a, s);
                        }
                    }
                });
            } else i.setCenter(n, e);
        }
    },
    "zoomIn": function() {
        this.zoomTween && this.zoomTween.stop(), this.zoomTo(this.getZoom() + 1);
    },
    "zoomOut": function() {
        this.zoomTween && this.zoomTween.stop(), this.zoomTo(this.getZoom() - 1);
    },
    "zoomToExtent": function(e, t) {
        e instanceof OpenLayers.Bounds || (e = new OpenLayers.Bounds(e));
        var i = e.getCenterLonLat();
        if (this.baseLayer.wrapDateLine) {
            var n = this.getMaxExtent();
            for (e = e.clone(); e.right < e.left; ) e.right += n.getWidth();
            i = e.getCenterLonLat().wrapDateLine(n);
        }
        this.setCenter(i, this.getZoomForExtent(e, t));
    },
    "zoomToMaxExtent": function(e) {
        var t = !e || e.restricted, i = this.getMaxExtent({
            "restricted": t
        });
        this.zoomToExtent(i);
    },
    "zoomToScale": function(e, t) {
        var i = OpenLayers.Util.getResolutionFromScale(e, this.baseLayer.units), n = this.size.w * i / 2, r = this.size.h * i / 2, s = this.getCachedCenter(), a = new OpenLayers.Bounds(s.lon - n, s.lat - r, s.lon + n, s.lat + r);
        this.zoomToExtent(a, t);
    },
    "getLonLatFromViewPortPx": function(e) {
        var t = null;
        return null != this.baseLayer && (t = this.baseLayer.getLonLatFromViewPortPx(e)), 
        t;
    },
    "getViewPortPxFromLonLat": function(e) {
        var t = null;
        return null != this.baseLayer && (t = this.baseLayer.getViewPortPxFromLonLat(e)), 
        t;
    },
    "getZoomTargetCenter": function(e, t) {
        var i = null, n = this.getSize(), r = n.w / 2 - e.x, s = e.y - n.h / 2, a = this.getLonLatFromPixel(e);
        return a && (i = new OpenLayers.LonLat(a.lon + r * t, a.lat + s * t)), i;
    },
    "getLonLatFromPixel": function(e) {
        return this.getLonLatFromViewPortPx(e);
    },
    "getPixelFromLonLat": function(e) {
        var t = this.getViewPortPxFromLonLat(e);
        return t.x = Math.round(t.x), t.y = Math.round(t.y), t;
    },
    "getGeodesicPixelSize": function(e) {
        var t = e ? this.getLonLatFromPixel(e) : this.getCachedCenter() || new OpenLayers.LonLat(0, 0), i = this.getResolution(), n = t.add(-i / 2, 0), r = t.add(i / 2, 0), s = t.add(0, -i / 2), a = t.add(0, i / 2), o = new OpenLayers.Projection("EPSG:4326"), l = this.getProjectionObject() || o;
        return l.equals(o) || (n.transform(l, o), r.transform(l, o), s.transform(l, o), 
        a.transform(l, o)), new OpenLayers.Size(OpenLayers.Util.distVincenty(n, r), OpenLayers.Util.distVincenty(s, a));
    },
    "getViewPortPxFromLayerPx": function(e) {
        var t = null;
        if (null != e) {
            var i = this.layerContainerOriginPx.x, n = this.layerContainerOriginPx.y;
            t = e.add(i, n);
        }
        return t;
    },
    "getLayerPxFromViewPortPx": function(e) {
        var t = null;
        if (null != e) {
            var i = -this.layerContainerOriginPx.x, n = -this.layerContainerOriginPx.y;
            t = e.add(i, n), (isNaN(t.x) || isNaN(t.y)) && (t = null);
        }
        return t;
    },
    "getLonLatFromLayerPx": function(e) {
        return e = this.getViewPortPxFromLayerPx(e), this.getLonLatFromViewPortPx(e);
    },
    "getLayerPxFromLonLat": function(e) {
        var t = this.getPixelFromLonLat(e);
        return this.getLayerPxFromViewPortPx(t);
    },
    "applyTransform": function(e, t, i) {
        i = i || 1;
        var n = this.layerContainerOriginPx, r = 1 !== i;
        e = e || n.x, t = t || n.y;
        var s = this.layerContainerDiv.style, a = this.applyTransform.transform, o = this.applyTransform.template;
        if (void 0 === a && (a = OpenLayers.Util.vendorPrefix.style("transform"), this.applyTransform.transform = a, 
        a)) {
            var l = OpenLayers.Element.getStyle(this.viewPortDiv, OpenLayers.Util.vendorPrefix.css("transform"));
            l && "none" === l || (o = [ "translate3d(", ",0) ", "scale3d(", ",1)" ], s[a] = [ o[0], "0,0", o[1] ].join("")), 
            o && ~s[a].indexOf(o[0]) || (o = [ "translate(", ") ", "scale(", ")" ]), this.applyTransform.template = o;
        }
        null === a || "translate3d(" !== o[0] && !0 !== r ? (s.left = e + "px", s.top = t + "px", 
        null !== a && (s[a] = "")) : (!0 === r && "translate(" === o[0] && (e -= n.x, t -= n.y, 
        s.left = n.x + "px", s.top = n.y + "px"), s[a] = [ o[0], e, "px,", t, "px", o[1], o[2], i, ",", i, o[3] ].join(""));
    },
    "CLASS_NAME": "OpenLayers.Map"
}), OpenLayers.Map.TILE_WIDTH = 256, OpenLayers.Map.TILE_HEIGHT = 256, OpenLayers.Layer = OpenLayers.Class({
    "id": null,
    "name": null,
    "div": null,
    "opacity": 1,
    "alwaysInRange": null,
    "RESOLUTION_PROPERTIES": [ "scales", "resolutions", "maxScale", "minScale", "maxResolution", "minResolution", "numZoomLevels", "maxZoomLevel" ],
    "events": null,
    "map": null,
    "isBaseLayer": !1,
    "alpha": !1,
    "displayInLayerSwitcher": !0,
    "visibility": !0,
    "attribution": null,
    "inRange": !1,
    "imageSize": null,
    "options": null,
    "eventListeners": null,
    "gutter": 0,
    "projection": null,
    "units": null,
    "scales": null,
    "resolutions": null,
    "maxExtent": null,
    "minExtent": null,
    "maxResolution": null,
    "minResolution": null,
    "numZoomLevels": null,
    "minScale": null,
    "maxScale": null,
    "displayOutsideMaxExtent": !1,
    "wrapDateLine": !1,
    "metadata": null,
    "initialize": function(e, t) {
        this.metadata = {}, t = OpenLayers.Util.extend({}, t), null != this.alwaysInRange && (t.alwaysInRange = this.alwaysInRange), 
        this.addOptions(t), this.name = e, null == this.id && (this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_"), 
        this.div = OpenLayers.Util.createDiv(this.id), this.div.style.width = "100%", this.div.style.height = "100%", 
        this.div.dir = "ltr", this.events = new OpenLayers.Events(this, this.div), this.eventListeners instanceof Object && this.events.on(this.eventListeners));
    },
    "destroy": function(e) {
        null == e && (e = !0), null != this.map && this.map.removeLayer(this, e), this.projection = null, 
        this.map = null, this.name = null, this.div = null, this.options = null, this.events && (this.eventListeners && this.events.un(this.eventListeners), 
        this.events.destroy()), this.eventListeners = null, this.events = null;
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer(this.name, this.getOptions())), OpenLayers.Util.applyDefaults(e, this), 
        e.map = null, e;
    },
    "getOptions": function() {
        var e = {};
        for (var t in this.options) e[t] = this[t];
        return e;
    },
    "setName": function(e) {
        e != this.name && (this.name = e, null != this.map && this.map.events.triggerEvent("changelayer", {
            "layer": this,
            "property": "name"
        }));
    },
    "addOptions": function(e, t) {
        if (null == this.options && (this.options = {}), e && ("string" == typeof e.projection && (e.projection = new OpenLayers.Projection(e.projection)), 
        e.projection && OpenLayers.Util.applyDefaults(e, OpenLayers.Projection.defaults[e.projection.getCode()]), 
        !e.maxExtent || e.maxExtent instanceof OpenLayers.Bounds || (e.maxExtent = new OpenLayers.Bounds(e.maxExtent)), 
        !e.minExtent || e.minExtent instanceof OpenLayers.Bounds || (e.minExtent = new OpenLayers.Bounds(e.minExtent))), 
        OpenLayers.Util.extend(this.options, e), OpenLayers.Util.extend(this, e), this.projection && this.projection.getUnits() && (this.units = this.projection.getUnits()), 
        this.map) {
            var i = this.map.getResolution(), n = this.RESOLUTION_PROPERTIES.concat([ "projection", "units", "minExtent", "maxExtent" ]);
            for (var r in e) if (e.hasOwnProperty(r) && OpenLayers.Util.indexOf(n, r) >= 0) {
                this.initResolutions(), t && this.map.baseLayer === this && (this.map.setCenter(this.map.getCenter(), this.map.getZoomForResolution(i), !1, !0), 
                this.map.events.triggerEvent("changebaselayer", {
                    "layer": this
                }));
                break;
            }
        }
    },
    "onMapResize": function() {},
    "redraw": function() {
        var e = !1;
        if (this.map) {
            this.inRange = this.calculateInRange();
            var t = this.getExtent();
            if (t && this.inRange && this.visibility) {
                this.moveTo(t, !0, !1), this.events.triggerEvent("moveend", {
                    "zoomChanged": !0
                }), e = !0;
            }
        }
        return e;
    },
    "moveTo": function(e, t, i) {
        var n = this.visibility;
        this.isBaseLayer || (n = n && this.inRange), this.display(n);
    },
    "moveByPx": function(e, t) {},
    "setMap": function(e) {
        if (null == this.map) {
            if (this.map = e, this.maxExtent = this.maxExtent || this.map.maxExtent, this.minExtent = this.minExtent || this.map.minExtent, 
            this.projection = this.projection || this.map.projection, "string" == typeof this.projection && (this.projection = new OpenLayers.Projection(this.projection)), 
            this.projection && this.projection.getUnits() ? this.units = this.projection.getUnits() : this.units = this.units || this.map.units, 
            this.initResolutions(), !this.isBaseLayer) {
                this.inRange = this.calculateInRange();
                var t = this.visibility && this.inRange;
                this.div.style.display = t ? "" : "none";
            }
            this.setTileSize();
        }
    },
    "afterAdd": function() {},
    "removeMap": function(e) {},
    "getImageSize": function(e) {
        return this.imageSize || this.tileSize;
    },
    "setTileSize": function(e) {
        var t = e || (this.tileSize ? this.tileSize : this.map.getTileSize());
        this.tileSize = t, this.gutter && (this.imageSize = new OpenLayers.Size(t.w + 2 * this.gutter, t.h + 2 * this.gutter));
    },
    "getVisibility": function() {
        return this.visibility;
    },
    "setVisibility": function(e) {
        e != this.visibility && (this.visibility = e, this.display(e), this.redraw(), null != this.map && this.map.events.triggerEvent("changelayer", {
            "layer": this,
            "property": "visibility"
        }), this.events.triggerEvent("visibilitychanged"));
    },
    "display": function(e) {
        e != ("none" != this.div.style.display) && (this.div.style.display = e && this.calculateInRange() ? "block" : "none");
    },
    "calculateInRange": function() {
        var e = !1;
        if (this.alwaysInRange) e = !0; else if (this.map) {
            var t = this.map.getResolution();
            e = t >= this.minResolution && t <= this.maxResolution;
        }
        return e;
    },
    "setIsBaseLayer": function(e) {
        e != this.isBaseLayer && (this.isBaseLayer = e, null != this.map && this.map.events.triggerEvent("changebaselayer", {
            "layer": this
        }));
    },
    "initResolutions": function() {
        var e, t, i, n = {}, r = !0;
        for (e = 0, t = this.RESOLUTION_PROPERTIES.length; e < t; e++) n[i = this.RESOLUTION_PROPERTIES[e]] = this.options[i], 
        r && this.options[i] && (r = !1);
        if (null == this.options.alwaysInRange && (this.alwaysInRange = r), null == n.resolutions && (n.resolutions = this.resolutionsFromScales(n.scales)), 
        null == n.resolutions && (n.resolutions = this.calculateResolutions(n)), null == n.resolutions) {
            for (e = 0, t = this.RESOLUTION_PROPERTIES.length; e < t; e++) n[i = this.RESOLUTION_PROPERTIES[e]] = null != this.options[i] ? this.options[i] : this.map[i];
            null == n.resolutions && (n.resolutions = this.resolutionsFromScales(n.scales)), 
            null == n.resolutions && (n.resolutions = this.calculateResolutions(n));
        }
        var s;
        this.options.maxResolution && "auto" !== this.options.maxResolution && (s = this.options.maxResolution), 
        this.options.minScale && (s = OpenLayers.Util.getResolutionFromScale(this.options.minScale, this.units));
        var a;
        if (this.options.minResolution && "auto" !== this.options.minResolution && (a = this.options.minResolution), 
        this.options.maxScale && (a = OpenLayers.Util.getResolutionFromScale(this.options.maxScale, this.units)), 
        n.resolutions && (n.resolutions.sort(function(e, t) {
            return t - e;
        }), s || (s = n.resolutions[0]), !a)) {
            var o = n.resolutions.length - 1;
            a = n.resolutions[o];
        }
        if (this.resolutions = n.resolutions, this.resolutions) {
            for (t = this.resolutions.length, this.scales = new Array(t), e = 0; e < t; e++) this.scales[e] = OpenLayers.Util.getScaleFromResolution(this.resolutions[e], this.units);
            this.numZoomLevels = t;
        }
        this.minResolution = a, a && (this.maxScale = OpenLayers.Util.getScaleFromResolution(a, this.units)), 
        this.maxResolution = s, s && (this.minScale = OpenLayers.Util.getScaleFromResolution(s, this.units));
    },
    "resolutionsFromScales": function(e) {
        if (null != e) {
            var t, i, n;
            for (n = e.length, t = new Array(n), i = 0; i < n; i++) t[i] = OpenLayers.Util.getResolutionFromScale(e[i], this.units);
            return t;
        }
    },
    "calculateResolutions": function(e) {
        var t, i, n, r = e.maxResolution;
        null != e.minScale ? r = OpenLayers.Util.getResolutionFromScale(e.minScale, this.units) : "auto" == r && null != this.maxExtent && (t = this.map.getSize(), 
        i = this.maxExtent.getWidth() / t.w, n = this.maxExtent.getHeight() / t.h, r = Math.max(i, n));
        var s = e.minResolution;
        if (null != e.maxScale ? s = OpenLayers.Util.getResolutionFromScale(e.maxScale, this.units) : "auto" == e.minResolution && null != this.minExtent && (t = this.map.getSize(), 
        i = this.minExtent.getWidth() / t.w, n = this.minExtent.getHeight() / t.h, s = Math.max(i, n)), 
        "number" != typeof r && "number" != typeof s && null != this.maxExtent) {
            var a = this.map.getTileSize();
            r = Math.max(this.maxExtent.getWidth() / a.w, this.maxExtent.getHeight() / a.h);
        }
        var o = e.maxZoomLevel, l = e.numZoomLevels;
        if ("number" == typeof s && "number" == typeof r && void 0 === l) {
            var h = r / s;
            l = Math.floor(Math.log(h) / Math.log(2)) + 1;
        } else void 0 === l && null != o && (l = o + 1);
        if (!("number" != typeof l || l <= 0 || "number" != typeof r && "number" != typeof s)) {
            var u = new Array(l), p = 2;
            "number" == typeof s && "number" == typeof r && (p = Math.pow(r / s, 1 / (l - 1)));
            var c;
            if ("number" == typeof r) for (c = 0; c < l; c++) u[c] = r / Math.pow(p, c); else for (c = 0; c < l; c++) u[l - 1 - c] = s * Math.pow(p, c);
            return u;
        }
    },
    "getResolution": function() {
        var e = this.map.getZoom();
        return this.getResolutionForZoom(e);
    },
    "getExtent": function() {
        return this.map.calculateBounds();
    },
    "getZoomForExtent": function(e, t) {
        var i = this.map.getSize(), n = Math.max(e.getWidth() / i.w, e.getHeight() / i.h);
        return this.getZoomForResolution(n, t);
    },
    "getDataExtent": function() {},
    "getResolutionForZoom": function(e) {
        e = Math.max(0, Math.min(e, this.resolutions.length - 1));
        var t;
        if (this.map.fractionalZoom) {
            var i = Math.floor(e), n = Math.ceil(e);
            t = this.resolutions[i] - (e - i) * (this.resolutions[i] - this.resolutions[n]);
        } else t = this.resolutions[Math.round(e)];
        return t;
    },
    "getZoomForResolution": function(e, t) {
        var i, n, r;
        if (this.map.fractionalZoom) {
            var s, a = 0, o = this.resolutions.length - 1, l = this.resolutions[a], h = this.resolutions[o];
            for (n = 0, r = this.resolutions.length; n < r; ++n) if ((s = this.resolutions[n]) >= e && (l = s, 
            a = n), s <= e) {
                h = s, o = n;
                break;
            }
            var u = l - h;
            i = u > 0 ? a + (l - e) / u : a;
        } else {
            var p, c = Number.POSITIVE_INFINITY;
            for (n = 0, r = this.resolutions.length; n < r; n++) if (t) {
                if ((p = Math.abs(this.resolutions[n] - e)) > c) break;
                c = p;
            } else if (this.resolutions[n] < e) break;
            i = Math.max(0, n - 1);
        }
        return i;
    },
    "getLonLatFromViewPortPx": function(e) {
        var t = null, i = this.map;
        if (null != e && i.minPx) {
            var n = i.getResolution(), r = i.getMaxExtent({
                "restricted": !0
            }), s = (e.x - i.minPx.x) * n + r.left, a = (i.minPx.y - e.y) * n + r.top;
            t = new OpenLayers.LonLat(s, a), this.wrapDateLine && (t = t.wrapDateLine(this.maxExtent));
        }
        return t;
    },
    "getViewPortPxFromLonLat": function(e, t) {
        var i = null;
        if (null != e) {
            t = t || this.map.getResolution();
            var n = this.map.calculateBounds(null, t);
            i = new OpenLayers.Pixel(1 / t * (e.lon - n.left), 1 / t * (n.top - e.lat));
        }
        return i;
    },
    "setOpacity": function(e) {
        if (e != this.opacity) {
            this.opacity = e;
            for (var t = this.div.childNodes, i = 0, n = t.length; i < n; ++i) {
                var r = t[i].firstChild || t[i], s = t[i].lastChild;
                s && "iframe" === s.nodeName.toLowerCase() && (r = s.parentNode), OpenLayers.Util.modifyDOMElement(r, null, null, null, null, null, null, e);
            }
            null != this.map && this.map.events.triggerEvent("changelayer", {
                "layer": this,
                "property": "opacity"
            });
        }
    },
    "getZIndex": function() {
        return this.div.style.zIndex;
    },
    "setZIndex": function(e) {
        this.div.style.zIndex = e;
    },
    "adjustBounds": function(e) {
        if (this.gutter) {
            var t = this.gutter * this.map.getResolution();
            e = new OpenLayers.Bounds(e.left - t, e.bottom - t, e.right + t, e.top + t);
        }
        if (this.wrapDateLine) {
            var i = {
                "rightTolerance": this.getResolution(),
                "leftTolerance": this.getResolution()
            };
            e = e.wrapDateLine(this.maxExtent, i);
        }
        return e;
    },
    "CLASS_NAME": "OpenLayers.Layer"
}), OpenLayers.Marker = OpenLayers.Class({
    "icon": null,
    "lonlat": null,
    "events": null,
    "map": null,
    "initialize": function(e, t) {
        this.lonlat = e;
        var i = t || OpenLayers.Marker.defaultIcon();
        null == this.icon ? this.icon = i : (this.icon.url = i.url, this.icon.size = i.size, 
        this.icon.offset = i.offset, this.icon.calculateOffset = i.calculateOffset), this.events = new OpenLayers.Events(this, this.icon.imageDiv);
    },
    "destroy": function() {
        this.erase(), this.map = null, this.events.destroy(), this.events = null, null != this.icon && (this.icon.destroy(), 
        this.icon = null);
    },
    "draw": function(e) {
        return this.icon.draw(e);
    },
    "erase": function() {
        null != this.icon && this.icon.erase();
    },
    "moveTo": function(e) {
        null != e && null != this.icon && this.icon.moveTo(e), this.lonlat = this.map.getLonLatFromLayerPx(e);
    },
    "isDrawn": function() {
        return this.icon && this.icon.isDrawn();
    },
    "onScreen": function() {
        var e = !1;
        return this.map && (e = this.map.getExtent().containsLonLat(this.lonlat)), e;
    },
    "inflate": function(e) {
        this.icon && this.icon.setSize({
            "w": this.icon.size.w * e,
            "h": this.icon.size.h * e
        });
    },
    "setOpacity": function(e) {
        this.icon.setOpacity(e);
    },
    "setUrl": function(e) {
        this.icon.setUrl(e);
    },
    "display": function(e) {
        this.icon.display(e);
    },
    "CLASS_NAME": "OpenLayers.Marker"
}), OpenLayers.Marker.defaultIcon = function() {
    return new OpenLayers.Icon(OpenLayers.Util.getImageLocation("marker.png"), {
        "w": 21,
        "h": 25
    }, {
        "x": -10.5,
        "y": -25
    });
}, OpenLayers.Popup = OpenLayers.Class({
    "events": null,
    "id": "",
    "lonlat": null,
    "div": null,
    "contentSize": null,
    "size": null,
    "contentHTML": null,
    "backgroundColor": "",
    "opacity": "",
    "border": "",
    "contentDiv": null,
    "groupDiv": null,
    "closeDiv": null,
    "autoSize": !1,
    "minSize": null,
    "maxSize": null,
    "displayClass": "olPopup",
    "contentDisplayClass": "olPopupContent",
    "padding": 0,
    "disableFirefoxOverflowHack": !1,
    "fixPadding": function() {
        "number" == typeof this.padding && (this.padding = new OpenLayers.Bounds(this.padding, this.padding, this.padding, this.padding));
    },
    "panMapIfOutOfView": !1,
    "keepInMap": !1,
    "closeOnMove": !1,
    "map": null,
    "initialize": function(e, t, i, n, r, s) {
        null == e && (e = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_")), this.id = e, 
        this.lonlat = t, this.contentSize = null != i ? i : new OpenLayers.Size(OpenLayers.Popup.WIDTH, OpenLayers.Popup.HEIGHT), 
        null != n && (this.contentHTML = n), this.backgroundColor = OpenLayers.Popup.COLOR, 
        this.opacity = OpenLayers.Popup.OPACITY, this.border = OpenLayers.Popup.BORDER, 
        this.div = OpenLayers.Util.createDiv(this.id, null, null, null, null, null, "hidden"), 
        this.div.className = this.displayClass;
        var a = this.id + "_GroupDiv";
        this.groupDiv = OpenLayers.Util.createDiv(a, null, null, null, "relative", null, "hidden");
        var e = this.div.id + "_contentDiv";
        this.contentDiv = OpenLayers.Util.createDiv(e, null, this.contentSize.clone(), null, "relative"), 
        this.contentDiv.className = this.contentDisplayClass, this.groupDiv.appendChild(this.contentDiv), 
        this.div.appendChild(this.groupDiv), r && this.addCloseBox(s), this.registerEvents();
    },
    "destroy": function() {
        this.id = null, this.lonlat = null, this.size = null, this.contentHTML = null, this.backgroundColor = null, 
        this.opacity = null, this.border = null, this.closeOnMove && this.map && this.map.events.unregister("movestart", this, this.hide), 
        this.events.destroy(), this.events = null, this.closeDiv && (OpenLayers.Event.stopObservingElement(this.closeDiv), 
        this.groupDiv.removeChild(this.closeDiv)), this.closeDiv = null, this.div.removeChild(this.groupDiv), 
        this.groupDiv = null, null != this.map && this.map.removePopup(this), this.map = null, 
        this.div = null, this.autoSize = null, this.minSize = null, this.maxSize = null, 
        this.padding = null, this.panMapIfOutOfView = null;
    },
    "draw": function(e) {
        return null == e && null != this.lonlat && null != this.map && (e = this.map.getLayerPxFromLonLat(this.lonlat)), 
        this.closeOnMove && this.map.events.register("movestart", this, this.hide), this.disableFirefoxOverflowHack || "firefox" != OpenLayers.BROWSER_NAME || (this.map.events.register("movestart", this, function() {
            var e = document.defaultView.getComputedStyle(this.contentDiv, null).getPropertyValue("overflow");
            "hidden" != e && (this.contentDiv._oldOverflow = e, this.contentDiv.style.overflow = "hidden");
        }), this.map.events.register("moveend", this, function() {
            var e = this.contentDiv._oldOverflow;
            e && (this.contentDiv.style.overflow = e, this.contentDiv._oldOverflow = null);
        })), this.moveTo(e), this.autoSize || this.size || this.setSize(this.contentSize), 
        this.setBackgroundColor(), this.setOpacity(), this.setBorder(), this.setContentHTML(), 
        this.panMapIfOutOfView && this.panIntoView(), this.div;
    },
    "updatePosition": function() {
        if (this.lonlat && this.map) {
            var e = this.map.getLayerPxFromLonLat(this.lonlat);
            e && this.moveTo(e);
        }
    },
    "moveTo": function(e) {
        null != e && null != this.div && (this.div.style.left = e.x + "px", this.div.style.top = e.y + "px");
    },
    "visible": function() {
        return OpenLayers.Element.visible(this.div);
    },
    "toggle": function() {
        this.visible() ? this.hide() : this.show();
    },
    "show": function() {
        this.div.style.display = "", this.panMapIfOutOfView && this.panIntoView();
    },
    "hide": function() {
        this.div.style.display = "none";
    },
    "setSize": function(e) {
        this.size = e.clone();
        var t = this.getContentDivPadding(), i = t.left + t.right, n = t.top + t.bottom;
        this.fixPadding(), i += this.padding.left + this.padding.right, n += this.padding.top + this.padding.bottom, 
        this.closeDiv && (i += parseInt(this.closeDiv.style.width) + t.right), this.size.w += i, 
        this.size.h += n, "msie" == OpenLayers.BROWSER_NAME && (this.contentSize.w += t.left + t.right, 
        this.contentSize.h += t.bottom + t.top), null != this.div && (this.div.style.width = this.size.w + "px", 
        this.div.style.height = this.size.h + "px"), null != this.contentDiv && (this.contentDiv.style.width = e.w + "px", 
        this.contentDiv.style.height = e.h + "px");
    },
    "updateSize": function() {
        var e = "<div class='" + this.contentDisplayClass + "'>" + this.contentDiv.innerHTML + "</div>", t = this.map ? this.map.div : document.body, i = OpenLayers.Util.getRenderedDimensions(e, null, {
            "displayClass": this.displayClass,
            "containerElement": t
        }), n = this.getSafeContentSize(i), r = null;
        if (n.equals(i)) r = i; else {
            var s = {
                "w": n.w < i.w ? n.w : null,
                "h": n.h < i.h ? n.h : null
            };
            if (s.w && s.h) r = n; else {
                var a = OpenLayers.Util.getRenderedDimensions(e, s, {
                    "displayClass": this.contentDisplayClass,
                    "containerElement": t
                });
                if ("hidden" != OpenLayers.Element.getStyle(this.contentDiv, "overflow") && a.equals(n)) {
                    var o = OpenLayers.Util.getScrollbarWidth();
                    s.w ? a.h += o : a.w += o;
                }
                r = this.getSafeContentSize(a);
            }
        }
        this.setSize(r);
    },
    "setBackgroundColor": function(e) {
        void 0 != e && (this.backgroundColor = e), null != this.div && (this.div.style.backgroundColor = this.backgroundColor);
    },
    "setOpacity": function(e) {
        void 0 != e && (this.opacity = e), null != this.div && (this.div.style.opacity = this.opacity, 
        this.div.style.filter = "alpha(opacity=" + 100 * this.opacity + ")");
    },
    "setBorder": function(e) {
        void 0 != e && (this.border = e), null != this.div && (this.div.style.border = this.border);
    },
    "setContentHTML": function(e) {
        null != e && (this.contentHTML = e), null != this.contentDiv && null != this.contentHTML && this.contentHTML != this.contentDiv.innerHTML && (this.contentDiv.innerHTML = this.contentHTML, 
        this.autoSize && (this.registerImageListeners(), this.updateSize()));
    },
    "registerImageListeners": function() {
        for (var e = this.contentDiv.getElementsByTagName("img"), t = 0, i = e.length; t < i; t++) {
            var n = e[t];
            if (0 == n.width || 0 == n.height) {
                var r = {
                    "popup": this,
                    "img": n
                };
                n._onImgLoad = OpenLayers.Function.bind(function() {
                    null !== this.popup.id && (this.popup.updateSize(), this.popup.visible() && this.popup.panMapIfOutOfView && this.popup.panIntoView(), 
                    OpenLayers.Event.stopObserving(this.img, "load", this.img._onImgLoad));
                }, r), OpenLayers.Event.observe(n, "load", n._onImgLoad);
            }
        }
    },
    "getSafeContentSize": function(e) {
        var t = e.clone(), i = this.getContentDivPadding(), n = i.left + i.right, r = i.top + i.bottom;
        if (this.fixPadding(), n += this.padding.left + this.padding.right, r += this.padding.top + this.padding.bottom, 
        this.closeDiv && (n += parseInt(this.closeDiv.style.width) + i.right), this.minSize && (t.w = Math.max(t.w, this.minSize.w - n), 
        t.h = Math.max(t.h, this.minSize.h - r)), this.maxSize && (t.w = Math.min(t.w, this.maxSize.w - n), 
        t.h = Math.min(t.h, this.maxSize.h - r)), this.map && this.map.size) {
            var s = 0, a = 0;
            if (this.keepInMap && !this.panMapIfOutOfView) {
                var o = this.map.getPixelFromLonLat(this.lonlat);
                switch (this.relativePosition) {
                  case "tr":
                    s = o.x, a = this.map.size.h - o.y;
                    break;

                  case "tl":
                    s = this.map.size.w - o.x, a = this.map.size.h - o.y;
                    break;

                  case "bl":
                    s = this.map.size.w - o.x, a = o.y;
                    break;

                  case "br":
                    s = o.x, a = o.y;
                    break;

                  default:
                    s = o.x, a = this.map.size.h - o.y;
                }
            }
            var l = this.map.size.h - this.map.paddingForPopups.top - this.map.paddingForPopups.bottom - r - a, h = this.map.size.w - this.map.paddingForPopups.left - this.map.paddingForPopups.right - n - s;
            t.w = Math.min(t.w, h), t.h = Math.min(t.h, l);
        }
        return t;
    },
    "getContentDivPadding": function() {
        var e = this._contentDivPadding;
        return e || (null == this.div.parentNode && (this.div.style.display = "none", document.body.appendChild(this.div)), 
        e = new OpenLayers.Bounds(OpenLayers.Element.getStyle(this.contentDiv, "padding-left"), OpenLayers.Element.getStyle(this.contentDiv, "padding-bottom"), OpenLayers.Element.getStyle(this.contentDiv, "padding-right"), OpenLayers.Element.getStyle(this.contentDiv, "padding-top")), 
        this._contentDivPadding = e, this.div.parentNode == document.body && (document.body.removeChild(this.div), 
        this.div.style.display = "")), e;
    },
    "addCloseBox": function(e) {
        this.closeDiv = OpenLayers.Util.createDiv(this.id + "_close", null, {
            "w": 17,
            "h": 17
        }), this.closeDiv.className = "olPopupCloseBox";
        var t = this.getContentDivPadding();
        this.closeDiv.style.right = t.right + "px", this.closeDiv.style.top = t.top + "px", 
        this.groupDiv.appendChild(this.closeDiv);
        var i = e || function(e) {
            this.hide(), OpenLayers.Event.stop(e);
        };
        OpenLayers.Event.observe(this.closeDiv, "touchend", OpenLayers.Function.bindAsEventListener(i, this)), 
        OpenLayers.Event.observe(this.closeDiv, "click", OpenLayers.Function.bindAsEventListener(i, this));
    },
    "panIntoView": function() {
        var e = this.map.getSize(), t = this.map.getViewPortPxFromLayerPx(new OpenLayers.Pixel(parseInt(this.div.style.left), parseInt(this.div.style.top))), i = t.clone();
        t.x < this.map.paddingForPopups.left ? i.x = this.map.paddingForPopups.left : t.x + this.size.w > e.w - this.map.paddingForPopups.right && (i.x = e.w - this.map.paddingForPopups.right - this.size.w), 
        t.y < this.map.paddingForPopups.top ? i.y = this.map.paddingForPopups.top : t.y + this.size.h > e.h - this.map.paddingForPopups.bottom && (i.y = e.h - this.map.paddingForPopups.bottom - this.size.h);
        var n = t.x - i.x, r = t.y - i.y;
        this.map.pan(n, r);
    },
    "registerEvents": function() {
        this.events = new OpenLayers.Events(this, this.div, null, !0), this.events.on({
            "mousedown": this.onmousedown,
            "mousemove": this.onmousemove,
            "mouseup": this.onmouseup,
            "click": this.onclick,
            "mouseout": this.onmouseout,
            "dblclick": this.ondblclick,
            "touchstart": function(e) {
                OpenLayers.Event.stop(e, !0);
            },
            "scope": this
        });
    },
    "onmousedown": function(e) {
        this.mousedown = !0, OpenLayers.Event.stop(e, !0);
    },
    "onmousemove": function(e) {
        this.mousedown && OpenLayers.Event.stop(e, !0);
    },
    "onmouseup": function(e) {
        this.mousedown && (this.mousedown = !1, OpenLayers.Event.stop(e, !0));
    },
    "onclick": function(e) {
        OpenLayers.Event.stop(e, !0);
    },
    "onmouseout": function(e) {
        this.mousedown = !1;
    },
    "ondblclick": function(e) {
        OpenLayers.Event.stop(e, !0);
    },
    "CLASS_NAME": "OpenLayers.Popup"
}), OpenLayers.Popup.WIDTH = 200, OpenLayers.Popup.HEIGHT = 200, OpenLayers.Popup.COLOR = "white", 
OpenLayers.Popup.OPACITY = 1, OpenLayers.Popup.BORDER = "0px", OpenLayers.Protocol = OpenLayers.Class({
    "format": null,
    "options": null,
    "autoDestroy": !0,
    "defaultFilter": null,
    "initialize": function(e) {
        e = e || {}, OpenLayers.Util.extend(this, e), this.options = e;
    },
    "mergeWithDefaultFilter": function(e) {
        return e && this.defaultFilter ? new OpenLayers.Filter.Logical({
            "type": OpenLayers.Filter.Logical.AND,
            "filters": [ this.defaultFilter, e ]
        }) : e || this.defaultFilter || void 0;
    },
    "destroy": function() {
        this.options = null, this.format = null;
    },
    "read": function(e) {
        (e = e || {}).filter = this.mergeWithDefaultFilter(e.filter);
    },
    "create": function() {},
    "update": function() {},
    "delete": function() {},
    "commit": function() {},
    "abort": function(e) {},
    "createCallback": function(e, t, i) {
        return OpenLayers.Function.bind(function() {
            e.apply(this, [ t, i ]);
        }, this);
    },
    "CLASS_NAME": "OpenLayers.Protocol"
}), OpenLayers.Protocol.Response = OpenLayers.Class({
    "code": null,
    "requestType": null,
    "last": !0,
    "features": null,
    "data": null,
    "reqFeatures": null,
    "priv": null,
    "error": null,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e);
    },
    "success": function() {
        return this.code > 0;
    },
    "CLASS_NAME": "OpenLayers.Protocol.Response"
}), OpenLayers.Protocol.Response.SUCCESS = 1, OpenLayers.Protocol.Response.FAILURE = 0, 
OpenLayers.Renderer = OpenLayers.Class({
    "container": null,
    "root": null,
    "extent": null,
    "locked": !1,
    "size": null,
    "resolution": null,
    "map": null,
    "featureDx": 0,
    "initialize": function(e, t) {
        this.container = OpenLayers.Util.getElement(e), OpenLayers.Util.extend(this, t);
    },
    "destroy": function() {
        this.container = null, this.extent = null, this.size = null, this.resolution = null, 
        this.map = null;
    },
    "supported": function() {
        return !1;
    },
    "setExtent": function(e, t) {
        if (this.extent = e.clone(), this.map.baseLayer && this.map.baseLayer.wrapDateLine) {
            var i = e.getWidth() / this.map.getExtent().getWidth(), e = e.scale(1 / i);
            this.extent = e.wrapDateLine(this.map.getMaxExtent()).scale(i);
        }
        return t && (this.resolution = null), !0;
    },
    "setSize": function(e) {
        this.size = e.clone(), this.resolution = null;
    },
    "getResolution": function() {
        return this.resolution = this.resolution || this.map.getResolution(), this.resolution;
    },
    "drawFeature": function(e, t) {
        if (null == t && (t = e.style), e.geometry) {
            var i = e.geometry.getBounds();
            if (i) {
                var n;
                this.map.baseLayer && this.map.baseLayer.wrapDateLine && (n = this.map.getMaxExtent()), 
                i.intersectsBounds(this.extent, {
                    "worldBounds": n
                }) ? this.calculateFeatureDx(i, n) : t = {
                    "display": "none"
                };
                var r = this.drawGeometry(e.geometry, t, e.id);
                if ("none" != t.display && t.label && !1 !== r) {
                    var s = e.geometry.getCentroid();
                    if (t.labelXOffset || t.labelYOffset) {
                        var a = isNaN(t.labelXOffset) ? 0 : t.labelXOffset, o = isNaN(t.labelYOffset) ? 0 : t.labelYOffset, l = this.getResolution();
                        s.move(a * l, o * l);
                    }
                    this.drawText(e.id, t, s);
                } else this.removeText(e.id);
                return r;
            }
        }
    },
    "calculateFeatureDx": function(e, t) {
        if (this.featureDx = 0, t) {
            var i = t.getWidth(), n = (this.extent.left + this.extent.right) / 2, r = (e.left + e.right) / 2, s = Math.round((r - n) / i);
            this.featureDx = s * i;
        }
    },
    "drawGeometry": function(e, t, i) {},
    "drawText": function(e, t, i) {},
    "removeText": function(e) {},
    "clear": function() {},
    "getFeatureIdFromEvent": function(e) {},
    "eraseFeatures": function(e) {
        OpenLayers.Util.isArray(e) || (e = [ e ]);
        for (var t = 0, i = e.length; t < i; ++t) {
            var n = e[t];
            this.eraseGeometry(n.geometry, n.id), this.removeText(n.id);
        }
    },
    "eraseGeometry": function(e, t) {},
    "moveRoot": function(e) {},
    "getRenderLayerId": function() {
        return this.container.id;
    },
    "applyDefaultSymbolizer": function(e) {
        var t = OpenLayers.Util.extend({}, OpenLayers.Renderer.defaultSymbolizer);
        return !1 === e.stroke && (delete t.strokeWidth, delete t.strokeColor), !1 === e.fill && delete t.fillColor, 
        OpenLayers.Util.extend(t, e), t;
    },
    "CLASS_NAME": "OpenLayers.Renderer"
}), OpenLayers.Renderer.defaultSymbolizer = {
    "fillColor": "#000000",
    "strokeColor": "#000000",
    "strokeWidth": 2,
    "fillOpacity": 1,
    "strokeOpacity": 1,
    "pointRadius": 0,
    "labelAlign": "cm"
}, OpenLayers.Renderer.symbol = {
    "star": [ 350, 75, 379, 161, 469, 161, 397, 215, 423, 301, 350, 250, 277, 301, 303, 215, 231, 161, 321, 161, 350, 75 ],
    "cross": [ 4, 0, 6, 0, 6, 4, 10, 4, 10, 6, 6, 6, 6, 10, 4, 10, 4, 6, 0, 6, 0, 4, 4, 4, 4, 0 ],
    "x": [ 0, 0, 25, 0, 50, 35, 75, 0, 100, 0, 65, 50, 100, 100, 75, 100, 50, 65, 25, 100, 0, 100, 35, 50, 0, 0 ],
    "square": [ 0, 0, 0, 1, 1, 1, 1, 0, 0, 0 ],
    "triangle": [ 0, 10, 10, 10, 5, 0, 0, 10 ]
}, function() {
    function e() {
        this._object = o && !u ? new o() : new window.ActiveXObject("Microsoft.XMLHTTP"), 
        this._listeners = [];
    }
    function t() {
        return new e();
    }
    function i(e) {
        if (e._object.send(e._data), l && !e._async) for (e.readyState = t.OPENED, s(e); e.readyState < t.DONE; ) if (e.readyState++, 
        n(e), e._aborted) return;
    }
    function n(e) {
        t.onreadystatechange && t.onreadystatechange.apply(e), e.dispatchEvent({
            "type": "readystatechange",
            "bubbles": !1,
            "cancelable": !1,
            "timeStamp": new Date() + 0
        });
    }
    function r(e) {
        var t = e.responseXML, i = e.responseText;
        return h && i && t && !t.documentElement && e.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/) && ((t = new window.ActiveXObject("Microsoft.XMLDOM")).async = !1, 
        t.validateOnParse = !1, t.loadXML(i)), t && (h && 0 != t.parseError || !t.documentElement || t.documentElement && "parsererror" == t.documentElement.tagName) ? null : t;
    }
    function s(e) {
        try {
            e.responseText = e._object.responseText;
        } catch (e) {}
        try {
            e.responseXML = r(e._object);
        } catch (e) {}
        try {
            e.status = e._object.status;
        } catch (e) {}
        try {
            e.statusText = e._object.statusText;
        } catch (e) {}
    }
    function a(e) {
        e._object.onreadystatechange = new window.Function();
    }
    var o = window.XMLHttpRequest, l = !!window.controllers, h = window.document.all && !window.opera, u = h && window.navigator.userAgent.match(/MSIE 7.0/);
    t.prototype = e.prototype, l && o.wrapped && (t.wrapped = o.wrapped), t.UNSENT = 0, 
    t.OPENED = 1, t.HEADERS_RECEIVED = 2, t.LOADING = 3, t.DONE = 4, t.prototype.readyState = t.UNSENT, 
    t.prototype.responseText = "", t.prototype.responseXML = null, t.prototype.status = 0, 
    t.prototype.statusText = "", t.prototype.priority = "NORMAL", t.prototype.onreadystatechange = null, 
    t.onreadystatechange = null, t.onopen = null, t.onsend = null, t.onabort = null, 
    t.prototype.open = function(e, i, r, o, u) {
        delete this._headers, arguments.length < 3 && (r = !0), this._async = r;
        var p, c = this, d = this.readyState;
        h && r && (p = function() {
            d != t.DONE && (a(c), c.abort());
        }, window.attachEvent("onunload", p)), t.onopen && t.onopen.apply(this, arguments), 
        arguments.length > 4 ? this._object.open(e, i, r, o, u) : arguments.length > 3 ? this._object.open(e, i, r, o) : this._object.open(e, i, r), 
        this.readyState = t.OPENED, n(this), this._object.onreadystatechange = function() {
            l && !r || (c.readyState = c._object.readyState, s(c), c._aborted ? c.readyState = t.UNSENT : (c.readyState == t.DONE && (delete c._data, 
            a(c), h && r && window.detachEvent("onunload", p)), d != c.readyState && n(c), d = c.readyState));
        };
    }, t.prototype.send = function(e) {
        t.onsend && t.onsend.apply(this, arguments), arguments.length || (e = null), e && e.nodeType && (e = window.XMLSerializer ? new window.XMLSerializer().serializeToString(e) : e.xml, 
        this._headers["Content-Type"] || this._object.setRequestHeader("Content-Type", "application/xml")), 
        this._data = e, i(this);
    }, t.prototype.abort = function() {
        t.onabort && t.onabort.apply(this, arguments), this.readyState > t.UNSENT && (this._aborted = !0), 
        this._object.abort(), a(this), this.readyState = t.UNSENT, delete this._data;
    }, t.prototype.getAllResponseHeaders = function() {
        return this._object.getAllResponseHeaders();
    }, t.prototype.getResponseHeader = function(e) {
        return this._object.getResponseHeader(e);
    }, t.prototype.setRequestHeader = function(e, t) {
        return this._headers || (this._headers = {}), this._headers[e] = t, this._object.setRequestHeader(e, t);
    }, t.prototype.addEventListener = function(e, t, i) {
        for (var n, r = 0; n = this._listeners[r]; r++) if (n[0] == e && n[1] == t && n[2] == i) return;
        this._listeners.push([ e, t, i ]);
    }, t.prototype.removeEventListener = function(e, t, i) {
        for (var n, r = 0; (n = this._listeners[r]) && (n[0] != e || n[1] != t || n[2] != i); r++) ;
        n && this._listeners.splice(r, 1);
    }, t.prototype.dispatchEvent = function(e) {
        var t = {
            "type": e.type,
            "target": this,
            "currentTarget": this,
            "eventPhase": 2,
            "bubbles": e.bubbles,
            "cancelable": e.cancelable,
            "timeStamp": e.timeStamp,
            "stopPropagation": function() {},
            "preventDefault": function() {},
            "initEvent": function() {}
        };
        "readystatechange" == t.type && this.onreadystatechange && (this.onreadystatechange.handleEvent || this.onreadystatechange).apply(this, [ t ]);
        for (var i, n = 0; i = this._listeners[n]; n++) i[0] != t.type || i[2] || (i[1].handleEvent || i[1]).apply(this, [ t ]);
    }, t.prototype.toString = function() {
        return "[object XMLHttpRequest]";
    }, t.toString = function() {
        return "[XMLHttpRequest]";
    }, window.Function.prototype.apply || (window.Function.prototype.apply = function(e, t) {
        t || (t = []), e.__func = this, e.__func(t[0], t[1], t[2], t[3], t[4]), delete e.__func;
    }), OpenLayers.Request || (OpenLayers.Request = {}), OpenLayers.Request.XMLHttpRequest = t;
}(), OpenLayers.ProxyHost = "", OpenLayers.Request || (OpenLayers.Request = {}), 
OpenLayers.Util.extend(OpenLayers.Request, {
    "DEFAULT_CONFIG": {
        "method": "GET",
        "url": window.location.href,
        "async": !0,
        "user": void 0,
        "password": void 0,
        "params": null,
        "proxy": OpenLayers.ProxyHost,
        "headers": {},
        "data": null,
        "callback": function() {},
        "success": null,
        "failure": null,
        "scope": null
    },
    "URL_SPLIT_REGEX": /([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/,
    "events": new OpenLayers.Events(this),
    "makeSameOrigin": function(e, t) {
        var i = 0 !== e.indexOf("http"), n = !i && e.match(this.URL_SPLIT_REGEX);
        if (n) {
            var r = window.location;
            i = n[1] == r.protocol && n[3] == r.hostname;
            var s = n[4], a = r.port;
            (80 != s && "" != s || "80" != a && "" != a) && (i = i && s == a);
        }
        return i || t && (e = "function" == typeof t ? t(e) : t + encodeURIComponent(e)), 
        e;
    },
    "issue": function(e) {
        var t = OpenLayers.Util.extend(this.DEFAULT_CONFIG, {
            "proxy": OpenLayers.ProxyHost
        });
        (e = e || {}).headers = e.headers || {}, (e = OpenLayers.Util.applyDefaults(e, t)).headers = OpenLayers.Util.applyDefaults(e.headers, t.headers);
        var i, n = !1;
        for (i in e.headers) e.headers.hasOwnProperty(i) && "x-requested-with" === i.toLowerCase() && (n = !0);
        !1 === n && (e.headers["X-Requested-With"] = "XMLHttpRequest");
        var r = new OpenLayers.Request.XMLHttpRequest(), s = OpenLayers.Util.urlAppend(e.url, OpenLayers.Util.getParameterString(e.params || {}));
        s = OpenLayers.Request.makeSameOrigin(s, e.proxy), r.open(e.method, s, e.async, e.user, e.password);
        for (var a in e.headers) r.setRequestHeader(a, e.headers[a]);
        var o = this.events, l = this;
        return r.onreadystatechange = function() {
            r.readyState == OpenLayers.Request.XMLHttpRequest.DONE && !1 !== o.triggerEvent("complete", {
                "request": r,
                "config": e,
                "requestUrl": s
            }) && l.runCallbacks({
                "request": r,
                "config": e,
                "requestUrl": s
            });
        }, !1 === e.async ? r.send(e.data) : window.setTimeout(function() {
            0 !== r.readyState && r.send(e.data);
        }, 0), r;
    },
    "runCallbacks": function(e) {
        var t, i = e.request, n = e.config, r = n.scope ? OpenLayers.Function.bind(n.callback, n.scope) : n.callback;
        n.success && (t = n.scope ? OpenLayers.Function.bind(n.success, n.scope) : n.success);
        var s;
        n.failure && (s = n.scope ? OpenLayers.Function.bind(n.failure, n.scope) : n.failure), 
        "file:" == OpenLayers.Util.createUrlObject(n.url).protocol && i.responseText && (i.status = 200), 
        r(i), (!i.status || i.status >= 200 && i.status < 300) && (this.events.triggerEvent("success", e), 
        t && t(i)), i.status && (i.status < 200 || i.status >= 300) && (this.events.triggerEvent("failure", e), 
        s && s(i));
    },
    "GET": function(e) {
        return e = OpenLayers.Util.extend(e, {
            "method": "GET"
        }), OpenLayers.Request.issue(e);
    },
    "POST": function(e) {
        return e = OpenLayers.Util.extend(e, {
            "method": "POST"
        }), e.headers = e.headers ? e.headers : {}, "CONTENT-TYPE" in OpenLayers.Util.upperCaseObject(e.headers) || (e.headers["Content-Type"] = "application/xml"), 
        OpenLayers.Request.issue(e);
    },
    "PUT": function(e) {
        return e = OpenLayers.Util.extend(e, {
            "method": "PUT"
        }), e.headers = e.headers ? e.headers : {}, "CONTENT-TYPE" in OpenLayers.Util.upperCaseObject(e.headers) || (e.headers["Content-Type"] = "application/xml"), 
        OpenLayers.Request.issue(e);
    },
    "DELETE": function(e) {
        return e = OpenLayers.Util.extend(e, {
            "method": "DELETE"
        }), OpenLayers.Request.issue(e);
    },
    "HEAD": function(e) {
        return e = OpenLayers.Util.extend(e, {
            "method": "HEAD"
        }), OpenLayers.Request.issue(e);
    },
    "OPTIONS": function(e) {
        return e = OpenLayers.Util.extend(e, {
            "method": "OPTIONS"
        }), OpenLayers.Request.issue(e);
    }
}), OpenLayers.Rule = OpenLayers.Class({
    "id": null,
    "name": null,
    "title": null,
    "description": null,
    "context": null,
    "filter": null,
    "elseFilter": !1,
    "symbolizer": null,
    "symbolizers": null,
    "minScaleDenominator": null,
    "maxScaleDenominator": null,
    "initialize": function(e) {
        this.symbolizer = {}, OpenLayers.Util.extend(this, e), this.symbolizers && delete this.symbolizer, 
        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_");
    },
    "destroy": function() {
        for (var e in this.symbolizer) this.symbolizer[e] = null;
        this.symbolizer = null, delete this.symbolizers;
    },
    "evaluate": function(e) {
        var t = this.getContext(e), i = !0;
        if (this.minScaleDenominator || this.maxScaleDenominator) var n = e.layer.map.getScale();
        return this.minScaleDenominator && (i = n >= OpenLayers.Style.createLiteral(this.minScaleDenominator, t)), 
        i && this.maxScaleDenominator && (i = n < OpenLayers.Style.createLiteral(this.maxScaleDenominator, t)), 
        i && this.filter && (i = "OpenLayers.Filter.FeatureId" == this.filter.CLASS_NAME ? this.filter.evaluate(e) : this.filter.evaluate(t)), 
        i;
    },
    "getContext": function(e) {
        var t = this.context;
        return t || (t = e.attributes || e.data), "function" == typeof this.context && (t = this.context(e)), 
        t;
    },
    "clone": function() {
        var e = OpenLayers.Util.extend({}, this);
        if (this.symbolizers) {
            var t = this.symbolizers.length;
            e.symbolizers = new Array(t);
            for (var i = 0; i < t; ++i) e.symbolizers[i] = this.symbolizers[i].clone();
        } else {
            e.symbolizer = {};
            var n, r;
            for (var s in this.symbolizer) "object" === (r = typeof (n = this.symbolizer[s])) ? e.symbolizer[s] = OpenLayers.Util.extend({}, n) : "string" === r && (e.symbolizer[s] = n);
        }
        return e.filter = this.filter && this.filter.clone(), e.context = this.context && OpenLayers.Util.extend({}, this.context), 
        new OpenLayers.Rule(e);
    },
    "CLASS_NAME": "OpenLayers.Rule"
}), OpenLayers.Spherical = OpenLayers.Spherical || {}, OpenLayers.Spherical.DEFAULT_RADIUS = 6378137, 
OpenLayers.Spherical.computeDistanceBetween = function(e, t, i) {
    var n = i || OpenLayers.Spherical.DEFAULT_RADIUS, r = Math.sin(Math.PI * (t.lon - e.lon) / 360), s = Math.sin(Math.PI * (t.lat - e.lat) / 360), a = s * s + r * r * Math.cos(Math.PI * e.lat / 180) * Math.cos(Math.PI * t.lat / 180);
    return 2 * n * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
}, OpenLayers.Spherical.computeHeading = function(e, t) {
    var i = Math.sin(Math.PI * (e.lon - t.lon) / 180) * Math.cos(Math.PI * t.lat / 180), n = Math.cos(Math.PI * e.lat / 180) * Math.sin(Math.PI * t.lat / 180) - Math.sin(Math.PI * e.lat / 180) * Math.cos(Math.PI * t.lat / 180) * Math.cos(Math.PI * (e.lon - t.lon) / 180);
    return 180 * Math.atan2(i, n) / Math.PI;
}, OpenLayers.Strategy = OpenLayers.Class({
    "layer": null,
    "options": null,
    "active": null,
    "autoActivate": !0,
    "autoDestroy": !0,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e), this.options = e, this.active = !1;
    },
    "destroy": function() {
        this.deactivate(), this.layer = null, this.options = null;
    },
    "setLayer": function(e) {
        this.layer = e;
    },
    "activate": function() {
        return !this.active && (this.active = !0, !0);
    },
    "deactivate": function() {
        return !!this.active && (this.active = !1, !0);
    },
    "CLASS_NAME": "OpenLayers.Strategy"
}), OpenLayers.Symbolizer = OpenLayers.Class({
    "zIndex": 0,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e);
    },
    "clone": function() {
        return new (OpenLayers.Util.getConstructor(this.CLASS_NAME))(OpenLayers.Util.extend({}, this));
    },
    "CLASS_NAME": "OpenLayers.Symbolizer"
}), OpenLayers.Symbolizer.Point = OpenLayers.Class(OpenLayers.Symbolizer, {
    "initialize": function(e) {
        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Symbolizer.Point"
}), OpenLayers.Symbolizer.Line = OpenLayers.Class(OpenLayers.Symbolizer, {
    "initialize": function(e) {
        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Symbolizer.Line"
}), OpenLayers.Symbolizer.Polygon = OpenLayers.Class(OpenLayers.Symbolizer, {
    "initialize": function(e) {
        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Symbolizer.Polygon"
}), OpenLayers.Symbolizer.Text = OpenLayers.Class(OpenLayers.Symbolizer, {
    "initialize": function(e) {
        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Symbolizer.Text"
}), OpenLayers.Symbolizer.Raster = OpenLayers.Class(OpenLayers.Symbolizer, {
    "initialize": function(e) {
        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Symbolizer.Raster"
}), OpenLayers.Style2 = OpenLayers.Class({
    "id": null,
    "name": null,
    "title": null,
    "description": null,
    "layerName": null,
    "isDefault": !1,
    "rules": null,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e), this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_");
    },
    "destroy": function() {
        for (var e = 0, t = this.rules.length; e < t; e++) this.rules[e].destroy();
        delete this.rules;
    },
    "clone": function() {
        var e = OpenLayers.Util.extend({}, this);
        if (this.rules) {
            e.rules = [];
            for (var t = 0, i = this.rules.length; t < i; ++t) e.rules.push(this.rules[t].clone());
        }
        return new OpenLayers.Style2(e);
    },
    "CLASS_NAME": "OpenLayers.Style2"
}), OpenLayers.StyleMap = OpenLayers.Class({
    "styles": null,
    "extendDefault": !0,
    "initialize": function(e, t) {
        if (this.styles = {
            "default": new OpenLayers.Style(OpenLayers.Feature.Vector.style.default),
            "select": new OpenLayers.Style(OpenLayers.Feature.Vector.style.select),
            "temporary": new OpenLayers.Style(OpenLayers.Feature.Vector.style.temporary),
            "delete": new OpenLayers.Style(OpenLayers.Feature.Vector.style.delete)
        }, e instanceof OpenLayers.Style) this.styles.default = e, this.styles.select = e, 
        this.styles.temporary = e, this.styles.delete = e; else if ("object" == typeof e) for (var i in e) if (e[i] instanceof OpenLayers.Style) this.styles[i] = e[i]; else {
            if ("object" != typeof e[i]) {
                this.styles.default = new OpenLayers.Style(e), this.styles.select = new OpenLayers.Style(e), 
                this.styles.temporary = new OpenLayers.Style(e), this.styles.delete = new OpenLayers.Style(e);
                break;
            }
            this.styles[i] = new OpenLayers.Style(e[i]);
        }
        OpenLayers.Util.extend(this, t);
    },
    "destroy": function() {
        for (var e in this.styles) this.styles[e].destroy();
        this.styles = null;
    },
    "createSymbolizer": function(e, t) {
        e || (e = new OpenLayers.Feature.Vector()), this.styles[t] || (t = "default"), e.renderIntent = t;
        var i = {};
        return this.extendDefault && "default" != t && (i = this.styles.default.createSymbolizer(e)), 
        OpenLayers.Util.extend(i, this.styles[t].createSymbolizer(e));
    },
    "addUniqueValueRules": function(e, t, i, n) {
        var r = [];
        for (var s in i) r.push(new OpenLayers.Rule({
            "symbolizer": i[s],
            "context": n,
            "filter": new OpenLayers.Filter.Comparison({
                "type": OpenLayers.Filter.Comparison.EQUAL_TO,
                "property": t,
                "value": s
            })
        }));
        this.styles[e].addRules(r);
    },
    "CLASS_NAME": "OpenLayers.StyleMap"
}), OpenLayers.Tile = OpenLayers.Class({
    "events": null,
    "eventListeners": null,
    "id": null,
    "layer": null,
    "url": null,
    "bounds": null,
    "size": null,
    "position": null,
    "isLoading": !1,
    "initialize": function(e, t, i, n, r, s) {
        this.layer = e, this.position = t.clone(), this.setBounds(i), this.url = n, r && (this.size = r.clone()), 
        this.id = OpenLayers.Util.createUniqueID("Tile_"), OpenLayers.Util.extend(this, s), 
        this.events = new OpenLayers.Events(this), this.eventListeners instanceof Object && this.events.on(this.eventListeners);
    },
    "unload": function() {
        this.isLoading && (this.isLoading = !1, this.events.triggerEvent("unload"));
    },
    "destroy": function() {
        this.layer = null, this.bounds = null, this.size = null, this.position = null, this.eventListeners && this.events.un(this.eventListeners), 
        this.events.destroy(), this.eventListeners = null, this.events = null;
    },
    "draw": function(e) {
        e || this.clear();
        var t = this.shouldDraw();
        return t && !e && !1 === this.events.triggerEvent("beforedraw") && (t = null), t;
    },
    "shouldDraw": function() {
        var e = !1, t = this.layer.maxExtent;
        if (t) {
            var i = this.layer.map, n = i.baseLayer.wrapDateLine && i.getMaxExtent();
            this.bounds.intersectsBounds(t, {
                "inclusive": !1,
                "worldBounds": n
            }) && (e = !0);
        }
        return e || this.layer.displayOutsideMaxExtent;
    },
    "setBounds": function(e) {
        if (e = e.clone(), this.layer.map.baseLayer.wrapDateLine) {
            var t = this.layer.map.getMaxExtent(), i = this.layer.map.getResolution();
            e = e.wrapDateLine(t, {
                "leftTolerance": i,
                "rightTolerance": i
            });
        }
        this.bounds = e;
    },
    "moveTo": function(e, t, i) {
        null == i && (i = !0), this.setBounds(e), this.position = t.clone(), i && this.draw();
    },
    "clear": function(e) {},
    "CLASS_NAME": "OpenLayers.Tile"
}), OpenLayers.Layer.HTTPRequest = OpenLayers.Class(OpenLayers.Layer, {
    "URL_HASH_FACTOR": (Math.sqrt(5) - 1) / 2,
    "url": null,
    "params": null,
    "reproject": !1,
    "initialize": function(e, t, i, n) {
        OpenLayers.Layer.prototype.initialize.apply(this, [ e, n ]), this.url = t, this.params || (this.params = OpenLayers.Util.extend({}, i));
    },
    "destroy": function() {
        this.url = null, this.params = null, OpenLayers.Layer.prototype.destroy.apply(this, arguments);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.HTTPRequest(this.name, this.url, this.params, this.getOptions())), 
        e = OpenLayers.Layer.prototype.clone.apply(this, [ e ]);
    },
    "setUrl": function(e) {
        this.url = e;
    },
    "mergeNewParams": function(e) {
        this.params = OpenLayers.Util.extend(this.params, e);
        var t = this.redraw();
        return null != this.map && this.map.events.triggerEvent("changelayer", {
            "layer": this,
            "property": "params"
        }), t;
    },
    "redraw": function(e) {
        return e ? (this.events.triggerEvent("refresh"), this.mergeNewParams({
            "_olSalt": Math.random()
        })) : OpenLayers.Layer.prototype.redraw.apply(this, []);
    },
    "selectUrl": function(e, t) {
        for (var i = 1, n = 0, r = e.length; n < r; n++) i *= e.charCodeAt(n) * this.URL_HASH_FACTOR, 
        i -= Math.floor(i);
        return t[Math.floor(i * t.length)];
    },
    "getFullRequestString": function(e, t) {
        var i = t || this.url, n = OpenLayers.Util.extend({}, this.params);
        n = OpenLayers.Util.extend(n, e);
        var r = OpenLayers.Util.getParameterString(n);
        OpenLayers.Util.isArray(i) && (i = this.selectUrl(r, i));
        var s = OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(i));
        for (var a in n) a.toUpperCase() in s && delete n[a];
        return r = OpenLayers.Util.getParameterString(n), OpenLayers.Util.urlAppend(i, r);
    },
    "CLASS_NAME": "OpenLayers.Layer.HTTPRequest"
}), OpenLayers.Tile.Image = OpenLayers.Class(OpenLayers.Tile, {
    "url": null,
    "imgDiv": null,
    "frame": null,
    "imageReloadAttempts": null,
    "layerAlphaHack": null,
    "asyncRequestId": null,
    "maxGetUrlLength": null,
    "canvasContext": null,
    "crossOriginKeyword": null,
    "initialize": function(e, t, i, n, r, s) {
        OpenLayers.Tile.prototype.initialize.apply(this, arguments), this.url = n, this.layerAlphaHack = this.layer.alpha && OpenLayers.Util.alphaHack(), 
        (null != this.maxGetUrlLength || this.layer.gutter || this.layerAlphaHack) && (this.frame = document.createElement("div"), 
        this.frame.style.position = "absolute", this.frame.style.overflow = "hidden"), null != this.maxGetUrlLength && OpenLayers.Util.extend(this, OpenLayers.Tile.Image.IFrame);
    },
    "destroy": function() {
        this.imgDiv && (this.clear(), this.imgDiv = null, this.frame = null), this.asyncRequestId = null, 
        OpenLayers.Tile.prototype.destroy.apply(this, arguments);
    },
    "draw": function() {
        var e = OpenLayers.Tile.prototype.draw.apply(this, arguments);
        return e ? (this.layer != this.layer.map.baseLayer && this.layer.reproject && (this.bounds = this.getBoundsFromBaseLayer(this.position)), 
        this.isLoading ? this._loadEvent = "reload" : (this.isLoading = !0, this._loadEvent = "loadstart"), 
        this.renderTile(), this.positionTile()) : !1 === e && this.unload(), e;
    },
    "renderTile": function() {
        if (this.layer.async) {
            var e = this.asyncRequestId = (this.asyncRequestId || 0) + 1;
            this.layer.getURLasync(this.bounds, function(t) {
                e == this.asyncRequestId && (this.url = t, this.initImage());
            }, this);
        } else this.url = this.layer.getURL(this.bounds), this.initImage();
    },
    "positionTile": function() {
        var e = this.getTile().style, t = this.frame ? this.size : this.layer.getImageSize(this.bounds), i = 1;
        this.layer instanceof OpenLayers.Layer.Grid && (i = this.layer.getServerResolution() / this.layer.map.getResolution()), 
        e.left = this.position.x + "px", e.top = this.position.y + "px", e.width = Math.round(i * t.w) + "px", 
        e.height = Math.round(i * t.h) + "px";
    },
    "clear": function() {
        OpenLayers.Tile.prototype.clear.apply(this, arguments);
        var e = this.imgDiv;
        if (e) {
            var t = this.getTile();
            t.parentNode === this.layer.div && this.layer.div.removeChild(t), this.setImgSrc(), 
            !0 === this.layerAlphaHack && (e.style.filter = ""), OpenLayers.Element.removeClass(e, "olImageLoadError");
        }
        this.canvasContext = null;
    },
    "getImage": function() {
        if (!this.imgDiv) {
            this.imgDiv = OpenLayers.Tile.Image.IMAGE.cloneNode(!1);
            var e = this.imgDiv.style;
            if (this.frame) {
                var t = 0, i = 0;
                this.layer.gutter && (t = this.layer.gutter / this.layer.tileSize.w * 100, i = this.layer.gutter / this.layer.tileSize.h * 100), 
                e.left = -t + "%", e.top = -i + "%", e.width = 2 * t + 100 + "%", e.height = 2 * i + 100 + "%";
            }
            e.visibility = "hidden", e.opacity = 0, this.layer.opacity < 1 && (e.filter = "alpha(opacity=" + 100 * this.layer.opacity + ")"), 
            e.position = "absolute", this.layerAlphaHack && (e.paddingTop = e.height, e.height = "0", 
            e.width = "100%"), this.frame && this.frame.appendChild(this.imgDiv);
        }
        return this.imgDiv;
    },
    "setImage": function(e) {
        this.imgDiv = e;
    },
    "initImage": function() {
        if (this.url || this.imgDiv) {
            this.events.triggerEvent("beforeload"), this.layer.div.appendChild(this.getTile()), 
            this.events.triggerEvent(this._loadEvent);
            var e = this.getImage(), t = e.getAttribute("src") || "";
            this.url && OpenLayers.Util.isEquivalentUrl(t, this.url) ? this._loadTimeout = window.setTimeout(OpenLayers.Function.bind(this.onImageLoad, this), 0) : (this.stopLoading(), 
            this.crossOriginKeyword && e.removeAttribute("crossorigin"), OpenLayers.Event.observe(e, "load", OpenLayers.Function.bind(this.onImageLoad, this)), 
            OpenLayers.Event.observe(e, "error", OpenLayers.Function.bind(this.onImageError, this)), 
            this.imageReloadAttempts = 0, this.setImgSrc(this.url));
        } else this.isLoading = !1;
    },
    "setImgSrc": function(e) {
        var t = this.imgDiv;
        e ? (t.style.visibility = "hidden", t.style.opacity = 0, this.crossOriginKeyword && ("data:" !== e.substr(0, 5) ? t.setAttribute("crossorigin", this.crossOriginKeyword) : t.removeAttribute("crossorigin")), 
        t.src = e) : (this.stopLoading(), this.imgDiv = null, t.parentNode && t.parentNode.removeChild(t));
    },
    "getTile": function() {
        return this.frame ? this.frame : this.getImage();
    },
    "createBackBuffer": function() {
        if (this.imgDiv && !this.isLoading) {
            var e;
            return this.frame ? (e = this.frame.cloneNode(!1)).appendChild(this.imgDiv) : e = this.imgDiv, 
            this.imgDiv = null, e;
        }
    },
    "onImageLoad": function() {
        var e = this.imgDiv;
        this.stopLoading(), e.style.visibility = "inherit", e.style.opacity = this.layer.opacity, 
        this.isLoading = !1, this.canvasContext = null, this.events.triggerEvent("loadend"), 
        !0 === this.layerAlphaHack && (e.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + e.src + "', sizingMethod='scale')");
    },
    "onImageError": function() {
        var e = this.imgDiv;
        null != e.src && (++this.imageReloadAttempts <= OpenLayers.IMAGE_RELOAD_ATTEMPTS ? this.setImgSrc(this.layer.getURL(this.bounds)) : (OpenLayers.Element.addClass(e, "olImageLoadError"), 
        this.events.triggerEvent("loaderror"), this.onImageLoad()));
    },
    "stopLoading": function() {
        OpenLayers.Event.stopObservingElement(this.imgDiv), window.clearTimeout(this._loadTimeout), 
        delete this._loadTimeout;
    },
    "getCanvasContext": function() {
        if (OpenLayers.CANVAS_SUPPORTED && this.imgDiv && !this.isLoading) {
            if (!this.canvasContext) {
                var e = document.createElement("canvas");
                e.width = this.size.w, e.height = this.size.h, this.canvasContext = e.getContext("2d"), 
                this.canvasContext.drawImage(this.imgDiv, 0, 0);
            }
            return this.canvasContext;
        }
    },
    "CLASS_NAME": "OpenLayers.Tile.Image"
}), OpenLayers.Tile.Image.IMAGE = function() {
    var e = new Image();
    return e.className = "olTileImage", e.galleryImg = "no", e;
}(), OpenLayers.Layer.Grid = OpenLayers.Class(OpenLayers.Layer.HTTPRequest, {
    "tileSize": null,
    "tileOriginCorner": "bl",
    "tileOrigin": null,
    "tileOptions": null,
    "tileClass": OpenLayers.Tile.Image,
    "grid": null,
    "singleTile": !1,
    "ratio": 1.5,
    "buffer": 0,
    "transitionEffect": "resize",
    "numLoadingTiles": 0,
    "serverResolutions": null,
    "loading": !1,
    "backBuffer": null,
    "gridResolution": null,
    "backBufferResolution": null,
    "backBufferLonLat": null,
    "backBufferTimerId": null,
    "removeBackBufferDelay": null,
    "className": null,
    "gridLayout": null,
    "rowSign": null,
    "transitionendEvents": [ "transitionend", "webkitTransitionEnd", "otransitionend", "oTransitionEnd" ],
    "initialize": function(e, t, i, n) {
        OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this, arguments), this.grid = [], 
        this._removeBackBuffer = OpenLayers.Function.bind(this.removeBackBuffer, this), 
        this.initProperties(), this.rowSign = "t" === this.tileOriginCorner.substr(0, 1) ? 1 : -1;
    },
    "initProperties": function() {
        void 0 === this.options.removeBackBufferDelay && (this.removeBackBufferDelay = this.singleTile ? 0 : 2500), 
        void 0 === this.options.className && (this.className = this.singleTile ? "olLayerGridSingleTile" : "olLayerGrid");
    },
    "setMap": function(e) {
        OpenLayers.Layer.HTTPRequest.prototype.setMap.call(this, e), OpenLayers.Element.addClass(this.div, this.className);
    },
    "removeMap": function(e) {
        this.removeBackBuffer();
    },
    "destroy": function() {
        this.removeBackBuffer(), this.clearGrid(), this.grid = null, this.tileSize = null, 
        OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this, arguments);
    },
    "clearGrid": function() {
        if (this.grid) {
            for (var e = 0, t = this.grid.length; e < t; e++) for (var i = this.grid[e], n = 0, r = i.length; n < r; n++) {
                var s = i[n];
                this.destroyTile(s);
            }
            this.grid = [], this.gridResolution = null, this.gridLayout = null;
        }
    },
    "addOptions": function(e, t) {
        var i = void 0 !== e.singleTile && e.singleTile !== this.singleTile;
        OpenLayers.Layer.HTTPRequest.prototype.addOptions.apply(this, arguments), this.map && i && (this.initProperties(), 
        this.clearGrid(), this.tileSize = this.options.tileSize, this.setTileSize(), this.visibility && this.moveTo(null, !0));
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.Grid(this.name, this.url, this.params, this.getOptions())), 
        e = OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this, [ e ]), null != this.tileSize && (e.tileSize = this.tileSize.clone()), 
        e.grid = [], e.gridResolution = null, e.backBuffer = null, e.backBufferTimerId = null, 
        e.loading = !1, e.numLoadingTiles = 0, e;
    },
    "moveTo": function(e, t, i) {
        if (OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this, arguments), null != (e = e || this.map.getExtent())) {
            var n = !this.grid.length || t, r = this.getTilesBounds(), s = this.map.getResolution();
            this.getServerResolution(s);
            this.singleTile ? (n || !i && !r.containsBounds(e)) && (t && "resize" !== this.transitionEffect && this.removeBackBuffer(), 
            t && "resize" !== this.transitionEffect || this.applyBackBuffer(s), this.initSingleTile(e)) : (n = n || !r.intersectsBounds(e, {
                "worldBounds": this.map.baseLayer.wrapDateLine && this.map.getMaxExtent()
            })) ? (!t || "resize" !== this.transitionEffect && this.gridResolution !== s || this.applyBackBuffer(s), 
            this.initGriddedTiles(e)) : this.moveGriddedTiles();
        }
    },
    "getTileData": function(e) {
        var t = null, i = e.lon, n = e.lat, r = this.grid.length;
        if (this.map && r) {
            var s = this.map.getResolution(), a = this.tileSize.w, o = this.tileSize.h, l = this.grid[0][0].bounds, h = l.left, u = l.top;
            if (i < h && this.map.baseLayer.wrapDateLine) {
                var p = this.map.getMaxExtent().getWidth();
                i += p * Math.ceil((h - i) / p);
            }
            var c = (i - h) / (s * a), d = (u - n) / (s * o), f = Math.floor(c), y = Math.floor(d);
            if (y >= 0 && y < r) {
                var m = this.grid[y][f];
                m && (t = {
                    "tile": m,
                    "i": Math.floor((c - f) * a),
                    "j": Math.floor((d - y) * o)
                });
            }
        }
        return t;
    },
    "destroyTile": function(e) {
        this.removeTileMonitoringHooks(e), e.destroy();
    },
    "getServerResolution": function(e) {
        var t = Number.POSITIVE_INFINITY;
        if (e = e || this.map.getResolution(), this.serverResolutions && -1 === OpenLayers.Util.indexOf(this.serverResolutions, e)) {
            var i, n, r, s;
            for (i = this.serverResolutions.length - 1; i >= 0 && (r = this.serverResolutions[i], 
            !((n = Math.abs(r - e)) > t)); i--) t = n, s = r;
            e = s;
        }
        return e;
    },
    "getServerZoom": function() {
        var e = this.getServerResolution();
        return this.serverResolutions ? OpenLayers.Util.indexOf(this.serverResolutions, e) : this.map.getZoomForResolution(e) + (this.zoomOffset || 0);
    },
    "applyBackBuffer": function(e) {
        null !== this.backBufferTimerId && this.removeBackBuffer();
        var t = this.backBuffer;
        if (!t) {
            if (!(t = this.createBackBuffer())) return;
            e === this.gridResolution ? this.div.insertBefore(t, this.div.firstChild) : this.map.baseLayer.div.parentNode.insertBefore(t, this.map.baseLayer.div), 
            this.backBuffer = t;
            var i = this.grid[0][0].bounds;
            this.backBufferLonLat = {
                "lon": i.left,
                "lat": i.top
            }, this.backBufferResolution = this.gridResolution;
        }
        for (var n, r = this.backBufferResolution / e, s = t.childNodes, a = s.length - 1; a >= 0; --a) (n = s[a]).style.top = (r * n._i * t._th | 0) + "px", 
        n.style.left = (r * n._j * t._tw | 0) + "px", n.style.width = Math.round(r * n._w) + "px", 
        n.style.height = Math.round(r * n._h) + "px";
        var o = this.getViewPortPxFromLonLat(this.backBufferLonLat, e), l = this.map.layerContainerOriginPx.x, h = this.map.layerContainerOriginPx.y;
        t.style.left = Math.round(o.x - l) + "px", t.style.top = Math.round(o.y - h) + "px";
    },
    "createBackBuffer": function() {
        var e;
        if (this.grid.length > 0) {
            (e = document.createElement("div")).id = this.div.id + "_bb", e.className = "olBackBuffer", 
            e.style.position = "absolute";
            var t = this.map;
            e.style.zIndex = "resize" === this.transitionEffect ? this.getZIndex() - 1 : t.Z_INDEX_BASE.BaseLayer - (t.getNumLayers() - t.getLayerIndex(this));
            for (var i = 0, n = this.grid.length; i < n; i++) for (var r = 0, s = this.grid[i].length; r < s; r++) {
                var a = this.grid[i][r], o = this.grid[i][r].createBackBuffer();
                o && (o._i = i, o._j = r, o._w = this.singleTile ? this.getImageSize(a.bounds).w : a.size.w, 
                o._h = a.size.h, o.id = a.id + "_bb", e.appendChild(o));
            }
            e._tw = this.tileSize.w, e._th = this.tileSize.h;
        }
        return e;
    },
    "removeBackBuffer": function() {
        if (this._transitionElement) {
            for (var e = this.transitionendEvents.length - 1; e >= 0; --e) OpenLayers.Event.stopObserving(this._transitionElement, this.transitionendEvents[e], this._removeBackBuffer);
            delete this._transitionElement;
        }
        this.backBuffer && (this.backBuffer.parentNode && this.backBuffer.parentNode.removeChild(this.backBuffer), 
        this.backBuffer = null, this.backBufferResolution = null, null !== this.backBufferTimerId && (window.clearTimeout(this.backBufferTimerId), 
        this.backBufferTimerId = null));
    },
    "moveByPx": function(e, t) {
        this.singleTile || this.moveGriddedTiles();
    },
    "setTileSize": function(e) {
        this.singleTile && ((e = this.map.getSize()).h = parseInt(e.h * this.ratio, 10), 
        e.w = parseInt(e.w * this.ratio, 10)), OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this, [ e ]);
    },
    "getTilesBounds": function() {
        var e = null, t = this.grid.length;
        if (t) {
            var i = this.grid[t - 1][0].bounds, n = this.grid[0].length * i.getWidth(), r = this.grid.length * i.getHeight();
            e = new OpenLayers.Bounds(i.left, i.bottom, i.left + n, i.bottom + r);
        }
        return e;
    },
    "initSingleTile": function(e) {
        this.events.triggerEvent("retile");
        var t = e.getCenterLonLat(), i = e.getWidth() * this.ratio, n = e.getHeight() * this.ratio, r = new OpenLayers.Bounds(t.lon - i / 2, t.lat - n / 2, t.lon + i / 2, t.lat + n / 2);
        this.gridResolution = this.getServerResolution();
        var s = this.maxExtent;
        s && (!this.displayOutsideMaxExtent || this.map.baseLayer.wrapDateLine && this.maxExtent.equals(this.map.getMaxExtent())) && (r.left = Math.max(r.left, s.left), 
        r.right = Math.min(r.right, s.right));
        var a = this.map.getLayerPxFromLonLat({
            "lon": r.left,
            "lat": r.top
        });
        this.grid.length || (this.grid[0] = []);
        var o = this.grid[0][0];
        o ? o.moveTo(r, a) : (o = this.addTile(r, a), this.addTileMonitoringHooks(o), o.draw(), 
        this.grid[0][0] = o), this.removeExcessTiles(1, 1);
    },
    "calculateGridLayout": function(e, t, i) {
        var n = i * this.tileSize.w, r = i * this.tileSize.h, s = e.left - t.lon, a = Math.floor(s / n) - this.buffer, o = this.rowSign, l = o * (t.lat - e.top + r);
        return {
            "tilelon": n,
            "tilelat": r,
            "startcol": a,
            "startrow": Math[~o ? "floor" : "ceil"](l / r) - this.buffer * o
        };
    },
    "getImageSize": function(e) {
        var t = OpenLayers.Layer.HTTPRequest.prototype.getImageSize.apply(this, arguments);
        return this.singleTile && (t = new OpenLayers.Size(Math.round(e.getWidth() / this.gridResolution), t.h)), 
        t;
    },
    "getTileOrigin": function() {
        var e = this.tileOrigin;
        if (!e) {
            var t = this.getMaxExtent(), i = {
                "tl": [ "left", "top" ],
                "tr": [ "right", "top" ],
                "bl": [ "left", "bottom" ],
                "br": [ "right", "bottom" ]
            }[this.tileOriginCorner];
            e = new OpenLayers.LonLat(t[i[0]], t[i[1]]);
        }
        return e;
    },
    "getTileBoundsForGridIndex": function(e, t) {
        var i = this.getTileOrigin(), n = this.gridLayout, r = n.tilelon, s = n.tilelat, a = n.startcol, o = n.startrow, l = this.rowSign;
        return new OpenLayers.Bounds(i.lon + (a + t) * r, i.lat - (o + e * l) * s * l, i.lon + (a + t + 1) * r, i.lat - (o + (e - 1) * l) * s * l);
    },
    "initGriddedTiles": function(e) {
        this.events.triggerEvent("retile");
        var t = this.map.getSize(), i = this.getTileOrigin(), n = this.map.getResolution(), r = this.getServerResolution(), s = n / r, a = {
            "w": this.tileSize.w / s,
            "h": this.tileSize.h / s
        }, o = Math.ceil(t.h / a.h) + 2 * this.buffer + 1, l = Math.ceil(t.w / a.w) + 2 * this.buffer + 1, h = this.calculateGridLayout(e, i, r);
        this.gridLayout = h;
        var u = h.tilelon, p = h.tilelat, c = this.map.layerContainerOriginPx.x, d = this.map.layerContainerOriginPx.y, f = this.getTileBoundsForGridIndex(0, 0), y = this.map.getViewPortPxFromLonLat(new OpenLayers.LonLat(f.left, f.top));
        y.x = Math.round(y.x) - c, y.y = Math.round(y.y) - d;
        var m = [], g = this.map.getCenter(), v = 0;
        do {
            var L = this.grid[v];
            L || (L = [], this.grid.push(L));
            var O = 0;
            do {
                f = this.getTileBoundsForGridIndex(v, O);
                var b = y.clone();
                b.x = b.x + O * Math.round(a.w), b.y = b.y + v * Math.round(a.h);
                var w = L[O];
                w ? w.moveTo(f, b, !1) : (w = this.addTile(f, b), this.addTileMonitoringHooks(w), 
                L.push(w));
                var C = f.getCenterLonLat();
                m.push({
                    "tile": w,
                    "distance": Math.pow(C.lon - g.lon, 2) + Math.pow(C.lat - g.lat, 2)
                }), O += 1;
            } while (f.right <= e.right + u * this.buffer || O < l);
            v += 1;
        } while (f.bottom >= e.bottom - p * this.buffer || v < o);
        this.removeExcessTiles(v, O);
        n = this.getServerResolution();
        this.gridResolution = n, m.sort(function(e, t) {
            return e.distance - t.distance;
        });
        for (var S = 0, x = m.length; S < x; ++S) m[S].tile.draw();
    },
    "getMaxExtent": function() {
        return this.maxExtent;
    },
    "addTile": function(e, t) {
        var i = new this.tileClass(this, t, e, null, this.tileSize, this.tileOptions);
        return this.events.triggerEvent("addtile", {
            "tile": i
        }), i;
    },
    "addTileMonitoringHooks": function(e) {
        e.onLoadStart = function() {
            !1 === this.loading && (this.loading = !0, this.events.triggerEvent("loadstart")), 
            this.events.triggerEvent("tileloadstart", {
                "tile": e
            }), this.numLoadingTiles++, !this.singleTile && this.backBuffer && this.gridResolution === this.backBufferResolution && OpenLayers.Element.addClass(e.getTile(), "olTileReplacing");
        }, e.onLoadEnd = function(t) {
            this.numLoadingTiles--;
            var i = "unload" === t.type;
            if (this.events.triggerEvent("tileloaded", {
                "tile": e,
                "aborted": i
            }), !this.singleTile && !i && this.backBuffer && this.gridResolution === this.backBufferResolution) {
                var n = e.getTile();
                if ("none" === OpenLayers.Element.getStyle(n, "display")) {
                    var r = document.getElementById(e.id + "_bb");
                    r && r.parentNode.removeChild(r);
                }
                OpenLayers.Element.removeClass(n, "olTileReplacing");
            }
            if (0 === this.numLoadingTiles) {
                if (this.backBuffer) if (0 === this.backBuffer.childNodes.length) this.removeBackBuffer(); else {
                    this._transitionElement = i ? this.div.lastChild : e.imgDiv;
                    for (var s = this.transitionendEvents, a = s.length - 1; a >= 0; --a) OpenLayers.Event.observe(this._transitionElement, s[a], this._removeBackBuffer);
                    this.backBufferTimerId = window.setTimeout(this._removeBackBuffer, this.removeBackBufferDelay);
                }
                this.loading = !1, this.events.triggerEvent("loadend");
            }
        }, e.onLoadError = function() {
            this.events.triggerEvent("tileerror", {
                "tile": e
            });
        }, e.events.on({
            "loadstart": e.onLoadStart,
            "loadend": e.onLoadEnd,
            "unload": e.onLoadEnd,
            "loaderror": e.onLoadError,
            "scope": this
        });
    },
    "removeTileMonitoringHooks": function(e) {
        e.unload(), e.events.un({
            "loadstart": e.onLoadStart,
            "loadend": e.onLoadEnd,
            "unload": e.onLoadEnd,
            "loaderror": e.onLoadError,
            "scope": this
        });
    },
    "moveGriddedTiles": function() {
        for (var e = this.buffer + 1; ;) {
            var t = this.grid[0][0], i = {
                "x": t.position.x + this.map.layerContainerOriginPx.x,
                "y": t.position.y + this.map.layerContainerOriginPx.y
            }, n = this.getServerResolution() / this.map.getResolution(), r = {
                "w": Math.round(this.tileSize.w * n),
                "h": Math.round(this.tileSize.h * n)
            };
            if (i.x > -r.w * (e - 1)) this.shiftColumn(!0, r); else if (i.x < -r.w * e) this.shiftColumn(!1, r); else if (i.y > -r.h * (e - 1)) this.shiftRow(!0, r); else {
                if (!(i.y < -r.h * e)) break;
                this.shiftRow(!1, r);
            }
        }
    },
    "shiftRow": function(e, t) {
        var i = this.grid, n = e ? 0 : i.length - 1, r = e ? -1 : 1, s = this.rowSign;
        this.gridLayout.startrow += r * s;
        for (var a = i[n], o = i[e ? "pop" : "shift"](), l = 0, h = o.length; l < h; l++) {
            var u = o[l], p = a[l].position.clone();
            p.y += t.h * r, u.moveTo(this.getTileBoundsForGridIndex(n, l), p);
        }
        i[e ? "unshift" : "push"](o);
    },
    "shiftColumn": function(e, t) {
        var i = this.grid, n = e ? 0 : i[0].length - 1, r = e ? -1 : 1;
        this.gridLayout.startcol += r;
        for (var s = 0, a = i.length; s < a; s++) {
            var o = i[s], l = o[n].position.clone(), h = o[e ? "pop" : "shift"]();
            l.x += t.w * r, h.moveTo(this.getTileBoundsForGridIndex(s, n), l), o[e ? "unshift" : "push"](h);
        }
    },
    "removeExcessTiles": function(e, t) {
        for (var i, n; this.grid.length > e; ) for (i = 0, n = (r = this.grid.pop()).length; i < n; i++) {
            s = r[i];
            this.destroyTile(s);
        }
        for (i = 0, n = this.grid.length; i < n; i++) for (;this.grid[i].length > t; ) {
            var r = this.grid[i], s = r.pop();
            this.destroyTile(s);
        }
    },
    "onMapResize": function() {
        this.singleTile && (this.clearGrid(), this.setTileSize());
    },
    "getTileBounds": function(e) {
        var t = this.maxExtent, i = this.getResolution(), n = i * this.tileSize.w, r = i * this.tileSize.h, s = this.getLonLatFromViewPortPx(e), a = t.left + n * Math.floor((s.lon - t.left) / n), o = t.bottom + r * Math.floor((s.lat - t.bottom) / r);
        return new OpenLayers.Bounds(a, o, a + n, o + r);
    },
    "CLASS_NAME": "OpenLayers.Layer.Grid"
}), OpenLayers.TileManager = OpenLayers.Class({
    "cacheSize": 256,
    "tilesPerFrame": 2,
    "frameDelay": 16,
    "moveDelay": 100,
    "zoomDelay": 200,
    "maps": null,
    "tileQueueId": null,
    "tileQueue": null,
    "tileCache": null,
    "tileCacheIndex": null,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e), this.maps = [], this.tileQueueId = {}, this.tileQueue = {}, 
        this.tileCache = {}, this.tileCacheIndex = [];
    },
    "addMap": function(e) {
        if (!this._destroyed && OpenLayers.Layer.Grid) {
            this.maps.push(e), this.tileQueue[e.id] = [];
            for (var t = 0, i = e.layers.length; t < i; ++t) this.addLayer({
                "layer": e.layers[t]
            });
            e.events.on({
                "move": this.move,
                "zoomend": this.zoomEnd,
                "changelayer": this.changeLayer,
                "addlayer": this.addLayer,
                "preremovelayer": this.removeLayer,
                "scope": this
            });
        }
    },
    "removeMap": function(e) {
        if (!this._destroyed && OpenLayers.Layer.Grid) {
            if (window.clearTimeout(this.tileQueueId[e.id]), e.layers) for (var t = 0, i = e.layers.length; t < i; ++t) this.removeLayer({
                "layer": e.layers[t]
            });
            e.events && e.events.un({
                "move": this.move,
                "zoomend": this.zoomEnd,
                "changelayer": this.changeLayer,
                "addlayer": this.addLayer,
                "preremovelayer": this.removeLayer,
                "scope": this
            }), delete this.tileQueue[e.id], delete this.tileQueueId[e.id], OpenLayers.Util.removeItem(this.maps, e);
        }
    },
    "move": function(e) {
        this.updateTimeout(e.object, this.moveDelay, !0);
    },
    "zoomEnd": function(e) {
        this.updateTimeout(e.object, this.zoomDelay);
    },
    "changeLayer": function(e) {
        "visibility" !== e.property && "params" !== e.property || this.updateTimeout(e.object, 0);
    },
    "addLayer": function(e) {
        var t = e.layer;
        if (t instanceof OpenLayers.Layer.Grid) {
            t.events.on({
                "addtile": this.addTile,
                "refresh": this.handleLayerRefresh,
                "retile": this.clearTileQueue,
                "scope": this
            });
            var i, n, r;
            for (i = t.grid.length - 1; i >= 0; --i) for (n = t.grid[i].length - 1; n >= 0; --n) r = t.grid[i][n], 
            this.addTile({
                "tile": r
            }), r.url && !r.imgDiv && this.manageTileCache({
                "object": r
            });
        }
    },
    "removeLayer": function(e) {
        var t = e.layer;
        if (t instanceof OpenLayers.Layer.Grid && (this.clearTileQueue({
            "object": t
        }), t.events && t.events.un({
            "addtile": this.addTile,
            "refresh": this.handleLayerRefresh,
            "retile": this.clearTileQueue,
            "scope": this
        }), t.grid)) {
            var i, n, r;
            for (i = t.grid.length - 1; i >= 0; --i) for (n = t.grid[i].length - 1; n >= 0; --n) r = t.grid[i][n], 
            this.unloadTile({
                "object": r
            });
        }
    },
    "handleLayerRefresh": function(e) {
        var t = e.object;
        if (t.grid) {
            var i, n, r;
            for (i = t.grid.length - 1; i >= 0; --i) for (n = t.grid[i].length - 1; n >= 0; --n) r = t.grid[i][n], 
            OpenLayers.Util.removeItem(this.tileCacheIndex, r.url), delete this.tileCache[r.url];
        }
    },
    "updateTimeout": function(e, t, i) {
        window.clearTimeout(this.tileQueueId[e.id]);
        var n = this.tileQueue[e.id];
        i && !n.length || (this.tileQueueId[e.id] = window.setTimeout(OpenLayers.Function.bind(function() {
            this.drawTilesFromQueue(e), n.length && this.updateTimeout(e, this.frameDelay);
        }, this), t));
    },
    "addTile": function(e) {
        e.tile instanceof OpenLayers.Tile.Image ? e.tile.layer.singleTile || e.tile.events.on({
            "beforedraw": this.queueTileDraw,
            "beforeload": this.manageTileCache,
            "loadend": this.addToCache,
            "unload": this.unloadTile,
            "scope": this
        }) : this.removeLayer({
            "layer": e.tile.layer
        });
    },
    "unloadTile": function(e) {
        var t = e.object;
        t.events.un({
            "beforedraw": this.queueTileDraw,
            "beforeload": this.manageTileCache,
            "loadend": this.addToCache,
            "unload": this.unloadTile,
            "scope": this
        }), OpenLayers.Util.removeItem(this.tileQueue[t.layer.map.id], t);
    },
    "queueTileDraw": function(e) {
        var t = e.object, i = !1, n = t.layer, r = n.getURL(t.bounds), s = this.tileCache[r];
        if (s && "olTileImage" !== s.className && (delete this.tileCache[r], OpenLayers.Util.removeItem(this.tileCacheIndex, r), 
        s = null), n.url && (n.async || !s)) {
            var a = this.tileQueue[n.map.id];
            ~OpenLayers.Util.indexOf(a, t) || a.push(t), i = !0;
        }
        return !i;
    },
    "drawTilesFromQueue": function(e) {
        for (var t = this.tileQueue[e.id], i = this.tilesPerFrame, n = e.zoomTween && e.zoomTween.playing; !n && t.length && i; ) t.shift().draw(!0), 
        --i;
    },
    "manageTileCache": function(e) {
        var t = e.object, i = this.tileCache[t.url];
        i && (i.parentNode && OpenLayers.Element.hasClass(i.parentNode, "olBackBuffer") && (i.parentNode.removeChild(i), 
        i.id = null), i.parentNode || (i.style.visibility = "hidden", i.style.opacity = 0, 
        t.setImage(i), OpenLayers.Util.removeItem(this.tileCacheIndex, t.url), this.tileCacheIndex.push(t.url)));
    },
    "addToCache": function(e) {
        var t = e.object;
        this.tileCache[t.url] || OpenLayers.Element.hasClass(t.imgDiv, "olImageLoadError") || (this.tileCacheIndex.length >= this.cacheSize && (delete this.tileCache[this.tileCacheIndex[0]], 
        this.tileCacheIndex.shift()), this.tileCache[t.url] = t.imgDiv, this.tileCacheIndex.push(t.url));
    },
    "clearTileQueue": function(e) {
        for (var t = e.object, i = this.tileQueue[t.map.id], n = i.length - 1; n >= 0; --n) i[n].layer === t && i.splice(n, 1);
    },
    "destroy": function() {
        for (var e = this.maps.length - 1; e >= 0; --e) this.removeMap(this.maps[e]);
        this.maps = null, this.tileQueue = null, this.tileQueueId = null, this.tileCache = null, 
        this.tileCacheIndex = null, this._destroyed = !0;
    }
}), OpenLayers.Geometry.Point = OpenLayers.Class(OpenLayers.Geometry, {
    "x": null,
    "y": null,
    "initialize": function(e, t) {
        OpenLayers.Geometry.prototype.initialize.apply(this, arguments), this.x = parseFloat(e), 
        this.y = parseFloat(t);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Geometry.Point(this.x, this.y)), OpenLayers.Util.applyDefaults(e, this), 
        e;
    },
    "calculateBounds": function() {
        this.bounds = new OpenLayers.Bounds(this.x, this.y, this.x, this.y);
    },
    "distanceTo": function(e, t) {
        var i, n, r, s, a, o, l = !(t && !1 === t.edge) && t && t.details;
        return e instanceof OpenLayers.Geometry.Point ? (n = this.x, r = this.y, s = e.x, 
        a = e.y, i = Math.sqrt(Math.pow(n - s, 2) + Math.pow(r - a, 2)), o = l ? {
            "x0": n,
            "y0": r,
            "x1": s,
            "y1": a,
            "distance": i
        } : i) : (o = e.distanceTo(this, t), l && (o = {
            "x0": o.x1,
            "y0": o.y1,
            "x1": o.x0,
            "y1": o.y0,
            "distance": o.distance
        })), o;
    },
    "equals": function(e) {
        var t = !1;
        return null != e && (t = this.x == e.x && this.y == e.y || isNaN(this.x) && isNaN(this.y) && isNaN(e.x) && isNaN(e.y)), 
        t;
    },
    "toShortString": function() {
        return this.x + ", " + this.y;
    },
    "move": function(e, t) {
        this.x = this.x + e, this.y = this.y + t, this.clearBounds();
    },
    "rotate": function(e, t) {
        e *= Math.PI / 180;
        var i = this.distanceTo(t), n = e + Math.atan2(this.y - t.y, this.x - t.x);
        this.x = t.x + i * Math.cos(n), this.y = t.y + i * Math.sin(n), this.clearBounds();
    },
    "getCentroid": function() {
        return new OpenLayers.Geometry.Point(this.x, this.y);
    },
    "resize": function(e, t, i) {
        return i = void 0 == i ? 1 : i, this.x = t.x + e * i * (this.x - t.x), this.y = t.y + e * (this.y - t.y), 
        this.clearBounds(), this;
    },
    "intersects": function(e) {
        return "OpenLayers.Geometry.Point" == e.CLASS_NAME ? this.equals(e) : e.intersects(this);
    },
    "transform": function(e, t) {
        return e && t && (OpenLayers.Projection.transform(this, e, t), this.bounds = null), 
        this;
    },
    "getVertices": function(e) {
        return [ this ];
    },
    "CLASS_NAME": "OpenLayers.Geometry.Point"
}), OpenLayers.Geometry.Collection = OpenLayers.Class(OpenLayers.Geometry, {
    "components": null,
    "componentTypes": null,
    "initialize": function(e) {
        OpenLayers.Geometry.prototype.initialize.apply(this, arguments), this.components = [], 
        null != e && this.addComponents(e);
    },
    "destroy": function() {
        this.components.length = 0, this.components = null, OpenLayers.Geometry.prototype.destroy.apply(this, arguments);
    },
    "clone": function() {
        for (var e = new (OpenLayers.Util.getConstructor(this.CLASS_NAME))(), t = 0, i = this.components.length; t < i; t++) e.addComponent(this.components[t].clone());
        return OpenLayers.Util.applyDefaults(e, this), e;
    },
    "getComponentsString": function() {
        for (var e = [], t = 0, i = this.components.length; t < i; t++) e.push(this.components[t].toShortString());
        return e.join(",");
    },
    "calculateBounds": function() {
        this.bounds = null;
        var e = new OpenLayers.Bounds(), t = this.components;
        if (t) for (var i = 0, n = t.length; i < n; i++) e.extend(t[i].getBounds());
        null != e.left && null != e.bottom && null != e.right && null != e.top && this.setBounds(e);
    },
    "addComponents": function(e) {
        OpenLayers.Util.isArray(e) || (e = [ e ]);
        for (var t = 0, i = e.length; t < i; t++) this.addComponent(e[t]);
    },
    "addComponent": function(e, t) {
        var i = !1;
        if (e && (null == this.componentTypes || OpenLayers.Util.indexOf(this.componentTypes, e.CLASS_NAME) > -1)) {
            if (null != t && t < this.components.length) {
                var n = this.components.slice(0, t), r = this.components.slice(t, this.components.length);
                n.push(e), this.components = n.concat(r);
            } else this.components.push(e);
            e.parent = this, this.clearBounds(), i = !0;
        }
        return i;
    },
    "removeComponents": function(e) {
        var t = !1;
        OpenLayers.Util.isArray(e) || (e = [ e ]);
        for (var i = e.length - 1; i >= 0; --i) t = this.removeComponent(e[i]) || t;
        return t;
    },
    "removeComponent": function(e) {
        return OpenLayers.Util.removeItem(this.components, e), this.clearBounds(), !0;
    },
    "getLength": function() {
        for (var e = 0, t = 0, i = this.components.length; t < i; t++) e += this.components[t].getLength();
        return e;
    },
    "getArea": function() {
        for (var e = 0, t = 0, i = this.components.length; t < i; t++) e += this.components[t].getArea();
        return e;
    },
    "getGeodesicArea": function(e) {
        for (var t = 0, i = 0, n = this.components.length; i < n; i++) t += this.components[i].getGeodesicArea(e);
        return t;
    },
    "getCentroid": function(e) {
        if (!e) return this.components.length && this.components[0].getCentroid();
        var t = this.components.length;
        if (!t) return !1;
        for (var i, n = [], r = [], s = 0, a = Number.MAX_VALUE, o = 0; o < t; ++o) {
            var l = (i = this.components[o]).getArea(), h = i.getCentroid(!0);
            isNaN(l) || isNaN(h.x) || isNaN(h.y) || (n.push(l), s += l, a = l < a && l > 0 ? l : a, 
            r.push(h));
        }
        if (t = n.length, 0 === s) {
            for (o = 0; o < t; ++o) n[o] = 1;
            s = n.length;
        } else {
            for (o = 0; o < t; ++o) n[o] /= a;
            s /= a;
        }
        for (var u = 0, p = 0, o = 0; o < t; ++o) h = r[o], l = n[o], u += h.x * l, p += h.y * l;
        return new OpenLayers.Geometry.Point(u / s, p / s);
    },
    "getGeodesicLength": function(e) {
        for (var t = 0, i = 0, n = this.components.length; i < n; i++) t += this.components[i].getGeodesicLength(e);
        return t;
    },
    "move": function(e, t) {
        for (var i = 0, n = this.components.length; i < n; i++) this.components[i].move(e, t);
    },
    "rotate": function(e, t) {
        for (var i = 0, n = this.components.length; i < n; ++i) this.components[i].rotate(e, t);
    },
    "resize": function(e, t, i) {
        for (var n = 0; n < this.components.length; ++n) this.components[n].resize(e, t, i);
        return this;
    },
    "distanceTo": function(e, t) {
        for (var i, n, r, s = !(t && !1 === t.edge) && t && t.details, a = Number.POSITIVE_INFINITY, o = 0, l = this.components.length; o < l && (i = this.components[o].distanceTo(e, t), 
        !((r = s ? i.distance : i) < a && (a = r, n = i, 0 == a))); ++o) ;
        return n;
    },
    "equals": function(e) {
        var t = !0;
        if (e && e.CLASS_NAME && this.CLASS_NAME == e.CLASS_NAME) if (OpenLayers.Util.isArray(e.components) && e.components.length == this.components.length) {
            for (var i = 0, n = this.components.length; i < n; ++i) if (!this.components[i].equals(e.components[i])) {
                t = !1;
                break;
            }
        } else t = !1; else t = !1;
        return t;
    },
    "transform": function(e, t) {
        if (e && t) {
            for (var i = 0, n = this.components.length; i < n; i++) this.components[i].transform(e, t);
            this.bounds = null;
        }
        return this;
    },
    "intersects": function(e) {
        for (var t = !1, i = 0, n = this.components.length; i < n && !(t = e.intersects(this.components[i])); ++i) ;
        return t;
    },
    "getVertices": function(e) {
        for (var t = [], i = 0, n = this.components.length; i < n; ++i) Array.prototype.push.apply(t, this.components[i].getVertices(e));
        return t;
    },
    "CLASS_NAME": "OpenLayers.Geometry.Collection"
}), OpenLayers.Geometry.MultiPoint = OpenLayers.Class(OpenLayers.Geometry.Collection, {
    "componentTypes": [ "OpenLayers.Geometry.Point" ],
    "addPoint": function(e, t) {
        this.addComponent(e, t);
    },
    "removePoint": function(e) {
        this.removeComponent(e);
    },
    "CLASS_NAME": "OpenLayers.Geometry.MultiPoint"
}), OpenLayers.Geometry.Curve = OpenLayers.Class(OpenLayers.Geometry.MultiPoint, {
    "componentTypes": [ "OpenLayers.Geometry.Point" ],
    "getLength": function() {
        var e = 0;
        if (this.components && this.components.length > 1) for (var t = 1, i = this.components.length; t < i; t++) e += this.components[t - 1].distanceTo(this.components[t]);
        return e;
    },
    "getGeodesicLength": function(e) {
        var t = this;
        if (e) {
            var i = new OpenLayers.Projection("EPSG:4326");
            i.equals(e) || (t = this.clone().transform(e, i));
        }
        var n = 0;
        if (t.components && t.components.length > 1) for (var r, s, a = 1, o = t.components.length; a < o; a++) r = t.components[a - 1], 
        s = t.components[a], n += OpenLayers.Util.distVincenty({
            "lon": r.x,
            "lat": r.y
        }, {
            "lon": s.x,
            "lat": s.y
        });
        return 1e3 * n;
    },
    "CLASS_NAME": "OpenLayers.Geometry.Curve"
}), OpenLayers.Geometry.LineString = OpenLayers.Class(OpenLayers.Geometry.Curve, {
    "removeComponent": function(e) {
        var t = this.components && this.components.length > 2;
        return t && OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this, arguments), 
        t;
    },
    "intersects": function(e) {
        var t = !1, i = e.CLASS_NAME;
        if ("OpenLayers.Geometry.LineString" == i || "OpenLayers.Geometry.LinearRing" == i || "OpenLayers.Geometry.Point" == i) {
            var n, r = this.getSortedSegments();
            n = "OpenLayers.Geometry.Point" == i ? [ {
                "x1": e.x,
                "y1": e.y,
                "x2": e.x,
                "y2": e.y
            } ] : e.getSortedSegments();
            var s, a, o, l, h, u, p, c;
            e: for (var d = 0, f = r.length; d < f; ++d) {
                a = (s = r[d]).x1, o = s.x2, l = s.y1, h = s.y2;
                for (var y = 0, m = n.length; y < m && !((u = n[y]).x1 > o); ++y) if (!(u.x2 < a) && (p = u.y1, 
                c = u.y2, !(Math.min(p, c) > Math.max(l, h)) && !(Math.max(p, c) < Math.min(l, h)) && OpenLayers.Geometry.segmentsIntersect(s, u))) {
                    t = !0;
                    break e;
                }
            }
        } else t = e.intersects(this);
        return t;
    },
    "getSortedSegments": function() {
        for (var e, t, i = this.components.length - 1, n = new Array(i), r = 0; r < i; ++r) e = this.components[r], 
        t = this.components[r + 1], e.x < t.x ? n[r] = {
            "x1": e.x,
            "y1": e.y,
            "x2": t.x,
            "y2": t.y
        } : n[r] = {
            "x1": t.x,
            "y1": t.y,
            "x2": e.x,
            "y2": e.y
        };
        return n.sort(function(e, t) {
            return e.x1 - t.x1;
        });
    },
    "splitWithSegment": function(e, t) {
        for (var i, n, r, s, a = !(t && !1 === t.edge), o = t && t.tolerance, l = [], h = this.getVertices(), u = [], p = [], c = !1, d = {
            "point": !0,
            "tolerance": o
        }, f = null, y = 0, m = h.length - 2; y <= m; ++y) if (i = h[y], u.push(i.clone()), 
        n = h[y + 1], s = {
            "x1": i.x,
            "y1": i.y,
            "x2": n.x,
            "y2": n.y
        }, (r = OpenLayers.Geometry.segmentsIntersect(e, s, d)) instanceof OpenLayers.Geometry.Point && (!!(r.x === e.x1 && r.y === e.y1 || r.x === e.x2 && r.y === e.y2 || r.equals(i) || r.equals(n)) || a)) {
            if (r.equals(p[p.length - 1]) || p.push(r.clone()), 0 === y && r.equals(i)) continue;
            if (r.equals(n)) continue;
            c = !0, r.equals(i) || u.push(r), l.push(new OpenLayers.Geometry.LineString(u)), 
            u = [ r.clone() ];
        }
        if (c && (u.push(n.clone()), l.push(new OpenLayers.Geometry.LineString(u))), p.length > 0) {
            var g = e.x1 < e.x2 ? 1 : -1, v = e.y1 < e.y2 ? 1 : -1;
            f = {
                "lines": l,
                "points": p.sort(function(e, t) {
                    return g * e.x - g * t.x || v * e.y - v * t.y;
                })
            };
        }
        return f;
    },
    "split": function(e, t) {
        var i, n, r, s, a = null, o = t && t.mutual;
        if (e instanceof OpenLayers.Geometry.LineString) {
            var l, h, u, p, c, d, f = this.getVertices(), y = [];
            r = [];
            for (var m = 0, g = f.length - 2; m <= g; ++m) {
                l = f[m], h = f[m + 1], u = {
                    "x1": l.x,
                    "y1": l.y,
                    "x2": h.x,
                    "y2": h.y
                }, s = s || [ e ], o && y.push(l.clone());
                for (var v = 0; v < s.length; ++v) if ((p = s[v].splitWithSegment(u, t)) && ((c = p.lines).length > 0 && (c.unshift(v, 1), 
                Array.prototype.splice.apply(s, c), v += c.length - 2), o)) for (var L = 0, O = p.points.length; L < O; ++L) (d = p.points[L]).equals(l) || (y.push(d), 
                r.push(new OpenLayers.Geometry.LineString(y)), y = d.equals(h) ? [] : [ d.clone() ]);
            }
            o && r.length > 0 && y.length > 0 && (y.push(h.clone()), r.push(new OpenLayers.Geometry.LineString(y)));
        } else a = e.splitWith(this, t);
        return s && s.length > 1 ? n = !0 : s = [], r && r.length > 1 ? i = !0 : r = [], 
        (n || i) && (a = o ? [ r, s ] : s), a;
    },
    "splitWith": function(e, t) {
        return e.split(this, t);
    },
    "getVertices": function(e) {
        return !0 === e ? [ this.components[0], this.components[this.components.length - 1] ] : !1 === e ? this.components.slice(1, this.components.length - 1) : this.components.slice();
    },
    "distanceTo": function(e, t) {
        var i, n = !(t && !1 === t.edge) && t && t.details, r = {}, s = Number.POSITIVE_INFINITY;
        if (e instanceof OpenLayers.Geometry.Point) for (var a, o = this.getSortedSegments(), l = e.x, h = e.y, u = 0, p = o.length; u < p && (a = o[u], 
        !((i = OpenLayers.Geometry.distanceToSegment(e, a)).distance < s && (s = i.distance, 
        r = n ? {
            "distance": s,
            "x0": i.x,
            "y0": i.y,
            "x1": l,
            "y1": h,
            "index": u,
            "indexDistance": new OpenLayers.Geometry.Point(a.x1, a.y1).distanceTo(e)
        } : s, 0 === s))); ++u) ; else if (e instanceof OpenLayers.Geometry.LineString) {
            var c, d, f, y, m, g = this.getSortedSegments(), v = e.getSortedSegments(), L = v.length, O = {
                "point": !0
            };
            e: for (var u = 0, p = g.length; u < p; ++u) {
                y = (c = g[u]).x1, m = c.y1;
                for (var b = 0; b < L; ++b) {
                    if (d = v[b], f = OpenLayers.Geometry.segmentsIntersect(c, d, O)) {
                        s = 0, r = {
                            "distance": 0,
                            "x0": f.x,
                            "y0": f.y,
                            "x1": f.x,
                            "y1": f.y
                        };
                        break e;
                    }
                    (i = OpenLayers.Geometry.distanceToSegment({
                        "x": y,
                        "y": m
                    }, d)).distance < s && (r = {
                        "distance": s = i.distance,
                        "x0": y,
                        "y0": m,
                        "x1": i.x,
                        "y1": i.y
                    });
                }
            }
            if (n || (r = r.distance), 0 !== s && c) {
                i = e.distanceTo(new OpenLayers.Geometry.Point(c.x2, c.y2), t);
                var w = n ? i.distance : i;
                w < s && (r = n ? {
                    "distance": s,
                    "x0": i.x1,
                    "y0": i.y1,
                    "x1": i.x0,
                    "y1": i.y0
                } : w);
            }
        } else r = e.distanceTo(this, t), n && (r = {
            "distance": r.distance,
            "x0": r.x1,
            "y0": r.y1,
            "x1": r.x0,
            "y1": r.y0
        });
        return r;
    },
    "simplify": function(e) {
        if (this && null !== this) {
            var t = this.getVertices();
            if (t.length < 3) return this;
            var i = function(e, t, r, a) {
                for (var o, l = 0, h = 0, u = t; u < r; u++) (o = n(e[t], e[r], e[u])) > l && (l = o, 
                h = u);
                l > a && h != t && (s.push(h), i(e, t, h, a), i(e, h, r, a));
            }, n = function(e, t, i) {
                return Math.abs(.5 * (e.x * t.y + t.x * i.y + i.x * e.y - t.x * e.y - i.x * t.y - e.x * i.y)) / Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2)) * 2;
            }, r = t.length - 1, s = [];
            for (s.push(0), s.push(r); t[0].equals(t[r]); ) r--, s.push(r);
            i(t, 0, r, e);
            var a = [];
            s.sort(function(e, t) {
                return e - t;
            });
            for (var o = 0; o < s.length; o++) a.push(t[s[o]]);
            return new OpenLayers.Geometry.LineString(a);
        }
        return this;
    },
    "CLASS_NAME": "OpenLayers.Geometry.LineString"
}), OpenLayers.Geometry.LineString.geodesic = function(e, t, i) {
    for (var n, r, s, a, o, l, h = [], u = e(0), p = e(1), c = t(u), d = t(p), f = [ p, u ], y = [ d, c ], m = [ 1, 0 ], g = {}, v = 1e5; --v > 0 && m.length > 0; ) s = m.pop(), 
    u = f.pop(), c = y.pop(), (l = s.toString()) in g || (h.push(c), g[l] = !0), a = m.pop(), 
    p = f.pop(), d = y.pop(), r = t(n = e(o = (s + a) / 2)), OpenLayers.Geometry.distanceSquaredToSegment(r, {
        "x1": c.x,
        "y1": c.y,
        "x2": d.x,
        "y2": d.y
    }).distance < i ? (h.push(d), g[l = a.toString()] = !0) : (m.push(a, o, o, s), y.push(d, r, r, c), 
    f.push(p, n, n, u));
    return new OpenLayers.Geometry.LineString(h);
}, OpenLayers.Geometry.LineString.geodesicMeridian = function(e, t, i, n, r) {
    var s = new OpenLayers.Projection("EPSG:4326");
    return OpenLayers.Geometry.LineString.geodesic(function(n) {
        return new OpenLayers.Geometry.Point(e, t + (i - t) * n);
    }, function(e) {
        return e.transform(s, n);
    }, r);
}, OpenLayers.Geometry.LineString.geodesicParallel = function(e, t, i, n, r) {
    var s = new OpenLayers.Projection("EPSG:4326");
    return OpenLayers.Geometry.LineString.geodesic(function(n) {
        return new OpenLayers.Geometry.Point(t + (i - t) * n, e);
    }, function(e) {
        return e.transform(s, n);
    }, r);
}, OpenLayers.Geometry.MultiLineString = OpenLayers.Class(OpenLayers.Geometry.Collection, {
    "componentTypes": [ "OpenLayers.Geometry.LineString" ],
    "split": function(e, t) {
        for (var i, n, r, s, a, o = null, l = t && t.mutual, h = [], u = [ e ], p = 0, c = this.components.length; p < c; ++p) {
            n = this.components[p], s = !1;
            for (var d = 0; d < u.length; ++d) if (i = n.split(u[d], t)) {
                if (l) {
                    for (var f = 0, y = (r = i[0]).length; f < y; ++f) 0 === f && h.length ? h[h.length - 1].addComponent(r[f]) : h.push(new OpenLayers.Geometry.MultiLineString([ r[f] ]));
                    s = !0, i = i[1];
                }
                if (i.length) {
                    i.unshift(d, 1), Array.prototype.splice.apply(u, i);
                    break;
                }
            }
            s || (h.length ? h[h.length - 1].addComponent(n.clone()) : h = [ new OpenLayers.Geometry.MultiLineString(n.clone()) ]);
        }
        return h && h.length > 1 ? s = !0 : h = [], u && u.length > 1 ? a = !0 : u = [], 
        (s || a) && (o = l ? [ h, u ] : u), o;
    },
    "splitWith": function(e, t) {
        var i, n, r, s, a, o, l, h = null, u = t && t.mutual;
        if (e instanceof OpenLayers.Geometry.LineString) {
            l = [], o = [ e ];
            for (var p = 0, c = this.components.length; p < c; ++p) {
                a = !1, n = this.components[p];
                for (var d = 0; d < o.length; ++d) if (i = o[d].split(n, t)) {
                    u && ((r = i[0]).length && (r.unshift(d, 1), Array.prototype.splice.apply(o, r), 
                    d += r.length - 2), 0 === (i = i[1]).length && (i = [ n.clone() ]));
                    for (var f = 0, y = i.length; f < y; ++f) 0 === f && l.length ? l[l.length - 1].addComponent(i[f]) : l.push(new OpenLayers.Geometry.MultiLineString([ i[f] ]));
                    a = !0;
                }
                a || (l.length ? l[l.length - 1].addComponent(n.clone()) : l = [ new OpenLayers.Geometry.MultiLineString([ n.clone() ]) ]);
            }
        } else h = e.split(this);
        return o && o.length > 1 ? s = !0 : o = [], l && l.length > 1 ? a = !0 : l = [], 
        (s || a) && (h = u ? [ o, l ] : l), h;
    },
    "CLASS_NAME": "OpenLayers.Geometry.MultiLineString"
}), OpenLayers.Geometry.LinearRing = OpenLayers.Class(OpenLayers.Geometry.LineString, {
    "componentTypes": [ "OpenLayers.Geometry.Point" ],
    "addComponent": function(e, t) {
        var i = !1, n = this.components.pop();
        null == t && e.equals(n) || (i = OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, arguments));
        var r = this.components[0];
        return OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, [ r ]), 
        i;
    },
    "removeComponent": function(e) {
        var t = this.components && this.components.length > 3;
        if (t) {
            this.components.pop(), OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this, arguments);
            var i = this.components[0];
            OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, [ i ]);
        }
        return t;
    },
    "move": function(e, t) {
        for (var i = 0, n = this.components.length; i < n - 1; i++) this.components[i].move(e, t);
    },
    "rotate": function(e, t) {
        for (var i = 0, n = this.components.length; i < n - 1; ++i) this.components[i].rotate(e, t);
    },
    "resize": function(e, t, i) {
        for (var n = 0, r = this.components.length; n < r - 1; ++n) this.components[n].resize(e, t, i);
        return this;
    },
    "transform": function(e, t) {
        if (e && t) {
            for (var i = 0, n = this.components.length; i < n - 1; i++) this.components[i].transform(e, t);
            this.bounds = null;
        }
        return this;
    },
    "getCentroid": function() {
        if (this.components) {
            var e = this.components.length;
            if (e > 0 && e <= 2) return this.components[0].clone();
            if (e > 2) {
                var t = 0, i = 0, n = this.components[0].x, r = this.components[0].y, s = -1 * this.getArea();
                if (0 != s) {
                    for (u = 0; u < e - 1; u++) {
                        var a = this.components[u], o = this.components[u + 1];
                        t += (a.x + o.x - 2 * n) * ((a.x - n) * (o.y - r) - (o.x - n) * (a.y - r)), i += (a.y + o.y - 2 * r) * ((a.x - n) * (o.y - r) - (o.x - n) * (a.y - r));
                    }
                    var l = n + t / (6 * s), h = r + i / (6 * s);
                } else {
                    for (var u = 0; u < e - 1; u++) t += this.components[u].x, i += this.components[u].y;
                    var l = t / (e - 1), h = i / (e - 1);
                }
                return new OpenLayers.Geometry.Point(l, h);
            }
            return null;
        }
    },
    "getArea": function() {
        var e = 0;
        if (this.components && this.components.length > 2) {
            for (var t = 0, i = 0, n = this.components.length; i < n - 1; i++) {
                var r = this.components[i], s = this.components[i + 1];
                t += (r.x + s.x) * (s.y - r.y);
            }
            e = -t / 2;
        }
        return e;
    },
    "getGeodesicArea": function(e) {
        var t = this;
        if (e) {
            var i = new OpenLayers.Projection("EPSG:4326");
            i.equals(e) || (t = this.clone().transform(e, i));
        }
        var n = 0, r = t.components && t.components.length;
        if (r > 2) {
            for (var s, a, o = 0; o < r - 1; o++) s = t.components[o], a = t.components[o + 1], 
            n += OpenLayers.Util.rad(a.x - s.x) * (2 + Math.sin(OpenLayers.Util.rad(s.y)) + Math.sin(OpenLayers.Util.rad(a.y)));
            n = n * OpenLayers.Util.VincentyConstants.a * OpenLayers.Util.VincentyConstants.a / 2;
        }
        return n;
    },
    "containsPoint": function(e) {
        for (var t, i, n, r, s, a, o, l = OpenLayers.Number.limitSigDigs, h = l(e.x, 14), u = l(e.y, 14), p = this.components.length - 1, c = 0, d = 0; d < p; ++d) if (t = this.components[d], 
        n = l(t.x, 14), r = l(t.y, 14), i = this.components[d + 1], s = l(i.x, 14), a = l(i.y, 14), 
        r != a) {
            if ((o = l(function(e, t, i, n, r) {
                return (n - t) / (r - i) * (e - r) + n;
            }(u, n, r, s, a), 14)) == h && (r < a && u >= r && u <= a || r > a && u <= r && u >= a)) {
                c = -1;
                break;
            }
            o <= h || n != s && (o < Math.min(n, s) || o > Math.max(n, s)) || (r < a && u >= r && u < a || r > a && u < r && u >= a) && ++c;
        } else if (u == r && (n <= s && h >= n && h <= s || n >= s && h <= n && h >= s)) {
            c = -1;
            break;
        }
        return -1 == c ? 1 : !!(1 & c);
    },
    "intersects": function(e) {
        var t = !1;
        if ("OpenLayers.Geometry.Point" == e.CLASS_NAME) t = this.containsPoint(e); else if ("OpenLayers.Geometry.LineString" == e.CLASS_NAME) t = e.intersects(this); else if ("OpenLayers.Geometry.LinearRing" == e.CLASS_NAME) t = OpenLayers.Geometry.LineString.prototype.intersects.apply(this, [ e ]); else for (var i = 0, n = e.components.length; i < n && !(t = e.components[i].intersects(this)); ++i) ;
        return t;
    },
    "getVertices": function(e) {
        return !0 === e ? [] : this.components.slice(0, this.components.length - 1);
    },
    "CLASS_NAME": "OpenLayers.Geometry.LinearRing"
}), OpenLayers.Geometry.Polygon = OpenLayers.Class(OpenLayers.Geometry.Collection, {
    "componentTypes": [ "OpenLayers.Geometry.LinearRing" ],
    "getArea": function() {
        var e = 0;
        if (this.components && this.components.length > 0) {
            e += Math.abs(this.components[0].getArea());
            for (var t = 1, i = this.components.length; t < i; t++) e -= Math.abs(this.components[t].getArea());
        }
        return e;
    },
    "getGeodesicArea": function(e) {
        var t = 0;
        if (this.components && this.components.length > 0) {
            t += Math.abs(this.components[0].getGeodesicArea(e));
            for (var i = 1, n = this.components.length; i < n; i++) t -= Math.abs(this.components[i].getGeodesicArea(e));
        }
        return t;
    },
    "containsPoint": function(e) {
        var t = this.components.length, i = !1;
        if (t > 0 && 1 !== (i = this.components[0].containsPoint(e)) && i && t > 1) for (var n, r = 1; r < t; ++r) if (n = this.components[r].containsPoint(e)) {
            i = 1 === n && 1;
            break;
        }
        return i;
    },
    "intersects": function(e) {
        var t, i, n = !1;
        if ("OpenLayers.Geometry.Point" == e.CLASS_NAME) n = this.containsPoint(e); else if ("OpenLayers.Geometry.LineString" == e.CLASS_NAME || "OpenLayers.Geometry.LinearRing" == e.CLASS_NAME) {
            for (t = 0, i = this.components.length; t < i && !(n = e.intersects(this.components[t])); ++t) ;
            if (!n) for (t = 0, i = e.components.length; t < i && !(n = this.containsPoint(e.components[t])); ++t) ;
        } else for (t = 0, i = e.components.length; t < i && !(n = this.intersects(e.components[t])); ++t) ;
        if (!n && "OpenLayers.Geometry.Polygon" == e.CLASS_NAME) {
            var r = this.components[0];
            for (t = 0, i = r.components.length; t < i && !(n = e.containsPoint(r.components[t])); ++t) ;
        }
        return n;
    },
    "distanceTo": function(e, t) {
        return !!(t && !1 === t.edge) && this.intersects(e) ? 0 : OpenLayers.Geometry.Collection.prototype.distanceTo.apply(this, [ e, t ]);
    },
    "CLASS_NAME": "OpenLayers.Geometry.Polygon"
}), OpenLayers.Geometry.Polygon.createRegularPolygon = function(e, t, i, n) {
    var r = Math.PI * (1 / i - .5);
    n && (r += n / 180 * Math.PI);
    for (var s, a, o, l = [], h = 0; h < i; ++h) s = r + 2 * h * Math.PI / i, a = e.x + t * Math.cos(s), 
    o = e.y + t * Math.sin(s), l.push(new OpenLayers.Geometry.Point(a, o));
    var u = new OpenLayers.Geometry.LinearRing(l);
    return new OpenLayers.Geometry.Polygon([ u ]);
}, OpenLayers.Geometry.MultiPolygon = OpenLayers.Class(OpenLayers.Geometry.Collection, {
    "componentTypes": [ "OpenLayers.Geometry.Polygon" ],
    "CLASS_NAME": "OpenLayers.Geometry.MultiPolygon"
}), OpenLayers.Format.WKT = OpenLayers.Class(OpenLayers.Format, {
    "initialize": function(e) {
        this.regExes = {
            "typeStr": /^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,
            "spaces": /\s+/,
            "parenComma": /\)\s*,\s*\(/,
            "doubleParenComma": /\)\s*\)\s*,\s*\(\s*\(/,
            "trimParens": /^\s*\(?(.*?)\)?\s*$/
        }, OpenLayers.Format.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        var t, i, n;
        e = e.replace(/[\n\r]/g, " ");
        var r = this.regExes.typeStr.exec(e);
        if (r && (i = r[1].toLowerCase(), n = r[2], this.parse[i] && (t = this.parse[i].apply(this, [ n ])), 
        this.internalProjection && this.externalProjection)) if (t && "OpenLayers.Feature.Vector" == t.CLASS_NAME) t.geometry.transform(this.externalProjection, this.internalProjection); else if (t && "geometrycollection" != i && "object" == typeof t) for (var s = 0, a = t.length; s < a; s++) t[s].geometry.transform(this.externalProjection, this.internalProjection);
        return t;
    },
    "write": function(e) {
        var t, i, n;
        e.constructor == Array ? (t = e, n = !0) : (t = [ e ], n = !1);
        var r = [];
        n && r.push("GEOMETRYCOLLECTION(");
        for (var s = 0, a = t.length; s < a; ++s) n && s > 0 && r.push(","), i = t[s].geometry, 
        r.push(this.extractGeometry(i));
        return n && r.push(")"), r.join("");
    },
    "extractGeometry": function(e) {
        var t = e.CLASS_NAME.split(".")[2].toLowerCase();
        return this.extract[t] ? (this.internalProjection && this.externalProjection && (e = e.clone()).transform(this.internalProjection, this.externalProjection), 
        ("collection" == t ? "GEOMETRYCOLLECTION" : t.toUpperCase()) + "(" + this.extract[t].apply(this, [ e ]) + ")") : null;
    },
    "extract": {
        "point": function(e) {
            return e.x + " " + e.y;
        },
        "multipoint": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push("(" + this.extract.point.apply(this, [ e.components[i] ]) + ")");
            return t.join(",");
        },
        "linestring": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push(this.extract.point.apply(this, [ e.components[i] ]));
            return t.join(",");
        },
        "multilinestring": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push("(" + this.extract.linestring.apply(this, [ e.components[i] ]) + ")");
            return t.join(",");
        },
        "polygon": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push("(" + this.extract.linestring.apply(this, [ e.components[i] ]) + ")");
            return t.join(",");
        },
        "multipolygon": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push("(" + this.extract.polygon.apply(this, [ e.components[i] ]) + ")");
            return t.join(",");
        },
        "collection": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push(this.extractGeometry.apply(this, [ e.components[i] ]));
            return t.join(",");
        }
    },
    "parse": {
        "point": function(e) {
            var t = OpenLayers.String.trim(e).split(this.regExes.spaces);
            return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(t[0], t[1]));
        },
        "multipoint": function(e) {
            for (var t, i = OpenLayers.String.trim(e).split(","), n = [], r = 0, s = i.length; r < s; ++r) t = i[r].replace(this.regExes.trimParens, "$1"), 
            n.push(this.parse.point.apply(this, [ t ]).geometry);
            return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPoint(n));
        },
        "linestring": function(e) {
            for (var t = OpenLayers.String.trim(e).split(","), i = [], n = 0, r = t.length; n < r; ++n) i.push(this.parse.point.apply(this, [ t[n] ]).geometry);
            return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(i));
        },
        "multilinestring": function(e) {
            for (var t, i = OpenLayers.String.trim(e).split(this.regExes.parenComma), n = [], r = 0, s = i.length; r < s; ++r) t = i[r].replace(this.regExes.trimParens, "$1"), 
            n.push(this.parse.linestring.apply(this, [ t ]).geometry);
            return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiLineString(n));
        },
        "polygon": function(e) {
            for (var t, i, n, r = OpenLayers.String.trim(e).split(this.regExes.parenComma), s = [], a = 0, o = r.length; a < o; ++a) t = r[a].replace(this.regExes.trimParens, "$1"), 
            i = this.parse.linestring.apply(this, [ t ]).geometry, n = new OpenLayers.Geometry.LinearRing(i.components), 
            s.push(n);
            return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon(s));
        },
        "multipolygon": function(e) {
            for (var t, i = OpenLayers.String.trim(e).split(this.regExes.doubleParenComma), n = [], r = 0, s = i.length; r < s; ++r) t = i[r].replace(this.regExes.trimParens, "$1"), 
            n.push(this.parse.polygon.apply(this, [ t ]).geometry);
            return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPolygon(n));
        },
        "geometrycollection": function(e) {
            e = e.replace(/,\s*([A-Za-z])/g, "|$1");
            for (var t = OpenLayers.String.trim(e).split("|"), i = [], n = 0, r = t.length; n < r; ++n) i.push(OpenLayers.Format.WKT.prototype.read.apply(this, [ t[n] ]));
            return i;
        }
    },
    "CLASS_NAME": "OpenLayers.Format.WKT"
}), OpenLayers.Format.JSON = OpenLayers.Class(OpenLayers.Format, {
    "indent": "    ",
    "space": " ",
    "newline": "\n",
    "level": 0,
    "pretty": !1,
    "nativeJSON": !(!window.JSON || "function" != typeof JSON.parse || "function" != typeof JSON.stringify),
    "read": function(json, filter) {
        function walk(e, t) {
            if (t && "object" == typeof t) for (var i in t) t.hasOwnProperty(i) && (t[i] = walk(i, t[i]));
            return filter(e, t);
        }
        var object;
        if (this.nativeJSON) object = JSON.parse(json, filter); else try {
            /^[\],:{}\s]*$/.test(json.replace(/\\["\\\/bfnrtu]/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, "")) && (object = eval("(" + json + ")"), 
            "function" == typeof filter && (object = walk("", object)));
        } catch (e) {}
        return this.keepData && (this.data = object), object;
    },
    "write": function(e, t) {
        this.pretty = !!t;
        var i = null, n = typeof e;
        if (this.serialize[n]) try {
            i = !this.pretty && this.nativeJSON ? JSON.stringify(e) : this.serialize[n].apply(this, [ e ]);
        } catch (e) {
            OpenLayers.Console.error("Trouble serializing: " + e);
        }
        return i;
    },
    "writeIndent": function() {
        var e = [];
        if (this.pretty) for (var t = 0; t < this.level; ++t) e.push(this.indent);
        return e.join("");
    },
    "writeNewline": function() {
        return this.pretty ? this.newline : "";
    },
    "writeSpace": function() {
        return this.pretty ? this.space : "";
    },
    "serialize": {
        "object": function(e) {
            if (null == e) return "null";
            if (e.constructor == Date) return this.serialize.date.apply(this, [ e ]);
            if (e.constructor == Array) return this.serialize.array.apply(this, [ e ]);
            var t = [ "{" ];
            this.level += 1;
            var i, n, r, s = !1;
            for (i in e) e.hasOwnProperty(i) && (n = OpenLayers.Format.JSON.prototype.write.apply(this, [ i, this.pretty ]), 
            r = OpenLayers.Format.JSON.prototype.write.apply(this, [ e[i], this.pretty ]), null != n && null != r && (s && t.push(","), 
            t.push(this.writeNewline(), this.writeIndent(), n, ":", this.writeSpace(), r), s = !0));
            return this.level -= 1, t.push(this.writeNewline(), this.writeIndent(), "}"), t.join("");
        },
        "array": function(e) {
            var t, i = [ "[" ];
            this.level += 1;
            for (var n = 0, r = e.length; n < r; ++n) null != (t = OpenLayers.Format.JSON.prototype.write.apply(this, [ e[n], this.pretty ])) && (n > 0 && i.push(","), 
            i.push(this.writeNewline(), this.writeIndent(), t));
            return this.level -= 1, i.push(this.writeNewline(), this.writeIndent(), "]"), i.join("");
        },
        "string": function(e) {
            var t = {
                "\b": "\\b",
                "\t": "\\t",
                "\n": "\\n",
                "\f": "\\f",
                "\r": "\\r",
                '"': '\\"',
                "\\": "\\\\"
            };
            return /["\\\x00-\x1f]/.test(e) ? '"' + e.replace(/([\x00-\x1f\\"])/g, function(e, i) {
                var n = t[i];
                return n || (n = i.charCodeAt(), "\\u00" + Math.floor(n / 16).toString(16) + (n % 16).toString(16));
            }) + '"' : '"' + e + '"';
        },
        "number": function(e) {
            return isFinite(e) ? String(e) : "null";
        },
        "boolean": function(e) {
            return String(e);
        },
        "date": function(e) {
            function t(e) {
                return e < 10 ? "0" + e : e;
            }
            return '"' + e.getFullYear() + "-" + t(e.getMonth() + 1) + "-" + t(e.getDate()) + "T" + t(e.getHours()) + ":" + t(e.getMinutes()) + ":" + t(e.getSeconds()) + '"';
        }
    },
    "CLASS_NAME": "OpenLayers.Format.JSON"
}), OpenLayers.Format.GeoJSON = OpenLayers.Class(OpenLayers.Format.JSON, {
    "ignoreExtraDims": !1,
    "read": function(e, t, i) {
        t = t || "FeatureCollection";
        var n = null, r = null;
        if (r = "string" == typeof e ? OpenLayers.Format.JSON.prototype.read.apply(this, [ e, i ]) : e) {
            if ("string" != typeof r.type) OpenLayers.Console.error("Bad GeoJSON - no type: " + e); else if (this.isValidType(r, t)) switch (t) {
              case "Geometry":
                try {
                    n = this.parseGeometry(r);
                } catch (e) {
                    OpenLayers.Console.error(e);
                }
                break;

              case "Feature":
                try {
                    (n = this.parseFeature(r)).type = "Feature";
                } catch (e) {
                    OpenLayers.Console.error(e);
                }
                break;

              case "FeatureCollection":
                switch (n = [], r.type) {
                  case "Feature":
                    try {
                        n.push(this.parseFeature(r));
                    } catch (e) {
                        n = null, OpenLayers.Console.error(e);
                    }
                    break;

                  case "FeatureCollection":
                    for (var s = 0, a = r.features.length; s < a; ++s) try {
                        n.push(this.parseFeature(r.features[s]));
                    } catch (e) {
                        n = null, OpenLayers.Console.error(e);
                    }
                    break;

                  default:
                    try {
                        var o = this.parseGeometry(r);
                        n.push(new OpenLayers.Feature.Vector(o));
                    } catch (e) {
                        n = null, OpenLayers.Console.error(e);
                    }
                }
            }
        } else OpenLayers.Console.error("Bad JSON: " + e);
        return n;
    },
    "isValidType": function(e, t) {
        var i = !1;
        switch (t) {
          case "Geometry":
            -1 == OpenLayers.Util.indexOf([ "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon", "Box", "GeometryCollection" ], e.type) ? OpenLayers.Console.error("Unsupported geometry type: " + e.type) : i = !0;
            break;

          case "FeatureCollection":
            i = !0;
            break;

          default:
            e.type == t ? i = !0 : OpenLayers.Console.error("Cannot convert types from " + e.type + " to " + t);
        }
        return i;
    },
    "parseFeature": function(e) {
        var t, i, n, r;
        n = e.properties ? e.properties : {}, r = e.geometry && e.geometry.bbox || e.bbox;
        try {
            i = this.parseGeometry(e.geometry);
        } catch (e) {
            throw e;
        }
        return t = new OpenLayers.Feature.Vector(i, n), r && (t.bounds = OpenLayers.Bounds.fromArray(r)), 
        e.id && (t.fid = e.id), t;
    },
    "parseGeometry": function(e) {
        if (null == e) return null;
        var t, i = !1;
        if ("GeometryCollection" == e.type) {
            if (!OpenLayers.Util.isArray(e.geometries)) throw "GeometryCollection must have geometries array: " + e;
            for (var n = e.geometries.length, r = new Array(n), s = 0; s < n; ++s) r[s] = this.parseGeometry.apply(this, [ e.geometries[s] ]);
            t = new OpenLayers.Geometry.Collection(r), i = !0;
        } else {
            if (!OpenLayers.Util.isArray(e.coordinates)) throw "Geometry must have coordinates array: " + e;
            if (!this.parseCoords[e.type.toLowerCase()]) throw "Unsupported geometry type: " + e.type;
            try {
                t = this.parseCoords[e.type.toLowerCase()].apply(this, [ e.coordinates ]);
            } catch (e) {
                throw e;
            }
        }
        return this.internalProjection && this.externalProjection && !i && t.transform(this.externalProjection, this.internalProjection), 
        t;
    },
    "parseCoords": {
        "point": function(e) {
            if (0 == this.ignoreExtraDims && 2 != e.length) throw "Only 2D points are supported: " + e;
            return new OpenLayers.Geometry.Point(e[0], e[1]);
        },
        "multipoint": function(e) {
            for (var t = [], i = null, n = 0, r = e.length; n < r; ++n) {
                try {
                    i = this.parseCoords.point.apply(this, [ e[n] ]);
                } catch (e) {
                    throw e;
                }
                t.push(i);
            }
            return new OpenLayers.Geometry.MultiPoint(t);
        },
        "linestring": function(e) {
            for (var t = [], i = null, n = 0, r = e.length; n < r; ++n) {
                try {
                    i = this.parseCoords.point.apply(this, [ e[n] ]);
                } catch (e) {
                    throw e;
                }
                t.push(i);
            }
            return new OpenLayers.Geometry.LineString(t);
        },
        "multilinestring": function(e) {
            for (var t = [], i = null, n = 0, r = e.length; n < r; ++n) {
                try {
                    i = this.parseCoords.linestring.apply(this, [ e[n] ]);
                } catch (e) {
                    throw e;
                }
                t.push(i);
            }
            return new OpenLayers.Geometry.MultiLineString(t);
        },
        "polygon": function(e) {
            for (var t, i, n = [], r = 0, s = e.length; r < s; ++r) {
                try {
                    i = this.parseCoords.linestring.apply(this, [ e[r] ]);
                } catch (e) {
                    throw e;
                }
                t = new OpenLayers.Geometry.LinearRing(i.components), n.push(t);
            }
            return new OpenLayers.Geometry.Polygon(n);
        },
        "multipolygon": function(e) {
            for (var t = [], i = null, n = 0, r = e.length; n < r; ++n) {
                try {
                    i = this.parseCoords.polygon.apply(this, [ e[n] ]);
                } catch (e) {
                    throw e;
                }
                t.push(i);
            }
            return new OpenLayers.Geometry.MultiPolygon(t);
        },
        "box": function(e) {
            if (2 != e.length) throw "GeoJSON box coordinates must have 2 elements";
            return new OpenLayers.Geometry.Polygon([ new OpenLayers.Geometry.LinearRing([ new OpenLayers.Geometry.Point(e[0][0], e[0][1]), new OpenLayers.Geometry.Point(e[1][0], e[0][1]), new OpenLayers.Geometry.Point(e[1][0], e[1][1]), new OpenLayers.Geometry.Point(e[0][0], e[1][1]), new OpenLayers.Geometry.Point(e[0][0], e[0][1]) ]) ]);
        }
    },
    "write": function(e, t) {
        var i = {
            "type": null
        };
        if (OpenLayers.Util.isArray(e)) {
            i.type = "FeatureCollection";
            var n = e.length;
            i.features = new Array(n);
            for (var r = 0; r < n; ++r) {
                var s = e[r];
                if (!s instanceof OpenLayers.Feature.Vector) throw "FeatureCollection only supports collections of features: " + s;
                i.features[r] = this.extract.feature.apply(this, [ s ]);
            }
        } else 0 == e.CLASS_NAME.indexOf("OpenLayers.Geometry") ? i = this.extract.geometry.apply(this, [ e ]) : e instanceof OpenLayers.Feature.Vector && (i = this.extract.feature.apply(this, [ e ]), 
        e.layer && e.layer.projection && (i.crs = this.createCRSObject(e)));
        return OpenLayers.Format.JSON.prototype.write.apply(this, [ i, t ]);
    },
    "createCRSObject": function(e) {
        var t = e.layer.projection.toString(), i = {};
        if (t.match(/epsg:/i)) {
            var n = parseInt(t.substring(t.indexOf(":") + 1));
            i = 4326 == n ? {
                "type": "name",
                "properties": {
                    "name": "urn:ogc:def:crs:OGC:1.3:CRS84"
                }
            } : {
                "type": "name",
                "properties": {
                    "name": "EPSG:" + n
                }
            };
        }
        return i;
    },
    "extract": {
        "feature": function(e) {
            var t = this.extract.geometry.apply(this, [ e.geometry ]), i = {
                "type": "Feature",
                "properties": e.attributes,
                "geometry": t
            };
            return null != e.fid && (i.id = e.fid), i;
        },
        "geometry": function(e) {
            if (null == e) return null;
            this.internalProjection && this.externalProjection && (e = e.clone()).transform(this.internalProjection, this.externalProjection);
            var t = e.CLASS_NAME.split(".")[2], i = this.extract[t.toLowerCase()].apply(this, [ e ]);
            return "Collection" == t ? {
                "type": "GeometryCollection",
                "geometries": i
            } : {
                "type": t,
                "coordinates": i
            };
        },
        "point": function(e) {
            return [ e.x, e.y ];
        },
        "multipoint": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push(this.extract.point.apply(this, [ e.components[i] ]));
            return t;
        },
        "linestring": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push(this.extract.point.apply(this, [ e.components[i] ]));
            return t;
        },
        "multilinestring": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push(this.extract.linestring.apply(this, [ e.components[i] ]));
            return t;
        },
        "polygon": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push(this.extract.linestring.apply(this, [ e.components[i] ]));
            return t;
        },
        "multipolygon": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push(this.extract.polygon.apply(this, [ e.components[i] ]));
            return t;
        },
        "collection": function(e) {
            for (var t = e.components.length, i = new Array(t), n = 0; n < t; ++n) i[n] = this.extract.geometry.apply(this, [ e.components[n] ]);
            return i;
        }
    },
    "CLASS_NAME": "OpenLayers.Format.GeoJSON"
}), OpenLayers.Format.XML = OpenLayers.Class(OpenLayers.Format, {
    "namespaces": null,
    "namespaceAlias": null,
    "defaultPrefix": null,
    "readers": {},
    "writers": {},
    "xmldom": null,
    "initialize": function(e) {
        OpenLayers.Format.XML.supportActiveX && (this.xmldom = new ActiveXObject("Microsoft.XMLDOM")), 
        OpenLayers.Format.prototype.initialize.apply(this, [ e ]), this.namespaces = OpenLayers.Util.extend({}, this.namespaces), 
        this.namespaceAlias = {};
        for (var t in this.namespaces) this.namespaceAlias[this.namespaces[t]] = t;
    },
    "destroy": function() {
        this.xmldom = null, OpenLayers.Format.prototype.destroy.apply(this, arguments);
    },
    "setNamespace": function(e, t) {
        this.namespaces[e] = t, this.namespaceAlias[t] = e;
    },
    "read": function(e) {
        var t = e.indexOf("<");
        t > 0 && (e = e.substring(t));
        var i = OpenLayers.Util.Try(OpenLayers.Function.bind(function() {
            var t;
            return (t = OpenLayers.Format.XML.supportActiveX && !this.xmldom ? new ActiveXObject("Microsoft.XMLDOM") : this.xmldom).loadXML(e), 
            t;
        }, this), function() {
            return new DOMParser().parseFromString(e, "text/xml");
        }, function() {
            var t = new XMLHttpRequest();
            return t.open("GET", "data:text/xml;charset=utf-8," + encodeURIComponent(e), !1), 
            t.overrideMimeType && t.overrideMimeType("text/xml"), t.send(null), t.responseXML;
        });
        return this.keepData && (this.data = i), i;
    },
    "write": function(e) {
        var t;
        if (this.xmldom) t = e.xml; else {
            var i = new XMLSerializer();
            if (1 == e.nodeType) {
                var n = document.implementation.createDocument("", "", null);
                n.importNode && (e = n.importNode(e, !0)), n.appendChild(e), t = i.serializeToString(n);
            } else t = i.serializeToString(e);
        }
        return t;
    },
    "createElementNS": function(e, t) {
        return this.xmldom ? "string" == typeof e ? this.xmldom.createNode(1, t, e) : this.xmldom.createNode(1, t, "") : document.createElementNS(e, t);
    },
    "createDocumentFragment": function() {
        return this.xmldom ? this.xmldom.createDocumentFragment() : document.createDocumentFragment();
    },
    "createTextNode": function(e) {
        return "string" != typeof e && (e = String(e)), this.xmldom ? this.xmldom.createTextNode(e) : document.createTextNode(e);
    },
    "getElementsByTagNameNS": function(e, t, i) {
        var n = [];
        if (e.getElementsByTagNameNS) n = e.getElementsByTagNameNS(t, i); else for (var r, s, a = e.getElementsByTagName("*"), o = 0, l = a.length; o < l; ++o) s = (r = a[o]).prefix ? r.prefix + ":" + i : i, 
        "*" != i && s != r.nodeName || "*" != t && t != r.namespaceURI || n.push(r);
        return n;
    },
    "getAttributeNodeNS": function(e, t, i) {
        var n = null;
        if (e.getAttributeNodeNS) n = e.getAttributeNodeNS(t, i); else for (var r, s = e.attributes, a = 0, o = s.length; a < o; ++a) if ((r = s[a]).namespaceURI == t && (r.prefix ? r.prefix + ":" + i : i) == r.nodeName) {
            n = r;
            break;
        }
        return n;
    },
    "getAttributeNS": function(e, t, i) {
        var n = "";
        if (e.getAttributeNS) n = e.getAttributeNS(t, i) || ""; else {
            var r = this.getAttributeNodeNS(e, t, i);
            r && (n = r.nodeValue);
        }
        return n;
    },
    "getChildValue": function(e, t) {
        var i = t || "";
        if (e) for (var n = e.firstChild; n; n = n.nextSibling) switch (n.nodeType) {
          case 3:
          case 4:
            i += n.nodeValue;
        }
        return i;
    },
    "isSimpleContent": function(e) {
        for (var t = !0, i = e.firstChild; i; i = i.nextSibling) if (1 === i.nodeType) {
            t = !1;
            break;
        }
        return t;
    },
    "contentType": function(e) {
        for (var t = !1, i = !1, n = OpenLayers.Format.XML.CONTENT_TYPE.EMPTY, r = e.firstChild; r; r = r.nextSibling) {
            switch (r.nodeType) {
              case 1:
                i = !0;
                break;

              case 8:
                break;

              default:
                t = !0;
            }
            if (i && t) break;
        }
        if (i && t) n = OpenLayers.Format.XML.CONTENT_TYPE.MIXED; else {
            if (i) return OpenLayers.Format.XML.CONTENT_TYPE.COMPLEX;
            if (t) return OpenLayers.Format.XML.CONTENT_TYPE.SIMPLE;
        }
        return n;
    },
    "hasAttributeNS": function(e, t, i) {
        return e.hasAttributeNS ? e.hasAttributeNS(t, i) : !!this.getAttributeNodeNS(e, t, i);
    },
    "setAttributeNS": function(e, t, i, n) {
        if (e.setAttributeNS) e.setAttributeNS(t, i, n); else {
            if (!this.xmldom) throw "setAttributeNS not implemented";
            if (t) {
                var r = e.ownerDocument.createNode(2, i, t);
                r.nodeValue = n, e.setAttributeNode(r);
            } else e.setAttribute(i, n);
        }
    },
    "createElementNSPlus": function(e, t) {
        var i = (t = t || {}).uri || this.namespaces[t.prefix];
        if (!i) {
            var n = e.indexOf(":");
            i = this.namespaces[e.substring(0, n)];
        }
        i || (i = this.namespaces[this.defaultPrefix]);
        var r = this.createElementNS(i, e);
        t.attributes && this.setAttributes(r, t.attributes);
        var s = t.value;
        return null != s && r.appendChild(this.createTextNode(s)), r;
    },
    "setAttributes": function(e, t) {
        var i, n;
        for (var r in t) null != t[r] && t[r].toString && (i = t[r].toString(), n = this.namespaces[r.substring(0, r.indexOf(":"))] || null, 
        this.setAttributeNS(e, n, r, i));
    },
    "getFirstElementChild": function(e) {
        if (e.firstElementChild) return e.firstElementChild;
        for (var t = e.firstChild; 1 != t.nodeType && (t = t.nextSibling); ) ;
        return t;
    },
    "readNode": function(e, t) {
        t || (t = {});
        var i = this.readers[e.namespaceURI ? this.namespaceAlias[e.namespaceURI] : this.defaultPrefix];
        if (i) {
            var n = i[e.localName || e.nodeName.split(":").pop()] || i["*"];
            n && n.apply(this, [ e, t ]);
        }
        return t;
    },
    "readChildNodes": function(e, t) {
        t || (t = {});
        for (var i, n = e.childNodes, r = 0, s = n.length; r < s; ++r) 1 == (i = n[r]).nodeType && this.readNode(i, t);
        return t;
    },
    "writeNode": function(e, t, i) {
        var n, r, s = e.indexOf(":");
        s > 0 ? (n = e.substring(0, s), r = e.substring(s + 1)) : (n = i ? this.namespaceAlias[i.namespaceURI] : this.defaultPrefix, 
        r = e);
        var a = this.writers[n][r].apply(this, [ t ]);
        return i && i.appendChild(a), a;
    },
    "getChildEl": function(e, t, i) {
        return e && this.getThisOrNextEl(e.firstChild, t, i);
    },
    "getNextEl": function(e, t, i) {
        return e && this.getThisOrNextEl(e.nextSibling, t, i);
    },
    "getThisOrNextEl": function(e, t, i) {
        e: for (var n = e; n; n = n.nextSibling) switch (n.nodeType) {
          case 1:
            if (!(t && t !== (n.localName || n.nodeName.split(":").pop()) || i && i !== n.namespaceURI)) break e;
            n = null;
            break e;

          case 3:
            if (/^\s*$/.test(n.nodeValue)) break;

          case 4:
          case 6:
          case 12:
          case 10:
          case 11:
            n = null;
            break e;
        }
        return n || null;
    },
    "lookupNamespaceURI": function(e, t) {
        var i = null;
        if (e) if (e.lookupNamespaceURI) i = e.lookupNamespaceURI(t); else e: switch (e.nodeType) {
          case 1:
            if (null !== e.namespaceURI && e.prefix === t) {
                i = e.namespaceURI;
                break e;
            }
            var n = e.attributes.length;
            if (n) for (var r, s = 0; s < n; ++s) {
                if ("xmlns" === (r = e.attributes[s]).prefix && r.name === "xmlns:" + t) {
                    i = r.value || null;
                    break e;
                }
                if ("xmlns" === r.name && null === t) {
                    i = r.value || null;
                    break e;
                }
            }
            i = this.lookupNamespaceURI(e.parentNode, t);
            break e;

          case 2:
            i = this.lookupNamespaceURI(e.ownerElement, t);
            break e;

          case 9:
            i = this.lookupNamespaceURI(e.documentElement, t);
            break e;

          case 6:
          case 12:
          case 10:
          case 11:
            break e;

          default:
            i = this.lookupNamespaceURI(e.parentNode, t);
        }
        return i;
    },
    "getXMLDoc": function() {
        return OpenLayers.Format.XML.document || this.xmldom || (document.implementation && document.implementation.createDocument ? OpenLayers.Format.XML.document = document.implementation.createDocument("", "", null) : !this.xmldom && OpenLayers.Format.XML.supportActiveX && (this.xmldom = new ActiveXObject("Microsoft.XMLDOM"))), 
        OpenLayers.Format.XML.document || this.xmldom;
    },
    "CLASS_NAME": "OpenLayers.Format.XML"
}), OpenLayers.Format.XML.CONTENT_TYPE = {
    "EMPTY": 0,
    "SIMPLE": 1,
    "COMPLEX": 2,
    "MIXED": 3
}, OpenLayers.Format.XML.lookupNamespaceURI = OpenLayers.Function.bind(OpenLayers.Format.XML.prototype.lookupNamespaceURI, OpenLayers.Format.XML.prototype), 
OpenLayers.Format.XML.document = null, OpenLayers.Format.XML.supportActiveX = Object.getOwnPropertyDescriptor && Object.getOwnPropertyDescriptor(window, "ActiveXObject") || "ActiveXObject" in window, 
OpenLayers.Format.OGCExceptionReport = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "ogc": "http://www.opengis.net/ogc"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "defaultPrefix": "ogc",
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var t = {
            "exceptionReport": null
        };
        return e.documentElement && (this.readChildNodes(e, t), null === t.exceptionReport && (t = new OpenLayers.Format.OWSCommon().read(e))), 
        t;
    },
    "readers": {
        "ogc": {
            "ServiceExceptionReport": function(e, t) {
                t.exceptionReport = {
                    "exceptions": []
                }, this.readChildNodes(e, t.exceptionReport);
            },
            "ServiceException": function(e, t) {
                var i = {
                    "code": e.getAttribute("code"),
                    "locator": e.getAttribute("locator"),
                    "text": this.getChildValue(e)
                };
                t.exceptions.push(i);
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.OGCExceptionReport"
}), OpenLayers.Format.XML.VersionedOGC = OpenLayers.Class(OpenLayers.Format.XML, {
    "defaultVersion": null,
    "version": null,
    "profile": null,
    "allowFallback": !1,
    "name": null,
    "stringifyOutput": !1,
    "parser": null,
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
        var t = this.CLASS_NAME;
        this.name = t.substring(t.lastIndexOf(".") + 1);
    },
    "getVersion": function(e, t) {
        var i;
        return e ? (i = this.version) || (i = e.getAttribute("version")) || (i = this.defaultVersion) : i = t && t.version || this.version || this.defaultVersion, 
        i;
    },
    "getParser": function(e) {
        e = e || this.defaultVersion;
        var t = this.profile ? "_" + this.profile : "";
        if (!this.parser || this.parser.VERSION != e) {
            var i = OpenLayers.Format[this.name]["v" + e.replace(/\./g, "_") + t];
            if (!i && ("" !== t && this.allowFallback && (t = "", i = OpenLayers.Format[this.name]["v" + e.replace(/\./g, "_")]), 
            !i)) throw "Can't find a " + this.name + " parser for version " + e + t;
            this.parser = new i(this.options);
        }
        return this.parser;
    },
    "write": function(e, t) {
        var i = this.getVersion(null, t);
        this.parser = this.getParser(i);
        var n = this.parser.write(e, t);
        return !1 === this.stringifyOutput ? n : OpenLayers.Format.XML.prototype.write.apply(this, [ n ]);
    },
    "read": function(e, t) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var i = e.documentElement, n = this.getVersion(i);
        this.parser = this.getParser(n);
        var r = this.parser.read(e, t), s = this.parser.errorProperty || null;
        if (null !== s && void 0 === r[s]) {
            var a = new OpenLayers.Format.OGCExceptionReport();
            r.error = a.read(e);
        }
        return r.version = n, r.requestType = this.name, r;
    },
    "CLASS_NAME": "OpenLayers.Format.XML.VersionedOGC"
}), OpenLayers.Format.OWSCommon = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.0.0",
    "getVersion": function(e, t) {
        var i = this.version;
        if (!i) {
            var n = e.getAttribute("xmlns:ows");
            n && "1.1" === n.substring(n.lastIndexOf("/") + 1) && (i = "1.1.0"), i || (i = this.defaultVersion);
        }
        return i;
    },
    "CLASS_NAME": "OpenLayers.Format.OWSCommon"
}), OpenLayers.Format.OWSCommon.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "read": function(e, t) {
        t = OpenLayers.Util.applyDefaults(t, this.options);
        var i = {};
        return this.readChildNodes(e, i), i;
    },
    "readers": {
        "ows": {
            "Exception": function(e, t) {
                var i = {
                    "code": e.getAttribute("exceptionCode"),
                    "locator": e.getAttribute("locator"),
                    "texts": []
                };
                t.exceptions.push(i), this.readChildNodes(e, i);
            },
            "ExceptionText": function(e, t) {
                var i = this.getChildValue(e);
                t.texts.push(i);
            },
            "ServiceIdentification": function(e, t) {
                t.serviceIdentification = {}, this.readChildNodes(e, t.serviceIdentification);
            },
            "Title": function(e, t) {
                t.title = this.getChildValue(e);
            },
            "Abstract": function(e, t) {
                t.abstract = this.getChildValue(e);
            },
            "Keywords": function(e, t) {
                t.keywords = {}, this.readChildNodes(e, t.keywords);
            },
            "Keyword": function(e, t) {
                t[this.getChildValue(e)] = !0;
            },
            "ServiceType": function(e, t) {
                t.serviceType = {
                    "codeSpace": e.getAttribute("codeSpace"),
                    "value": this.getChildValue(e)
                };
            },
            "ServiceTypeVersion": function(e, t) {
                t.serviceTypeVersion = this.getChildValue(e);
            },
            "Fees": function(e, t) {
                t.fees = this.getChildValue(e);
            },
            "AccessConstraints": function(e, t) {
                t.accessConstraints = this.getChildValue(e);
            },
            "ServiceProvider": function(e, t) {
                t.serviceProvider = {}, this.readChildNodes(e, t.serviceProvider);
            },
            "ProviderName": function(e, t) {
                t.providerName = this.getChildValue(e);
            },
            "ProviderSite": function(e, t) {
                t.providerSite = this.getAttributeNS(e, this.namespaces.xlink, "href");
            },
            "ServiceContact": function(e, t) {
                t.serviceContact = {}, this.readChildNodes(e, t.serviceContact);
            },
            "IndividualName": function(e, t) {
                t.individualName = this.getChildValue(e);
            },
            "PositionName": function(e, t) {
                t.positionName = this.getChildValue(e);
            },
            "ContactInfo": function(e, t) {
                t.contactInfo = {}, this.readChildNodes(e, t.contactInfo);
            },
            "Phone": function(e, t) {
                t.phone = {}, this.readChildNodes(e, t.phone);
            },
            "Voice": function(e, t) {
                t.voice = this.getChildValue(e);
            },
            "Facsimile": function(e, t) {
                t.facsimile = this.getChildValue(e);
            },
            "Address": function(e, t) {
                t.address = {}, this.readChildNodes(e, t.address);
            },
            "DeliveryPoint": function(e, t) {
                t.deliveryPoint = this.getChildValue(e);
            },
            "City": function(e, t) {
                t.city = this.getChildValue(e);
            },
            "AdministrativeArea": function(e, t) {
                t.administrativeArea = this.getChildValue(e);
            },
            "PostalCode": function(e, t) {
                t.postalCode = this.getChildValue(e);
            },
            "Country": function(e, t) {
                t.country = this.getChildValue(e);
            },
            "ElectronicMailAddress": function(e, t) {
                t.electronicMailAddress = this.getChildValue(e);
            },
            "Role": function(e, t) {
                t.role = this.getChildValue(e);
            },
            "OperationsMetadata": function(e, t) {
                t.operationsMetadata = {}, this.readChildNodes(e, t.operationsMetadata);
            },
            "Operation": function(e, t) {
                var i = e.getAttribute("name");
                t[i] = {}, this.readChildNodes(e, t[i]);
            },
            "DCP": function(e, t) {
                t.dcp = {}, this.readChildNodes(e, t.dcp);
            },
            "HTTP": function(e, t) {
                t.http = {}, this.readChildNodes(e, t.http);
            },
            "Get": function(e, t) {
                t.get || (t.get = []);
                var i = {
                    "url": this.getAttributeNS(e, this.namespaces.xlink, "href")
                };
                this.readChildNodes(e, i), t.get.push(i);
            },
            "Post": function(e, t) {
                t.post || (t.post = []);
                var i = {
                    "url": this.getAttributeNS(e, this.namespaces.xlink, "href")
                };
                this.readChildNodes(e, i), t.post.push(i);
            },
            "Parameter": function(e, t) {
                t.parameters || (t.parameters = {});
                var i = e.getAttribute("name");
                t.parameters[i] = {}, this.readChildNodes(e, t.parameters[i]);
            },
            "Constraint": function(e, t) {
                t.constraints || (t.constraints = {});
                var i = e.getAttribute("name");
                t.constraints[i] = {}, this.readChildNodes(e, t.constraints[i]);
            },
            "Value": function(e, t) {
                t[this.getChildValue(e)] = !0;
            },
            "OutputFormat": function(e, t) {
                t.formats.push({
                    "value": this.getChildValue(e)
                }), this.readChildNodes(e, t);
            },
            "WGS84BoundingBox": function(e, t) {
                var i = {};
                i.crs = e.getAttribute("crs"), t.BoundingBox ? t.BoundingBox.push(i) : (t.projection = i.crs, 
                i = t), this.readChildNodes(e, i);
            },
            "BoundingBox": function(e, t) {
                this.readers.ows.WGS84BoundingBox.apply(this, [ e, t ]);
            },
            "LowerCorner": function(e, t) {
                var i = this.getChildValue(e).replace(this.regExes.trimSpace, ""), n = (i = i.replace(this.regExes.trimComma, ",")).split(this.regExes.splitSpace);
                t.left = n[0], t.bottom = n[1];
            },
            "UpperCorner": function(e, t) {
                var i = this.getChildValue(e).replace(this.regExes.trimSpace, ""), n = (i = i.replace(this.regExes.trimComma, ",")).split(this.regExes.splitSpace);
                t.right = n[0], t.top = n[1], t.bounds = new OpenLayers.Bounds(t.left, t.bottom, t.right, t.top), 
                delete t.left, delete t.bottom, delete t.right, delete t.top;
            },
            "Language": function(e, t) {
                t.language = this.getChildValue(e);
            }
        }
    },
    "writers": {
        "ows": {
            "BoundingBox": function(e, t) {
                var i = this.createElementNSPlus(t || "ows:BoundingBox", {
                    "attributes": {
                        "crs": e.projection
                    }
                });
                return this.writeNode("ows:LowerCorner", e, i), this.writeNode("ows:UpperCorner", e, i), 
                i;
            },
            "LowerCorner": function(e) {
                return this.createElementNSPlus("ows:LowerCorner", {
                    "value": e.bounds.left + " " + e.bounds.bottom
                });
            },
            "UpperCorner": function(e) {
                return this.createElementNSPlus("ows:UpperCorner", {
                    "value": e.bounds.right + " " + e.bounds.top
                });
            },
            "Identifier": function(e) {
                return this.createElementNSPlus("ows:Identifier", {
                    "value": e
                });
            },
            "Title": function(e) {
                return this.createElementNSPlus("ows:Title", {
                    "value": e
                });
            },
            "Abstract": function(e) {
                return this.createElementNSPlus("ows:Abstract", {
                    "value": e
                });
            },
            "OutputFormat": function(e) {
                return this.createElementNSPlus("ows:OutputFormat", {
                    "value": e
                });
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.OWSCommon.v1"
}), OpenLayers.Format.OWSCommon.v1_1_0 = OpenLayers.Class(OpenLayers.Format.OWSCommon.v1, {
    "namespaces": {
        "ows": "http://www.opengis.net/ows/1.1",
        "xlink": "http://www.w3.org/1999/xlink"
    },
    "readers": {
        "ows": OpenLayers.Util.applyDefaults({
            "ExceptionReport": function(e, t) {
                t.exceptionReport = {
                    "version": e.getAttribute("version"),
                    "language": e.getAttribute("xml:lang"),
                    "exceptions": []
                }, this.readChildNodes(e, t.exceptionReport);
            },
            "AllowedValues": function(e, t) {
                t.allowedValues = {}, this.readChildNodes(e, t.allowedValues);
            },
            "AnyValue": function(e, t) {
                t.anyValue = !0;
            },
            "DataType": function(e, t) {
                t.dataType = this.getChildValue(e);
            },
            "Range": function(e, t) {
                t.range = {}, this.readChildNodes(e, t.range);
            },
            "MinimumValue": function(e, t) {
                t.minValue = this.getChildValue(e);
            },
            "MaximumValue": function(e, t) {
                t.maxValue = this.getChildValue(e);
            },
            "Identifier": function(e, t) {
                t.identifier = this.getChildValue(e);
            },
            "SupportedCRS": function(e, t) {
                t.supportedCRS = this.getChildValue(e);
            }
        }, OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)
    },
    "writers": {
        "ows": OpenLayers.Util.applyDefaults({
            "Range": function(e) {
                var t = this.createElementNSPlus("ows:Range", {
                    "attributes": {
                        "ows:rangeClosure": e.closure
                    }
                });
                return this.writeNode("ows:MinimumValue", e.minValue, t), this.writeNode("ows:MaximumValue", e.maxValue, t), 
                t;
            },
            "MinimumValue": function(e) {
                return this.createElementNSPlus("ows:MinimumValue", {
                    "value": e
                });
            },
            "MaximumValue": function(e) {
                return this.createElementNSPlus("ows:MaximumValue", {
                    "value": e
                });
            },
            "Value": function(e) {
                return this.createElementNSPlus("ows:Value", {
                    "value": e
                });
            }
        }, OpenLayers.Format.OWSCommon.v1.prototype.writers.ows)
    },
    "CLASS_NAME": "OpenLayers.Format.OWSCommon.v1_1_0"
}), OpenLayers.Format.WCSGetCoverage = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "ows": "http://www.opengis.net/ows/1.1",
        "wcs": "http://www.opengis.net/wcs/1.1",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "VERSION": "1.1.2",
    "schemaLocation": "http://www.opengis.net/wcs/1.1 http://schemas.opengis.net/wcs/1.1/wcsGetCoverage.xsd",
    "write": function(e) {
        var t = this.writeNode("wcs:GetCoverage", e);
        return this.setAttributeNS(t, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "writers": {
        "wcs": {
            "GetCoverage": function(e) {
                var t = this.createElementNSPlus("wcs:GetCoverage", {
                    "attributes": {
                        "version": e.version || this.VERSION,
                        "service": "WCS"
                    }
                });
                return this.writeNode("ows:Identifier", e.identifier, t), this.writeNode("wcs:DomainSubset", e.domainSubset, t), 
                this.writeNode("wcs:Output", e.output, t), t;
            },
            "DomainSubset": function(e) {
                var t = this.createElementNSPlus("wcs:DomainSubset", {});
                return this.writeNode("ows:BoundingBox", e.boundingBox, t), e.temporalSubset && this.writeNode("wcs:TemporalSubset", e.temporalSubset, t), 
                t;
            },
            "TemporalSubset": function(e) {
                for (var t = this.createElementNSPlus("wcs:TemporalSubset", {}), i = 0, n = e.timePeriods.length; i < n; ++i) this.writeNode("wcs:TimePeriod", e.timePeriods[i], t);
                return t;
            },
            "TimePeriod": function(e) {
                var t = this.createElementNSPlus("wcs:TimePeriod", {});
                return this.writeNode("wcs:BeginPosition", e.begin, t), this.writeNode("wcs:EndPosition", e.end, t), 
                e.resolution && this.writeNode("wcs:TimeResolution", e.resolution, t), t;
            },
            "BeginPosition": function(e) {
                return this.createElementNSPlus("wcs:BeginPosition", {
                    "value": e
                });
            },
            "EndPosition": function(e) {
                return this.createElementNSPlus("wcs:EndPosition", {
                    "value": e
                });
            },
            "TimeResolution": function(e) {
                return this.createElementNSPlus("wcs:TimeResolution", {
                    "value": e
                });
            },
            "Output": function(e) {
                var t = this.createElementNSPlus("wcs:Output", {
                    "attributes": {
                        "format": e.format,
                        "store": e.store
                    }
                });
                return e.gridCRS && this.writeNode("wcs:GridCRS", e.gridCRS, t), t;
            },
            "GridCRS": function(e) {
                var t = this.createElementNSPlus("wcs:GridCRS", {});
                return this.writeNode("wcs:GridBaseCRS", e.baseCRS, t), e.type && this.writeNode("wcs:GridType", e.type, t), 
                e.origin && this.writeNode("wcs:GridOrigin", e.origin, t), this.writeNode("wcs:GridOffsets", e.offsets, t), 
                e.CS && this.writeNode("wcs:GridCS", e.CS, t), t;
            },
            "GridBaseCRS": function(e) {
                return this.createElementNSPlus("wcs:GridBaseCRS", {
                    "value": e
                });
            },
            "GridOrigin": function(e) {
                return this.createElementNSPlus("wcs:GridOrigin", {
                    "value": e
                });
            },
            "GridType": function(e) {
                return this.createElementNSPlus("wcs:GridType", {
                    "value": e
                });
            },
            "GridOffsets": function(e) {
                return this.createElementNSPlus("wcs:GridOffsets", {
                    "value": e
                });
            },
            "GridCS": function(e) {
                return this.createElementNSPlus("wcs:GridCS", {
                    "value": e
                });
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WCSGetCoverage"
}), OpenLayers.Format.WFST = function(e) {
    e = OpenLayers.Util.applyDefaults(e, OpenLayers.Format.WFST.DEFAULTS);
    var t = OpenLayers.Format.WFST["v" + e.version.replace(/\./g, "_")];
    if (!t) throw "Unsupported WFST version: " + e.version;
    return new t(e);
}, OpenLayers.Format.WFST.DEFAULTS = {
    "version": "1.0.0"
}, OpenLayers.Filter.Spatial = OpenLayers.Class(OpenLayers.Filter, {
    "type": null,
    "property": null,
    "value": null,
    "distance": null,
    "distanceUnits": null,
    "evaluate": function(e) {
        var t = !1;
        switch (this.type) {
          case OpenLayers.Filter.Spatial.BBOX:
          case OpenLayers.Filter.Spatial.INTERSECTS:
            if (e.geometry) {
                var i = this.value;
                "OpenLayers.Bounds" == this.value.CLASS_NAME && (i = this.value.toGeometry()), e.geometry.intersects(i) && (t = !0);
            }
            break;

          default:
            throw new Error("evaluate is not implemented for this filter type.");
        }
        return t;
    },
    "clone": function() {
        var e = OpenLayers.Util.applyDefaults({
            "value": this.value && this.value.clone && this.value.clone()
        }, this);
        return new OpenLayers.Filter.Spatial(e);
    },
    "CLASS_NAME": "OpenLayers.Filter.Spatial"
}), OpenLayers.Filter.Spatial.BBOX = "BBOX", OpenLayers.Filter.Spatial.INTERSECTS = "INTERSECTS", 
OpenLayers.Filter.Spatial.DWITHIN = "DWITHIN", OpenLayers.Filter.Spatial.WITHIN = "WITHIN", 
OpenLayers.Filter.Spatial.CONTAINS = "CONTAINS", OpenLayers.Filter.FeatureId = OpenLayers.Class(OpenLayers.Filter, {
    "fids": null,
    "type": "FID",
    "initialize": function(e) {
        this.fids = [], OpenLayers.Filter.prototype.initialize.apply(this, [ e ]);
    },
    "evaluate": function(e) {
        for (var t = 0, i = this.fids.length; t < i; t++) if ((e.fid || e.id) == this.fids[t]) return !0;
        return !1;
    },
    "clone": function() {
        var e = new OpenLayers.Filter.FeatureId();
        return OpenLayers.Util.extend(e, this), e.fids = this.fids.slice(), e;
    },
    "CLASS_NAME": "OpenLayers.Filter.FeatureId"
}), OpenLayers.Format.WFST.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "wfs": "http://www.opengis.net/wfs",
        "gml": "http://www.opengis.net/gml",
        "ogc": "http://www.opengis.net/ogc",
        "ows": "http://www.opengis.net/ows",
        "xmlns": "http://www.w3.org/2000/xmlns/"
    },
    "defaultPrefix": "wfs",
    "version": null,
    "schemaLocations": null,
    "srsName": null,
    "extractAttributes": !0,
    "xy": !0,
    "stateName": null,
    "initialize": function(e) {
        this.stateName = {}, this.stateName[OpenLayers.State.INSERT] = "wfs:Insert", this.stateName[OpenLayers.State.UPDATE] = "wfs:Update", 
        this.stateName[OpenLayers.State.DELETE] = "wfs:Delete", OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "getSrsName": function(e, t) {
        var i = t && t.srsName;
        return i || (i = e && e.layer ? e.layer.projection.getCode() : this.srsName), i;
    },
    "read": function(e, t) {
        t = t || {}, OpenLayers.Util.applyDefaults(t, {
            "output": "features"
        }), "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var i = {};
        return e && this.readNode(e, i, !0), i.features && "features" === t.output && (i = i.features), 
        i;
    },
    "readers": {
        "wfs": {
            "FeatureCollection": function(e, t) {
                t.features = [], this.readChildNodes(e, t);
            }
        }
    },
    "write": function(e, t) {
        var i = this.writeNode("wfs:Transaction", {
            "features": e,
            "options": t
        }), n = this.schemaLocationAttr();
        return n && this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", n), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "writers": {
        "wfs": {
            "GetFeature": function(e) {
                var t = this.createElementNSPlus("wfs:GetFeature", {
                    "attributes": {
                        "service": "WFS",
                        "version": this.version,
                        "handle": e && e.handle,
                        "outputFormat": e && e.outputFormat,
                        "maxFeatures": e && e.maxFeatures,
                        "viewParams": e && e.viewParams,
                        "xsi:schemaLocation": this.schemaLocationAttr(e)
                    }
                });
                if ("string" == typeof this.featureType) this.writeNode("Query", e, t); else for (var i = 0, n = this.featureType.length; i < n; i++) e.featureType = this.featureType[i], 
                this.writeNode("Query", e, t);
                return t;
            },
            "Transaction": function(e) {
                var t, i, n = (e = e || {}).options || {}, r = this.createElementNSPlus("wfs:Transaction", {
                    "attributes": {
                        "service": "WFS",
                        "version": this.version,
                        "handle": n.handle
                    }
                }), s = e.features;
                if (s) {
                    !0 === n.multi && OpenLayers.Util.extend(this.geometryTypes, {
                        "OpenLayers.Geometry.Point": "MultiPoint",
                        "OpenLayers.Geometry.LineString": !0 === this.multiCurve ? "MultiCurve" : "MultiLineString",
                        "OpenLayers.Geometry.Polygon": !0 === this.multiSurface ? "MultiSurface" : "MultiPolygon"
                    });
                    var a, o;
                    for (t = 0, i = s.length; t < i; ++t) o = s[t], (a = this.stateName[o.state]) && this.writeNode(a, {
                        "feature": o,
                        "options": n
                    }, r);
                    !0 === n.multi && this.setGeometryTypes();
                }
                if (n.nativeElements) for (t = 0, i = n.nativeElements.length; t < i; ++t) this.writeNode("wfs:Native", n.nativeElements[t], r);
                return r;
            },
            "Native": function(e) {
                return this.createElementNSPlus("wfs:Native", {
                    "attributes": {
                        "vendorId": e.vendorId,
                        "safeToIgnore": e.safeToIgnore
                    },
                    "value": e.value
                });
            },
            "Insert": function(e) {
                var t = e.feature, i = e.options, n = this.createElementNSPlus("wfs:Insert", {
                    "attributes": {
                        "handle": i && i.handle
                    }
                });
                return this.srsName = this.getSrsName(t), this.writeNode("feature:_typeName", t, n), 
                n;
            },
            "Update": function(e) {
                var t = e.feature, i = e.options, n = this.createElementNSPlus("wfs:Update", {
                    "attributes": {
                        "handle": i && i.handle,
                        "typeName": (this.featureNS ? this.featurePrefix + ":" : "") + this.featureType
                    }
                });
                this.featureNS && this.setAttributeNS(n, this.namespaces.xmlns, "xmlns:" + this.featurePrefix, this.featureNS);
                var r = t.modified;
                null === this.geometryName || r && void 0 === r.geometry || (this.srsName = this.getSrsName(t), 
                this.writeNode("Property", {
                    "name": this.geometryName,
                    "value": t.geometry
                }, n));
                for (var s in t.attributes) void 0 === t.attributes[s] || r && r.attributes && !(r.attributes && s in r.attributes) || this.writeNode("Property", {
                    "name": s,
                    "value": t.attributes[s]
                }, n);
                return this.writeNode("ogc:Filter", new OpenLayers.Filter.FeatureId({
                    "fids": [ t.fid ]
                }), n), n;
            },
            "Property": function(e) {
                var t = this.createElementNSPlus("wfs:Property");
                return this.writeNode("Name", e.name, t), null !== e.value && this.writeNode("Value", e.value, t), 
                t;
            },
            "Name": function(e) {
                return this.createElementNSPlus("wfs:Name", {
                    "value": e
                });
            },
            "Value": function(e) {
                var t;
                if (e instanceof OpenLayers.Geometry) {
                    t = this.createElementNSPlus("wfs:Value");
                    var i = this.writeNode("feature:_geometry", e).firstChild;
                    t.appendChild(i);
                } else t = this.createElementNSPlus("wfs:Value", {
                    "value": e
                });
                return t;
            },
            "Delete": function(e) {
                var t = e.feature, i = e.options, n = this.createElementNSPlus("wfs:Delete", {
                    "attributes": {
                        "handle": i && i.handle,
                        "typeName": (this.featureNS ? this.featurePrefix + ":" : "") + this.featureType
                    }
                });
                return this.featureNS && this.setAttributeNS(n, this.namespaces.xmlns, "xmlns:" + this.featurePrefix, this.featureNS), 
                this.writeNode("ogc:Filter", new OpenLayers.Filter.FeatureId({
                    "fids": [ t.fid ]
                }), n), n;
            }
        }
    },
    "schemaLocationAttr": function(e) {
        e = OpenLayers.Util.extend({
            "featurePrefix": this.featurePrefix,
            "schema": this.schema
        }, e);
        var t = OpenLayers.Util.extend({}, this.schemaLocations);
        e.schema && (t[e.featurePrefix] = e.schema);
        var i, n = [];
        for (var r in t) (i = this.namespaces[r]) && n.push(i + " " + t[r]);
        return n.join(" ") || void 0;
    },
    "setFilterProperty": function(e) {
        if (e.filters) for (var t = 0, i = e.filters.length; t < i; ++t) OpenLayers.Format.WFST.v1.prototype.setFilterProperty.call(this, e.filters[t]); else e instanceof OpenLayers.Filter.Spatial && !e.property && (e.property = this.geometryName);
    },
    "CLASS_NAME": "OpenLayers.Format.WFST.v1"
}), OpenLayers.Filter.Logical = OpenLayers.Class(OpenLayers.Filter, {
    "filters": null,
    "type": null,
    "initialize": function(e) {
        this.filters = [], OpenLayers.Filter.prototype.initialize.apply(this, [ e ]);
    },
    "destroy": function() {
        this.filters = null, OpenLayers.Filter.prototype.destroy.apply(this);
    },
    "evaluate": function(e) {
        var t, i;
        switch (this.type) {
          case OpenLayers.Filter.Logical.AND:
            for (t = 0, i = this.filters.length; t < i; t++) if (0 == this.filters[t].evaluate(e)) return !1;
            return !0;

          case OpenLayers.Filter.Logical.OR:
            for (t = 0, i = this.filters.length; t < i; t++) if (1 == this.filters[t].evaluate(e)) return !0;
            return !1;

          case OpenLayers.Filter.Logical.NOT:
            return !this.filters[0].evaluate(e);
        }
    },
    "clone": function() {
        for (var e = [], t = 0, i = this.filters.length; t < i; ++t) e.push(this.filters[t].clone());
        return new OpenLayers.Filter.Logical({
            "type": this.type,
            "filters": e
        });
    },
    "CLASS_NAME": "OpenLayers.Filter.Logical"
}), OpenLayers.Filter.Logical.AND = "&&", OpenLayers.Filter.Logical.OR = "||", OpenLayers.Filter.Logical.NOT = "!", 
OpenLayers.Filter.Comparison = OpenLayers.Class(OpenLayers.Filter, {
    "type": null,
    "property": null,
    "value": null,
    "matchCase": !0,
    "lowerBoundary": null,
    "upperBoundary": null,
    "initialize": function(e) {
        OpenLayers.Filter.prototype.initialize.apply(this, [ e ]), this.type === OpenLayers.Filter.Comparison.LIKE && void 0 === e.matchCase && (this.matchCase = null);
    },
    "evaluate": function(e) {
        e instanceof OpenLayers.Feature.Vector && (e = e.attributes);
        var t = !1, i = e[this.property];
        if (void 0 === i) return !1;
        var n;
        switch (this.type) {
          case OpenLayers.Filter.Comparison.EQUAL_TO:
            n = this.value, t = this.matchCase || "string" != typeof i || "string" != typeof n ? i == n : i.toUpperCase() == n.toUpperCase();
            break;

          case OpenLayers.Filter.Comparison.NOT_EQUAL_TO:
            n = this.value, t = this.matchCase || "string" != typeof i || "string" != typeof n ? i != n : i.toUpperCase() != n.toUpperCase();
            break;

          case OpenLayers.Filter.Comparison.LESS_THAN:
            t = i < this.value;
            break;

          case OpenLayers.Filter.Comparison.GREATER_THAN:
            t = i > this.value;
            break;

          case OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO:
            t = i <= this.value;
            break;

          case OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO:
            t = i >= this.value;
            break;

          case OpenLayers.Filter.Comparison.BETWEEN:
            t = i >= this.lowerBoundary && i <= this.upperBoundary;
            break;

          case OpenLayers.Filter.Comparison.LIKE:
            t = new RegExp(this.value, "gi").test(i);
            break;

          case OpenLayers.Filter.Comparison.IS_NULL:
            t = null === i;
        }
        return t;
    },
    "value2regex": function(e, t, i) {
        if ("." == e) throw new Error("'.' is an unsupported wildCard character for OpenLayers.Filter.Comparison");
        return e = e || "*", t = t || ".", i = i || "!", this.value = this.value.replace(new RegExp("\\" + i + "(.|$)", "g"), "\\$1"), 
        this.value = this.value.replace(new RegExp("\\" + t, "g"), "."), this.value = this.value.replace(new RegExp("\\" + e, "g"), ".*"), 
        this.value = this.value.replace(new RegExp("\\\\.\\*", "g"), "\\" + e), this.value = this.value.replace(new RegExp("\\\\\\.", "g"), "\\" + t), 
        this.value;
    },
    "regex2value": function() {
        var e = this.value;
        return e = e.replace(/!/g, "!!"), e = e.replace(/(\\)?\\\./g, function(e, t) {
            return t ? e : "!.";
        }), e = e.replace(/(\\)?\\\*/g, function(e, t) {
            return t ? e : "!*";
        }), e = e.replace(/\\\\/g, "\\"), e = e.replace(/\.\*/g, "*");
    },
    "clone": function() {
        return OpenLayers.Util.extend(new OpenLayers.Filter.Comparison(), this);
    },
    "CLASS_NAME": "OpenLayers.Filter.Comparison"
}), OpenLayers.Filter.Comparison.EQUAL_TO = "==", OpenLayers.Filter.Comparison.NOT_EQUAL_TO = "!=", 
OpenLayers.Filter.Comparison.LESS_THAN = "<", OpenLayers.Filter.Comparison.GREATER_THAN = ">", 
OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO = "<=", OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO = ">=", 
OpenLayers.Filter.Comparison.BETWEEN = "..", OpenLayers.Filter.Comparison.LIKE = "~", 
OpenLayers.Filter.Comparison.IS_NULL = "NULL", OpenLayers.Format.Filter = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.0.0",
    "CLASS_NAME": "OpenLayers.Format.Filter"
}), OpenLayers.Filter.Function = OpenLayers.Class(OpenLayers.Filter, {
    "name": null,
    "params": null,
    "CLASS_NAME": "OpenLayers.Filter.Function"
}), OpenLayers.Date = {
    "dateRegEx": /^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/,
    "toISOString": "toISOString" in Date.prototype ? function(e) {
        return e.toISOString();
    } : function(e) {
        return isNaN(e.getTime()) ? "Invalid Date" : e.getUTCFullYear() + "-" + OpenLayers.Number.zeroPad(e.getUTCMonth() + 1, 2) + "-" + OpenLayers.Number.zeroPad(e.getUTCDate(), 2) + "T" + OpenLayers.Number.zeroPad(e.getUTCHours(), 2) + ":" + OpenLayers.Number.zeroPad(e.getUTCMinutes(), 2) + ":" + OpenLayers.Number.zeroPad(e.getUTCSeconds(), 2) + "." + OpenLayers.Number.zeroPad(e.getUTCMilliseconds(), 3) + "Z";
    },
    "parse": function(e) {
        var t, i = e.match(this.dateRegEx);
        if (i && (i[1] || i[7])) {
            var n = parseInt(i[1], 10) || 0, r = parseInt(i[2], 10) - 1 || 0, s = parseInt(i[3], 10) || 1;
            t = new Date(Date.UTC(n, r, s));
            var a = i[7];
            if (a) {
                var o = parseInt(i[4], 10), l = parseInt(i[5], 10), h = parseFloat(i[6]), u = 0 | h, p = Math.round(1e3 * (h - u));
                if (t.setUTCHours(o, l, u, p), "Z" !== a) {
                    var c = -1e3 * (60 * parseInt(a, 10) * 60 + 60 * (parseInt(i[8], 10) || 0));
                    t = new Date(t.getTime() + c);
                }
            }
        } else t = new Date("invalid");
        return t;
    }
}, OpenLayers.Format.Filter.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "ogc": "http://www.opengis.net/ogc",
        "gml": "http://www.opengis.net/gml",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "defaultPrefix": "ogc",
    "schemaLocation": null,
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        var t = {};
        return this.readers.ogc.Filter.apply(this, [ e, t ]), t.filter;
    },
    "readers": {
        "ogc": {
            "_expression": function(e) {
                for (var t, i = "", n = e.firstChild; n; n = n.nextSibling) switch (n.nodeType) {
                  case 1:
                    (t = this.readNode(n)).property ? i += "${" + t.property + "}" : void 0 !== t.value && (i += t.value);
                    break;

                  case 3:
                  case 4:
                    i += n.nodeValue;
                }
                return i;
            },
            "Filter": function(e, t) {
                var i = {
                    "fids": [],
                    "filters": []
                };
                this.readChildNodes(e, i), i.fids.length > 0 ? t.filter = new OpenLayers.Filter.FeatureId({
                    "fids": i.fids
                }) : i.filters.length > 0 && (t.filter = i.filters[0]);
            },
            "FeatureId": function(e, t) {
                var i = e.getAttribute("fid");
                i && t.fids.push(i);
            },
            "And": function(e, t) {
                var i = new OpenLayers.Filter.Logical({
                    "type": OpenLayers.Filter.Logical.AND
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "Or": function(e, t) {
                var i = new OpenLayers.Filter.Logical({
                    "type": OpenLayers.Filter.Logical.OR
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "Not": function(e, t) {
                var i = new OpenLayers.Filter.Logical({
                    "type": OpenLayers.Filter.Logical.NOT
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsLessThan": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.LESS_THAN
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsGreaterThan": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.GREATER_THAN
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsLessThanOrEqualTo": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsGreaterThanOrEqualTo": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsBetween": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.BETWEEN
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "Literal": function(e, t) {
                t.value = OpenLayers.String.numericIf(this.getChildValue(e), !0);
            },
            "PropertyName": function(e, t) {
                t.property = this.getChildValue(e);
            },
            "LowerBoundary": function(e, t) {
                t.lowerBoundary = OpenLayers.String.numericIf(this.readers.ogc._expression.call(this, e), !0);
            },
            "UpperBoundary": function(e, t) {
                t.upperBoundary = OpenLayers.String.numericIf(this.readers.ogc._expression.call(this, e), !0);
            },
            "Intersects": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.INTERSECTS);
            },
            "Within": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.WITHIN);
            },
            "Contains": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.CONTAINS);
            },
            "DWithin": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.DWITHIN);
            },
            "Distance": function(e, t) {
                t.distance = parseInt(this.getChildValue(e)), t.distanceUnits = e.getAttribute("units");
            },
            "Function": function(e, t) {},
            "PropertyIsNull": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.IS_NULL
                });
                this.readChildNodes(e, i), t.filters.push(i);
            }
        }
    },
    "readSpatial": function(e, t, i) {
        var n = new OpenLayers.Filter.Spatial({
            "type": i
        });
        this.readChildNodes(e, n), n.value = n.components[0], delete n.components, t.filters.push(n);
    },
    "encodeLiteral": function(e) {
        return e instanceof Date && (e = OpenLayers.Date.toISOString(e)), e;
    },
    "writeOgcExpression": function(e, t) {
        return e instanceof OpenLayers.Filter.Function ? this.writeNode("Function", e, t) : this.writeNode("Literal", e, t), 
        t;
    },
    "write": function(e) {
        return this.writers.ogc.Filter.apply(this, [ e ]);
    },
    "writers": {
        "ogc": {
            "Filter": function(e) {
                var t = this.createElementNSPlus("ogc:Filter");
                return this.writeNode(this.getFilterType(e), e, t), t;
            },
            "_featureIds": function(e) {
                for (var t = this.createDocumentFragment(), i = 0, n = e.fids.length; i < n; ++i) this.writeNode("ogc:FeatureId", e.fids[i], t);
                return t;
            },
            "FeatureId": function(e) {
                return this.createElementNSPlus("ogc:FeatureId", {
                    "attributes": {
                        "fid": e
                    }
                });
            },
            "And": function(e) {
                for (var t, i = this.createElementNSPlus("ogc:And"), n = 0, r = e.filters.length; n < r; ++n) t = e.filters[n], 
                this.writeNode(this.getFilterType(t), t, i);
                return i;
            },
            "Or": function(e) {
                for (var t, i = this.createElementNSPlus("ogc:Or"), n = 0, r = e.filters.length; n < r; ++n) t = e.filters[n], 
                this.writeNode(this.getFilterType(t), t, i);
                return i;
            },
            "Not": function(e) {
                var t = this.createElementNSPlus("ogc:Not"), i = e.filters[0];
                return this.writeNode(this.getFilterType(i), i, t), t;
            },
            "PropertyIsLessThan": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsLessThan");
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsGreaterThan": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsGreaterThan");
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsLessThanOrEqualTo": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsLessThanOrEqualTo");
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsGreaterThanOrEqualTo": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsGreaterThanOrEqualTo");
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsBetween": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsBetween");
                return this.writeNode("PropertyName", e, t), this.writeNode("LowerBoundary", e, t), 
                this.writeNode("UpperBoundary", e, t), t;
            },
            "PropertyName": function(e) {
                return this.createElementNSPlus("ogc:PropertyName", {
                    "value": e.property
                });
            },
            "Literal": function(e) {
                var t = this.encodeLiteral || OpenLayers.Format.Filter.v1.prototype.encodeLiteral;
                return this.createElementNSPlus("ogc:Literal", {
                    "value": t(e)
                });
            },
            "LowerBoundary": function(e) {
                var t = this.createElementNSPlus("ogc:LowerBoundary");
                return this.writeOgcExpression(e.lowerBoundary, t), t;
            },
            "UpperBoundary": function(e) {
                var t = this.createElementNSPlus("ogc:UpperBoundary");
                return this.writeNode("Literal", e.upperBoundary, t), t;
            },
            "INTERSECTS": function(e) {
                return this.writeSpatial(e, "Intersects");
            },
            "WITHIN": function(e) {
                return this.writeSpatial(e, "Within");
            },
            "CONTAINS": function(e) {
                return this.writeSpatial(e, "Contains");
            },
            "DWITHIN": function(e) {
                var t = this.writeSpatial(e, "DWithin");
                return this.writeNode("Distance", e, t), t;
            },
            "Distance": function(e) {
                return this.createElementNSPlus("ogc:Distance", {
                    "attributes": {
                        "units": e.distanceUnits
                    },
                    "value": e.distance
                });
            },
            "Function": function(e) {
                for (var t = this.createElementNSPlus("ogc:Function", {
                    "attributes": {
                        "name": e.name
                    }
                }), i = e.params, n = 0, r = i.length; n < r; n++) this.writeOgcExpression(i[n], t);
                return t;
            },
            "PropertyIsNull": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsNull");
                return this.writeNode("PropertyName", e, t), t;
            }
        }
    },
    "getFilterType": function(e) {
        var t = this.filterMap[e.type];
        if (!t) throw "Filter writing not supported for rule type: " + e.type;
        return t;
    },
    "filterMap": {
        "&&": "And",
        "||": "Or",
        "!": "Not",
        "==": "PropertyIsEqualTo",
        "!=": "PropertyIsNotEqualTo",
        "<": "PropertyIsLessThan",
        ">": "PropertyIsGreaterThan",
        "<=": "PropertyIsLessThanOrEqualTo",
        ">=": "PropertyIsGreaterThanOrEqualTo",
        "..": "PropertyIsBetween",
        "~": "PropertyIsLike",
        "NULL": "PropertyIsNull",
        "BBOX": "BBOX",
        "DWITHIN": "DWITHIN",
        "WITHIN": "WITHIN",
        "CONTAINS": "CONTAINS",
        "INTERSECTS": "INTERSECTS",
        "FID": "_featureIds"
    },
    "CLASS_NAME": "OpenLayers.Format.Filter.v1"
}), OpenLayers.Format.GML = OpenLayers.Class(OpenLayers.Format.XML, {
    "featureNS": "http://mapserver.gis.umn.edu/mapserver",
    "featurePrefix": "feature",
    "featureName": "featureMember",
    "layerName": "features",
    "geometryName": "geometry",
    "collectionName": "FeatureCollection",
    "gmlns": "http://www.opengis.net/gml",
    "extractAttributes": !0,
    "xy": !0,
    "initialize": function(e) {
        this.regExes = {
            "trimSpace": /^\s*|\s*$/g,
            "removeSpace": /\s*/g,
            "splitSpace": /\s+/,
            "trimComma": /\s*,\s*/g
        }, OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        for (var t = this.getElementsByTagNameNS(e.documentElement, this.gmlns, this.featureName), i = [], n = 0; n < t.length; n++) {
            var r = this.parseFeature(t[n]);
            r && i.push(r);
        }
        return i;
    },
    "parseFeature": function(e) {
        for (var t, i, n, r, s = [ "MultiPolygon", "Polygon", "MultiLineString", "LineString", "MultiPoint", "Point", "Envelope" ], a = 0; a < s.length; ++a) if (t = s[a], 
        (i = this.getElementsByTagNameNS(e, this.gmlns, t)).length > 0) {
            if (!(r = this.parseGeometry[t.toLowerCase()])) throw new TypeError("Unsupported geometry type: " + t);
            n = r.apply(this, [ i[0] ]), this.internalProjection && this.externalProjection && n.transform(this.externalProjection, this.internalProjection);
            break;
        }
        var o, l = this.getElementsByTagNameNS(e, this.gmlns, "Box");
        for (a = 0; a < l.length; ++a) {
            var h = l[a], u = this.parseGeometry.box.apply(this, [ h ]), p = h.parentNode;
            "boundedBy" === (p.localName || p.nodeName.split(":").pop()) ? o = u : n = u.toGeometry();
        }
        var c;
        this.extractAttributes && (c = this.parseAttributes(e));
        var d = new OpenLayers.Feature.Vector(n, c);
        d.bounds = o;
        var f = this.getFirstElementChild(e);
        d.gml = {
            "featureType": f.nodeName.split(":")[1],
            "featureNS": f.namespaceURI,
            "featureNSPrefix": f.prefix
        }, d.type = d.gml.featureType;
        for (var y, m = e.firstChild; m && (1 != m.nodeType || !(y = m.getAttribute("fid") || m.getAttribute("id"))); ) m = m.nextSibling;
        return d.fid = y, d;
    },
    "parseGeometry": {
        "point": function(e) {
            var t, i = [];
            if ((t = this.getElementsByTagNameNS(e, this.gmlns, "pos")).length > 0 && (i = t[0].firstChild.nodeValue.replace(this.regExes.trimSpace, "").split(this.regExes.splitSpace)), 
            0 == i.length && (t = this.getElementsByTagNameNS(e, this.gmlns, "coordinates")).length > 0 && (i = t[0].firstChild.nodeValue.replace(this.regExes.removeSpace, "").split(",")), 
            0 == i.length && (t = this.getElementsByTagNameNS(e, this.gmlns, "coord")).length > 0) {
                var n = this.getElementsByTagNameNS(t[0], this.gmlns, "X"), r = this.getElementsByTagNameNS(t[0], this.gmlns, "Y");
                n.length > 0 && r.length > 0 && (i = [ n[0].firstChild.nodeValue, r[0].firstChild.nodeValue ]);
            }
            return 2 == i.length && (i[2] = null), this.xy ? new OpenLayers.Geometry.Point(i[0], i[1], i[2]) : new OpenLayers.Geometry.Point(i[1], i[0], i[2]);
        },
        "multipoint": function(e) {
            var t = this.getElementsByTagNameNS(e, this.gmlns, "Point"), i = [];
            if (t.length > 0) for (var n, r = 0; r < t.length; ++r) (n = this.parseGeometry.point.apply(this, [ t[r] ])) && i.push(n);
            return new OpenLayers.Geometry.MultiPoint(i);
        },
        "linestring": function(e, t) {
            var i, n, r = [], s = [];
            if ((i = this.getElementsByTagNameNS(e, this.gmlns, "posList")).length > 0) {
                r = (n = (n = this.getChildValue(i[0])).replace(this.regExes.trimSpace, "")).split(this.regExes.splitSpace);
                for (var a, o, l, h, u = parseInt(i[0].getAttribute("dimension")), p = 0; p < r.length / u; ++p) o = r[a = p * u], 
                l = r[a + 1], h = 2 == u ? null : r[a + 2], this.xy ? s.push(new OpenLayers.Geometry.Point(o, l, h)) : s.push(new OpenLayers.Geometry.Point(l, o, h));
            }
            if (0 == r.length && (i = this.getElementsByTagNameNS(e, this.gmlns, "coordinates")).length > 0) for (var c = (n = (n = (n = this.getChildValue(i[0])).replace(this.regExes.trimSpace, "")).replace(this.regExes.trimComma, ",")).split(this.regExes.splitSpace), p = 0; p < c.length; ++p) 2 == (r = c[p].split(",")).length && (r[2] = null), 
            this.xy ? s.push(new OpenLayers.Geometry.Point(r[0], r[1], r[2])) : s.push(new OpenLayers.Geometry.Point(r[1], r[0], r[2]));
            var d = null;
            return 0 != s.length && (d = t ? new OpenLayers.Geometry.LinearRing(s) : new OpenLayers.Geometry.LineString(s)), 
            d;
        },
        "multilinestring": function(e) {
            var t = this.getElementsByTagNameNS(e, this.gmlns, "LineString"), i = [];
            if (t.length > 0) for (var n, r = 0; r < t.length; ++r) (n = this.parseGeometry.linestring.apply(this, [ t[r] ])) && i.push(n);
            return new OpenLayers.Geometry.MultiLineString(i);
        },
        "polygon": function(e) {
            var t = this.getElementsByTagNameNS(e, this.gmlns, "LinearRing"), i = [];
            if (t.length > 0) for (var n, r = 0; r < t.length; ++r) (n = this.parseGeometry.linestring.apply(this, [ t[r], !0 ])) && i.push(n);
            return new OpenLayers.Geometry.Polygon(i);
        },
        "multipolygon": function(e) {
            var t = this.getElementsByTagNameNS(e, this.gmlns, "Polygon"), i = [];
            if (t.length > 0) for (var n, r = 0; r < t.length; ++r) (n = this.parseGeometry.polygon.apply(this, [ t[r] ])) && i.push(n);
            return new OpenLayers.Geometry.MultiPolygon(i);
        },
        "envelope": function(e) {
            var t, i = [], n = this.getElementsByTagNameNS(e, this.gmlns, "lowerCorner");
            if (n.length > 0) {
                a = [];
                if (n.length > 0 && (a = n[0].firstChild.nodeValue.replace(this.regExes.trimSpace, "").split(this.regExes.splitSpace)), 
                2 == a.length && (a[2] = null), this.xy) r = new OpenLayers.Geometry.Point(a[0], a[1], a[2]); else var r = new OpenLayers.Geometry.Point(a[1], a[0], a[2]);
            }
            var s = this.getElementsByTagNameNS(e, this.gmlns, "upperCorner");
            if (s.length > 0) {
                var a = [];
                if (s.length > 0 && (a = s[0].firstChild.nodeValue.replace(this.regExes.trimSpace, "").split(this.regExes.splitSpace)), 
                2 == a.length && (a[2] = null), this.xy) o = new OpenLayers.Geometry.Point(a[0], a[1], a[2]); else var o = new OpenLayers.Geometry.Point(a[1], a[0], a[2]);
            }
            if (r && o) {
                i.push(new OpenLayers.Geometry.Point(r.x, r.y)), i.push(new OpenLayers.Geometry.Point(o.x, r.y)), 
                i.push(new OpenLayers.Geometry.Point(o.x, o.y)), i.push(new OpenLayers.Geometry.Point(r.x, o.y)), 
                i.push(new OpenLayers.Geometry.Point(r.x, r.y));
                var l = new OpenLayers.Geometry.LinearRing(i);
                t = new OpenLayers.Geometry.Polygon([ l ]);
            }
            return t;
        },
        "box": function(e) {
            var t, i = this.getElementsByTagNameNS(e, this.gmlns, "coordinates"), n = null, r = null;
            if (i.length > 0 && 2 == (t = i[0].firstChild.nodeValue.split(" ")).length && (n = t[0].split(","), 
            r = t[1].split(",")), null !== n && null !== r) return new OpenLayers.Bounds(parseFloat(n[0]), parseFloat(n[1]), parseFloat(r[0]), parseFloat(r[1]));
        }
    },
    "parseAttributes": function(e) {
        for (var t, i, n, r, s, a, o, l = {}, h = e.firstChild; h; ) {
            if (1 == h.nodeType) {
                for (t = h.childNodes, i = 0; i < t.length; ++i) 1 == (n = t[i]).nodeType && (1 == (r = n.childNodes).length ? 3 != (s = r[0]).nodeType && 4 != s.nodeType || (a = n.prefix ? n.nodeName.split(":")[1] : n.nodeName, 
                o = s.nodeValue.replace(this.regExes.trimSpace, ""), l[a] = o) : l[n.nodeName.split(":").pop()] = null);
                break;
            }
            h = h.nextSibling;
        }
        return l;
    },
    "write": function(e) {
        OpenLayers.Util.isArray(e) || (e = [ e ]);
        for (var t = this.createElementNS("http://www.opengis.net/wfs", "wfs:" + this.collectionName), i = 0; i < e.length; i++) t.appendChild(this.createFeatureXML(e[i]));
        return OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "createFeatureXML": function(e) {
        var t = e.geometry, i = this.buildGeometryNode(t), n = this.createElementNS(this.featureNS, this.featurePrefix + ":" + this.geometryName);
        n.appendChild(i);
        var r = this.createElementNS(this.gmlns, "gml:" + this.featureName), s = this.createElementNS(this.featureNS, this.featurePrefix + ":" + this.layerName), a = e.fid || e.id;
        s.setAttribute("fid", a), s.appendChild(n);
        for (var o in e.attributes) {
            var l = this.createTextNode(e.attributes[o]), h = o.substring(o.lastIndexOf(":") + 1), u = this.createElementNS(this.featureNS, this.featurePrefix + ":" + h);
            u.appendChild(l), s.appendChild(u);
        }
        return r.appendChild(s), r;
    },
    "buildGeometryNode": function(e) {
        this.externalProjection && this.internalProjection && (e = e.clone()).transform(this.internalProjection, this.externalProjection);
        var t = e.CLASS_NAME, i = t.substring(t.lastIndexOf(".") + 1);
        return this.buildGeometry[i.toLowerCase()].apply(this, [ e ]);
    },
    "buildGeometry": {
        "point": function(e) {
            var t = this.createElementNS(this.gmlns, "gml:Point");
            return t.appendChild(this.buildCoordinatesNode(e)), t;
        },
        "multipoint": function(e) {
            for (var t, i, n = this.createElementNS(this.gmlns, "gml:MultiPoint"), r = e.components, s = 0; s < r.length; s++) t = this.createElementNS(this.gmlns, "gml:pointMember"), 
            i = this.buildGeometry.point.apply(this, [ r[s] ]), t.appendChild(i), n.appendChild(t);
            return n;
        },
        "linestring": function(e) {
            var t = this.createElementNS(this.gmlns, "gml:LineString");
            return t.appendChild(this.buildCoordinatesNode(e)), t;
        },
        "multilinestring": function(e) {
            for (var t, i, n = this.createElementNS(this.gmlns, "gml:MultiLineString"), r = e.components, s = 0; s < r.length; ++s) t = this.createElementNS(this.gmlns, "gml:lineStringMember"), 
            i = this.buildGeometry.linestring.apply(this, [ r[s] ]), t.appendChild(i), n.appendChild(t);
            return n;
        },
        "linearring": function(e) {
            var t = this.createElementNS(this.gmlns, "gml:LinearRing");
            return t.appendChild(this.buildCoordinatesNode(e)), t;
        },
        "polygon": function(e) {
            for (var t, i, n, r = this.createElementNS(this.gmlns, "gml:Polygon"), s = e.components, a = 0; a < s.length; ++a) n = 0 == a ? "outerBoundaryIs" : "innerBoundaryIs", 
            t = this.createElementNS(this.gmlns, "gml:" + n), i = this.buildGeometry.linearring.apply(this, [ s[a] ]), 
            t.appendChild(i), r.appendChild(t);
            return r;
        },
        "multipolygon": function(e) {
            for (var t, i, n = this.createElementNS(this.gmlns, "gml:MultiPolygon"), r = e.components, s = 0; s < r.length; ++s) t = this.createElementNS(this.gmlns, "gml:polygonMember"), 
            i = this.buildGeometry.polygon.apply(this, [ r[s] ]), t.appendChild(i), n.appendChild(t);
            return n;
        },
        "bounds": function(e) {
            var t = this.createElementNS(this.gmlns, "gml:Box");
            return t.appendChild(this.buildCoordinatesNode(e)), t;
        }
    },
    "buildCoordinatesNode": function(e) {
        var t = this.createElementNS(this.gmlns, "gml:coordinates");
        t.setAttribute("decimal", "."), t.setAttribute("cs", ","), t.setAttribute("ts", " ");
        var i = [];
        if (e instanceof OpenLayers.Bounds) i.push(e.left + "," + e.bottom), i.push(e.right + "," + e.top); else for (var n = e.components ? e.components : [ e ], r = 0; r < n.length; r++) i.push(n[r].x + "," + n[r].y);
        var s = this.createTextNode(i.join(" "));
        return t.appendChild(s), t;
    },
    "CLASS_NAME": "OpenLayers.Format.GML"
}), OpenLayers.Format.GML || (OpenLayers.Format.GML = {}), OpenLayers.Format.GML.Base = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "gml": "http://www.opengis.net/gml",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "wfs": "http://www.opengis.net/wfs"
    },
    "defaultPrefix": "gml",
    "schemaLocation": null,
    "featureType": null,
    "featureNS": null,
    "featurePrefix": "feature",
    "geometryName": "geometry",
    "extractAttributes": !0,
    "srsName": null,
    "xy": !0,
    "geometryTypes": null,
    "singleFeatureType": null,
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g,
        "featureMember": /^(.*:)?featureMembers?$/
    },
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]), this.setGeometryTypes(), 
        e && e.featureNS && this.setNamespace(this.featurePrefix, e.featureNS), this.singleFeatureType = !e || "string" == typeof e.featureType;
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = [];
        if (this.readNode(e, {
            "features": t
        }, !0), 0 == t.length) {
            var i = this.getElementsByTagNameNS(e, this.namespaces.gml, "featureMember");
            if (i.length) for (var n = 0, r = i.length; n < r; ++n) this.readNode(i[n], {
                "features": t
            }, !0); else (i = this.getElementsByTagNameNS(e, this.namespaces.gml, "featureMembers")).length && this.readNode(i[0], {
                "features": t
            }, !0);
        }
        return t;
    },
    "readNode": function(e, t, i) {
        return !0 === i && !0 === this.autoConfig && (this.featureType = null, delete this.namespaceAlias[this.featureNS], 
        delete this.namespaces.feature, this.featureNS = null), this.featureNS || e.prefix in this.namespaces || e.parentNode.namespaceURI != this.namespaces.gml || !this.regExes.featureMember.test(e.parentNode.nodeName) || (this.featureType = e.nodeName.split(":").pop(), 
        this.setNamespace("feature", e.namespaceURI), this.featureNS = e.namespaceURI, this.autoConfig = !0), 
        OpenLayers.Format.XML.prototype.readNode.apply(this, [ e, t ]);
    },
    "readers": {
        "gml": {
            "_inherit": function(e, t, i) {},
            "featureMember": function(e, t) {
                this.readChildNodes(e, t);
            },
            "featureMembers": function(e, t) {
                this.readChildNodes(e, t);
            },
            "name": function(e, t) {
                t.name = this.getChildValue(e);
            },
            "boundedBy": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), i.components && i.components.length > 0 && (t.bounds = i.components[0]);
            },
            "Point": function(e, t) {
                var i = {
                    "points": []
                };
                this.readChildNodes(e, i), t.components || (t.components = []), t.components.push(i.points[0]);
            },
            "coordinates": function(e, t) {
                for (var i, n = this.getChildValue(e).replace(this.regExes.trimSpace, ""), r = (n = n.replace(this.regExes.trimComma, ",")).split(this.regExes.splitSpace), s = r.length, a = new Array(s), o = 0; o < s; ++o) i = r[o].split(","), 
                this.xy ? a[o] = new OpenLayers.Geometry.Point(i[0], i[1], i[2]) : a[o] = new OpenLayers.Geometry.Point(i[1], i[0], i[2]);
                t.points = a;
            },
            "coord": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.points || (t.points = []), t.points.push(new OpenLayers.Geometry.Point(i.x, i.y, i.z));
            },
            "X": function(e, t) {
                t.x = this.getChildValue(e);
            },
            "Y": function(e, t) {
                t.y = this.getChildValue(e);
            },
            "Z": function(e, t) {
                t.z = this.getChildValue(e);
            },
            "MultiPoint": function(e, t) {
                var i = {
                    "components": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), t.components = [ new OpenLayers.Geometry.MultiPoint(i.components) ];
            },
            "pointMember": function(e, t) {
                this.readChildNodes(e, t);
            },
            "LineString": function(e, t) {
                var i = {};
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), t.components || (t.components = []), 
                t.components.push(new OpenLayers.Geometry.LineString(i.points));
            },
            "MultiLineString": function(e, t) {
                var i = {
                    "components": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), t.components = [ new OpenLayers.Geometry.MultiLineString(i.components) ];
            },
            "lineStringMember": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Polygon": function(e, t) {
                var i = {
                    "outer": null,
                    "inner": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), i.inner.unshift(i.outer), 
                t.components || (t.components = []), t.components.push(new OpenLayers.Geometry.Polygon(i.inner));
            },
            "LinearRing": function(e, t) {
                var i = {};
                this.readers.gml._inherit.apply(this, [ e, i ]), this.readChildNodes(e, i), t.components = [ new OpenLayers.Geometry.LinearRing(i.points) ];
            },
            "MultiPolygon": function(e, t) {
                var i = {
                    "components": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), t.components = [ new OpenLayers.Geometry.MultiPolygon(i.components) ];
            },
            "polygonMember": function(e, t) {
                this.readChildNodes(e, t);
            },
            "GeometryCollection": function(e, t) {
                var i = {
                    "components": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), t.components = [ new OpenLayers.Geometry.Collection(i.components) ];
            },
            "geometryMember": function(e, t) {
                this.readChildNodes(e, t);
            }
        },
        "feature": {
            "*": function(e, t) {
                var i, n = e.localName || e.nodeName.split(":").pop();
                t.features ? this.singleFeatureType || -1 === OpenLayers.Util.indexOf(this.featureType, n) ? n === this.featureType && (i = "_typeName") : i = "_typeName" : 0 == e.childNodes.length || 1 == e.childNodes.length && 3 == e.firstChild.nodeType ? this.extractAttributes && (i = "_attribute") : i = "_geometry", 
                i && this.readers.feature[i].apply(this, [ e, t ]);
            },
            "_typeName": function(e, t) {
                var i = {
                    "components": [],
                    "attributes": {}
                };
                this.readChildNodes(e, i), i.name && (i.attributes.name = i.name);
                var n = new OpenLayers.Feature.Vector(i.components[0], i.attributes);
                this.singleFeatureType || (n.type = e.nodeName.split(":").pop(), n.namespace = e.namespaceURI);
                var r = e.getAttribute("fid") || this.getAttributeNS(e, this.namespaces.gml, "id");
                r && (n.fid = r), this.internalProjection && this.externalProjection && n.geometry && n.geometry.transform(this.externalProjection, this.internalProjection), 
                i.bounds && (n.bounds = i.bounds), t.features.push(n);
            },
            "_geometry": function(e, t) {
                this.geometryName || (this.geometryName = e.nodeName.split(":").pop()), this.readChildNodes(e, t);
            },
            "_attribute": function(e, t) {
                var i = e.localName || e.nodeName.split(":").pop(), n = this.getChildValue(e);
                t.attributes[i] = n;
            }
        },
        "wfs": {
            "FeatureCollection": function(e, t) {
                this.readChildNodes(e, t);
            }
        }
    },
    "write": function(e) {
        var t;
        t = OpenLayers.Util.isArray(e) ? "featureMembers" : "featureMember";
        var i = this.writeNode("gml:" + t, e);
        return this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "writers": {
        "gml": {
            "featureMember": function(e) {
                var t = this.createElementNSPlus("gml:featureMember");
                return this.writeNode("feature:_typeName", e, t), t;
            },
            "MultiPoint": function(e) {
                for (var t = this.createElementNSPlus("gml:MultiPoint"), i = e.components || [ e ], n = 0, r = i.length; n < r; ++n) this.writeNode("pointMember", i[n], t);
                return t;
            },
            "pointMember": function(e) {
                var t = this.createElementNSPlus("gml:pointMember");
                return this.writeNode("Point", e, t), t;
            },
            "MultiLineString": function(e) {
                for (var t = this.createElementNSPlus("gml:MultiLineString"), i = e.components || [ e ], n = 0, r = i.length; n < r; ++n) this.writeNode("lineStringMember", i[n], t);
                return t;
            },
            "lineStringMember": function(e) {
                var t = this.createElementNSPlus("gml:lineStringMember");
                return this.writeNode("LineString", e, t), t;
            },
            "MultiPolygon": function(e) {
                for (var t = this.createElementNSPlus("gml:MultiPolygon"), i = e.components || [ e ], n = 0, r = i.length; n < r; ++n) this.writeNode("polygonMember", i[n], t);
                return t;
            },
            "polygonMember": function(e) {
                var t = this.createElementNSPlus("gml:polygonMember");
                return this.writeNode("Polygon", e, t), t;
            },
            "GeometryCollection": function(e) {
                for (var t = this.createElementNSPlus("gml:GeometryCollection"), i = 0, n = e.components.length; i < n; ++i) this.writeNode("geometryMember", e.components[i], t);
                return t;
            },
            "geometryMember": function(e) {
                var t = this.createElementNSPlus("gml:geometryMember"), i = this.writeNode("feature:_geometry", e);
                return t.appendChild(i.firstChild), t;
            }
        },
        "feature": {
            "_typeName": function(e) {
                var t = this.createElementNSPlus(this.featurePrefix + ":" + this.featureType, {
                    "attributes": {
                        "fid": e.fid
                    }
                });
                e.geometry && this.writeNode("feature:_geometry", e.geometry, t);
                for (var i in e.attributes) {
                    var n = e.attributes[i];
                    null != n && this.writeNode("feature:_attribute", {
                        "name": i,
                        "value": n
                    }, t);
                }
                return t;
            },
            "_geometry": function(e) {
                this.externalProjection && this.internalProjection && (e = e.clone().transform(this.internalProjection, this.externalProjection));
                var t = this.createElementNSPlus(this.featurePrefix + ":" + this.geometryName), i = this.geometryTypes[e.CLASS_NAME], n = this.writeNode("gml:" + i, e, t);
                return this.srsName && n.setAttribute("srsName", this.srsName), t;
            },
            "_attribute": function(e) {
                return this.createElementNSPlus(this.featurePrefix + ":" + e.name, {
                    "value": e.value
                });
            }
        },
        "wfs": {
            "FeatureCollection": function(e) {
                for (var t = this.createElementNSPlus("wfs:FeatureCollection"), i = 0, n = e.length; i < n; ++i) this.writeNode("gml:featureMember", e[i], t);
                return t;
            }
        }
    },
    "setGeometryTypes": function() {
        this.geometryTypes = {
            "OpenLayers.Geometry.Point": "Point",
            "OpenLayers.Geometry.MultiPoint": "MultiPoint",
            "OpenLayers.Geometry.LineString": "LineString",
            "OpenLayers.Geometry.MultiLineString": "MultiLineString",
            "OpenLayers.Geometry.Polygon": "Polygon",
            "OpenLayers.Geometry.MultiPolygon": "MultiPolygon",
            "OpenLayers.Geometry.Collection": "GeometryCollection"
        };
    },
    "CLASS_NAME": "OpenLayers.Format.GML.Base"
}), OpenLayers.Format.GML.v3 = OpenLayers.Class(OpenLayers.Format.GML.Base, {
    "schemaLocation": "http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",
    "curve": !1,
    "multiCurve": !0,
    "surface": !1,
    "multiSurface": !0,
    "initialize": function(e) {
        OpenLayers.Format.GML.Base.prototype.initialize.apply(this, [ e ]);
    },
    "readers": {
        "gml": OpenLayers.Util.applyDefaults({
            "_inherit": function(e, t, i) {
                var n = parseInt(e.getAttribute("srsDimension"), 10) || i && i.srsDimension;
                n && (t.srsDimension = n);
            },
            "featureMembers": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Curve": function(e, t) {
                var i = {
                    "points": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), t.components || (t.components = []), 
                t.components.push(new OpenLayers.Geometry.LineString(i.points));
            },
            "segments": function(e, t) {
                this.readChildNodes(e, t);
            },
            "LineStringSegment": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), i.points && Array.prototype.push.apply(t.points, i.points);
            },
            "pos": function(e, t) {
                var i, n = this.getChildValue(e).replace(this.regExes.trimSpace, "").split(this.regExes.splitSpace);
                i = this.xy ? new OpenLayers.Geometry.Point(n[0], n[1], n[2]) : new OpenLayers.Geometry.Point(n[1], n[0], n[2]), 
                t.points || (t.points = []), t.points.push(i);
            },
            "posList": function(e, t) {
                for (var i, n, r, s = this.getChildValue(e).replace(this.regExes.trimSpace, "").split(this.regExes.splitSpace), a = t.srsDimension || parseInt(e.getAttribute("srsDimension") || e.getAttribute("dimension"), 10) || 2, o = s.length / a, l = new Array(o), h = 0, u = s.length; h < u; h += a) i = s[h], 
                n = s[h + 1], r = 2 == a ? void 0 : s[h + 2], this.xy ? l[h / a] = new OpenLayers.Geometry.Point(i, n, r) : l[h / a] = new OpenLayers.Geometry.Point(n, i, r);
                t.points = l;
            },
            "Surface": function(e, t) {
                this.readChildNodes(e, t);
            },
            "patches": function(e, t) {
                this.readChildNodes(e, t);
            },
            "PolygonPatch": function(e, t) {
                this.readers.gml.Polygon.apply(this, [ e, t ]);
            },
            "exterior": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.outer = i.components[0];
            },
            "interior": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.inner.push(i.components[0]);
            },
            "MultiCurve": function(e, t) {
                var i = {
                    "components": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), i.components.length > 0 && (t.components = [ new OpenLayers.Geometry.MultiLineString(i.components) ]);
            },
            "curveMember": function(e, t) {
                this.readChildNodes(e, t);
            },
            "MultiSurface": function(e, t) {
                var i = {
                    "components": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), i.components.length > 0 && (t.components = [ new OpenLayers.Geometry.MultiPolygon(i.components) ]);
            },
            "surfaceMember": function(e, t) {
                this.readChildNodes(e, t);
            },
            "surfaceMembers": function(e, t) {
                this.readChildNodes(e, t);
            },
            "pointMembers": function(e, t) {
                this.readChildNodes(e, t);
            },
            "lineStringMembers": function(e, t) {
                this.readChildNodes(e, t);
            },
            "polygonMembers": function(e, t) {
                this.readChildNodes(e, t);
            },
            "geometryMembers": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Envelope": function(e, t) {
                var i = {
                    "points": new Array(2)
                };
                this.readChildNodes(e, i), t.components || (t.components = []);
                var n = i.points[0], r = i.points[1];
                t.components.push(new OpenLayers.Bounds(n.x, n.y, r.x, r.y));
            },
            "lowerCorner": function(e, t) {
                var i = {};
                this.readers.gml.pos.apply(this, [ e, i ]), t.points[0] = i.points[0];
            },
            "upperCorner": function(e, t) {
                var i = {};
                this.readers.gml.pos.apply(this, [ e, i ]), t.points[1] = i.points[0];
            }
        }, OpenLayers.Format.GML.Base.prototype.readers.gml),
        "feature": OpenLayers.Format.GML.Base.prototype.readers.feature,
        "wfs": OpenLayers.Format.GML.Base.prototype.readers.wfs
    },
    "write": function(e) {
        var t;
        t = OpenLayers.Util.isArray(e) ? "featureMembers" : "featureMember";
        var i = this.writeNode("gml:" + t, e);
        return this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "writers": {
        "gml": OpenLayers.Util.applyDefaults({
            "featureMembers": function(e) {
                for (var t = this.createElementNSPlus("gml:featureMembers"), i = 0, n = e.length; i < n; ++i) this.writeNode("feature:_typeName", e[i], t);
                return t;
            },
            "Point": function(e) {
                var t = this.createElementNSPlus("gml:Point");
                return this.writeNode("pos", e, t), t;
            },
            "pos": function(e) {
                var t = this.xy ? e.x + " " + e.y : e.y + " " + e.x;
                return this.createElementNSPlus("gml:pos", {
                    "value": t
                });
            },
            "LineString": function(e) {
                var t = this.createElementNSPlus("gml:LineString");
                return this.writeNode("posList", e.components, t), t;
            },
            "Curve": function(e) {
                var t = this.createElementNSPlus("gml:Curve");
                return this.writeNode("segments", e, t), t;
            },
            "segments": function(e) {
                var t = this.createElementNSPlus("gml:segments");
                return this.writeNode("LineStringSegment", e, t), t;
            },
            "LineStringSegment": function(e) {
                var t = this.createElementNSPlus("gml:LineStringSegment");
                return this.writeNode("posList", e.components, t), t;
            },
            "posList": function(e) {
                for (var t, i = e.length, n = new Array(i), r = 0; r < i; ++r) t = e[r], this.xy ? n[r] = t.x + " " + t.y : n[r] = t.y + " " + t.x;
                return this.createElementNSPlus("gml:posList", {
                    "value": n.join(" ")
                });
            },
            "Surface": function(e) {
                var t = this.createElementNSPlus("gml:Surface");
                return this.writeNode("patches", e, t), t;
            },
            "patches": function(e) {
                var t = this.createElementNSPlus("gml:patches");
                return this.writeNode("PolygonPatch", e, t), t;
            },
            "PolygonPatch": function(e) {
                var t = this.createElementNSPlus("gml:PolygonPatch", {
                    "attributes": {
                        "interpolation": "planar"
                    }
                });
                this.writeNode("exterior", e.components[0], t);
                for (var i = 1, n = e.components.length; i < n; ++i) this.writeNode("interior", e.components[i], t);
                return t;
            },
            "Polygon": function(e) {
                var t = this.createElementNSPlus("gml:Polygon");
                this.writeNode("exterior", e.components[0], t);
                for (var i = 1, n = e.components.length; i < n; ++i) this.writeNode("interior", e.components[i], t);
                return t;
            },
            "exterior": function(e) {
                var t = this.createElementNSPlus("gml:exterior");
                return this.writeNode("LinearRing", e, t), t;
            },
            "interior": function(e) {
                var t = this.createElementNSPlus("gml:interior");
                return this.writeNode("LinearRing", e, t), t;
            },
            "LinearRing": function(e) {
                var t = this.createElementNSPlus("gml:LinearRing");
                return this.writeNode("posList", e.components, t), t;
            },
            "MultiCurve": function(e) {
                for (var t = this.createElementNSPlus("gml:MultiCurve"), i = e.components || [ e ], n = 0, r = i.length; n < r; ++n) this.writeNode("curveMember", i[n], t);
                return t;
            },
            "curveMember": function(e) {
                var t = this.createElementNSPlus("gml:curveMember");
                return this.curve ? this.writeNode("Curve", e, t) : this.writeNode("LineString", e, t), 
                t;
            },
            "MultiSurface": function(e) {
                for (var t = this.createElementNSPlus("gml:MultiSurface"), i = e.components || [ e ], n = 0, r = i.length; n < r; ++n) this.writeNode("surfaceMember", i[n], t);
                return t;
            },
            "surfaceMember": function(e) {
                var t = this.createElementNSPlus("gml:surfaceMember");
                return this.surface ? this.writeNode("Surface", e, t) : this.writeNode("Polygon", e, t), 
                t;
            },
            "Envelope": function(e) {
                var t = this.createElementNSPlus("gml:Envelope");
                return this.writeNode("lowerCorner", e, t), this.writeNode("upperCorner", e, t), 
                this.srsName && t.setAttribute("srsName", this.srsName), t;
            },
            "lowerCorner": function(e) {
                var t = this.xy ? e.left + " " + e.bottom : e.bottom + " " + e.left;
                return this.createElementNSPlus("gml:lowerCorner", {
                    "value": t
                });
            },
            "upperCorner": function(e) {
                var t = this.xy ? e.right + " " + e.top : e.top + " " + e.right;
                return this.createElementNSPlus("gml:upperCorner", {
                    "value": t
                });
            }
        }, OpenLayers.Format.GML.Base.prototype.writers.gml),
        "feature": OpenLayers.Format.GML.Base.prototype.writers.feature,
        "wfs": OpenLayers.Format.GML.Base.prototype.writers.wfs
    },
    "setGeometryTypes": function() {
        this.geometryTypes = {
            "OpenLayers.Geometry.Point": "Point",
            "OpenLayers.Geometry.MultiPoint": "MultiPoint",
            "OpenLayers.Geometry.LineString": !0 === this.curve ? "Curve" : "LineString",
            "OpenLayers.Geometry.MultiLineString": !1 === this.multiCurve ? "MultiLineString" : "MultiCurve",
            "OpenLayers.Geometry.Polygon": !0 === this.surface ? "Surface" : "Polygon",
            "OpenLayers.Geometry.MultiPolygon": !1 === this.multiSurface ? "MultiPolygon" : "MultiSurface",
            "OpenLayers.Geometry.Collection": "GeometryCollection"
        };
    },
    "CLASS_NAME": "OpenLayers.Format.GML.v3"
}), OpenLayers.Format.Filter.v1_1_0 = OpenLayers.Class(OpenLayers.Format.GML.v3, OpenLayers.Format.Filter.v1, {
    "VERSION": "1.1.0",
    "schemaLocation": "http://www.opengis.net/ogc/filter/1.1.0/filter.xsd",
    "initialize": function(e) {
        OpenLayers.Format.GML.v3.prototype.initialize.apply(this, [ e ]);
    },
    "readers": {
        "ogc": OpenLayers.Util.applyDefaults({
            "PropertyIsEqualTo": function(e, t) {
                var i = e.getAttribute("matchCase"), n = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.EQUAL_TO,
                    "matchCase": !("false" === i || "0" === i)
                });
                this.readChildNodes(e, n), t.filters.push(n);
            },
            "PropertyIsNotEqualTo": function(e, t) {
                var i = e.getAttribute("matchCase"), n = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.NOT_EQUAL_TO,
                    "matchCase": !("false" === i || "0" === i)
                });
                this.readChildNodes(e, n), t.filters.push(n);
            },
            "PropertyIsLike": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.LIKE
                });
                this.readChildNodes(e, i);
                var n = e.getAttribute("wildCard"), r = e.getAttribute("singleChar"), s = e.getAttribute("escapeChar");
                i.value2regex(n, r, s), t.filters.push(i);
            }
        }, OpenLayers.Format.Filter.v1.prototype.readers.ogc),
        "gml": OpenLayers.Format.GML.v3.prototype.readers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.readers.feature
    },
    "writers": {
        "ogc": OpenLayers.Util.applyDefaults({
            "PropertyIsEqualTo": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsEqualTo", {
                    "attributes": {
                        "matchCase": e.matchCase
                    }
                });
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsNotEqualTo": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsNotEqualTo", {
                    "attributes": {
                        "matchCase": e.matchCase
                    }
                });
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsLike": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsLike", {
                    "attributes": {
                        "matchCase": e.matchCase,
                        "wildCard": "*",
                        "singleChar": ".",
                        "escapeChar": "!"
                    }
                });
                return this.writeNode("PropertyName", e, t), this.writeNode("Literal", e.regex2value(), t), 
                t;
            },
            "BBOX": function(e) {
                var t = this.createElementNSPlus("ogc:BBOX");
                e.property && this.writeNode("PropertyName", e, t);
                var i = this.writeNode("gml:Envelope", e.value);
                return e.projection && i.setAttribute("srsName", e.projection), t.appendChild(i), 
                t;
            },
            "SortBy": function(e) {
                for (var t = this.createElementNSPlus("ogc:SortBy"), i = 0, n = e.length; i < n; i++) this.writeNode("ogc:SortProperty", e[i], t);
                return t;
            },
            "SortProperty": function(e) {
                var t = this.createElementNSPlus("ogc:SortProperty");
                return this.writeNode("ogc:PropertyName", e, t), this.writeNode("ogc:SortOrder", "DESC" == e.order ? "DESC" : "ASC", t), 
                t;
            },
            "SortOrder": function(e) {
                return this.createElementNSPlus("ogc:SortOrder", {
                    "value": e
                });
            }
        }, OpenLayers.Format.Filter.v1.prototype.writers.ogc),
        "gml": OpenLayers.Format.GML.v3.prototype.writers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.writers.feature
    },
    "writeSpatial": function(e, t) {
        var i = this.createElementNSPlus("ogc:" + t);
        if (this.writeNode("PropertyName", e, i), e.value instanceof OpenLayers.Filter.Function) this.writeNode("Function", e.value, i); else {
            var n;
            n = e.value instanceof OpenLayers.Geometry ? this.writeNode("feature:_geometry", e.value).firstChild : this.writeNode("gml:Envelope", e.value), 
            e.projection && n.setAttribute("srsName", e.projection), i.appendChild(n);
        }
        return i;
    },
    "CLASS_NAME": "OpenLayers.Format.Filter.v1_1_0"
}), OpenLayers.Format.OWSCommon.v1_0_0 = OpenLayers.Class(OpenLayers.Format.OWSCommon.v1, {
    "namespaces": {
        "ows": "http://www.opengis.net/ows",
        "xlink": "http://www.w3.org/1999/xlink"
    },
    "readers": {
        "ows": OpenLayers.Util.applyDefaults({
            "ExceptionReport": function(e, t) {
                t.success = !1, t.exceptionReport = {
                    "version": e.getAttribute("version"),
                    "language": e.getAttribute("language"),
                    "exceptions": []
                }, this.readChildNodes(e, t.exceptionReport);
            }
        }, OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)
    },
    "writers": {
        "ows": OpenLayers.Format.OWSCommon.v1.prototype.writers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.OWSCommon.v1_0_0"
}), OpenLayers.Format.WFST.v1_1_0 = OpenLayers.Class(OpenLayers.Format.Filter.v1_1_0, OpenLayers.Format.WFST.v1, {
    "version": "1.1.0",
    "schemaLocations": {
        "wfs": "http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"
    },
    "initialize": function(e) {
        OpenLayers.Format.Filter.v1_1_0.prototype.initialize.apply(this, [ e ]), OpenLayers.Format.WFST.v1.prototype.initialize.apply(this, [ e ]);
    },
    "readNode": function(e, t, i) {
        return OpenLayers.Format.GML.v3.prototype.readNode.apply(this, arguments);
    },
    "readers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "FeatureCollection": function(e, t) {
                t.numberOfFeatures = parseInt(e.getAttribute("numberOfFeatures")), OpenLayers.Format.WFST.v1.prototype.readers.wfs.FeatureCollection.apply(this, arguments);
            },
            "TransactionResponse": function(e, t) {
                t.insertIds = [], t.success = !1, this.readChildNodes(e, t);
            },
            "TransactionSummary": function(e, t) {
                t.success = !0;
            },
            "InsertResults": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Feature": function(e, t) {
                var i = {
                    "fids": []
                };
                this.readChildNodes(e, i), t.insertIds.push(i.fids[0]);
            }
        }, OpenLayers.Format.WFST.v1.prototype.readers.wfs),
        "gml": OpenLayers.Format.GML.v3.prototype.readers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.readers.feature,
        "ogc": OpenLayers.Format.Filter.v1_1_0.prototype.readers.ogc,
        "ows": OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows
    },
    "writers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "GetFeature": function(e) {
                var t = OpenLayers.Format.WFST.v1.prototype.writers.wfs.GetFeature.apply(this, arguments);
                return e && this.setAttributes(t, {
                    "resultType": e.resultType,
                    "startIndex": e.startIndex,
                    "count": e.count
                }), t;
            },
            "Query": function(e) {
                var t = (e = OpenLayers.Util.extend({
                    "featureNS": this.featureNS,
                    "featurePrefix": this.featurePrefix,
                    "featureType": this.featureType,
                    "srsName": this.srsName
                }, e)).featurePrefix, i = this.createElementNSPlus("wfs:Query", {
                    "attributes": {
                        "typeName": (e.featureNS ? t + ":" : "") + e.featureType,
                        "srsName": e.srsName
                    }
                });
                if (e.featureNS && this.setAttributeNS(i, this.namespaces.xmlns, "xmlns:" + t, e.featureNS), 
                e.propertyNames) for (var n = 0, r = e.propertyNames.length; n < r; n++) this.writeNode("wfs:PropertyName", {
                    "property": e.propertyNames[n]
                }, i);
                return e.filter && (OpenLayers.Format.WFST.v1_1_0.prototype.setFilterProperty.call(this, e.filter), 
                this.writeNode("ogc:Filter", e.filter, i)), i;
            },
            "PropertyName": function(e) {
                return this.createElementNSPlus("wfs:PropertyName", {
                    "value": e.property
                });
            }
        }, OpenLayers.Format.WFST.v1.prototype.writers.wfs),
        "gml": OpenLayers.Format.GML.v3.prototype.writers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.writers.feature,
        "ogc": OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc
    },
    "CLASS_NAME": "OpenLayers.Format.WFST.v1_1_0"
}), OpenLayers.Format.WPSExecute = OpenLayers.Class(OpenLayers.Format.XML, OpenLayers.Format.Filter.v1_1_0, {
    "namespaces": {
        "ows": "http://www.opengis.net/ows/1.1",
        "gml": "http://www.opengis.net/gml",
        "wps": "http://www.opengis.net/wps/1.0.0",
        "wfs": "http://www.opengis.net/wfs",
        "ogc": "http://www.opengis.net/ogc",
        "wcs": "http://www.opengis.net/wcs",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "VERSION": "1.0.0",
    "schemaLocation": "http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",
    "schemaLocationAttr": function(e) {},
    "write": function(e) {
        var t;
        OpenLayers.Format.XML.supportActiveX ? (t = new ActiveXObject("Microsoft.XMLDOM"), 
        this.xmldom = t) : t = document.implementation.createDocument("", "", null);
        var i = this.writeNode("wps:Execute", e, t);
        return this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "writers": {
        "wps": {
            "Execute": function(e) {
                var t = this.createElementNSPlus("wps:Execute", {
                    "attributes": {
                        "version": this.VERSION,
                        "service": "WPS"
                    }
                });
                return this.writeNode("ows:Identifier", e.identifier, t), this.writeNode("wps:DataInputs", e.dataInputs, t), 
                this.writeNode("wps:ResponseForm", e.responseForm, t), t;
            },
            "ResponseForm": function(e) {
                var t = this.createElementNSPlus("wps:ResponseForm", {});
                return e.rawDataOutput && this.writeNode("wps:RawDataOutput", e.rawDataOutput, t), 
                e.responseDocument && this.writeNode("wps:ResponseDocument", e.responseDocument, t), 
                t;
            },
            "ResponseDocument": function(e) {
                var t = this.createElementNSPlus("wps:ResponseDocument", {
                    "attributes": {
                        "storeExecuteResponse": e.storeExecuteResponse,
                        "lineage": e.lineage,
                        "status": e.status
                    }
                });
                if (e.outputs) for (var i = 0, n = e.outputs.length; i < n; i++) this.writeNode("wps:Output", e.outputs[i], t);
                return t;
            },
            "Output": function(e) {
                var t = this.createElementNSPlus("wps:Output", {
                    "attributes": {
                        "asReference": e.asReference,
                        "mimeType": e.mimeType,
                        "encoding": e.encoding,
                        "schema": e.schema
                    }
                });
                return this.writeNode("ows:Identifier", e.identifier, t), this.writeNode("ows:Title", e.title, t), 
                this.writeNode("ows:Abstract", e.abstract, t), t;
            },
            "RawDataOutput": function(e) {
                var t = this.createElementNSPlus("wps:RawDataOutput", {
                    "attributes": {
                        "mimeType": e.mimeType,
                        "encoding": e.encoding,
                        "schema": e.schema
                    }
                });
                return this.writeNode("ows:Identifier", e.identifier, t), t;
            },
            "DataInputs": function(e) {
                for (var t = this.createElementNSPlus("wps:DataInputs", {}), i = 0, n = e.length; i < n; ++i) this.writeNode("wps:Input", e[i], t);
                return t;
            },
            "Input": function(e) {
                var t = this.createElementNSPlus("wps:Input", {});
                return this.writeNode("ows:Identifier", e.identifier, t), e.title && this.writeNode("ows:Title", e.title, t), 
                e.data && this.writeNode("wps:Data", e.data, t), e.reference && this.writeNode("wps:Reference", e.reference, t), 
                e.boundingBoxData && this.writeNode("wps:BoundingBoxData", e.boundingBoxData, t), 
                t;
            },
            "Data": function(e) {
                var t = this.createElementNSPlus("wps:Data", {});
                return e.literalData ? this.writeNode("wps:LiteralData", e.literalData, t) : e.complexData ? this.writeNode("wps:ComplexData", e.complexData, t) : e.boundingBoxData && this.writeNode("ows:BoundingBox", e.boundingBoxData, t), 
                t;
            },
            "LiteralData": function(e) {
                return this.createElementNSPlus("wps:LiteralData", {
                    "attributes": {
                        "uom": e.uom
                    },
                    "value": e.value
                });
            },
            "ComplexData": function(e) {
                var t = this.createElementNSPlus("wps:ComplexData", {
                    "attributes": {
                        "mimeType": e.mimeType,
                        "encoding": e.encoding,
                        "schema": e.schema
                    }
                }), i = e.value;
                return "string" == typeof i ? t.appendChild(this.getXMLDoc().createCDATASection(e.value)) : t.appendChild(i), 
                t;
            },
            "Reference": function(e) {
                var t = this.createElementNSPlus("wps:Reference", {
                    "attributes": {
                        "mimeType": e.mimeType,
                        "xlink:href": e.href,
                        "method": e.method,
                        "encoding": e.encoding,
                        "schema": e.schema
                    }
                });
                return e.body && this.writeNode("wps:Body", e.body, t), t;
            },
            "BoundingBoxData": function(e, t) {
                this.writers.ows.BoundingBox.apply(this, [ e, t, "wps:BoundingBoxData" ]);
            },
            "Body": function(e) {
                var t = this.createElementNSPlus("wps:Body", {});
                return e.wcs ? this.writeNode("wcs:GetCoverage", e.wcs, t) : e.wfs ? (this.featureType = e.wfs.featureType, 
                this.version = e.wfs.version, this.writeNode("wfs:GetFeature", e.wfs, t)) : this.writeNode("wps:Execute", e, t), 
                t;
            }
        },
        "wcs": OpenLayers.Format.WCSGetCoverage.prototype.writers.wcs,
        "wfs": OpenLayers.Format.WFST.v1_1_0.prototype.writers.wfs,
        "ogc": OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc,
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows
    },
    "readers": {
        "wps": {
            "ExecuteResponse": function(e, t) {
                t.executeResponse = {
                    "lang": e.getAttribute("lang"),
                    "statusLocation": e.getAttribute("statusLocation"),
                    "serviceInstance": e.getAttribute("serviceInstance"),
                    "service": e.getAttribute("service")
                }, this.readChildNodes(e, t.executeResponse);
            },
            "Process": function(e, t) {
                t.process = {}, this.readChildNodes(e, t.process);
            },
            "Status": function(e, t) {
                t.status = {
                    "creationTime": e.getAttribute("creationTime")
                }, this.readChildNodes(e, t.status);
            },
            "ProcessSucceeded": function(e, t) {
                t.processSucceeded = !0;
            },
            "ProcessOutputs": function(e, t) {
                t.processOutputs = [], this.readChildNodes(e, t.processOutputs);
            },
            "Output": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.push(i);
            },
            "Reference": function(e, t) {
                t.reference = {
                    "href": e.getAttribute("href"),
                    "mimeType": e.getAttribute("mimeType"),
                    "encoding": e.getAttribute("encoding"),
                    "schema": e.getAttribute("schema")
                };
            },
            "Data": function(e, t) {
                t.data = {}, this.readChildNodes(e, t);
            },
            "LiteralData": function(e, t) {
                t.literalData = {
                    "dataType": e.getAttribute("dataType"),
                    "uom": e.getAttribute("uom"),
                    "value": this.getChildValue(e)
                };
            },
            "ComplexData": function(e, t) {
                if (t.complexData = {
                    "mimeType": e.getAttribute("mimeType"),
                    "schema": e.getAttribute("schema"),
                    "encoding": e.getAttribute("encoding"),
                    "value": ""
                }, this.isSimpleContent(e)) {
                    var i;
                    for (i = e.firstChild; i; i = i.nextSibling) switch (i.nodeType) {
                      case 3:
                      case 4:
                        t.complexData.value += i.nodeValue;
                    }
                } else for (i = e.firstChild; i; i = i.nextSibling) 1 == i.nodeType && (t.complexData.value = i);
            },
            "BoundingBox": function(e, t) {
                t.boundingBoxData = {
                    "dimensions": e.getAttribute("dimensions"),
                    "crs": e.getAttribute("crs")
                }, this.readChildNodes(e, t.boundingBoxData);
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WPSExecute"
}), OpenLayers.WPSProcess = OpenLayers.Class({
    "client": null,
    "server": null,
    "identifier": null,
    "description": null,
    "localWPS": "http://geoserver/wps",
    "formats": null,
    "chained": 0,
    "executeCallbacks": null,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e), this.executeCallbacks = [], this.formats = {
            "application/wkt": new OpenLayers.Format.WKT(),
            "application/json": new OpenLayers.Format.GeoJSON()
        };
    },
    "describe": function(e) {
        if (e = e || {}, this.description) {
            if (e.callback) {
                var t = this.description;
                window.setTimeout(function() {
                    e.callback.call(e.scope, t);
                }, 0);
            }
        } else this.client.describeProcess(this.server, this.identifier, function(t) {
            this.description || this.parseDescription(t), e.callback && e.callback.call(e.scope, this.description);
        }, this);
    },
    "configure": function(e) {
        return this.describe({
            "callback": function() {
                var t, i, n, r = this.description, s = e.inputs;
                for (i = 0, n = r.dataInputs.length; i < n; ++i) t = r.dataInputs[i], this.setInputData(t, s[t.identifier]);
                e.callback && e.callback.call(e.scope);
            },
            "scope": this
        }), this;
    },
    "execute": function(e) {
        this.configure({
            "inputs": e.inputs,
            "callback": function() {
                var t = this, i = this.getOutputIndex(t.description.processOutputs, e.output);
                t.setResponseForm({
                    "outputIndex": i
                }), function n() {
                    OpenLayers.Util.removeItem(t.executeCallbacks, n), 0 === t.chained ? OpenLayers.Request.POST({
                        "url": t.client.servers[t.server].url,
                        "data": new OpenLayers.Format.WPSExecute().write(t.description),
                        "success": function(n) {
                            var r, s = t.description.processOutputs[i];
                            if (s.literalOutput) r = "boolean" === s.literalOutput.dataType ? "true" === OpenLayers.String.trim(n.responseText).toLowerCase() : "double" === s.literalOutput.dataType ? parseFloat(n.responseText) : n.responseText; else if (s.complexOutput) {
                                var a = t.findMimeType(s.complexOutput.supported.formats);
                                (r = t.formats[a].read(n.responseText)) instanceof OpenLayers.Feature.Vector && (r = [ r ]);
                            }
                            if (e.success) {
                                var o = {};
                                o[e.output || "result"] = r, e.success.call(e.scope, o);
                            }
                        },
                        "scope": t
                    }) : t.executeCallbacks.push(n);
                }();
            },
            "scope": this
        });
    },
    "output": function(e) {
        return new OpenLayers.WPSProcess.ChainLink({
            "process": this,
            "output": e
        });
    },
    "parseDescription": function(e) {
        var t = this.client.servers[this.server];
        this.description = new OpenLayers.Format.WPSDescribeProcess().read(t.processDescription[this.identifier]).processDescriptions[this.identifier];
    },
    "setInputData": function(e, t) {
        if (delete e.data, delete e.reference, t instanceof OpenLayers.WPSProcess.ChainLink) ++this.chained, 
        e.reference = {
            "method": "POST",
            "href": t.process.server === this.server ? this.localWPS : this.client.servers[t.process.server].url
        }, t.process.describe({
            "callback": function() {
                --this.chained, this.chainProcess(e, t);
            },
            "scope": this
        }); else {
            e.data = {};
            var i = e.complexData;
            if (i) {
                var n = this.findMimeType(i.supported.formats);
                e.data.complexData = {
                    "mimeType": n,
                    "value": this.formats[n].write(this.toFeatures(t))
                };
            } else e.data.literalData = {
                "value": t
            };
        }
    },
    "setResponseForm": function(e) {
        e = e || {};
        var t, i = this.description.processOutputs[e.outputIndex || 0];
        i.complexOutput && (t = this.findMimeType(i.complexOutput.supported.formats, e.supportedFormats)), 
        this.description.responseForm = {
            "rawDataOutput": {
                "identifier": i.identifier,
                "mimeType": t
            }
        };
    },
    "getOutputIndex": function(e, t) {
        var i;
        if (t) {
            for (var n = e.length - 1; n >= 0; --n) if (e[n].identifier === t) {
                i = n;
                break;
            }
        } else i = 0;
        return i;
    },
    "chainProcess": function(e, t) {
        var i = this.getOutputIndex(t.process.description.processOutputs, t.output);
        e.reference.mimeType = this.findMimeType(e.complexData.supported.formats, t.process.description.processOutputs[i].complexOutput.supported.formats);
        var n = {};
        for (n[e.reference.mimeType] = !0, t.process.setResponseForm({
            "outputIndex": i,
            "supportedFormats": n
        }), e.reference.body = t.process.description; this.executeCallbacks.length > 0; ) this.executeCallbacks[0]();
    },
    "toFeatures": function(e) {
        var t = OpenLayers.Util.isArray(e);
        t || (e = [ e ]);
        for (var i, n = new Array(e.length), r = 0, s = e.length; r < s; ++r) i = e[r], 
        n[r] = i instanceof OpenLayers.Feature.Vector ? i : new OpenLayers.Feature.Vector(i);
        return t ? n : n[0];
    },
    "findMimeType": function(e, t) {
        t = t || this.formats;
        for (var i in e) if (i in t) return i;
    },
    "CLASS_NAME": "OpenLayers.WPSProcess"
}), OpenLayers.WPSProcess.ChainLink = OpenLayers.Class({
    "process": null,
    "output": null,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e);
    },
    "CLASS_NAME": "OpenLayers.WPSProcess.ChainLink"
}), OpenLayers.Format.WPSDescribeProcess = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.0.0",
    "CLASS_NAME": "OpenLayers.Format.WPSDescribeProcess"
}), OpenLayers.WPSClient = OpenLayers.Class({
    "servers": null,
    "version": "1.0.0",
    "lazy": !1,
    "events": null,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e), this.events = new OpenLayers.Events(this), this.servers = {};
        for (var t in e.servers) this.servers[t] = "string" == typeof e.servers[t] ? {
            "url": e.servers[t],
            "version": this.version,
            "processDescription": {}
        } : e.servers[t];
    },
    "execute": function(e) {
        this.getProcess(e.server, e.process).execute({
            "inputs": e.inputs,
            "success": e.success,
            "scope": e.scope
        });
    },
    "getProcess": function(e, t, i) {
        var n = new OpenLayers.WPSProcess({
            "client": this,
            "server": e,
            "identifier": t
        });
        return this.lazy || n.describe(i), n;
    },
    "describeProcess": function(e, t, i, n) {
        var r = this.servers[e];
        r.processDescription[t] ? window.setTimeout(function() {
            i.call(n, r.processDescription[t]);
        }, 0) : t in r.processDescription ? this.events.register("describeprocess", this, function e(r) {
            r.identifier === t && (this.events.unregister("describeprocess", this, e), i.call(n, r.raw));
        }) : (r.processDescription[t] = null, OpenLayers.Request.GET({
            "url": r.url,
            "params": {
                "SERVICE": "WPS",
                "VERSION": r.version,
                "REQUEST": "DescribeProcess",
                "IDENTIFIER": t
            },
            "success": function(e) {
                r.processDescription[t] = e.responseText, this.events.triggerEvent("describeprocess", {
                    "identifier": t,
                    "raw": e.responseText
                }), i.call(n, e.responseText);
            },
            "scope": this
        }));
    },
    "destroy": function() {
        this.events.destroy(), this.events = null, this.servers = null;
    },
    "CLASS_NAME": "OpenLayers.WPSClient"
}), OpenLayers.Control.ArgParser = OpenLayers.Class(OpenLayers.Control, {
    "center": null,
    "zoom": null,
    "layers": null,
    "displayProjection": null,
    "getParameters": function(e) {
        e = e || window.location.href;
        var t = OpenLayers.Util.getParameters(e), i = e.indexOf("#");
        return i > 0 && (e = "?" + e.substring(i + 1, e.length), OpenLayers.Util.extend(t, OpenLayers.Util.getParameters(e))), 
        t;
    },
    "setMap": function(e) {
        OpenLayers.Control.prototype.setMap.apply(this, arguments);
        for (var t = 0, i = this.map.controls.length; t < i; t++) {
            var n = this.map.controls[t];
            if (n != this && "OpenLayers.Control.ArgParser" == n.CLASS_NAME) {
                n.displayProjection != this.displayProjection && (this.displayProjection = n.displayProjection);
                break;
            }
        }
        if (t == this.map.controls.length) {
            var r = this.getParameters();
            r.layers && (this.layers = r.layers, this.map.events.register("addlayer", this, this.configureLayers), 
            this.configureLayers()), r.lat && r.lon && (this.center = new OpenLayers.LonLat(parseFloat(r.lon), parseFloat(r.lat)), 
            r.zoom && (this.zoom = parseFloat(r.zoom)), this.map.events.register("changebaselayer", this, this.setCenter), 
            this.setCenter());
        }
    },
    "setCenter": function() {
        this.map.baseLayer && (this.map.events.unregister("changebaselayer", this, this.setCenter), 
        this.displayProjection && this.center.transform(this.displayProjection, this.map.getProjectionObject()), 
        this.map.setCenter(this.center, this.zoom));
    },
    "configureLayers": function() {
        if (this.layers.length == this.map.layers.length) {
            this.map.events.unregister("addlayer", this, this.configureLayers);
            for (var e = 0, t = this.layers.length; e < t; e++) {
                var i = this.map.layers[e], n = this.layers.charAt(e);
                "B" == n ? this.map.setBaseLayer(i) : "T" != n && "F" != n || i.setVisibility("T" == n);
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Control.ArgParser"
}), OpenLayers.Control.Attribution = OpenLayers.Class(OpenLayers.Control, {
    "separator": ", ",
    "template": "${layers}",
    "layerTemplate": '<a href="${href}" target="_blank">${title}</a>',
    "destroy": function() {
        this.map.events.un({
            "removelayer": this.updateAttribution,
            "addlayer": this.updateAttribution,
            "changelayer": this.updateAttribution,
            "changebaselayer": this.updateAttribution,
            "scope": this
        }), OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "draw": function() {
        return OpenLayers.Control.prototype.draw.apply(this, arguments), this.map.events.on({
            "changebaselayer": this.updateAttribution,
            "changelayer": this.updateAttribution,
            "addlayer": this.updateAttribution,
            "removelayer": this.updateAttribution,
            "scope": this
        }), this.updateAttribution(), this.div;
    },
    "updateAttribution": function() {
        var e, t = [];
        if (this.map && this.map.layers) {
            for (var i = 0, n = this.map.layers.length; i < n; i++) {
                var r = this.map.layers[i];
                r.attribution && r.getVisibility() && (e = "object" == typeof r.attribution ? OpenLayers.String.format(this.layerTemplate, r.attribution) : r.attribution, 
                -1 === OpenLayers.Util.indexOf(t, e) && t.push(e));
            }
            this.div.innerHTML = OpenLayers.String.format(this.template, {
                "layers": t.join(this.separator)
            });
        }
    },
    "CLASS_NAME": "OpenLayers.Control.Attribution"
}), OpenLayers.Control.Button = OpenLayers.Class(OpenLayers.Control, {
    "type": OpenLayers.Control.TYPE_BUTTON,
    "trigger": function() {},
    "CLASS_NAME": "OpenLayers.Control.Button"
}), OpenLayers.Control.CacheRead = OpenLayers.Class(OpenLayers.Control, {
    "fetchEvent": "tileloadstart",
    "layers": null,
    "autoActivate": !0,
    "setMap": function(e) {
        OpenLayers.Control.prototype.setMap.apply(this, arguments);
        var t, i = this.layers || e.layers;
        for (t = i.length - 1; t >= 0; --t) this.addLayer({
            "layer": i[t]
        });
        this.layers || e.events.on({
            "addlayer": this.addLayer,
            "removeLayer": this.removeLayer,
            "scope": this
        });
    },
    "addLayer": function(e) {
        e.layer.events.register(this.fetchEvent, this, this.fetch);
    },
    "removeLayer": function(e) {
        e.layer.events.unregister(this.fetchEvent, this, this.fetch);
    },
    "fetch": function(e) {
        if (this.active && window.localStorage && e.tile instanceof OpenLayers.Tile.Image) {
            var t = e.tile, i = t.url;
            !t.layer.crossOriginKeyword && OpenLayers.ProxyHost && 0 === i.indexOf(OpenLayers.ProxyHost) && (i = OpenLayers.Control.CacheWrite.urlMap[i]);
            var n = window.localStorage.getItem("olCache_" + i);
            n && (t.url = n, "tileerror" === e.type && t.setImgSrc(n));
        }
    },
    "destroy": function() {
        if (this.layers || this.map) {
            var e, t = this.layers || this.map.layers;
            for (e = t.length - 1; e >= 0; --e) this.removeLayer({
                "layer": t[e]
            });
        }
        this.map && this.map.events.un({
            "addlayer": this.addLayer,
            "removeLayer": this.removeLayer,
            "scope": this
        }), OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Control.CacheRead"
}), OpenLayers.Control.CacheWrite = OpenLayers.Class(OpenLayers.Control, {
    "layers": null,
    "imageFormat": "image/png",
    "quotaRegEx": /quota/i,
    "setMap": function(e) {
        OpenLayers.Control.prototype.setMap.apply(this, arguments);
        var t, i = this.layers || e.layers;
        for (t = i.length - 1; t >= 0; --t) this.addLayer({
            "layer": i[t]
        });
        this.layers || e.events.on({
            "addlayer": this.addLayer,
            "removeLayer": this.removeLayer,
            "scope": this
        });
    },
    "addLayer": function(e) {
        e.layer.events.on({
            "tileloadstart": this.makeSameOrigin,
            "tileloaded": this.onTileLoaded,
            "scope": this
        });
    },
    "removeLayer": function(e) {
        e.layer.events.un({
            "tileloadstart": this.makeSameOrigin,
            "tileloaded": this.onTileLoaded,
            "scope": this
        });
    },
    "makeSameOrigin": function(e) {
        if (this.active) {
            var t = e.tile;
            if (t instanceof OpenLayers.Tile.Image && !t.crossOriginKeyword && "data:" !== t.url.substr(0, 5)) {
                var i = OpenLayers.Request.makeSameOrigin(t.url, OpenLayers.ProxyHost);
                OpenLayers.Control.CacheWrite.urlMap[i] = t.url, t.url = i;
            }
        }
    },
    "onTileLoaded": function(e) {
        this.active && !e.aborted && e.tile instanceof OpenLayers.Tile.Image && "data:" !== e.tile.url.substr(0, 5) && (this.cache({
            "tile": e.tile
        }), delete OpenLayers.Control.CacheWrite.urlMap[e.tile.url]);
    },
    "cache": function(e) {
        if (window.localStorage) {
            var t = e.tile;
            try {
                var i = t.getCanvasContext();
                if (i) {
                    var n = OpenLayers.Control.CacheWrite.urlMap[t.url] || t.url;
                    window.localStorage.setItem("olCache_" + n, i.canvas.toDataURL(this.imageFormat));
                }
            } catch (e) {
                var r = e.name || e.message;
                r && this.quotaRegEx.test(r) ? this.events.triggerEvent("cachefull", {
                    "tile": t
                }) : OpenLayers.Console.error(e.toString());
            }
        }
    },
    "destroy": function() {
        if (this.layers || this.map) {
            var e, t = this.layers || this.map.layers;
            for (e = t.length - 1; e >= 0; --e) this.removeLayer({
                "layer": t[e]
            });
        }
        this.map && this.map.events.un({
            "addlayer": this.addLayer,
            "removeLayer": this.removeLayer,
            "scope": this
        }), OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Control.CacheWrite"
}), OpenLayers.Control.CacheWrite.clearCache = function() {
    if (window.localStorage) {
        var e, t;
        for (e = window.localStorage.length - 1; e >= 0; --e) "olCache_" === (t = window.localStorage.key(e)).substr(0, 8) && window.localStorage.removeItem(t);
    }
}, OpenLayers.Control.CacheWrite.urlMap = {}, OpenLayers.Handler.Drag = OpenLayers.Class(OpenLayers.Handler, {
    "started": !1,
    "stopDown": !0,
    "dragging": !1,
    "last": null,
    "start": null,
    "lastMoveEvt": null,
    "oldOnselectstart": null,
    "interval": 0,
    "timeoutId": null,
    "documentDrag": !1,
    "documentEvents": null,
    "initialize": function(e, t, i) {
        if (OpenLayers.Handler.prototype.initialize.apply(this, arguments), !0 === this.documentDrag) {
            var n = this;
            this._docMove = function(e) {
                n.mousemove({
                    "xy": {
                        "x": e.clientX,
                        "y": e.clientY
                    },
                    "element": document
                });
            }, this._docUp = function(e) {
                n.mouseup({
                    "xy": {
                        "x": e.clientX,
                        "y": e.clientY
                    }
                });
            };
        }
    },
    "dragstart": function(e) {
        var t = !0;
        return this.dragging = !1, this.checkModifiers(e) && this._pointerId == e.pointerId && (OpenLayers.Event.isLeftClick(e) || OpenLayers.Event.isSingleTouch(e)) ? (this.started = !0, 
        this.start = e.xy, this.last = e.xy, OpenLayers.Element.addClass(this.map.viewPortDiv, "olDragDown"), 
        this.down(e), this.callback("down", [ e.xy ]), OpenLayers.Event.preventDefault(e), 
        this.oldOnselectstart || (this.oldOnselectstart = document.onselectstart ? document.onselectstart : OpenLayers.Function.True), 
        document.onselectstart = OpenLayers.Function.False, t = !this.stopDown) : (delete this._pointerId, 
        this.started = !1, this.start = null, this.last = null), t;
    },
    "dragmove": function(e) {
        return this.lastMoveEvt = e, !this.started || this._pointerId != e.pointerId || this.timeoutId || e.xy.x == this.last.x && e.xy.y == this.last.y || (!0 === this.documentDrag && this.documentEvents && (e.element === document ? (this.adjustXY(e), 
        this.setEvent(e)) : this.removeDocumentEvents()), this.interval > 0 && (this.timeoutId = setTimeout(OpenLayers.Function.bind(this.removeTimeout, this), this.interval)), 
        this.dragging = !0, this.move(e), this.callback("move", [ e.xy ]), this.oldOnselectstart || (this.oldOnselectstart = document.onselectstart, 
        document.onselectstart = OpenLayers.Function.False), this.last = e.xy), !0;
    },
    "dragend": function(e) {
        if (this.started && this._pointerId == e.pointerId) {
            !0 === this.documentDrag && this.documentEvents && (this.adjustXY(e), this.removeDocumentEvents());
            var t = this.start != this.last;
            this.started = !1, this.dragging = !1, delete this._pointerId, OpenLayers.Element.removeClass(this.map.viewPortDiv, "olDragDown"), 
            this.up(e), this.callback("up", [ e.xy ]), t && this.callback("done", [ e.xy ]), 
            document.onselectstart = this.oldOnselectstart;
        }
        return !0;
    },
    "down": function(e) {},
    "move": function(e) {},
    "up": function(e) {},
    "out": function(e) {},
    "mousedown": function(e) {
        return this.dragstart(e);
    },
    "touchstart": function(e) {
        return this.startTouch(), "_pointerId" in this || (this._pointerId = e.pointerId), 
        this.dragstart(e);
    },
    "mousemove": function(e) {
        return this.dragmove(e);
    },
    "touchmove": function(e) {
        return this.dragmove(e);
    },
    "removeTimeout": function() {
        this.timeoutId = null, this.dragging && this.mousemove(this.lastMoveEvt);
    },
    "mouseup": function(e) {
        return this.dragend(e);
    },
    "touchend": function(e) {
        return e.xy = this.last, this.dragend(e);
    },
    "mouseout": function(e) {
        if (this.started && OpenLayers.Util.mouseLeft(e, this.map.viewPortDiv)) if (!0 === this.documentDrag) this.addDocumentEvents(); else {
            var t = this.start != this.last;
            this.started = !1, this.dragging = !1, OpenLayers.Element.removeClass(this.map.viewPortDiv, "olDragDown"), 
            this.out(e), this.callback("out", []), t && this.callback("done", [ e.xy ]), document.onselectstart && (document.onselectstart = this.oldOnselectstart);
        }
        return !0;
    },
    "click": function(e) {
        return this.start == this.last;
    },
    "activate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.activate.apply(this, arguments) && (this.dragging = !1, 
        e = !0), e;
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.started = !1, 
        this.dragging = !1, this.start = null, this.last = null, e = !0, OpenLayers.Element.removeClass(this.map.viewPortDiv, "olDragDown")), 
        e;
    },
    "adjustXY": function(e) {
        var t = OpenLayers.Util.pagePosition(this.map.viewPortDiv);
        e.xy.x -= t[0], e.xy.y -= t[1];
    },
    "addDocumentEvents": function() {
        OpenLayers.Element.addClass(document.body, "olDragDown"), this.documentEvents = !0, 
        OpenLayers.Event.observe(document, "mousemove", this._docMove), OpenLayers.Event.observe(document, "mouseup", this._docUp);
    },
    "removeDocumentEvents": function() {
        OpenLayers.Element.removeClass(document.body, "olDragDown"), this.documentEvents = !1, 
        OpenLayers.Event.stopObserving(document, "mousemove", this._docMove), OpenLayers.Event.stopObserving(document, "mouseup", this._docUp);
    },
    "CLASS_NAME": "OpenLayers.Handler.Drag"
}), OpenLayers.Handler.Feature = OpenLayers.Class(OpenLayers.Handler, {
    "EVENTMAP": {
        "click": {
            "in": "click",
            "out": "clickout"
        },
        "mousemove": {
            "in": "over",
            "out": "out"
        },
        "dblclick": {
            "in": "dblclick",
            "out": null
        },
        "mousedown": {
            "in": null,
            "out": null
        },
        "mouseup": {
            "in": null,
            "out": null
        },
        "touchstart": {
            "in": "click",
            "out": "clickout"
        }
    },
    "feature": null,
    "lastFeature": null,
    "down": null,
    "up": null,
    "clickTolerance": 4,
    "geometryTypes": null,
    "stopClick": !0,
    "stopDown": !0,
    "stopUp": !1,
    "initialize": function(e, t, i, n) {
        OpenLayers.Handler.prototype.initialize.apply(this, [ e, i, n ]), this.layer = t;
    },
    "touchstart": function(e) {
        return this.startTouch(), !!OpenLayers.Event.isMultiTouch(e) || this.mousedown(e);
    },
    "touchmove": function(e) {
        OpenLayers.Event.preventDefault(e);
    },
    "mousedown": function(e) {
        return (OpenLayers.Event.isLeftClick(e) || OpenLayers.Event.isSingleTouch(e)) && (this.down = e.xy), 
        !this.handle(e) || !this.stopDown;
    },
    "mouseup": function(e) {
        return this.up = e.xy, !this.handle(e) || !this.stopUp;
    },
    "click": function(e) {
        return !this.handle(e) || !this.stopClick;
    },
    "mousemove": function(e) {
        return !this.callbacks.over && !this.callbacks.out || (this.handle(e), !0);
    },
    "dblclick": function(e) {
        return !this.handle(e);
    },
    "geometryTypeMatches": function(e) {
        return null == this.geometryTypes || OpenLayers.Util.indexOf(this.geometryTypes, e.geometry.CLASS_NAME) > -1;
    },
    "handle": function(e) {
        this.feature && !this.feature.layer && (this.feature = null);
        var t = e.type, i = !1, n = !!this.feature, r = "click" == t || "dblclick" == t || "touchstart" == t;
        if (this.feature = this.layer.getFeatureFromEvent(e), this.feature && !this.feature.layer && (this.feature = null), 
        this.lastFeature && !this.lastFeature.layer && (this.lastFeature = null), this.feature) {
            "touchstart" === t && OpenLayers.Event.preventDefault(e);
            var s = this.feature != this.lastFeature;
            this.geometryTypeMatches(this.feature) ? (n && s ? (this.lastFeature && this.triggerCallback(t, "out", [ this.lastFeature ]), 
            this.triggerCallback(t, "in", [ this.feature ])) : n && !r || this.triggerCallback(t, "in", [ this.feature ]), 
            this.lastFeature = this.feature, i = !0) : (this.lastFeature && (n && s || r) && this.triggerCallback(t, "out", [ this.lastFeature ]), 
            this.feature = null);
        } else this.lastFeature && (n || r) && this.triggerCallback(t, "out", [ this.lastFeature ]);
        return i;
    },
    "triggerCallback": function(e, t, i) {
        var n = this.EVENTMAP[e][t];
        n && ("click" == e && this.up && this.down ? (Math.sqrt(Math.pow(this.up.x - this.down.x, 2) + Math.pow(this.up.y - this.down.y, 2)) <= this.clickTolerance && this.callback(n, i), 
        this.up = this.down = null) : this.callback(n, i));
    },
    "activate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.activate.apply(this, arguments) && (this.moveLayerToTop(), 
        this.map.events.on({
            "removelayer": this.handleMapEvents,
            "changelayer": this.handleMapEvents,
            "scope": this
        }), e = !0), e;
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.moveLayerBack(), 
        this.feature = null, this.lastFeature = null, this.down = null, this.up = null, 
        this.map.events.un({
            "removelayer": this.handleMapEvents,
            "changelayer": this.handleMapEvents,
            "scope": this
        }), e = !0), e;
    },
    "handleMapEvents": function(e) {
        "removelayer" != e.type && "order" != e.property || this.moveLayerToTop();
    },
    "moveLayerToTop": function() {
        var e = Math.max(this.map.Z_INDEX_BASE.Feature - 1, this.layer.getZIndex()) + 1;
        this.layer.setZIndex(e);
    },
    "moveLayerBack": function() {
        var e = this.layer.getZIndex() - 1;
        e >= this.map.Z_INDEX_BASE.Feature ? this.layer.setZIndex(e) : this.map.setLayerZIndex(this.layer, this.map.getLayerIndex(this.layer));
    },
    "CLASS_NAME": "OpenLayers.Handler.Feature"
}), OpenLayers.Control.DragFeature = OpenLayers.Class(OpenLayers.Control, {
    "geometryTypes": null,
    "onStart": function(e, t) {},
    "onDrag": function(e, t) {},
    "onComplete": function(e, t) {},
    "onEnter": function(e) {},
    "onLeave": function(e) {},
    "documentDrag": !1,
    "layer": null,
    "feature": null,
    "dragCallbacks": {},
    "featureCallbacks": {},
    "lastPixel": null,
    "initialize": function(e, t) {
        OpenLayers.Control.prototype.initialize.apply(this, [ t ]), this.layer = e, this.handlers = {
            "drag": new OpenLayers.Handler.Drag(this, OpenLayers.Util.extend({
                "down": this.downFeature,
                "move": this.moveFeature,
                "up": this.upFeature,
                "out": this.cancel,
                "done": this.doneDragging
            }, this.dragCallbacks), {
                "documentDrag": this.documentDrag
            }),
            "feature": new OpenLayers.Handler.Feature(this, this.layer, OpenLayers.Util.extend({
                "click": this.clickFeature,
                "clickout": this.clickoutFeature,
                "over": this.overFeature,
                "out": this.outFeature
            }, this.featureCallbacks), {
                "geometryTypes": this.geometryTypes
            })
        };
    },
    "clickFeature": function(e) {
        this.handlers.feature.touch && !this.over && this.overFeature(e) && (this.handlers.drag.dragstart(this.handlers.feature.evt), 
        this.handlers.drag.stopDown = !1);
    },
    "clickoutFeature": function(e) {
        this.handlers.feature.touch && this.over && (this.outFeature(e), this.handlers.drag.stopDown = !0);
    },
    "destroy": function() {
        this.layer = null, OpenLayers.Control.prototype.destroy.apply(this, []);
    },
    "activate": function() {
        return this.handlers.feature.activate() && OpenLayers.Control.prototype.activate.apply(this, arguments);
    },
    "deactivate": function() {
        return this.handlers.drag.deactivate(), this.handlers.feature.deactivate(), this.feature = null, 
        this.dragging = !1, this.lastPixel = null, OpenLayers.Element.removeClass(this.map.viewPortDiv, this.displayClass + "Over"), 
        OpenLayers.Control.prototype.deactivate.apply(this, arguments);
    },
    "overFeature": function(e) {
        var t = !1;
        return this.handlers.drag.dragging ? this.feature.id == e.id ? this.over = !0 : this.over = !1 : (this.feature = e, 
        this.handlers.drag.activate(), t = !0, this.over = !0, OpenLayers.Element.addClass(this.map.viewPortDiv, this.displayClass + "Over"), 
        this.onEnter(e)), t;
    },
    "downFeature": function(e) {
        this.lastPixel = e, this.onStart(this.feature, e);
    },
    "moveFeature": function(e) {
        var t = this.map.getResolution();
        this.feature.geometry.move(t * (e.x - this.lastPixel.x), t * (this.lastPixel.y - e.y)), 
        this.layer.drawFeature(this.feature), this.lastPixel = e, this.onDrag(this.feature, e);
    },
    "upFeature": function(e) {
        this.over || this.handlers.drag.deactivate();
    },
    "doneDragging": function(e) {
        this.onComplete(this.feature, e);
    },
    "outFeature": function(e) {
        this.handlers.drag.dragging ? this.feature.id == e.id && (this.over = !1) : (this.over = !1, 
        this.handlers.drag.deactivate(), OpenLayers.Element.removeClass(this.map.viewPortDiv, this.displayClass + "Over"), 
        this.onLeave(e), this.feature = null);
    },
    "cancel": function() {
        this.handlers.drag.deactivate(), this.over = !1;
    },
    "setMap": function(e) {
        this.handlers.drag.setMap(e), this.handlers.feature.setMap(e), OpenLayers.Control.prototype.setMap.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Control.DragFeature"
}), OpenLayers.Control.DragPan = OpenLayers.Class(OpenLayers.Control, {
    "type": OpenLayers.Control.TYPE_TOOL,
    "panned": !1,
    "interval": 0,
    "documentDrag": !1,
    "kinetic": null,
    "enableKinetic": !0,
    "kineticInterval": 10,
    "draw": function() {
        if (this.enableKinetic && OpenLayers.Kinetic) {
            var e = {
                "interval": this.kineticInterval
            };
            "object" == typeof this.enableKinetic && (e = OpenLayers.Util.extend(e, this.enableKinetic)), 
            this.kinetic = new OpenLayers.Kinetic(e);
        }
        this.handler = new OpenLayers.Handler.Drag(this, {
            "move": this.panMap,
            "done": this.panMapDone,
            "down": this.panMapStart
        }, {
            "interval": this.interval,
            "documentDrag": this.documentDrag
        });
    },
    "panMapStart": function() {
        this.kinetic && this.kinetic.begin();
    },
    "panMap": function(e) {
        this.kinetic && this.kinetic.update(e), this.panned = !0, this.map.pan(this.handler.last.x - e.x, this.handler.last.y - e.y, {
            "dragging": !0,
            "animate": !1
        });
    },
    "panMapDone": function(e) {
        if (this.panned) {
            var t = null;
            if (this.kinetic && (t = this.kinetic.end(e)), this.map.pan(this.handler.last.x - e.x, this.handler.last.y - e.y, {
                "dragging": !!t,
                "animate": !1
            }), t) {
                var i = this;
                this.kinetic.move(t, function(e, t, n) {
                    i.map.pan(e, t, {
                        "dragging": !n,
                        "animate": !1
                    });
                });
            }
            this.panned = !1;
        }
    },
    "CLASS_NAME": "OpenLayers.Control.DragPan"
}), OpenLayers.Control.DrawFeature = OpenLayers.Class(OpenLayers.Control, {
    "layer": null,
    "callbacks": null,
    "multi": !1,
    "featureAdded": function() {},
    "initialize": function(e, t, i) {
        OpenLayers.Control.prototype.initialize.apply(this, [ i ]), this.callbacks = OpenLayers.Util.extend({
            "done": this.drawFeature,
            "modify": function(e, t) {
                this.layer.events.triggerEvent("sketchmodified", {
                    "vertex": e,
                    "feature": t
                });
            },
            "create": function(e, t) {
                this.layer.events.triggerEvent("sketchstarted", {
                    "vertex": e,
                    "feature": t
                });
            }
        }, this.callbacks), this.layer = e, this.handlerOptions = this.handlerOptions || {}, 
        this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions, {
            "renderers": e.renderers,
            "rendererOptions": e.rendererOptions
        }), "multi" in this.handlerOptions || (this.handlerOptions.multi = this.multi);
        var n = this.layer.styleMap && this.layer.styleMap.styles.temporary;
        n && (this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions, {
            "styleMap": new OpenLayers.StyleMap({
                "default": n
            })
        })), this.handler = new t(this, this.callbacks, this.handlerOptions);
    },
    "drawFeature": function(e) {
        var t = new OpenLayers.Feature.Vector(e);
        !1 !== this.layer.events.triggerEvent("sketchcomplete", {
            "feature": t
        }) && (t.state = OpenLayers.State.INSERT, this.layer.addFeatures([ t ]), this.featureAdded(t), 
        this.events.triggerEvent("featureadded", {
            "feature": t
        }));
    },
    "insertXY": function(e, t) {
        this.handler && this.handler.line && this.handler.insertXY(e, t);
    },
    "insertDeltaXY": function(e, t) {
        this.handler && this.handler.line && this.handler.insertDeltaXY(e, t);
    },
    "insertDirectionLength": function(e, t) {
        this.handler && this.handler.line && this.handler.insertDirectionLength(e, t);
    },
    "insertDeflectionLength": function(e, t) {
        this.handler && this.handler.line && this.handler.insertDeflectionLength(e, t);
    },
    "undo": function() {
        return this.handler.undo && this.handler.undo();
    },
    "redo": function() {
        return this.handler.redo && this.handler.redo();
    },
    "finishSketch": function() {
        this.handler.finishGeometry();
    },
    "cancel": function() {
        this.handler.cancel();
    },
    "CLASS_NAME": "OpenLayers.Control.DrawFeature"
}), OpenLayers.Events.buttonclick = OpenLayers.Class({
    "target": null,
    "events": [ "mousedown", "mouseup", "click", "dblclick", "touchstart", "touchmove", "touchend", "keydown" ],
    "startRegEx": /^mousedown|touchstart$/,
    "cancelRegEx": /^touchmove$/,
    "completeRegEx": /^mouseup|touchend$/,
    "isDeviceTouchCapable": "ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch,
    "initialize": function(e) {
        this.target = e;
        for (var t = this.events.length - 1; t >= 0; --t) this.target.register(this.events[t], this, this.buttonClick, {
            "extension": !0
        });
    },
    "destroy": function() {
        for (var e = this.events.length - 1; e >= 0; --e) this.target.unregister(this.events[e], this, this.buttonClick);
        delete this.target;
    },
    "getPressedButton": function(e) {
        var t, i = 3;
        do {
            if (OpenLayers.Element.hasClass(e, "olButton")) {
                t = e;
                break;
            }
            e = e.parentNode;
        } while (--i > 0 && e);
        return t;
    },
    "ignore": function(e) {
        var t = 3, i = !1;
        do {
            if ("a" === e.nodeName.toLowerCase()) {
                i = !0;
                break;
            }
            e = e.parentNode;
        } while (--t > 0 && e);
        return i;
    },
    "buttonClick": function(e) {
        var t = !0, i = OpenLayers.Event.element(e);
        if (i && (OpenLayers.Event.isLeftClick(e) && !this.isDeviceTouchCapable || !~e.type.indexOf("mouse"))) {
            var n = this.getPressedButton(i);
            if (n) {
                if ("keydown" === e.type) switch (e.keyCode) {
                  case OpenLayers.Event.KEY_RETURN:
                  case OpenLayers.Event.KEY_SPACE:
                    this.target.triggerEvent("buttonclick", {
                        "buttonElement": n
                    }), OpenLayers.Event.stop(e), t = !1;
                } else if (this.startEvt) {
                    if (this.completeRegEx.test(e.type)) {
                        var r = OpenLayers.Util.pagePosition(n), s = OpenLayers.Util.getViewportElement(), a = window.pageYOffset || s.scrollTop, o = window.pageXOffset || s.scrollLeft;
                        r[0] = r[0] - o, r[1] = r[1] - a, this.target.triggerEvent("buttonclick", {
                            "buttonElement": n,
                            "buttonXY": {
                                "x": this.startEvt.clientX - r[0],
                                "y": this.startEvt.clientY - r[1]
                            }
                        });
                    }
                    this.cancelRegEx.test(e.type) && e.touches && this.startEvt.touches && (Math.abs(e.touches[0].olClientX - this.startEvt.touches[0].olClientX) > 4 || Math.abs(e.touches[0].olClientY - this.startEvt.touches[0].olClientY)) > 4 && delete this.startEvt, 
                    OpenLayers.Event.stop(e), t = !1;
                }
                this.startRegEx.test(e.type) && (this.startEvt = e, OpenLayers.Event.stop(e), t = !1);
            } else t = !this.ignore(OpenLayers.Event.element(e)), delete this.startEvt;
        }
        return t;
    }
}), OpenLayers.Control.Panel = OpenLayers.Class(OpenLayers.Control, {
    "controls": null,
    "autoActivate": !0,
    "defaultControl": null,
    "saveState": !1,
    "allowDepress": !1,
    "activeState": null,
    "initialize": function(e) {
        OpenLayers.Control.prototype.initialize.apply(this, [ e ]), this.controls = [], 
        this.activeState = {};
    },
    "destroy": function() {
        this.map && this.map.events.unregister("buttonclick", this, this.onButtonClick), 
        OpenLayers.Control.prototype.destroy.apply(this, arguments);
        for (var e, t = this.controls.length - 1; t >= 0; t--) (e = this.controls[t]).events && e.events.un({
            "activate": this.iconOn,
            "deactivate": this.iconOff
        }), e.panel_div = null;
        this.activeState = null;
    },
    "activate": function() {
        if (OpenLayers.Control.prototype.activate.apply(this, arguments)) {
            for (var e, t = 0, i = this.controls.length; t < i; t++) ((e = this.controls[t]) === this.defaultControl || this.saveState && this.activeState[e.id]) && e.activate();
            return !0 === this.saveState && (this.defaultControl = null), this.redraw(), !0;
        }
        return !1;
    },
    "deactivate": function() {
        if (OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {
            for (var e, t = 0, i = this.controls.length; t < i; t++) e = this.controls[t], this.activeState[e.id] = e.deactivate();
            return this.redraw(), !0;
        }
        return !1;
    },
    "draw": function() {
        return OpenLayers.Control.prototype.draw.apply(this, arguments), this.outsideViewport ? (this.events.attachToElement(this.div), 
        this.events.register("buttonclick", this, this.onButtonClick)) : this.map.events.register("buttonclick", this, this.onButtonClick), 
        this.addControlsToMap(this.controls), this.div;
    },
    "redraw": function() {
        for (e = this.div.childNodes.length - 1; e >= 0; e--) this.div.removeChild(this.div.childNodes[e]);
        if (this.div.innerHTML = "", this.active) for (var e = 0, t = this.controls.length; e < t; e++) this.div.appendChild(this.controls[e].panel_div);
    },
    "activateControl": function(e) {
        if (!this.active) return !1;
        if (e.type != OpenLayers.Control.TYPE_BUTTON) if (e.type != OpenLayers.Control.TYPE_TOGGLE) if (this.allowDepress && e.active) e.deactivate(); else {
            for (var t, i = 0, n = this.controls.length; i < n; i++) (t = this.controls[i]) == e || t.type !== OpenLayers.Control.TYPE_TOOL && null != t.type || t.deactivate();
            e.activate();
        } else e.active ? e.deactivate() : e.activate(); else e.trigger();
    },
    "addControls": function(e) {
        OpenLayers.Util.isArray(e) || (e = [ e ]), this.controls = this.controls.concat(e);
        for (var t = 0, i = e.length; t < i; t++) {
            var n = e[t], r = this.createControlMarkup(n);
            OpenLayers.Element.addClass(r, n.displayClass + "ItemInactive"), OpenLayers.Element.addClass(r, "olButton"), 
            "" == n.title || r.title || (r.title = n.title), n.panel_div = r;
        }
        this.map && (this.addControlsToMap(e), this.redraw());
    },
    "createControlMarkup": function(e) {
        return document.createElement("div");
    },
    "addControlsToMap": function(e) {
        for (var t, i = 0, n = e.length; i < n; i++) !0 === (t = e[i]).autoActivate ? (t.autoActivate = !1, 
        this.map.addControl(t), t.autoActivate = !0) : (this.map.addControl(t), t.deactivate()), 
        t.events.on({
            "activate": this.iconOn,
            "deactivate": this.iconOff
        });
    },
    "iconOn": function() {
        var e = this.panel_div, t = new RegExp("\\b(" + this.displayClass + "Item)Inactive\\b");
        e.className = e.className.replace(t, "$1Active");
    },
    "iconOff": function() {
        var e = this.panel_div, t = new RegExp("\\b(" + this.displayClass + "Item)Active\\b");
        e.className = e.className.replace(t, "$1Inactive");
    },
    "onButtonClick": function(e) {
        for (var t = this.controls, i = e.buttonElement, n = t.length - 1; n >= 0; --n) if (t[n].panel_div === i) {
            this.activateControl(t[n]);
            break;
        }
    },
    "getControlsBy": function(e, t) {
        var i = "function" == typeof t.test;
        return OpenLayers.Array.filter(this.controls, function(n) {
            return n[e] == t || i && t.test(n[e]);
        });
    },
    "getControlsByName": function(e) {
        return this.getControlsBy("name", e);
    },
    "getControlsByClass": function(e) {
        return this.getControlsBy("CLASS_NAME", e);
    },
    "CLASS_NAME": "OpenLayers.Control.Panel"
}), OpenLayers.Handler.Box = OpenLayers.Class(OpenLayers.Handler, {
    "dragHandler": null,
    "boxDivClassName": "olHandlerBoxZoomBox",
    "boxOffsets": null,
    "initialize": function(e, t, i) {
        OpenLayers.Handler.prototype.initialize.apply(this, arguments), this.dragHandler = new OpenLayers.Handler.Drag(this, {
            "down": this.startBox,
            "move": this.moveBox,
            "out": this.removeBox,
            "up": this.endBox
        }, {
            "keyMask": this.keyMask
        });
    },
    "destroy": function() {
        OpenLayers.Handler.prototype.destroy.apply(this, arguments), this.dragHandler && (this.dragHandler.destroy(), 
        this.dragHandler = null);
    },
    "setMap": function(e) {
        OpenLayers.Handler.prototype.setMap.apply(this, arguments), this.dragHandler && this.dragHandler.setMap(e);
    },
    "startBox": function(e) {
        this.callback("start", []), this.zoomBox = OpenLayers.Util.createDiv("zoomBox", {
            "x": -9999,
            "y": -9999
        }), this.zoomBox.className = this.boxDivClassName, this.zoomBox.style.zIndex = this.map.Z_INDEX_BASE.Popup - 1, 
        this.map.viewPortDiv.appendChild(this.zoomBox), OpenLayers.Element.addClass(this.map.viewPortDiv, "olDrawBox");
    },
    "moveBox": function(e) {
        var t = this.dragHandler.start.x, i = this.dragHandler.start.y, n = Math.abs(t - e.x), r = Math.abs(i - e.y), s = this.getBoxOffsets();
        this.zoomBox.style.width = n + s.width + 1 + "px", this.zoomBox.style.height = r + s.height + 1 + "px", 
        this.zoomBox.style.left = (e.x < t ? t - n - s.left : t - s.left) + "px", this.zoomBox.style.top = (e.y < i ? i - r - s.top : i - s.top) + "px";
    },
    "endBox": function(e) {
        var t;
        if (Math.abs(this.dragHandler.start.x - e.x) > 5 || Math.abs(this.dragHandler.start.y - e.y) > 5) {
            var i = this.dragHandler.start, n = Math.min(i.y, e.y), r = Math.max(i.y, e.y), s = Math.min(i.x, e.x), a = Math.max(i.x, e.x);
            t = new OpenLayers.Bounds(s, r, a, n);
        } else t = this.dragHandler.start.clone();
        this.removeBox(), this.callback("done", [ t ]);
    },
    "removeBox": function() {
        this.map.viewPortDiv.removeChild(this.zoomBox), this.zoomBox = null, this.boxOffsets = null, 
        OpenLayers.Element.removeClass(this.map.viewPortDiv, "olDrawBox");
    },
    "activate": function() {
        return !!OpenLayers.Handler.prototype.activate.apply(this, arguments) && (this.dragHandler.activate(), 
        !0);
    },
    "deactivate": function() {
        return !!OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.dragHandler.deactivate() && this.zoomBox && this.removeBox(), 
        !0);
    },
    "getBoxOffsets": function() {
        if (!this.boxOffsets) {
            var e = document.createElement("div");
            e.style.position = "absolute", e.style.border = "1px solid black", e.style.width = "3px", 
            document.body.appendChild(e);
            var t = 3 == e.clientWidth;
            document.body.removeChild(e);
            var i = parseInt(OpenLayers.Element.getStyle(this.zoomBox, "border-left-width")), n = parseInt(OpenLayers.Element.getStyle(this.zoomBox, "border-right-width")), r = parseInt(OpenLayers.Element.getStyle(this.zoomBox, "border-top-width")), s = parseInt(OpenLayers.Element.getStyle(this.zoomBox, "border-bottom-width"));
            this.boxOffsets = {
                "left": i,
                "right": n,
                "top": r,
                "bottom": s,
                "width": !1 === t ? i + n : 0,
                "height": !1 === t ? r + s : 0
            };
        }
        return this.boxOffsets;
    },
    "CLASS_NAME": "OpenLayers.Handler.Box"
}), OpenLayers.Control.ZoomBox = OpenLayers.Class(OpenLayers.Control, {
    "type": OpenLayers.Control.TYPE_TOOL,
    "out": !1,
    "keyMask": null,
    "alwaysZoom": !1,
    "zoomOnClick": !0,
    "draw": function() {
        this.handler = new OpenLayers.Handler.Box(this, {
            "done": this.zoomBox
        }, {
            "keyMask": this.keyMask
        });
    },
    "zoomBox": function(e) {
        if (e instanceof OpenLayers.Bounds) {
            var t, i = e.getCenterPixel();
            if (this.out) {
                var n = e.right - e.left, r = e.bottom - e.top, s = Math.min(this.map.size.h / r, this.map.size.w / n), a = this.map.getExtent(), o = this.map.getLonLatFromPixel(i), l = o.lon - a.getWidth() / 2 * s, h = o.lon + a.getWidth() / 2 * s, u = o.lat - a.getHeight() / 2 * s, p = o.lat + a.getHeight() / 2 * s;
                t = new OpenLayers.Bounds(l, u, h, p);
            } else {
                var c = this.map.getLonLatFromPixel({
                    "x": e.left,
                    "y": e.bottom
                }), d = this.map.getLonLatFromPixel({
                    "x": e.right,
                    "y": e.top
                });
                t = new OpenLayers.Bounds(c.lon, c.lat, d.lon, d.lat);
            }
            var f = this.map.getZoom(), y = this.map.getSize(), m = {
                "x": y.w / 2,
                "y": y.h / 2
            }, g = this.map.getZoomForExtent(t), v = this.map.getResolution(), L = this.map.getResolutionForZoom(g);
            if (v == L) this.map.setCenter(this.map.getLonLatFromPixel(i)); else {
                var O = {
                    "x": (v * i.x - L * m.x) / (v - L),
                    "y": (v * i.y - L * m.y) / (v - L)
                };
                this.map.zoomTo(g, O);
            }
            f == this.map.getZoom() && 1 == this.alwaysZoom && this.map.zoomTo(f + (this.out ? -1 : 1));
        } else this.zoomOnClick && (this.out ? this.map.zoomTo(this.map.getZoom() - 1, e) : this.map.zoomTo(this.map.getZoom() + 1, e));
    },
    "CLASS_NAME": "OpenLayers.Control.ZoomBox"
}), OpenLayers.Handler.MouseWheel = OpenLayers.Class(OpenLayers.Handler, {
    "wheelListener": null,
    "interval": 0,
    "maxDelta": Number.POSITIVE_INFINITY,
    "delta": 0,
    "cumulative": !0,
    "initialize": function(e, t, i) {
        OpenLayers.Handler.prototype.initialize.apply(this, arguments), this.wheelListener = OpenLayers.Function.bindAsEventListener(this.onWheelEvent, this);
    },
    "destroy": function() {
        OpenLayers.Handler.prototype.destroy.apply(this, arguments), this.wheelListener = null;
    },
    "onWheelEvent": function(e) {
        if (this.map && this.checkModifiers(e)) {
            for (var t = !1, i = !1, n = !1, r = OpenLayers.Event.element(e); null != r && !n && !t; ) {
                if (!t) try {
                    var s;
                    t = (s = r.currentStyle ? r.currentStyle.overflow : document.defaultView.getComputedStyle(r, null).getPropertyValue("overflow")) && "auto" == s || "scroll" == s;
                } catch (e) {}
                if (!i && !(i = OpenLayers.Element.hasClass(r, "olScrollable"))) for (var a = 0, o = this.map.layers.length; a < o; a++) {
                    var l = this.map.layers[a];
                    if (r == l.div || r == l.pane) {
                        i = !0;
                        break;
                    }
                }
                n = r == this.map.div, r = r.parentNode;
            }
            if (!t && n) {
                if (i) {
                    var h = 0;
                    if (e.wheelDelta ? ((h = e.wheelDelta) % 160 == 0 && (h *= .75), h /= 120) : e.detail && (h = -e.detail / Math.abs(e.detail)), 
                    this.delta += h, window.clearTimeout(this._timeoutId), this.interval && Math.abs(this.delta) < this.maxDelta) {
                        var u = OpenLayers.Util.extend({}, e);
                        this._timeoutId = window.setTimeout(OpenLayers.Function.bind(function() {
                            this.wheelZoom(u);
                        }, this), this.interval);
                    } else this.wheelZoom(e);
                }
                OpenLayers.Event.stop(e);
            }
        }
    },
    "wheelZoom": function(e) {
        var t = this.delta;
        this.delta = 0, t && (e.xy = this.map.events.getMousePosition(e), t < 0 ? this.callback("down", [ e, this.cumulative ? Math.max(-this.maxDelta, t) : -1 ]) : this.callback("up", [ e, this.cumulative ? Math.min(this.maxDelta, t) : 1 ]));
    },
    "activate": function(e) {
        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {
            var t = this.wheelListener;
            return OpenLayers.Event.observe(window, "DOMMouseScroll", t), OpenLayers.Event.observe(window, "mousewheel", t), 
            OpenLayers.Event.observe(document, "mousewheel", t), !0;
        }
        return !1;
    },
    "deactivate": function(e) {
        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {
            var t = this.wheelListener;
            return OpenLayers.Event.stopObserving(window, "DOMMouseScroll", t), OpenLayers.Event.stopObserving(window, "mousewheel", t), 
            OpenLayers.Event.stopObserving(document, "mousewheel", t), !0;
        }
        return !1;
    },
    "CLASS_NAME": "OpenLayers.Handler.MouseWheel"
}), OpenLayers.Handler.Click = OpenLayers.Class(OpenLayers.Handler, {
    "delay": 300,
    "single": !0,
    "double": !1,
    "pixelTolerance": 0,
    "dblclickTolerance": 13,
    "stopSingle": !1,
    "stopDouble": !1,
    "timerId": null,
    "down": null,
    "last": null,
    "first": null,
    "rightclickTimerId": null,
    "touchstart": function(e) {
        return this.startTouch(), this.down = this.getEventInfo(e), this.last = this.getEventInfo(e), 
        !0;
    },
    "touchmove": function(e) {
        return this.last = this.getEventInfo(e), !0;
    },
    "touchend": function(e) {
        return this.down && (e.xy = this.last.xy, e.lastTouches = this.last.touches, this.handleSingle(e), 
        this.down = null), !0;
    },
    "mousedown": function(e) {
        return this.down = this.getEventInfo(e), this.last = this.getEventInfo(e), !0;
    },
    "mouseup": function(e) {
        var t = !0;
        return this.checkModifiers(e) && this.control.handleRightClicks && OpenLayers.Event.isRightClick(e) && (t = this.rightclick(e)), 
        t;
    },
    "rightclick": function(e) {
        if (this.passesTolerance(e)) {
            if (null != this.rightclickTimerId) return this.clearTimer(), this.callback("dblrightclick", [ e ]), 
            !this.stopDouble;
            var t = this.double ? OpenLayers.Util.extend({}, e) : this.callback("rightclick", [ e ]), i = OpenLayers.Function.bind(this.delayedRightCall, this, t);
            this.rightclickTimerId = window.setTimeout(i, this.delay);
        }
        return !this.stopSingle;
    },
    "delayedRightCall": function(e) {
        this.rightclickTimerId = null, e && this.callback("rightclick", [ e ]);
    },
    "click": function(e) {
        return this.last || (this.last = this.getEventInfo(e)), this.handleSingle(e), !this.stopSingle;
    },
    "dblclick": function(e) {
        return this.handleDouble(e), !this.stopDouble;
    },
    "handleDouble": function(e) {
        this.passesDblclickTolerance(e) && (this.double && this.callback("dblclick", [ e ]), 
        this.clearTimer());
    },
    "handleSingle": function(e) {
        if (this.passesTolerance(e)) if (null != this.timerId) this.last.touches && 1 === this.last.touches.length && (this.double && OpenLayers.Event.preventDefault(e), 
        this.handleDouble(e)), this.last.touches && 2 === this.last.touches.length || this.clearTimer(); else {
            this.first = this.getEventInfo(e);
            var t = this.single ? OpenLayers.Util.extend({}, e) : null;
            this.queuePotentialClick(t);
        }
    },
    "queuePotentialClick": function(e) {
        this.timerId = window.setTimeout(OpenLayers.Function.bind(this.delayedCall, this, e), this.delay);
    },
    "passesTolerance": function(e) {
        var t = !0;
        if (null != this.pixelTolerance && this.down && this.down.xy && (t = this.pixelTolerance >= this.down.xy.distanceTo(e.xy)) && this.touch && this.down.touches.length === this.last.touches.length) for (var i = 0, n = this.down.touches.length; i < n; ++i) if (this.getTouchDistance(this.down.touches[i], this.last.touches[i]) > this.pixelTolerance) {
            t = !1;
            break;
        }
        return t;
    },
    "getTouchDistance": function(e, t) {
        return Math.sqrt(Math.pow(e.clientX - t.clientX, 2) + Math.pow(e.clientY - t.clientY, 2));
    },
    "passesDblclickTolerance": function(e) {
        var t = !0;
        return this.down && this.first && (t = this.down.xy.distanceTo(this.first.xy) <= this.dblclickTolerance), 
        t;
    },
    "clearTimer": function() {
        null != this.timerId && (window.clearTimeout(this.timerId), this.timerId = null), 
        null != this.rightclickTimerId && (window.clearTimeout(this.rightclickTimerId), 
        this.rightclickTimerId = null);
    },
    "delayedCall": function(e) {
        this.timerId = null, e && this.callback("click", [ e ]);
    },
    "getEventInfo": function(e) {
        var t;
        if (e.touches) {
            var i = e.touches.length;
            t = new Array(i);
            for (var n, r = 0; r < i; r++) n = e.touches[r], t[r] = {
                "clientX": n.olClientX,
                "clientY": n.olClientY
            };
        }
        return {
            "xy": e.xy,
            "touches": t
        };
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.clearTimer(), 
        this.down = null, this.first = null, this.last = null, e = !0), e;
    },
    "CLASS_NAME": "OpenLayers.Handler.Click"
}), OpenLayers.Control.Navigation = OpenLayers.Class(OpenLayers.Control, {
    "dragPan": null,
    "dragPanOptions": null,
    "pinchZoom": null,
    "pinchZoomOptions": null,
    "documentDrag": !1,
    "zoomBox": null,
    "zoomBoxEnabled": !0,
    "zoomWheelEnabled": !0,
    "mouseWheelOptions": null,
    "handleRightClicks": !1,
    "zoomBoxKeyMask": OpenLayers.Handler.MOD_SHIFT,
    "autoActivate": !0,
    "initialize": function(e) {
        this.handlers = {}, OpenLayers.Control.prototype.initialize.apply(this, arguments);
    },
    "destroy": function() {
        this.deactivate(), this.dragPan && this.dragPan.destroy(), this.dragPan = null, 
        this.zoomBox && this.zoomBox.destroy(), this.zoomBox = null, this.pinchZoom && this.pinchZoom.destroy(), 
        this.pinchZoom = null, OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "activate": function() {
        return this.dragPan.activate(), this.zoomWheelEnabled && this.handlers.wheel.activate(), 
        this.handlers.click.activate(), this.zoomBoxEnabled && this.zoomBox.activate(), 
        this.pinchZoom && this.pinchZoom.activate(), OpenLayers.Control.prototype.activate.apply(this, arguments);
    },
    "deactivate": function() {
        return this.pinchZoom && this.pinchZoom.deactivate(), this.zoomBox.deactivate(), 
        this.dragPan.deactivate(), this.handlers.click.deactivate(), this.handlers.wheel.deactivate(), 
        OpenLayers.Control.prototype.deactivate.apply(this, arguments);
    },
    "draw": function() {
        this.handleRightClicks && (this.map.viewPortDiv.oncontextmenu = OpenLayers.Function.False);
        var e = {
            "click": this.defaultClick,
            "dblclick": this.defaultDblClick,
            "dblrightclick": this.defaultDblRightClick
        }, t = {
            "double": !0,
            "stopDouble": !0
        };
        this.handlers.click = new OpenLayers.Handler.Click(this, e, t), this.dragPan = new OpenLayers.Control.DragPan(OpenLayers.Util.extend({
            "map": this.map,
            "documentDrag": this.documentDrag
        }, this.dragPanOptions)), this.zoomBox = new OpenLayers.Control.ZoomBox({
            "map": this.map,
            "keyMask": this.zoomBoxKeyMask
        }), this.dragPan.draw(), this.zoomBox.draw();
        var i = this.map.fractionalZoom ? {} : {
            "cumulative": !1,
            "interval": 50,
            "maxDelta": 6
        };
        this.handlers.wheel = new OpenLayers.Handler.MouseWheel(this, {
            "up": this.wheelUp,
            "down": this.wheelDown
        }, OpenLayers.Util.extend(i, this.mouseWheelOptions)), OpenLayers.Control.PinchZoom && (this.pinchZoom = new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({
            "map": this.map
        }, this.pinchZoomOptions)));
    },
    "defaultClick": function(e) {
        e.lastTouches && 2 == e.lastTouches.length && this.map.zoomOut();
    },
    "defaultDblClick": function(e) {
        this.map.zoomTo(this.map.zoom + 1, e.xy);
    },
    "defaultDblRightClick": function(e) {
        this.map.zoomTo(this.map.zoom - 1, e.xy);
    },
    "wheelChange": function(e, t) {
        this.map.fractionalZoom || (t = Math.round(t));
        var i = this.map.getZoom(), n = i + t;
        n = Math.max(n, 0), (n = Math.min(n, this.map.getNumZoomLevels())) !== i && this.map.zoomTo(n, e.xy);
    },
    "wheelUp": function(e, t) {
        this.wheelChange(e, t || 1);
    },
    "wheelDown": function(e, t) {
        this.wheelChange(e, t || -1);
    },
    "disableZoomBox": function() {
        this.zoomBoxEnabled = !1, this.zoomBox.deactivate();
    },
    "enableZoomBox": function() {
        this.zoomBoxEnabled = !0, this.active && this.zoomBox.activate();
    },
    "disableZoomWheel": function() {
        this.zoomWheelEnabled = !1, this.handlers.wheel.deactivate();
    },
    "enableZoomWheel": function() {
        this.zoomWheelEnabled = !0, this.active && this.handlers.wheel.activate();
    },
    "CLASS_NAME": "OpenLayers.Control.Navigation"
}), OpenLayers.Handler.Point = OpenLayers.Class(OpenLayers.Handler, {
    "point": null,
    "layer": null,
    "multi": !1,
    "citeCompliant": !1,
    "mouseDown": !1,
    "stoppedDown": null,
    "lastDown": null,
    "lastUp": null,
    "persist": !1,
    "stopDown": !1,
    "stopUp": !1,
    "layerOptions": null,
    "pixelTolerance": 5,
    "lastTouchPx": null,
    "initialize": function(e, t, i) {
        i && i.layerOptions && i.layerOptions.styleMap || (this.style = OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default, {})), 
        OpenLayers.Handler.prototype.initialize.apply(this, arguments);
    },
    "activate": function() {
        if (!OpenLayers.Handler.prototype.activate.apply(this, arguments)) return !1;
        var e = OpenLayers.Util.extend({
            "displayInLayerSwitcher": !1,
            "calculateInRange": OpenLayers.Function.True,
            "wrapDateLine": this.citeCompliant
        }, this.layerOptions);
        return this.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, e), this.map.addLayer(this.layer), 
        !0;
    },
    "createFeature": function(e) {
        var t = this.layer.getLonLatFromViewPortPx(e), i = new OpenLayers.Geometry.Point(t.lon, t.lat);
        this.point = new OpenLayers.Feature.Vector(i), this.callback("create", [ this.point.geometry, this.point ]), 
        this.point.geometry.clearBounds(), this.layer.addFeatures([ this.point ], {
            "silent": !0
        });
    },
    "deactivate": function() {
        return !!OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.cancel(), 
        null != this.layer.map && (this.destroyFeature(!0), this.layer.destroy(!1)), this.layer = null, 
        !0);
    },
    "destroyFeature": function(e) {
        !this.layer || !e && this.persist || this.layer.destroyFeatures(), this.point = null;
    },
    "destroyPersistedFeature": function() {
        var e = this.layer;
        e && e.features.length > 1 && this.layer.features[0].destroy();
    },
    "finalize": function(e) {
        var t = e ? "cancel" : "done";
        this.mouseDown = !1, this.lastDown = null, this.lastUp = null, this.lastTouchPx = null, 
        this.callback(t, [ this.geometryClone() ]), this.destroyFeature(e);
    },
    "cancel": function() {
        this.finalize(!0);
    },
    "click": function(e) {
        return OpenLayers.Event.stop(e), !1;
    },
    "dblclick": function(e) {
        return OpenLayers.Event.stop(e), !1;
    },
    "modifyFeature": function(e) {
        this.point || this.createFeature(e);
        var t = this.layer.getLonLatFromViewPortPx(e);
        this.point.geometry.x = t.lon, this.point.geometry.y = t.lat, this.callback("modify", [ this.point.geometry, this.point, !1 ]), 
        this.point.geometry.clearBounds(), this.drawFeature();
    },
    "drawFeature": function() {
        this.layer.drawFeature(this.point, this.style);
    },
    "getGeometry": function() {
        var e = this.point && this.point.geometry;
        return e && this.multi && (e = new OpenLayers.Geometry.MultiPoint([ e ])), e;
    },
    "geometryClone": function() {
        var e = this.getGeometry();
        return e && e.clone();
    },
    "mousedown": function(e) {
        return this.down(e);
    },
    "touchstart": function(e) {
        return this.startTouch(), this.lastTouchPx = e.xy, this.down(e);
    },
    "mousemove": function(e) {
        return this.move(e);
    },
    "touchmove": function(e) {
        return this.lastTouchPx = e.xy, this.move(e);
    },
    "mouseup": function(e) {
        return this.up(e);
    },
    "touchend": function(e) {
        return e.xy = this.lastTouchPx, this.up(e);
    },
    "down": function(e) {
        return this.mouseDown = !0, this.lastDown = e.xy, this.touch || this.modifyFeature(e.xy), 
        this.stoppedDown = this.stopDown, !this.stopDown;
    },
    "move": function(e) {
        return this.touch || this.mouseDown && !this.stoppedDown || this.modifyFeature(e.xy), 
        !0;
    },
    "up": function(e) {
        return this.mouseDown = !1, this.stoppedDown = this.stopDown, !this.checkModifiers(e) || (!(!this.lastUp || !this.lastUp.equals(e.xy)) || (!this.lastDown || !this.passesTolerance(this.lastDown, e.xy, this.pixelTolerance) || (this.touch && this.modifyFeature(e.xy), 
        this.persist && this.destroyPersistedFeature(), this.lastUp = e.xy, this.finalize(), 
        !this.stopUp)));
    },
    "mouseout": function(e) {
        OpenLayers.Util.mouseLeft(e, this.map.viewPortDiv) && (this.stoppedDown = this.stopDown, 
        this.mouseDown = !1);
    },
    "passesTolerance": function(e, t, i) {
        var n = !0;
        return null != i && e && t && e.distanceTo(t) > i && (n = !1), n;
    },
    "CLASS_NAME": "OpenLayers.Handler.Point"
}), OpenLayers.Handler.Path = OpenLayers.Class(OpenLayers.Handler.Point, {
    "line": null,
    "maxVertices": null,
    "doubleTouchTolerance": 20,
    "freehand": !1,
    "freehandToggle": "shiftKey",
    "timerId": null,
    "redoStack": null,
    "createFeature": function(e) {
        var t = this.layer.getLonLatFromViewPortPx(e), i = new OpenLayers.Geometry.Point(t.lon, t.lat);
        this.point = new OpenLayers.Feature.Vector(i), this.line = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([ this.point.geometry ])), 
        this.callback("create", [ this.point.geometry, this.getSketch() ]), this.point.geometry.clearBounds(), 
        this.layer.addFeatures([ this.line, this.point ], {
            "silent": !0
        });
    },
    "destroyFeature": function(e) {
        OpenLayers.Handler.Point.prototype.destroyFeature.call(this, e), this.line = null;
    },
    "destroyPersistedFeature": function() {
        var e = this.layer;
        e && e.features.length > 2 && this.layer.features[0].destroy();
    },
    "removePoint": function() {
        this.point && this.layer.removeFeatures([ this.point ]);
    },
    "addPoint": function(e) {
        this.layer.removeFeatures([ this.point ]);
        var t = this.layer.getLonLatFromViewPortPx(e);
        this.point = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(t.lon, t.lat)), 
        this.line.geometry.addComponent(this.point.geometry, this.line.geometry.components.length), 
        this.layer.addFeatures([ this.point ]), this.callback("point", [ this.point.geometry, this.getGeometry() ]), 
        this.callback("modify", [ this.point.geometry, this.getSketch() ]), this.drawFeature(), 
        delete this.redoStack;
    },
    "insertXY": function(e, t) {
        this.line.geometry.addComponent(new OpenLayers.Geometry.Point(e, t), this.getCurrentPointIndex()), 
        this.drawFeature(), delete this.redoStack;
    },
    "insertDeltaXY": function(e, t) {
        var i = this.getCurrentPointIndex() - 1, n = this.line.geometry.components[i];
        !n || isNaN(n.x) || isNaN(n.y) || this.insertXY(n.x + e, n.y + t);
    },
    "insertDirectionLength": function(e, t) {
        e *= Math.PI / 180;
        var i = t * Math.cos(e), n = t * Math.sin(e);
        this.insertDeltaXY(i, n);
    },
    "insertDeflectionLength": function(e, t) {
        var i = this.getCurrentPointIndex() - 1;
        if (i > 0) {
            var n = this.line.geometry.components[i], r = this.line.geometry.components[i - 1], s = Math.atan2(n.y - r.y, n.x - r.x);
            this.insertDirectionLength(180 * s / Math.PI + e, t);
        }
    },
    "getCurrentPointIndex": function() {
        return this.line.geometry.components.length - 1;
    },
    "undo": function() {
        var e = this.line.geometry, t = e.components, i = this.getCurrentPointIndex() - 1, n = t[i], r = e.removeComponent(n);
        if (r) {
            if (this.touch && i > 0) {
                var s = (t = e.components)[i - 1], a = t[this.getCurrentPointIndex()];
                a.x = s.x, a.y = s.y;
            }
            this.redoStack || (this.redoStack = []), this.redoStack.push(n), this.drawFeature();
        }
        return r;
    },
    "redo": function() {
        var e = this.redoStack && this.redoStack.pop();
        return e && (this.line.geometry.addComponent(e, this.getCurrentPointIndex()), this.drawFeature()), 
        !!e;
    },
    "freehandMode": function(e) {
        return this.freehandToggle && e[this.freehandToggle] ? !this.freehand : this.freehand;
    },
    "modifyFeature": function(e, t) {
        this.line || this.createFeature(e);
        var i = this.layer.getLonLatFromViewPortPx(e);
        this.point.geometry.x = i.lon, this.point.geometry.y = i.lat, this.callback("modify", [ this.point.geometry, this.getSketch(), t ]), 
        this.point.geometry.clearBounds(), this.drawFeature();
    },
    "drawFeature": function() {
        this.layer.drawFeature(this.line, this.style), this.layer.drawFeature(this.point, this.style);
    },
    "getSketch": function() {
        return this.line;
    },
    "getGeometry": function() {
        var e = this.line && this.line.geometry;
        return e && this.multi && (e = new OpenLayers.Geometry.MultiLineString([ e ])), 
        e;
    },
    "touchstart": function(e) {
        return this.timerId && this.passesTolerance(this.lastTouchPx, e.xy, this.doubleTouchTolerance) ? (this.finishGeometry(), 
        window.clearTimeout(this.timerId), this.timerId = null, !1) : (this.timerId && (window.clearTimeout(this.timerId), 
        this.timerId = null), this.timerId = window.setTimeout(OpenLayers.Function.bind(function() {
            this.timerId = null;
        }, this), 300), OpenLayers.Handler.Point.prototype.touchstart.call(this, e));
    },
    "down": function(e) {
        var t = this.stopDown;
        return this.freehandMode(e) && (t = !0, this.touch && (this.modifyFeature(e.xy, !!this.lastUp), 
        OpenLayers.Event.stop(e))), this.touch || this.lastDown && this.passesTolerance(this.lastDown, e.xy, this.pixelTolerance) || this.modifyFeature(e.xy, !!this.lastUp), 
        this.mouseDown = !0, this.lastDown = e.xy, this.stoppedDown = t, !t;
    },
    "move": function(e) {
        return this.stoppedDown && this.freehandMode(e) ? (this.persist && this.destroyPersistedFeature(), 
        this.maxVertices && this.line && this.line.geometry.components.length === this.maxVertices ? (this.removePoint(), 
        this.finalize()) : this.addPoint(e.xy), !1) : (this.touch || this.mouseDown && !this.stoppedDown || this.modifyFeature(e.xy, !!this.lastUp), 
        !0);
    },
    "up": function(e) {
        return !this.mouseDown || this.lastUp && this.lastUp.equals(e.xy) || (this.stoppedDown && this.freehandMode(e) ? (this.persist && this.destroyPersistedFeature(), 
        this.removePoint(), this.finalize()) : this.passesTolerance(this.lastDown, e.xy, this.pixelTolerance) && (this.touch && this.modifyFeature(e.xy), 
        null == this.lastUp && this.persist && this.destroyPersistedFeature(), this.addPoint(e.xy), 
        this.lastUp = e.xy, this.line.geometry.components.length === this.maxVertices + 1 && this.finishGeometry())), 
        this.stoppedDown = this.stopDown, this.mouseDown = !1, !this.stopUp;
    },
    "finishGeometry": function() {
        var e = this.line.geometry.components.length - 1;
        this.line.geometry.removeComponent(this.line.geometry.components[e]), this.removePoint(), 
        this.finalize();
    },
    "dblclick": function(e) {
        return this.freehandMode(e) || this.finishGeometry(), !1;
    },
    "CLASS_NAME": "OpenLayers.Handler.Path"
}), OpenLayers.Handler.Polygon = OpenLayers.Class(OpenLayers.Handler.Path, {
    "holeModifier": null,
    "drawingHole": !1,
    "polygon": null,
    "createFeature": function(e) {
        var t = this.layer.getLonLatFromViewPortPx(e), i = new OpenLayers.Geometry.Point(t.lon, t.lat);
        this.point = new OpenLayers.Feature.Vector(i), this.line = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LinearRing([ this.point.geometry ])), 
        this.polygon = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([ this.line.geometry ])), 
        this.callback("create", [ this.point.geometry, this.getSketch() ]), this.point.geometry.clearBounds(), 
        this.layer.addFeatures([ this.polygon, this.point ], {
            "silent": !0
        });
    },
    "addPoint": function(e) {
        if (!this.drawingHole && this.holeModifier && this.evt && this.evt[this.holeModifier]) for (var t, i, n = this.point.geometry, r = this.control.layer.features, s = r.length - 1; s >= 0; --s) if (((t = r[s].geometry) instanceof OpenLayers.Geometry.Polygon || t instanceof OpenLayers.Geometry.MultiPolygon) && t.intersects(n)) {
            i = r[s], this.control.layer.removeFeatures([ i ], {
                "silent": !0
            }), this.control.layer.events.registerPriority("sketchcomplete", this, this.finalizeInteriorRing), 
            this.control.layer.events.registerPriority("sketchmodified", this, this.enforceTopology), 
            i.geometry.addComponent(this.line.geometry), this.polygon = i, this.drawingHole = !0;
            break;
        }
        OpenLayers.Handler.Path.prototype.addPoint.apply(this, arguments);
    },
    "getCurrentPointIndex": function() {
        return this.line.geometry.components.length - 2;
    },
    "enforceTopology": function(e) {
        var t = e.vertex, i = this.line.geometry.components;
        if (!this.polygon.geometry.intersects(t)) {
            var n = i[i.length - 3];
            t.x = n.x, t.y = n.y;
        }
    },
    "finishGeometry": function() {
        var e = this.line.geometry.components.length - 2;
        this.line.geometry.removeComponent(this.line.geometry.components[e]), this.removePoint(), 
        this.finalize();
    },
    "finalizeInteriorRing": function() {
        var e = this.line.geometry, t = 0 !== e.getArea();
        if (t) {
            for (var i = this.polygon.geometry.components, n = i.length - 2; n >= 0; --n) if (e.intersects(i[n])) {
                t = !1;
                break;
            }
            if (t) {
                e: for (n = i.length - 2; n > 0; --n) for (var r = i[n].components, s = 0, a = r.length; s < a; ++s) if (e.containsPoint(r[s])) {
                    t = !1;
                    break e;
                }
            }
        }
        return t ? this.polygon.state !== OpenLayers.State.INSERT && (this.polygon.state = OpenLayers.State.UPDATE) : this.polygon.geometry.removeComponent(e), 
        this.restoreFeature(), !1;
    },
    "cancel": function() {
        return this.drawingHole && (this.polygon.geometry.removeComponent(this.line.geometry), 
        this.restoreFeature(!0)), OpenLayers.Handler.Path.prototype.cancel.apply(this, arguments);
    },
    "restoreFeature": function(e) {
        this.control.layer.events.unregister("sketchcomplete", this, this.finalizeInteriorRing), 
        this.control.layer.events.unregister("sketchmodified", this, this.enforceTopology), 
        this.layer.removeFeatures([ this.polygon ], {
            "silent": !0
        }), this.control.layer.addFeatures([ this.polygon ], {
            "silent": !0
        }), this.drawingHole = !1, e || this.control.layer.events.triggerEvent("sketchcomplete", {
            "feature": this.polygon
        });
    },
    "destroyFeature": function(e) {
        OpenLayers.Handler.Path.prototype.destroyFeature.call(this, e), this.polygon = null;
    },
    "drawFeature": function() {
        this.layer.drawFeature(this.polygon, this.style), this.layer.drawFeature(this.point, this.style);
    },
    "getSketch": function() {
        return this.polygon;
    },
    "getGeometry": function() {
        var e = this.polygon && this.polygon.geometry;
        return e && this.multi && (e = new OpenLayers.Geometry.MultiPolygon([ e ])), e;
    },
    "CLASS_NAME": "OpenLayers.Handler.Polygon"
}), OpenLayers.Control.EditingToolbar = OpenLayers.Class(OpenLayers.Control.Panel, {
    "citeCompliant": !1,
    "initialize": function(e, t) {
        OpenLayers.Control.Panel.prototype.initialize.apply(this, [ t ]), this.addControls([ new OpenLayers.Control.Navigation() ]);
        var i = [ new OpenLayers.Control.DrawFeature(e, OpenLayers.Handler.Point, {
            "displayClass": "olControlDrawFeaturePoint",
            "handlerOptions": {
                "citeCompliant": this.citeCompliant
            }
        }), new OpenLayers.Control.DrawFeature(e, OpenLayers.Handler.Path, {
            "displayClass": "olControlDrawFeaturePath",
            "handlerOptions": {
                "citeCompliant": this.citeCompliant
            }
        }), new OpenLayers.Control.DrawFeature(e, OpenLayers.Handler.Polygon, {
            "displayClass": "olControlDrawFeaturePolygon",
            "handlerOptions": {
                "citeCompliant": this.citeCompliant
            }
        }) ];
        this.addControls(i);
    },
    "draw": function() {
        var e = OpenLayers.Control.Panel.prototype.draw.apply(this, arguments);
        return null === this.defaultControl && (this.defaultControl = this.controls[0]), 
        e;
    },
    "CLASS_NAME": "OpenLayers.Control.EditingToolbar"
}), OpenLayers.Control.Geolocate = OpenLayers.Class(OpenLayers.Control, {
    "geolocation": null,
    "available": "geolocation" in navigator,
    "bind": !0,
    "watch": !1,
    "geolocationOptions": null,
    "destroy": function() {
        this.deactivate(), OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "activate": function() {
        return this.available && !this.geolocation && (this.geolocation = navigator.geolocation), 
        this.geolocation ? !!OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.watch ? this.watchId = this.geolocation.watchPosition(OpenLayers.Function.bind(this.geolocate, this), OpenLayers.Function.bind(this.failure, this), this.geolocationOptions) : this.getCurrentLocation(), 
        !0) : (this.events.triggerEvent("locationuncapable"), !1);
    },
    "deactivate": function() {
        return this.active && null !== this.watchId && this.geolocation.clearWatch(this.watchId), 
        OpenLayers.Control.prototype.deactivate.apply(this, arguments);
    },
    "geolocate": function(e) {
        var t = new OpenLayers.LonLat(e.coords.longitude, e.coords.latitude).transform(new OpenLayers.Projection("EPSG:4326"), this.map.getProjectionObject());
        this.bind && this.map.setCenter(t), this.events.triggerEvent("locationupdated", {
            "position": e,
            "point": new OpenLayers.Geometry.Point(t.lon, t.lat)
        });
    },
    "getCurrentLocation": function() {
        return !(!this.active || this.watch) && (this.geolocation.getCurrentPosition(OpenLayers.Function.bind(this.geolocate, this), OpenLayers.Function.bind(this.failure, this), this.geolocationOptions), 
        !0);
    },
    "failure": function(e) {
        this.events.triggerEvent("locationfailed", {
            "error": e
        });
    },
    "CLASS_NAME": "OpenLayers.Control.Geolocate"
}), OpenLayers.Handler.Hover = OpenLayers.Class(OpenLayers.Handler, {
    "delay": 500,
    "pixelTolerance": null,
    "stopMove": !1,
    "px": null,
    "timerId": null,
    "mousemove": function(e) {
        return this.passesTolerance(e.xy) && (this.clearTimer(), this.callback("move", [ e ]), 
        this.px = e.xy, e = OpenLayers.Util.extend({}, e), this.timerId = window.setTimeout(OpenLayers.Function.bind(this.delayedCall, this, e), this.delay)), 
        !this.stopMove;
    },
    "mouseout": function(e) {
        return OpenLayers.Util.mouseLeft(e, this.map.viewPortDiv) && (this.clearTimer(), 
        this.callback("move", [ e ])), !0;
    },
    "passesTolerance": function(e) {
        var t = !0;
        return this.pixelTolerance && this.px && Math.sqrt(Math.pow(this.px.x - e.x, 2) + Math.pow(this.px.y - e.y, 2)) < this.pixelTolerance && (t = !1), 
        t;
    },
    "clearTimer": function() {
        null != this.timerId && (window.clearTimeout(this.timerId), this.timerId = null);
    },
    "delayedCall": function(e) {
        this.callback("pause", [ e ]);
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.clearTimer(), 
        e = !0), e;
    },
    "CLASS_NAME": "OpenLayers.Handler.Hover"
}), OpenLayers.Control.GetFeature = OpenLayers.Class(OpenLayers.Control, {
    "protocol": null,
    "multipleKey": null,
    "toggleKey": null,
    "modifiers": null,
    "multiple": !1,
    "click": !0,
    "single": !0,
    "clickout": !0,
    "toggle": !1,
    "clickTolerance": 5,
    "hover": !1,
    "box": !1,
    "maxFeatures": 10,
    "features": null,
    "hoverFeature": null,
    "handlers": null,
    "hoverResponse": null,
    "filterType": OpenLayers.Filter.Spatial.BBOX,
    "initialize": function(e) {
        e.handlerOptions = e.handlerOptions || {}, OpenLayers.Control.prototype.initialize.apply(this, [ e ]), 
        this.features = {}, this.handlers = {}, this.click && (this.handlers.click = new OpenLayers.Handler.Click(this, {
            "click": this.selectClick
        }, this.handlerOptions.click || {})), this.box && (this.handlers.box = new OpenLayers.Handler.Box(this, {
            "done": this.selectBox
        }, OpenLayers.Util.extend(this.handlerOptions.box, {
            "boxDivClassName": "olHandlerBoxSelectFeature"
        }))), this.hover && (this.handlers.hover = new OpenLayers.Handler.Hover(this, {
            "move": this.cancelHover,
            "pause": this.selectHover
        }, OpenLayers.Util.applyDefaults(this.handlerOptions.hover, {
            "delay": 250,
            "pixelTolerance": 2
        })));
    },
    "activate": function() {
        if (!this.active) for (var e in this.handlers) this.handlers[e].activate();
        return OpenLayers.Control.prototype.activate.apply(this, arguments);
    },
    "deactivate": function() {
        if (this.active) for (var e in this.handlers) this.handlers[e].deactivate();
        return OpenLayers.Control.prototype.deactivate.apply(this, arguments);
    },
    "selectClick": function(e) {
        var t = this.pixelToBounds(e.xy);
        this.setModifiers(e), this.request(t, {
            "single": this.single
        });
    },
    "selectBox": function(e) {
        var t;
        if (e instanceof OpenLayers.Bounds) {
            var i = this.map.getLonLatFromPixel({
                "x": e.left,
                "y": e.bottom
            }), n = this.map.getLonLatFromPixel({
                "x": e.right,
                "y": e.top
            });
            t = new OpenLayers.Bounds(i.lon, i.lat, n.lon, n.lat);
        } else {
            if (this.click) return;
            t = this.pixelToBounds(e);
        }
        this.setModifiers(this.handlers.box.dragHandler.evt), this.request(t);
    },
    "selectHover": function(e) {
        var t = this.pixelToBounds(e.xy);
        this.request(t, {
            "single": !0,
            "hover": !0
        });
    },
    "cancelHover": function() {
        this.hoverResponse && (this.protocol.abort(this.hoverResponse), this.hoverResponse = null, 
        OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait"));
    },
    "request": function(e, t) {
        t = t || {};
        var i = new OpenLayers.Filter.Spatial({
            "type": this.filterType,
            "value": e
        });
        OpenLayers.Element.addClass(this.map.viewPortDiv, "olCursorWait");
        var n = this.protocol.read({
            "maxFeatures": 1 == t.single ? this.maxFeatures : void 0,
            "filter": i,
            "callback": function(i) {
                i.success() && (i.features.length ? 1 == t.single ? this.selectBestFeature(i.features, e.getCenterLonLat(), t) : this.select(i.features) : t.hover ? this.hoverSelect() : (this.events.triggerEvent("clickout"), 
                this.clickout && this.unselectAll())), OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait");
            },
            "scope": this
        });
        1 == t.hover && (this.hoverResponse = n);
    },
    "selectBestFeature": function(e, t, i) {
        if (i = i || {}, e.length) {
            for (var n, r, s, a = new OpenLayers.Geometry.Point(t.lon, t.lat), o = Number.MAX_VALUE, l = 0; l < e.length && !((n = e[l]).geometry && (s = a.distanceTo(n.geometry, {
                "edge": !1
            })) < o && (o = s, r = n, 0 == o)); ++l) ;
            1 == i.hover ? this.hoverSelect(r) : this.select(r || e);
        }
    },
    "setModifiers": function(e) {
        this.modifiers = {
            "multiple": this.multiple || this.multipleKey && e[this.multipleKey],
            "toggle": this.toggle || this.toggleKey && e[this.toggleKey]
        };
    },
    "select": function(e) {
        this.modifiers.multiple || this.modifiers.toggle || this.unselectAll(), OpenLayers.Util.isArray(e) || (e = [ e ]);
        var t = this.events.triggerEvent("beforefeaturesselected", {
            "features": e
        });
        if (!1 !== t) {
            for (var i, n = [], r = 0, s = e.length; r < s; ++r) i = e[r], this.features[i.fid || i.id] ? this.modifiers.toggle && this.unselect(this.features[i.fid || i.id]) : !1 !== (t = this.events.triggerEvent("beforefeatureselected", {
                "feature": i
            })) && (this.features[i.fid || i.id] = i, n.push(i), this.events.triggerEvent("featureselected", {
                "feature": i
            }));
            this.events.triggerEvent("featuresselected", {
                "features": n
            });
        }
    },
    "hoverSelect": function(e) {
        var t = e ? e.fid || e.id : null, i = this.hoverFeature ? this.hoverFeature.fid || this.hoverFeature.id : null;
        i && i != t && (this.events.triggerEvent("outfeature", {
            "feature": this.hoverFeature
        }), this.hoverFeature = null), t && t != i && (this.events.triggerEvent("hoverfeature", {
            "feature": e
        }), this.hoverFeature = e);
    },
    "unselect": function(e) {
        delete this.features[e.fid || e.id], this.events.triggerEvent("featureunselected", {
            "feature": e
        });
    },
    "unselectAll": function() {
        for (var e in this.features) this.unselect(this.features[e]);
    },
    "setMap": function(e) {
        for (var t in this.handlers) this.handlers[t].setMap(e);
        OpenLayers.Control.prototype.setMap.apply(this, arguments);
    },
    "pixelToBounds": function(e) {
        var t = e.add(-this.clickTolerance / 2, this.clickTolerance / 2), i = e.add(this.clickTolerance / 2, -this.clickTolerance / 2), n = this.map.getLonLatFromPixel(t), r = this.map.getLonLatFromPixel(i);
        return new OpenLayers.Bounds(n.lon, n.lat, r.lon, r.lat);
    },
    "CLASS_NAME": "OpenLayers.Control.GetFeature"
}), OpenLayers.Layer.Vector = OpenLayers.Class(OpenLayers.Layer, {
    "isBaseLayer": !1,
    "isFixed": !1,
    "features": null,
    "filter": null,
    "selectedFeatures": null,
    "unrenderedFeatures": null,
    "reportError": !0,
    "style": null,
    "styleMap": null,
    "strategies": null,
    "protocol": null,
    "renderers": [ "SVG", "VML", "Canvas" ],
    "renderer": null,
    "rendererOptions": null,
    "geometryType": null,
    "drawn": !1,
    "ratio": 1,
    "initialize": function(e, t) {
        if (OpenLayers.Layer.prototype.initialize.apply(this, arguments), this.renderer && this.renderer.supported() || this.assignRenderer(), 
        this.renderer && this.renderer.supported() || (this.renderer = null, this.displayError()), 
        this.styleMap || (this.styleMap = new OpenLayers.StyleMap()), this.features = [], 
        this.selectedFeatures = [], this.unrenderedFeatures = {}, this.strategies) for (var i = 0, n = this.strategies.length; i < n; i++) this.strategies[i].setLayer(this);
    },
    "destroy": function() {
        if (this.strategies) {
            var e, t, i;
            for (t = 0, i = this.strategies.length; t < i; t++) (e = this.strategies[t]).autoDestroy && e.destroy();
            this.strategies = null;
        }
        this.protocol && (this.protocol.autoDestroy && this.protocol.destroy(), this.protocol = null), 
        this.destroyFeatures(), this.features = null, this.selectedFeatures = null, this.unrenderedFeatures = null, 
        this.renderer && this.renderer.destroy(), this.renderer = null, this.geometryType = null, 
        this.drawn = null, OpenLayers.Layer.prototype.destroy.apply(this, arguments);
    },
    "clone": function(e) {
        null == e && (e = new OpenLayers.Layer.Vector(this.name, this.getOptions())), e = OpenLayers.Layer.prototype.clone.apply(this, [ e ]);
        for (var t = this.features, i = t.length, n = new Array(i), r = 0; r < i; ++r) n[r] = t[r].clone();
        return e.features = n, e;
    },
    "refresh": function(e) {
        this.calculateInRange() && this.visibility && this.events.triggerEvent("refresh", e);
    },
    "assignRenderer": function() {
        for (var e = 0, t = this.renderers.length; e < t; e++) {
            var i = this.renderers[e], n = "function" == typeof i ? i : OpenLayers.Renderer[i];
            if (n && n.prototype.supported()) {
                this.renderer = new n(this.div, this.rendererOptions);
                break;
            }
        }
    },
    "displayError": function() {
        this.reportError && OpenLayers.Console.userError(OpenLayers.i18n("browserNotSupported", {
            "renderers": this.renderers.join("\n")
        }));
    },
    "setMap": function(e) {
        if (OpenLayers.Layer.prototype.setMap.apply(this, arguments), this.renderer) {
            this.renderer.map = this.map;
            var t = this.map.getSize();
            t.w = t.w * this.ratio, t.h = t.h * this.ratio, this.renderer.setSize(t);
        } else this.map.removeLayer(this);
    },
    "afterAdd": function() {
        if (this.strategies) {
            var e, t, i;
            for (t = 0, i = this.strategies.length; t < i; t++) (e = this.strategies[t]).autoActivate && e.activate();
        }
    },
    "removeMap": function(e) {
        if (this.drawn = !1, this.strategies) {
            var t, i, n;
            for (i = 0, n = this.strategies.length; i < n; i++) (t = this.strategies[i]).autoActivate && t.deactivate();
        }
    },
    "onMapResize": function() {
        OpenLayers.Layer.prototype.onMapResize.apply(this, arguments);
        var e = this.map.getSize();
        e.w = e.w * this.ratio, e.h = e.h * this.ratio, this.renderer.setSize(e);
    },
    "moveTo": function(e, t, i) {
        OpenLayers.Layer.prototype.moveTo.apply(this, arguments);
        var n = !0;
        if (!i) {
            this.renderer.root.style.visibility = "hidden";
            var r = this.map.getSize(), s = r.w, a = r.h, o = s / 2 * this.ratio - s / 2, l = a / 2 * this.ratio - a / 2;
            o += this.map.layerContainerOriginPx.x, o = -Math.round(o), l += this.map.layerContainerOriginPx.y, 
            l = -Math.round(l), this.div.style.left = o + "px", this.div.style.top = l + "px";
            var h = this.map.getExtent().scale(this.ratio);
            if (n = this.renderer.setExtent(h, t), this.renderer.root.style.visibility = "visible", 
            !0 === OpenLayers.IS_GECKO && (this.div.scrollLeft = this.div.scrollLeft), !t && n) for (var u in this.unrenderedFeatures) {
                p = this.unrenderedFeatures[u];
                this.drawFeature(p);
            }
        }
        if (!this.drawn || t || !n) {
            this.drawn = !0;
            for (var p, u = 0, c = this.features.length; u < c; u++) this.renderer.locked = u !== c - 1, 
            p = this.features[u], this.drawFeature(p);
        }
    },
    "display": function(e) {
        OpenLayers.Layer.prototype.display.apply(this, arguments);
        var t = this.div.style.display;
        t != this.renderer.root.style.display && (this.renderer.root.style.display = t);
    },
    "addFeatures": function(e, t) {
        OpenLayers.Util.isArray(e) || (e = [ e ]);
        var i = !t || !t.silent;
        if (i) {
            var n = {
                "features": e
            };
            if (!1 === this.events.triggerEvent("beforefeaturesadded", n)) return;
            e = n.features;
        }
        for (var r = [], s = 0, a = e.length; s < a; s++) {
            s != e.length - 1 ? this.renderer.locked = !0 : this.renderer.locked = !1;
            var o = e[s];
            if (this.geometryType && !(o.geometry instanceof this.geometryType)) throw new TypeError("addFeatures: component should be an " + this.geometryType.prototype.CLASS_NAME);
            if (o.layer = this, !o.style && this.style && (o.style = OpenLayers.Util.extend({}, this.style)), 
            i) {
                if (!1 === this.events.triggerEvent("beforefeatureadded", {
                    "feature": o
                })) continue;
                this.preFeatureInsert(o);
            }
            r.push(o), this.features.push(o), this.drawFeature(o), i && (this.events.triggerEvent("featureadded", {
                "feature": o
            }), this.onFeatureInsert(o));
        }
        i && this.events.triggerEvent("featuresadded", {
            "features": r
        });
    },
    "removeFeatures": function(e, t) {
        if (e && 0 !== e.length) {
            if (e === this.features) return this.removeAllFeatures(t);
            OpenLayers.Util.isArray(e) || (e = [ e ]), e === this.selectedFeatures && (e = e.slice());
            var i = !t || !t.silent;
            i && this.events.triggerEvent("beforefeaturesremoved", {
                "features": e
            });
            for (var n = e.length - 1; n >= 0; n--) {
                0 != n && e[n - 1].geometry ? this.renderer.locked = !0 : this.renderer.locked = !1;
                var r = e[n];
                delete this.unrenderedFeatures[r.id], i && this.events.triggerEvent("beforefeatureremoved", {
                    "feature": r
                }), this.features = OpenLayers.Util.removeItem(this.features, r), r.layer = null, 
                r.geometry && this.renderer.eraseFeatures(r), -1 != OpenLayers.Util.indexOf(this.selectedFeatures, r) && OpenLayers.Util.removeItem(this.selectedFeatures, r), 
                i && this.events.triggerEvent("featureremoved", {
                    "feature": r
                });
            }
            i && this.events.triggerEvent("featuresremoved", {
                "features": e
            });
        }
    },
    "removeAllFeatures": function(e) {
        var t = !e || !e.silent, i = this.features;
        t && this.events.triggerEvent("beforefeaturesremoved", {
            "features": i
        });
        for (var n, r = i.length - 1; r >= 0; r--) n = i[r], t && this.events.triggerEvent("beforefeatureremoved", {
            "feature": n
        }), n.layer = null, t && this.events.triggerEvent("featureremoved", {
            "feature": n
        });
        this.renderer.clear(), this.features = [], this.unrenderedFeatures = {}, this.selectedFeatures = [], 
        t && this.events.triggerEvent("featuresremoved", {
            "features": i
        });
    },
    "destroyFeatures": function(e, t) {
        if (void 0 == e && (e = this.features), e) {
            this.removeFeatures(e, t);
            for (var i = e.length - 1; i >= 0; i--) e[i].destroy();
        }
    },
    "drawFeature": function(e, t) {
        if (this.drawn) {
            if ("object" != typeof t) {
                t || e.state !== OpenLayers.State.DELETE || (t = "delete");
                var i = t || e.renderIntent;
                (t = e.style || this.style) || (t = this.styleMap.createSymbolizer(e, i));
            }
            var n = this.renderer.drawFeature(e, t);
            !1 === n || null === n ? this.unrenderedFeatures[e.id] = e : delete this.unrenderedFeatures[e.id];
        }
    },
    "eraseFeatures": function(e) {
        this.renderer.eraseFeatures(e);
    },
    "getFeatureFromEvent": function(e) {
        if (!this.renderer) throw new Error("getFeatureFromEvent called on layer with no renderer. This usually means you destroyed a layer, but not some handler which is associated with it.");
        var t = null, i = this.renderer.getFeatureIdFromEvent(e);
        return i && (t = "string" == typeof i ? this.getFeatureById(i) : i), t;
    },
    "getFeatureBy": function(e, t) {
        for (var i = null, n = 0, r = this.features.length; n < r; ++n) if (this.features[n][e] == t) {
            i = this.features[n];
            break;
        }
        return i;
    },
    "getFeatureById": function(e) {
        return this.getFeatureBy("id", e);
    },
    "getFeatureByFid": function(e) {
        return this.getFeatureBy("fid", e);
    },
    "getFeaturesByAttribute": function(e, t) {
        var i, n, r = this.features.length, s = [];
        for (i = 0; i < r; i++) (n = this.features[i]) && n.attributes && n.attributes[e] === t && s.push(n);
        return s;
    },
    "onFeatureInsert": function(e) {},
    "preFeatureInsert": function(e) {},
    "getDataExtent": function() {
        var e = null, t = this.features;
        if (t && t.length > 0) for (var i = null, n = 0, r = t.length; n < r; n++) (i = t[n].geometry) && (null === e && (e = new OpenLayers.Bounds()), 
        e.extend(i.getBounds()));
        return e;
    },
    "CLASS_NAME": "OpenLayers.Layer.Vector"
}), OpenLayers.Control.Graticule = OpenLayers.Class(OpenLayers.Control, {
    "autoActivate": !0,
    "intervals": [ 90, 45, 30, 20, 10, 5, 2, 1, .5, .2, .1, .05, .01, .005, .002, .001 ],
    "intervalHeights": null,
    "intervalHeightFactor": 1,
    "displayInLayerSwitcher": !0,
    "visible": !0,
    "numPoints": 50,
    "targetSize": 200,
    "layerName": null,
    "labelled": !0,
    "labelFormat": "dm",
    "labelLonYOffset": 2,
    "labelLatXOffset": -2,
    "lineSymbolizer": {
        "strokeColor": "#333",
        "strokeWidth": 1,
        "strokeOpacity": .5
    },
    "labelSymbolizer": null,
    "gratLayer": null,
    "epsg4326Projection": null,
    "projection": null,
    "projectionCenterLonLat": null,
    "maxLat": 1 / 0,
    "maxLon": 1 / 0,
    "minLat": -1 / 0,
    "minLon": -1 / 0,
    "meridians": null,
    "parallels": null,
    "initialize": function(e) {
        (e = e || {}).layerName = e.layerName || OpenLayers.i18n("Graticule"), OpenLayers.Control.prototype.initialize.apply(this, [ e ]), 
        this.labelSymbolizer = {
            "stroke": !1,
            "fill": !1,
            "label": "${label}",
            "labelAlign": "${labelAlign}",
            "labelXOffset": "${xOffset}",
            "labelYOffset": "${yOffset}"
        }, this.epsg4326Projection = new OpenLayers.Projection("EPSG:4326"), this.parallels = [], 
        this.meridians = [];
    },
    "destroy": function() {
        this.deactivate(), OpenLayers.Control.prototype.destroy.apply(this, arguments), 
        this.gratLayer && (this.gratLayer.destroy(), this.gratLayer = null);
    },
    "draw": function() {
        if (OpenLayers.Control.prototype.draw.apply(this, arguments), !this.gratLayer) {
            var e = new OpenLayers.Style({}, {
                "rules": [ new OpenLayers.Rule({
                    "symbolizer": {
                        "Point": this.labelSymbolizer,
                        "Line": this.lineSymbolizer
                    }
                }) ]
            });
            this.gratLayer = new OpenLayers.Layer.Vector(this.layerName, {
                "styleMap": new OpenLayers.StyleMap({
                    "default": e
                }),
                "visibility": this.visible,
                "displayInLayerSwitcher": this.displayInLayerSwitcher,
                "renderers": [ "Canvas", "VML", "SVG" ]
            });
        }
        return this.div;
    },
    "activate": function() {
        return !!OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.map.addLayer(this.gratLayer), 
        this.map.events.register("moveend", this, this.update), this.update(), !0);
    },
    "deactivate": function() {
        return !!OpenLayers.Control.prototype.deactivate.apply(this, arguments) && (this.map.events.unregister("moveend", this, this.update), 
        this.map.removeLayer(this.gratLayer), !0);
    },
    "update": function() {
        var e = this.map, t = this.map.getExtent();
        if (t) {
            var i = e.getCenter(), n = e.getProjectionObject(), r = e.getResolution(), s = r * r / 4;
            if ((!this.projection || !this.projection.equals(n)) && this.updateProjectionInfo(n), 
            this.createGraticule(t, i, r, s), this.gratLayer.destroyFeatures(), this.gratLayer.addFeatures(this.meridians), 
            this.gratLayer.addFeatures(this.parallels), this.labelled) {
                var a, o, l, h, u, p, c = new OpenLayers.Geometry.LineString([ new OpenLayers.Geometry.Point(t.left, t.bottom), new OpenLayers.Geometry.Point(t.left, t.top) ]), d = new OpenLayers.Geometry.LineString([ new OpenLayers.Geometry.Point(t.left, t.top), new OpenLayers.Geometry.Point(t.right, t.top) ]), f = [];
                for (a = 0, o = this.meridians.length; a < o; ++a) p = "cb", (h = (l = this.meridians[a]).attributes.labelPoint) || (u = l.geometry.split(c)) && (h = u[0].components[1], 
                p = "lt"), h && f.push(new OpenLayers.Feature.Vector(h, {
                    "value": l.attributes.lon,
                    "label": OpenLayers.Util.getFormattedLonLat(l.attributes.lon, "lon", this.labelFormat),
                    "labelAlign": p,
                    "xOffset": 0,
                    "yOffset": this.labelLonYOffset
                }));
                for (a = 0, o = this.parallels.length; a < o; ++a) p = "rb", (h = (l = this.parallels[a]).attributes.labelPoint) || (u = l.geometry.split(d)) && (h = u[0].components[1], 
                p = "ct"), h && f.push(new OpenLayers.Feature.Vector(h, {
                    "value": l.attributes.lat,
                    "label": OpenLayers.Util.getFormattedLonLat(l.attributes.lat, "lat", this.labelFormat),
                    "labelAlign": p,
                    "xOffset": this.labelLatXOffset,
                    "yOffset": 2
                }));
                this.gratLayer.addFeatures(f);
            }
        }
    },
    "createGraticule": function(e, t, i, n) {
        var r = t.clone().transform(this.projection, this.epsg4326Projection);
        (isNaN(r.lon) || isNaN(r.lat)) && (r = t.add(1e-9, 1e-9).transform(this.projection, this.epsg4326Projection));
        var s, a, o, l, h = e.toGeometry(), u = e.clone().transform(this.projection, this.epsg4326Projection), p = this.map.getGeodesicPixelSize();
        p.w < .5 && p.h < .5 && u.right > u.left && u.top > u.bottom && Math.abs(u.bottom) / u.bottom == Math.abs(u.top) / u.top && Math.abs(u.left) / u.left == Math.abs(u.right) / u.right ? (s = Math.max(u.left, this.minLon), 
        a = Math.max(u.bottom, this.minLat), o = Math.min(u.right, this.maxLon), l = Math.min(u.top, this.maxLat)) : (s = this.minLon, 
        a = this.minLat, o = this.maxLon, l = this.maxLat);
        var c, d, f, y, m, g, v, L, O, b = this.map.getSize();
        m = Math.ceil(b.w / this.targetSize), v = 0;
        do {
            for (g = this.intervals[v++], L = Math.floor(r.lon / g) * g, f = Math.max(L, this.minLon), 
            f = Math.min(f, this.maxLon), c = this.addMeridian(f, a, l, n, h, 0); f != this.minLon && (f = Math.max(f - g, this.minLon), 
            d = c, c = this.addMeridian(f, a, l, n, h, c), d != c); ) ;
            for (f = Math.max(L, this.minLon), f = Math.min(f, this.maxLon); f != this.maxLon && (f = Math.min(f + g, this.maxLon), 
            d = c, c = this.addMeridian(f, a, l, n, h, c), d != c); ) ;
        } while (v < this.intervals.length && c <= m);
        this.meridians.length = c, m = Math.ceil(b.h / this.targetSize), v = 0;
        do {
            for (g = this.intervalHeights ? this.intervalHeights[v++] : this.intervals[v++] * this.intervalHeightFactor, 
            O = Math.floor(r.lat / g) * g, y = Math.max(O, this.minLat), y = Math.min(y, this.maxLat), 
            c = this.addParallel(y, s, o, n, h, 0); y != this.minLat && (y = Math.max(y - g, this.minLat), 
            d = c, c = this.addParallel(y, s, o, n, h, c), d != c); ) ;
            for (y = Math.max(O, this.minLat), y = Math.min(y, this.maxLat); y != this.maxLat && (y = Math.min(y + g, this.maxLat), 
            d = c, c = this.addParallel(y, s, o, n, h, c), d != c); ) ;
        } while (v < this.intervals.length && c <= m);
        this.parallels.length = c;
    },
    "updateProjectionInfo": function(e) {
        var t = OpenLayers.Projection.defaults[e.getCode()], i = t && t.maxExtent ? OpenLayers.Bounds.fromArray(t.maxExtent) : this.map.getMaxExtent(), n = t && t.worldExtent ? t.worldExtent : [ -180, -90, 180, 90 ];
        this.maxLat = n[3], this.maxLon = n[2], this.minLat = n[1], this.minLon = n[0], 
        this.projectionCenterLonLat = i.clone().transform(e, this.epsg4326Projection).getCenterLonLat(), 
        this.projection = e;
    },
    "addMeridian": function(e, t, i, n, r, s) {
        var a = OpenLayers.Geometry.LineString.geodesicMeridian(e, t, i, this.projection, n), o = a.split(new OpenLayers.Geometry.LineString(r.components[0].components.slice(0, 2)));
        return (o || r.intersects(a)) && (this.meridians[s++] = new OpenLayers.Feature.Vector(a, {
            "lon": e,
            "labelPoint": o ? o[0].components[1] : void 0
        })), s;
    },
    "addParallel": function(e, t, i, n, r, s) {
        var a = OpenLayers.Geometry.LineString.geodesicParallel(e, t, i, this.projection, n), o = a.split(new OpenLayers.Geometry.LineString(r.components[0].components.slice(1, 3)));
        return (o || r.intersects(a)) && (this.parallels[s++] = new OpenLayers.Feature.Vector(a, {
            "lat": e,
            "labelPoint": o ? o[0].components[1] : void 0
        })), s;
    },
    "CLASS_NAME": "OpenLayers.Control.Graticule"
}), OpenLayers.Handler.Keyboard = OpenLayers.Class(OpenLayers.Handler, {
    "KEY_EVENTS": [ "keydown", "keyup" ],
    "eventListener": null,
    "observeElement": null,
    "initialize": function(e, t, i) {
        OpenLayers.Handler.prototype.initialize.apply(this, arguments), this.eventListener = OpenLayers.Function.bindAsEventListener(this.handleKeyEvent, this);
    },
    "destroy": function() {
        this.deactivate(), this.eventListener = null, OpenLayers.Handler.prototype.destroy.apply(this, arguments);
    },
    "activate": function() {
        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {
            this.observeElement = this.observeElement || document;
            for (var e = 0, t = this.KEY_EVENTS.length; e < t; e++) OpenLayers.Event.observe(this.observeElement, this.KEY_EVENTS[e], this.eventListener);
            return !0;
        }
        return !1;
    },
    "deactivate": function() {
        var e = !1;
        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {
            for (var t = 0, i = this.KEY_EVENTS.length; t < i; t++) OpenLayers.Event.stopObserving(this.observeElement, this.KEY_EVENTS[t], this.eventListener);
            e = !0;
        }
        return e;
    },
    "handleKeyEvent": function(e) {
        this.checkModifiers(e) && this.callback(e.type, [ e ]);
    },
    "CLASS_NAME": "OpenLayers.Handler.Keyboard"
}), OpenLayers.Control.KeyboardDefaults = OpenLayers.Class(OpenLayers.Control, {
    "autoActivate": !0,
    "slideFactor": 75,
    "observeElement": null,
    "draw": function() {
        var e = this.observeElement || document;
        this.handler = new OpenLayers.Handler.Keyboard(this, {
            "keydown": this.defaultKeyPress
        }, {
            "observeElement": e
        });
    },
    "defaultKeyPress": function(e) {
        var t, i = !0, n = OpenLayers.Event.element(e);
        if (!n || "INPUT" != n.tagName && "TEXTAREA" != n.tagName && "SELECT" != n.tagName) {
            switch (e.keyCode) {
              case OpenLayers.Event.KEY_LEFT:
                this.map.pan(-this.slideFactor, 0);
                break;

              case OpenLayers.Event.KEY_RIGHT:
                this.map.pan(this.slideFactor, 0);
                break;

              case OpenLayers.Event.KEY_UP:
                this.map.pan(0, -this.slideFactor);
                break;

              case OpenLayers.Event.KEY_DOWN:
                this.map.pan(0, this.slideFactor);
                break;

              case 33:
                t = this.map.getSize(), this.map.pan(0, -.75 * t.h);
                break;

              case 34:
                t = this.map.getSize(), this.map.pan(0, .75 * t.h);
                break;

              case 35:
                t = this.map.getSize(), this.map.pan(.75 * t.w, 0);
                break;

              case 36:
                t = this.map.getSize(), this.map.pan(-.75 * t.w, 0);
                break;

              case 43:
              case 61:
              case 187:
              case 107:
                this.map.zoomIn();
                break;

              case 45:
              case 109:
              case 189:
              case 95:
                this.map.zoomOut();
                break;

              default:
                i = !1;
            }
            i && OpenLayers.Event.stop(e);
        }
    },
    "CLASS_NAME": "OpenLayers.Control.KeyboardDefaults"
}), OpenLayers.Control.LayerSwitcher = OpenLayers.Class(OpenLayers.Control, {
    "layerStates": null,
    "layersDiv": null,
    "baseLayersDiv": null,
    "baseLayers": null,
    "dataLbl": null,
    "dataLayersDiv": null,
    "dataLayers": null,
    "minimizeDiv": null,
    "maximizeDiv": null,
    "ascending": !0,
    "initialize": function(e) {
        OpenLayers.Control.prototype.initialize.apply(this, arguments), this.layerStates = [];
    },
    "destroy": function() {
        this.clearLayersArray("base"), this.clearLayersArray("data"), this.map.events.un({
            "buttonclick": this.onButtonClick,
            "addlayer": this.redraw,
            "changelayer": this.redraw,
            "removelayer": this.redraw,
            "changebaselayer": this.redraw,
            "scope": this
        }), this.events.unregister("buttonclick", this, this.onButtonClick), OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "setMap": function(e) {
        OpenLayers.Control.prototype.setMap.apply(this, arguments), this.map.events.on({
            "addlayer": this.redraw,
            "changelayer": this.redraw,
            "removelayer": this.redraw,
            "changebaselayer": this.redraw,
            "scope": this
        }), this.outsideViewport ? (this.events.attachToElement(this.div), this.events.register("buttonclick", this, this.onButtonClick)) : this.map.events.register("buttonclick", this, this.onButtonClick);
    },
    "draw": function() {
        return OpenLayers.Control.prototype.draw.apply(this), this.loadContents(), this.outsideViewport || this.minimizeControl(), 
        this.redraw(), this.div;
    },
    "onButtonClick": function(e) {
        var t = e.buttonElement;
        t === this.minimizeDiv ? this.minimizeControl() : t === this.maximizeDiv ? this.maximizeControl() : t._layerSwitcher === this.id && (t.for && (t = document.getElementById(t.for)), 
        t.disabled || ("radio" == t.type ? (t.checked = !0, this.map.setBaseLayer(this.map.getLayer(t._layer))) : (t.checked = !t.checked, 
        this.updateMap())));
    },
    "clearLayersArray": function(e) {
        this[e + "LayersDiv"].innerHTML = "", this[e + "Layers"] = [];
    },
    "checkRedraw": function() {
        if (!this.layerStates.length || this.map.layers.length != this.layerStates.length) return !0;
        for (var e = 0, t = this.layerStates.length; e < t; e++) {
            var i = this.layerStates[e], n = this.map.layers[e];
            if (i.name != n.name || i.inRange != n.inRange || i.id != n.id || i.visibility != n.visibility) return !0;
        }
        return !1;
    },
    "redraw": function() {
        if (!this.checkRedraw()) return this.div;
        this.clearLayersArray("base"), this.clearLayersArray("data");
        var e = !1, t = !1, i = this.map.layers.length;
        this.layerStates = new Array(i);
        for (s = 0; s < i; s++) {
            var n = this.map.layers[s];
            this.layerStates[s] = {
                "name": n.name,
                "visibility": n.visibility,
                "inRange": n.inRange,
                "id": n.id
            };
        }
        var r = this.map.layers.slice();
        this.ascending || r.reverse();
        for (var s = 0, i = r.length; s < i; s++) {
            var a = (n = r[s]).isBaseLayer;
            if (n.displayInLayerSwitcher) {
                a ? t = !0 : e = !0;
                var o = a ? n == this.map.baseLayer : n.getVisibility(), l = document.createElement("input"), h = OpenLayers.Util.createUniqueID(this.id + "_input_");
                l.id = h, l.name = a ? this.id + "_baseLayers" : n.name, l.type = a ? "radio" : "checkbox", 
                l.value = n.name, l.checked = o, l.defaultChecked = o, l.className = "olButton", 
                l._layer = n.id, l._layerSwitcher = this.id, a || n.inRange || (l.disabled = !0);
                var u = document.createElement("label");
                u.for = l.id, OpenLayers.Element.addClass(u, "labelSpan olButton"), u._layer = n.id, 
                u._layerSwitcher = this.id, a || n.inRange || (u.style.color = "gray"), u.innerHTML = n.name, 
                u.style.verticalAlign = a ? "bottom" : "baseline";
                var p = document.createElement("br");
                (a ? this.baseLayers : this.dataLayers).push({
                    "layer": n,
                    "inputElem": l,
                    "labelSpan": u
                });
                var c = a ? this.baseLayersDiv : this.dataLayersDiv;
                c.appendChild(l), c.appendChild(u), c.appendChild(p);
            }
        }
        return this.dataLbl.style.display = e ? "" : "none", this.baseLbl.style.display = t ? "" : "none", 
        this.div;
    },
    "updateMap": function() {
        for (var e = 0, t = this.baseLayers.length; e < t; e++) (i = this.baseLayers[e]).inputElem.checked && this.map.setBaseLayer(i.layer, !1);
        for (var e = 0, t = this.dataLayers.length; e < t; e++) {
            var i = this.dataLayers[e];
            i.layer.setVisibility(i.inputElem.checked);
        }
    },
    "maximizeControl": function(e) {
        this.div.style.width = "", this.div.style.height = "", this.showControls(!1), null != e && OpenLayers.Event.stop(e);
    },
    "minimizeControl": function(e) {
        this.div.style.width = "0px", this.div.style.height = "0px", this.showControls(!0), 
        null != e && OpenLayers.Event.stop(e);
    },
    "showControls": function(e) {
        this.maximizeDiv.style.display = e ? "" : "none", this.minimizeDiv.style.display = e ? "none" : "", 
        this.layersDiv.style.display = e ? "none" : "";
    },
    "loadContents": function() {
        this.layersDiv = document.createElement("div"), this.layersDiv.id = this.id + "_layersDiv", 
        OpenLayers.Element.addClass(this.layersDiv, "layersDiv"), this.baseLbl = document.createElement("div"), 
        this.baseLbl.innerHTML = OpenLayers.i18n("Base Layer"), OpenLayers.Element.addClass(this.baseLbl, "baseLbl"), 
        this.baseLayersDiv = document.createElement("div"), OpenLayers.Element.addClass(this.baseLayersDiv, "baseLayersDiv"), 
        this.dataLbl = document.createElement("div"), this.dataLbl.innerHTML = OpenLayers.i18n("Overlays"), 
        OpenLayers.Element.addClass(this.dataLbl, "dataLbl"), this.dataLayersDiv = document.createElement("div"), 
        OpenLayers.Element.addClass(this.dataLayersDiv, "dataLayersDiv"), this.ascending ? (this.layersDiv.appendChild(this.baseLbl), 
        this.layersDiv.appendChild(this.baseLayersDiv), this.layersDiv.appendChild(this.dataLbl), 
        this.layersDiv.appendChild(this.dataLayersDiv)) : (this.layersDiv.appendChild(this.dataLbl), 
        this.layersDiv.appendChild(this.dataLayersDiv), this.layersDiv.appendChild(this.baseLbl), 
        this.layersDiv.appendChild(this.baseLayersDiv)), this.div.appendChild(this.layersDiv);
        e = OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");
        this.maximizeDiv = OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MaximizeDiv", null, null, e, "absolute"), 
        OpenLayers.Element.addClass(this.maximizeDiv, "maximizeDiv olButton"), this.maximizeDiv.style.display = "none", 
        this.div.appendChild(this.maximizeDiv);
        var e = OpenLayers.Util.getImageLocation("layer-switcher-minimize.png");
        this.minimizeDiv = OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MinimizeDiv", null, null, e, "absolute"), 
        OpenLayers.Element.addClass(this.minimizeDiv, "minimizeDiv olButton"), this.minimizeDiv.style.display = "none", 
        this.div.appendChild(this.minimizeDiv);
    },
    "CLASS_NAME": "OpenLayers.Control.LayerSwitcher"
}), OpenLayers.Control.Measure = OpenLayers.Class(OpenLayers.Control, {
    "callbacks": null,
    "displaySystem": "metric",
    "geodesic": !1,
    "displaySystemUnits": {
        "geographic": [ "dd" ],
        "english": [ "mi", "ft", "in" ],
        "metric": [ "km", "m" ]
    },
    "partialDelay": 300,
    "delayedTrigger": null,
    "persist": !1,
    "immediate": !1,
    "initialize": function(e, t) {
        OpenLayers.Control.prototype.initialize.apply(this, [ t ]);
        var i = {
            "done": this.measureComplete,
            "point": this.measurePartial
        };
        this.immediate && (i.modify = this.measureImmediate), this.callbacks = OpenLayers.Util.extend(i, this.callbacks), 
        this.handlerOptions = OpenLayers.Util.extend({
            "persist": this.persist
        }, this.handlerOptions), this.handler = new e(this, this.callbacks, this.handlerOptions);
    },
    "deactivate": function() {
        return this.cancelDelay(), OpenLayers.Control.prototype.deactivate.apply(this, arguments);
    },
    "cancel": function() {
        this.cancelDelay(), this.handler.cancel();
    },
    "setImmediate": function(e) {
        this.immediate = e, this.immediate ? this.callbacks.modify = this.measureImmediate : delete this.callbacks.modify;
    },
    "updateHandler": function(e, t) {
        var i = this.active;
        i && this.deactivate(), this.handler = new e(this, this.callbacks, t), i && this.activate();
    },
    "measureComplete": function(e) {
        this.cancelDelay(), this.measure(e, "measure");
    },
    "measurePartial": function(e, t) {
        this.cancelDelay(), t = t.clone(), this.handler.freehandMode(this.handler.evt) ? this.measure(t, "measurepartial") : this.delayedTrigger = window.setTimeout(OpenLayers.Function.bind(function() {
            this.delayedTrigger = null, this.measure(t, "measurepartial");
        }, this), this.partialDelay);
    },
    "measureImmediate": function(e, t, i) {
        i && !this.handler.freehandMode(this.handler.evt) && (this.cancelDelay(), this.measure(t.geometry, "measurepartial"));
    },
    "cancelDelay": function() {
        null !== this.delayedTrigger && (window.clearTimeout(this.delayedTrigger), this.delayedTrigger = null);
    },
    "measure": function(e, t) {
        var i, n;
        e.CLASS_NAME.indexOf("LineString") > -1 ? (i = this.getBestLength(e), n = 1) : (i = this.getBestArea(e), 
        n = 2), this.events.triggerEvent(t, {
            "measure": i[0],
            "units": i[1],
            "order": n,
            "geometry": e
        });
    },
    "getBestArea": function(e) {
        for (var t, i, n = this.displaySystemUnits[this.displaySystem], r = 0, s = n.length; r < s && (t = n[r], 
        !((i = this.getArea(e, t)) > 1)); ++r) ;
        return [ i, t ];
    },
    "getArea": function(e, t) {
        var i, n;
        this.geodesic ? (i = e.getGeodesicArea(this.map.getProjectionObject()), n = "m") : (i = e.getArea(), 
        n = this.map.getUnits());
        var r = OpenLayers.INCHES_PER_UNIT[t];
        if (r) {
            var s = OpenLayers.INCHES_PER_UNIT[n];
            i *= Math.pow(s / r, 2);
        }
        return i;
    },
    "getBestLength": function(e) {
        for (var t, i, n = this.displaySystemUnits[this.displaySystem], r = 0, s = n.length; r < s && (t = n[r], 
        !((i = this.getLength(e, t)) > 1)); ++r) ;
        return [ i, t ];
    },
    "getLength": function(e, t) {
        var i, n;
        this.geodesic ? (i = e.getGeodesicLength(this.map.getProjectionObject()), n = "m") : (i = e.getLength(), 
        n = this.map.getUnits());
        var r = OpenLayers.INCHES_PER_UNIT[t];
        return r && (i *= OpenLayers.INCHES_PER_UNIT[n] / r), i;
    },
    "CLASS_NAME": "OpenLayers.Control.Measure"
}), OpenLayers.Control.ModifyFeature = OpenLayers.Class(OpenLayers.Control, {
    "bySegment": !1,
    "documentDrag": !1,
    "geometryTypes": null,
    "clickout": !0,
    "toggle": !0,
    "standalone": !1,
    "layer": null,
    "feature": null,
    "vertex": null,
    "vertices": null,
    "virtualVertices": null,
    "handlers": null,
    "deleteCodes": null,
    "virtualStyle": null,
    "vertexRenderIntent": null,
    "mode": null,
    "createVertices": !0,
    "modified": !1,
    "radiusHandle": null,
    "dragHandle": null,
    "onModificationStart": function() {},
    "onModification": function() {},
    "onModificationEnd": function() {},
    "initialize": function(e, t) {
        t = t || {}, this.layer = e, this.vertices = [], this.virtualVertices = [], this.virtualStyle = OpenLayers.Util.extend({}, this.layer.style || this.layer.styleMap.createSymbolizer(null, t.vertexRenderIntent)), 
        this.virtualStyle.fillOpacity = .3, this.virtualStyle.strokeOpacity = .3, this.deleteCodes = [ 46, 68 ], 
        this.mode = OpenLayers.Control.ModifyFeature.RESHAPE, OpenLayers.Control.prototype.initialize.apply(this, [ t ]), 
        OpenLayers.Util.isArray(this.deleteCodes) || (this.deleteCodes = [ this.deleteCodes ]);
        var i = {
            "down": function(e) {
                this.vertex = null;
                var t = this.layer.getFeatureFromEvent(this.handlers.drag.evt);
                t ? this.dragStart(t) : this.clickout && (this._unselect = this.feature);
            },
            "move": function(e) {
                delete this._unselect, this.vertex && this.dragVertex(this.vertex, e);
            },
            "up": function() {
                this.handlers.drag.stopDown = !1, this._unselect && (this.unselectFeature(this._unselect), 
                delete this._unselect);
            },
            "done": function(e) {
                this.vertex && this.dragComplete(this.vertex);
            }
        }, n = this, r = {
            "documentDrag": this.documentDrag,
            "setEvent": function(e) {
                var t = n.feature;
                n._lastVertex = t ? t.layer.getFeatureFromEvent(e) : null, OpenLayers.Handler.Drag.prototype.setEvent.apply(this, arguments);
            },
            "stopDown": !1
        }, s = {
            "keydown": this.handleKeypress
        };
        if (this.handlers = {
            "keyboard": new OpenLayers.Handler.Keyboard(this, s),
            "drag": new OpenLayers.Handler.Drag(this, i, r)
        }, this.bySegment) {
            if (!window.rbush) throw new Error("The rbush library is required");
            if (!OpenLayers.Control.ModifyFeature.BySegment) throw new Error("OpenLayers.Control.ModifyFeature.BySegment is missing from the build");
            OpenLayers.Util.extend(this, OpenLayers.Control.ModifyFeature.BySegment);
        }
    },
    "createVirtualVertex": function(e, t) {
        var i = (e.x + t.x) / 2, n = (e.y + t.y) / 2, r = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(i, n), null, this.virtualStyle);
        return r._sketch = !0, r;
    },
    "destroy": function() {
        this.map && this.map.events.un({
            "removelayer": this.handleMapEvents,
            "changelayer": this.handleMapEvents,
            "scope": this
        }), this.layer = null, OpenLayers.Control.prototype.destroy.apply(this, []);
    },
    "activate": function() {
        return !!OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.moveLayerToTop(), 
        this.map.events.on({
            "removelayer": this.handleMapEvents,
            "changelayer": this.handleMapEvents,
            "scope": this
        }), this._lastVertex = null, this.handlers.keyboard.activate() && this.handlers.drag.activate());
    },
    "deactivate": function() {
        var e = !1;
        if (OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {
            this.moveLayerBack(), this.map.events.un({
                "removelayer": this.handleMapEvents,
                "changelayer": this.handleMapEvents,
                "scope": this
            }), this.layer.removeFeatures(this.vertices, {
                "silent": !0
            }), this.layer.removeFeatures(this.virtualVertices, {
                "silent": !0
            }), this.vertices = [], this.handlers.drag.deactivate(), this.handlers.keyboard.deactivate();
            var t = this.feature;
            t && t.geometry && t.layer && this.unselectFeature(t), e = !0;
        }
        return e;
    },
    "beforeSelectFeature": function(e) {
        return this.layer.events.triggerEvent("beforefeaturemodified", {
            "feature": e
        });
    },
    "selectFeature": function(e) {
        var t = OpenLayers.Util.indexOf;
        if (!(this.feature === e || this.geometryTypes && -1 == t(this.geometryTypes, e.geometry.CLASS_NAME))) {
            !1 !== this.beforeSelectFeature(e) && (this.feature && this.unselectFeature(this.feature), 
            this.feature = e, -1 == t(this.layer.selectedFeatures, e) && this.layer.selectedFeatures.push(e), 
            this.layer.drawFeature(e, "select"), this.modified = !1, this.resetVertices(), this.onModificationStart(this.feature));
            var i = e.modified;
            !e.geometry || i && i.geometry || (this._originalGeometry = e.geometry.clone());
        }
    },
    "unselectFeature": function(e) {
        this.layer.removeFeatures(this.vertices, {
            "silent": !0
        }), this.vertices = [], this.layer.destroyFeatures(this.virtualVertices, {
            "silent": !0
        }), this.virtualVertices = [], this.dragHandle && (this.layer.destroyFeatures([ this.dragHandle ], {
            "silent": !0
        }), delete this.dragHandle), this.radiusHandle && (this.layer.destroyFeatures([ this.radiusHandle ], {
            "silent": !0
        }), delete this.radiusHandle), this.layer.drawFeature(this.feature, "default"), 
        this.feature = null, OpenLayers.Util.removeItem(this.layer.selectedFeatures, e), 
        this.onModificationEnd(e), this.layer.events.triggerEvent("afterfeaturemodified", {
            "feature": e,
            "modified": this.modified
        }), this.modified = !1;
    },
    "dragStart": function(e) {
        var t = "OpenLayers.Geometry.Point" == e.geometry.CLASS_NAME;
        this.standalone || (e._sketch || !t) && e._sketch || (this.toggle && this.feature === e && (this._unselect = e), 
        this.selectFeature(e)), this.feature && (e._sketch || t && e === this.feature) && (this.vertex = e, 
        this.handlers.drag.stopDown = !0);
    },
    "dragVertex": function(e, t) {
        var i = this.map.getLonLatFromViewPortPx(t), n = e.geometry;
        n.move(i.lon - n.x, i.lat - n.y), this.modified = !0, "OpenLayers.Geometry.Point" == this.feature.geometry.CLASS_NAME ? this.layer.events.triggerEvent("vertexmodified", {
            "vertex": e.geometry,
            "feature": this.feature,
            "pixel": t
        }) : (e._index ? (-1 == e._index && (e._index = OpenLayers.Util.indexOf(e.geometry.parent.components, e._next)), 
        e.geometry.parent.addComponent(e.geometry, e._index), delete e._index, OpenLayers.Util.removeItem(this.virtualVertices, e), 
        this.vertices.push(e)) : e == this.dragHandle ? (this.layer.removeFeatures(this.vertices, {
            "silent": !0
        }), this.vertices = [], this.radiusHandle && (this.layer.destroyFeatures([ this.radiusHandle ], {
            "silent": !0
        }), this.radiusHandle = null)) : e !== this.radiusHandle && this.layer.events.triggerEvent("vertexmodified", {
            "vertex": e.geometry,
            "feature": this.feature,
            "pixel": t
        }), this.virtualVertices.length > 0 && (this.layer.destroyFeatures(this.virtualVertices, {
            "silent": !0
        }), this.virtualVertices = []), this.layer.drawFeature(this.feature, this.standalone ? void 0 : "select")), 
        this.layer.drawFeature(e);
    },
    "dragComplete": function(e) {
        this.resetVertices(), this.setFeatureState(), this.onModification(this.feature), 
        this.layer.events.triggerEvent("featuremodified", {
            "feature": this.feature
        });
    },
    "setFeatureState": function() {
        if (this.feature.state != OpenLayers.State.INSERT && this.feature.state != OpenLayers.State.DELETE && (this.feature.state = OpenLayers.State.UPDATE, 
        this.modified && this._originalGeometry)) {
            var e = this.feature;
            e.modified = OpenLayers.Util.extend(e.modified, {
                "geometry": this._originalGeometry
            }), delete this._originalGeometry;
        }
    },
    "resetVertices": function() {
        this.vertices.length > 0 && (this.layer.removeFeatures(this.vertices, {
            "silent": !0
        }), this.vertices = []), this.virtualVertices.length > 0 && (this.layer.removeFeatures(this.virtualVertices, {
            "silent": !0
        }), this.virtualVertices = []), this.dragHandle && (this.layer.destroyFeatures([ this.dragHandle ], {
            "silent": !0
        }), this.dragHandle = null), this.radiusHandle && (this.layer.destroyFeatures([ this.radiusHandle ], {
            "silent": !0
        }), this.radiusHandle = null), this.feature && "OpenLayers.Geometry.Point" != this.feature.geometry.CLASS_NAME && (this.mode & OpenLayers.Control.ModifyFeature.DRAG && this.collectDragHandle(), 
        this.mode & (OpenLayers.Control.ModifyFeature.ROTATE | OpenLayers.Control.ModifyFeature.RESIZE) && this.collectRadiusHandle(), 
        this.mode & OpenLayers.Control.ModifyFeature.RESHAPE && (this.mode & OpenLayers.Control.ModifyFeature.RESIZE || this.collectVertices()));
    },
    "handleKeypress": function(e) {
        var t = e.keyCode;
        if (this.feature && -1 != OpenLayers.Util.indexOf(this.deleteCodes, t)) {
            var i = this._lastVertex;
            i && -1 != OpenLayers.Util.indexOf(this.vertices, i) && !this.handlers.drag.dragging && i.geometry.parent && (i.geometry.parent.removeComponent(i.geometry), 
            this.layer.events.triggerEvent("vertexremoved", {
                "vertex": i.geometry,
                "feature": this.feature,
                "pixel": e.xy
            }), this.layer.drawFeature(this.feature, this.standalone ? void 0 : "select"), this.modified = !0, 
            this.resetVertices(), this.setFeatureState(), this.onModification(this.feature), 
            this.layer.events.triggerEvent("featuremodified", {
                "feature": this.feature
            }));
        }
    },
    "collectVertices": function() {
        function e(i) {
            var n, r, s, a;
            if ("OpenLayers.Geometry.Point" == i.CLASS_NAME) (r = new OpenLayers.Feature.Vector(i))._sketch = !0, 
            r.renderIntent = t.vertexRenderIntent, t.vertices.push(r); else {
                var o = i.components.length;
                for ("OpenLayers.Geometry.LinearRing" == i.CLASS_NAME && (o -= 1), n = 0; n < o; ++n) "OpenLayers.Geometry.Point" == (s = i.components[n]).CLASS_NAME ? ((r = new OpenLayers.Feature.Vector(s))._sketch = !0, 
                r.renderIntent = t.vertexRenderIntent, t.vertices.push(r)) : e(s);
                if (t.createVertices && "OpenLayers.Geometry.MultiPoint" != i.CLASS_NAME) for (n = 0, 
                a = i.components.length; n < a - 1; ++n) {
                    var l = i.components[n], h = i.components[n + 1];
                    if ("OpenLayers.Geometry.Point" == l.CLASS_NAME && "OpenLayers.Geometry.Point" == h.CLASS_NAME) {
                        var u = t.createVirtualVertex.call(t, l, h);
                        u.geometry.parent = i, u._index = n + 1, t.virtualVertices.push(u);
                    }
                }
            }
        }
        this.vertices = [], this.virtualVertices = [];
        var t = this;
        e.call(this, this.feature.geometry), this.layer.addFeatures(this.virtualVertices, {
            "silent": !0
        }), this.layer.addFeatures(this.vertices, {
            "silent": !0
        });
    },
    "collectDragHandle": function() {
        var e = this.feature.geometry, t = e.getBounds().getCenterLonLat(), i = new OpenLayers.Geometry.Point(t.lon, t.lat), n = new OpenLayers.Feature.Vector(i);
        i.move = function(t, i) {
            OpenLayers.Geometry.Point.prototype.move.call(this, t, i), e.move(t, i);
        }, n._sketch = !0, this.dragHandle = n, this.dragHandle.renderIntent = this.vertexRenderIntent, 
        this.layer.addFeatures([ this.dragHandle ], {
            "silent": !0
        });
    },
    "collectRadiusHandle": function() {
        var e = this.feature.geometry, t = e.getBounds(), i = t.getCenterLonLat(), n = new OpenLayers.Geometry.Point(i.lon, i.lat), r = new OpenLayers.Geometry.Point(t.right, t.bottom), s = new OpenLayers.Feature.Vector(r), a = this.mode & OpenLayers.Control.ModifyFeature.RESIZE, o = this.mode & OpenLayers.Control.ModifyFeature.RESHAPE, l = this.mode & OpenLayers.Control.ModifyFeature.ROTATE;
        r.move = function(t, i) {
            OpenLayers.Geometry.Point.prototype.move.call(this, t, i);
            var r = this.x - n.x, s = this.y - n.y, h = r - t, u = s - i;
            if (l) {
                var p = Math.atan2(u, h), c = Math.atan2(s, r) - p;
                c *= 180 / Math.PI, e.rotate(c, n);
            }
            if (a) {
                var d, f;
                if (o) f = r / h / (d = s / u); else {
                    var y = Math.sqrt(h * h + u * u);
                    d = Math.sqrt(r * r + s * s) / y;
                }
                e.resize(d, n, f);
            }
        }, s._sketch = !0, this.radiusHandle = s, this.radiusHandle.renderIntent = this.vertexRenderIntent, 
        this.layer.addFeatures([ this.radiusHandle ], {
            "silent": !0
        });
    },
    "setMap": function(e) {
        this.handlers.drag.setMap(e), OpenLayers.Control.prototype.setMap.apply(this, arguments);
    },
    "handleMapEvents": function(e) {
        "removelayer" != e.type && "order" != e.property || this.moveLayerToTop();
    },
    "moveLayerToTop": function() {
        var e = Math.max(this.map.Z_INDEX_BASE.Feature - 1, this.layer.getZIndex()) + 1;
        this.layer.setZIndex(e);
    },
    "moveLayerBack": function() {
        var e = this.layer.getZIndex() - 1;
        e >= this.map.Z_INDEX_BASE.Feature ? this.layer.setZIndex(e) : this.map.setLayerZIndex(this.layer, this.map.getLayerIndex(this.layer));
    },
    "CLASS_NAME": "OpenLayers.Control.ModifyFeature"
}), OpenLayers.Control.ModifyFeature.RESHAPE = 1, OpenLayers.Control.ModifyFeature.RESIZE = 2, 
OpenLayers.Control.ModifyFeature.ROTATE = 4, OpenLayers.Control.ModifyFeature.DRAG = 8, 
OpenLayers.Control.MousePosition = OpenLayers.Class(OpenLayers.Control, {
    "autoActivate": !0,
    "element": null,
    "prefix": "",
    "separator": ", ",
    "suffix": "",
    "numDigits": 5,
    "granularity": 10,
    "emptyString": null,
    "lastXy": null,
    "displayProjection": null,
    "destroy": function() {
        this.deactivate(), OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "activate": function() {
        return !!OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.map.events.register("mousemove", this, this.redraw), 
        this.map.events.register("mouseout", this, this.reset), this.redraw(), !0);
    },
    "deactivate": function() {
        return !!OpenLayers.Control.prototype.deactivate.apply(this, arguments) && (this.map.events.unregister("mousemove", this, this.redraw), 
        this.map.events.unregister("mouseout", this, this.reset), this.element.innerHTML = "", 
        !0);
    },
    "draw": function() {
        return OpenLayers.Control.prototype.draw.apply(this, arguments), this.element || (this.div.left = "", 
        this.div.top = "", this.element = this.div), this.div;
    },
    "redraw": function(e) {
        var t;
        if (null != e) {
            if (null == this.lastXy || Math.abs(e.xy.x - this.lastXy.x) > this.granularity || Math.abs(e.xy.y - this.lastXy.y) > this.granularity) this.lastXy = e.xy; else if (t = this.map.getLonLatFromPixel(e.xy)) {
                this.displayProjection && t.transform(this.map.getProjectionObject(), this.displayProjection), 
                this.lastXy = e.xy;
                var i = this.formatOutput(t);
                i != this.element.innerHTML && (this.element.innerHTML = i);
            }
        } else this.reset();
    },
    "reset": function(e) {
        null != this.emptyString && (this.element.innerHTML = this.emptyString);
    },
    "formatOutput": function(e) {
        var t = parseInt(this.numDigits);
        return this.prefix + e.lon.toFixed(t) + this.separator + e.lat.toFixed(t) + this.suffix;
    },
    "CLASS_NAME": "OpenLayers.Control.MousePosition"
}), OpenLayers.Control.NavigationHistory = OpenLayers.Class(OpenLayers.Control, {
    "type": OpenLayers.Control.TYPE_TOGGLE,
    "previous": null,
    "previousOptions": null,
    "next": null,
    "nextOptions": null,
    "limit": 50,
    "autoActivate": !0,
    "clearOnDeactivate": !1,
    "registry": null,
    "nextStack": null,
    "previousStack": null,
    "listeners": null,
    "restoring": !1,
    "initialize": function(e) {
        OpenLayers.Control.prototype.initialize.apply(this, [ e ]), this.registry = OpenLayers.Util.extend({
            "moveend": this.getState
        }, this.registry);
        var t = {
            "trigger": OpenLayers.Function.bind(this.previousTrigger, this),
            "displayClass": this.displayClass + " " + this.displayClass + "Previous"
        };
        OpenLayers.Util.extend(t, this.previousOptions), this.previous = new OpenLayers.Control.Button(t);
        var i = {
            "trigger": OpenLayers.Function.bind(this.nextTrigger, this),
            "displayClass": this.displayClass + " " + this.displayClass + "Next"
        };
        OpenLayers.Util.extend(i, this.nextOptions), this.next = new OpenLayers.Control.Button(i), 
        this.clear();
    },
    "onPreviousChange": function(e, t) {
        e && !this.previous.active ? this.previous.activate() : !e && this.previous.active && this.previous.deactivate();
    },
    "onNextChange": function(e, t) {
        e && !this.next.active ? this.next.activate() : !e && this.next.active && this.next.deactivate();
    },
    "destroy": function() {
        OpenLayers.Control.prototype.destroy.apply(this), this.previous.destroy(), this.next.destroy(), 
        this.deactivate();
        for (var e in this) this[e] = null;
    },
    "setMap": function(e) {
        this.map = e, this.next.setMap(e), this.previous.setMap(e);
    },
    "draw": function() {
        OpenLayers.Control.prototype.draw.apply(this, arguments), this.next.draw(), this.previous.draw();
    },
    "previousTrigger": function() {
        var e = this.previousStack.shift(), t = this.previousStack.shift();
        return void 0 != t ? (this.nextStack.unshift(e), this.previousStack.unshift(t), 
        this.restoring = !0, this.restore(t), this.restoring = !1, this.onNextChange(this.nextStack[0], this.nextStack.length), 
        this.onPreviousChange(this.previousStack[1], this.previousStack.length - 1)) : this.previousStack.unshift(e), 
        t;
    },
    "nextTrigger": function() {
        var e = this.nextStack.shift();
        return void 0 != e && (this.previousStack.unshift(e), this.restoring = !0, this.restore(e), 
        this.restoring = !1, this.onNextChange(this.nextStack[0], this.nextStack.length), 
        this.onPreviousChange(this.previousStack[1], this.previousStack.length - 1)), e;
    },
    "clear": function() {
        this.previousStack = [], this.previous.deactivate(), this.nextStack = [], this.next.deactivate();
    },
    "getState": function() {
        return {
            "center": this.map.getCenter(),
            "resolution": this.map.getResolution(),
            "projection": this.map.getProjectionObject(),
            "units": this.map.getProjectionObject().getUnits() || this.map.units || this.map.baseLayer.units
        };
    },
    "restore": function(e) {
        var t, i;
        if (this.map.getProjectionObject() == e.projection) i = this.map.getZoomForResolution(e.resolution), 
        t = e.center; else {
            (t = e.center.clone()).transform(e.projection, this.map.getProjectionObject());
            var n = e.units, r = this.map.getProjectionObject().getUnits() || this.map.units || this.map.baseLayer.units, s = n && r ? OpenLayers.INCHES_PER_UNIT[n] / OpenLayers.INCHES_PER_UNIT[r] : 1;
            i = this.map.getZoomForResolution(s * e.resolution);
        }
        this.map.setCenter(t, i);
    },
    "setListeners": function() {
        this.listeners = {};
        for (var e in this.registry) this.listeners[e] = OpenLayers.Function.bind(function() {
            if (!this.restoring) {
                var t = this.registry[e].apply(this, arguments);
                this.previousStack.unshift(t), this.previousStack.length > 1 && this.onPreviousChange(this.previousStack[1], this.previousStack.length - 1), 
                this.previousStack.length > this.limit + 1 && this.previousStack.pop(), this.nextStack.length > 0 && (this.nextStack = [], 
                this.onNextChange(null, 0));
            }
            return !0;
        }, this);
    },
    "activate": function() {
        var e = !1;
        if (this.map && OpenLayers.Control.prototype.activate.apply(this)) {
            null == this.listeners && this.setListeners();
            for (var t in this.listeners) this.map.events.register(t, this, this.listeners[t]);
            e = !0, 0 == this.previousStack.length && this.initStack();
        }
        return e;
    },
    "initStack": function() {
        this.map.getCenter() && this.listeners.moveend();
    },
    "deactivate": function() {
        var e = !1;
        if (this.map && OpenLayers.Control.prototype.deactivate.apply(this)) {
            for (var t in this.listeners) this.map.events.unregister(t, this, this.listeners[t]);
            this.clearOnDeactivate && this.clear(), e = !0;
        }
        return e;
    },
    "CLASS_NAME": "OpenLayers.Control.NavigationHistory"
}), OpenLayers.Control.NavToolbar = OpenLayers.Class(OpenLayers.Control.Panel, {
    "initialize": function(e) {
        OpenLayers.Control.Panel.prototype.initialize.apply(this, [ e ]), this.addControls([ new OpenLayers.Control.Navigation(), new OpenLayers.Control.ZoomBox() ]);
    },
    "draw": function() {
        var e = OpenLayers.Control.Panel.prototype.draw.apply(this, arguments);
        return null === this.defaultControl && (this.defaultControl = this.controls[0]), 
        e;
    },
    "CLASS_NAME": "OpenLayers.Control.NavToolbar"
}), OpenLayers.Control.OverviewMap = OpenLayers.Class(OpenLayers.Control, {
    "element": null,
    "ovmap": null,
    "size": {
        "w": 180,
        "h": 90
    },
    "layers": null,
    "minRectSize": 15,
    "minRectDisplayClass": "RectReplacement",
    "minRatio": 8,
    "maxRatio": 32,
    "mapOptions": null,
    "autoPan": !1,
    "handlers": null,
    "resolutionFactor": 1,
    "maximized": !1,
    "maximizeTitle": "",
    "minimizeTitle": "",
    "initialize": function(e) {
        this.layers = [], this.handlers = {}, OpenLayers.Control.prototype.initialize.apply(this, [ e ]);
    },
    "destroy": function() {
        this.mapDiv && (this.handlers.click && this.handlers.click.destroy(), this.handlers.drag && this.handlers.drag.destroy(), 
        this.ovmap && this.ovmap.viewPortDiv.removeChild(this.extentRectangle), this.extentRectangle = null, 
        this.rectEvents && (this.rectEvents.destroy(), this.rectEvents = null), this.ovmap && (this.ovmap.destroy(), 
        this.ovmap = null), this.element.removeChild(this.mapDiv), this.mapDiv = null, this.div.removeChild(this.element), 
        this.element = null, this.maximizeDiv && (this.div.removeChild(this.maximizeDiv), 
        this.maximizeDiv = null), this.minimizeDiv && (this.div.removeChild(this.minimizeDiv), 
        this.minimizeDiv = null), this.map.events.un({
            "buttonclick": this.onButtonClick,
            "moveend": this.update,
            "changebaselayer": this.baseLayerDraw,
            "scope": this
        }), OpenLayers.Control.prototype.destroy.apply(this, arguments));
    },
    "draw": function() {
        if (OpenLayers.Control.prototype.draw.apply(this, arguments), 0 === this.layers.length) {
            if (!this.map.baseLayer) return this.map.events.register("changebaselayer", this, this.baseLayerDraw), 
            this.div;
            var e = this.map.baseLayer.clone();
            this.layers = [ e ];
        }
        if (this.element = document.createElement("div"), this.element.className = this.displayClass + "Element", 
        this.element.style.display = "none", this.mapDiv = document.createElement("div"), 
        this.mapDiv.style.width = this.size.w + "px", this.mapDiv.style.height = this.size.h + "px", 
        this.mapDiv.style.position = "relative", this.mapDiv.style.overflow = "hidden", 
        this.mapDiv.id = OpenLayers.Util.createUniqueID("overviewMap"), this.extentRectangle = document.createElement("div"), 
        this.extentRectangle.style.position = "absolute", this.extentRectangle.style.zIndex = 1e3, 
        this.extentRectangle.className = this.displayClass + "ExtentRectangle", this.element.appendChild(this.mapDiv), 
        this.div.appendChild(this.element), this.outsideViewport) this.element.style.display = ""; else {
            this.div.className += " " + this.displayClass + "Container";
            t = OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");
            this.maximizeDiv = OpenLayers.Util.createAlphaImageDiv(this.displayClass + "MaximizeButton", null, null, t, "absolute"), 
            this.maximizeDiv.style.display = "none", this.maximizeDiv.className = this.displayClass + "MaximizeButton olButton", 
            this.maximizeTitle && (this.maximizeDiv.title = this.maximizeTitle), this.div.appendChild(this.maximizeDiv);
            var t = OpenLayers.Util.getImageLocation("layer-switcher-minimize.png");
            this.minimizeDiv = OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_minimizeDiv", null, null, t, "absolute"), 
            this.minimizeDiv.style.display = "none", this.minimizeDiv.className = this.displayClass + "MinimizeButton olButton", 
            this.minimizeTitle && (this.minimizeDiv.title = this.minimizeTitle), this.div.appendChild(this.minimizeDiv), 
            this.minimizeControl();
        }
        return this.map.getExtent() && this.update(), this.map.events.on({
            "buttonclick": this.onButtonClick,
            "moveend": this.update,
            "scope": this
        }), this.maximized && this.maximizeControl(), this.div;
    },
    "baseLayerDraw": function() {
        this.draw(), this.map.events.unregister("changebaselayer", this, this.baseLayerDraw);
    },
    "rectDrag": function(e) {
        var t = this.handlers.drag.last.x - e.x, i = this.handlers.drag.last.y - e.y;
        if (0 != t || 0 != i) {
            var n = this.rectPxBounds.top, r = this.rectPxBounds.left, s = Math.abs(this.rectPxBounds.getHeight()), a = this.rectPxBounds.getWidth(), o = Math.max(0, n - i);
            o = Math.min(o, this.ovmap.size.h - this.hComp - s);
            var l = Math.max(0, r - t);
            l = Math.min(l, this.ovmap.size.w - this.wComp - a), this.setRectPxBounds(new OpenLayers.Bounds(l, o + s, l + a, o));
        }
    },
    "mapDivClick": function(e) {
        var t = this.rectPxBounds.getCenterPixel(), i = e.xy.x - t.x, n = e.xy.y - t.y, r = this.rectPxBounds.top, s = this.rectPxBounds.left, a = Math.abs(this.rectPxBounds.getHeight()), o = this.rectPxBounds.getWidth(), l = Math.max(0, r + n);
        l = Math.min(l, this.ovmap.size.h - a);
        var h = Math.max(0, s + i);
        h = Math.min(h, this.ovmap.size.w - o), this.setRectPxBounds(new OpenLayers.Bounds(h, l + a, h + o, l)), 
        this.updateMapToRect();
    },
    "onButtonClick": function(e) {
        e.buttonElement === this.minimizeDiv ? this.minimizeControl() : e.buttonElement === this.maximizeDiv && this.maximizeControl();
    },
    "maximizeControl": function(e) {
        this.element.style.display = "", this.showToggle(!1), null != e && OpenLayers.Event.stop(e);
    },
    "minimizeControl": function(e) {
        this.element.style.display = "none", this.showToggle(!0), null != e && OpenLayers.Event.stop(e);
    },
    "showToggle": function(e) {
        this.maximizeDiv && (this.maximizeDiv.style.display = e ? "" : "none"), this.minimizeDiv && (this.minimizeDiv.style.display = e ? "none" : "");
    },
    "update": function() {
        null == this.ovmap && this.createMap(), !this.autoPan && this.isSuitableOverview() || this.updateOverview(), 
        this.updateRectToMap();
    },
    "isSuitableOverview": function() {
        var e = this.map.getExtent(), t = this.map.getMaxExtent(), i = new OpenLayers.Bounds(Math.max(e.left, t.left), Math.max(e.bottom, t.bottom), Math.min(e.right, t.right), Math.min(e.top, t.top));
        this.ovmap.getProjection() != this.map.getProjection() && (i = i.transform(this.map.getProjectionObject(), this.ovmap.getProjectionObject()));
        var n = this.ovmap.getResolution() / this.map.getResolution();
        return n > this.minRatio && n <= this.maxRatio && this.ovmap.getExtent().containsBounds(i);
    },
    "updateOverview": function() {
        var e = this.map.getResolution(), t = this.ovmap.getResolution(), i = t / e;
        i > this.maxRatio ? t = this.minRatio * e : i <= this.minRatio && (t = this.maxRatio * e);
        var n;
        this.ovmap.getProjection() != this.map.getProjection() ? (n = this.map.center.clone()).transform(this.map.getProjectionObject(), this.ovmap.getProjectionObject()) : n = this.map.center, 
        this.ovmap.setCenter(n, this.ovmap.getZoomForResolution(t * this.resolutionFactor)), 
        this.updateRectToMap();
    },
    "createMap": function() {
        var e = OpenLayers.Util.extend({
            "controls": [],
            "maxResolution": "auto",
            "fallThrough": !1
        }, this.mapOptions);
        if (this.ovmap = new OpenLayers.Map(this.mapDiv, e), this.ovmap.viewPortDiv.appendChild(this.extentRectangle), 
        OpenLayers.Event.stopObserving(window, "unload", this.ovmap.unloadDestroy), this.ovmap.addLayers(this.layers), 
        this.ovmap.zoomToMaxExtent(), this.wComp = parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-left-width")) + parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-right-width")), 
        this.wComp = this.wComp ? this.wComp : 2, this.hComp = parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-top-width")) + parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-bottom-width")), 
        this.hComp = this.hComp ? this.hComp : 2, this.handlers.drag = new OpenLayers.Handler.Drag(this, {
            "move": this.rectDrag,
            "done": this.updateMapToRect
        }, {
            "map": this.ovmap
        }), this.handlers.click = new OpenLayers.Handler.Click(this, {
            "click": this.mapDivClick
        }, {
            "single": !0,
            "double": !1,
            "stopSingle": !0,
            "stopDouble": !0,
            "pixelTolerance": 1,
            "map": this.ovmap
        }), this.handlers.click.activate(), this.rectEvents = new OpenLayers.Events(this, this.extentRectangle, null, !0), 
        this.rectEvents.register("mouseover", this, function(e) {
            this.handlers.drag.active || this.map.dragging || this.handlers.drag.activate();
        }), this.rectEvents.register("mouseout", this, function(e) {
            this.handlers.drag.dragging || this.handlers.drag.deactivate();
        }), this.ovmap.getProjection() != this.map.getProjection()) {
            var t = this.map.getProjectionObject().getUnits() || this.map.units || this.map.baseLayer.units, i = this.ovmap.getProjectionObject().getUnits() || this.ovmap.units || this.ovmap.baseLayer.units;
            this.resolutionFactor = t && i ? OpenLayers.INCHES_PER_UNIT[t] / OpenLayers.INCHES_PER_UNIT[i] : 1;
        }
    },
    "updateRectToMap": function() {
        var e;
        e = this.ovmap.getProjection() != this.map.getProjection() ? this.map.getExtent().transform(this.map.getProjectionObject(), this.ovmap.getProjectionObject()) : this.map.getExtent();
        var t = this.getRectBoundsFromMapBounds(e);
        t && this.setRectPxBounds(t);
    },
    "updateMapToRect": function() {
        var e = this.getMapBoundsFromRectBounds(this.rectPxBounds);
        this.ovmap.getProjection() != this.map.getProjection() && (e = e.transform(this.ovmap.getProjectionObject(), this.map.getProjectionObject())), 
        this.map.panTo(e.getCenterLonLat());
    },
    "setRectPxBounds": function(e) {
        var t = Math.max(e.top, 0), i = Math.max(e.left, 0), n = Math.min(e.top + Math.abs(e.getHeight()), this.ovmap.size.h - this.hComp), r = Math.min(e.left + e.getWidth(), this.ovmap.size.w - this.wComp), s = Math.max(r - i, 0), a = Math.max(n - t, 0);
        if (s < this.minRectSize || a < this.minRectSize) {
            this.extentRectangle.className = this.displayClass + this.minRectDisplayClass;
            var o = i + s / 2 - this.minRectSize / 2, l = t + a / 2 - this.minRectSize / 2;
            this.extentRectangle.style.top = Math.round(l) + "px", this.extentRectangle.style.left = Math.round(o) + "px", 
            this.extentRectangle.style.height = this.minRectSize + "px", this.extentRectangle.style.width = this.minRectSize + "px";
        } else this.extentRectangle.className = this.displayClass + "ExtentRectangle", this.extentRectangle.style.top = Math.round(t) + "px", 
        this.extentRectangle.style.left = Math.round(i) + "px", this.extentRectangle.style.height = Math.round(a) + "px", 
        this.extentRectangle.style.width = Math.round(s) + "px";
        this.rectPxBounds = new OpenLayers.Bounds(Math.round(i), Math.round(n), Math.round(r), Math.round(t));
    },
    "getRectBoundsFromMapBounds": function(e) {
        var t = this.getOverviewPxFromLonLat({
            "lon": e.left,
            "lat": e.bottom
        }), i = this.getOverviewPxFromLonLat({
            "lon": e.right,
            "lat": e.top
        }), n = null;
        return t && i && (n = new OpenLayers.Bounds(t.x, t.y, i.x, i.y)), n;
    },
    "getMapBoundsFromRectBounds": function(e) {
        var t = this.getLonLatFromOverviewPx({
            "x": e.left,
            "y": e.bottom
        }), i = this.getLonLatFromOverviewPx({
            "x": e.right,
            "y": e.top
        });
        return new OpenLayers.Bounds(t.lon, t.lat, i.lon, i.lat);
    },
    "getLonLatFromOverviewPx": function(e) {
        var t = this.ovmap.size, i = this.ovmap.getResolution(), n = this.ovmap.getExtent().getCenterLonLat(), r = e.x - t.w / 2, s = e.y - t.h / 2;
        return {
            "lon": n.lon + r * i,
            "lat": n.lat - s * i
        };
    },
    "getOverviewPxFromLonLat": function(e) {
        var t = this.ovmap.getResolution(), i = this.ovmap.getExtent();
        if (i) return {
            "x": Math.round(1 / t * (e.lon - i.left)),
            "y": Math.round(1 / t * (i.top - e.lat))
        };
    },
    "CLASS_NAME": "OpenLayers.Control.OverviewMap"
}), OpenLayers.Control.Pan = OpenLayers.Class(OpenLayers.Control.Button, {
    "slideFactor": 50,
    "slideRatio": null,
    "direction": null,
    "initialize": function(e, t) {
        this.direction = e, this.CLASS_NAME += this.direction, OpenLayers.Control.prototype.initialize.apply(this, [ t ]);
    },
    "trigger": function() {
        if (this.map) {
            var e = OpenLayers.Function.bind(function(e) {
                return this.slideRatio ? this.map.getSize()[e] * this.slideRatio : this.slideFactor;
            }, this);
            switch (this.direction) {
              case OpenLayers.Control.Pan.NORTH:
                this.map.pan(0, -e("h"));
                break;

              case OpenLayers.Control.Pan.SOUTH:
                this.map.pan(0, e("h"));
                break;

              case OpenLayers.Control.Pan.WEST:
                this.map.pan(-e("w"), 0);
                break;

              case OpenLayers.Control.Pan.EAST:
                this.map.pan(e("w"), 0);
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Control.Pan"
}), OpenLayers.Control.Pan.NORTH = "North", OpenLayers.Control.Pan.SOUTH = "South", 
OpenLayers.Control.Pan.EAST = "East", OpenLayers.Control.Pan.WEST = "West", OpenLayers.Control.PanPanel = OpenLayers.Class(OpenLayers.Control.Panel, {
    "slideFactor": 50,
    "slideRatio": null,
    "initialize": function(e) {
        OpenLayers.Control.Panel.prototype.initialize.apply(this, [ e ]);
        var e = {
            "slideFactor": this.slideFactor,
            "slideRatio": this.slideRatio
        };
        this.addControls([ new OpenLayers.Control.Pan(OpenLayers.Control.Pan.NORTH, e), new OpenLayers.Control.Pan(OpenLayers.Control.Pan.SOUTH, e), new OpenLayers.Control.Pan(OpenLayers.Control.Pan.EAST, e), new OpenLayers.Control.Pan(OpenLayers.Control.Pan.WEST, e) ]);
    },
    "CLASS_NAME": "OpenLayers.Control.PanPanel"
}), OpenLayers.Control.PanZoom = OpenLayers.Class(OpenLayers.Control, {
    "slideFactor": 50,
    "slideRatio": null,
    "buttons": null,
    "position": null,
    "initialize": function(e) {
        this.position = new OpenLayers.Pixel(OpenLayers.Control.PanZoom.X, OpenLayers.Control.PanZoom.Y), 
        OpenLayers.Control.prototype.initialize.apply(this, arguments);
    },
    "destroy": function() {
        this.map && !this.outsideViewport && this.map.events.unregister("buttonclick", this, this.onButtonClick), 
        this.removeButtons(), this.buttons = null, this.position = null, OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "setMap": function(e) {
        OpenLayers.Control.prototype.setMap.apply(this, arguments);
        var t;
        this.outsideViewport ? (this.events.attachToElement(this.div), t = this) : t = this.map, 
        t.events.register("buttonclick", this, this.onButtonClick);
    },
    "draw": function(e) {
        OpenLayers.Control.prototype.draw.apply(this, arguments), e = this.position, this.buttons = [];
        var t = {
            "w": 18,
            "h": 18
        }, i = new OpenLayers.Pixel(e.x + t.w / 2, e.y);
        return this._addButton("panup", "north-mini.png", i, t), e.y = i.y + t.h, this._addButton("panleft", "west-mini.png", e, t), 
        this._addButton("panright", "east-mini.png", e.add(t.w, 0), t), this._addButton("pandown", "south-mini.png", i.add(0, 2 * t.h), t), 
        this._addButton("zoomin", "zoom-plus-mini.png", i.add(0, 3 * t.h + 5), t), this._addButton("zoomworld", "zoom-world-mini.png", i.add(0, 4 * t.h + 5), t), 
        this._addButton("zoomout", "zoom-minus-mini.png", i.add(0, 5 * t.h + 5), t), this.div;
    },
    "_addButton": function(e, t, i, n) {
        var r = OpenLayers.Util.getImageLocation(t), s = OpenLayers.Util.createAlphaImageDiv(this.id + "_" + e, i, n, r, "absolute");
        return s.style.cursor = "pointer", this.div.appendChild(s), s.action = e, s.className = "olButton", 
        this.buttons.push(s), s;
    },
    "_removeButton": function(e) {
        this.div.removeChild(e), OpenLayers.Util.removeItem(this.buttons, e);
    },
    "removeButtons": function() {
        for (var e = this.buttons.length - 1; e >= 0; --e) this._removeButton(this.buttons[e]);
    },
    "onButtonClick": function(e) {
        switch (e.buttonElement.action) {
          case "panup":
            this.map.pan(0, -this.getSlideFactor("h"));
            break;

          case "pandown":
            this.map.pan(0, this.getSlideFactor("h"));
            break;

          case "panleft":
            this.map.pan(-this.getSlideFactor("w"), 0);
            break;

          case "panright":
            this.map.pan(this.getSlideFactor("w"), 0);
            break;

          case "zoomin":
            this.map.zoomIn();
            break;

          case "zoomout":
            this.map.zoomOut();
            break;

          case "zoomworld":
            this.map.zoomToMaxExtent();
        }
    },
    "getSlideFactor": function(e) {
        return this.slideRatio ? this.map.getSize()[e] * this.slideRatio : this.slideFactor;
    },
    "CLASS_NAME": "OpenLayers.Control.PanZoom"
}), OpenLayers.Control.PanZoom.X = 4, OpenLayers.Control.PanZoom.Y = 4, OpenLayers.Control.PanZoomBar = OpenLayers.Class(OpenLayers.Control.PanZoom, {
    "zoomStopWidth": 18,
    "zoomStopHeight": 11,
    "slider": null,
    "sliderEvents": null,
    "zoombarDiv": null,
    "zoomWorldIcon": !1,
    "panIcons": !0,
    "forceFixedZoomLevel": !1,
    "mouseDragStart": null,
    "deltaY": null,
    "zoomStart": null,
    "destroy": function() {
        this._removeZoomBar(), this.map.events.un({
            "changebaselayer": this.redraw,
            "updatesize": this.redraw,
            "scope": this
        }), OpenLayers.Control.PanZoom.prototype.destroy.apply(this, arguments), delete this.mouseDragStart, 
        delete this.zoomStart;
    },
    "setMap": function(e) {
        OpenLayers.Control.PanZoom.prototype.setMap.apply(this, arguments), this.outsideViewport && this.events.attachToElement(this.div), 
        this.map.events.on({
            "changebaselayer": this.redraw,
            "updatesize": this.redraw,
            "scope": this
        });
    },
    "redraw": function() {
        null != this.div && (this.removeButtons(), this._removeZoomBar()), this.draw();
    },
    "draw": function(e) {
        OpenLayers.Control.prototype.draw.apply(this, arguments), e = this.position.clone(), 
        this.buttons = [];
        var t = {
            "w": 18,
            "h": 18
        };
        if (this.panIcons) {
            var i = new OpenLayers.Pixel(e.x + t.w / 2, e.y), n = t.w;
            this.zoomWorldIcon && (i = new OpenLayers.Pixel(e.x + t.w, e.y)), this._addButton("panup", "north-mini.png", i, t), 
            e.y = i.y + t.h, this._addButton("panleft", "west-mini.png", e, t), this.zoomWorldIcon && (this._addButton("zoomworld", "zoom-world-mini.png", e.add(t.w, 0), t), 
            n *= 2), this._addButton("panright", "east-mini.png", e.add(n, 0), t), this._addButton("pandown", "south-mini.png", i.add(0, 2 * t.h), t), 
            this._addButton("zoomin", "zoom-plus-mini.png", i.add(0, 3 * t.h + 5), t), i = this._addZoomBar(i.add(0, 4 * t.h + 5)), 
            this._addButton("zoomout", "zoom-minus-mini.png", i, t);
        } else this._addButton("zoomin", "zoom-plus-mini.png", e, t), i = this._addZoomBar(e.add(0, t.h)), 
        this._addButton("zoomout", "zoom-minus-mini.png", i, t), this.zoomWorldIcon && (i = i.add(0, t.h + 3), 
        this._addButton("zoomworld", "zoom-world-mini.png", i, t));
        return this.div;
    },
    "_addZoomBar": function(e) {
        var t = OpenLayers.Util.getImageLocation("slider.png"), i = this.id + "_" + this.map.id, n = this.map.getMinZoom(), r = this.map.getNumZoomLevels() - 1 - this.map.getZoom(), s = OpenLayers.Util.createAlphaImageDiv(i, e.add(-1, r * this.zoomStopHeight), {
            "w": 20,
            "h": 9
        }, t, "absolute");
        s.style.cursor = "move", this.slider = s, this.sliderEvents = new OpenLayers.Events(this, s, null, !0, {
            "includeXY": !0
        }), this.sliderEvents.on({
            "touchstart": this.zoomBarDown,
            "touchmove": this.zoomBarDrag,
            "touchend": this.zoomBarUp,
            "mousedown": this.zoomBarDown,
            "mousemove": this.zoomBarDrag,
            "mouseup": this.zoomBarUp
        });
        var a = {
            "w": this.zoomStopWidth,
            "h": this.zoomStopHeight * (this.map.getNumZoomLevels() - n)
        }, t = OpenLayers.Util.getImageLocation("zoombar.png"), o = null;
        if (OpenLayers.Util.alphaHack()) {
            i = this.id + "_" + this.map.id;
            (o = OpenLayers.Util.createAlphaImageDiv(i, e, {
                "w": a.w,
                "h": this.zoomStopHeight
            }, t, "absolute", null, "crop")).style.height = a.h + "px";
        } else o = OpenLayers.Util.createDiv("OpenLayers_Control_PanZoomBar_Zoombar" + this.map.id, e, a, t);
        return o.style.cursor = "pointer", o.className = "olButton", this.zoombarDiv = o, 
        this.div.appendChild(o), this.startTop = parseInt(o.style.top), this.div.appendChild(s), 
        this.map.events.register("zoomend", this, this.moveZoomBar), e = e.add(0, this.zoomStopHeight * (this.map.getNumZoomLevels() - n));
    },
    "_removeZoomBar": function() {
        this.sliderEvents.un({
            "touchstart": this.zoomBarDown,
            "touchmove": this.zoomBarDrag,
            "touchend": this.zoomBarUp,
            "mousedown": this.zoomBarDown,
            "mousemove": this.zoomBarDrag,
            "mouseup": this.zoomBarUp
        }), this.sliderEvents.destroy(), this.div.removeChild(this.zoombarDiv), this.zoombarDiv = null, 
        this.div.removeChild(this.slider), this.slider = null, this.map.events.unregister("zoomend", this, this.moveZoomBar);
    },
    "onButtonClick": function(e) {
        if (OpenLayers.Control.PanZoom.prototype.onButtonClick.apply(this, arguments), e.buttonElement === this.zoombarDiv) {
            var t = e.buttonXY.y / this.zoomStopHeight;
            !this.forceFixedZoomLevel && this.map.fractionalZoom || (t = Math.floor(t));
            var i = this.map.getNumZoomLevels() - 1 - t;
            i = Math.min(Math.max(i, 0), this.map.getNumZoomLevels() - 1), this.map.zoomTo(i);
        }
    },
    "passEventToSlider": function(e) {
        this.sliderEvents.handleBrowserEvent(e);
    },
    "zoomBarDown": function(e) {
        (OpenLayers.Event.isLeftClick(e) || OpenLayers.Event.isSingleTouch(e)) && ((this.outsideViewport ? this : this.map).events.on({
            "touchmove": this.passEventToSlider,
            "mousemove": this.passEventToSlider,
            "mouseup": this.passEventToSlider,
            "scope": this
        }), this.mouseDragStart = e.xy.clone(), this.zoomStart = e.xy.clone(), this.div.style.cursor = "move", 
        this.zoombarDiv.offsets = null, OpenLayers.Event.stop(e));
    },
    "zoomBarDrag": function(e) {
        if (null != this.mouseDragStart) {
            var t = this.mouseDragStart.y - e.xy.y, i = OpenLayers.Util.pagePosition(this.zoombarDiv);
            if (e.clientY - i[1] > 0 && e.clientY - i[1] < parseInt(this.zoombarDiv.style.height) - 2) {
                var n = parseInt(this.slider.style.top) - t;
                this.slider.style.top = n + "px", this.mouseDragStart = e.xy.clone();
            }
            this.deltaY = this.zoomStart.y - e.xy.y, OpenLayers.Event.stop(e);
        }
    },
    "zoomBarUp": function(e) {
        if ((OpenLayers.Event.isLeftClick(e) || "touchend" === e.type) && this.mouseDragStart) {
            this.div.style.cursor = "", (this.outsideViewport ? this : this.map).events.un({
                "touchmove": this.passEventToSlider,
                "mouseup": this.passEventToSlider,
                "mousemove": this.passEventToSlider,
                "scope": this
            });
            var t = this.map.zoom;
            !this.forceFixedZoomLevel && this.map.fractionalZoom ? (t += this.deltaY / this.zoomStopHeight, 
            t = Math.min(Math.max(t, 0), this.map.getNumZoomLevels() - 1)) : (t += this.deltaY / this.zoomStopHeight, 
            t = Math.max(Math.round(t), 0)), this.map.zoomTo(t), this.mouseDragStart = null, 
            this.zoomStart = null, this.deltaY = 0, OpenLayers.Event.stop(e);
        }
    },
    "moveZoomBar": function() {
        var e = (this.map.getNumZoomLevels() - 1 - this.map.getZoom()) * this.zoomStopHeight + this.startTop + 1;
        this.slider.style.top = e + "px";
    },
    "CLASS_NAME": "OpenLayers.Control.PanZoomBar"
}), OpenLayers.Control.Permalink = OpenLayers.Class(OpenLayers.Control, {
    "argParserClass": OpenLayers.Control.ArgParser,
    "element": null,
    "anchor": !1,
    "base": "",
    "displayProjection": null,
    "initialize": function(e, t, i) {
        null === e || "object" != typeof e || OpenLayers.Util.isElement(e) ? (OpenLayers.Control.prototype.initialize.apply(this, [ i ]), 
        this.element = OpenLayers.Util.getElement(e), this.base = t || document.location.href) : (i = e, 
        this.base = document.location.href, OpenLayers.Control.prototype.initialize.apply(this, [ i ]), 
        null != this.element && (this.element = OpenLayers.Util.getElement(this.element)));
    },
    "destroy": function() {
        this.element && this.element.parentNode == this.div && (this.div.removeChild(this.element), 
        this.element = null), this.map && this.map.events.unregister("moveend", this, this.updateLink), 
        OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "setMap": function(e) {
        OpenLayers.Control.prototype.setMap.apply(this, arguments);
        for (var t = 0, i = this.map.controls.length; t < i; t++) {
            var n = this.map.controls[t];
            if (n.CLASS_NAME == this.argParserClass.CLASS_NAME) {
                n.displayProjection != this.displayProjection && (this.displayProjection = n.displayProjection);
                break;
            }
        }
        t == this.map.controls.length && this.map.addControl(new this.argParserClass({
            "displayProjection": this.displayProjection
        }));
    },
    "draw": function() {
        return OpenLayers.Control.prototype.draw.apply(this, arguments), this.element || this.anchor || (this.element = document.createElement("a"), 
        this.element.innerHTML = OpenLayers.i18n("Permalink"), this.element.href = "", this.div.appendChild(this.element)), 
        this.map.events.on({
            "moveend": this.updateLink,
            "changelayer": this.updateLink,
            "changebaselayer": this.updateLink,
            "scope": this
        }), this.updateLink(), this.div;
    },
    "updateLink": function() {
        var e = this.anchor ? "#" : "?", t = this.base, i = null;
        -1 != t.indexOf("#") && 0 == this.anchor && (i = t.substring(t.indexOf("#"), t.length)), 
        -1 != t.indexOf(e) && (t = t.substring(0, t.indexOf(e))), t = t.split("#")[0] + e + OpenLayers.Util.getParameterString(this.createParams()), 
        i && (t += i), this.anchor && !this.element ? window.location.href = t : this.element.href = t;
    },
    "createParams": function(e, t, i) {
        e = e || this.map.getCenter();
        var n = OpenLayers.Util.getParameters(this.base);
        if (e) {
            n.zoom = t || this.map.getZoom();
            var r = e.lat, s = e.lon;
            if (this.displayProjection) {
                var a = OpenLayers.Projection.transform({
                    "x": s,
                    "y": r
                }, this.map.getProjectionObject(), this.displayProjection);
                s = a.x, r = a.y;
            }
            n.lat = Math.round(1e5 * r) / 1e5, n.lon = Math.round(1e5 * s) / 1e5, i = i || this.map.layers, 
            n.layers = "";
            for (var o = 0, l = i.length; o < l; o++) {
                var h = i[o];
                h.isBaseLayer ? n.layers += h == this.map.baseLayer ? "B" : "0" : n.layers += h.getVisibility() ? "T" : "F";
            }
        }
        return n;
    },
    "CLASS_NAME": "OpenLayers.Control.Permalink"
}), OpenLayers.Handler.Pinch = OpenLayers.Class(OpenLayers.Handler, {
    "started": !1,
    "stopDown": !1,
    "pinching": !1,
    "last": null,
    "start": null,
    "touchstart": function(e) {
        var t = !0;
        if (this.pinching = !1, OpenLayers.Event.isMultiTouch(e)) this.started = !0, this.last = this.start = {
            "distance": this.getDistance(e.touches),
            "delta": 0,
            "scale": 1
        }, this.callback("start", [ e, this.start ]), t = !this.stopDown; else {
            if (this.started) return !1;
            this.started = !1, this.start = null, this.last = null;
        }
        return OpenLayers.Event.preventDefault(e), t;
    },
    "touchmove": function(e) {
        if (this.started && OpenLayers.Event.isMultiTouch(e)) {
            this.pinching = !0;
            var t = this.getPinchData(e);
            this.callback("move", [ e, t ]), this.last = t, OpenLayers.Event.stop(e);
        } else if (this.started) return !1;
        return !0;
    },
    "touchend": function(e) {
        return !(this.started && !OpenLayers.Event.isMultiTouch(e)) || (this.started = !1, 
        this.pinching = !1, this.callback("done", [ e, this.start, this.last ]), this.start = null, 
        this.last = null, !1);
    },
    "activate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.activate.apply(this, arguments) && (this.pinching = !1, 
        e = !0), e;
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.started = !1, 
        this.pinching = !1, this.start = null, this.last = null, e = !0), e;
    },
    "getDistance": function(e) {
        var t = e[0], i = e[1];
        return Math.sqrt(Math.pow(t.olClientX - i.olClientX, 2) + Math.pow(t.olClientY - i.olClientY, 2));
    },
    "getPinchData": function(e) {
        var t = this.getDistance(e.touches), i = t / this.start.distance;
        return {
            "distance": t,
            "delta": this.last.distance - t,
            "scale": i
        };
    },
    "CLASS_NAME": "OpenLayers.Handler.Pinch"
}), OpenLayers.Control.PinchZoom = OpenLayers.Class(OpenLayers.Control, {
    "type": OpenLayers.Control.TYPE_TOOL,
    "pinchOrigin": null,
    "currentCenter": null,
    "autoActivate": !0,
    "preserveCenter": !1,
    "initialize": function(e) {
        OpenLayers.Control.prototype.initialize.apply(this, arguments), this.handler = new OpenLayers.Handler.Pinch(this, {
            "start": this.pinchStart,
            "move": this.pinchMove,
            "done": this.pinchDone
        }, this.handlerOptions);
    },
    "pinchStart": function(e, t) {
        var i = this.preserveCenter ? this.map.getPixelFromLonLat(this.map.getCenter()) : e.xy;
        this.pinchOrigin = i, this.currentCenter = i;
    },
    "pinchMove": function(e, t) {
        var i = t.scale, n = this.map.layerContainerOriginPx, r = this.pinchOrigin, s = this.preserveCenter ? this.map.getPixelFromLonLat(this.map.getCenter()) : e.xy, a = Math.round(n.x + s.x - r.x + (i - 1) * (n.x - r.x)), o = Math.round(n.y + s.y - r.y + (i - 1) * (n.y - r.y));
        this.map.applyTransform(a, o, i), this.currentCenter = s;
    },
    "pinchDone": function(e, t, i) {
        this.map.applyTransform();
        var n = this.map.getZoomForResolution(this.map.getResolution() / i.scale, !0);
        if (n !== this.map.getZoom() || !this.currentCenter.equals(this.pinchOrigin)) {
            var r = this.map.getResolutionForZoom(n), s = this.map.getLonLatFromPixel(this.pinchOrigin), a = this.currentCenter, o = this.map.getSize();
            s.lon += r * (o.w / 2 - a.x), s.lat -= r * (o.h / 2 - a.y), this.map.div.clientWidth = this.map.div.clientWidth, 
            this.map.setCenter(s, n);
        }
    },
    "CLASS_NAME": "OpenLayers.Control.PinchZoom"
}), OpenLayers.Control.Scale = OpenLayers.Class(OpenLayers.Control, {
    "element": null,
    "geodesic": !1,
    "template": "Scale = 1 : ${scaleDenom}",
    "initialize": function(e, t) {
        OpenLayers.Control.prototype.initialize.apply(this, [ t ]), this.element = OpenLayers.Util.getElement(e);
    },
    "draw": function() {
        return OpenLayers.Control.prototype.draw.apply(this, arguments), this.element || (this.element = document.createElement("div"), 
        this.div.appendChild(this.element)), this.map.events.register("moveend", this, this.updateScale), 
        this.updateScale(), this.div;
    },
    "updateScale": function() {
        var e;
        if (!0 === this.geodesic) {
            if (!this.map.getUnits()) return;
            var t = OpenLayers.INCHES_PER_UNIT;
            e = (this.map.getGeodesicPixelSize().w || 1e-6) * t.km * OpenLayers.DOTS_PER_INCH;
        } else e = this.map.getScale();
        if (e) {
            e = e >= 9500 && e <= 95e4 ? Math.round(e / 1e3) + "K" : e >= 95e4 ? Math.round(e / 1e6) + "M" : Math.round(e);
            var i = OpenLayers.i18n(this.template, {
                "scaleDenom": e
            });
            this.element.innerHTML = i;
        }
    },
    "CLASS_NAME": "OpenLayers.Control.Scale"
}), OpenLayers.Control.ScaleLine = OpenLayers.Class(OpenLayers.Control, {
    "maxWidth": 100,
    "topOutUnits": "km",
    "topInUnits": "m",
    "bottomOutUnits": "mi",
    "bottomInUnits": "ft",
    "eTop": null,
    "eBottom": null,
    "geodesic": !1,
    "draw": function() {
        if (OpenLayers.Control.prototype.draw.apply(this, arguments), !this.eTop) {
            this.eTop = document.createElement("div"), this.eTop.className = this.displayClass + "Top";
            this.topInUnits.length;
            this.div.appendChild(this.eTop), "" == this.topOutUnits || "" == this.topInUnits ? this.eTop.style.visibility = "hidden" : this.eTop.style.visibility = "visible", 
            this.eBottom = document.createElement("div"), this.eBottom.className = this.displayClass + "Bottom", 
            this.div.appendChild(this.eBottom), "" == this.bottomOutUnits || "" == this.bottomInUnits ? this.eBottom.style.visibility = "hidden" : this.eBottom.style.visibility = "visible";
        }
        return this.map.events.register("moveend", this, this.update), this.update(), this.div;
    },
    "getBarLen": function(e) {
        var t = parseInt(Math.log(e) / Math.log(10)), i = Math.pow(10, t), n = parseInt(e / i);
        return (n > 5 ? 5 : n > 2 ? 2 : 1) * i;
    },
    "update": function() {
        var e = this.map.getResolution();
        if (e) {
            var t = this.map.getUnits(), i = OpenLayers.INCHES_PER_UNIT, n = this.maxWidth * e * i[t], r = 1;
            !0 === this.geodesic && (n *= r = (this.map.getGeodesicPixelSize().w || 1e-6) * this.maxWidth / (n / i.km));
            var s, a;
            n > 1e5 ? (s = this.topOutUnits, a = this.bottomOutUnits) : (s = this.topInUnits, 
            a = this.bottomInUnits);
            var o = n / i[s], l = n / i[a], h = this.getBarLen(o), u = this.getBarLen(l), p = (o = h / i[t] * i[s]) / e / r, c = (l = u / i[t] * i[a]) / e / r;
            "visible" == this.eBottom.style.visibility && (this.eBottom.style.width = Math.round(c) + "px", 
            this.eBottom.innerHTML = u + " " + a), "visible" == this.eTop.style.visibility && (this.eTop.style.width = Math.round(p) + "px", 
            this.eTop.innerHTML = h + " " + s);
        }
    },
    "CLASS_NAME": "OpenLayers.Control.ScaleLine"
}), OpenLayers.Layer.Vector.RootContainer = OpenLayers.Class(OpenLayers.Layer.Vector, {
    "displayInLayerSwitcher": !1,
    "layers": null,
    "display": function() {},
    "getFeatureFromEvent": function(e) {
        for (var t, i = this.layers, n = 0; n < i.length; n++) if (t = i[n].getFeatureFromEvent(e)) return t;
    },
    "setMap": function(e) {
        OpenLayers.Layer.Vector.prototype.setMap.apply(this, arguments), this.collectRoots(), 
        e.events.register("changelayer", this, this.handleChangeLayer);
    },
    "removeMap": function(e) {
        e.events.unregister("changelayer", this, this.handleChangeLayer), this.resetRoots(), 
        OpenLayers.Layer.Vector.prototype.removeMap.apply(this, arguments);
    },
    "collectRoots": function() {
        for (var e, t = 0; t < this.map.layers.length; ++t) e = this.map.layers[t], -1 != OpenLayers.Util.indexOf(this.layers, e) && e.renderer.moveRoot(this.renderer);
    },
    "resetRoots": function() {
        for (var e, t = 0; t < this.layers.length; ++t) e = this.layers[t], this.renderer && e.renderer.getRenderLayerId() == this.id && this.renderer.moveRoot(e.renderer);
    },
    "handleChangeLayer": function(e) {
        var t = e.layer;
        "order" == e.property && -1 != OpenLayers.Util.indexOf(this.layers, t) && (this.resetRoots(), 
        this.collectRoots());
    },
    "CLASS_NAME": "OpenLayers.Layer.Vector.RootContainer"
}), OpenLayers.Control.SelectFeature = OpenLayers.Class(OpenLayers.Control, {
    "multipleKey": null,
    "toggleKey": null,
    "multiple": !1,
    "clickout": !0,
    "toggle": !1,
    "hover": !1,
    "highlightOnly": !1,
    "box": !1,
    "onBeforeSelect": function() {},
    "onSelect": function() {},
    "onUnselect": function() {},
    "scope": null,
    "geometryTypes": null,
    "layer": null,
    "layers": null,
    "callbacks": null,
    "selectStyle": null,
    "renderIntent": "select",
    "handlers": null,
    "initialize": function(e, t) {
        OpenLayers.Control.prototype.initialize.apply(this, [ t ]), null === this.scope && (this.scope = this), 
        this.initLayer(e);
        var i = {
            "click": this.clickFeature,
            "clickout": this.clickoutFeature
        };
        this.hover && (i.over = this.overFeature, i.out = this.outFeature), this.callbacks = OpenLayers.Util.extend(i, this.callbacks), 
        this.handlers = {
            "feature": new OpenLayers.Handler.Feature(this, this.layer, this.callbacks, {
                "geometryTypes": this.geometryTypes
            })
        }, this.box && (this.handlers.box = new OpenLayers.Handler.Box(this, {
            "done": this.selectBox
        }, {
            "boxDivClassName": "olHandlerBoxSelectFeature"
        }));
    },
    "initLayer": function(e) {
        OpenLayers.Util.isArray(e) ? (this.layers = e, this.layer = new OpenLayers.Layer.Vector.RootContainer(this.id + "_container", {
            "layers": e
        })) : this.layer = e;
    },
    "destroy": function() {
        this.active && this.layers && this.map.removeLayer(this.layer), OpenLayers.Control.prototype.destroy.apply(this, arguments), 
        this.layers && this.layer.destroy();
    },
    "activate": function() {
        return this.active || (this.layers && this.map.addLayer(this.layer), this.handlers.feature.activate(), 
        this.box && this.handlers.box && this.handlers.box.activate()), OpenLayers.Control.prototype.activate.apply(this, arguments);
    },
    "deactivate": function() {
        return this.active && (this.handlers.feature.deactivate(), this.handlers.box && this.handlers.box.deactivate(), 
        this.layers && this.map.removeLayer(this.layer)), OpenLayers.Control.prototype.deactivate.apply(this, arguments);
    },
    "unselectAll": function(e) {
        var t, i, n, r, s = this.layers || [ this.layer ];
        for (n = 0; n < s.length; ++n) if (t = s[n], r = 0, null != t.selectedFeatures) for (;t.selectedFeatures.length > r; ) i = t.selectedFeatures[r], 
        e && e.except == i ? ++r : this.unselect(i);
    },
    "clickFeature": function(e) {
        this.hover || (OpenLayers.Util.indexOf(e.layer.selectedFeatures, e) > -1 ? this.toggleSelect() ? this.unselect(e) : this.multipleSelect() || this.unselectAll({
            "except": e
        }) : (this.multipleSelect() || this.unselectAll({
            "except": e
        }), this.select(e)));
    },
    "multipleSelect": function() {
        return this.multiple || this.handlers.feature.evt && this.handlers.feature.evt[this.multipleKey];
    },
    "toggleSelect": function() {
        return this.toggle || this.handlers.feature.evt && this.handlers.feature.evt[this.toggleKey];
    },
    "clickoutFeature": function(e) {
        !this.hover && this.clickout && this.unselectAll();
    },
    "overFeature": function(e) {
        var t = e.layer;
        this.hover && (this.highlightOnly ? this.highlight(e) : -1 == OpenLayers.Util.indexOf(t.selectedFeatures, e) && this.select(e));
    },
    "outFeature": function(e) {
        if (this.hover) if (this.highlightOnly) {
            if (e._lastHighlighter == this.id) if (e._prevHighlighter && e._prevHighlighter != this.id) {
                delete e._lastHighlighter;
                var t = this.map.getControl(e._prevHighlighter);
                t && t.highlight(e);
            } else this.unhighlight(e);
        } else this.unselect(e);
    },
    "highlight": function(e) {
        var t = e.layer;
        if (!1 !== this.events.triggerEvent("beforefeaturehighlighted", {
            "feature": e
        })) {
            e._prevHighlighter = e._lastHighlighter, e._lastHighlighter = this.id;
            var i = this.selectStyle || this.renderIntent;
            t.drawFeature(e, i), this.events.triggerEvent("featurehighlighted", {
                "feature": e
            });
        }
    },
    "unhighlight": function(e) {
        var t = e.layer;
        void 0 == e._prevHighlighter ? delete e._lastHighlighter : e._prevHighlighter == this.id ? delete e._prevHighlighter : (e._lastHighlighter = e._prevHighlighter, 
        delete e._prevHighlighter), t.drawFeature(e, e.style || e.layer.style || "default"), 
        this.events.triggerEvent("featureunhighlighted", {
            "feature": e
        });
    },
    "select": function(e) {
        var t = this.onBeforeSelect.call(this.scope, e), i = e.layer;
        !1 !== t && !1 !== (t = i.events.triggerEvent("beforefeatureselected", {
            "feature": e
        })) && (i.selectedFeatures.push(e), this.highlight(e), this.handlers.feature.lastFeature || (this.handlers.feature.lastFeature = i.selectedFeatures[0]), 
        i.events.triggerEvent("featureselected", {
            "feature": e
        }), this.onSelect.call(this.scope, e));
    },
    "unselect": function(e) {
        var t = e.layer;
        this.unhighlight(e), OpenLayers.Util.removeItem(t.selectedFeatures, e), t.events.triggerEvent("featureunselected", {
            "feature": e
        }), this.onUnselect.call(this.scope, e);
    },
    "selectBox": function(e) {
        if (e instanceof OpenLayers.Bounds) {
            var t = this.map.getLonLatFromPixel({
                "x": e.left,
                "y": e.bottom
            }), i = this.map.getLonLatFromPixel({
                "x": e.right,
                "y": e.top
            }), n = new OpenLayers.Bounds(t.lon, t.lat, i.lon, i.lat);
            this.multipleSelect() || this.unselectAll();
            var r = this.multiple;
            this.multiple = !0;
            var s = this.layers || [ this.layer ];
            this.events.triggerEvent("boxselectionstart", {
                "layers": s
            });
            for (var a, o = 0; o < s.length; ++o) for (var l = 0, h = (a = s[o]).features.length; l < h; ++l) {
                var u = a.features[l];
                u.getVisibility() && ((null == this.geometryTypes || OpenLayers.Util.indexOf(this.geometryTypes, u.geometry.CLASS_NAME) > -1) && n.toGeometry().intersects(u.geometry) && -1 == OpenLayers.Util.indexOf(a.selectedFeatures, u) && this.select(u));
            }
            this.multiple = r, this.events.triggerEvent("boxselectionend", {
                "layers": s
            });
        }
    },
    "setMap": function(e) {
        this.handlers.feature.setMap(e), this.box && this.handlers.box.setMap(e), OpenLayers.Control.prototype.setMap.apply(this, arguments);
    },
    "setLayer": function(e) {
        var t = this.active;
        this.unselectAll(), this.deactivate(), this.layers && (this.layer.destroy(), this.layers = null), 
        this.initLayer(e), this.handlers.feature.layer = this.layer, t && this.activate();
    },
    "addLayer": function(e) {
        var t = this.active;
        this.deactivate(), null == this.layers ? null != this.layer ? (this.layers = [ this.layer ], 
        this.layers.push(e)) : this.layers = [ e ] : this.layers.push(e), this.initLayer(this.layers), 
        this.handlers.feature.layer = this.layer, t && this.activate();
    },
    "CLASS_NAME": "OpenLayers.Control.SelectFeature"
}), OpenLayers.Layer.WMS = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "DEFAULT_PARAMS": {
        "service": "WMS",
        "version": "1.1.1",
        "request": "GetMap",
        "styles": "",
        "format": "image/jpeg"
    },
    "isBaseLayer": !0,
    "encodeBBOX": !1,
    "noMagic": !1,
    "yx": {},
    "initialize": function(e, t, i, n) {
        var r = [];
        i = OpenLayers.Util.upperCaseObject(i), parseFloat(i.VERSION) >= 1.3 && !i.EXCEPTIONS && (i.EXCEPTIONS = "INIMAGE"), 
        r.push(e, t, i, n), OpenLayers.Layer.Grid.prototype.initialize.apply(this, r), OpenLayers.Util.applyDefaults(this.params, OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)), 
        !this.noMagic && this.params.TRANSPARENT && "true" == this.params.TRANSPARENT.toString().toLowerCase() && (null != n && n.isBaseLayer || (this.isBaseLayer = !1), 
        "image/jpeg" == this.params.FORMAT && (this.params.FORMAT = OpenLayers.Util.alphaHack() ? "image/gif" : "image/png"));
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.WMS(this.name, this.url, this.params, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "reverseAxisOrder": function() {
        var e = this.projection.getCode();
        return parseFloat(this.params.VERSION) >= 1.3 && !!(this.yx[e] || OpenLayers.Projection.defaults[e] && OpenLayers.Projection.defaults[e].yx);
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = this.getImageSize(e), i = {}, n = this.reverseAxisOrder();
        return i.BBOX = this.encodeBBOX ? e.toBBOX(null, n) : e.toArray(n), i.WIDTH = t.w, 
        i.HEIGHT = t.h, this.getFullRequestString(i);
    },
    "mergeNewParams": function(e) {
        var t = [ OpenLayers.Util.upperCaseObject(e) ];
        return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this, t);
    },
    "getFullRequestString": function(e, t) {
        var i = this.map.getProjectionObject(), n = this.projection && this.projection.equals(i) ? this.projection.getCode() : i.getCode(), r = "none" == n ? null : n;
        return parseFloat(this.params.VERSION) >= 1.3 ? this.params.CRS = r : this.params.SRS = r, 
        "boolean" == typeof this.params.TRANSPARENT && (e.TRANSPARENT = this.params.TRANSPARENT ? "TRUE" : "FALSE"), 
        OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Layer.WMS"
}), OpenLayers.Handler.RegularPolygon = OpenLayers.Class(OpenLayers.Handler.Drag, {
    "sides": 4,
    "radius": null,
    "snapAngle": null,
    "snapToggle": "shiftKey",
    "layerOptions": null,
    "persist": !1,
    "irregular": !1,
    "citeCompliant": !1,
    "angle": null,
    "fixedRadius": !1,
    "feature": null,
    "layer": null,
    "origin": null,
    "initialize": function(e, t, i) {
        i && i.layerOptions && i.layerOptions.styleMap || (this.style = OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default, {})), 
        OpenLayers.Handler.Drag.prototype.initialize.apply(this, [ e, t, i ]), this.options = i || {};
    },
    "setOptions": function(e) {
        OpenLayers.Util.extend(this.options, e), OpenLayers.Util.extend(this, e);
    },
    "activate": function() {
        var e = !1;
        if (OpenLayers.Handler.Drag.prototype.activate.apply(this, arguments)) {
            var t = OpenLayers.Util.extend({
                "displayInLayerSwitcher": !1,
                "calculateInRange": OpenLayers.Function.True,
                "wrapDateLine": this.citeCompliant
            }, this.layerOptions);
            this.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, t), this.map.addLayer(this.layer), 
            e = !0;
        }
        return e;
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Handler.Drag.prototype.deactivate.apply(this, arguments) && (this.dragging && this.cancel(), 
        null != this.layer.map && (this.layer.destroy(!1), this.feature && this.feature.destroy()), 
        this.layer = null, this.feature = null, e = !0), e;
    },
    "down": function(e) {
        this.fixedRadius = !!this.radius;
        var t = this.layer.getLonLatFromViewPortPx(e.xy);
        this.origin = new OpenLayers.Geometry.Point(t.lon, t.lat), this.fixedRadius && !this.irregular || (this.radius = this.map.getResolution()), 
        this.persist && this.clear(), this.feature = new OpenLayers.Feature.Vector(), this.createGeometry(), 
        this.callback("create", [ this.origin, this.feature ]), this.layer.addFeatures([ this.feature ], {
            "silent": !0
        }), this.layer.drawFeature(this.feature, this.style);
    },
    "move": function(e) {
        var t = this.layer.getLonLatFromViewPortPx(e.xy), i = new OpenLayers.Geometry.Point(t.lon, t.lat);
        if (this.irregular) {
            var n = Math.sqrt(2) * Math.abs(i.y - this.origin.y) / 2;
            this.radius = Math.max(this.map.getResolution() / 2, n);
        } else this.fixedRadius ? this.origin = i : (this.calculateAngle(i, e), this.radius = Math.max(this.map.getResolution() / 2, i.distanceTo(this.origin)));
        if (this.modifyGeometry(), this.irregular) {
            var r, s = i.x - this.origin.x, a = i.y - this.origin.y;
            r = 0 == a ? s / (this.radius * Math.sqrt(2)) : s / a, this.feature.geometry.resize(1, this.origin, r), 
            this.feature.geometry.move(s / 2, a / 2);
        }
        this.layer.drawFeature(this.feature, this.style);
    },
    "up": function(e) {
        this.finalize(), this.start == this.last && this.callback("done", [ e.xy ]);
    },
    "out": function(e) {
        this.finalize();
    },
    "createGeometry": function() {
        this.angle = Math.PI * (1 / this.sides - .5), this.snapAngle && (this.angle += this.snapAngle * (Math.PI / 180)), 
        this.feature.geometry = OpenLayers.Geometry.Polygon.createRegularPolygon(this.origin, this.radius, this.sides, this.snapAngle);
    },
    "modifyGeometry": function() {
        var e, t, i = this.feature.geometry.components[0];
        i.components.length != this.sides + 1 && (this.createGeometry(), i = this.feature.geometry.components[0]);
        for (var n = 0; n < this.sides; ++n) t = i.components[n], e = this.angle + 2 * n * Math.PI / this.sides, 
        t.x = this.origin.x + this.radius * Math.cos(e), t.y = this.origin.y + this.radius * Math.sin(e), 
        t.clearBounds();
    },
    "calculateAngle": function(e, t) {
        var i = Math.atan2(e.y - this.origin.y, e.x - this.origin.x);
        if (this.snapAngle && this.snapToggle && !t[this.snapToggle]) {
            var n = Math.PI / 180 * this.snapAngle;
            this.angle = Math.round(i / n) * n;
        } else this.angle = i;
    },
    "cancel": function() {
        this.callback("cancel", null), this.finalize();
    },
    "finalize": function() {
        this.origin = null, this.radius = this.options.radius;
    },
    "clear": function() {
        this.layer && (this.layer.renderer.clear(), this.layer.destroyFeatures());
    },
    "callback": function(e, t) {
        this.callbacks[e] && this.callbacks[e].apply(this.control, [ this.feature.geometry.clone() ]), 
        this.persist || "done" != e && "cancel" != e || this.clear();
    },
    "CLASS_NAME": "OpenLayers.Handler.RegularPolygon"
}), OpenLayers.Format.SLD = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "profile": null,
    "defaultVersion": "1.0.0",
    "stringifyOutput": !0,
    "namedLayersAsArray": !1,
    "CLASS_NAME": "OpenLayers.Format.SLD"
}), OpenLayers.Format.GML.v2 = OpenLayers.Class(OpenLayers.Format.GML.Base, {
    "schemaLocation": "http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",
    "initialize": function(e) {
        OpenLayers.Format.GML.Base.prototype.initialize.apply(this, [ e ]);
    },
    "readers": {
        "gml": OpenLayers.Util.applyDefaults({
            "outerBoundaryIs": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.outer = i.components[0];
            },
            "innerBoundaryIs": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.inner.push(i.components[0]);
            },
            "Box": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.components || (t.components = []);
                var n = i.points[0], r = i.points[1];
                t.components.push(new OpenLayers.Bounds(n.x, n.y, r.x, r.y));
            }
        }, OpenLayers.Format.GML.Base.prototype.readers.gml),
        "feature": OpenLayers.Format.GML.Base.prototype.readers.feature,
        "wfs": OpenLayers.Format.GML.Base.prototype.readers.wfs
    },
    "write": function(e) {
        var t;
        t = OpenLayers.Util.isArray(e) ? "wfs:FeatureCollection" : "gml:featureMember";
        var i = this.writeNode(t, e);
        return this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "writers": {
        "gml": OpenLayers.Util.applyDefaults({
            "Point": function(e) {
                var t = this.createElementNSPlus("gml:Point");
                return this.writeNode("coordinates", [ e ], t), t;
            },
            "coordinates": function(e) {
                for (var t, i = e.length, n = new Array(i), r = 0; r < i; ++r) t = e[r], this.xy ? n[r] = t.x + "," + t.y : n[r] = t.y + "," + t.x, 
                void 0 != t.z && (n[r] += "," + t.z);
                return this.createElementNSPlus("gml:coordinates", {
                    "attributes": {
                        "decimal": ".",
                        "cs": ",",
                        "ts": " "
                    },
                    "value": 1 == i ? n[0] : n.join(" ")
                });
            },
            "LineString": function(e) {
                var t = this.createElementNSPlus("gml:LineString");
                return this.writeNode("coordinates", e.components, t), t;
            },
            "Polygon": function(e) {
                var t = this.createElementNSPlus("gml:Polygon");
                this.writeNode("outerBoundaryIs", e.components[0], t);
                for (var i = 1; i < e.components.length; ++i) this.writeNode("innerBoundaryIs", e.components[i], t);
                return t;
            },
            "outerBoundaryIs": function(e) {
                var t = this.createElementNSPlus("gml:outerBoundaryIs");
                return this.writeNode("LinearRing", e, t), t;
            },
            "innerBoundaryIs": function(e) {
                var t = this.createElementNSPlus("gml:innerBoundaryIs");
                return this.writeNode("LinearRing", e, t), t;
            },
            "LinearRing": function(e) {
                var t = this.createElementNSPlus("gml:LinearRing");
                return this.writeNode("coordinates", e.components, t), t;
            },
            "Box": function(e) {
                var t = this.createElementNSPlus("gml:Box");
                return this.writeNode("coordinates", [ {
                    "x": e.left,
                    "y": e.bottom
                }, {
                    "x": e.right,
                    "y": e.top
                } ], t), this.srsName && t.setAttribute("srsName", this.srsName), t;
            }
        }, OpenLayers.Format.GML.Base.prototype.writers.gml),
        "feature": OpenLayers.Format.GML.Base.prototype.writers.feature,
        "wfs": OpenLayers.Format.GML.Base.prototype.writers.wfs
    },
    "CLASS_NAME": "OpenLayers.Format.GML.v2"
}), OpenLayers.Format.Filter.v1_0_0 = OpenLayers.Class(OpenLayers.Format.GML.v2, OpenLayers.Format.Filter.v1, {
    "VERSION": "1.0.0",
    "schemaLocation": "http://www.opengis.net/ogc/filter/1.0.0/filter.xsd",
    "initialize": function(e) {
        OpenLayers.Format.GML.v2.prototype.initialize.apply(this, [ e ]);
    },
    "readers": {
        "ogc": OpenLayers.Util.applyDefaults({
            "PropertyIsEqualTo": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.EQUAL_TO
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsNotEqualTo": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.NOT_EQUAL_TO
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsLike": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.LIKE
                });
                this.readChildNodes(e, i);
                var n = e.getAttribute("wildCard"), r = e.getAttribute("singleChar"), s = e.getAttribute("escape");
                i.value2regex(n, r, s), t.filters.push(i);
            }
        }, OpenLayers.Format.Filter.v1.prototype.readers.ogc),
        "gml": OpenLayers.Format.GML.v2.prototype.readers.gml,
        "feature": OpenLayers.Format.GML.v2.prototype.readers.feature
    },
    "writers": {
        "ogc": OpenLayers.Util.applyDefaults({
            "PropertyIsEqualTo": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsEqualTo");
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsNotEqualTo": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsNotEqualTo");
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsLike": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsLike", {
                    "attributes": {
                        "wildCard": "*",
                        "singleChar": ".",
                        "escape": "!"
                    }
                });
                return this.writeNode("PropertyName", e, t), this.writeNode("Literal", e.regex2value(), t), 
                t;
            },
            "BBOX": function(e) {
                var t = this.createElementNSPlus("ogc:BBOX");
                e.property && this.writeNode("PropertyName", e, t);
                var i = this.writeNode("gml:Box", e.value, t);
                return e.projection && i.setAttribute("srsName", e.projection), t;
            }
        }, OpenLayers.Format.Filter.v1.prototype.writers.ogc),
        "gml": OpenLayers.Format.GML.v2.prototype.writers.gml,
        "feature": OpenLayers.Format.GML.v2.prototype.writers.feature
    },
    "writeSpatial": function(e, t) {
        var i = this.createElementNSPlus("ogc:" + t);
        if (this.writeNode("PropertyName", e, i), e.value instanceof OpenLayers.Filter.Function) this.writeNode("Function", e.value, i); else {
            var n;
            n = e.value instanceof OpenLayers.Geometry ? this.writeNode("feature:_geometry", e.value).firstChild : this.writeNode("gml:Box", e.value), 
            e.projection && n.setAttribute("srsName", e.projection), i.appendChild(n);
        }
        return i;
    },
    "CLASS_NAME": "OpenLayers.Format.Filter.v1_0_0"
}), OpenLayers.Format.SLD.v1 = OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0, {
    "namespaces": {
        "sld": "http://www.opengis.net/sld",
        "ogc": "http://www.opengis.net/ogc",
        "gml": "http://www.opengis.net/gml",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "xmlns": "http://www.w3.org/2000/xmlns/"
    },
    "defaultPrefix": "sld",
    "schemaLocation": null,
    "multipleSymbolizers": !1,
    "featureTypeCounter": null,
    "defaultSymbolizer": {
        "fillColor": "#808080",
        "fillOpacity": 1,
        "strokeColor": "#000000",
        "strokeOpacity": 1,
        "strokeWidth": 1,
        "strokeDashstyle": "solid",
        "pointRadius": 3,
        "graphicName": "square"
    },
    "read": function(e, t) {
        var i = {
            "namedLayers": !0 === (t = OpenLayers.Util.applyDefaults(t, this.options)).namedLayersAsArray ? [] : {}
        };
        return this.readChildNodes(e, i), i;
    },
    "readers": OpenLayers.Util.applyDefaults({
        "sld": {
            "StyledLayerDescriptor": function(e, t) {
                t.version = e.getAttribute("version"), this.readChildNodes(e, t);
            },
            "Name": function(e, t) {
                t.name = this.getChildValue(e);
            },
            "Title": function(e, t) {
                t.title = this.getChildValue(e);
            },
            "Abstract": function(e, t) {
                t.description = this.getChildValue(e);
            },
            "NamedLayer": function(e, t) {
                var i = {
                    "userStyles": [],
                    "namedStyles": []
                };
                this.readChildNodes(e, i);
                for (var n = 0, r = i.userStyles.length; n < r; ++n) i.userStyles[n].layerName = i.name;
                OpenLayers.Util.isArray(t.namedLayers) ? t.namedLayers.push(i) : t.namedLayers[i.name] = i;
            },
            "NamedStyle": function(e, t) {
                t.namedStyles.push(this.getChildValue(e.firstChild));
            },
            "UserStyle": function(e, t) {
                var i = {
                    "defaultsPerSymbolizer": !0,
                    "rules": []
                };
                this.featureTypeCounter = -1, this.readChildNodes(e, i);
                var n;
                this.multipleSymbolizers ? (delete i.defaultsPerSymbolizer, n = new OpenLayers.Style2(i)) : n = new OpenLayers.Style(this.defaultSymbolizer, i), 
                t.userStyles.push(n);
            },
            "IsDefault": function(e, t) {
                "1" == this.getChildValue(e) && (t.isDefault = !0);
            },
            "FeatureTypeStyle": function(e, t) {
                ++this.featureTypeCounter;
                var i = {
                    "rules": this.multipleSymbolizers ? t.rules : []
                };
                this.readChildNodes(e, i), this.multipleSymbolizers || (t.rules = i.rules);
            },
            "Rule": function(e, t) {
                var i;
                this.multipleSymbolizers && (i = {
                    "symbolizers": []
                });
                var n = new OpenLayers.Rule(i);
                this.readChildNodes(e, n), t.rules.push(n);
            },
            "ElseFilter": function(e, t) {
                t.elseFilter = !0;
            },
            "MinScaleDenominator": function(e, t) {
                t.minScaleDenominator = parseFloat(this.getChildValue(e));
            },
            "MaxScaleDenominator": function(e, t) {
                t.maxScaleDenominator = parseFloat(this.getChildValue(e));
            },
            "TextSymbolizer": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), this.multipleSymbolizers ? (i.zIndex = this.featureTypeCounter, 
                t.symbolizers.push(new OpenLayers.Symbolizer.Text(i))) : t.symbolizer.Text = OpenLayers.Util.applyDefaults(i, t.symbolizer.Text);
            },
            "LabelPlacement": function(e, t) {
                this.readChildNodes(e, t);
            },
            "PointPlacement": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), i.labelRotation = i.rotation, delete i.rotation;
                var n, r = t.labelAnchorPointX, s = t.labelAnchorPointY;
                r <= 1 / 3 ? n = "l" : r > 1 / 3 && r < 2 / 3 ? n = "c" : r >= 2 / 3 && (n = "r"), 
                s <= 1 / 3 ? n += "b" : s > 1 / 3 && s < 2 / 3 ? n += "m" : s >= 2 / 3 && (n += "t"), 
                i.labelAlign = n, OpenLayers.Util.applyDefaults(t, i);
            },
            "AnchorPoint": function(e, t) {
                this.readChildNodes(e, t);
            },
            "AnchorPointX": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.labelAnchorPointX = i);
            },
            "AnchorPointY": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.labelAnchorPointY = i);
            },
            "Displacement": function(e, t) {
                this.readChildNodes(e, t);
            },
            "DisplacementX": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.labelXOffset = i);
            },
            "DisplacementY": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.labelYOffset = i);
            },
            "LinePlacement": function(e, t) {
                this.readChildNodes(e, t);
            },
            "PerpendicularOffset": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.labelPerpendicularOffset = i);
            },
            "Label": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.label = OpenLayers.String.trim(i));
            },
            "Font": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Halo": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.haloRadius = i.haloRadius, t.haloColor = i.fillColor, 
                t.haloOpacity = i.fillOpacity;
            },
            "Radius": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                null != i && (t.haloRadius = i);
            },
            "RasterSymbolizer": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), this.multipleSymbolizers ? (i.zIndex = this.featureTypeCounter, 
                t.symbolizers.push(new OpenLayers.Symbolizer.Raster(i))) : t.symbolizer.Raster = OpenLayers.Util.applyDefaults(i, t.symbolizer.Raster);
            },
            "Geometry": function(e, t) {
                t.geometry = {}, this.readChildNodes(e, t.geometry);
            },
            "ColorMap": function(e, t) {
                t.colorMap = [], this.readChildNodes(e, t.colorMap);
            },
            "ColorMapEntry": function(e, t) {
                var i = e.getAttribute("quantity"), n = e.getAttribute("opacity");
                t.push({
                    "color": e.getAttribute("color"),
                    "quantity": null !== i ? parseFloat(i) : void 0,
                    "label": e.getAttribute("label") || void 0,
                    "opacity": null !== n ? parseFloat(n) : void 0
                });
            },
            "LineSymbolizer": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), this.multipleSymbolizers ? (i.zIndex = this.featureTypeCounter, 
                t.symbolizers.push(new OpenLayers.Symbolizer.Line(i))) : t.symbolizer.Line = OpenLayers.Util.applyDefaults(i, t.symbolizer.Line);
            },
            "PolygonSymbolizer": function(e, t) {
                var i = {
                    "fill": !1,
                    "stroke": !1
                };
                this.multipleSymbolizers || (i = t.symbolizer.Polygon || i), this.readChildNodes(e, i), 
                this.multipleSymbolizers ? (i.zIndex = this.featureTypeCounter, t.symbolizers.push(new OpenLayers.Symbolizer.Polygon(i))) : t.symbolizer.Polygon = i;
            },
            "PointSymbolizer": function(e, t) {
                var i = {
                    "fill": !1,
                    "stroke": !1,
                    "graphic": !1
                };
                this.multipleSymbolizers || (i = t.symbolizer.Point || i), this.readChildNodes(e, i), 
                this.multipleSymbolizers ? (i.zIndex = this.featureTypeCounter, t.symbolizers.push(new OpenLayers.Symbolizer.Point(i))) : t.symbolizer.Point = i;
            },
            "Stroke": function(e, t) {
                t.stroke = !0, this.readChildNodes(e, t);
            },
            "Fill": function(e, t) {
                t.fill = !0, this.readChildNodes(e, t);
            },
            "CssParameter": function(e, t) {
                var i = e.getAttribute("name"), n = this.cssMap[i];
                if (t.label && ("fill" === i ? n = "fontColor" : "fill-opacity" === i && (n = "fontOpacity")), 
                n) {
                    var r = this.readers.ogc._expression.call(this, e);
                    r && (t[n] = r);
                }
            },
            "Graphic": function(e, t) {
                t.graphic = !0;
                var i = {};
                this.readChildNodes(e, i);
                for (var n, r, s = [ "stroke", "strokeColor", "strokeWidth", "strokeOpacity", "strokeLinecap", "fill", "fillColor", "fillOpacity", "graphicName", "rotation", "graphicFormat" ], a = 0, o = s.length; a < o; ++a) void 0 != (r = i[n = s[a]]) && (t[n] = r);
                if (void 0 != i.opacity && (t.graphicOpacity = i.opacity), void 0 != i.size) {
                    var l = i.size / 2;
                    isNaN(l) ? t.graphicWidth = i.size : t.pointRadius = i.size / 2;
                }
                void 0 != i.href && (t.externalGraphic = i.href), void 0 != i.rotation && (t.rotation = i.rotation);
            },
            "ExternalGraphic": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Mark": function(e, t) {
                this.readChildNodes(e, t);
            },
            "WellKnownName": function(e, t) {
                t.graphicName = this.getChildValue(e);
            },
            "Opacity": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.opacity = i);
            },
            "Size": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.size = i);
            },
            "Rotation": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.rotation = i);
            },
            "OnlineResource": function(e, t) {
                t.href = this.getAttributeNS(e, this.namespaces.xlink, "href");
            },
            "Format": function(e, t) {
                t.graphicFormat = this.getChildValue(e);
            }
        }
    }, OpenLayers.Format.Filter.v1_0_0.prototype.readers),
    "cssMap": {
        "stroke": "strokeColor",
        "stroke-opacity": "strokeOpacity",
        "stroke-width": "strokeWidth",
        "stroke-linecap": "strokeLinecap",
        "stroke-dasharray": "strokeDashstyle",
        "fill": "fillColor",
        "fill-opacity": "fillOpacity",
        "font-family": "fontFamily",
        "font-size": "fontSize",
        "font-weight": "fontWeight",
        "font-style": "fontStyle"
    },
    "getCssProperty": function(e) {
        var t = null;
        for (var i in this.cssMap) if (this.cssMap[i] == e) {
            t = i;
            break;
        }
        return t;
    },
    "getGraphicFormat": function(e) {
        var t;
        for (var i in this.graphicFormats) if (this.graphicFormats[i].test(e)) {
            t = i;
            break;
        }
        return t || this.defaultGraphicFormat;
    },
    "defaultGraphicFormat": "image/png",
    "graphicFormats": {
        "image/jpeg": /\.jpe?g$/i,
        "image/gif": /\.gif$/i,
        "image/png": /\.png$/i
    },
    "write": function(e) {
        return this.writers.sld.StyledLayerDescriptor.apply(this, [ e ]);
    },
    "writers": OpenLayers.Util.applyDefaults({
        "sld": {
            "_OGCExpression": function(e, t) {
                var i = this.createElementNSPlus(e), n = "string" == typeof t ? t.split("${") : [ t ];
                i.appendChild(this.createTextNode(n[0]));
                for (var r, s, a = 1, o = n.length; a < o; a++) (s = (r = n[a]).indexOf("}")) > 0 ? (this.writeNode("ogc:PropertyName", {
                    "property": r.substring(0, s)
                }, i), i.appendChild(this.createTextNode(r.substring(++s)))) : i.appendChild(this.createTextNode("${" + r));
                return i;
            },
            "StyledLayerDescriptor": function(e) {
                var t = this.createElementNSPlus("sld:StyledLayerDescriptor", {
                    "attributes": {
                        "version": this.VERSION,
                        "xsi:schemaLocation": this.schemaLocation
                    }
                });
                if (this.setAttributeNS(t, this.namespaces.xmlns, "xmlns:ogc", this.namespaces.ogc), 
                this.setAttributeNS(t, this.namespaces.xmlns, "xmlns:gml", this.namespaces.gml), 
                e.name && this.writeNode("Name", e.name, t), e.title && this.writeNode("Title", e.title, t), 
                e.description && this.writeNode("Abstract", e.description, t), OpenLayers.Util.isArray(e.namedLayers)) for (var i = 0, n = e.namedLayers.length; i < n; ++i) this.writeNode("NamedLayer", e.namedLayers[i], t); else for (var r in e.namedLayers) this.writeNode("NamedLayer", e.namedLayers[r], t);
                return t;
            },
            "Name": function(e) {
                return this.createElementNSPlus("sld:Name", {
                    "value": e
                });
            },
            "Title": function(e) {
                return this.createElementNSPlus("sld:Title", {
                    "value": e
                });
            },
            "Abstract": function(e) {
                return this.createElementNSPlus("sld:Abstract", {
                    "value": e
                });
            },
            "NamedLayer": function(e) {
                var t = this.createElementNSPlus("sld:NamedLayer");
                if (this.writeNode("Name", e.name, t), e.namedStyles) for (var i = 0, n = e.namedStyles.length; i < n; ++i) this.writeNode("NamedStyle", e.namedStyles[i], t);
                if (e.userStyles) for (var i = 0, n = e.userStyles.length; i < n; ++i) this.writeNode("UserStyle", e.userStyles[i], t);
                return t;
            },
            "NamedStyle": function(e) {
                var t = this.createElementNSPlus("sld:NamedStyle");
                return this.writeNode("Name", e, t), t;
            },
            "UserStyle": function(e) {
                var t = this.createElementNSPlus("sld:UserStyle");
                if (e.name && this.writeNode("Name", e.name, t), e.title && this.writeNode("Title", e.title, t), 
                e.description && this.writeNode("Abstract", e.description, t), e.isDefault && this.writeNode("IsDefault", e.isDefault, t), 
                this.multipleSymbolizers && e.rules) {
                    for (var i, n, r, s, a, o = {
                        "0": []
                    }, l = [ 0 ], h = 0, u = e.rules.length; h < u; ++h) if ((i = e.rules[h]).symbolizers) {
                        n = {};
                        for (var p = 0, c = i.symbolizers.length; p < c; ++p) (s = (r = i.symbolizers[p]).zIndex) in n || ((a = i.clone()).symbolizers = [], 
                        n[s] = a), n[s].symbolizers.push(r.clone());
                        for (s in n) s in o || (l.push(s), o[s] = []), o[s].push(n[s]);
                    } else o[0].push(i.clone());
                    l.sort();
                    for (var h = 0, u = l.length; h < u; ++h) o[l[h]].length > 0 && ((a = e.clone()).rules = o[l[h]], 
                    this.writeNode("FeatureTypeStyle", a, t));
                } else this.writeNode("FeatureTypeStyle", e, t);
                return t;
            },
            "IsDefault": function(e) {
                return this.createElementNSPlus("sld:IsDefault", {
                    "value": e ? "1" : "0"
                });
            },
            "FeatureTypeStyle": function(e) {
                for (var t = this.createElementNSPlus("sld:FeatureTypeStyle"), i = 0, n = e.rules.length; i < n; ++i) this.writeNode("Rule", e.rules[i], t);
                return t;
            },
            "Rule": function(e) {
                var t = this.createElementNSPlus("sld:Rule");
                e.name && this.writeNode("Name", e.name, t), e.title && this.writeNode("Title", e.title, t), 
                e.description && this.writeNode("Abstract", e.description, t), e.elseFilter ? this.writeNode("ElseFilter", null, t) : e.filter && this.writeNode("ogc:Filter", e.filter, t), 
                void 0 != e.minScaleDenominator && this.writeNode("MinScaleDenominator", e.minScaleDenominator, t), 
                void 0 != e.maxScaleDenominator && this.writeNode("MaxScaleDenominator", e.maxScaleDenominator, t);
                var i;
                if (this.multipleSymbolizers && e.symbolizers) for (var n, r = 0, s = e.symbolizers.length; r < s; ++r) i = (n = e.symbolizers[r]).CLASS_NAME.split(".").pop(), 
                this.writeNode(i + "Symbolizer", n, t); else for (var a = OpenLayers.Style.SYMBOLIZER_PREFIXES, r = 0, o = a.length; r < o; ++r) i = a[r], 
                (n = e.symbolizer[i]) && this.writeNode(i + "Symbolizer", n, t);
                return t;
            },
            "ElseFilter": function() {
                return this.createElementNSPlus("sld:ElseFilter");
            },
            "MinScaleDenominator": function(e) {
                return this.createElementNSPlus("sld:MinScaleDenominator", {
                    "value": e
                });
            },
            "MaxScaleDenominator": function(e) {
                return this.createElementNSPlus("sld:MaxScaleDenominator", {
                    "value": e
                });
            },
            "LineSymbolizer": function(e) {
                var t = this.createElementNSPlus("sld:LineSymbolizer");
                return e.geometry && this.writeNode("Geometry", e.geometry, t), this.writeNode("Stroke", e, t), 
                t;
            },
            "Stroke": function(e) {
                var t = this.createElementNSPlus("sld:Stroke");
                return void 0 != e.strokeColor && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "strokeColor"
                }, t), void 0 != e.strokeOpacity && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "strokeOpacity"
                }, t), void 0 != e.strokeWidth && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "strokeWidth"
                }, t), void 0 != e.strokeDashstyle && "solid" !== e.strokeDashstyle && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "strokeDashstyle"
                }, t), void 0 != e.strokeLinecap && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "strokeLinecap"
                }, t), t;
            },
            "CssParameter": function(e) {
                return this.createElementNSPlus("sld:CssParameter", {
                    "attributes": {
                        "name": this.getCssProperty(e.key)
                    },
                    "value": e.symbolizer[e.key]
                });
            },
            "TextSymbolizer": function(e) {
                var t = this.createElementNSPlus("sld:TextSymbolizer");
                return e.geometry && this.writeNode("Geometry", e.geometry, t), null != e.label && this.writeNode("Label", e.label, t), 
                null == e.fontFamily && null == e.fontSize && null == e.fontWeight && null == e.fontStyle || this.writeNode("Font", e, t), 
                null == e.labelAnchorPointX && null == e.labelAnchorPointY && null == e.labelAlign && null == e.labelXOffset && null == e.labelYOffset && null == e.labelRotation && null == e.labelPerpendicularOffset || this.writeNode("LabelPlacement", e, t), 
                null == e.haloRadius && null == e.haloColor && null == e.haloOpacity || this.writeNode("Halo", e, t), 
                null == e.fontColor && null == e.fontOpacity || this.writeNode("Fill", {
                    "fillColor": e.fontColor,
                    "fillOpacity": e.fontOpacity
                }, t), t;
            },
            "LabelPlacement": function(e) {
                var t = this.createElementNSPlus("sld:LabelPlacement");
                return null == e.labelAnchorPointX && null == e.labelAnchorPointY && null == e.labelAlign && null == e.labelXOffset && null == e.labelYOffset && null == e.labelRotation || null != e.labelPerpendicularOffset || this.writeNode("PointPlacement", e, t), 
                null != e.labelPerpendicularOffset && this.writeNode("LinePlacement", e, t), t;
            },
            "LinePlacement": function(e) {
                var t = this.createElementNSPlus("sld:LinePlacement");
                return this.writeNode("PerpendicularOffset", e.labelPerpendicularOffset, t), t;
            },
            "PerpendicularOffset": function(e) {
                return this.createElementNSPlus("sld:PerpendicularOffset", {
                    "value": e
                });
            },
            "PointPlacement": function(e) {
                var t = this.createElementNSPlus("sld:PointPlacement");
                return null == e.labelAnchorPointX && null == e.labelAnchorPointY && null == e.labelAlign || this.writeNode("AnchorPoint", e, t), 
                null == e.labelXOffset && null == e.labelYOffset || this.writeNode("Displacement", e, t), 
                null != e.labelRotation && this.writeNode("Rotation", e.labelRotation, t), t;
            },
            "AnchorPoint": function(e) {
                var t = this.createElementNSPlus("sld:AnchorPoint"), i = e.labelAnchorPointX, n = e.labelAnchorPointY;
                if (null != i && this.writeNode("AnchorPointX", i, t), null != n && this.writeNode("AnchorPointY", n, t), 
                null == i && null == n) {
                    var r = e.labelAlign.substr(0, 1), s = e.labelAlign.substr(1, 1);
                    "l" === r ? i = 0 : "c" === r ? i = .5 : "r" === r && (i = 1), "b" === s ? n = 0 : "m" === s ? n = .5 : "t" === s && (n = 1), 
                    this.writeNode("AnchorPointX", i, t), this.writeNode("AnchorPointY", n, t);
                }
                return t;
            },
            "AnchorPointX": function(e) {
                return this.createElementNSPlus("sld:AnchorPointX", {
                    "value": e
                });
            },
            "AnchorPointY": function(e) {
                return this.createElementNSPlus("sld:AnchorPointY", {
                    "value": e
                });
            },
            "Displacement": function(e) {
                var t = this.createElementNSPlus("sld:Displacement");
                return null != e.labelXOffset && this.writeNode("DisplacementX", e.labelXOffset, t), 
                null != e.labelYOffset && this.writeNode("DisplacementY", e.labelYOffset, t), t;
            },
            "DisplacementX": function(e) {
                return this.createElementNSPlus("sld:DisplacementX", {
                    "value": e
                });
            },
            "DisplacementY": function(e) {
                return this.createElementNSPlus("sld:DisplacementY", {
                    "value": e
                });
            },
            "Font": function(e) {
                var t = this.createElementNSPlus("sld:Font");
                return e.fontFamily && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "fontFamily"
                }, t), e.fontSize && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "fontSize"
                }, t), e.fontWeight && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "fontWeight"
                }, t), e.fontStyle && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "fontStyle"
                }, t), t;
            },
            "Label": function(e) {
                return this.writers.sld._OGCExpression.call(this, "sld:Label", e);
            },
            "Halo": function(e) {
                var t = this.createElementNSPlus("sld:Halo");
                return e.haloRadius && this.writeNode("Radius", e.haloRadius, t), (e.haloColor || e.haloOpacity) && this.writeNode("Fill", {
                    "fillColor": e.haloColor,
                    "fillOpacity": e.haloOpacity
                }, t), t;
            },
            "Radius": function(e) {
                return this.createElementNSPlus("sld:Radius", {
                    "value": e
                });
            },
            "RasterSymbolizer": function(e) {
                var t = this.createElementNSPlus("sld:RasterSymbolizer");
                return e.geometry && this.writeNode("Geometry", e.geometry, t), e.opacity && this.writeNode("Opacity", e.opacity, t), 
                e.colorMap && this.writeNode("ColorMap", e.colorMap, t), t;
            },
            "Geometry": function(e) {
                var t = this.createElementNSPlus("sld:Geometry");
                return e.property && this.writeNode("ogc:PropertyName", e, t), t;
            },
            "ColorMap": function(e) {
                for (var t = this.createElementNSPlus("sld:ColorMap"), i = 0, n = e.length; i < n; ++i) this.writeNode("ColorMapEntry", e[i], t);
                return t;
            },
            "ColorMapEntry": function(e) {
                var t = this.createElementNSPlus("sld:ColorMapEntry"), i = e;
                return t.setAttribute("color", i.color), void 0 !== i.opacity && t.setAttribute("opacity", parseFloat(i.opacity)), 
                void 0 !== i.quantity && t.setAttribute("quantity", parseFloat(i.quantity)), void 0 !== i.label && t.setAttribute("label", i.label), 
                t;
            },
            "PolygonSymbolizer": function(e) {
                var t = this.createElementNSPlus("sld:PolygonSymbolizer");
                return e.geometry && this.writeNode("Geometry", e.geometry, t), !1 !== e.fill && this.writeNode("Fill", e, t), 
                !1 !== e.stroke && this.writeNode("Stroke", e, t), t;
            },
            "Fill": function(e) {
                var t = this.createElementNSPlus("sld:Fill");
                return e.fillColor && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "fillColor"
                }, t), null != e.fillOpacity && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "fillOpacity"
                }, t), t;
            },
            "PointSymbolizer": function(e) {
                var t = this.createElementNSPlus("sld:PointSymbolizer");
                return e.geometry && this.writeNode("Geometry", e.geometry, t), this.writeNode("Graphic", e, t), 
                t;
            },
            "Graphic": function(e) {
                var t = this.createElementNSPlus("sld:Graphic");
                return void 0 != e.externalGraphic ? this.writeNode("ExternalGraphic", e, t) : this.writeNode("Mark", e, t), 
                void 0 != e.graphicOpacity && this.writeNode("Opacity", e.graphicOpacity, t), void 0 != e.pointRadius ? this.writeNode("Size", 2 * e.pointRadius, t) : void 0 != e.graphicWidth && this.writeNode("Size", e.graphicWidth, t), 
                void 0 != e.rotation && this.writeNode("Rotation", e.rotation, t), t;
            },
            "ExternalGraphic": function(e) {
                var t = this.createElementNSPlus("sld:ExternalGraphic");
                this.writeNode("OnlineResource", e.externalGraphic, t);
                var i = e.graphicFormat || this.getGraphicFormat(e.externalGraphic);
                return this.writeNode("Format", i, t), t;
            },
            "Mark": function(e) {
                var t = this.createElementNSPlus("sld:Mark");
                return e.graphicName && this.writeNode("WellKnownName", e.graphicName, t), !1 !== e.fill && this.writeNode("Fill", e, t), 
                !1 !== e.stroke && this.writeNode("Stroke", e, t), t;
            },
            "WellKnownName": function(e) {
                return this.createElementNSPlus("sld:WellKnownName", {
                    "value": e
                });
            },
            "Opacity": function(e) {
                return this.createElementNSPlus("sld:Opacity", {
                    "value": e
                });
            },
            "Size": function(e) {
                return this.writers.sld._OGCExpression.call(this, "sld:Size", e);
            },
            "Rotation": function(e) {
                return this.createElementNSPlus("sld:Rotation", {
                    "value": e
                });
            },
            "OnlineResource": function(e) {
                return this.createElementNSPlus("sld:OnlineResource", {
                    "attributes": {
                        "xlink:type": "simple",
                        "xlink:href": e
                    }
                });
            },
            "Format": function(e) {
                return this.createElementNSPlus("sld:Format", {
                    "value": e
                });
            }
        }
    }, OpenLayers.Format.Filter.v1_0_0.prototype.writers),
    "CLASS_NAME": "OpenLayers.Format.SLD.v1"
}), OpenLayers.Format.SLD.v1_0_0 = OpenLayers.Class(OpenLayers.Format.SLD.v1, {
    "VERSION": "1.0.0",
    "schemaLocation": "http://www.opengis.net/sld http://schemas.opengis.net/sld/1.0.0/StyledLayerDescriptor.xsd",
    "CLASS_NAME": "OpenLayers.Format.SLD.v1_0_0"
}), OpenLayers.Control.SLDSelect = OpenLayers.Class(OpenLayers.Control, {
    "clearOnDeactivate": !1,
    "layers": null,
    "callbacks": null,
    "selectionSymbolizer": {
        "Polygon": {
            "fillColor": "#FF0000",
            "stroke": !1
        },
        "Line": {
            "strokeColor": "#FF0000",
            "strokeWidth": 2
        },
        "Point": {
            "graphicName": "square",
            "fillColor": "#FF0000",
            "pointRadius": 5
        }
    },
    "layerOptions": null,
    "sketchStyle": null,
    "wfsCache": {},
    "layerCache": {},
    "initialize": function(e, t) {
        OpenLayers.Control.prototype.initialize.apply(this, [ t ]), this.callbacks = OpenLayers.Util.extend({
            "done": this.select,
            "click": this.select
        }, this.callbacks), this.handlerOptions = this.handlerOptions || {}, this.layerOptions = OpenLayers.Util.applyDefaults(this.layerOptions, {
            "displayInLayerSwitcher": !1,
            "tileOptions": {
                "maxGetUrlLength": 2048
            }
        }), this.sketchStyle && (this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions, {
            "styleMap": new OpenLayers.StyleMap({
                "default": this.sketchStyle
            })
        })), this.handler = new e(this, this.callbacks, this.handlerOptions);
    },
    "destroy": function() {
        for (var e in this.layerCache) delete this.layerCache[e];
        for (var e in this.wfsCache) delete this.wfsCache[e];
        OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "coupleLayerVisiblity": function(e) {
        this.setVisibility(e.object.getVisibility());
    },
    "createSelectionLayer": function(e) {
        var t;
        return this.layerCache[e.id] ? t = this.layerCache[e.id] : (t = new OpenLayers.Layer.WMS(e.name, e.url, e.params, OpenLayers.Util.applyDefaults(this.layerOptions, e.getOptions())), 
        this.layerCache[e.id] = t, !1 === this.layerOptions.displayInLayerSwitcher && e.events.on({
            "visibilitychanged": this.coupleLayerVisiblity,
            "scope": t
        }), this.map.addLayer(t)), t;
    },
    "createSLD": function(e, t, i) {
        for (var n = {
            "version": "1.0.0",
            "namedLayers": {}
        }, r = [ e.params.LAYERS ].join(",").split(","), s = 0, a = r.length; s < a; s++) {
            var o = r[s];
            n.namedLayers[o] = {
                "name": o,
                "userStyles": []
            };
            var l = this.selectionSymbolizer, h = i[s];
            h.type.indexOf("Polygon") >= 0 ? l = {
                "Polygon": this.selectionSymbolizer.Polygon
            } : h.type.indexOf("LineString") >= 0 ? l = {
                "Line": this.selectionSymbolizer.Line
            } : h.type.indexOf("Point") >= 0 && (l = {
                "Point": this.selectionSymbolizer.Point
            });
            var u = t[s];
            n.namedLayers[o].userStyles.push({
                "name": "default",
                "rules": [ new OpenLayers.Rule({
                    "symbolizer": l,
                    "filter": u,
                    "maxScaleDenominator": e.options.minScale
                }) ]
            });
        }
        return new OpenLayers.Format.SLD({
            "srsName": this.map.getProjection()
        }).write(n);
    },
    "parseDescribeLayer": function(e) {
        var t = new OpenLayers.Format.WMSDescribeLayer(), i = e.responseXML;
        i && i.documentElement || (i = e.responseText);
        for (var n = t.read(i), r = [], s = null, a = 0, o = n.length; a < o; a++) "WFS" == n[a].owsType && (r.push(n[a].typeName), 
        s = n[a].owsURL);
        var l = {
            "url": s,
            "params": {
                "SERVICE": "WFS",
                "TYPENAME": r.toString(),
                "REQUEST": "DescribeFeatureType",
                "VERSION": "1.0.0"
            },
            "callback": function(e) {
                var t = new OpenLayers.Format.WFSDescribeFeatureType(), i = e.responseXML;
                i && i.documentElement || (i = e.responseText);
                var n = t.read(i);
                this.control.wfsCache[this.layer.id] = n, this.control._queue && this.control.applySelection();
            },
            "scope": this
        };
        OpenLayers.Request.GET(l);
    },
    "getGeometryAttributes": function(e) {
        for (var t = [], i = this.wfsCache[e.id], n = 0, r = i.featureTypes.length; n < r; n++) for (var s = i.featureTypes[n].properties, a = 0, o = s.length; a < o; a++) {
            var l = s[a], h = l.type;
            (h.indexOf("LineString") >= 0 || h.indexOf("GeometryAssociationType") >= 0 || h.indexOf("GeometryPropertyType") >= 0 || h.indexOf("Point") >= 0 || h.indexOf("Polygon") >= 0) && t.push(l);
        }
        return t;
    },
    "activate": function() {
        var e = OpenLayers.Control.prototype.activate.call(this);
        if (e) for (var t = 0, i = this.layers.length; t < i; t++) {
            var n = this.layers[t];
            if (n && !this.wfsCache[n.id]) {
                var r = {
                    "url": n.url,
                    "params": {
                        "SERVICE": "WMS",
                        "VERSION": n.params.VERSION,
                        "LAYERS": n.params.LAYERS,
                        "REQUEST": "DescribeLayer"
                    },
                    "callback": this.parseDescribeLayer,
                    "scope": {
                        "layer": n,
                        "control": this
                    }
                };
                OpenLayers.Request.GET(r);
            }
        }
        return e;
    },
    "deactivate": function() {
        var e = OpenLayers.Control.prototype.deactivate.call(this);
        if (e) for (var t = 0, i = this.layers.length; t < i; t++) {
            var n = this.layers[t];
            if (n && !0 === this.clearOnDeactivate) {
                var r = this.layerCache, s = r[n.id];
                s && (n.events.un({
                    "visibilitychanged": this.coupleLayerVisiblity,
                    "scope": s
                }), s.destroy(), delete r[n.id]);
            }
        }
        return e;
    },
    "setLayers": function(e) {
        this.active ? (this.deactivate(), this.layers = e, this.activate()) : this.layers = e;
    },
    "createFilter": function(e, t) {
        var i = null;
        return this.handler instanceof OpenLayers.Handler.RegularPolygon ? i = !0 === this.handler.irregular ? new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.BBOX,
            "property": e.name,
            "value": t.getBounds()
        }) : new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.INTERSECTS,
            "property": e.name,
            "value": t
        }) : this.handler instanceof OpenLayers.Handler.Polygon ? i = new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.INTERSECTS,
            "property": e.name,
            "value": t
        }) : this.handler instanceof OpenLayers.Handler.Path ? i = e.type.indexOf("Point") >= 0 ? new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.DWITHIN,
            "property": e.name,
            "distance": .01 * this.map.getExtent().getWidth(),
            "distanceUnits": this.map.getUnits(),
            "value": t
        }) : new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.INTERSECTS,
            "property": e.name,
            "value": t
        }) : this.handler instanceof OpenLayers.Handler.Click && (i = e.type.indexOf("Polygon") >= 0 ? new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.INTERSECTS,
            "property": e.name,
            "value": t
        }) : new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.DWITHIN,
            "property": e.name,
            "distance": .01 * this.map.getExtent().getWidth(),
            "distanceUnits": this.map.getUnits(),
            "value": t
        })), i;
    },
    "select": function(e) {
        this._queue = function() {
            for (var t = 0, i = this.layers.length; t < i; t++) {
                for (var n = this.layers[t], r = this.getGeometryAttributes(n), s = [], a = 0, o = r.length; a < o; a++) {
                    var l = r[a];
                    if (null !== l) {
                        if (!(e instanceof OpenLayers.Geometry)) {
                            var h = this.map.getLonLatFromPixel(e.xy);
                            e = new OpenLayers.Geometry.Point(h.lon, h.lat);
                        }
                        var u = this.createFilter(l, e);
                        null !== u && s.push(u);
                    }
                }
                var p = this.createSelectionLayer(n);
                this.events.triggerEvent("selected", {
                    "layer": n,
                    "filters": s
                });
                var c = this.createSLD(n, s, r);
                p.mergeNewParams({
                    "SLD_BODY": c
                }), delete this._queue;
            }
        }, this.applySelection();
    },
    "applySelection": function() {
        for (var e = !0, t = 0, i = this.layers.length; t < i; t++) if (!this.wfsCache[this.layers[t].id]) {
            e = !1;
            break;
        }
        e && this._queue.call(this);
    },
    "CLASS_NAME": "OpenLayers.Control.SLDSelect"
}), OpenLayers.Control.Snapping = OpenLayers.Class(OpenLayers.Control, {
    "DEFAULTS": {
        "tolerance": 10,
        "node": !0,
        "edge": !0,
        "vertex": !0
    },
    "greedy": !0,
    "precedence": [ "node", "vertex", "edge" ],
    "resolution": null,
    "geoToleranceCache": null,
    "layer": null,
    "feature": null,
    "point": null,
    "initialize": function(e) {
        OpenLayers.Control.prototype.initialize.apply(this, [ e ]), this.options = e || {}, 
        this.options.layer && this.setLayer(this.options.layer);
        var t = OpenLayers.Util.extend({}, this.options.defaults);
        this.defaults = OpenLayers.Util.applyDefaults(t, this.DEFAULTS), this.setTargets(this.options.targets), 
        0 === this.targets.length && this.layer && this.addTargetLayer(this.layer), this.geoToleranceCache = {};
    },
    "setLayer": function(e) {
        this.active ? (this.deactivate(), this.layer = e, this.activate()) : this.layer = e;
    },
    "setTargets": function(e) {
        if (this.targets = [], e && e.length) for (var t, i = 0, n = e.length; i < n; ++i) (t = e[i]) instanceof OpenLayers.Layer.Vector ? this.addTargetLayer(t) : this.addTarget(t);
    },
    "addTargetLayer": function(e) {
        this.addTarget({
            "layer": e
        });
    },
    "addTarget": function(e) {
        (e = OpenLayers.Util.applyDefaults(e, this.defaults)).nodeTolerance = e.nodeTolerance || e.tolerance, 
        e.vertexTolerance = e.vertexTolerance || e.tolerance, e.edgeTolerance = e.edgeTolerance || e.tolerance, 
        this.targets.push(e);
    },
    "removeTargetLayer": function(e) {
        for (var t, i = this.targets.length - 1; i >= 0; --i) (t = this.targets[i]).layer === e && this.removeTarget(t);
    },
    "removeTarget": function(e) {
        return OpenLayers.Util.removeItem(this.targets, e);
    },
    "activate": function() {
        var e = OpenLayers.Control.prototype.activate.call(this);
        return e && this.layer && this.layer.events && this.layer.events.on({
            "sketchstarted": this.onSketchModified,
            "sketchmodified": this.onSketchModified,
            "vertexmodified": this.onVertexModified,
            "scope": this
        }), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Control.prototype.deactivate.call(this);
        return e && this.layer && this.layer.events && this.layer.events.un({
            "sketchstarted": this.onSketchModified,
            "sketchmodified": this.onSketchModified,
            "vertexmodified": this.onVertexModified,
            "scope": this
        }), this.feature = null, this.point = null, e;
    },
    "onSketchModified": function(e) {
        this.feature = e.feature, this.considerSnapping(e.vertex, e.vertex);
    },
    "onVertexModified": function(e) {
        this.feature = e.feature;
        var t = this.layer.map.getLonLatFromViewPortPx(e.pixel);
        this.considerSnapping(e.vertex, new OpenLayers.Geometry.Point(t.lon, t.lat));
    },
    "considerSnapping": function(e, t) {
        for (var i, n, r = {
            "rank": Number.POSITIVE_INFINITY,
            "dist": Number.POSITIVE_INFINITY,
            "x": null,
            "y": null
        }, s = !1, a = 0, o = this.targets.length; a < o; ++a) if (n = this.targets[a], 
        i = this.testTarget(n, t)) {
            if (this.greedy) {
                (r = i).target = n, s = !0;
                break;
            }
            (i.rank < r.rank || i.rank === r.rank && i.dist < r.dist) && ((r = i).target = n, 
            s = !0);
        }
        s && (!1 !== this.events.triggerEvent("beforesnap", {
            "point": e,
            "x": r.x,
            "y": r.y,
            "distance": r.dist,
            "layer": r.target.layer,
            "snapType": this.precedence[r.rank]
        }) ? (e.x = r.x, e.y = r.y, this.point = e, this.events.triggerEvent("snap", {
            "point": e,
            "snapType": this.precedence[r.rank],
            "layer": r.target.layer,
            "distance": r.dist
        })) : s = !1), this.point && !s && (e.x = t.x, e.y = t.y, this.point = null, this.events.triggerEvent("unsnap", {
            "point": e
        }));
    },
    "testTarget": function(e, t) {
        var i = this.layer.map.getResolution();
        if ("minResolution" in e && i < e.minResolution) return null;
        if ("maxResolution" in e && i >= e.maxResolution) return null;
        for (var n, r, s, a, o, l, h, u = {
            "node": this.getGeoTolerance(e.nodeTolerance, i),
            "vertex": this.getGeoTolerance(e.vertexTolerance, i),
            "edge": this.getGeoTolerance(e.edgeTolerance, i)
        }, p = Math.max(u.node, u.vertex, u.edge), c = {
            "rank": Number.POSITIVE_INFINITY,
            "dist": Number.POSITIVE_INFINITY
        }, d = !1, f = e.layer.features, y = this.precedence.length, m = new OpenLayers.LonLat(t.x, t.y), g = 0, v = f.length; g < v; ++g) if ((n = f[g]) !== this.feature && !n._sketch && n.state !== OpenLayers.State.DELETE && (!e.filter || e.filter.evaluate(n)) && n.atPoint(m, p, p)) for (var L = 0, O = Math.min(c.rank + 1, y); L < O; ++L) if (r = this.precedence[L], 
        e[r]) if ("edge" === r) {
            if (o = n.geometry.distanceTo(t, {
                "details": !0
            }), (l = o.distance) <= u[r] && l < c.dist) {
                c = {
                    "rank": L,
                    "dist": l,
                    "x": o.x0,
                    "y": o.y0
                }, d = !0;
                break;
            }
        } else {
            h = !1;
            for (var b = 0, w = (s = n.geometry.getVertices("node" === r)).length; b < w; ++b) (l = (a = s[b]).distanceTo(t)) <= u[r] && (L < c.rank || L === c.rank && l < c.dist) && (c = {
                "rank": L,
                "dist": l,
                "x": a.x,
                "y": a.y
            }, d = !0, h = !0);
            if (h) break;
        }
        return d ? c : null;
    },
    "getGeoTolerance": function(e, t) {
        t !== this.resolution && (this.resolution = t, this.geoToleranceCache = {});
        var i = this.geoToleranceCache[e];
        return void 0 === i && (i = e * t, this.geoToleranceCache[e] = i), i;
    },
    "destroy": function() {
        this.active && this.deactivate(), delete this.layer, delete this.targets, OpenLayers.Control.prototype.destroy.call(this);
    },
    "CLASS_NAME": "OpenLayers.Control.Snapping"
}), OpenLayers.Control.Split = OpenLayers.Class(OpenLayers.Control, {
    "layer": null,
    "source": null,
    "sourceOptions": null,
    "tolerance": null,
    "edge": !0,
    "deferDelete": !1,
    "mutual": !0,
    "targetFilter": null,
    "sourceFilter": null,
    "handler": null,
    "initialize": function(e) {
        OpenLayers.Control.prototype.initialize.apply(this, [ e ]), this.options = e || {}, 
        this.options.source && this.setSource(this.options.source);
    },
    "setSource": function(e) {
        this.active ? (this.deactivate(), this.handler && (this.handler.destroy(), delete this.handler), 
        this.source = e, this.activate()) : this.source = e;
    },
    "activate": function() {
        var e = OpenLayers.Control.prototype.activate.call(this);
        return e && (this.source ? this.source.events && this.source.events.on({
            "sketchcomplete": this.onSketchComplete,
            "afterfeaturemodified": this.afterFeatureModified,
            "scope": this
        }) : (this.handler || (this.handler = new OpenLayers.Handler.Path(this, {
            "done": function(e) {
                this.onSketchComplete({
                    "feature": new OpenLayers.Feature.Vector(e)
                });
            }
        }, {
            "layerOptions": this.sourceOptions
        })), this.handler.activate())), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Control.prototype.deactivate.call(this);
        return e && this.source && this.source.events && this.source.events.un({
            "sketchcomplete": this.onSketchComplete,
            "afterfeaturemodified": this.afterFeatureModified,
            "scope": this
        }), e;
    },
    "onSketchComplete": function(e) {
        return this.feature = null, !this.considerSplit(e.feature);
    },
    "afterFeatureModified": function(e) {
        e.modified && "function" == typeof e.feature.geometry.split && (this.feature = e.feature, 
        this.considerSplit(e.feature));
    },
    "removeByGeometry": function(e, t) {
        for (var i = 0, n = e.length; i < n; ++i) if (e[i].geometry === t) {
            e.splice(i, 1);
            break;
        }
    },
    "isEligible": function(e) {
        return !!e.geometry && (e.state !== OpenLayers.State.DELETE && "function" == typeof e.geometry.split && this.feature !== e && (!this.targetFilter || this.targetFilter.evaluate(e.attributes)));
    },
    "considerSplit": function(e) {
        var t = !1, i = !1;
        if (!this.sourceFilter || this.sourceFilter.evaluate(e.attributes)) {
            for (var n, r, s, a, o, l, h = this.layer && this.layer.features || [], u = [], p = [], c = this.layer === this.source && this.mutual, d = {
                "edge": this.edge,
                "tolerance": this.tolerance,
                "mutual": c
            }, f = [ e.geometry ], y = 0, m = h.length; y < m; ++y) if (s = h[y], this.isEligible(s)) {
                a = [ s.geometry ];
                for (var g = 0; g < f.length; ++g) {
                    o = f[g];
                    for (var v = 0; v < a.length; ++v) n = a[v], o.getBounds().intersectsBounds(n.getBounds()) && (r = o.split(n, d)) && !1 !== this.events.triggerEvent("beforesplit", {
                        "source": e,
                        "target": s
                    }) && (c && ((l = r[0]).length > 1 && (l.unshift(g, 1), Array.prototype.splice.apply(f, l), 
                    g += l.length - 3), r = r[1]), r.length > 1 && (r.unshift(v, 1), Array.prototype.splice.apply(a, r), 
                    v += r.length - 3));
                }
                a && a.length > 1 && (this.geomsToFeatures(s, a), this.events.triggerEvent("split", {
                    "original": s,
                    "features": a
                }), Array.prototype.push.apply(u, a), p.push(s), i = !0);
            }
            if (f && f.length > 1 && (this.geomsToFeatures(e, f), this.events.triggerEvent("split", {
                "original": e,
                "features": f
            }), Array.prototype.push.apply(u, f), p.push(e), t = !0), t || i) {
                if (this.deferDelete) {
                    for (var L, O = [], y = 0, m = p.length; y < m; ++y) (L = p[y]).state === OpenLayers.State.INSERT ? O.push(L) : (L.state = OpenLayers.State.DELETE, 
                    this.layer.drawFeature(L));
                    this.layer.destroyFeatures(O, {
                        "silent": !0
                    });
                    for (var y = 0, m = u.length; y < m; ++y) u[y].state = OpenLayers.State.INSERT;
                } else this.layer.destroyFeatures(p, {
                    "silent": !0
                });
                this.layer.addFeatures(u, {
                    "silent": !0
                }), this.events.triggerEvent("aftersplit", {
                    "source": e,
                    "features": u
                });
            }
        }
        return t;
    },
    "geomsToFeatures": function(e, t) {
        var i = e.clone();
        delete i.geometry;
        for (var n, r = 0, s = t.length; r < s; ++r) (n = i.clone()).geometry = t[r], n.state = OpenLayers.State.INSERT, 
        t[r] = n;
    },
    "destroy": function() {
        this.active && this.deactivate(), OpenLayers.Control.prototype.destroy.call(this);
    },
    "CLASS_NAME": "OpenLayers.Control.Split"
}), OpenLayers.Control.TextButtonPanel = OpenLayers.Class(OpenLayers.Control.Panel, {
    "vertical": !1,
    "additionalClass": null,
    "draw": function() {
        return OpenLayers.Control.Panel.prototype.draw.apply(this, arguments), this.setOrientationClass(), 
        this.setAdditionalClass(), this.div;
    },
    "redraw": function() {
        OpenLayers.Control.Panel.prototype.redraw.apply(this, arguments), this.setOrientationClass();
    },
    "setOrientationClass": function() {
        this.vertical ? OpenLayers.Element.addClass(this.div, "vertical") : OpenLayers.Element.removeClass(this.div, "vertical");
    },
    "setAdditionalClass": function() {
        this.additionalClass && OpenLayers.Element.addClass(this.div, this.additionalClass);
    },
    "CLASS_NAME": "OpenLayers.Control.TextButtonPanel"
}), OpenLayers.Control.TouchNavigation = OpenLayers.Class(OpenLayers.Control, {
    "dragPan": null,
    "dragPanOptions": null,
    "pinchZoom": null,
    "pinchZoomOptions": null,
    "clickHandlerOptions": null,
    "documentDrag": !1,
    "autoActivate": !0,
    "initialize": function(e) {
        this.handlers = {}, OpenLayers.Control.prototype.initialize.apply(this, arguments);
    },
    "destroy": function() {
        this.deactivate(), this.dragPan && this.dragPan.destroy(), this.dragPan = null, 
        this.pinchZoom && (this.pinchZoom.destroy(), delete this.pinchZoom), OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "activate": function() {
        return !!OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.dragPan.activate(), 
        this.handlers.click.activate(), this.pinchZoom.activate(), !0);
    },
    "deactivate": function() {
        return !!OpenLayers.Control.prototype.deactivate.apply(this, arguments) && (this.dragPan.deactivate(), 
        this.handlers.click.deactivate(), this.pinchZoom.deactivate(), !0);
    },
    "draw": function() {
        var e = {
            "click": this.defaultClick,
            "dblclick": this.defaultDblClick
        }, t = OpenLayers.Util.extend({
            "double": !0,
            "stopDouble": !0,
            "pixelTolerance": 2
        }, this.clickHandlerOptions);
        this.handlers.click = new OpenLayers.Handler.Click(this, e, t), this.dragPan = new OpenLayers.Control.DragPan(OpenLayers.Util.extend({
            "map": this.map,
            "documentDrag": this.documentDrag
        }, this.dragPanOptions)), this.dragPan.draw(), this.pinchZoom = new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({
            "map": this.map
        }, this.pinchZoomOptions));
    },
    "defaultClick": function(e) {
        e.lastTouches && 2 == e.lastTouches.length && this.map.zoomOut();
    },
    "defaultDblClick": function(e) {
        this.map.zoomTo(this.map.zoom + 1, e.xy);
    },
    "CLASS_NAME": "OpenLayers.Control.TouchNavigation"
}), OpenLayers.Control.TransformFeature = OpenLayers.Class(OpenLayers.Control, {
    "geometryTypes": null,
    "layer": null,
    "preserveAspectRatio": !1,
    "rotate": !0,
    "feature": null,
    "renderIntent": "temporary",
    "rotationHandleSymbolizer": null,
    "box": null,
    "center": null,
    "scale": 1,
    "ratio": 1,
    "rotation": 0,
    "handles": null,
    "rotationHandles": null,
    "dragControl": null,
    "irregular": !1,
    "initialize": function(e, t) {
        OpenLayers.Control.prototype.initialize.apply(this, [ t ]), this.layer = e, this.rotationHandleSymbolizer || (this.rotationHandleSymbolizer = {
            "stroke": !1,
            "pointRadius": 10,
            "fillOpacity": 0,
            "cursor": "pointer"
        }), this.createBox(), this.createControl();
    },
    "activate": function() {
        var e = !1;
        return OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.dragControl.activate(), 
        this.layer.addFeatures([ this.box ]), this.rotate && this.layer.addFeatures(this.rotationHandles), 
        this.layer.addFeatures(this.handles), e = !0), e;
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Control.prototype.deactivate.apply(this, arguments) && (this.layer.removeFeatures(this.handles), 
        this.rotate && this.layer.removeFeatures(this.rotationHandles), this.layer.removeFeatures([ this.box ]), 
        this.dragControl.deactivate(), e = !0), e;
    },
    "setMap": function(e) {
        this.dragControl.setMap(e), OpenLayers.Control.prototype.setMap.apply(this, arguments);
    },
    "setFeature": function(e, t) {
        t = OpenLayers.Util.applyDefaults(t, {
            "rotation": 0,
            "scale": 1,
            "ratio": 1
        });
        var i = this.rotation, n = this.center;
        if (OpenLayers.Util.extend(this, t), !1 !== this.events.triggerEvent("beforesetfeature", {
            "feature": e
        })) {
            this.feature = e, this.activate(), this._setfeature = !0;
            var r = this.feature.geometry.getBounds();
            this.box.move(r.getCenterLonLat()), this.box.geometry.rotate(-i, n), this._angle = 0;
            var s;
            if (this.rotation) {
                var a = e.geometry.clone();
                a.rotate(-this.rotation, this.center);
                var o = new OpenLayers.Feature.Vector(a.getBounds().toGeometry());
                o.geometry.rotate(this.rotation, this.center), this.box.geometry.rotate(this.rotation, this.center), 
                this.box.move(o.geometry.getBounds().getCenterLonLat()), s = o.geometry.components[0].components[0].getBounds().getCenterLonLat();
            } else s = new OpenLayers.LonLat(r.left, r.bottom);
            this.handles[0].move(s), delete this._setfeature, this.events.triggerEvent("setfeature", {
                "feature": e
            });
        }
    },
    "unsetFeature": function() {
        this.active ? this.deactivate() : (this.feature = null, this.rotation = 0, this.scale = 1, 
        this.ratio = 1);
    },
    "createBox": function() {
        var e = this;
        this.center = new OpenLayers.Geometry.Point(0, 0), this.box = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([ new OpenLayers.Geometry.Point(-1, -1), new OpenLayers.Geometry.Point(0, -1), new OpenLayers.Geometry.Point(1, -1), new OpenLayers.Geometry.Point(1, 0), new OpenLayers.Geometry.Point(1, 1), new OpenLayers.Geometry.Point(0, 1), new OpenLayers.Geometry.Point(-1, 1), new OpenLayers.Geometry.Point(-1, 0), new OpenLayers.Geometry.Point(-1, -1) ]), null, "string" == typeof this.renderIntent ? null : this.renderIntent), 
        this.box.geometry.move = function(t, i) {
            e._moving = !0, OpenLayers.Geometry.LineString.prototype.move.apply(this, arguments), 
            e.center.move(t, i), delete e._moving;
        };
        for (var t, i, n, r = new Array(8), s = new Array(4), a = [ "sw", "s", "se", "e", "ne", "n", "nw", "w" ], o = 0; o < 8; ++o) t = this.box.geometry.components[o], 
        i = new OpenLayers.Feature.Vector(t.clone(), {
            "role": a[o] + "-resize"
        }, "string" == typeof this.renderIntent ? null : this.renderIntent), o % 2 == 0 && ((n = new OpenLayers.Feature.Vector(t.clone(), {
            "role": a[o] + "-rotate"
        }, "string" == typeof this.rotationHandleSymbolizer ? null : this.rotationHandleSymbolizer)).geometry.move = function(t, i) {
            var n = this.x, r = this.y;
            if (OpenLayers.Geometry.Point.prototype.move.call(this, t, i), !e._moving) {
                var s = e.dragControl.handlers.drag.evt, a = s && s.shiftKey ? 45 : 1, o = e.center, l = this.x - o.x, h = this.y - o.y, u = l - t, p = h - i;
                this.x = n, this.y = r;
                var c = Math.atan2(p, u), d = Math.atan2(h, l) - c;
                d *= 180 / Math.PI, e._angle = (e._angle + d) % 360;
                var f = e.rotation % a;
                (Math.abs(e._angle) >= a || 0 !== f) && (d = Math.round(e._angle / a) * a - f, e._angle = 0, 
                e.box.geometry.rotate(d, o), e.transformFeature({
                    "rotation": d
                }));
            }
        }, t._rotationHandle = n, s[o / 2] = n), t.move = function(e, t) {
            OpenLayers.Geometry.Point.prototype.move.apply(this, arguments), this._rotationHandle && this._rotationHandle.geometry.move(e, t), 
            this._handle.geometry.move(e, t);
        }, t.resize = function(e, t, i) {
            OpenLayers.Geometry.Point.prototype.resize.apply(this, arguments), this._rotationHandle && this._rotationHandle.geometry.resize(e, t, i), 
            this._handle.geometry.resize(e, t, i);
        }, t.rotate = function(e, t) {
            OpenLayers.Geometry.Point.prototype.rotate.apply(this, arguments), this._rotationHandle && this._rotationHandle.geometry.rotate(e, t), 
            this._handle.geometry.rotate(e, t);
        }, i.geometry.move = function(t, i) {
            var n = this.x, r = this.y;
            if (OpenLayers.Geometry.Point.prototype.move.call(this, t, i), !e._moving) {
                var s = e.dragControl.handlers.drag.evt, a = !(!e._setfeature && e.preserveAspectRatio || s && s.shiftKey), o = new OpenLayers.Geometry.Point(n, r), l = e.center;
                this.rotate(-e.rotation, l), o.rotate(-e.rotation, l);
                var h = this.x - l.x, u = this.y - l.y, p = h - (this.x - o.x), c = u - (this.y - o.y);
                e.irregular && !e._setfeature && (h -= (this.x - o.x) / 2, u -= (this.y - o.y) / 2), 
                this.x = n, this.y = r;
                var d, f = 1;
                if (a) d = Math.abs(c) < 1e-5 ? 1 : u / c, f = (Math.abs(p) < 1e-5 ? 1 : h / p) / d; else {
                    var y = Math.sqrt(p * p + c * c);
                    d = Math.sqrt(h * h + u * u) / y;
                }
                if (e._moving = !0, e.box.geometry.rotate(-e.rotation, l), delete e._moving, e.box.geometry.resize(d, l, f), 
                e.box.geometry.rotate(e.rotation, l), e.transformFeature({
                    "scale": d,
                    "ratio": f
                }), e.irregular && !e._setfeature) {
                    var m = l.clone();
                    m.x += Math.abs(n - l.x) < 1e-5 ? 0 : this.x - n, m.y += Math.abs(r - l.y) < 1e-5 ? 0 : this.y - r, 
                    e.box.geometry.move(this.x - n, this.y - r), e.transformFeature({
                        "center": m
                    });
                }
            }
        }, t._handle = i, r[o] = i;
        this.rotationHandles = s, this.handles = r;
    },
    "createControl": function() {
        var e = this;
        this.dragControl = new OpenLayers.Control.DragFeature(this.layer, {
            "documentDrag": !0,
            "moveFeature": function(t) {
                this.feature === e.feature && (this.feature = e.box), OpenLayers.Control.DragFeature.prototype.moveFeature.apply(this, arguments);
            },
            "onDrag": function(t, i) {
                t === e.box && e.transformFeature({
                    "center": e.center
                });
            },
            "onStart": function(t, i) {
                var n = !e.geometryTypes || -1 !== OpenLayers.Util.indexOf(e.geometryTypes, t.geometry.CLASS_NAME), r = OpenLayers.Util.indexOf(e.handles, t);
                r += OpenLayers.Util.indexOf(e.rotationHandles, t), t !== e.feature && t !== e.box && -2 == r && n && e.setFeature(t);
            },
            "onComplete": function(t, i) {
                e.events.triggerEvent("transformcomplete", {
                    "feature": e.feature
                });
            }
        });
    },
    "drawHandles": function() {
        for (var e = this.layer, t = 0; t < 8; ++t) this.rotate && t % 2 == 0 && e.drawFeature(this.rotationHandles[t / 2], this.rotationHandleSymbolizer), 
        e.drawFeature(this.handles[t], this.renderIntent);
    },
    "transformFeature": function(e) {
        if (!this._setfeature) {
            this.scale *= e.scale || 1, this.ratio *= e.ratio || 1;
            var t = this.rotation;
            if (this.rotation = (this.rotation + (e.rotation || 0)) % 360, !1 !== this.events.triggerEvent("beforetransform", e)) {
                var i = this.feature, n = i.geometry, r = this.center;
                n.rotate(-t, r), e.scale || e.ratio ? n.resize(e.scale, r, e.ratio) : e.center && i.move(e.center.getBounds().getCenterLonLat()), 
                n.rotate(this.rotation, r), this.layer.drawFeature(i), i.toState(OpenLayers.State.UPDATE), 
                this.events.triggerEvent("transform", e);
            }
        }
        this.layer.drawFeature(this.box, this.renderIntent), this.drawHandles();
    },
    "destroy": function() {
        for (var e, t = 0; t < 8; ++t) (e = this.box.geometry.components[t])._handle.destroy(), 
        e._handle = null, e._rotationHandle && e._rotationHandle.destroy(), e._rotationHandle = null;
        this.center = null, this.feature = null, this.handles = null, this.rotationHandleSymbolizer = null, 
        this.rotationHandles = null, this.box.destroy(), this.box = null, this.layer = null, 
        this.dragControl.destroy(), this.dragControl = null, OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Control.TransformFeature"
}), OpenLayers.Control.UTFGrid = OpenLayers.Class(OpenLayers.Control, {
    "autoActivate": !0,
    "layers": null,
    "defaultHandlerOptions": {
        "delay": 300,
        "pixelTolerance": 4,
        "stopMove": !1,
        "single": !0,
        "double": !1,
        "stopSingle": !1,
        "stopDouble": !1
    },
    "handlerMode": "click",
    "setHandler": function(e) {
        this.handlerMode = e, this.resetHandler();
    },
    "resetHandler": function() {
        return this.handler && (this.handler.deactivate(), this.handler.destroy(), this.handler = null), 
        "hover" == this.handlerMode ? this.handler = new OpenLayers.Handler.Hover(this, {
            "pause": this.handleEvent,
            "move": this.reset
        }, this.handlerOptions) : "click" == this.handlerMode ? this.handler = new OpenLayers.Handler.Click(this, {
            "click": this.handleEvent
        }, this.handlerOptions) : "move" == this.handlerMode && (this.handler = new OpenLayers.Handler.Hover(this, {
            "pause": this.handleEvent,
            "move": this.handleEvent
        }, this.handlerOptions)), !!this.handler;
    },
    "initialize": function(e) {
        (e = e || {}).handlerOptions = e.handlerOptions || this.defaultHandlerOptions, OpenLayers.Control.prototype.initialize.apply(this, [ e ]), 
        this.resetHandler();
    },
    "handleEvent": function(e) {
        if (null != e) {
            var t = this.map.getLonLatFromPixel(e.xy);
            if (t) {
                var i = this.findLayers();
                if (i.length > 0) {
                    for (var n, r = {}, s = 0, a = i.length; s < a; s++) n = i[s], r[OpenLayers.Util.indexOf(this.map.layers, n)] = n.getFeatureInfo(t);
                    this.callback(r, t, e.xy);
                }
            }
        } else this.reset();
    },
    "callback": function(e) {},
    "reset": function(e) {
        this.callback(null);
    },
    "findLayers": function() {
        for (var e, t = this.layers || this.map.layers, i = [], n = t.length - 1; n >= 0; --n) (e = t[n]) instanceof OpenLayers.Layer.UTFGrid && i.push(e);
        return i;
    },
    "CLASS_NAME": "OpenLayers.Control.UTFGrid"
}), OpenLayers.Format.WMSGetFeatureInfo = OpenLayers.Class(OpenLayers.Format.XML, {
    "layerIdentifier": "_layer",
    "featureIdentifier": "_feature",
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "gmlFormat": null,
    "read": function(e) {
        var t;
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var i = e.documentElement;
        if (i) {
            var n = this["read_" + i.nodeName];
            t = n ? n.call(this, i) : new OpenLayers.Format.GML(this.options ? this.options : {}).read(e);
        } else t = e;
        return t;
    },
    "read_msGMLOutput": function(e) {
        var t = [], i = this.getSiblingNodesByTagCriteria(e, this.layerIdentifier);
        if (i) for (var n = 0, r = i.length; n < r; ++n) {
            var s = i[n], a = s.nodeName;
            s.prefix && (a = a.split(":")[1]);
            var a = a.replace(this.layerIdentifier, ""), o = this.getSiblingNodesByTagCriteria(s, this.featureIdentifier);
            if (o) for (var l = 0; l < o.length; l++) {
                var h = o[l], u = this.parseGeometry(h), p = this.parseAttributes(h), c = new OpenLayers.Feature.Vector(u.geometry, p, null);
                c.bounds = u.bounds, c.type = a, t.push(c);
            }
        }
        return t;
    },
    "read_FeatureInfoResponse": function(e) {
        for (var t = [], i = this.getElementsByTagNameNS(e, "*", "FIELDS"), n = 0, r = i.length; n < r; n++) {
            var s, a = i[n], o = {}, l = a.attributes.length;
            if (l > 0) for (s = 0; s < l; s++) {
                var h = a.attributes[s];
                o[h.nodeName] = h.nodeValue;
            } else {
                var u = a.childNodes;
                for (s = 0, l = u.length; s < l; ++s) {
                    var p = u[s];
                    3 != p.nodeType && (o[p.getAttribute("name")] = p.getAttribute("value"));
                }
            }
            t.push(new OpenLayers.Feature.Vector(null, o, null));
        }
        return t;
    },
    "getSiblingNodesByTagCriteria": function(e, t) {
        var i, n, r, s, a, o = [];
        if (e && e.hasChildNodes()) {
            r = (i = e.childNodes).length;
            for (var l = 0; l < r; l++) {
                for (a = i[l]; a && 1 != a.nodeType; ) a = a.nextSibling, l++;
                (n = a ? a.nodeName : "").length > 0 && n.indexOf(t) > -1 ? o.push(a) : (s = this.getSiblingNodesByTagCriteria(a, t)).length > 0 && (0 == o.length ? o = s : o.push(s));
            }
        }
        return o;
    },
    "parseAttributes": function(e) {
        var t = {};
        if (1 == e.nodeType) for (var i = e.childNodes, n = i.length, r = 0; r < n; ++r) {
            var s = i[r];
            if (1 == s.nodeType) {
                var a = s.childNodes, o = s.prefix ? s.nodeName.split(":")[1] : s.nodeName;
                if (0 == a.length) t[o] = null; else if (1 == a.length || a[0].nodeValue.replace(this.regExes.trimSpace, "").length > 0) {
                    var l = a[0];
                    if (3 == l.nodeType || 4 == l.nodeType) {
                        var h = l.wholeText ? l.wholeText : l.nodeValue;
                        t[o] = h.replace(this.regExes.trimSpace, "");
                    }
                }
            }
        }
        return t;
    },
    "parseGeometry": function(e) {
        this.gmlFormat || (this.gmlFormat = new OpenLayers.Format.GML());
        var t, i = this.gmlFormat.parseFeature(e), n = null;
        return i && (t = i.geometry && i.geometry.clone(), n = i.bounds && i.bounds.clone(), 
        i.destroy()), {
            "geometry": t,
            "bounds": n
        };
    },
    "CLASS_NAME": "OpenLayers.Format.WMSGetFeatureInfo"
}), OpenLayers.Control.WMSGetFeatureInfo = OpenLayers.Class(OpenLayers.Control, {
    "hover": !1,
    "drillDown": !1,
    "maxFeatures": 10,
    "clickCallback": "click",
    "output": "features",
    "layers": null,
    "queryVisible": !1,
    "url": null,
    "layerUrls": null,
    "infoFormat": "text/html",
    "vendorParams": {},
    "format": null,
    "formatOptions": null,
    "handler": null,
    "hoverRequest": null,
    "initialize": function(e) {
        if (e = e || {}, e.handlerOptions = e.handlerOptions || {}, OpenLayers.Control.prototype.initialize.apply(this, [ e ]), 
        this.format || (this.format = new OpenLayers.Format.WMSGetFeatureInfo(e.formatOptions)), 
        !0 === this.drillDown && (this.hover = !1), this.hover) this.handler = new OpenLayers.Handler.Hover(this, {
            "move": this.cancelHover,
            "pause": this.getInfoForHover
        }, OpenLayers.Util.extend(this.handlerOptions.hover || {}, {
            "delay": 250
        })); else {
            var t = {};
            t[this.clickCallback] = this.getInfoForClick, this.handler = new OpenLayers.Handler.Click(this, t, this.handlerOptions.click || {});
        }
    },
    "getInfoForClick": function(e) {
        this.events.triggerEvent("beforegetfeatureinfo", {
            "xy": e.xy
        }), OpenLayers.Element.addClass(this.map.viewPortDiv, "olCursorWait"), this.request(e.xy, {});
    },
    "getInfoForHover": function(e) {
        this.events.triggerEvent("beforegetfeatureinfo", {
            "xy": e.xy
        }), this.request(e.xy, {
            "hover": !0
        });
    },
    "cancelHover": function() {
        this.hoverRequest && (this.hoverRequest.abort(), this.hoverRequest = null);
    },
    "findLayers": function() {
        for (var e, t, i = this.layers || this.map.layers, n = [], r = i.length - 1; r >= 0; --r) (e = i[r]) instanceof OpenLayers.Layer.WMS && (!this.queryVisible || e.getVisibility()) && (t = OpenLayers.Util.isArray(e.url) ? e.url[0] : e.url, 
        !1 !== this.drillDown || this.url || (this.url = t), (!0 === this.drillDown || this.urlMatches(t)) && n.push(e));
        return n;
    },
    "urlMatches": function(e) {
        var t = OpenLayers.Util.isEquivalentUrl(this.url, e);
        if (!t && this.layerUrls) for (var i = 0, n = this.layerUrls.length; i < n; ++i) if (OpenLayers.Util.isEquivalentUrl(this.layerUrls[i], e)) {
            t = !0;
            break;
        }
        return t;
    },
    "buildWMSOptions": function(e, t, i, n) {
        for (var r = [], s = [], a = 0, o = t.length; a < o; a++) null != t[a].params.LAYERS && (r = r.concat(t[a].params.LAYERS), 
        s = s.concat(this.getStyleNames(t[a])));
        var l = t[0], h = this.map.getProjection(), u = l.projection;
        u && u.equals(this.map.getProjectionObject()) && (h = u.getCode());
        var p = OpenLayers.Util.extend({
            "service": "WMS",
            "version": l.params.VERSION,
            "request": "GetFeatureInfo",
            "exceptions": l.params.EXCEPTIONS,
            "bbox": this.map.getExtent().toBBOX(null, l.reverseAxisOrder()),
            "feature_count": this.maxFeatures,
            "height": this.map.getSize().h,
            "width": this.map.getSize().w,
            "format": n,
            "info_format": l.params.INFO_FORMAT || this.infoFormat
        }, parseFloat(l.params.VERSION) >= 1.3 ? {
            "crs": h,
            "i": parseInt(i.x),
            "j": parseInt(i.y)
        } : {
            "srs": h,
            "x": parseInt(i.x),
            "y": parseInt(i.y)
        });
        return 0 != r.length && (p = OpenLayers.Util.extend({
            "layers": r,
            "query_layers": r,
            "styles": s
        }, p)), OpenLayers.Util.applyDefaults(p, this.vendorParams), {
            "url": e,
            "params": OpenLayers.Util.upperCaseObject(p),
            "callback": function(t) {
                this.handleResponse(i, t, e);
            },
            "scope": this
        };
    },
    "getStyleNames": function(e) {
        return e.params.STYLES ? e.params.STYLES : OpenLayers.Util.isArray(e.params.LAYERS) ? new Array(e.params.LAYERS.length) : e.params.LAYERS.toString().replace(/[^,]/g, "");
    },
    "request": function(e, t) {
        if (0 == (l = this.findLayers()).length) return this.events.triggerEvent("nogetfeatureinfo"), 
        void OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait");
        if (t = t || {}, !1 === this.drillDown) {
            var i = this.buildWMSOptions(this.url, l, e, l[0].params.FORMAT), n = OpenLayers.Request.GET(i);
            !0 === t.hover && (this.hoverRequest = n);
        } else {
            this._requestCount = 0, this._numRequests = 0, this.features = [];
            for (var r = {}, s = 0, a = l.length; s < a; s++) {
                var o = l[s];
                (h = OpenLayers.Util.isArray(o.url) ? o.url[0] : o.url) in r ? r[h].push(o) : (this._numRequests++, 
                r[h] = [ o ]);
            }
            var l;
            for (var h in r) {
                l = r[h];
                i = this.buildWMSOptions(h, l, e, l[0].params.FORMAT);
                OpenLayers.Request.GET(i);
            }
        }
    },
    "triggerGetFeatureInfo": function(e, t, i) {
        this.events.triggerEvent("getfeatureinfo", {
            "text": e.responseText,
            "features": i,
            "request": e,
            "xy": t
        }), OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait");
    },
    "handleResponse": function(e, t, i) {
        var n = t.responseXML;
        n && n.documentElement || (n = t.responseText);
        var r = [], s = t.getAllResponseHeaders();
        r = s && "application/json" === this.infoFormat && -1 !== s.indexOf("application/json") ? new OpenLayers.Format.GeoJSON().read(n) : this.format.read(n), 
        !1 === this.drillDown ? this.triggerGetFeatureInfo(t, e, r) : (this._requestCount++, 
        "object" === this.output ? this._features = (this._features || []).concat({
            "url": i,
            "features": r
        }) : this._features = (this._features || []).concat(r), this._requestCount === this._numRequests && (this.triggerGetFeatureInfo(t, e, this._features.concat()), 
        delete this._features, delete this._requestCount, delete this._numRequests));
    },
    "CLASS_NAME": "OpenLayers.Control.WMSGetFeatureInfo"
}), OpenLayers.Control.WMTSGetFeatureInfo = OpenLayers.Class(OpenLayers.Control, {
    "hover": !1,
    "requestEncoding": "KVP",
    "drillDown": !1,
    "maxFeatures": 10,
    "clickCallback": "click",
    "layers": null,
    "queryVisible": !0,
    "infoFormat": "text/html",
    "vendorParams": {},
    "format": null,
    "formatOptions": null,
    "handler": null,
    "hoverRequest": null,
    "pending": 0,
    "initialize": function(e) {
        if (e = e || {}, e.handlerOptions = e.handlerOptions || {}, OpenLayers.Control.prototype.initialize.apply(this, [ e ]), 
        this.format || (this.format = new OpenLayers.Format.WMSGetFeatureInfo(e.formatOptions)), 
        !0 === this.drillDown && (this.hover = !1), this.hover) this.handler = new OpenLayers.Handler.Hover(this, {
            "move": this.cancelHover,
            "pause": this.getInfoForHover
        }, OpenLayers.Util.extend(this.handlerOptions.hover || {}, {
            "delay": 250
        })); else {
            var t = {};
            t[this.clickCallback] = this.getInfoForClick, this.handler = new OpenLayers.Handler.Click(this, t, this.handlerOptions.click || {});
        }
    },
    "getInfoForClick": function(e) {
        this.request(e.xy, {});
    },
    "getInfoForHover": function(e) {
        this.request(e.xy, {
            "hover": !0
        });
    },
    "cancelHover": function() {
        this.hoverRequest && (--this.pending <= 0 && (OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait"), 
        this.pending = 0), this.hoverRequest.abort(), this.hoverRequest = null);
    },
    "findLayers": function() {
        for (var e, t = this.layers || this.map.layers, i = [], n = t.length - 1; n >= 0 && (!((e = t[n]) instanceof OpenLayers.Layer.WMTS && e.requestEncoding === this.requestEncoding) || this.queryVisible && !e.getVisibility() || (i.push(e), 
        this.drillDown && !this.hover)); --n) ;
        return i;
    },
    "buildRequestOptions": function(e, t) {
        var i = this.map.getLonLatFromPixel(t), n = e.getURL(new OpenLayers.Bounds(i.lon, i.lat, i.lon, i.lat)), r = OpenLayers.Util.getParameters(n), s = e.getTileInfo(i);
        return OpenLayers.Util.extend(r, {
            "service": "WMTS",
            "version": e.version,
            "request": "GetFeatureInfo",
            "infoFormat": this.infoFormat,
            "feature_count": this.maxFeatures,
            "i": s.i,
            "j": s.j
        }), OpenLayers.Util.applyDefaults(r, this.vendorParams), {
            "url": OpenLayers.Util.isArray(e.url) ? e.url[0] : e.url,
            "params": OpenLayers.Util.upperCaseObject(r),
            "callback": function(i) {
                this.handleResponse(t, i, e);
            },
            "scope": this
        };
    },
    "request": function(e, t) {
        t = t || {};
        var i = this.findLayers();
        if (i.length > 0) {
            for (var n, r = 0, s = i.length; r < s; r++) if (n = i[r], !1 !== this.events.triggerEvent("beforegetfeatureinfo", {
                "xy": e,
                "layer": n
            })) {
                ++this.pending;
                var a = this.buildRequestOptions(n, e), o = OpenLayers.Request.GET(a);
                !0 === t.hover && (this.hoverRequest = o);
            }
            this.pending > 0 && OpenLayers.Element.addClass(this.map.viewPortDiv, "olCursorWait");
        }
    },
    "handleResponse": function(e, t, i) {
        if (--this.pending <= 0 && (OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait"), 
        this.pending = 0), t.status && (t.status < 200 || t.status >= 300)) this.events.triggerEvent("exception", {
            "xy": e,
            "request": t,
            "layer": i
        }); else {
            var n = t.responseXML;
            n && n.documentElement || (n = t.responseText);
            var r, s;
            try {
                r = this.format.read(n);
            } catch (n) {
                s = !0, this.events.triggerEvent("exception", {
                    "xy": e,
                    "request": t,
                    "error": n,
                    "layer": i
                });
            }
            s || this.events.triggerEvent("getfeatureinfo", {
                "text": t.responseText,
                "features": r,
                "request": t,
                "xy": e,
                "layer": i
            });
        }
    },
    "CLASS_NAME": "OpenLayers.Control.WMTSGetFeatureInfo"
}), OpenLayers.Control.Zoom = OpenLayers.Class(OpenLayers.Control, {
    "zoomInText": "+",
    "zoomInId": "olZoomInLink",
    "zoomOutText": "",
    "zoomOutId": "olZoomOutLink",
    "draw": function() {
        var e = OpenLayers.Control.prototype.draw.apply(this), t = this.getOrCreateLinks(e), i = t.zoomIn, n = t.zoomOut, r = this.map.events;
        return n.parentNode !== e && (r = this.events).attachToElement(n.parentNode), r.register("buttonclick", this, this.onZoomClick), 
        this.zoomInLink = i, this.zoomOutLink = n, e;
    },
    "getOrCreateLinks": function(e) {
        var t = document.getElementById(this.zoomInId), i = document.getElementById(this.zoomOutId);
        return t || ((t = document.createElement("a")).href = "#zoomIn", t.appendChild(document.createTextNode(this.zoomInText)), 
        t.className = "olControlZoomIn", e.appendChild(t)), OpenLayers.Element.addClass(t, "olButton"), 
        i || ((i = document.createElement("a")).href = "#zoomOut", i.appendChild(document.createTextNode(this.zoomOutText)), 
        i.className = "olControlZoomOut", e.appendChild(i)), OpenLayers.Element.addClass(i, "olButton"), 
        {
            "zoomIn": t,
            "zoomOut": i
        };
    },
    "onZoomClick": function(e) {
        var t = e.buttonElement;
        t === this.zoomInLink ? this.map.zoomIn() : t === this.zoomOutLink && this.map.zoomOut();
    },
    "destroy": function() {
        this.map && this.map.events.unregister("buttonclick", this, this.onZoomClick), delete this.zoomInLink, 
        delete this.zoomOutLink, OpenLayers.Control.prototype.destroy.apply(this);
    },
    "CLASS_NAME": "OpenLayers.Control.Zoom"
}), OpenLayers.Control.ZoomIn = OpenLayers.Class(OpenLayers.Control.Button, {
    "trigger": function() {
        this.map && this.map.zoomIn();
    },
    "CLASS_NAME": "OpenLayers.Control.ZoomIn"
}), OpenLayers.Control.ZoomOut = OpenLayers.Class(OpenLayers.Control.Button, {
    "trigger": function() {
        this.map && this.map.zoomOut();
    },
    "CLASS_NAME": "OpenLayers.Control.ZoomOut"
}), OpenLayers.Control.ZoomToMaxExtent = OpenLayers.Class(OpenLayers.Control.Button, {
    "trigger": function() {
        this.map && this.map.zoomToMaxExtent();
    },
    "CLASS_NAME": "OpenLayers.Control.ZoomToMaxExtent"
}), OpenLayers.Control.ZoomPanel = OpenLayers.Class(OpenLayers.Control.Panel, {
    "initialize": function(e) {
        OpenLayers.Control.Panel.prototype.initialize.apply(this, [ e ]), this.addControls([ new OpenLayers.Control.ZoomIn(), new OpenLayers.Control.ZoomToMaxExtent(), new OpenLayers.Control.ZoomOut() ]);
    },
    "CLASS_NAME": "OpenLayers.Control.ZoomPanel"
}), OpenLayers.Control.ModifyFeature.BySegment = {
    "hoverTolerance": 25,
    "collectVertices": OpenLayers.Function.Void,
    "setMap": function(e) {
        OpenLayers.Control.ModifyFeature.prototype.setMap.apply(this, arguments), this.handlers.hover || (this.handlers.hover = new OpenLayers.Handler.Hover(this, {
            "move": this.onHoverMove
        })), this.handlers.hover.setMap(e), this.layer.events.on({
            "beforefeaturemodified": this.createSpatialIndex,
            "afterfeaturemodified": this.deactivateHover,
            "scope": this
        });
    },
    "deactivateHover": function() {
        this.handlers.hover.deactivate();
    },
    "destroy": function() {
        this.layer && this.layer.events.un({
            "beforefeaturemodified": this.createSpatialIndex,
            "afterfeaturemodified": this.deactivateHover,
            "scope": this
        }), OpenLayers.Control.ModifyFeature.prototype.destroy.apply(this, []);
    },
    "dragStart": function(e) {
        OpenLayers.Control.ModifyFeature.prototype.dragStart.apply(this, arguments), this.vertexGeom = e.geometry.clone(), 
        this.handlers.drag.stopDown && this.handlers.hover.deactivate();
    },
    "dragComplete": function(e) {
        this.updateSpatialIndex(e), OpenLayers.Control.ModifyFeature.prototype.dragComplete.apply(this, arguments), 
        this.handlers.hover.activate();
    },
    "onHoverMove": function(e) {
        this.vertices.length > 0 && (this.layer.removeFeatures(this.vertices, {
            "silent": !0
        }), this.vertices = []), this.virtualVertices.length > 0 && (this.layer.removeFeatures(this.virtualVertices, {
            "silent": !0
        }), this.virtualVertices = []);
        var t = e.xy, i = t.add(-this.hoverTolerance / 2, this.hoverTolerance / 2), n = t.add(this.hoverTolerance / 2, -this.hoverTolerance / 2), r = this.map.getLonLatFromPixel(i), s = this.map.getLonLatFromPixel(n), a = this.tree.search([ r.lon, r.lat, s.lon, s.lat ]);
        if (a.length > 0) {
            for (var o, l = this.map.getLonLatFromPixel(t), h = new OpenLayers.Geometry.Point(l.lon, l.lat), u = Number.MAX_VALUE, p = 0, c = a.length; p < c; ++p) {
                var d = a[p], f = OpenLayers.Geometry.distanceSquaredToSegment(h, {
                    "x1": d.point1.x,
                    "x2": d.point2.x,
                    "y1": d.point1.y,
                    "y2": d.point2.y
                }).distance;
                f < u && (o = d), u = f;
            }
            var y = function(e) {
                var t = new OpenLayers.Feature.Vector(e);
                t._sketch = !0, t.renderIntent = this.vertexRenderIntent, this.vertices.push(t);
            };
            y.call(this, o.point1), y.call(this, o.point2);
            var m = this.createVirtualVertex(o.point1, o.point2);
            m._previous = o.point1, m._next = o.point2, m._index = -1, m.geometry.parent = o.point1.parent, 
            this.virtualVertices.push(m);
        }
        this.layer.addFeatures(this.vertices, {
            "silent": !0
        }), this.layer.addFeatures(this.virtualVertices, {
            "silent": !0
        });
    },
    "createSpatialIndex": function(e) {
        function t(e) {
            var i, r, s;
            if ("OpenLayers.Geometry.Point" !== e.CLASS_NAME) {
                var a = e.components.length;
                for ("OpenLayers.Geometry.LinearRing" != e.CLASS_NAME && "OpenLayers.Geometry.LineString" != e.CLASS_NAME || (a -= 1), 
                s = e.components[0], i = 1; i <= a; ++i) if (r = s, s = e.components[i], "OpenLayers.Geometry.Point" == r.CLASS_NAME) {
                    var o = this.createBBOX(r, s);
                    o.point1 = r, o.point2 = s, n.push(o);
                } else t.call(this, r);
            }
        }
        var i = e.feature, n = [];
        t.call(this, i.geometry), this.tree = window.rbush(), this.tree.load(n), this.handlers.hover.activate();
    },
    "createBBOX": function(e, t) {
        return [ e.x < t.x ? e.x : t.x, e.y < t.y ? e.y : t.y, e.x < t.x ? t.x : e.x, e.y < t.y ? t.y : e.y ];
    },
    "updateSpatialIndex": function(e) {
        var t, i, n, r = this.tree.search([ this.vertexGeom.x, this.vertexGeom.y, this.vertexGeom.x, this.vertexGeom.y ]);
        if (e._previous) (t = this.createBBOX(e._previous, e.geometry)).point1 = e._previous, 
        t.point2 = e.geometry, this.tree.insert(t), (t = this.createBBOX(e.geometry, e._next)).point1 = e.geometry, 
        t.point2 = e._next, this.tree.insert(t), this.tree.remove(r[0]), delete e._next, 
        delete e._previous; else for (i = 0, n = r.length; i < n; ++i) {
            var s = r[i];
            this.vertexGeom.equals(s.point1) ? ((t = this.createBBOX(e.geometry, s.point2)).point1 = e.geometry, 
            t.point2 = s.point2) : ((t = this.createBBOX(e.geometry, s.point1)).point1 = s.point1, 
            t.point2 = e.geometry), this.tree.insert(t), this.tree.remove(s);
        }
        this.vertexGeom.destroy(), this.vertexGeom = null;
    }
}, OpenLayers.Events.featureclick = OpenLayers.Class({
    "cache": null,
    "map": null,
    "provides": [ "featureclick", "nofeatureclick", "featureover", "featureout" ],
    "lastClientX": 0,
    "lastClientY": 0,
    "initialize": function(e) {
        if (this.target = e, e.object instanceof OpenLayers.Map) this.setMap(e.object); else {
            if (!(e.object instanceof OpenLayers.Layer.Vector)) throw "Listeners for '" + this.provides.join("', '") + "' events can only be registered for OpenLayers.Layer.Vector or OpenLayers.Map instances";
            e.object.map ? this.setMap(e.object.map) : e.object.events.register("added", this, function(t) {
                this.setMap(e.object.map);
            });
        }
        for (var t = this.provides.length - 1; t >= 0; --t) e.extensions[this.provides[t]] = !0;
    },
    "setMap": function(e) {
        this.map = e, this.cache = {}, e.events.register("mousedown", this, this.start, {
            "extension": !0
        }), e.events.register("mouseup", this, this.onClick, {
            "extension": !0
        }), e.events.register("touchstart", this, this.start, {
            "extension": !0
        }), e.events.register("touchmove", this, this.cancel, {
            "extension": !0
        }), e.events.register("touchend", this, this.onClick, {
            "extension": !0
        }), e.events.register("mousemove", this, this.onMousemove, {
            "extension": !0
        });
    },
    "start": function(e) {
        this.startEvt = e;
    },
    "cancel": function(e) {
        delete this.startEvt;
    },
    "onClick": function(e) {
        if (this.startEvt && ("touchend" === e.type || OpenLayers.Event.isLeftClick(e))) {
            var t = this.getFeatures(this.startEvt);
            delete this.startEvt;
            for (var i, n, r = {}, s = 0, a = t.length; s < a && (i = t[s], n = i.layer, r[n.id] = !0, 
            !1 !== this.triggerEvent("featureclick", {
                "feature": i
            })); ++s) ;
            for (s = 0, a = this.map.layers.length; s < a; ++s) (n = this.map.layers[s]) instanceof OpenLayers.Layer.Vector && !r[n.id] && this.triggerEvent("nofeatureclick", {
                "layer": n
            });
        }
    },
    "onMousemove": function(e) {
        delete this.startEvt;
        var t = e.clientX, i = e.clientY;
        if (this.lastClientX != t || this.lastClientY != i) {
            this.lastClientX = t, this.lastClientY = i;
            for (var n, r = this.getFeatures(e), s = {}, a = [], o = 0, l = r.length; o < l; ++o) s[(n = r[o]).id] = n, 
            this.cache[n.id] || a.push(n);
            var h = [];
            for (var u in this.cache) (n = this.cache[u]).layer && n.layer.map ? s[n.id] || h.push(n) : delete this.cache[u];
            for (o = 0, l = a.length; o < l && (n = a[o], this.cache[n.id] = n, !1 !== this.triggerEvent("featureover", {
                "feature": n
            })); ++o) ;
            for (o = 0, l = h.length; o < l && (n = h[o], delete this.cache[n.id], !1 !== this.triggerEvent("featureout", {
                "feature": n
            })); ++o) ;
        }
    },
    "triggerEvent": function(e, t) {
        var i = t.feature ? t.feature.layer : t.layer, n = this.target.object;
        if (n instanceof OpenLayers.Map || n === i) return this.target.triggerEvent(e, t);
    },
    "getFeatures": function(e) {
        var t, i, n, r, s, a, o, l = e.clientX, h = e.clientY, u = [], p = [], c = [];
        for (s = this.map.layers.length - 1; s >= 0; --s) if (t = this.map.layers[s], i = t.renderer, 
        "none" !== t.div.style.display) if (i instanceof OpenLayers.Renderer.Elements) {
            if (t instanceof OpenLayers.Layer.Vector) for (n = document.elementFromPoint(l, h); n && (o = i.getFeatureIdFromEvent({
                "target": n
            })); ) (r = t.getFeatureById(o)) ? (u.push(r), n.style.display = "none", p.push(n), 
            n = document.elementFromPoint(l, h)) : n = !1;
            c.push(t), t.div.style.display = "none";
        } else i instanceof OpenLayers.Renderer.Canvas && (r = i.getFeatureIdFromEvent(e)) && (u.push(r), 
        c.push(t));
        for (s = 0, a = p.length; s < a; ++s) p[s].style.display = "";
        for (s = c.length - 1; s >= 0; --s) c[s].div.style.display = "block";
        return u;
    },
    "destroy": function() {
        for (var e = this.provides.length - 1; e >= 0; --e) delete this.target.extensions[this.provides[e]];
        this.map.events.un({
            "mousemove": this.onMousemove,
            "mousedown": this.start,
            "mouseup": this.onClick,
            "touchstart": this.start,
            "touchmove": this.cancel,
            "touchend": this.onClick,
            "scope": this
        }), delete this.cache, delete this.map, delete this.target;
    }
}), OpenLayers.Events.nofeatureclick = OpenLayers.Events.featureclick, OpenLayers.Events.featureover = OpenLayers.Events.featureclick, 
OpenLayers.Events.featureout = OpenLayers.Events.featureclick, OpenLayers.Format.ArcXML = OpenLayers.Class(OpenLayers.Format.XML, {
    "fontStyleKeys": [ "antialiasing", "blockout", "font", "fontcolor", "fontsize", "fontstyle", "glowing", "interval", "outline", "printmode", "shadow", "transparency" ],
    "request": null,
    "response": null,
    "initialize": function(e) {
        if (this.request = new OpenLayers.Format.ArcXML.Request(), this.response = new OpenLayers.Format.ArcXML.Response(), 
        e) if ("feature" == e.requesttype) {
            this.request.get_image = null;
            var t = this.request.get_feature.query;
            this.addCoordSys(t.featurecoordsys, e.featureCoordSys), this.addCoordSys(t.filtercoordsys, e.filterCoordSys), 
            e.polygon ? (t.isspatial = !0, t.spatialfilter.polygon = e.polygon) : e.envelope && (t.isspatial = !0, 
            t.spatialfilter.envelope = {
                "minx": 0,
                "miny": 0,
                "maxx": 0,
                "maxy": 0
            }, this.parseEnvelope(t.spatialfilter.envelope, e.envelope));
        } else if ("image" == e.requesttype) {
            this.request.get_feature = null;
            var i = this.request.get_image.properties;
            this.parseEnvelope(i.envelope, e.envelope), this.addLayers(i.layerlist, e.layers), 
            this.addImageSize(i.imagesize, e.tileSize), this.addCoordSys(i.featurecoordsys, e.featureCoordSys), 
            this.addCoordSys(i.filtercoordsys, e.filterCoordSys);
        } else this.request = null;
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "parseEnvelope": function(e, t) {
        t && 4 == t.length && (e.minx = t[0], e.miny = t[1], e.maxx = t[2], e.maxy = t[3]);
    },
    "addLayers": function(e, t) {
        for (var i = 0, n = t.length; i < n; i++) e.push(t[i]);
    },
    "addImageSize": function(e, t) {
        null !== t && (e.width = t.w, e.height = t.h, e.printwidth = t.w, e.printheight = t.h);
    },
    "addCoordSys": function(e, t) {
        "string" == typeof t ? (e.id = parseInt(t), e.string = t) : "object" == typeof t && null !== t.proj ? (e.id = t.proj.srsProjNumber, 
        e.string = t.proj.srsCode) : e = t;
    },
    "iserror": function(e) {
        var t = null;
        if (e) {
            var i = (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])).documentElement.getElementsByTagName("ERROR");
            t = null !== i && i.length > 0;
        } else t = "" !== this.response.error;
        return t;
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var t = null;
        if (e && e.documentElement && (t = "ARCXML" == e.documentElement.nodeName ? e.documentElement : e.documentElement.getElementsByTagName("ARCXML")[0]), 
        !t || "parsererror" === t.firstChild.nodeName) {
            var i, n;
            try {
                i = e.firstChild.nodeValue, n = e.firstChild.childNodes[1].firstChild.nodeValue;
            } catch (e) {}
            throw {
                "message": "Error parsing the ArcXML request",
                "error": i,
                "source": n
            };
        }
        return this.parseResponse(t);
    },
    "write": function(e) {
        e || (e = this.request);
        var t = this.createElementNS("", "ARCXML");
        t.setAttribute("version", "1.1");
        var i = this.createElementNS("", "REQUEST");
        if (null != e.get_image) {
            var n = this.createElementNS("", "GET_IMAGE");
            i.appendChild(n);
            var r = this.createElementNS("", "PROPERTIES");
            n.appendChild(r);
            var s = e.get_image.properties;
            if (null != s.featurecoordsys) {
                var a = this.createElementNS("", "FEATURECOORDSYS");
                r.appendChild(a), 0 === s.featurecoordsys.id ? a.setAttribute("string", s.featurecoordsys.string) : a.setAttribute("id", s.featurecoordsys.id);
            }
            if (null != s.filtercoordsys) {
                var o = this.createElementNS("", "FILTERCOORDSYS");
                r.appendChild(o), 0 === s.filtercoordsys.id ? o.setAttribute("string", s.filtercoordsys.string) : o.setAttribute("id", s.filtercoordsys.id);
            }
            if (null != s.envelope) {
                var l = this.createElementNS("", "ENVELOPE");
                r.appendChild(l), l.setAttribute("minx", s.envelope.minx), l.setAttribute("miny", s.envelope.miny), 
                l.setAttribute("maxx", s.envelope.maxx), l.setAttribute("maxy", s.envelope.maxy);
            }
            var h = this.createElementNS("", "IMAGESIZE");
            if (r.appendChild(h), h.setAttribute("height", s.imagesize.height), h.setAttribute("width", s.imagesize.width), 
            s.imagesize.height == s.imagesize.printheight && s.imagesize.width == s.imagesize.printwidth || (h.setAttribute("printheight", s.imagesize.printheight), 
            h.setArrtibute("printwidth", s.imagesize.printwidth)), null != s.background) {
                var u = this.createElementNS("", "BACKGROUND");
                r.appendChild(u), u.setAttribute("color", s.background.color.r + "," + s.background.color.g + "," + s.background.color.b), 
                null !== s.background.transcolor && u.setAttribute("transcolor", s.background.transcolor.r + "," + s.background.transcolor.g + "," + s.background.transcolor.b);
            }
            if (null != s.layerlist && s.layerlist.length > 0) {
                var p = this.createElementNS("", "LAYERLIST");
                r.appendChild(p);
                for (var c = 0; c < s.layerlist.length; c++) {
                    var d = this.createElementNS("", "LAYERDEF");
                    if (p.appendChild(d), d.setAttribute("id", s.layerlist[c].id), d.setAttribute("visible", s.layerlist[c].visible), 
                    "object" == typeof s.layerlist[c].query) {
                        var f = s.layerlist[c].query;
                        if (f.where.length < 0) continue;
                        var y = null;
                        (y = "boolean" == typeof f.spatialfilter && f.spatialfilter ? this.createElementNS("", "SPATIALQUERY") : this.createElementNS("", "QUERY")).setAttribute("where", f.where), 
                        "number" == typeof f.accuracy && f.accuracy > 0 && y.setAttribute("accuracy", f.accuracy), 
                        "number" == typeof f.featurelimit && f.featurelimit < 2e3 && y.setAttribute("featurelimit", f.featurelimit), 
                        "string" == typeof f.subfields && "#ALL#" != f.subfields && y.setAttribute("subfields", f.subfields), 
                        "string" == typeof f.joinexpression && f.joinexpression.length > 0 && y.setAttribute("joinexpression", f.joinexpression), 
                        "string" == typeof f.jointables && f.jointables.length > 0 && y.setAttribute("jointables", f.jointables), 
                        d.appendChild(y);
                    }
                    "object" == typeof s.layerlist[c].renderer && this.addRenderer(d, s.layerlist[c].renderer);
                }
            }
        } else if (null != e.get_feature) {
            if ((n = this.createElementNS("", "GET_FEATURES")).setAttribute("outputmode", "newxml"), 
            n.setAttribute("checkesc", "true"), e.get_feature.geometry ? n.setAttribute("geometry", e.get_feature.geometry) : n.setAttribute("geometry", "false"), 
            e.get_feature.compact && n.setAttribute("compact", e.get_feature.compact), "number" == e.get_feature.featurelimit && n.setAttribute("featurelimit", e.get_feature.featurelimit), 
            n.setAttribute("globalenvelope", "true"), i.appendChild(n), null != e.get_feature.layer && e.get_feature.layer.length > 0) {
                var m = this.createElementNS("", "LAYER");
                m.setAttribute("id", e.get_feature.layer), n.appendChild(m);
            }
            var g = e.get_feature.query;
            if (null != g) {
                var v = null;
                if (v = g.isspatial ? this.createElementNS("", "SPATIALQUERY") : this.createElementNS("", "QUERY"), 
                n.appendChild(v), "number" == typeof g.accuracy && v.setAttribute("accuracy", g.accuracy), 
                null != g.featurecoordsys) {
                    var L = this.createElementNS("", "FEATURECOORDSYS");
                    0 == g.featurecoordsys.id ? L.setAttribute("string", g.featurecoordsys.string) : L.setAttribute("id", g.featurecoordsys.id), 
                    v.appendChild(L);
                }
                if (null != g.filtercoordsys) {
                    var O = this.createElementNS("", "FILTERCOORDSYS");
                    0 === g.filtercoordsys.id ? O.setAttribute("string", g.filtercoordsys.string) : O.setAttribute("id", g.filtercoordsys.id), 
                    v.appendChild(O);
                }
                if (g.buffer > 0) {
                    var b = this.createElementNS("", "BUFFER");
                    b.setAttribute("distance", g.buffer), v.appendChild(b);
                }
                if (g.isspatial) {
                    var w = this.createElementNS("", "SPATIALFILTER");
                    if (w.setAttribute("relation", g.spatialfilter.relation), v.appendChild(w), g.spatialfilter.envelope) {
                        var C = this.createElementNS("", "ENVELOPE");
                        C.setAttribute("minx", g.spatialfilter.envelope.minx), C.setAttribute("miny", g.spatialfilter.envelope.miny), 
                        C.setAttribute("maxx", g.spatialfilter.envelope.maxx), C.setAttribute("maxy", g.spatialfilter.envelope.maxy), 
                        w.appendChild(C);
                    } else "object" == typeof g.spatialfilter.polygon && w.appendChild(this.writePolygonGeometry(g.spatialfilter.polygon));
                }
                null != g.where && g.where.length > 0 && v.setAttribute("where", g.where);
            }
        }
        return t.appendChild(i), OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "addGroupRenderer": function(e, t) {
        var i = this.createElementNS("", "GROUPRENDERER");
        e.appendChild(i);
        for (var n = 0; n < t.length; n++) {
            var r = t[n];
            this.addRenderer(i, r);
        }
    },
    "addRenderer": function(e, t) {
        if (OpenLayers.Util.isArray(t)) this.addGroupRenderer(e, t); else {
            var i = this.createElementNS("", t.type.toUpperCase() + "RENDERER");
            e.appendChild(i), "VALUEMAPRENDERER" == i.tagName ? this.addValueMapRenderer(i, t) : "VALUEMAPLABELRENDERER" == i.tagName ? this.addValueMapLabelRenderer(i, t) : "SIMPLELABELRENDERER" == i.tagName ? this.addSimpleLabelRenderer(i, t) : "SCALEDEPENDENTRENDERER" == i.tagName && this.addScaleDependentRenderer(i, t);
        }
    },
    "addScaleDependentRenderer": function(e, t) {
        "string" != typeof t.lower && "number" != typeof t.lower || e.setAttribute("lower", t.lower), 
        "string" != typeof t.upper && "number" != typeof t.upper || e.setAttribute("upper", t.upper), 
        this.addRenderer(e, t.renderer);
    },
    "addValueMapLabelRenderer": function(e, t) {
        if (e.setAttribute("lookupfield", t.lookupfield), e.setAttribute("labelfield", t.labelfield), 
        "object" == typeof t.exacts) for (var i = 0, n = t.exacts.length; i < n; i++) {
            var r = t.exacts[i], s = this.createElementNS("", "EXACT");
            if ("string" == typeof r.value && s.setAttribute("value", r.value), "string" == typeof r.label && s.setAttribute("label", r.label), 
            "string" == typeof r.method && s.setAttribute("method", r.method), e.appendChild(s), 
            "object" == typeof r.symbol) {
                var a = null;
                if ("text" == r.symbol.type && (a = this.createElementNS("", "TEXTSYMBOL")), null != a) {
                    for (var o = this.fontStyleKeys, l = 0, h = o.length; l < h; l++) {
                        var u = o[l];
                        r.symbol[u] && a.setAttribute(u, r.symbol[u]);
                    }
                    s.appendChild(a);
                }
            }
        }
    },
    "addValueMapRenderer": function(e, t) {
        if (e.setAttribute("lookupfield", t.lookupfield), "object" == typeof t.ranges) for (var i = 0, n = t.ranges.length; i < n; i++) {
            var r = t.ranges[i], s = this.createElementNS("", "RANGE");
            if (s.setAttribute("lower", r.lower), s.setAttribute("upper", r.upper), e.appendChild(s), 
            "object" == typeof r.symbol) {
                u = null;
                "simplepolygon" == r.symbol.type && (u = this.createElementNS("", "SIMPLEPOLYGONSYMBOL")), 
                null != u && ("string" == typeof r.symbol.boundarycolor && u.setAttribute("boundarycolor", r.symbol.boundarycolor), 
                "string" == typeof r.symbol.fillcolor && u.setAttribute("fillcolor", r.symbol.fillcolor), 
                "number" == typeof r.symbol.filltransparency && u.setAttribute("filltransparency", r.symbol.filltransparency), 
                s.appendChild(u));
            }
        } else if ("object" == typeof t.exacts) for (var a = 0, o = t.exacts.length; a < o; a++) {
            var l = t.exacts[a], h = this.createElementNS("", "EXACT");
            if ("string" == typeof l.value && h.setAttribute("value", l.value), "string" == typeof l.label && h.setAttribute("label", l.label), 
            "string" == typeof l.method && h.setAttribute("method", l.method), e.appendChild(h), 
            "object" == typeof l.symbol) {
                var u = null;
                "simplemarker" == l.symbol.type && (u = this.createElementNS("", "SIMPLEMARKERSYMBOL")), 
                null != u && ("string" == typeof l.symbol.antialiasing && u.setAttribute("antialiasing", l.symbol.antialiasing), 
                "string" == typeof l.symbol.color && u.setAttribute("color", l.symbol.color), "string" == typeof l.symbol.outline && u.setAttribute("outline", l.symbol.outline), 
                "string" == typeof l.symbol.overlap && u.setAttribute("overlap", l.symbol.overlap), 
                "string" == typeof l.symbol.shadow && u.setAttribute("shadow", l.symbol.shadow), 
                "number" == typeof l.symbol.transparency && u.setAttribute("transparency", l.symbol.transparency), 
                "string" == typeof l.symbol.usecentroid && u.setAttribute("usecentroid", l.symbol.usecentroid), 
                "number" == typeof l.symbol.width && u.setAttribute("width", l.symbol.width), h.appendChild(u));
            }
        }
    },
    "addSimpleLabelRenderer": function(e, t) {
        e.setAttribute("field", t.field);
        for (var i = [ "featureweight", "howmanylabels", "labelbufferratio", "labelpriorities", "labelweight", "linelabelposition", "rotationalangles" ], n = 0, r = i.length; n < r; n++) t[o = i[n]] && e.setAttribute(o, t[o]);
        if ("text" == t.symbol.type) {
            var s = t.symbol, a = this.createElementNS("", "TEXTSYMBOL");
            e.appendChild(a);
            for (var n = 0, r = (i = this.fontStyleKeys).length; n < r; n++) {
                var o = i[n];
                s[o] && a.setAttribute(o, t[o]);
            }
        }
    },
    "writePolygonGeometry": function(e) {
        if (!(e instanceof OpenLayers.Geometry.Polygon)) throw {
            "message": "Cannot write polygon geometry to ArcXML with an " + e.CLASS_NAME + " object.",
            "geometry": e
        };
        for (var t = this.createElementNS("", "POLYGON"), i = 0, n = e.components.length; i < n; i++) {
            for (var r = e.components[i], s = this.createElementNS("", "RING"), a = 0, o = r.components.length; a < o; a++) {
                var l = r.components[a], h = this.createElementNS("", "POINT");
                h.setAttribute("x", l.x), h.setAttribute("y", l.y), s.appendChild(h);
            }
            t.appendChild(s);
        }
        return t;
    },
    "parseResponse": function(e) {
        "string" == typeof e && (e = new OpenLayers.Format.XML().read(e));
        var t = new OpenLayers.Format.ArcXML.Response(), i = e.getElementsByTagName("ERROR");
        if (null != i && i.length > 0) t.error = this.getChildValue(i, "Unknown error."); else {
            var n = e.getElementsByTagName("RESPONSE");
            if (null == n || 0 == n.length) return t.error = "No RESPONSE tag found in ArcXML response.", 
            t;
            var r = n[0].firstChild.nodeName;
            if ("#text" == r && (r = n[0].firstChild.nextSibling.nodeName), "IMAGE" == r) {
                var s = e.getElementsByTagName("ENVELOPE"), a = e.getElementsByTagName("OUTPUT");
                if (null == s || 0 == s.length) t.error = "No ENVELOPE tag found in ArcXML response."; else if (null == a || 0 == a.length) t.error = "No OUTPUT tag found in ArcXML response."; else {
                    var o = this.parseAttributes(s[0]), l = this.parseAttributes(a[0]);
                    "string" == typeof l.type ? t.image = {
                        "envelope": o,
                        "output": {
                            "type": l.type,
                            "data": this.getChildValue(a[0])
                        }
                    } : t.image = {
                        "envelope": o,
                        "output": l
                    };
                }
            } else if ("FEATURES" == r) {
                var h = n[0].getElementsByTagName("FEATURES"), u = h[0].getElementsByTagName("FEATURECOUNT");
                if (t.features.featurecount = u[0].getAttribute("count"), t.features.featurecount > 0) {
                    var p = h[0].getElementsByTagName("ENVELOPE");
                    t.features.envelope = this.parseAttributes(p[0], "number");
                    for (var c = h[0].getElementsByTagName("FEATURE"), d = 0; d < c.length; d++) {
                        for (var f = new OpenLayers.Feature.Vector(), y = c[d].getElementsByTagName("FIELD"), m = 0; m < y.length; m++) {
                            var g = y[m].getAttribute("name"), v = y[m].getAttribute("value");
                            f.attributes[g] = v;
                        }
                        var L = c[d].getElementsByTagName("POLYGON");
                        if (L.length > 0) {
                            for (var O = L[0].getElementsByTagName("RING"), b = [], w = 0; w < O.length; w++) {
                                var C = [];
                                C.push(this.parsePointGeometry(O[w]));
                                for (var S = O[w].getElementsByTagName("HOLE"), x = 0; x < S.length; x++) C.push(this.parsePointGeometry(S[x]));
                                S = null, b.push(new OpenLayers.Geometry.Polygon(C)), C = null;
                            }
                            O = null, 1 == b.length ? f.geometry = b[0] : f.geometry = new OpenLayers.Geometry.MultiPolygon(b);
                        }
                        t.features.feature.push(f);
                    }
                }
            } else t.error = "Unidentified response type.";
        }
        return t;
    },
    "parseAttributes": function(e, t) {
        for (var i = {}, n = 0; n < e.attributes.length; n++) i[e.attributes[n].nodeName] = "number" == t ? parseFloat(e.attributes[n].nodeValue) : e.attributes[n].nodeValue;
        return i;
    },
    "parsePointGeometry": function(e) {
        var t = [], i = e.getElementsByTagName("COORDS");
        if (i.length > 0) {
            var n = this.getChildValue(i[0]);
            n = n.split(/;/);
            for (var r = 0; r < n.length; r++) {
                var s = n[r].split(/ /);
                t.push(new OpenLayers.Geometry.Point(s[0], s[1]));
            }
            i = null;
        } else {
            var a = e.getElementsByTagName("POINT");
            if (a.length > 0) for (var o = 0; o < a.length; o++) t.push(new OpenLayers.Geometry.Point(parseFloat(a[o].getAttribute("x")), parseFloat(a[o].getAttribute("y"))));
            a = null;
        }
        return new OpenLayers.Geometry.LinearRing(t);
    },
    "CLASS_NAME": "OpenLayers.Format.ArcXML"
}), OpenLayers.Format.ArcXML.Request = OpenLayers.Class({
    "initialize": function(e) {
        var t = {
            "get_image": {
                "properties": {
                    "background": null,
                    "draw": !0,
                    "envelope": {
                        "minx": 0,
                        "miny": 0,
                        "maxx": 0,
                        "maxy": 0
                    },
                    "featurecoordsys": {
                        "id": 0,
                        "string": "",
                        "datumtransformid": 0,
                        "datumtransformstring": ""
                    },
                    "filtercoordsys": {
                        "id": 0,
                        "string": "",
                        "datumtransformid": 0,
                        "datumtransformstring": ""
                    },
                    "imagesize": {
                        "height": 0,
                        "width": 0,
                        "dpi": 96,
                        "printheight": 0,
                        "printwidth": 0,
                        "scalesymbols": !1
                    },
                    "layerlist": [],
                    "output": {
                        "baseurl": "",
                        "legendbaseurl": "",
                        "legendname": "",
                        "legendpath": "",
                        "legendurl": "",
                        "name": "",
                        "path": "",
                        "type": "jpg",
                        "url": ""
                    }
                }
            },
            "get_feature": {
                "layer": "",
                "query": {
                    "isspatial": !1,
                    "featurecoordsys": {
                        "id": 0,
                        "string": "",
                        "datumtransformid": 0,
                        "datumtransformstring": ""
                    },
                    "filtercoordsys": {
                        "id": 0,
                        "string": "",
                        "datumtransformid": 0,
                        "datumtransformstring": ""
                    },
                    "buffer": 0,
                    "where": "",
                    "spatialfilter": {
                        "relation": "envelope_intersection",
                        "envelope": null
                    }
                }
            },
            "environment": {
                "separators": {
                    "cs": " ",
                    "ts": ";"
                }
            },
            "layer": [],
            "workspaces": []
        };
        return OpenLayers.Util.extend(this, t);
    },
    "CLASS_NAME": "OpenLayers.Format.ArcXML.Request"
}), OpenLayers.Format.ArcXML.Response = OpenLayers.Class({
    "initialize": function(e) {
        var t = {
            "image": {
                "envelope": null,
                "output": ""
            },
            "features": {
                "featurecount": 0,
                "envelope": null,
                "feature": []
            },
            "error": ""
        };
        return OpenLayers.Util.extend(this, t);
    },
    "CLASS_NAME": "OpenLayers.Format.ArcXML.Response"
}), OpenLayers.Format.Atom = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "atom": "http://www.w3.org/2005/Atom",
        "georss": "http://www.georss.org/georss"
    },
    "feedTitle": "untitled",
    "defaultEntryTitle": "untitled",
    "gmlParser": null,
    "xy": !1,
    "read": function(e) {
        return "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        this.parseFeatures(e);
    },
    "write": function(e) {
        var t;
        if (OpenLayers.Util.isArray(e)) {
            (t = this.createElementNSPlus("atom:feed")).appendChild(this.createElementNSPlus("atom:title", {
                "value": this.feedTitle
            }));
            for (var i = 0, n = e.length; i < n; i++) t.appendChild(this.buildEntryNode(e[i]));
        } else t = this.buildEntryNode(e);
        return OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "buildContentNode": function(e) {
        var t = this.createElementNSPlus("atom:content", {
            "attributes": {
                "type": e.type || null
            }
        });
        if (e.src) t.setAttribute("src", e.src); else if ("text" == e.type || null == e.type) t.appendChild(this.createTextNode(e.value)); else if ("html" == e.type) {
            if ("string" != typeof e.value) throw "HTML content must be in form of an escaped string";
            t.appendChild(this.createTextNode(e.value));
        } else "xhtml" == e.type ? t.appendChild(e.value) : "xhtml" == e.type || e.type.match(/(\+|\/)xml$/) ? t.appendChild(e.value) : t.appendChild(this.createTextNode(e.value));
        return t;
    },
    "buildEntryNode": function(e) {
        var t = e.attributes, i = t.atom || {}, n = this.createElementNSPlus("atom:entry");
        if (i.authors) for (var r = OpenLayers.Util.isArray(i.authors) ? i.authors : [ i.authors ], s = 0, a = r.length; s < a; s++) n.appendChild(this.buildPersonConstructNode("author", r[s]));
        if (i.categories) for (var o, l = OpenLayers.Util.isArray(i.categories) ? i.categories : [ i.categories ], s = 0, a = l.length; s < a; s++) o = l[s], 
        n.appendChild(this.createElementNSPlus("atom:category", {
            "attributes": {
                "term": o.term,
                "scheme": o.scheme || null,
                "label": o.label || null
            }
        }));
        if (i.content && n.appendChild(this.buildContentNode(i.content)), i.contributors) for (var h = OpenLayers.Util.isArray(i.contributors) ? i.contributors : [ i.contributors ], s = 0, a = h.length; s < a; s++) n.appendChild(this.buildPersonConstructNode("contributor", h[s]));
        if (e.fid && n.appendChild(this.createElementNSPlus("atom:id", {
            "value": e.fid
        })), i.links) for (var u, p = OpenLayers.Util.isArray(i.links) ? i.links : [ i.links ], s = 0, a = p.length; s < a; s++) u = p[s], 
        n.appendChild(this.createElementNSPlus("atom:link", {
            "attributes": {
                "href": u.href,
                "rel": u.rel || null,
                "type": u.type || null,
                "hreflang": u.hreflang || null,
                "title": u.title || null,
                "length": u.length || null
            }
        }));
        if (i.published && n.appendChild(this.createElementNSPlus("atom:published", {
            "value": i.published
        })), i.rights && n.appendChild(this.createElementNSPlus("atom:rights", {
            "value": i.rights
        })), (i.summary || t.description) && n.appendChild(this.createElementNSPlus("atom:summary", {
            "value": i.summary || t.description
        })), n.appendChild(this.createElementNSPlus("atom:title", {
            "value": i.title || t.title || this.defaultEntryTitle
        })), i.updated && n.appendChild(this.createElementNSPlus("atom:updated", {
            "value": i.updated
        })), e.geometry) {
            var c = this.createElementNSPlus("georss:where");
            c.appendChild(this.buildGeometryNode(e.geometry)), n.appendChild(c);
        }
        return n;
    },
    "initGmlParser": function() {
        this.gmlParser = new OpenLayers.Format.GML.v3({
            "xy": this.xy,
            "featureNS": "http://example.com#feature",
            "internalProjection": this.internalProjection,
            "externalProjection": this.externalProjection
        });
    },
    "buildGeometryNode": function(e) {
        return this.gmlParser || this.initGmlParser(), this.gmlParser.writeNode("feature:_geometry", e).firstChild;
    },
    "buildPersonConstructNode": function(e, t) {
        var i = [ "uri", "email" ], n = this.createElementNSPlus("atom:" + e);
        n.appendChild(this.createElementNSPlus("atom:name", {
            "value": t.name
        }));
        for (var r = 0, s = i.length; r < s; r++) t[i[r]] && n.appendChild(this.createElementNSPlus("atom:" + i[r], {
            "value": t[i[r]]
        }));
        return n;
    },
    "getFirstChildValue": function(e, t, i, n) {
        var r = this.getElementsByTagNameNS(e, t, i);
        return r && r.length > 0 ? this.getChildValue(r[0], n) : n;
    },
    "parseFeature": function(e) {
        var t = {}, i = null, n = null, r = null, s = this.namespaces.atom;
        this.parsePersonConstructs(e, "author", t), (n = this.getElementsByTagNameNS(e, s, "category")).length > 0 && (t.categories = []);
        for (var a = 0, o = n.length; a < o; a++) (i = {}).term = n[a].getAttribute("term"), 
        (r = n[a].getAttribute("scheme")) && (i.scheme = r), (r = n[a].getAttribute("label")) && (i.label = r), 
        t.categories.push(i);
        (n = this.getElementsByTagNameNS(e, s, "content")).length > 0 && (i = {}, (r = n[0].getAttribute("type")) && (i.type = r), 
        (r = n[0].getAttribute("src")) ? i.src = r : ("text" == i.type || "html" == i.type || null == i.type ? i.value = this.getFirstChildValue(e, s, "content", null) : "xhtml" == i.type || i.type.match(/(\+|\/)xml$/) ? i.value = this.getChildEl(n[0]) : i.value = this.getFirstChildValue(e, s, "content", null), 
        t.content = i)), this.parsePersonConstructs(e, "contributor", t), t.id = this.getFirstChildValue(e, s, "id", null), 
        (n = this.getElementsByTagNameNS(e, s, "link")).length > 0 && (t.links = new Array(n.length));
        for (var l = [ "rel", "type", "hreflang", "title", "length" ], a = 0, o = n.length; a < o; a++) {
            (i = {}).href = n[a].getAttribute("href");
            for (var h = 0, u = l.length; h < u; h++) (r = n[a].getAttribute(l[h])) && (i[l[h]] = r);
            t.links[a] = i;
        }
        (i = this.getFirstChildValue(e, s, "published", null)) && (t.published = i), (i = this.getFirstChildValue(e, s, "rights", null)) && (t.rights = i), 
        (i = this.getFirstChildValue(e, s, "summary", null)) && (t.summary = i), t.title = this.getFirstChildValue(e, s, "title", null), 
        t.updated = this.getFirstChildValue(e, s, "updated", null);
        var p = {
            "title": t.title,
            "description": t.summary,
            "atom": t
        }, c = this.parseLocations(e)[0], d = new OpenLayers.Feature.Vector(c, p);
        return d.fid = t.id, d;
    },
    "parseFeatures": function(e) {
        var t = [], i = this.getElementsByTagNameNS(e, this.namespaces.atom, "entry");
        0 == i.length && (i = [ e ]);
        for (var n = 0, r = i.length; n < r; n++) t.push(this.parseFeature(i[n]));
        return t;
    },
    "parseLocations": function(e) {
        var t = this.namespaces.georss, i = {
            "components": []
        }, n = this.getElementsByTagNameNS(e, t, "where");
        if (n && n.length > 0) {
            this.gmlParser || this.initGmlParser();
            for (var r = 0, s = n.length; r < s; r++) this.gmlParser.readChildNodes(n[r], i);
        }
        var a = i.components, o = this.getElementsByTagNameNS(e, t, "point");
        if (o && o.length > 0) for (var r = 0, s = o.length; r < s; r++) {
            var l = OpenLayers.String.trim(o[r].firstChild.nodeValue).split(/\s+/);
            2 != l.length && (l = OpenLayers.String.trim(o[r].firstChild.nodeValue).split(/\s*,\s*/)), 
            a.push(new OpenLayers.Geometry.Point(l[1], l[0]));
        }
        var h = this.getElementsByTagNameNS(e, t, "line");
        if (h && h.length > 0) for (var r = 0, s = h.length; r < s; r++) {
            y = [];
            for (var u = 0, p = (d = OpenLayers.String.trim(h[r].firstChild.nodeValue).split(/\s+/)).length; u < p; u += 2) f = new OpenLayers.Geometry.Point(d[u + 1], d[u]), 
            y.push(f);
            a.push(new OpenLayers.Geometry.LineString(y));
        }
        var c = this.getElementsByTagNameNS(e, t, "polygon");
        if (c && c.length > 0) for (var d, f, y, r = 0, s = c.length; r < s; r++) {
            y = [];
            for (var u = 0, p = (d = OpenLayers.String.trim(c[r].firstChild.nodeValue).split(/\s+/)).length; u < p; u += 2) f = new OpenLayers.Geometry.Point(d[u + 1], d[u]), 
            y.push(f);
            a.push(new OpenLayers.Geometry.Polygon([ new OpenLayers.Geometry.LinearRing(y) ]));
        }
        if (this.internalProjection && this.externalProjection) for (var r = 0, s = a.length; r < s; r++) a[r] && a[r].transform(this.externalProjection, this.internalProjection);
        return a;
    },
    "parsePersonConstructs": function(e, t, i) {
        for (var n = [], r = this.namespaces.atom, s = this.getElementsByTagNameNS(e, r, t), a = [ "uri", "email" ], o = 0, l = s.length; o < l; o++) {
            var h = {};
            h.name = this.getFirstChildValue(s[o], r, "name", null);
            for (var u = 0, p = a.length; u < p; u++) {
                var c = this.getFirstChildValue(s[o], r, a[u], null);
                c && (h[a[u]] = c);
            }
            n.push(h);
        }
        n.length > 0 && (i[t + "s"] = n);
    },
    "CLASS_NAME": "OpenLayers.Format.Atom"
}), OpenLayers.Format.Context = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "layerOptions": null,
    "layerParams": null,
    "read": function(e, t) {
        var i, n = OpenLayers.Format.XML.VersionedOGC.prototype.read.apply(this, arguments);
        if (t && t.map) if (this.context = n, t.map instanceof OpenLayers.Map) i = this.mergeContextToMap(n, t.map); else {
            var r = t.map;
            (OpenLayers.Util.isElement(r) || "string" == typeof r) && (r = {
                "div": r
            }), i = this.contextToMap(n, r);
        } else i = n;
        return i;
    },
    "getLayerFromContext": function(e) {
        var t, i, n = {
            "queryable": e.queryable,
            "visibility": e.visibility,
            "maxExtent": e.maxExtent,
            "metadata": OpenLayers.Util.applyDefaults(e.metadata, {
                "styles": e.styles,
                "formats": e.formats,
                "abstract": e.abstract,
                "dataURL": e.dataURL
            }),
            "numZoomLevels": e.numZoomLevels,
            "units": e.units,
            "isBaseLayer": e.isBaseLayer,
            "opacity": e.opacity,
            "gutter": e.gutter,
            "displayInLayerSwitcher": e.displayInLayerSwitcher,
            "singleTile": e.singleTile,
            "tileSize": e.tileSize ? new OpenLayers.Size(e.tileSize.width, e.tileSize.height) : void 0,
            "minScale": e.minScale || e.maxScaleDenominator,
            "maxScale": e.maxScale || e.minScaleDenominator,
            "srs": e.srs,
            "dimensions": e.dimensions,
            "metadataURL": e.metadataURL,
            "attribution": e.attribution
        };
        this.layerOptions && OpenLayers.Util.applyDefaults(n, this.layerOptions);
        var r = {
            "layers": e.name,
            "transparent": e.transparent,
            "version": e.version
        };
        if (e.formats && e.formats.length > 0) for (r.format = e.formats[0].value, t = 0, 
        i = e.formats.length; t < i; t++) {
            var s = e.formats[t];
            if (1 == s.current) {
                r.format = s.value;
                break;
            }
        }
        if (e.styles && e.styles.length > 0) for (t = 0, i = e.styles.length; t < i; t++) {
            var a = e.styles[t];
            if (1 == a.current) {
                a.href ? r.sld = a.href : a.body ? r.sld_body = a.body : r.styles = a.name;
                break;
            }
        }
        this.layerParams && OpenLayers.Util.applyDefaults(r, this.layerParams);
        var o = null, l = e.service;
        return l == OpenLayers.Format.Context.serviceTypes.WFS ? (n.strategies = [ new OpenLayers.Strategy.BBOX() ], 
        n.protocol = new OpenLayers.Protocol.WFS({
            "url": e.url,
            "featurePrefix": e.name.split(":")[0],
            "featureType": e.name.split(":").pop()
        }), o = new OpenLayers.Layer.Vector(e.title || e.name, n)) : l == OpenLayers.Format.Context.serviceTypes.KML ? (n.strategies = [ new OpenLayers.Strategy.Fixed() ], 
        n.protocol = new OpenLayers.Protocol.HTTP({
            "url": e.url,
            "format": new OpenLayers.Format.KML()
        }), o = new OpenLayers.Layer.Vector(e.title || e.name, n)) : l == OpenLayers.Format.Context.serviceTypes.GML ? (n.strategies = [ new OpenLayers.Strategy.Fixed() ], 
        n.protocol = new OpenLayers.Protocol.HTTP({
            "url": e.url,
            "format": new OpenLayers.Format.GML()
        }), o = new OpenLayers.Layer.Vector(e.title || e.name, n)) : e.features ? (o = new OpenLayers.Layer.Vector(e.title || e.name, n)).addFeatures(e.features) : !0 !== e.categoryLayer && (o = new OpenLayers.Layer.WMS(e.title || e.name, e.url, r, n)), 
        o;
    },
    "getLayersFromContext": function(e) {
        for (var t = [], i = 0, n = e.length; i < n; i++) {
            var r = this.getLayerFromContext(e[i]);
            null !== r && t.push(r);
        }
        return t;
    },
    "contextToMap": function(e, t) {
        (t = OpenLayers.Util.applyDefaults({
            "maxExtent": e.maxExtent,
            "projection": e.projection,
            "units": e.units
        }, t)).maxExtent && (t.maxResolution = t.maxExtent.getWidth() / OpenLayers.Map.TILE_WIDTH);
        var i = {
            "contactInformation": e.contactInformation,
            "abstract": e.abstract,
            "keywords": e.keywords,
            "logo": e.logo,
            "descriptionURL": e.descriptionURL
        };
        t.metadata = i;
        var n = new OpenLayers.Map(t);
        return n.addLayers(this.getLayersFromContext(e.layersContext)), n.setCenter(e.bounds.getCenterLonLat(), n.getZoomForExtent(e.bounds, !0)), 
        n;
    },
    "mergeContextToMap": function(e, t) {
        return t.addLayers(this.getLayersFromContext(e.layersContext)), t;
    },
    "write": function(e, t) {
        return e = this.toContext(e), OpenLayers.Format.XML.VersionedOGC.prototype.write.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Format.Context"
}), OpenLayers.Format.Context.serviceTypes = {
    "WMS": "urn:ogc:serviceType:WMS",
    "WFS": "urn:ogc:serviceType:WFS",
    "WCS": "urn:ogc:serviceType:WCS",
    "GML": "urn:ogc:serviceType:GML",
    "SLD": "urn:ogc:serviceType:SLD",
    "FES": "urn:ogc:serviceType:FES",
    "KML": "urn:ogc:serviceType:KML"
}, OpenLayers.Format.CQL = function() {
    function e(e, t) {
        return t instanceof RegExp ? t.exec(e) : t(e);
    }
    function t(t, i) {
        var n, r, a = i.length;
        for (n = 0; n < a; n++) {
            r = i[n];
            var o = e(t, s[r]);
            if (o) {
                var l = o[0];
                return {
                    "type": r,
                    "text": l,
                    "remainder": t.substr(l.length).replace(/^\s*/, "")
                };
            }
        }
        var h = "ERROR: In parsing: [" + t + "], expected one of: ";
        for (n = 0; n < a; n++) h += "\n    " + (r = i[n]) + ": " + s[r];
        throw new Error(h);
    }
    function i(e) {
        var i, n = [], r = [ "NOT", "GEOMETRY", "SPATIAL", "PROPERTY", "LPAREN" ];
        do {
            if (i = t(e, r), e = i.remainder, r = a[i.type], "END" != i.type && !r) throw new Error("No follows list for " + i.type);
            n.push(i);
        } while ("END" != i.type);
        return n;
    }
    function n(e) {
        function t() {
            var e = n.pop();
            switch (e.type) {
              case "LOGICAL":
                var i = t(), r = t();
                return new OpenLayers.Filter.Logical({
                    "filters": [ r, i ],
                    "type": h[e.text.toUpperCase()]
                });

              case "NOT":
                var s = t();
                return new OpenLayers.Filter.Logical({
                    "filters": [ s ],
                    "type": OpenLayers.Filter.Logical.NOT
                });

              case "BETWEEN":
                var a, l;
                return n.pop(), l = t(), a = t(), p = t(), new OpenLayers.Filter.Comparison({
                    "property": p,
                    "lowerBoundary": a,
                    "upperBoundary": l,
                    "type": OpenLayers.Filter.Comparison.BETWEEN
                });

              case "COMPARISON":
                var u = t(), p = t();
                return new OpenLayers.Filter.Comparison({
                    "property": p,
                    "value": u,
                    "type": o[e.text.toUpperCase()]
                });

              case "IS_NULL":
                p = t();
                return new OpenLayers.Filter.Comparison({
                    "property": p,
                    "type": o[e.text.toUpperCase()]
                });

              case "VALUE":
                var c = e.text.match(/^'(.*)'$/);
                return c ? c[1].replace(/''/g, "'") : Number(e.text);

              case "SPATIAL":
                switch (e.text.toUpperCase()) {
                  case "BBOX":
                    var d = t(), f = t(), y = t(), m = t(), g = t();
                    return new OpenLayers.Filter.Spatial({
                        "type": OpenLayers.Filter.Spatial.BBOX,
                        "property": g,
                        "value": OpenLayers.Bounds.fromArray([ m, y, f, d ])
                    });

                  case "INTERSECTS":
                    var u = t(), p = t();
                    return new OpenLayers.Filter.Spatial({
                        "type": OpenLayers.Filter.Spatial.INTERSECTS,
                        "property": p,
                        "value": u
                    });

                  case "WITHIN":
                    var u = t(), p = t();
                    return new OpenLayers.Filter.Spatial({
                        "type": OpenLayers.Filter.Spatial.WITHIN,
                        "property": p,
                        "value": u
                    });

                  case "CONTAINS":
                    var u = t(), p = t();
                    return new OpenLayers.Filter.Spatial({
                        "type": OpenLayers.Filter.Spatial.CONTAINS,
                        "property": p,
                        "value": u
                    });

                  case "DWITHIN":
                    var v = t(), u = t(), p = t();
                    return new OpenLayers.Filter.Spatial({
                        "type": OpenLayers.Filter.Spatial.DWITHIN,
                        "value": u,
                        "property": p,
                        "distance": Number(v)
                    });
                }

              case "GEOMETRY":
                return OpenLayers.Geometry.fromWKT(e.text);

              default:
                return e.text;
            }
        }
        for (var i = [], n = []; e.length; ) {
            var r = e.shift();
            switch (r.type) {
              case "PROPERTY":
              case "GEOMETRY":
              case "VALUE":
                n.push(r);
                break;

              case "COMPARISON":
              case "BETWEEN":
              case "IS_NULL":
              case "LOGICAL":
                for (var s = p[r.type]; i.length > 0 && p[i[i.length - 1].type] <= s; ) n.push(i.pop());
                i.push(r);
                break;

              case "SPATIAL":
              case "NOT":
              case "LPAREN":
                i.push(r);
                break;

              case "RPAREN":
                for (;i.length > 0 && "LPAREN" != i[i.length - 1].type; ) n.push(i.pop());
                i.pop(), i.length > 0 && "SPATIAL" == i[i.length - 1].type && n.push(i.pop());

              case "COMMA":
              case "END":
                break;

              default:
                throw new Error("Unknown token type " + r.type);
            }
        }
        for (;i.length > 0; ) n.push(i.pop());
        var a = t();
        if (n.length > 0) {
            for (var l = "Remaining tokens after building AST: \n", u = n.length - 1; u >= 0; u--) l += n[u].type + ": " + n[u].text + "\n";
            throw new Error(l);
        }
        return a;
    }
    var r, s = {
        "PROPERTY": /^[_a-zA-Z]\w*/,
        "COMPARISON": /^(=|<>|<=|<|>=|>|LIKE)/i,
        "IS_NULL": /^IS NULL/i,
        "COMMA": /^,/,
        "LOGICAL": /^(AND|OR)/i,
        "VALUE": /^('([^']|'')*'|-?\d+(\.\d*)?|\.\d+)/,
        "LPAREN": /^\(/,
        "RPAREN": /^\)/,
        "SPATIAL": /^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)/i,
        "NOT": /^NOT/i,
        "BETWEEN": /^BETWEEN/i,
        "GEOMETRY": function(e) {
            var t = /^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)/.exec(e);
            if (t) {
                var i = e.length, n = e.indexOf("(", t[0].length);
                if (n > -1) for (var r = 1; n < i && r > 0; ) switch (n++, e.charAt(n)) {
                  case "(":
                    r++;
                    break;

                  case ")":
                    r--;
                }
                return [ e.substr(0, n + 1) ];
            }
        },
        "END": /^$/
    }, a = {
        "LPAREN": [ "GEOMETRY", "SPATIAL", "PROPERTY", "VALUE", "LPAREN" ],
        "RPAREN": [ "NOT", "LOGICAL", "END", "RPAREN" ],
        "PROPERTY": [ "COMPARISON", "BETWEEN", "COMMA", "IS_NULL" ],
        "BETWEEN": [ "VALUE" ],
        "IS_NULL": [ "END" ],
        "COMPARISON": [ "VALUE" ],
        "COMMA": [ "GEOMETRY", "VALUE", "PROPERTY" ],
        "VALUE": [ "LOGICAL", "COMMA", "RPAREN", "END" ],
        "SPATIAL": [ "LPAREN" ],
        "LOGICAL": [ "NOT", "VALUE", "SPATIAL", "PROPERTY", "LPAREN" ],
        "NOT": [ "PROPERTY", "LPAREN" ],
        "GEOMETRY": [ "COMMA", "RPAREN" ]
    }, o = {
        "=": OpenLayers.Filter.Comparison.EQUAL_TO,
        "<>": OpenLayers.Filter.Comparison.NOT_EQUAL_TO,
        "<": OpenLayers.Filter.Comparison.LESS_THAN,
        "<=": OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO,
        ">": OpenLayers.Filter.Comparison.GREATER_THAN,
        ">=": OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO,
        "LIKE": OpenLayers.Filter.Comparison.LIKE,
        "BETWEEN": OpenLayers.Filter.Comparison.BETWEEN,
        "IS NULL": OpenLayers.Filter.Comparison.IS_NULL
    }, l = {}, h = {
        "AND": OpenLayers.Filter.Logical.AND,
        "OR": OpenLayers.Filter.Logical.OR
    }, u = {}, p = {
        "RPAREN": 3,
        "LOGICAL": 2,
        "COMPARISON": 1
    };
    for (r in o) o.hasOwnProperty(r) && (l[o[r]] = r);
    for (r in h) h.hasOwnProperty(r) && (u[h[r]] = r);
    return OpenLayers.Class(OpenLayers.Format, {
        "read": function(e) {
            var t = n(i(e));
            return this.keepData && (this.data = t), t;
        },
        "write": function(e) {
            if (e instanceof OpenLayers.Geometry) return e.toString();
            switch (e.CLASS_NAME) {
              case "OpenLayers.Filter.Spatial":
                switch (e.type) {
                  case OpenLayers.Filter.Spatial.BBOX:
                    return "BBOX(" + e.property + "," + e.value.toBBOX() + ")";

                  case OpenLayers.Filter.Spatial.DWITHIN:
                    return "DWITHIN(" + e.property + ", " + this.write(e.value) + ", " + e.distance + ")";

                  case OpenLayers.Filter.Spatial.WITHIN:
                    return "WITHIN(" + e.property + ", " + this.write(e.value) + ")";

                  case OpenLayers.Filter.Spatial.INTERSECTS:
                    return "INTERSECTS(" + e.property + ", " + this.write(e.value) + ")";

                  case OpenLayers.Filter.Spatial.CONTAINS:
                    return "CONTAINS(" + e.property + ", " + this.write(e.value) + ")";

                  default:
                    throw new Error("Unknown spatial filter type: " + e.type);
                }

              case "OpenLayers.Filter.Logical":
                if (e.type == OpenLayers.Filter.Logical.NOT) return "NOT (" + this.write(e.filters[0]) + ")";
                for (var t = "(", i = !0, n = 0; n < e.filters.length; n++) i ? i = !1 : t += ") " + u[e.type] + " (", 
                t += this.write(e.filters[n]);
                return t + ")";

              case "OpenLayers.Filter.Comparison":
                return e.type == OpenLayers.Filter.Comparison.BETWEEN ? e.property + " BETWEEN " + this.write(e.lowerBoundary) + " AND " + this.write(e.upperBoundary) : null !== e.value ? e.property + " " + l[e.type] + " " + this.write(e.value) : e.property + " " + l[e.type];

              case void 0:
                if ("string" == typeof e) return "'" + e.replace(/'/g, "''") + "'";
                if ("number" == typeof e) return String(e);

              default:
                throw new Error("Can't encode: " + e.CLASS_NAME + " " + e);
            }
        },
        "CLASS_NAME": "OpenLayers.Format.CQL"
    });
}(), OpenLayers.Format.CSWGetDomain = function(e) {
    e = OpenLayers.Util.applyDefaults(e, OpenLayers.Format.CSWGetDomain.DEFAULTS);
    var t = OpenLayers.Format.CSWGetDomain["v" + e.version.replace(/\./g, "_")];
    if (!t) throw "Unsupported CSWGetDomain version: " + e.version;
    return new t(e);
}, OpenLayers.Format.CSWGetDomain.DEFAULTS = {
    "version": "2.0.2"
}, OpenLayers.Format.CSWGetRecords = function(e) {
    e = OpenLayers.Util.applyDefaults(e, OpenLayers.Format.CSWGetRecords.DEFAULTS);
    var t = OpenLayers.Format.CSWGetRecords["v" + e.version.replace(/\./g, "_")];
    if (!t) throw "Unsupported CSWGetRecords version: " + e.version;
    return new t(e);
}, OpenLayers.Format.CSWGetRecords.DEFAULTS = {
    "version": "2.0.2"
}, OpenLayers.Format.EncodedPolyline = OpenLayers.Class(OpenLayers.Format, {
    "geometryType": "linestring",
    "initialize": function(e) {
        OpenLayers.Format.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        var t;
        if ("linestring" == this.geometryType) t = OpenLayers.Geometry.LineString; else if ("linearring" == this.geometryType) t = OpenLayers.Geometry.LinearRing; else if ("multipoint" == this.geometryType) t = OpenLayers.Geometry.MultiPoint; else if ("point" != this.geometryType && "polygon" != this.geometryType) return null;
        for (var i = this.decodeDeltas(e, 2), n = i.length, r = [], s = 0; s + 1 < n; ) {
            var a = i[s++], o = i[s++];
            r.push(new OpenLayers.Geometry.Point(o, a));
        }
        return "point" == this.geometryType ? new OpenLayers.Feature.Vector(r[0]) : "polygon" == this.geometryType ? new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([ new OpenLayers.Geometry.LinearRing(r) ])) : new OpenLayers.Feature.Vector(new t(r));
    },
    "decode": function(e, t, i) {
        for (var n = i || 1e5, r = this.decodeDeltas(e, t, n), s = r.length, a = [], o = 0; o + (t - 1) < s; ) {
            for (var l = [], h = 0; h < t; ++h) l.push(r[o++]);
            a.push(l);
        }
        return a;
    },
    "write": function(e) {
        var t, i, n = (t = e.constructor == Array ? e[0] : e).geometry, r = n.CLASS_NAME.split(".")[2].toLowerCase();
        if ("point" == r) i = new Array(n); else if ("linestring" == r || "linearring" == r || "multipoint" == r) i = n.components; else {
            if ("polygon" != r) return null;
            i = n.components[0].components;
        }
        for (var s = [], a = i.length, o = 0; o < a; ++o) {
            var l = i[o];
            s.push(l.y), s.push(l.x);
        }
        return this.encodeDeltas(s, 2);
    },
    "encode": function(e, t, i) {
        for (var n = i || 1e5, r = [], s = e.length, a = 0; a < s; ++a) for (var o = e[a], l = 0; l < t; ++l) r.push(o[l]);
        return this.encodeDeltas(r, t, n);
    },
    "encodeDeltas": function(e, t, i) {
        var n, r = i || 1e5, s = new Array(t);
        for (n = 0; n < t; ++n) s[n] = 0;
        for (var a = e.length, o = 0; o < a; ) for (n = 0; n < t; ++n, ++o) {
            var l = e[o], h = l - s[n];
            s[n] = l, e[o] = h;
        }
        return this.encodeFloats(e, r);
    },
    "decodeDeltas": function(e, t, i) {
        var n, r = i || 1e5, s = new Array(t);
        for (n = 0; n < t; ++n) s[n] = 0;
        for (var a = this.decodeFloats(e, r), o = a.length, l = 0; l < o; ) for (n = 0; n < t; ++n, 
        ++l) s[n] += a[l], a[l] = s[n];
        return a;
    },
    "encodeFloats": function(e, t) {
        for (var i = t || 1e5, n = e.length, r = 0; r < n; ++r) e[r] = Math.round(e[r] * i);
        return this.encodeSignedIntegers(e);
    },
    "decodeFloats": function(e, t) {
        for (var i = t || 1e5, n = this.decodeSignedIntegers(e), r = n.length, s = 0; s < r; ++s) n[s] /= i;
        return n;
    },
    "encodeSignedIntegers": function(e) {
        for (var t = e.length, i = 0; i < t; ++i) {
            var n = e[i], r = n << 1;
            n < 0 && (r = ~r), e[i] = r;
        }
        return this.encodeUnsignedIntegers(e);
    },
    "decodeSignedIntegers": function(e) {
        for (var t = this.decodeUnsignedIntegers(e), i = t.length, n = 0; n < i; ++n) {
            var r = t[n];
            t[n] = 1 & r ? ~(r >> 1) : r >> 1;
        }
        return t;
    },
    "encodeUnsignedIntegers": function(e) {
        for (var t = "", i = e.length, n = 0; n < i; ++n) t += this.encodeUnsignedInteger(e[n]);
        return t;
    },
    "decodeUnsignedIntegers": function(e) {
        for (var t = [], i = 0, n = 0, r = e.length, s = 0; s < r; ++s) {
            var a = e.charCodeAt(s) - 63;
            i |= (31 & a) << n, a < 32 ? (t.push(i), i = 0, n = 0) : n += 5;
        }
        return t;
    },
    "encodeFloat": function(e, t) {
        return e = Math.round(e * (t || 1e5)), this.encodeSignedInteger(e);
    },
    "decodeFloat": function(e, t) {
        return this.decodeSignedInteger(e) / (t || 1e5);
    },
    "encodeSignedInteger": function(e) {
        var t = e << 1;
        return e < 0 && (t = ~t), this.encodeUnsignedInteger(t);
    },
    "decodeSignedInteger": function(e) {
        var t = this.decodeUnsignedInteger(e);
        return 1 & t ? ~(t >> 1) : t >> 1;
    },
    "encodeUnsignedInteger": function(e) {
        for (var t, i = ""; e >= 32; ) t = 63 + (32 | 31 & e), i += String.fromCharCode(t), 
        e >>= 5;
        return t = e + 63, i += String.fromCharCode(t);
    },
    "decodeUnsignedInteger": function(e) {
        for (var t = 0, i = 0, n = e.length, r = 0; r < n; ++r) {
            var s = e.charCodeAt(r) - 63;
            if (t |= (31 & s) << i, s < 32) break;
            i += 5;
        }
        return t;
    },
    "CLASS_NAME": "OpenLayers.Format.EncodedPolyline"
}), OpenLayers.Format.GeoRSS = OpenLayers.Class(OpenLayers.Format.XML, {
    "rssns": "http://backend.userland.com/rss2",
    "featureNS": "http://mapserver.gis.umn.edu/mapserver",
    "georssns": "http://www.georss.org/georss",
    "geons": "http://www.w3.org/2003/01/geo/wgs84_pos#",
    "featureTitle": "Untitled",
    "featureDescription": "No Description",
    "gmlParser": null,
    "xy": !1,
    "createGeometryFromItem": function(e) {
        var t = this.getElementsByTagNameNS(e, this.georssns, "point"), i = this.getElementsByTagNameNS(e, this.geons, "lat"), n = this.getElementsByTagNameNS(e, this.geons, "long"), r = this.getElementsByTagNameNS(e, this.georssns, "line"), s = this.getElementsByTagNameNS(e, this.georssns, "polygon"), a = this.getElementsByTagNameNS(e, this.georssns, "where"), o = this.getElementsByTagNameNS(e, this.georssns, "box");
        if (t.length > 0 || i.length > 0 && n.length > 0) {
            var l;
            t.length > 0 ? 2 != (l = OpenLayers.String.trim(t[0].firstChild.nodeValue).split(/\s+/)).length && (l = OpenLayers.String.trim(t[0].firstChild.nodeValue).split(/\s*,\s*/)) : l = [ parseFloat(i[0].firstChild.nodeValue), parseFloat(n[0].firstChild.nodeValue) ];
            var h = new OpenLayers.Geometry.Point(l[1], l[0]);
        } else if (r.length > 0) {
            for (var u = [], p = 0, c = (d = OpenLayers.String.trim(this.getChildValue(r[0])).split(/\s+/)).length; p < c; p += 2) t = new OpenLayers.Geometry.Point(d[p + 1], d[p]), 
            u.push(t);
            h = new OpenLayers.Geometry.LineString(u);
        } else if (s.length > 0) {
            for (var u = [], p = 0, c = (d = OpenLayers.String.trim(this.getChildValue(s[0])).split(/\s+/)).length; p < c; p += 2) t = new OpenLayers.Geometry.Point(d[p + 1], d[p]), 
            u.push(t);
            h = new OpenLayers.Geometry.Polygon([ new OpenLayers.Geometry.LinearRing(u) ]);
        } else if (a.length > 0) this.gmlParser || (this.gmlParser = new OpenLayers.Format.GML({
            "xy": this.xy
        })), h = this.gmlParser.parseFeature(a[0]).geometry; else if (o.length > 0) {
            var d = OpenLayers.String.trim(o[0].firstChild.nodeValue).split(/\s+/), u = [];
            d.length > 3 && (t = new OpenLayers.Geometry.Point(d[1], d[0]), u.push(t), t = new OpenLayers.Geometry.Point(d[1], d[2]), 
            u.push(t), t = new OpenLayers.Geometry.Point(d[3], d[2]), u.push(t), t = new OpenLayers.Geometry.Point(d[3], d[0]), 
            u.push(t), t = new OpenLayers.Geometry.Point(d[1], d[0]), u.push(t)), h = new OpenLayers.Geometry.Polygon([ new OpenLayers.Geometry.LinearRing(u) ]);
        }
        return h && this.internalProjection && this.externalProjection && h.transform(this.externalProjection, this.internalProjection), 
        h;
    },
    "createFeatureFromItem": function(e) {
        var t = this.createGeometryFromItem(e), i = this._getChildValue(e, "*", "title", this.featureTitle), n = this._getChildValue(e, "*", "description", this._getChildValue(e, "*", "content", this._getChildValue(e, "*", "summary", this.featureDescription))), r = this._getChildValue(e, "*", "link");
        if (!r) try {
            r = this.getElementsByTagNameNS(e, "*", "link")[0].getAttribute("href");
        } catch (e) {
            r = null;
        }
        var s = this._getChildValue(e, "*", "id", null), a = {
            "title": i,
            "description": n,
            "link": r
        }, o = new OpenLayers.Feature.Vector(t, a);
        return o.fid = s, o;
    },
    "_getChildValue": function(e, t, i, n) {
        var r = this.getElementsByTagNameNS(e, t, i);
        return r && r[0] && r[0].firstChild && r[0].firstChild.nodeValue ? this.getChildValue(r[0]) : void 0 == n ? "" : n;
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var t = null;
        0 == (t = this.getElementsByTagNameNS(e, "*", "item")).length && (t = this.getElementsByTagNameNS(e, "*", "entry"));
        for (var i = t.length, n = new Array(i), r = 0; r < i; r++) n[r] = this.createFeatureFromItem(t[r]);
        return n;
    },
    "write": function(e) {
        var t;
        if (OpenLayers.Util.isArray(e)) {
            t = this.createElementNS(this.rssns, "rss");
            for (var i = 0, n = e.length; i < n; i++) t.appendChild(this.createFeatureXML(e[i]));
        } else t = this.createFeatureXML(e);
        return OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "createFeatureXML": function(e) {
        var t = this.buildGeometryNode(e.geometry), i = this.createElementNS(this.rssns, "item"), n = this.createElementNS(this.rssns, "title");
        n.appendChild(this.createTextNode(e.attributes.title ? e.attributes.title : ""));
        var r = this.createElementNS(this.rssns, "description");
        if (r.appendChild(this.createTextNode(e.attributes.description ? e.attributes.description : "")), 
        i.appendChild(n), i.appendChild(r), e.attributes.link) {
            var s = this.createElementNS(this.rssns, "link");
            s.appendChild(this.createTextNode(e.attributes.link)), i.appendChild(s);
        }
        for (var a in e.attributes) if ("link" != a && "title" != a && "description" != a) {
            var o = this.createTextNode(e.attributes[a]), l = a;
            -1 != a.search(":") && (l = a.split(":")[1]);
            var h = this.createElementNS(this.featureNS, "feature:" + l);
            h.appendChild(o), i.appendChild(h);
        }
        return i.appendChild(t), i;
    },
    "buildGeometryNode": function(e) {
        this.internalProjection && this.externalProjection && (e = e.clone()).transform(this.internalProjection, this.externalProjection);
        var t;
        if ("OpenLayers.Geometry.Polygon" == e.CLASS_NAME) (t = this.createElementNS(this.georssns, "georss:polygon")).appendChild(this.buildCoordinatesNode(e.components[0])); else if ("OpenLayers.Geometry.LineString" == e.CLASS_NAME) (t = this.createElementNS(this.georssns, "georss:line")).appendChild(this.buildCoordinatesNode(e)); else {
            if ("OpenLayers.Geometry.Point" != e.CLASS_NAME) throw "Couldn't parse " + e.CLASS_NAME;
            (t = this.createElementNS(this.georssns, "georss:point")).appendChild(this.buildCoordinatesNode(e));
        }
        return t;
    },
    "buildCoordinatesNode": function(e) {
        var t = null;
        e.components && (t = e.components);
        var i;
        if (t) {
            for (var n = t.length, r = new Array(n), s = 0; s < n; s++) r[s] = t[s].y + " " + t[s].x;
            i = r.join(" ");
        } else i = e.y + " " + e.x;
        return this.createTextNode(i);
    },
    "CLASS_NAME": "OpenLayers.Format.GeoRSS"
}), OpenLayers.Format.GPX = OpenLayers.Class(OpenLayers.Format.XML, {
    "defaultDesc": "No description available",
    "extractWaypoints": !0,
    "extractTracks": !0,
    "extractRoutes": !0,
    "extractAttributes": !0,
    "namespaces": {
        "gpx": "http://www.topografix.com/GPX/1/1",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "schemaLocation": "http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",
    "creator": "OpenLayers",
    "initialize": function(e) {
        this.externalProjection = new OpenLayers.Projection("EPSG:4326"), OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var t = [];
        if (this.extractTracks) for (var i = e.getElementsByTagName("trk"), n = 0, r = i.length; n < r; n++) {
            y = {};
            this.extractAttributes && (y = this.parseAttributes(i[n]));
            for (var s = this.getElementsByTagNameNS(i[n], i[n].namespaceURI, "trkseg"), a = 0, o = s.length; a < o; a++) {
                var l = this.extractSegment(s[a], "trkpt");
                t.push(new OpenLayers.Feature.Vector(l, y));
            }
        }
        if (this.extractRoutes) for (var h = e.getElementsByTagName("rte"), u = 0, p = h.length; u < p; u++) {
            y = {};
            this.extractAttributes && (y = this.parseAttributes(h[u]));
            var c = this.extractSegment(h[u], "rtept");
            t.push(new OpenLayers.Feature.Vector(c, y));
        }
        if (this.extractWaypoints) for (var d = e.getElementsByTagName("wpt"), f = 0, r = d.length; f < r; f++) {
            var y = {};
            this.extractAttributes && (y = this.parseAttributes(d[f]));
            var m = new OpenLayers.Geometry.Point(d[f].getAttribute("lon"), d[f].getAttribute("lat"));
            t.push(new OpenLayers.Feature.Vector(m, y));
        }
        if (this.internalProjection && this.externalProjection) for (var g = 0, v = t.length; g < v; g++) t[g].geometry.transform(this.externalProjection, this.internalProjection);
        return t;
    },
    "extractSegment": function(e, t) {
        for (var i = this.getElementsByTagNameNS(e, e.namespaceURI, t), n = [], r = 0, s = i.length; r < s; r++) n.push(new OpenLayers.Geometry.Point(i[r].getAttribute("lon"), i[r].getAttribute("lat")));
        return new OpenLayers.Geometry.LineString(n);
    },
    "parseAttributes": function(e) {
        for (var t, i, n = {}, r = e.firstChild; r; ) 1 == r.nodeType && r.firstChild && (3 != (t = r.firstChild).nodeType && 4 != t.nodeType || "trkseg" != (i = r.prefix ? r.nodeName.split(":")[1] : r.nodeName) && "rtept" != i && (n[i] = t.nodeValue)), 
        r = r.nextSibling;
        return n;
    },
    "write": function(e, t) {
        e = OpenLayers.Util.isArray(e) ? e : [ e ];
        var i = this.createElementNS(this.namespaces.gpx, "gpx");
        i.setAttribute("version", "1.1"), i.setAttribute("creator", this.creator), this.setAttributes(i, {
            "xsi:schemaLocation": this.schemaLocation
        }), t && "object" == typeof t && i.appendChild(this.buildMetadataNode(t));
        for (var n = 0, r = e.length; n < r; n++) i.appendChild(this.buildFeatureNode(e[n]));
        return OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "buildMetadataNode": function(e) {
        for (var t = [ "name", "desc", "author" ], i = this.createElementNS(this.namespaces.gpx, "metadata"), n = 0; n < t.length; n++) {
            var r = t[n];
            if (e[r]) {
                var s = this.createElementNS(this.namespaces.gpx, r);
                s.appendChild(this.createTextNode(e[r])), i.appendChild(s);
            }
        }
        return i;
    },
    "buildFeatureNode": function(e) {
        var t = e.geometry;
        if (t = t.clone(), this.internalProjection && this.externalProjection && t.transform(this.internalProjection, this.externalProjection), 
        "OpenLayers.Geometry.Point" == t.CLASS_NAME) {
            var i = this.buildWptNode(t);
            return this.appendAttributesNode(i, e), i;
        }
        var n = this.createElementNS(this.namespaces.gpx, "trk");
        this.appendAttributesNode(n, e);
        for (var r = this.buildTrkSegNode(t), s = 0, a = (r = OpenLayers.Util.isArray(r) ? r : [ r ]).length; s < a; s++) n.appendChild(r[s]);
        return n;
    },
    "buildTrkSegNode": function(e) {
        var t, i, n, r, s;
        if ("OpenLayers.Geometry.LineString" == e.CLASS_NAME || "OpenLayers.Geometry.LinearRing" == e.CLASS_NAME) {
            for (t = this.createElementNS(this.namespaces.gpx, "trkseg"), i = 0, n = e.components.length; i < n; i++) r = e.components[i], 
            t.appendChild(this.buildTrkPtNode(r));
            return t;
        }
        for (s = [], i = 0, n = e.components.length; i < n; i++) s.push(this.buildTrkSegNode(e.components[i]));
        return s;
    },
    "buildTrkPtNode": function(e) {
        var t = this.createElementNS(this.namespaces.gpx, "trkpt");
        return t.setAttribute("lon", e.x), t.setAttribute("lat", e.y), t;
    },
    "buildWptNode": function(e) {
        var t = this.createElementNS(this.namespaces.gpx, "wpt");
        return t.setAttribute("lon", e.x), t.setAttribute("lat", e.y), t;
    },
    "appendAttributesNode": function(e, t) {
        var i = this.createElementNS(this.namespaces.gpx, "name");
        i.appendChild(this.createTextNode(t.attributes.name || t.id)), e.appendChild(i);
        var n = this.createElementNS(this.namespaces.gpx, "desc");
        n.appendChild(this.createTextNode(t.attributes.description || t.attributes.desc || this.defaultDesc)), 
        e.appendChild(n);
    },
    "CLASS_NAME": "OpenLayers.Format.GPX"
}), OpenLayers.Format.KML = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "kml": "http://www.opengis.net/kml/2.2",
        "gx": "http://www.google.com/kml/ext/2.2"
    },
    "kmlns": "http://earth.google.com/kml/2.0",
    "placemarksDesc": "No description available",
    "foldersName": "OpenLayers export",
    "foldersDesc": "Exported on " + new Date(),
    "extractAttributes": !0,
    "kvpAttributes": !1,
    "extractStyles": !1,
    "extractTracks": !1,
    "trackAttributes": null,
    "internalns": null,
    "features": null,
    "styles": null,
    "styleBaseUrl": "",
    "fetched": null,
    "maxDepth": 0,
    "initialize": function(e) {
        this.regExes = {
            "trimSpace": /^\s*|\s*$/g,
            "removeSpace": /\s*/g,
            "splitSpace": /\s+/,
            "trimComma": /\s*,\s*/g,
            "kmlColor": /(\w{2})(\w{2})(\w{2})(\w{2})/,
            "kmlIconPalette": /root:\/\/icons\/palette-(\d+)(\.\w+)/,
            "straightBracket": /\$\[(.*?)\]/g
        }, this.externalProjection = new OpenLayers.Projection("EPSG:4326"), OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        this.features = [], this.styles = {}, this.fetched = {};
        var t = {
            "depth": 0,
            "styleBaseUrl": this.styleBaseUrl
        };
        return this.parseData(e, t);
    },
    "parseData": function(e, t) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        for (var i = [ "Link", "NetworkLink", "Style", "StyleMap", "Placemark" ], n = 0, r = i.length; n < r; ++n) {
            var s = i[n], a = this.getElementsByTagNameNS(e, "*", s);
            if (0 != a.length) switch (s.toLowerCase()) {
              case "link":
              case "networklink":
                this.parseLinks(a, t);
                break;

              case "style":
                this.extractStyles && this.parseStyles(a, t);
                break;

              case "stylemap":
                this.extractStyles && this.parseStyleMaps(a, t);
                break;

              case "placemark":
                this.parseFeatures(a, t);
            }
        }
        return this.features;
    },
    "parseLinks": function(e, t) {
        if (t.depth >= this.maxDepth) return !1;
        var i = OpenLayers.Util.extend({}, t);
        i.depth++;
        for (var n = 0, r = e.length; n < r; n++) {
            var s = this.parseProperty(e[n], "*", "href");
            if (s && !this.fetched[s]) {
                this.fetched[s] = !0;
                var a = this.fetchLink(s);
                a && this.parseData(a, i);
            }
        }
    },
    "fetchLink": function(e) {
        var t = OpenLayers.Request.GET({
            "url": e,
            "async": !1
        });
        if (t) return t.responseText;
    },
    "parseStyles": function(e, t) {
        for (var i = 0, n = e.length; i < n; i++) {
            var r = this.parseStyle(e[i]);
            if (r) {
                var s = (t.styleBaseUrl || "") + "#" + r.id;
                this.styles[s] = r;
            }
        }
    },
    "parseKmlColor": function(e) {
        var t = null;
        if (e) {
            var i = e.match(this.regExes.kmlColor);
            i && (t = {
                "color": "#" + i[4] + i[3] + i[2],
                "opacity": parseInt(i[1], 16) / 255
            });
        }
        return t;
    },
    "parseStyle": function(e) {
        for (var t, i, n = {}, r = [ "LineStyle", "PolyStyle", "IconStyle", "BalloonStyle", "LabelStyle" ], s = 0, a = r.length; s < a; ++s) if (t = r[s], 
        i = this.getElementsByTagNameNS(e, "*", t)[0]) switch (t.toLowerCase()) {
          case "linestyle":
            S = this.parseProperty(i, "*", "color");
            (x = this.parseKmlColor(S)) && (n.strokeColor = x.color, n.strokeOpacity = x.opacity), 
            (l = this.parseProperty(i, "*", "width")) && (n.strokeWidth = l);
            break;

          case "polystyle":
            S = this.parseProperty(i, "*", "color");
            (x = this.parseKmlColor(S)) && (n.fillOpacity = x.opacity, n.fillColor = x.color), 
            "0" == this.parseProperty(i, "*", "fill") && (n.fillColor = "none"), "0" == this.parseProperty(i, "*", "outline") && (n.strokeWidth = "0");
            break;

          case "iconstyle":
            var o = parseFloat(this.parseProperty(i, "*", "scale") || 1), l = 32 * o, h = 32 * o, u = this.getElementsByTagNameNS(i, "*", "Icon")[0];
            if (u) {
                var p = this.parseProperty(u, "*", "href");
                if (p) {
                    var c = this.parseProperty(u, "*", "w"), d = this.parseProperty(u, "*", "h");
                    !OpenLayers.String.startsWith(p, "http://maps.google.com/mapfiles/kml") || c || d || (c = 64, 
                    d = 64, o /= 2), c = c || d, d = d || c, c && (l = parseInt(c) * o), d && (h = parseInt(d) * o);
                    var f = p.match(this.regExes.kmlIconPalette);
                    if (f) {
                        var y = f[1], m = f[2], g = this.parseProperty(u, "*", "x"), v = this.parseProperty(u, "*", "y"), L = g ? g / 32 : 0;
                        p = "http://maps.google.com/mapfiles/kml/pal" + y + "/icon" + (8 * (v ? 7 - v / 32 : 7) + L) + m;
                    }
                    n.graphicOpacity = 1, n.externalGraphic = p;
                }
            }
            var O = this.getElementsByTagNameNS(i, "*", "hotSpot")[0];
            if (O) {
                var g = parseFloat(O.getAttribute("x")), v = parseFloat(O.getAttribute("y")), b = O.getAttribute("xunits");
                "pixels" == b ? n.graphicXOffset = -g * o : "insetPixels" == b ? n.graphicXOffset = g * o - l : "fraction" == b && (n.graphicXOffset = -l * g);
                var w = O.getAttribute("yunits");
                "pixels" == w ? n.graphicYOffset = v * o - h + 1 : "insetPixels" == w ? n.graphicYOffset = -v * o + 1 : "fraction" == w && (n.graphicYOffset = -h * (1 - v) + 1);
            }
            n.graphicWidth = l, n.graphicHeight = h;
            break;

          case "balloonstyle":
            var C = OpenLayers.Util.getXmlNodeValue(i);
            C && (n.balloonStyle = C.replace(this.regExes.straightBracket, "${$1}"));
            break;

          case "labelstyle":
            var S = this.parseProperty(i, "*", "color"), x = this.parseKmlColor(S);
            x && (n.fontColor = x.color, n.fontOpacity = x.opacity);
        }
        !n.strokeColor && n.fillColor && (n.strokeColor = n.fillColor);
        var _ = e.getAttribute("id");
        return _ && n && (n.id = _), n;
    },
    "parseStyleMaps": function(e, t) {
        for (var i = 0, n = e.length; i < n; i++) for (var r = e[i], s = this.getElementsByTagNameNS(r, "*", "Pair"), a = r.getAttribute("id"), o = 0, l = s.length; o < l; o++) {
            var h = s[o], u = this.parseProperty(h, "*", "key"), p = this.parseProperty(h, "*", "styleUrl");
            p && "normal" == u && (this.styles[(t.styleBaseUrl || "") + "#" + a] = this.styles[(t.styleBaseUrl || "") + p]);
        }
    },
    "parseFeatures": function(e, t) {
        for (var i = [], n = 0, r = e.length; n < r; n++) {
            var s = e[n], a = this.parseFeature.apply(this, [ s ]);
            if (!a) throw "Bad Placemark: " + n;
            if (this.extractStyles && a.attributes && a.attributes.styleUrl && (a.style = this.getStyle(a.attributes.styleUrl, t)), 
            this.extractStyles) {
                var o = this.getElementsByTagNameNS(s, "*", "Style")[0];
                if (o) {
                    var l = this.parseStyle(o);
                    l && (a.style = OpenLayers.Util.extend(a.style, l));
                }
            }
            if (this.extractTracks) {
                var h = this.getElementsByTagNameNS(s, this.namespaces.gx, "Track");
                if (h && h.length > 0) {
                    var u = h[0], p = {
                        "features": [],
                        "feature": a
                    };
                    this.readNode(u, p), p.features.length > 0 && i.push.apply(i, p.features);
                }
            } else i.push(a);
        }
        this.features = this.features.concat(i);
    },
    "readers": {
        "kml": {
            "when": function(e, t) {
                t.whens.push(OpenLayers.Date.parse(this.getChildValue(e)));
            },
            "_trackPointAttribute": function(e, t) {
                var i = e.nodeName.split(":").pop();
                t.attributes[i].push(this.getChildValue(e));
            }
        },
        "gx": {
            "Track": function(e, t) {
                var i = {
                    "whens": [],
                    "points": [],
                    "angles": []
                };
                if (this.trackAttributes) {
                    i.attributes = {};
                    for (var n = 0, r = this.trackAttributes.length; n < r; ++n) p = this.trackAttributes[n], 
                    i.attributes[p] = [], p in this.readers.kml || (this.readers.kml[p] = this.readers.kml._trackPointAttribute);
                }
                if (this.readChildNodes(e, i), i.whens.length !== i.points.length) throw new Error("gx:Track with unequal number of when (" + i.whens.length + ") and gx:coord (" + i.points.length + ") elements.");
                var s = i.angles.length > 0;
                if (s && i.whens.length !== i.angles.length) throw new Error("gx:Track with unequal number of when (" + i.whens.length + ") and gx:angles (" + i.angles.length + ") elements.");
                for (var a, o, l, n = 0, r = i.whens.length; n < r; ++n) {
                    if (a = t.feature.clone(), a.fid = t.feature.fid || t.feature.id, o = i.points[n], 
                    a.geometry = o, "z" in o && (a.attributes.altitude = o.z), this.internalProjection && this.externalProjection && a.geometry.transform(this.externalProjection, this.internalProjection), 
                    this.trackAttributes) for (var h = 0, u = this.trackAttributes.length; h < u; ++h) {
                        var p = this.trackAttributes[h];
                        a.attributes[p] = i.attributes[p][n];
                    }
                    a.attributes.when = i.whens[n], a.attributes.trackId = t.feature.id, s && (l = i.angles[n], 
                    a.attributes.heading = parseFloat(l[0]), a.attributes.tilt = parseFloat(l[1]), a.attributes.roll = parseFloat(l[2])), 
                    t.features.push(a);
                }
            },
            "coord": function(e, t) {
                var i = this.getChildValue(e).replace(this.regExes.trimSpace, "").split(/\s+/), n = new OpenLayers.Geometry.Point(i[0], i[1]);
                i.length > 2 && (n.z = parseFloat(i[2])), t.points.push(n);
            },
            "angles": function(e, t) {
                var i = this.getChildValue(e).replace(this.regExes.trimSpace, "").split(/\s+/);
                t.angles.push(i);
            }
        }
    },
    "parseFeature": function(e) {
        for (var t, i, n, r, s = [ "MultiGeometry", "Polygon", "LineString", "Point" ], a = 0, o = s.length; a < o; ++a) if (t = s[a], 
        this.internalns = e.namespaceURI ? e.namespaceURI : this.kmlns, (i = this.getElementsByTagNameNS(e, this.internalns, t)).length > 0) {
            if (!(r = this.parseGeometry[t.toLowerCase()])) throw new TypeError("Unsupported geometry type: " + t);
            n = r.apply(this, [ i[0] ]), this.internalProjection && this.externalProjection && n.transform(this.externalProjection, this.internalProjection);
            break;
        }
        var l;
        this.extractAttributes && (l = this.parseAttributes(e));
        var h = new OpenLayers.Feature.Vector(n, l), u = e.getAttribute("id") || e.getAttribute("name");
        return null != u && (h.fid = u), h;
    },
    "getStyle": function(e, t) {
        var i = OpenLayers.Util.removeTail(e), n = OpenLayers.Util.extend({}, t);
        if (n.depth++, n.styleBaseUrl = i, !this.styles[e] && !OpenLayers.String.startsWith(e, "#") && n.depth <= this.maxDepth && !this.fetched[i]) {
            var r = this.fetchLink(i);
            r && this.parseData(r, n);
        }
        return OpenLayers.Util.extend({}, this.styles[e]);
    },
    "parseGeometry": {
        "point": function(e) {
            var t = this.getElementsByTagNameNS(e, this.internalns, "coordinates"), i = [];
            if (t.length > 0) {
                var n = t[0].firstChild.nodeValue;
                i = (n = n.replace(this.regExes.removeSpace, "")).split(",");
            }
            if (!(i.length > 1)) throw "Bad coordinate string: " + n;
            return 2 == i.length && (i[2] = null), new OpenLayers.Geometry.Point(i[0], i[1], i[2]);
        },
        "linestring": function(e, t) {
            var i = this.getElementsByTagNameNS(e, this.internalns, "coordinates"), n = null;
            if (i.length > 0) {
                for (var r, s = this.getChildValue(i[0]), a = (s = (s = s.replace(this.regExes.trimSpace, "")).replace(this.regExes.trimComma, ",")).split(this.regExes.splitSpace), o = a.length, l = new Array(o), h = 0; h < o; ++h) {
                    if (r = a[h].split(","), !(r.length > 1)) throw "Bad LineString point coordinates: " + a[h];
                    2 == r.length && (r[2] = null), l[h] = new OpenLayers.Geometry.Point(r[0], r[1], r[2]);
                }
                if (!o) throw "Bad LineString coordinates: " + s;
                n = t ? new OpenLayers.Geometry.LinearRing(l) : new OpenLayers.Geometry.LineString(l);
            }
            return n;
        },
        "polygon": function(e) {
            var t = this.getElementsByTagNameNS(e, this.internalns, "LinearRing"), i = t.length, n = new Array(i);
            if (i > 0) for (var r, s = 0, a = t.length; s < a; ++s) {
                if (!(r = this.parseGeometry.linestring.apply(this, [ t[s], !0 ]))) throw "Bad LinearRing geometry: " + s;
                n[s] = r;
            }
            return new OpenLayers.Geometry.Polygon(n);
        },
        "multigeometry": function(e) {
            for (var t, i, n = [], r = e.childNodes, s = 0, a = r.length; s < a; ++s) if (1 == (t = r[s]).nodeType) {
                var o = t.prefix ? t.nodeName.split(":")[1] : t.nodeName;
                (i = this.parseGeometry[o.toLowerCase()]) && n.push(i.apply(this, [ t ]));
            }
            return new OpenLayers.Geometry.Collection(n);
        }
    },
    "parseAttributes": function(e) {
        var t = {}, i = e.getElementsByTagName("ExtendedData");
        i.length && (t = this.parseExtendedData(i[0]));
        for (var n, r, s = e.childNodes, a = 0, o = s.length; a < o; ++a) if (1 == (n = s[a]).nodeType && (r = n.childNodes).length >= 1 && r.length <= 3) {
            var l;
            switch (r.length) {
              case 1:
                l = r[0];
                break;

              case 2:
                var h = r[0], u = r[1];
                l = 3 == h.nodeType || 4 == h.nodeType ? h : u;
                break;

              case 3:
              default:
                l = r[1];
            }
            if (3 == l.nodeType || 4 == l.nodeType) {
                var p = n.prefix ? n.nodeName.split(":")[1] : n.nodeName, c = OpenLayers.Util.getXmlNodeValue(l);
                c && (c = c.replace(this.regExes.trimSpace, ""), t[p] = c);
            }
        }
        return t;
    },
    "parseExtendedData": function(e) {
        var t, i, n, r, s = {}, a = e.getElementsByTagName("Data");
        for (t = 0, i = a.length; t < i; t++) {
            r = (n = a[t]).getAttribute("name");
            var o = {}, l = n.getElementsByTagName("value");
            if (l.length && (o.value = this.getChildValue(l[0])), this.kvpAttributes) s[r] = o.value; else {
                var h = n.getElementsByTagName("displayName");
                h.length && (o.displayName = this.getChildValue(h[0])), s[r] = o;
            }
        }
        var u = e.getElementsByTagName("SimpleData");
        for (t = 0, i = u.length; t < i; t++) {
            o = {};
            r = (n = u[t]).getAttribute("name"), o.value = this.getChildValue(n), this.kvpAttributes ? s[r] = o.value : (o.displayName = r, 
            s[r] = o);
        }
        return s;
    },
    "parseProperty": function(e, t, i) {
        var n, r = this.getElementsByTagNameNS(e, t, i);
        try {
            n = OpenLayers.Util.getXmlNodeValue(r[0]);
        } catch (e) {
            n = null;
        }
        return n;
    },
    "write": function(e) {
        OpenLayers.Util.isArray(e) || (e = [ e ]);
        for (var t = this.createElementNS(this.kmlns, "kml"), i = this.createFolderXML(), n = 0, r = e.length; n < r; ++n) i.appendChild(this.createPlacemarkXML(e[n]));
        return t.appendChild(i), OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "createFolderXML": function() {
        var e = this.createElementNS(this.kmlns, "Folder");
        if (this.foldersName) {
            var t = this.createElementNS(this.kmlns, "name"), i = this.createTextNode(this.foldersName);
            t.appendChild(i), e.appendChild(t);
        }
        if (this.foldersDesc) {
            var n = this.createElementNS(this.kmlns, "description"), r = this.createTextNode(this.foldersDesc);
            n.appendChild(r), e.appendChild(n);
        }
        return e;
    },
    "createPlacemarkXML": function(e) {
        var t = this.createElementNS(this.kmlns, "name"), i = e.style && e.style.label ? e.style.label : e.id, n = e.attributes.name || i;
        t.appendChild(this.createTextNode(n));
        var r = this.createElementNS(this.kmlns, "description"), s = e.attributes.description || this.placemarksDesc;
        r.appendChild(this.createTextNode(s));
        var a = this.createElementNS(this.kmlns, "Placemark");
        if (null != e.fid && a.setAttribute("id", e.fid), a.appendChild(t), a.appendChild(r), 
        e.attributes) {
            var o = this.buildExtendedData(e.attributes);
            o && a.appendChild(o);
        }
        var l = this.buildGeometryNode(e.geometry);
        return a.appendChild(l), a;
    },
    "buildGeometryNode": function(e) {
        var t = e.CLASS_NAME, i = t.substring(t.lastIndexOf(".") + 1), n = this.buildGeometry[i.toLowerCase()], r = null;
        return n && (r = n.apply(this, [ e ])), r;
    },
    "buildGeometry": {
        "point": function(e) {
            var t = this.createElementNS(this.kmlns, "Point");
            return t.appendChild(this.buildCoordinatesNode(e)), t;
        },
        "multipoint": function(e) {
            return this.buildGeometry.collection.apply(this, [ e ]);
        },
        "linestring": function(e) {
            var t = this.createElementNS(this.kmlns, "LineString");
            return t.appendChild(this.buildCoordinatesNode(e)), t;
        },
        "multilinestring": function(e) {
            return this.buildGeometry.collection.apply(this, [ e ]);
        },
        "linearring": function(e) {
            var t = this.createElementNS(this.kmlns, "LinearRing");
            return t.appendChild(this.buildCoordinatesNode(e)), t;
        },
        "polygon": function(e) {
            for (var t, i, n, r = this.createElementNS(this.kmlns, "Polygon"), s = e.components, a = 0, o = s.length; a < o; ++a) n = 0 == a ? "outerBoundaryIs" : "innerBoundaryIs", 
            t = this.createElementNS(this.kmlns, n), i = this.buildGeometry.linearring.apply(this, [ s[a] ]), 
            t.appendChild(i), r.appendChild(t);
            return r;
        },
        "multipolygon": function(e) {
            return this.buildGeometry.collection.apply(this, [ e ]);
        },
        "collection": function(e) {
            for (var t, i = this.createElementNS(this.kmlns, "MultiGeometry"), n = 0, r = e.components.length; n < r; ++n) (t = this.buildGeometryNode.apply(this, [ e.components[n] ])) && i.appendChild(t);
            return i;
        }
    },
    "buildCoordinatesNode": function(e) {
        var t, i = this.createElementNS(this.kmlns, "coordinates"), n = e.components;
        if (n) {
            for (var r, s = n.length, a = new Array(s), o = 0; o < s; ++o) r = n[o], a[o] = this.buildCoordinates(r);
            t = a.join(" ");
        } else t = this.buildCoordinates(e);
        var l = this.createTextNode(t);
        return i.appendChild(l), i;
    },
    "buildCoordinates": function(e) {
        return this.internalProjection && this.externalProjection && (e = e.clone()).transform(this.internalProjection, this.externalProjection), 
        e.x + "," + e.y;
    },
    "buildExtendedData": function(e) {
        var t = this.createElementNS(this.kmlns, "ExtendedData");
        for (var i in e) if (e[i] && "name" != i && "description" != i && "styleUrl" != i) {
            var n = this.createElementNS(this.kmlns, "Data");
            n.setAttribute("name", i);
            var r = this.createElementNS(this.kmlns, "value");
            if ("object" == typeof e[i]) {
                if (e[i].value && r.appendChild(this.createTextNode(e[i].value)), e[i].displayName) {
                    var s = this.createElementNS(this.kmlns, "displayName");
                    s.appendChild(this.getXMLDoc().createCDATASection(e[i].displayName)), n.appendChild(s);
                }
            } else r.appendChild(this.createTextNode(e[i]));
            n.appendChild(r), t.appendChild(n);
        }
        return this.isSimpleContent(t) ? null : t;
    },
    "CLASS_NAME": "OpenLayers.Format.KML"
}), OpenLayers.Format.OSM = OpenLayers.Class(OpenLayers.Format.XML, {
    "checkTags": !1,
    "shareNode": !1,
    "interestingTagsExclude": null,
    "areaTags": null,
    "relationsParsers": {},
    "initialize": function(e) {
        var t = {
            "interestingTagsExclude": [ "source", "source_ref", "source:ref", "history", "attribution", "created_by" ],
            "areaTags": [ "area", "building", "leisure", "tourism", "ruins", "historic", "landuse", "military", "natural", "sport" ]
        };
        e = e || {}, t = OpenLayers.Util.extend(t, e);
        for (var i = {}, n = 0; n < t.interestingTagsExclude.length; n++) i[t.interestingTagsExclude[n]] = !0;
        t.interestingTagsExclude = i;
        for (var r = {}, n = 0; n < t.areaTags.length; n++) r[t.areaTags[n]] = !0;
        t.areaTags = r, this.externalProjection = new OpenLayers.Projection("EPSG:4326"), 
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ t ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var t = this.getNodes(e), i = this.getWays(e), n = this.getRelations(e), r = [];
        for (var s in n) {
            var a = n[s];
            if (this.relationsParsers[a.tags.type]) for (var o = this.relationsParsers[a.tags.type](a, this, t, i, n), l = 0, h = o.length; l < h; l++) r.push(o[l]);
        }
        for (var u in i) {
            var p = i[u];
            if (p.interesting) {
                var c = this.isWayArea(p) ? 1 : 0, d = this.getPointList(p, t), f = null;
                f = c ? new OpenLayers.Geometry.Polygon(new OpenLayers.Geometry.LinearRing(d)) : new OpenLayers.Geometry.LineString(d);
                var y = new OpenLayers.Feature.Vector(f, p.tags);
                y.osm_id = parseInt(p.id), y.osm_version = parseInt(p.version), y.geometry.osm_id = y.osm_id, 
                y.type = "way", y.fid = "way." + y.osm_id, r.push(y);
            }
        }
        for (var m in t) {
            var g = t[m];
            (!g.used || !this.checkTags || Object.keys(g.attributes).length > 1) && r.push(g);
        }
        return r;
    },
    "getPointList": function(e, t) {
        if (!e) return [];
        for (var i = new Array(e.nodes.length), n = 0; n < e.nodes.length; n++) {
            var r = t[e.nodes[n]];
            r.used = !0;
            var s = r.geometry;
            this.shareNode || ((s = new OpenLayers.Geometry.Point(r.geometry.x, r.geometry.y)).osm_id = r.osm_id), 
            i[n] = s;
        }
        return i;
    },
    "concatPathsIfLinear": function(e, t) {
        var i = {};
        return 0 == e.length ? (i.succed = !0, i.lastPointList = t, i) : 0 == t.length ? (i.succed = !0, 
        i.lastPointList = e, i) : e[e.length - 1].x == t[0].x && e[e.length - 1].y == t[0].y ? (t = t.slice(1, t.length), 
        e = e.concat(t), i.succed = !0, i.lastPointList = e, i) : e[0].x == t[t.length - 1].x && e[0].y == t[t.length - 1].y ? (e = e.slice(1, e.length), 
        e = t.concat(e), i.succed = !0, i.lastPointList = e, i) : e[0].x == t[0].x && e[0].y == t[0].y ? (e = e.length > t.length ? (t = t.slice(1, t.length)).reverse().concat(e) : (e = e.slice(1, e.length)).reverse().concat(t), 
        i.succed = !0, i.lastPointList = e, i) : e[e.length - 1].x == t[t.length - 1].x && e[e.length - 1].y == t[t.length - 1].y ? (e.length > t.length ? (t = t.slice(0, t.length - 1), 
        e = e.concat(t.reverse())) : (e = e.slice(0, e.length - 1), e = t.concat(e.reverse())), 
        i.succed = !0, i.lastPointList = e, i) : (i.succed = !1, i);
    },
    "getNodes": function(e) {
        for (var t = e.getElementsByTagName("node"), i = {}, n = 0; n < t.length; n++) {
            var r = t[n], s = r.getAttribute("id"), a = new OpenLayers.Geometry.Point(r.getAttribute("lon"), r.getAttribute("lat"));
            this.internalProjection && this.externalProjection && a.transform(this.externalProjection, this.internalProjection);
            var o = new OpenLayers.Feature.Vector(a, this.getTags(r));
            o.osm_id = parseInt(s), o.osm_version = parseInt(r.getAttribute("version")), o.type = "node", 
            o.fid = "node." + o.osm_id, o.geometry.osm_id = o.osm_id, i[s] = o;
        }
        return i;
    },
    "getRelations": function(e) {
        for (var t = e.getElementsByTagName("relation"), i = {}, n = 0; n < t.length; n++) {
            var r = t[n], s = r.getAttribute("id"), a = {
                "id": s,
                "version": r.getAttribute("version")
            };
            a.tags = this.getTags(r), a.nodes = [], a.ways = [], a.relations = [];
            for (var o = r.getElementsByTagName("member"), l = 0; l < o.length; l++) {
                var h = o[l], u = h.getAttribute("type");
                "node" == u ? a.nodes[a.nodes.length] = h : "way" == u ? a.ways[a.ways.length] = h : "relation" == u && (a.relations[a.relations.length] = h);
            }
            i[s] = a;
        }
        return i;
    },
    "getWays": function(e) {
        for (var t = e.getElementsByTagName("way"), i = {}, n = 0; n < t.length; n++) {
            var r = t[n], s = r.getAttribute("id"), a = {
                "id": s,
                "version": r.getAttribute("version")
            };
            if (this.checkTags) {
                var o = this.getTags(r, !0);
                a.interesting = o[1], a.tags = o[0];
            } else a.interesting = !0, a.tags = this.getTags(r);
            var l = r.getElementsByTagName("nd");
            a.nodes = new Array(l.length);
            for (var h = 0; h < l.length; h++) a.nodes[h] = l[h].getAttribute("ref");
            i[s] = a;
        }
        return i;
    },
    "getTags": function(e, t) {
        for (var i = e.getElementsByTagName("tag"), n = {}, r = !1, s = 0; s < i.length; s++) {
            var a = i[s].getAttribute("k");
            this.checkTags && this.interestingTagsExclude[a] || (n[a] = i[s].getAttribute("v")), 
            t && !this.interestingTagsExclude[a] && (r = !0);
        }
        return t ? [ n, r ] : n;
    },
    "isWayArea": function(e) {
        var t = !1, i = !1;
        if (e.nodes[0] == e.nodes[e.nodes.length - 1] && (t = !0), this.checkTags) for (var n in e.tags) if (this.areaTags[n]) {
            i = !0;
            break;
        }
        return t && (!this.checkTags || i);
    },
    "write": function(e) {
        OpenLayers.Util.isArray(e) || (e = [ e ]), this.osm_id = 1, this.created_nodes = {};
        var t = this.createElementNS(null, "osm");
        t.setAttribute("version", "0.5"), t.setAttribute("generator", "OpenLayers " + OpenLayers.VERSION_NUMBER);
        for (var i = e.length - 1; i >= 0; i--) for (var n = this.createFeatureNodes(e[i]), r = 0; r < n.length; r++) t.appendChild(n[r]);
        return OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "createFeatureNodes": function(e) {
        var t = [], i = e.geometry.CLASS_NAME, n = i.substring(i.lastIndexOf(".") + 1);
        n = n.toLowerCase();
        var r = this.createXML[n];
        return r && (t = r.apply(this, [ e ])), t;
    },
    "createXML": {
        "point": function(e) {
            var t = null, i = e.geometry ? e.geometry : e;
            this.internalProjection && this.externalProjection && (i = i.clone()).transform(this.internalProjection, this.externalProjection);
            var n = !1;
            if (e.osm_id ? (t = e.osm_id, this.created_nodes[t] && (n = !0)) : (t = -this.osm_id, 
            this.osm_id++), n) r = this.created_nodes[t]; else var r = this.createElementNS(null, "node");
            return this.created_nodes[t] = r, r.setAttribute("id", t), r.setAttribute("lon", i.x), 
            r.setAttribute("lat", i.y), e.attributes && this.serializeTags(e, r), this.setState(e, r), 
            n ? [] : [ r ];
        },
        "linestring": function(e) {
            var t, i = [], n = e.geometry;
            e.osm_id ? t = e.osm_id : (t = -this.osm_id, this.osm_id++);
            var r = this.createElementNS(null, "way");
            r.setAttribute("id", t);
            for (var s = 0; s < n.components.length; s++) {
                var a = this.createXML.point.apply(this, [ n.components[s] ]);
                if (a.length) {
                    var o = (a = a[0]).getAttribute("id");
                    i.push(a);
                } else o = n.components[s].osm_id, a = this.created_nodes[o];
                this.setState(e, a);
                var l = this.createElementNS(null, "nd");
                l.setAttribute("ref", o), r.appendChild(l);
            }
            return this.serializeTags(e, r), i.push(r), i;
        },
        "polygon": function(e) {
            var t = OpenLayers.Util.extend({
                "area": "yes"
            }, e.attributes), i = new OpenLayers.Feature.Vector(e.geometry.components[0], t);
            return i.osm_id = e.osm_id, i.geometry.osm_id = i.osm_id, this.createXML.linestring.apply(this, [ i ]);
        }
    },
    "serializeTags": function(e, t) {
        for (var i in e.attributes) {
            var n = this.createElementNS(null, "tag");
            n.setAttribute("k", i), n.setAttribute("v", e.attributes[i]), t.appendChild(n);
        }
    },
    "setState": function(e, t) {
        if (e.state) {
            var i = null;
            switch (e.state) {
              case OpenLayers.State.UPDATE:
                i = "modify";

              case OpenLayers.State.DELETE:
                i = "delete";
            }
            i && t.setAttribute("action", i);
        }
    },
    "CLASS_NAME": "OpenLayers.Format.OSM"
}), OpenLayers.Format.OSM.multipolygonParser = function(e, t, i, n, r) {
    for (var s = "", a = [], o = [], l = [], h = 0; h < e.ways.length; h++) {
        var u = e.ways[h], p = u.getAttribute("ref"), c = u.getAttribute("role"), d = t.getPointList(n[p], i);
        if (0 != d.length) {
            var f = !0;
            if ("" == s && (s = c), s == c) {
                var y = t.concatPathsIfLinear(a, d);
                y.succed && (f = !1, a = y.lastPointList);
            }
            if (f) {
                if (a.length > 0) if ("inner" == s || "enclave" == s) {
                    O = new OpenLayers.Geometry.LinearRing(a);
                    o.push(O);
                } else {
                    O = new OpenLayers.Geometry.LinearRing(a);
                    l.push(O);
                }
                a = d, s = c;
            }
        }
    }
    if (a.length > 0) if ("inner" == s || "enclave" == s) {
        O = new OpenLayers.Geometry.LinearRing(a);
        o.push(O);
    } else {
        O = new OpenLayers.Geometry.LinearRing(a);
        l.push(O);
    }
    for (var m = [], h = 0; h < l.length; h++) if (0 == o.length) m.push(new OpenLayers.Geometry.Polygon([ l[h] ])); else {
        for (var g = [], v = 0; v < o.length; v++) {
            var L = o[v];
            l[h].containsPoint(L.getCentroid()) && g.push(L);
        }
        m.push(new OpenLayers.Geometry.Polygon([ l[h] ].concat(g)));
    }
    var O = new OpenLayers.Geometry.MultiPolygon(m), b = new OpenLayers.Feature.Vector(O, e.tags);
    return b.osm_id = parseInt(e.id), b.type = "relation", b.fid = "relation." + b.osm_id, 
    [ b ];
}, OpenLayers.Format.OSM.getLineStrings = function(e, t, i, n) {
    for (var r = [], s = 0; s < e.ways.length; s++) {
        var a = e.ways[s].getAttribute("ref"), o = t.getPointList(n[a], i);
        0 != o.length && r.push(new OpenLayers.Geometry.LineString(o));
    }
    return r;
}, OpenLayers.Format.OSM.routeParser = function(e, t, i, n, r) {
    var s = OpenLayers.Format.OSM.getLineStrings(e, t, i, n), a = new OpenLayers.Geometry.MultiLineString(s), o = new OpenLayers.Feature.Vector(a, e.tags);
    return o.osm_id = parseInt(e.id), o.type = "relation", o.fid = "relation." + o.osm_id, 
    [ o ];
}, OpenLayers.Format.OSM.genericParser = function(e, t, i, n, r) {
    for (var s = OpenLayers.Format.OSM.getLineStrings(e, t, i, n), a = 0; a < e.nodes.length; a++) {
        var o = e.nodes[a];
        s.push(new OpenLayers.Geometry.Node(o));
    }
    var l = new OpenLayers.Geometry.Collection(s), h = new OpenLayers.Feature.Vector(l, e.tags);
    return h.osm_id = parseInt(e.id), h.type = "relation", h.fid = "relation." + h.osm_id, 
    [ h ];
}, OpenLayers.Format.OSM.routeParserWithRoles = function(e, t, i, n, r) {
    for (var s = "", a = [], o = [], l = 0; l < e.ways.length; l++) {
        var h = e.ways[l], u = h.getAttribute("ref"), p = h.getAttribute("role"), c = t.getPointList(n[u], i);
        if (0 != c.length) {
            var d = !0;
            if ("" == s && (s = p), s == p) {
                var f = t.concatPathsIfLinear(a, c);
                f.succed && (d = !1, a = f.lastPointList);
            }
            if (d) {
                var y = new OpenLayers.Geometry.LineString(a), m = new OpenLayers.Feature.Vector(y, e.tags);
                p && (m.attributes.role = p), m.osm_id = parseInt(e.id), m.type = "relation", m.fid = "relation." + m.osm_id + "." + l, 
                o.push(m), a = c, s = p;
            }
        }
    }
    var y = new OpenLayers.Geometry.LineString(a), m = new OpenLayers.Feature.Vector(y, e.tags);
    return p && (m.attributes.role = p), m.osm_id = parseInt(e.id), m.type = "relation", 
    m.fid = "relation." + m.osm_id, o.push(m), o;
}, OpenLayers.Format.OWSContext = OpenLayers.Class(OpenLayers.Format.Context, {
    "defaultVersion": "0.3.1",
    "getVersion": function(e, t) {
        var i = OpenLayers.Format.XML.VersionedOGC.prototype.getVersion.apply(this, arguments);
        return "0.3.0" === i && (i = this.defaultVersion), i;
    },
    "toContext": function(e) {
        var t = {};
        return "OpenLayers.Map" == e.CLASS_NAME && (t.bounds = e.getExtent(), t.maxExtent = e.maxExtent, 
        t.projection = e.projection, t.size = e.getSize(), t.layers = e.layers), t;
    },
    "CLASS_NAME": "OpenLayers.Format.OWSContext"
}), OpenLayers.Format.QueryStringFilter = function() {
    function e(e) {
        return e = e.replace(/%/g, "\\%"), e = e.replace(/\\\\\.(\*)?/g, function(e, t) {
            return t ? e : "\\\\_";
        }), e = e.replace(/\\\\\.\*/g, "\\\\%"), e = e.replace(/(\\)?\.(\*)?/g, function(e, t, i) {
            return t || i ? e : "_";
        }), e = e.replace(/(\\)?\.\*/g, function(e, t) {
            return t ? e : "%";
        }), e = e.replace(/\\\./g, "."), e = e.replace(/(\\)?\\\*/g, function(e, t) {
            return t ? e : "*";
        });
    }
    var t = {};
    return t[OpenLayers.Filter.Comparison.EQUAL_TO] = "eq", t[OpenLayers.Filter.Comparison.NOT_EQUAL_TO] = "ne", 
    t[OpenLayers.Filter.Comparison.LESS_THAN] = "lt", t[OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO] = "lte", 
    t[OpenLayers.Filter.Comparison.GREATER_THAN] = "gt", t[OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO] = "gte", 
    t[OpenLayers.Filter.Comparison.LIKE] = "ilike", OpenLayers.Class(OpenLayers.Format, {
        "wildcarded": !1,
        "srsInBBOX": !1,
        "write": function(i, n) {
            n = n || {};
            var r = i.CLASS_NAME, s = r.substring(r.lastIndexOf(".") + 1);
            switch (s) {
              case "Spatial":
                switch (i.type) {
                  case OpenLayers.Filter.Spatial.BBOX:
                    n.bbox = i.value.toArray(), this.srsInBBOX && i.projection && n.bbox.push(i.projection.getCode());
                    break;

                  case OpenLayers.Filter.Spatial.DWITHIN:
                    n.tolerance = i.distance;

                  case OpenLayers.Filter.Spatial.WITHIN:
                    n.lon = i.value.x, n.lat = i.value.y;
                    break;

                  default:
                    OpenLayers.Console.warn("Unknown spatial filter type " + i.type);
                }
                break;

              case "Comparison":
                var a = t[i.type];
                if (void 0 !== a) {
                    var o = i.value;
                    i.type == OpenLayers.Filter.Comparison.LIKE && (o = e(o), this.wildcarded && (o = "%" + o + "%")), 
                    n[i.property + "__" + a] = o, n.queryable = n.queryable || [], n.queryable.push(i.property);
                } else OpenLayers.Console.warn("Unknown comparison filter type " + i.type);
                break;

              case "Logical":
                if (i.type === OpenLayers.Filter.Logical.AND) for (var l = 0, h = i.filters.length; l < h; l++) n = this.write(i.filters[l], n); else OpenLayers.Console.warn("Unsupported logical filter type " + i.type);
                break;

              default:
                OpenLayers.Console.warn("Unknown filter type " + s);
            }
            return n;
        },
        "CLASS_NAME": "OpenLayers.Format.QueryStringFilter"
    });
}(), OpenLayers.Format.SOSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.0.0",
    "CLASS_NAME": "OpenLayers.Format.SOSCapabilities"
}), OpenLayers.Format.SOSGetFeatureOfInterest = OpenLayers.Class(OpenLayers.Format.XML, {
    "VERSION": "1.0.0",
    "namespaces": {
        "sos": "http://www.opengis.net/sos/1.0",
        "gml": "http://www.opengis.net/gml",
        "sa": "http://www.opengis.net/sampling/1.0",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "schemaLocation": "http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd",
    "defaultPrefix": "sos",
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {
            "features": []
        };
        this.readNode(e, t);
        for (var i = [], n = 0, r = t.features.length; n < r; n++) {
            var s = t.features[n];
            this.internalProjection && this.externalProjection && s.components[0] && s.components[0].transform(this.externalProjection, this.internalProjection);
            var a = new OpenLayers.Feature.Vector(s.components[0], s.attributes);
            i.push(a);
        }
        return i;
    },
    "readers": {
        "sa": {
            "SamplingPoint": function(e, t) {
                if (!t.attributes) {
                    var i = {
                        "attributes": {}
                    };
                    t.features.push(i), t = i;
                }
                t.attributes.id = this.getAttributeNS(e, this.namespaces.gml, "id"), this.readChildNodes(e, t);
            },
            "position": function(e, t) {
                this.readChildNodes(e, t);
            }
        },
        "gml": OpenLayers.Util.applyDefaults({
            "FeatureCollection": function(e, t) {
                this.readChildNodes(e, t);
            },
            "featureMember": function(e, t) {
                var i = {
                    "attributes": {}
                };
                t.features.push(i), this.readChildNodes(e, i);
            },
            "name": function(e, t) {
                t.attributes.name = this.getChildValue(e);
            },
            "pos": function(e, t) {
                this.externalProjection || (this.externalProjection = new OpenLayers.Projection(e.getAttribute("srsName"))), 
                OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this, [ e, t ]);
            }
        }, OpenLayers.Format.GML.v3.prototype.readers.gml)
    },
    "writers": {
        "sos": {
            "GetFeatureOfInterest": function(e) {
                for (var t = this.createElementNSPlus("GetFeatureOfInterest", {
                    "attributes": {
                        "version": this.VERSION,
                        "service": "SOS",
                        "xsi:schemaLocation": this.schemaLocation
                    }
                }), i = 0, n = e.fois.length; i < n; i++) this.writeNode("FeatureOfInterestId", {
                    "foi": e.fois[i]
                }, t);
                return t;
            },
            "FeatureOfInterestId": function(e) {
                return this.createElementNSPlus("FeatureOfInterestId", {
                    "value": e.foi
                });
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.SOSGetFeatureOfInterest"
}), OpenLayers.Format.SOSGetObservation = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "ows": "http://www.opengis.net/ows",
        "gml": "http://www.opengis.net/gml",
        "sos": "http://www.opengis.net/sos/1.0",
        "ogc": "http://www.opengis.net/ogc",
        "om": "http://www.opengis.net/om/1.0",
        "sa": "http://www.opengis.net/sampling/1.0",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "xmlns": "http://www.w3.org/2000/xmlns/"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "VERSION": "1.0.0",
    "schemaLocation": "http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosGetObservation.xsd",
    "defaultPrefix": "sos",
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {
            "measurements": [],
            "observations": []
        };
        return this.readNode(e, t), t;
    },
    "write": function(e) {
        var t = this.writeNode("sos:GetObservation", e);
        return this.setAttributeNS(t, this.namespaces.xmlns, "xmlns:om", this.namespaces.om), 
        this.setAttributeNS(t, this.namespaces.xmlns, "xmlns:ogc", this.namespaces.ogc), 
        this.setAttributeNS(t, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "readers": {
        "om": {
            "ObservationCollection": function(e, t) {
                t.id = this.getAttributeNS(e, this.namespaces.gml, "id"), this.readChildNodes(e, t);
            },
            "member": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Measurement": function(e, t) {
                var i = {};
                t.measurements.push(i), this.readChildNodes(e, i);
            },
            "Observation": function(e, t) {
                var i = {};
                t.observations.push(i), this.readChildNodes(e, i);
            },
            "samplingTime": function(e, t) {
                var i = {};
                t.samplingTime = i, this.readChildNodes(e, i);
            },
            "observedProperty": function(e, t) {
                t.observedProperty = this.getAttributeNS(e, this.namespaces.xlink, "href"), this.readChildNodes(e, t);
            },
            "procedure": function(e, t) {
                t.procedure = this.getAttributeNS(e, this.namespaces.xlink, "href"), this.readChildNodes(e, t);
            },
            "featureOfInterest": function(e, t) {
                var i = {
                    "features": []
                };
                t.fois = [], t.fois.push(i), this.readChildNodes(e, i);
                for (var n = [], r = 0, s = i.features.length; r < s; r++) {
                    var a = i.features[r];
                    n.push(new OpenLayers.Feature.Vector(a.components[0], a.attributes));
                }
                i.features = n;
            },
            "result": function(e, t) {
                var i = {};
                t.result = i, "" !== this.getChildValue(e) ? (i.value = this.getChildValue(e), i.uom = e.getAttribute("uom")) : this.readChildNodes(e, i);
            }
        },
        "sa": OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.sa,
        "gml": OpenLayers.Util.applyDefaults({
            "TimeInstant": function(e, t) {
                var i = {};
                t.timeInstant = i, this.readChildNodes(e, i);
            },
            "timePosition": function(e, t) {
                t.timePosition = this.getChildValue(e);
            }
        }, OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.gml)
    },
    "writers": {
        "sos": {
            "GetObservation": function(e) {
                var t = this.createElementNSPlus("GetObservation", {
                    "attributes": {
                        "version": this.VERSION,
                        "service": "SOS"
                    }
                });
                this.writeNode("offering", e, t), e.eventTime && this.writeNode("eventTime", e, t);
                for (var i in e.procedures) this.writeNode("procedure", e.procedures[i], t);
                for (var n in e.observedProperties) this.writeNode("observedProperty", e.observedProperties[n], t);
                return e.foi && this.writeNode("featureOfInterest", e.foi, t), this.writeNode("responseFormat", e, t), 
                e.resultModel && this.writeNode("resultModel", e, t), e.responseMode && this.writeNode("responseMode", e, t), 
                t;
            },
            "featureOfInterest": function(e) {
                var t = this.createElementNSPlus("featureOfInterest");
                return this.writeNode("ObjectID", e.objectId, t), t;
            },
            "ObjectID": function(e) {
                return this.createElementNSPlus("ObjectID", {
                    "value": e
                });
            },
            "responseFormat": function(e) {
                return this.createElementNSPlus("responseFormat", {
                    "value": e.responseFormat
                });
            },
            "procedure": function(e) {
                return this.createElementNSPlus("procedure", {
                    "value": e
                });
            },
            "offering": function(e) {
                return this.createElementNSPlus("offering", {
                    "value": e.offering
                });
            },
            "observedProperty": function(e) {
                return this.createElementNSPlus("observedProperty", {
                    "value": e
                });
            },
            "eventTime": function(e) {
                var t = this.createElementNSPlus("eventTime");
                return "latest" === e.eventTime && this.writeNode("ogc:TM_Equals", e, t), t;
            },
            "resultModel": function(e) {
                return this.createElementNSPlus("resultModel", {
                    "value": e.resultModel
                });
            },
            "responseMode": function(e) {
                return this.createElementNSPlus("responseMode", {
                    "value": e.responseMode
                });
            }
        },
        "ogc": {
            "TM_Equals": function(e) {
                var t = this.createElementNSPlus("ogc:TM_Equals");
                return this.writeNode("ogc:PropertyName", {
                    "property": "urn:ogc:data:time:iso8601"
                }, t), "latest" === e.eventTime && this.writeNode("gml:TimeInstant", {
                    "value": "latest"
                }, t), t;
            },
            "PropertyName": function(e) {
                return this.createElementNSPlus("ogc:PropertyName", {
                    "value": e.property
                });
            }
        },
        "gml": {
            "TimeInstant": function(e) {
                var t = this.createElementNSPlus("gml:TimeInstant");
                return this.writeNode("gml:timePosition", e, t), t;
            },
            "timePosition": function(e) {
                return this.createElementNSPlus("gml:timePosition", {
                    "value": e.value
                });
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.SOSGetObservation"
}), OpenLayers.Format.Text = OpenLayers.Class(OpenLayers.Format, {
    "defaultStyle": null,
    "extractStyles": !0,
    "initialize": function(e) {
        !1 !== (e = e || {}).extractStyles && (e.defaultStyle = {
            "externalGraphic": OpenLayers.Util.getImageLocation("marker.png"),
            "graphicWidth": 21,
            "graphicHeight": 25,
            "graphicXOffset": -10.5,
            "graphicYOffset": -12.5
        }), OpenLayers.Format.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        for (var t, i = e.split("\n"), n = [], r = 0; r < i.length - 1; r++) {
            var s = i[r].replace(/^\s*/, "").replace(/\s*$/, "");
            if ("#" != s.charAt(0)) if (t) {
                for (var a = s.split("\t"), o = new OpenLayers.Geometry.Point(0, 0), l = {}, h = this.defaultStyle ? OpenLayers.Util.applyDefaults({}, this.defaultStyle) : null, u = !1, p = 0; p < a.length; p++) if (a[p]) if ("point" == t[p]) {
                    var c = a[p].split(",");
                    o.y = parseFloat(c[0]), o.x = parseFloat(c[1]), u = !0;
                } else if ("lat" == t[p]) o.y = parseFloat(a[p]), u = !0; else if ("lon" == t[p]) o.x = parseFloat(a[p]), 
                u = !0; else if ("title" == t[p]) l.title = a[p]; else if ("image" == t[p] || "icon" == t[p] && h) h.externalGraphic = a[p]; else if ("iconSize" == t[p] && h) {
                    var d = a[p].split(",");
                    h.graphicWidth = parseFloat(d[0]), h.graphicHeight = parseFloat(d[1]);
                } else if ("iconOffset" == t[p] && h) {
                    var f = a[p].split(",");
                    h.graphicXOffset = parseFloat(f[0]), h.graphicYOffset = parseFloat(f[1]);
                } else "description" == t[p] ? l.description = a[p] : "overflow" == t[p] ? l.overflow = a[p] : l[t[p]] = a[p];
                if (u) {
                    this.internalProjection && this.externalProjection && o.transform(this.externalProjection, this.internalProjection);
                    var y = new OpenLayers.Feature.Vector(o, l, h);
                    n.push(y);
                }
            } else t = s.split("\t");
        }
        return n;
    },
    "CLASS_NAME": "OpenLayers.Format.Text"
}), OpenLayers.Format.TMSCapabilities = OpenLayers.Class(OpenLayers.Format.XML, {
    "defaultPrefix": "tms",
    "readers": {
        "tms": {
            "Services": function(e, t) {
                t.services = [], this.readChildNodes(e, t);
            },
            "TileMapService": function(e, t) {
                t.services ? t.services.push({
                    "service": "TMS",
                    "version": e.getAttribute("version"),
                    "title": e.getAttribute("title"),
                    "href": e.getAttribute("href")
                }) : this.readChildNodes(e, t);
            },
            "TileMaps": function(e, t) {
                t.tileMaps = [], this.readChildNodes(e, t);
            },
            "TileMap": function(e, t) {
                t.tileMaps ? t.tileMaps.push({
                    "href": e.getAttribute("href"),
                    "srs": e.getAttribute("srs"),
                    "title": e.getAttribute("title"),
                    "profile": e.getAttribute("profile")
                }) : (t.version = e.getAttribute("version"), t.tileMapService = e.getAttribute("tilemapservice"), 
                this.readChildNodes(e, t));
            },
            "Title": function(e, t) {
                t.title = this.getChildValue(e);
            },
            "Abstract": function(e, t) {
                t.abstract = this.getChildValue(e);
            },
            "SRS": function(e, t) {
                t.srs = this.getChildValue(e);
            },
            "BoundingBox": function(e, t) {
                t.bbox = new OpenLayers.Bounds(e.getAttribute("minx"), e.getAttribute("miny"), e.getAttribute("maxx"), e.getAttribute("maxy"));
            },
            "Origin": function(e, t) {
                t.origin = new OpenLayers.LonLat(e.getAttribute("x"), e.getAttribute("y"));
            },
            "TileFormat": function(e, t) {
                t.tileFormat = {
                    "width": parseInt(e.getAttribute("width"), 10),
                    "height": parseInt(e.getAttribute("height"), 10),
                    "mimeType": e.getAttribute("mime-type"),
                    "extension": e.getAttribute("extension")
                };
            },
            "TileSets": function(e, t) {
                t.tileSets = [], this.readChildNodes(e, t);
            },
            "TileSet": function(e, t) {
                t.tileSets.push({
                    "href": e.getAttribute("href"),
                    "unitsPerPixel": parseFloat(e.getAttribute("units-per-pixel")),
                    "order": parseInt(e.getAttribute("order"), 10)
                });
            },
            "TileMapServerError": function(e, t) {
                t.error = !0;
            },
            "Message": function(e, t) {
                t.message = this.getChildValue(e);
            }
        }
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "CLASS_NAME": "OpenLayers.Format.TMSCapabilities"
}), OpenLayers.Format.WCSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.1.0",
    "CLASS_NAME": "OpenLayers.Format.WCSCapabilities"
}), OpenLayers.Format.WCSDescribeCoverage = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.1.0",
    "CLASS_NAME": "OpenLayers.Format.WCSDescribeCoverage"
}), OpenLayers.Format.WFS = OpenLayers.Class(OpenLayers.Format.GML, {
    "layer": null,
    "wfsns": "http://www.opengis.net/wfs",
    "ogcns": "http://www.opengis.net/ogc",
    "initialize": function(e, t) {
        OpenLayers.Format.GML.prototype.initialize.apply(this, [ e ]), this.layer = t, this.layer.featureNS && (this.featureNS = this.layer.featureNS), 
        this.layer.options.geometry_column && (this.geometryName = this.layer.options.geometry_column), 
        this.layer.options.typename && (this.featureName = this.layer.options.typename);
    },
    "write": function(e) {
        var t = this.createElementNS(this.wfsns, "wfs:Transaction");
        t.setAttribute("version", "1.0.0"), t.setAttribute("service", "WFS");
        for (var i = 0; i < e.length; i++) switch (e[i].state) {
          case OpenLayers.State.INSERT:
            t.appendChild(this.insert(e[i]));
            break;

          case OpenLayers.State.UPDATE:
            t.appendChild(this.update(e[i]));
            break;

          case OpenLayers.State.DELETE:
            t.appendChild(this.remove(e[i]));
        }
        return OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "createFeatureXML": function(e) {
        var t = this.buildGeometryNode(e.geometry), i = this.createElementNS(this.featureNS, "feature:" + this.geometryName);
        i.appendChild(t);
        var n = this.createElementNS(this.featureNS, "feature:" + this.featureName);
        n.appendChild(i);
        for (var r in e.attributes) {
            var s = this.createTextNode(e.attributes[r]), a = r;
            -1 != r.search(":") && (a = r.split(":")[1]);
            var o = this.createElementNS(this.featureNS, "feature:" + a);
            o.appendChild(s), n.appendChild(o);
        }
        return n;
    },
    "insert": function(e) {
        var t = this.createElementNS(this.wfsns, "wfs:Insert");
        return t.appendChild(this.createFeatureXML(e)), t;
    },
    "update": function(e) {
        e.fid || OpenLayers.Console.userError(OpenLayers.i18n("noFID"));
        var t = this.createElementNS(this.wfsns, "wfs:Update");
        t.setAttribute("typeName", this.featurePrefix + ":" + this.featureName), t.setAttribute("xmlns:" + this.featurePrefix, this.featureNS);
        var i = this.createElementNS(this.wfsns, "wfs:Property"), n = this.createElementNS(this.wfsns, "wfs:Name"), r = this.createTextNode(this.geometryName);
        n.appendChild(r), i.appendChild(n);
        var s = this.createElementNS(this.wfsns, "wfs:Value"), a = this.buildGeometryNode(e.geometry);
        e.layer && a.setAttribute("srsName", e.layer.projection.getCode()), s.appendChild(a), 
        i.appendChild(s), t.appendChild(i);
        for (var o in e.attributes) i = this.createElementNS(this.wfsns, "wfs:Property"), 
        (n = this.createElementNS(this.wfsns, "wfs:Name")).appendChild(this.createTextNode(o)), 
        i.appendChild(n), (s = this.createElementNS(this.wfsns, "wfs:Value")).appendChild(this.createTextNode(e.attributes[o])), 
        i.appendChild(s), t.appendChild(i);
        var l = this.createElementNS(this.ogcns, "ogc:Filter"), h = this.createElementNS(this.ogcns, "ogc:FeatureId");
        return h.setAttribute("fid", e.fid), l.appendChild(h), t.appendChild(l), t;
    },
    "remove": function(e) {
        if (!e.fid) return OpenLayers.Console.userError(OpenLayers.i18n("noFID")), !1;
        var t = this.createElementNS(this.wfsns, "wfs:Delete");
        t.setAttribute("typeName", this.featurePrefix + ":" + this.featureName), t.setAttribute("xmlns:" + this.featurePrefix, this.featureNS);
        var i = this.createElementNS(this.ogcns, "ogc:Filter"), n = this.createElementNS(this.ogcns, "ogc:FeatureId");
        return n.setAttribute("fid", e.fid), i.appendChild(n), t.appendChild(i), t;
    },
    "destroy": function() {
        this.layer = null;
    },
    "CLASS_NAME": "OpenLayers.Format.WFS"
}), OpenLayers.Format.WFSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.1.0",
    "CLASS_NAME": "OpenLayers.Format.WFSCapabilities"
}), OpenLayers.Format.WFSDescribeFeatureType = OpenLayers.Class(OpenLayers.Format.XML, {
    "regExes": {
        "trimSpace": /^\s*|\s*$/g
    },
    "namespaces": {
        "xsd": "http://www.w3.org/2001/XMLSchema"
    },
    "readers": {
        "xsd": {
            "schema": function(e, t) {
                var i, n, r = [], s = {}, a = {
                    "complexTypes": r,
                    "customTypes": s
                };
                this.readChildNodes(e, a);
                var o, l, h = e.attributes;
                for (i = 0, n = h.length; i < n; ++i) 0 === (l = (o = h[i]).name).indexOf("xmlns") ? this.setNamespace(l.split(":")[1] || "", o.value) : t[l] = o.value;
                t.featureTypes = r, t.targetPrefix = this.namespaceAlias[t.targetNamespace];
                var u, p;
                for (i = 0, n = r.length; i < n; ++i) p = s[(u = r[i]).typeName], s[u.typeName] && (u.typeName = p.name);
            },
            "complexType": function(e, t) {
                var i = {
                    "typeName": e.getAttribute("name")
                };
                this.readChildNodes(e, i), t.complexTypes.push(i);
            },
            "complexContent": function(e, t) {
                this.readChildNodes(e, t);
            },
            "extension": function(e, t) {
                this.readChildNodes(e, t);
            },
            "sequence": function(e, t) {
                var i = {
                    "elements": []
                };
                this.readChildNodes(e, i), t.properties = i.elements;
            },
            "element": function(e, t) {
                var i;
                if (t.elements) {
                    for (var n, r = {}, s = e.attributes, a = 0, o = s.length; a < o; ++a) r[(n = s[a]).name] = n.value;
                    (i = r.type) || (i = {}, this.readChildNodes(e, i), r.restriction = i, r.type = i.base);
                    var l = i.base || i;
                    r.localType = l.split(":").pop(), t.elements.push(r), this.readChildNodes(e, r);
                }
                if (t.complexTypes) {
                    var h = (i = e.getAttribute("type")).split(":").pop();
                    t.customTypes[h] = {
                        "name": e.getAttribute("name"),
                        "type": i
                    };
                }
            },
            "annotation": function(e, t) {
                t.annotation = {}, this.readChildNodes(e, t.annotation);
            },
            "appinfo": function(e, t) {
                t.appinfo || (t.appinfo = []), t.appinfo.push(this.getChildValue(e));
            },
            "documentation": function(e, t) {
                t.documentation || (t.documentation = []);
                var i = this.getChildValue(e);
                t.documentation.push({
                    "lang": e.getAttribute("xml:lang"),
                    "textContent": i.replace(this.regExes.trimSpace, "")
                });
            },
            "simpleType": function(e, t) {
                this.readChildNodes(e, t);
            },
            "restriction": function(e, t) {
                t.base = e.getAttribute("base"), this.readRestriction(e, t);
            }
        }
    },
    "readRestriction": function(e, t) {
        for (var i, n, r, s = e.childNodes, a = 0, o = s.length; a < o; ++a) 1 == (i = s[a]).nodeType && (n = i.nodeName.split(":").pop(), 
        r = i.getAttribute("value"), t[n] ? ("string" == typeof t[n] && (t[n] = [ t[n] ]), 
        t[n].push(r)) : t[n] = r);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        if ("ExceptionReport" === e.nodeName.split(":").pop()) {
            var i = new OpenLayers.Format.OGCExceptionReport();
            t.error = i.read(e);
        } else this.readNode(e, t);
        return t;
    },
    "CLASS_NAME": "OpenLayers.Format.WFSDescribeFeatureType"
}), OpenLayers.Format.WMC = OpenLayers.Class(OpenLayers.Format.Context, {
    "defaultVersion": "1.1.0",
    "layerToContext": function(e) {
        var t = this.getParser(), i = {
            "queryable": e.queryable,
            "visibility": e.visibility,
            "name": e.params.LAYERS,
            "title": e.name,
            "abstract": e.metadata.abstract,
            "dataURL": e.metadata.dataURL,
            "metadataURL": e.metadataURL,
            "attribution": e.attribution,
            "server": {
                "version": e.params.VERSION,
                "url": e.url
            },
            "maxExtent": e.maxExtent,
            "transparent": e.params.TRANSPARENT,
            "numZoomLevels": e.numZoomLevels,
            "units": e.units,
            "isBaseLayer": e.isBaseLayer,
            "opacity": 1 == e.opacity ? void 0 : e.opacity,
            "gutter": 0 == e.gutter ? void 0 : e.gutter,
            "displayInLayerSwitcher": e.displayInLayerSwitcher,
            "singleTile": e.singleTile,
            "tileSize": e.singleTile || !e.tileSize ? void 0 : {
                "width": e.tileSize.w,
                "height": e.tileSize.h
            },
            "minScale": e.options.resolutions || e.options.scales || e.options.maxResolution || e.options.minScale ? e.minScale : void 0,
            "maxScale": e.options.resolutions || e.options.scales || e.options.minResolution || e.options.maxScale ? e.maxScale : void 0,
            "formats": [],
            "styles": [],
            "srs": e.srs,
            "dimensions": e.dimensions
        };
        if (e.metadata.servertitle && (i.server.title = e.metadata.servertitle), e.metadata.formats && e.metadata.formats.length > 0) for (var n = 0, r = e.metadata.formats.length; n < r; n++) {
            var s = e.metadata.formats[n];
            i.formats.push({
                "value": s.value,
                "current": s.value == e.params.FORMAT
            });
        } else i.formats.push({
            "value": e.params.FORMAT,
            "current": !0
        });
        if (e.metadata.styles && e.metadata.styles.length > 0) for (var n = 0, r = e.metadata.styles.length; n < r; n++) {
            var a = e.metadata.styles[n];
            a.href == e.params.SLD || a.body == e.params.SLD_BODY || a.name == e.params.STYLES ? a.current = !0 : a.current = !1, 
            i.styles.push(a);
        } else i.styles.push({
            "href": e.params.SLD,
            "body": e.params.SLD_BODY,
            "name": e.params.STYLES || t.defaultStyleName,
            "title": t.defaultStyleTitle,
            "current": !0
        });
        return i;
    },
    "toContext": function(e) {
        var t = {}, i = e.layers;
        if ("OpenLayers.Map" == e.CLASS_NAME) {
            var n = e.metadata || {};
            t.size = e.getSize(), t.bounds = e.getExtent(), t.projection = e.projection, t.title = e.title, 
            t.keywords = n.keywords, t.abstract = n.abstract, t.logo = n.logo, t.descriptionURL = n.descriptionURL, 
            t.contactInformation = n.contactInformation, t.maxExtent = e.maxExtent;
        } else OpenLayers.Util.applyDefaults(t, e), void 0 != t.layers && delete t.layers;
        if (void 0 == t.layersContext && (t.layersContext = []), void 0 != i && OpenLayers.Util.isArray(i)) for (var r = 0, s = i.length; r < s; r++) {
            var a = i[r];
            a instanceof OpenLayers.Layer.WMS && t.layersContext.push(this.layerToContext(a));
        }
        return t;
    },
    "CLASS_NAME": "OpenLayers.Format.WMC"
}), OpenLayers.Format.WMSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.1.1",
    "profile": null,
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities"
}), OpenLayers.Format.WMSDescribeLayer = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.1.1",
    "CLASS_NAME": "OpenLayers.Format.WMSDescribeLayer"
}), OpenLayers.Format.WMTSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.0.0",
    "yx": {
        "urn:ogc:def:crs:EPSG::4326": !0
    },
    "createLayer": function(e, t) {
        if (!("layer" in t)) throw new Error("Missing property 'layer' in configuration.");
        for (var i, n = e.contents, r = (n.layers, 0), s = n.layers.length; r < s; ++r) if (n.layers[r].identifier === t.layer) {
            i = n.layers[r];
            break;
        }
        if (!i) throw new Error("Layer not found");
        var a = t.format;
        !a && i.formats && i.formats.length && (a = i.formats[0]);
        var o;
        if (t.matrixSet) o = n.tileMatrixSets[t.matrixSet]; else if (t.projection) {
            for (var r = 0, l = i.tileMatrixSetLinks.length; r < l; r++) if (n.tileMatrixSets[i.tileMatrixSetLinks[r].tileMatrixSet].supportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/, "$1:$3") === t.projection) {
                o = n.tileMatrixSets[i.tileMatrixSetLinks[r].tileMatrixSet];
                break;
            }
        } else i.tileMatrixSetLinks.length >= 1 && (o = n.tileMatrixSets[i.tileMatrixSetLinks[0].tileMatrixSet]);
        if (!o) throw new Error("matrixSet not found");
        for (var h, r = 0, s = i.styles.length; r < s && !(h = i.styles[r]).isDefault; ++r) ;
        var u = t.requestEncoding;
        if (!u && (u = "KVP", e.operationsMetadata.GetTile.dcp.http)) {
            var p = e.operationsMetadata.GetTile.dcp.http;
            if (p.get[0].constraints) {
                var c = p.get[0].constraints.GetEncoding.allowedValues;
                c.KVP || !c.REST && !c.RESTful || (u = "REST");
            }
        }
        var d = [], f = t.params || {};
        delete t.params;
        for (var y = 0, m = i.dimensions.length; y < m; y++) {
            var g = i.dimensions[y];
            d.push(g.identifier), f.hasOwnProperty(g.identifier) || (f[g.identifier] = g.default);
        }
        for (var v, L, O, b = t.projection || o.supportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/, "$1:$3"), w = t.units || ("EPSG:4326" === b ? "degrees" : "m"), C = [], S = [], x = i.tileMatrixSetLinks, _ = function(e) {
            C.push(28e-5 * e / OpenLayers.METERS_PER_INCH / OpenLayers.INCHES_PER_UNIT[w]), 
            (!v || v > e) && (v = e), (!L || L < e) && (L = e);
        }, E = 0, l = x.length; E < l; E++) if ((O = x[E]).tileMatrixSet === o.identifier) {
            if (O.tileMatrixSetLimits) {
                for (var N, P = {}, T = 0, M = o.matrixIds.length; T < M; T++) P[o.matrixIds[T].identifier] = o.matrixIds[T];
                for (var T = 0, M = O.tileMatrixSetLimits.length; T < M; T++) N = P[O.tileMatrixSetLimits[T].tileMatrix], 
                S.push(N), _(N.scaleDenominator);
            } else for (var T = 0, M = o.matrixIds.length; T < M; T++) _(o.matrixIds[T].scaleDenominator);
            break;
        }
        var F;
        if ("REST" === u && i.resourceUrls) {
            F = [];
            i.resourceUrls;
            for (var A, k = 0, I = i.resourceUrls.length; k < I; ++k) (A = i.resourceUrls[k]).format === a && "tile" === A.resourceType && F.push(A.template);
        } else {
            var R = e.operationsMetadata.GetTile.dcp.http.get;
            F = [];
            for (var D, r = 0, s = R.length; r < s; r++) (!(D = R[r].constraints) || D && D.GetEncoding.allowedValues[u]) && F.push(R[r].url);
        }
        C.sort(function(e, t) {
            return t - e;
        });
        var z = OpenLayers.Util.applyDefaults(t, {
            "url": F,
            "requestEncoding": u,
            "name": i.title,
            "style": h && h.identifier || "",
            "format": a,
            "matrixIds": S.length ? S : o.matrixIds,
            "matrixSet": o.identifier,
            "projection": b,
            "units": w,
            "tileFullExtent": o.bounds,
            "dimensions": d,
            "params": f,
            "resolutions": !1 === t.isBaseLayer ? void 0 : C,
            "serverResolutions": C,
            "minScale": 1 / Math.ceil(L),
            "maxScale": 1 / Math.floor(v)
        });
        return new OpenLayers.Layer.WMTS(z);
    },
    "CLASS_NAME": "OpenLayers.Format.WMTSCapabilities"
}), OpenLayers.Format.WPSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.0.0",
    "CLASS_NAME": "OpenLayers.Format.WPSCapabilities"
}), OpenLayers.Format.XLS = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.1.0",
    "stringifyOutput": !0,
    "CLASS_NAME": "OpenLayers.Format.XLS"
}), OpenLayers.Format.ArcXML.Features = OpenLayers.Class(OpenLayers.Format.XML, {
    "read": function(e) {
        return new OpenLayers.Format.ArcXML().read(e).features.feature;
    }
}), OpenLayers.Format.CSWGetDomain.v2_0_2 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "csw": "http://www.opengis.net/cat/csw/2.0.2"
    },
    "defaultPrefix": "csw",
    "version": "2.0.2",
    "schemaLocation": "http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",
    "PropertyName": null,
    "ParameterName": null,
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "readers": {
        "csw": {
            "GetDomainResponse": function(e, t) {
                this.readChildNodes(e, t);
            },
            "DomainValues": function(e, t) {
                OpenLayers.Util.isArray(t.DomainValues) || (t.DomainValues = []);
                for (var i = e.attributes, n = {}, r = 0, s = i.length; r < s; ++r) n[i[r].name] = i[r].nodeValue;
                this.readChildNodes(e, n), t.DomainValues.push(n);
            },
            "PropertyName": function(e, t) {
                t.PropertyName = this.getChildValue(e);
            },
            "ParameterName": function(e, t) {
                t.ParameterName = this.getChildValue(e);
            },
            "ListOfValues": function(e, t) {
                OpenLayers.Util.isArray(t.ListOfValues) || (t.ListOfValues = []), this.readChildNodes(e, t.ListOfValues);
            },
            "Value": function(e, t) {
                for (var i = e.attributes, n = {}, r = 0, s = i.length; r < s; ++r) n[i[r].name] = i[r].nodeValue;
                n.value = this.getChildValue(e), t.push({
                    "Value": n
                });
            },
            "ConceptualScheme": function(e, t) {
                t.ConceptualScheme = {}, this.readChildNodes(e, t.ConceptualScheme);
            },
            "Name": function(e, t) {
                t.Name = this.getChildValue(e);
            },
            "Document": function(e, t) {
                t.Document = this.getChildValue(e);
            },
            "Authority": function(e, t) {
                t.Authority = this.getChildValue(e);
            },
            "RangeOfValues": function(e, t) {
                t.RangeOfValues = {}, this.readChildNodes(e, t.RangeOfValues);
            },
            "MinValue": function(e, t) {
                for (var i = e.attributes, n = {}, r = 0, s = i.length; r < s; ++r) n[i[r].name] = i[r].nodeValue;
                n.value = this.getChildValue(e), t.MinValue = n;
            },
            "MaxValue": function(e, t) {
                for (var i = e.attributes, n = {}, r = 0, s = i.length; r < s; ++r) n[i[r].name] = i[r].nodeValue;
                n.value = this.getChildValue(e), t.MaxValue = n;
            }
        }
    },
    "write": function(e) {
        var t = this.writeNode("csw:GetDomain", e);
        return OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "writers": {
        "csw": {
            "GetDomain": function(e) {
                var t = this.createElementNSPlus("csw:GetDomain", {
                    "attributes": {
                        "service": "CSW",
                        "version": this.version
                    }
                });
                return e.PropertyName || this.PropertyName ? this.writeNode("csw:PropertyName", e.PropertyName || this.PropertyName, t) : (e.ParameterName || this.ParameterName) && this.writeNode("csw:ParameterName", e.ParameterName || this.ParameterName, t), 
                this.readChildNodes(t, e), t;
            },
            "PropertyName": function(e) {
                return this.createElementNSPlus("csw:PropertyName", {
                    "value": e
                });
            },
            "ParameterName": function(e) {
                return this.createElementNSPlus("csw:ParameterName", {
                    "value": e
                });
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.CSWGetDomain.v2_0_2"
}), OpenLayers.Format.CSWGetRecords.v2_0_2 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "csw": "http://www.opengis.net/cat/csw/2.0.2",
        "dc": "http://purl.org/dc/elements/1.1/",
        "dct": "http://purl.org/dc/terms/",
        "gmd": "http://www.isotc211.org/2005/gmd",
        "geonet": "http://www.fao.org/geonetwork",
        "ogc": "http://www.opengis.net/ogc",
        "ows": "http://www.opengis.net/ows",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "xmlns": "http://www.w3.org/2000/xmlns/"
    },
    "defaultPrefix": "csw",
    "version": "2.0.2",
    "schemaLocation": "http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",
    "requestId": null,
    "resultType": null,
    "outputFormat": null,
    "outputSchema": null,
    "startPosition": null,
    "maxRecords": null,
    "DistributedSearch": null,
    "ResponseHandler": null,
    "Query": null,
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "readers": {
        "csw": {
            "GetRecordsResponse": function(e, t) {
                t.records = [], this.readChildNodes(e, t);
                var i = this.getAttributeNS(e, "", "version");
                "" != i && (t.version = i);
            },
            "RequestId": function(e, t) {
                t.RequestId = this.getChildValue(e);
            },
            "SearchStatus": function(e, t) {
                t.SearchStatus = {};
                var i = this.getAttributeNS(e, "", "timestamp");
                "" != i && (t.SearchStatus.timestamp = i);
            },
            "SearchResults": function(e, t) {
                this.readChildNodes(e, t);
                for (var i = e.attributes, n = {}, r = 0, s = i.length; r < s; ++r) "numberOfRecordsMatched" == i[r].name || "numberOfRecordsReturned" == i[r].name || "nextRecord" == i[r].name ? n[i[r].name] = parseInt(i[r].nodeValue) : n[i[r].name] = i[r].nodeValue;
                t.SearchResults = n;
            },
            "SummaryRecord": function(e, t) {
                var i = {
                    "type": "SummaryRecord"
                };
                this.readChildNodes(e, i), t.records.push(i);
            },
            "BriefRecord": function(e, t) {
                var i = {
                    "type": "BriefRecord"
                };
                this.readChildNodes(e, i), t.records.push(i);
            },
            "DCMIRecord": function(e, t) {
                var i = {
                    "type": "DCMIRecord"
                };
                this.readChildNodes(e, i), t.records.push(i);
            },
            "Record": function(e, t) {
                var i = {
                    "type": "Record"
                };
                this.readChildNodes(e, i), t.records.push(i);
            },
            "*": function(e, t) {
                t[e.localName || e.nodeName.split(":").pop()] = this.getChildValue(e);
            }
        },
        "geonet": {
            "info": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.gninfo = i;
            }
        },
        "dc": {
            "*": function(e, t) {
                var i = e.localName || e.nodeName.split(":").pop();
                OpenLayers.Util.isArray(t[i]) || (t[i] = []);
                for (var n = {}, r = e.attributes, s = 0, a = r.length; s < a; ++s) n[r[s].name] = r[s].nodeValue;
                n.value = this.getChildValue(e), "" != n.value && t[i].push(n);
            }
        },
        "dct": {
            "*": function(e, t) {
                var i = e.localName || e.nodeName.split(":").pop();
                OpenLayers.Util.isArray(t[i]) || (t[i] = []), t[i].push(this.getChildValue(e));
            }
        },
        "ows": OpenLayers.Util.applyDefaults({
            "BoundingBox": function(e, t) {
                t.bounds && (t.BoundingBox = [ {
                    "crs": t.projection,
                    "value": [ t.bounds.left, t.bounds.bottom, t.bounds.right, t.bounds.top ]
                } ], delete t.projection, delete t.bounds), OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows.BoundingBox.apply(this, arguments);
            }
        }, OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows)
    },
    "write": function(e) {
        var t = this.writeNode("csw:GetRecords", e);
        return this.setAttributeNS(t, this.namespaces.xmlns, "xmlns:gmd", this.namespaces.gmd), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "writers": {
        "csw": {
            "GetRecords": function(e) {
                e || (e = {});
                var t = this.createElementNSPlus("csw:GetRecords", {
                    "attributes": {
                        "service": "CSW",
                        "version": this.version,
                        "requestId": e.requestId || this.requestId,
                        "resultType": e.resultType || this.resultType,
                        "outputFormat": e.outputFormat || this.outputFormat,
                        "outputSchema": e.outputSchema || this.outputSchema,
                        "startPosition": e.startPosition || this.startPosition,
                        "maxRecords": e.maxRecords || this.maxRecords
                    }
                });
                (e.DistributedSearch || this.DistributedSearch) && this.writeNode("csw:DistributedSearch", e.DistributedSearch || this.DistributedSearch, t);
                var i = e.ResponseHandler || this.ResponseHandler;
                if (OpenLayers.Util.isArray(i) && i.length > 0) for (var n = 0, r = i.length; n < r; n++) this.writeNode("csw:ResponseHandler", i[n], t);
                return this.writeNode("Query", e.Query || this.Query, t), t;
            },
            "DistributedSearch": function(e) {
                return this.createElementNSPlus("csw:DistributedSearch", {
                    "attributes": {
                        "hopCount": e.hopCount
                    }
                });
            },
            "ResponseHandler": function(e) {
                return this.createElementNSPlus("csw:ResponseHandler", {
                    "value": e.value
                });
            },
            "Query": function(e) {
                e || (e = {});
                var t = this.createElementNSPlus("csw:Query", {
                    "attributes": {
                        "typeNames": e.typeNames || "csw:Record"
                    }
                }), i = e.ElementName;
                if (OpenLayers.Util.isArray(i) && i.length > 0) for (var n = 0, r = i.length; n < r; n++) this.writeNode("csw:ElementName", i[n], t); else this.writeNode("csw:ElementSetName", e.ElementSetName || {
                    "value": "summary"
                }, t);
                return e.Constraint && this.writeNode("csw:Constraint", e.Constraint, t), e.SortBy && this.writeNode("ogc:SortBy", e.SortBy, t), 
                t;
            },
            "ElementName": function(e) {
                return this.createElementNSPlus("csw:ElementName", {
                    "value": e.value
                });
            },
            "ElementSetName": function(e) {
                return this.createElementNSPlus("csw:ElementSetName", {
                    "attributes": {
                        "typeNames": e.typeNames
                    },
                    "value": e.value
                });
            },
            "Constraint": function(e) {
                var t = this.createElementNSPlus("csw:Constraint", {
                    "attributes": {
                        "version": e.version
                    }
                });
                if (e.Filter) {
                    var i = new OpenLayers.Format.Filter({
                        "version": e.version
                    });
                    t.appendChild(i.write(e.Filter));
                } else if (e.CqlText) {
                    var n = this.createElementNSPlus("CqlText", {
                        "value": e.CqlText.value
                    });
                    t.appendChild(n);
                }
                return t;
            }
        },
        "ogc": OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc
    },
    "CLASS_NAME": "OpenLayers.Format.CSWGetRecords.v2_0_2"
}), OpenLayers.Format.Filter.v2 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "fes": "http://www.opengis.net/fes/2.0",
        "gml": "http://www.opengis.net/gml/3.2",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "defaultPrefix": "fes",
    "schemaLocation": null,
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        var t = {};
        return this.readers.fes.Filter.apply(this, [ e, t ]), t.filter;
    },
    "readers": {
        "fes": {
            "_expression": function(e) {
                for (var t, i = "", n = e.firstChild; n; n = n.nextSibling) switch (n.nodeType) {
                  case 1:
                    (t = this.readNode(n)).property ? i += "${" + t.property + "}" : void 0 !== t.value && (i += t.value);
                    break;

                  case 3:
                  case 4:
                    i += n.nodeValue;
                }
                return i;
            },
            "Filter": function(e, t) {
                var i = {
                    "fids": [],
                    "filters": []
                };
                this.readChildNodes(e, i), i.fids.length > 0 ? t.filter = new OpenLayers.Filter.FeatureId({
                    "fids": i.fids
                }) : i.filters.length > 0 && (t.filter = i.filters[0]);
            },
            "ResourceId": function(e, t) {
                var i = e.getAttribute("rid");
                i && t.fids.push(i);
            },
            "And": function(e, t) {
                var i = new OpenLayers.Filter.Logical({
                    "type": OpenLayers.Filter.Logical.AND
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "Or": function(e, t) {
                var i = new OpenLayers.Filter.Logical({
                    "type": OpenLayers.Filter.Logical.OR
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "Not": function(e, t) {
                var i = new OpenLayers.Filter.Logical({
                    "type": OpenLayers.Filter.Logical.NOT
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsLessThan": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.LESS_THAN
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsGreaterThan": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.GREATER_THAN
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsLessThanOrEqualTo": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsGreaterThanOrEqualTo": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsBetween": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.BETWEEN
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "Literal": function(e, t) {
                t.value = OpenLayers.String.numericIf(this.getChildValue(e), !0);
            },
            "ValueReference": function(e, t) {
                t.property = this.getChildValue(e);
            },
            "LowerBoundary": function(e, t) {
                t.lowerBoundary = OpenLayers.String.numericIf(this.readers.fes._expression.call(this, e), !0);
            },
            "UpperBoundary": function(e, t) {
                t.upperBoundary = OpenLayers.String.numericIf(this.readers.fes._expression.call(this, e), !0);
            },
            "Intersects": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.INTERSECTS);
            },
            "Within": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.WITHIN);
            },
            "Contains": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.CONTAINS);
            },
            "DWithin": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.DWITHIN);
            },
            "Distance": function(e, t) {
                t.distance = parseInt(this.getChildValue(e)), t.distanceUnits = e.getAttribute("units");
            },
            "Function": function(e, t) {},
            "PropertyIsNull": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.IS_NULL
                });
                this.readChildNodes(e, i), t.filters.push(i);
            }
        }
    },
    "readSpatial": function(e, t, i) {
        var n = new OpenLayers.Filter.Spatial({
            "type": i
        });
        this.readChildNodes(e, n), n.value = n.components[0], delete n.components, t.filters.push(n);
    },
    "encodeLiteral": function(e) {
        return e instanceof Date && (e = OpenLayers.Date.toISOString(e)), e;
    },
    "writeOgcExpression": function(e, t) {
        return e instanceof OpenLayers.Filter.Function ? this.writeNode("Function", e, t) : this.writeNode("Literal", e, t), 
        t;
    },
    "write": function(e) {
        return this.writers.fes.Filter.apply(this, [ e ]);
    },
    "writers": {
        "fes": {
            "Filter": function(e) {
                var t = this.createElementNSPlus("fes:Filter");
                return this.writeNode(this.getFilterType(e), e, t), t;
            },
            "_featureIds": function(e) {
                for (var t = this.createDocumentFragment(), i = 0, n = e.fids.length; i < n; ++i) this.writeNode("fes:ResourceId", e.fids[i], t);
                return t;
            },
            "ResourceId": function(e) {
                return this.createElementNSPlus("fes:ResourceId", {
                    "attributes": {
                        "rid": e
                    }
                });
            },
            "And": function(e) {
                for (var t, i = this.createElementNSPlus("fes:And"), n = 0, r = e.filters.length; n < r; ++n) t = e.filters[n], 
                this.writeNode(this.getFilterType(t), t, i);
                return i;
            },
            "Or": function(e) {
                for (var t, i = this.createElementNSPlus("fes:Or"), n = 0, r = e.filters.length; n < r; ++n) t = e.filters[n], 
                this.writeNode(this.getFilterType(t), t, i);
                return i;
            },
            "Not": function(e) {
                var t = this.createElementNSPlus("fes:Not"), i = e.filters[0];
                return this.writeNode(this.getFilterType(i), i, t), t;
            },
            "PropertyIsLessThan": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsLessThan");
                return this.writeNode("ValueReference", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsGreaterThan": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsGreaterThan");
                return this.writeNode("ValueReference", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsLessThanOrEqualTo": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsLessThanOrEqualTo");
                return this.writeNode("ValueReference", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsGreaterThanOrEqualTo": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsGreaterThanOrEqualTo");
                return this.writeNode("ValueReference", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsBetween": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsBetween");
                return this.writeNode("ValueReference", e, t), this.writeNode("LowerBoundary", e, t), 
                this.writeNode("UpperBoundary", e, t), t;
            },
            "ValueReference": function(e) {
                return this.createElementNSPlus("fes:ValueReference", {
                    "value": e.property
                });
            },
            "Literal": function(e) {
                var t = this.encodeLiteral || OpenLayers.Format.Filter.v1.prototype.encodeLiteral;
                return this.createElementNSPlus("fes:Literal", {
                    "value": t(e)
                });
            },
            "LowerBoundary": function(e) {
                var t = this.createElementNSPlus("fes:LowerBoundary");
                return this.writeOgcExpression(e.lowerBoundary, t), t;
            },
            "UpperBoundary": function(e) {
                var t = this.createElementNSPlus("fes:UpperBoundary");
                return this.writeNode("Literal", e.upperBoundary, t), t;
            },
            "INTERSECTS": function(e) {
                return this.writeSpatial(e, "Intersects");
            },
            "WITHIN": function(e) {
                return this.writeSpatial(e, "Within");
            },
            "CONTAINS": function(e) {
                return this.writeSpatial(e, "Contains");
            },
            "DWITHIN": function(e) {
                var t = this.writeSpatial(e, "DWithin");
                return this.writeNode("Distance", e, t), t;
            },
            "Distance": function(e) {
                return this.createElementNSPlus("fes:Distance", {
                    "attributes": {
                        "units": e.distanceUnits
                    },
                    "value": e.distance
                });
            },
            "Function": function(e) {
                for (var t = this.createElementNSPlus("fes:Function", {
                    "attributes": {
                        "name": e.name
                    }
                }), i = e.params, n = 0, r = i.length; n < r; n++) this.writeOgcExpression(i[n], t);
                return t;
            },
            "PropertyIsNull": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsNull");
                return this.writeNode("ValueReference", e, t), t;
            }
        }
    },
    "getFilterType": function(e) {
        var t = this.filterMap[e.type];
        if (!t) throw "Filter writing not supported for rule type: " + e.type;
        return t;
    },
    "filterMap": {
        "&&": "And",
        "||": "Or",
        "!": "Not",
        "==": "PropertyIsEqualTo",
        "!=": "PropertyIsNotEqualTo",
        "<": "PropertyIsLessThan",
        ">": "PropertyIsGreaterThan",
        "<=": "PropertyIsLessThanOrEqualTo",
        ">=": "PropertyIsGreaterThanOrEqualTo",
        "..": "PropertyIsBetween",
        "~": "PropertyIsLike",
        "NULL": "PropertyIsNull",
        "BBOX": "BBOX",
        "DWITHIN": "DWITHIN",
        "WITHIN": "WITHIN",
        "CONTAINS": "CONTAINS",
        "INTERSECTS": "INTERSECTS",
        "FID": "_featureIds"
    },
    "CLASS_NAME": "OpenLayers.Format.Filter.v2"
}), OpenLayers.Format.Filter.v2_0_0 = OpenLayers.Class(OpenLayers.Format.GML.v3, OpenLayers.Format.Filter.v2, {
    "VERSION": "2.0.0",
    "schemaLocation": "http://schemas.opengis.net/filter/2.0/filterAll.xsd",
    "initialize": function(e) {
        OpenLayers.Format.GML.v3.prototype.initialize.apply(this, [ e ]);
    },
    "readers": {
        "fes": OpenLayers.Util.applyDefaults({
            "PropertyIsEqualTo": function(e, t) {
                var i = e.getAttribute("matchCase"), n = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.EQUAL_TO,
                    "matchCase": !("false" === i || "0" === i)
                });
                this.readChildNodes(e, n), t.filters.push(n);
            },
            "PropertyIsNotEqualTo": function(e, t) {
                var i = e.getAttribute("matchCase"), n = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.NOT_EQUAL_TO,
                    "matchCase": !("false" === i || "0" === i)
                });
                this.readChildNodes(e, n), t.filters.push(n);
            },
            "PropertyIsLike": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.LIKE
                });
                this.readChildNodes(e, i);
                var n = e.getAttribute("wildCard"), r = e.getAttribute("singleChar"), s = e.getAttribute("escapeChar");
                i.value2regex(n, r, s), t.filters.push(i);
            }
        }, OpenLayers.Format.Filter.v2.prototype.readers.fes),
        "gml": OpenLayers.Format.GML.v3.prototype.readers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.readers.feature
    },
    "writers": {
        "fes": OpenLayers.Util.applyDefaults({
            "PropertyIsEqualTo": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsEqualTo", {
                    "attributes": {
                        "matchCase": e.matchCase
                    }
                });
                return this.writeNode("ValueReference", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsNotEqualTo": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsNotEqualTo", {
                    "attributes": {
                        "matchCase": e.matchCase
                    }
                });
                return this.writeNode("ValueReference", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsLike": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsLike", {
                    "attributes": {
                        "matchCase": e.matchCase,
                        "wildCard": "*",
                        "singleChar": ".",
                        "escapeChar": "!"
                    }
                });
                return this.writeNode("ValueReference", e, t), this.writeNode("Literal", e.regex2value(), t), 
                t;
            },
            "BBOX": function(e) {
                var t = this.createElementNSPlus("fes:BBOX");
                e.property && this.writeNode("ValueReference", e, t);
                var i = this.writeNode("gml:Envelope", e.value);
                return e.projection && i.setAttribute("srsName", e.projection), t.appendChild(i), 
                t;
            },
            "SortBy": function(e) {
                for (var t = this.createElementNSPlus("fes:SortBy"), i = 0, n = e.length; i < n; i++) this.writeNode("fes:SortProperty", e[i], t);
                return t;
            },
            "SortProperty": function(e) {
                var t = this.createElementNSPlus("fes:SortProperty");
                return this.writeNode("fes:ValueReference", e, t), this.writeNode("fes:SortOrder", "DESC" == e.order ? "DESC" : "ASC", t), 
                t;
            },
            "SortOrder": function(e) {
                return this.createElementNSPlus("fes:SortOrder", {
                    "value": e
                });
            }
        }, OpenLayers.Format.Filter.v2.prototype.writers.fes),
        "gml": OpenLayers.Format.GML.v3.prototype.writers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.writers.feature
    },
    "writeSpatial": function(e, t) {
        var i = this.createElementNSPlus("fes:" + t);
        if (this.writeNode("ValueReference", e, i), e.value instanceof OpenLayers.Filter.Function) this.writeNode("Function", e.value, i); else {
            var n;
            n = e.value instanceof OpenLayers.Geometry ? this.writeNode("feature:_geometry", e.value).firstChild : this.writeNode("gml:Envelope", e.value), 
            e.projection && n.setAttribute("srsName", e.projection), i.appendChild(n);
        }
        return i;
    },
    "CLASS_NAME": "OpenLayers.Format.Filter.v2_0_0"
}), OpenLayers.Format.OWSContext.v0_3_1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "owc": "http://www.opengis.net/ows-context",
        "gml": "http://www.opengis.net/gml",
        "kml": "http://www.opengis.net/kml/2.2",
        "ogc": "http://www.opengis.net/ogc",
        "ows": "http://www.opengis.net/ows",
        "sld": "http://www.opengis.net/sld",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "VERSION": "0.3.1",
    "schemaLocation": "http://www.opengis.net/ows-context http://www.ogcnetwork.net/schemas/owc/0.3.1/owsContext.xsd",
    "defaultPrefix": "owc",
    "extractAttributes": !0,
    "xy": !0,
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "featurePrefix": "feature",
    "featureNS": "http://mapserver.gis.umn.edu/mapserver",
    "featureType": "vector",
    "geometryName": "geometry",
    "nestingLayerLookup": null,
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]), OpenLayers.Format.GML.v2.prototype.setGeometryTypes.call(this);
    },
    "setNestingPath": function(e) {
        if (e.layersContext) for (var t = 0, i = e.layersContext.length; t < i; t++) {
            var n = e.layersContext[t], r = [], s = e.title || "";
            e.metadata && e.metadata.nestingPath && (r = e.metadata.nestingPath.slice()), "" != s && r.push(s), 
            n.metadata.nestingPath = r, n.layersContext && this.setNestingPath(n);
        }
    },
    "decomposeNestingPath": function(e) {
        var t = [];
        if (OpenLayers.Util.isArray(e)) {
            for (var i = e.slice(); i.length > 0; ) t.push(i.slice()), i.pop();
            t.reverse();
        }
        return t;
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        this.readNode(e, t), this.setNestingPath({
            "layersContext": t.layersContext
        });
        var i = [];
        return this.processLayer(i, t), delete t.layersContext, t.layersContext = i, t;
    },
    "processLayer": function(e, t) {
        if (t.layersContext) for (var i = 0, n = t.layersContext.length; i < n; i++) {
            var r = t.layersContext[i];
            e.push(r), r.layersContext && this.processLayer(e, r);
        }
    },
    "write": function(e, t) {
        this.nestingLayerLookup = {}, t = t || {}, OpenLayers.Util.applyDefaults(t, e);
        var i = this.writeNode("OWSContext", t);
        return this.nestingLayerLookup = null, this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "readers": {
        "kml": {
            "Document": function(e, t) {
                t.features = new OpenLayers.Format.KML({
                    "kmlns": this.namespaces.kml,
                    "extractStyles": !0
                }).read(e);
            }
        },
        "owc": {
            "OWSContext": function(e, t) {
                this.readChildNodes(e, t);
            },
            "General": function(e, t) {
                this.readChildNodes(e, t);
            },
            "ResourceList": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Layer": function(e, t) {
                var i = {
                    "metadata": {},
                    "visibility": "1" != e.getAttribute("hidden"),
                    "queryable": "1" == e.getAttribute("queryable"),
                    "opacity": null != e.getAttribute("opacity") ? parseFloat(e.getAttribute("opacity")) : null,
                    "name": e.getAttribute("name"),
                    "categoryLayer": null == e.getAttribute("name"),
                    "formats": [],
                    "styles": []
                };
                t.layersContext || (t.layersContext = []), t.layersContext.push(i), this.readChildNodes(e, i);
            },
            "InlineGeometry": function(e, t) {
                t.features = [];
                var i, n = this.getElementsByTagNameNS(e, this.namespaces.gml, "featureMember");
                if (n.length >= 1 && (i = n[0]), i && i.firstChild) {
                    var r = i.firstChild.nextSibling ? i.firstChild.nextSibling : i.firstChild;
                    this.setNamespace("feature", r.namespaceURI), this.featureType = r.localName || r.nodeName.split(":").pop(), 
                    this.readChildNodes(e, t);
                }
            },
            "Server": function(e, t) {
                (t.service || t.version) && t.service == OpenLayers.Format.Context.serviceTypes.WMS || (t.service = e.getAttribute("service"), 
                t.version = e.getAttribute("version"), this.readChildNodes(e, t));
            },
            "Name": function(e, t) {
                t.name = this.getChildValue(e), this.readChildNodes(e, t);
            },
            "Title": function(e, t) {
                t.title = this.getChildValue(e), this.readChildNodes(e, t);
            },
            "StyleList": function(e, t) {
                this.readChildNodes(e, t.styles);
            },
            "Style": function(e, t) {
                var i = {};
                t.push(i), this.readChildNodes(e, i);
            },
            "LegendURL": function(e, t) {
                var i = {};
                t.legend = i, this.readChildNodes(e, i);
            },
            "OnlineResource": function(e, t) {
                t.url = this.getAttributeNS(e, this.namespaces.xlink, "href"), this.readChildNodes(e, t);
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows,
        "gml": OpenLayers.Format.GML.v2.prototype.readers.gml,
        "sld": OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld,
        "feature": OpenLayers.Format.GML.v2.prototype.readers.feature
    },
    "writers": {
        "owc": {
            "OWSContext": function(e) {
                var t = this.createElementNSPlus("OWSContext", {
                    "attributes": {
                        "version": this.VERSION,
                        "id": e.id || OpenLayers.Util.createUniqueID("OpenLayers_OWSContext_")
                    }
                });
                return this.writeNode("General", e, t), this.writeNode("ResourceList", e, t), t;
            },
            "General": function(e) {
                var t = this.createElementNSPlus("General");
                return this.writeNode("ows:BoundingBox", e, t), this.writeNode("ows:Title", e.title || "OpenLayers OWSContext", t), 
                t;
            },
            "ResourceList": function(e) {
                for (var t = this.createElementNSPlus("ResourceList"), i = 0, n = e.layers.length; i < n; i++) {
                    var r = e.layers[i], s = this.decomposeNestingPath(r.metadata.nestingPath);
                    this.writeNode("_Layer", {
                        "layer": r,
                        "subPaths": s
                    }, t);
                }
                return t;
            },
            "Server": function(e) {
                var t = this.createElementNSPlus("Server", {
                    "attributes": {
                        "version": e.version,
                        "service": e.service
                    }
                });
                return this.writeNode("OnlineResource", e, t), t;
            },
            "OnlineResource": function(e) {
                return this.createElementNSPlus("OnlineResource", {
                    "attributes": {
                        "xlink:href": e.url
                    }
                });
            },
            "InlineGeometry": function(e) {
                var t = this.createElementNSPlus("InlineGeometry"), i = e.getDataExtent();
                null !== i && this.writeNode("gml:boundedBy", i, t);
                for (var n = 0, r = e.features.length; n < r; n++) this.writeNode("gml:featureMember", e.features[n], t);
                return t;
            },
            "StyleList": function(e) {
                for (var t = this.createElementNSPlus("StyleList"), i = 0, n = e.length; i < n; i++) this.writeNode("Style", e[i], t);
                return t;
            },
            "Style": function(e) {
                var t = this.createElementNSPlus("Style");
                return this.writeNode("Name", e, t), this.writeNode("Title", e, t), e.legend && this.writeNode("LegendURL", e, t), 
                t;
            },
            "Name": function(e) {
                return this.createElementNSPlus("Name", {
                    "value": e.name
                });
            },
            "Title": function(e) {
                return this.createElementNSPlus("Title", {
                    "value": e.title
                });
            },
            "LegendURL": function(e) {
                var t = this.createElementNSPlus("LegendURL");
                return this.writeNode("OnlineResource", e.legend, t), t;
            },
            "_WMS": function(e) {
                var t = this.createElementNSPlus("Layer", {
                    "attributes": {
                        "name": e.params.LAYERS,
                        "queryable": e.queryable ? "1" : "0",
                        "hidden": e.visibility ? "0" : "1",
                        "opacity": e.hasOwnProperty("opacity") ? e.opacity : null
                    }
                });
                return this.writeNode("ows:Title", e.name, t), this.writeNode("ows:OutputFormat", e.params.FORMAT, t), 
                this.writeNode("Server", {
                    "service": OpenLayers.Format.Context.serviceTypes.WMS,
                    "version": e.params.VERSION,
                    "url": e.url
                }, t), e.metadata.styles && e.metadata.styles.length > 0 && this.writeNode("StyleList", e.metadata.styles, t), 
                t;
            },
            "_Layer": function(e) {
                var t, i, n, r;
                if (t = e.layer, i = e.subPaths, n = null, r = null, i.length > 0) {
                    var s = i[0].join("/"), a = s.lastIndexOf("/");
                    return n = this.nestingLayerLookup[s], r = a > 0 ? s.substring(a + 1, s.length) : s, 
                    n || (n = this.createElementNSPlus("Layer"), this.writeNode("ows:Title", r, n), 
                    this.nestingLayerLookup[s] = n), e.subPaths.shift(), this.writeNode("_Layer", e, n), 
                    n;
                }
                return t instanceof OpenLayers.Layer.WMS ? n = this.writeNode("_WMS", t) : t instanceof OpenLayers.Layer.Vector && (t.protocol instanceof OpenLayers.Protocol.WFS.v1 ? n = this.writeNode("_WFS", t) : t.protocol instanceof OpenLayers.Protocol.HTTP ? t.protocol.format instanceof OpenLayers.Format.GML ? (t.protocol.format.version = "2.1.2", 
                n = this.writeNode("_GML", t)) : t.protocol.format instanceof OpenLayers.Format.KML && (t.protocol.format.version = "2.2", 
                n = this.writeNode("_KML", t)) : (this.setNamespace("feature", this.featureNS), 
                n = this.writeNode("_InlineGeometry", t))), t.options.maxScale && this.writeNode("sld:MinScaleDenominator", t.options.maxScale, n), 
                t.options.minScale && this.writeNode("sld:MaxScaleDenominator", t.options.minScale, n), 
                this.nestingLayerLookup[t.name] = n, n;
            },
            "_WFS": function(e) {
                var t = this.createElementNSPlus("Layer", {
                    "attributes": {
                        "name": e.protocol.featurePrefix + ":" + e.protocol.featureType,
                        "hidden": e.visibility ? "0" : "1"
                    }
                });
                return this.writeNode("ows:Title", e.name, t), this.writeNode("Server", {
                    "service": OpenLayers.Format.Context.serviceTypes.WFS,
                    "version": e.protocol.version,
                    "url": e.protocol.url
                }, t), t;
            },
            "_InlineGeometry": function(e) {
                var t = this.createElementNSPlus("Layer", {
                    "attributes": {
                        "name": this.featureType,
                        "hidden": e.visibility ? "0" : "1"
                    }
                });
                return this.writeNode("ows:Title", e.name, t), this.writeNode("InlineGeometry", e, t), 
                t;
            },
            "_GML": function(e) {
                var t = this.createElementNSPlus("Layer");
                return this.writeNode("ows:Title", e.name, t), this.writeNode("Server", {
                    "service": OpenLayers.Format.Context.serviceTypes.GML,
                    "url": e.protocol.url,
                    "version": e.protocol.format.version
                }, t), t;
            },
            "_KML": function(e) {
                var t = this.createElementNSPlus("Layer");
                return this.writeNode("ows:Title", e.name, t), this.writeNode("Server", {
                    "service": OpenLayers.Format.Context.serviceTypes.KML,
                    "version": e.protocol.format.version,
                    "url": e.protocol.url
                }, t), t;
            }
        },
        "gml": OpenLayers.Util.applyDefaults({
            "boundedBy": function(e) {
                var t = this.createElementNSPlus("gml:boundedBy");
                return this.writeNode("gml:Box", e, t), t;
            }
        }, OpenLayers.Format.GML.v2.prototype.writers.gml),
        "ows": OpenLayers.Format.OWSCommon.v1_0_0.prototype.writers.ows,
        "sld": OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld,
        "feature": OpenLayers.Format.GML.v2.prototype.writers.feature
    },
    "CLASS_NAME": "OpenLayers.Format.OWSContext.v0_3_1"
}), OpenLayers.Format.SLD.v1_0_0_GeoServer = OpenLayers.Class(OpenLayers.Format.SLD.v1_0_0, {
    "version": "1.0.0",
    "profile": "GeoServer",
    "readers": OpenLayers.Util.applyDefaults({
        "sld": OpenLayers.Util.applyDefaults({
            "Priority": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.priority = OpenLayers.String.trim(i));
            },
            "VendorOption": function(e, t) {
                t.vendorOptions || (t.vendorOptions = {}), t.vendorOptions[e.getAttribute("name")] = this.getChildValue(e);
            },
            "TextSymbolizer": function(e, t) {
                OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld.TextSymbolizer.apply(this, arguments);
                var i = this.multipleSymbolizers ? t.symbolizers[t.symbolizers.length - 1] : t.symbolizer.Text;
                void 0 === i.graphic && (i.graphic = !1);
            }
        }, OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld)
    }, OpenLayers.Format.SLD.v1_0_0.prototype.readers),
    "writers": OpenLayers.Util.applyDefaults({
        "sld": OpenLayers.Util.applyDefaults({
            "Priority": function(e) {
                return this.writers.sld._OGCExpression.call(this, "sld:Priority", e);
            },
            "VendorOption": function(e) {
                return this.createElementNSPlus("sld:VendorOption", {
                    "attributes": {
                        "name": e.name
                    },
                    "value": e.value
                });
            },
            "TextSymbolizer": function(e) {
                var t = OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.TextSymbolizer.apply(this, arguments);
                return !1 !== e.graphic && (e.externalGraphic || e.graphicName) && this.writeNode("Graphic", e, t), 
                "priority" in e && this.writeNode("Priority", e.priority, t), this.addVendorOptions(t, e);
            },
            "PointSymbolizer": function(e) {
                var t = OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.PointSymbolizer.apply(this, arguments);
                return this.addVendorOptions(t, e);
            },
            "LineSymbolizer": function(e) {
                var t = OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.LineSymbolizer.apply(this, arguments);
                return this.addVendorOptions(t, e);
            },
            "PolygonSymbolizer": function(e) {
                var t = OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.PolygonSymbolizer.apply(this, arguments);
                return this.addVendorOptions(t, e);
            }
        }, OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld)
    }, OpenLayers.Format.SLD.v1_0_0.prototype.writers),
    "addVendorOptions": function(e, t) {
        if (t.vendorOptions) for (var i in t.vendorOptions) this.writeNode("VendorOption", {
            "name": i,
            "value": t.vendorOptions[i]
        }, e);
        return e;
    },
    "CLASS_NAME": "OpenLayers.Format.SLD.v1_0_0_GeoServer"
}), OpenLayers.Format.SOSCapabilities.v1_0_0 = OpenLayers.Class(OpenLayers.Format.SOSCapabilities, {
    "namespaces": {
        "ows": "http://www.opengis.net/ows/1.1",
        "sos": "http://www.opengis.net/sos/1.0",
        "gml": "http://www.opengis.net/gml",
        "xlink": "http://www.w3.org/1999/xlink"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]), this.options = e;
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "readers": {
        "gml": OpenLayers.Util.applyDefaults({
            "name": function(e, t) {
                t.name = this.getChildValue(e);
            },
            "TimePeriod": function(e, t) {
                t.timePeriod = {}, this.readChildNodes(e, t.timePeriod);
            },
            "beginPosition": function(e, t) {
                t.beginPosition = this.getChildValue(e);
            },
            "endPosition": function(e, t) {
                t.endPosition = this.getChildValue(e);
            }
        }, OpenLayers.Format.GML.v3.prototype.readers.gml),
        "sos": {
            "Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Contents": function(e, t) {
                t.contents = {}, this.readChildNodes(e, t.contents);
            },
            "ObservationOfferingList": function(e, t) {
                t.offeringList = {}, this.readChildNodes(e, t.offeringList);
            },
            "ObservationOffering": function(e, t) {
                var i = this.getAttributeNS(e, this.namespaces.gml, "id");
                t[i] = {
                    "procedures": [],
                    "observedProperties": [],
                    "featureOfInterestIds": [],
                    "responseFormats": [],
                    "resultModels": [],
                    "responseModes": []
                }, this.readChildNodes(e, t[i]);
            },
            "time": function(e, t) {
                t.time = {}, this.readChildNodes(e, t.time);
            },
            "procedure": function(e, t) {
                t.procedures.push(this.getAttributeNS(e, this.namespaces.xlink, "href"));
            },
            "observedProperty": function(e, t) {
                t.observedProperties.push(this.getAttributeNS(e, this.namespaces.xlink, "href"));
            },
            "featureOfInterest": function(e, t) {
                t.featureOfInterestIds.push(this.getAttributeNS(e, this.namespaces.xlink, "href"));
            },
            "responseFormat": function(e, t) {
                t.responseFormats.push(this.getChildValue(e));
            },
            "resultModel": function(e, t) {
                t.resultModels.push(this.getChildValue(e));
            },
            "responseMode": function(e, t) {
                t.responseModes.push(this.getChildValue(e));
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.SOSCapabilities.v1_0_0"
}), OpenLayers.Format.WCSCapabilities.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "splitSpace": /\s+/
    },
    "defaultPrefix": "wcs",
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "CLASS_NAME": "OpenLayers.Format.WCSCapabilities.v1"
}), OpenLayers.Format.WCSCapabilities.v1_0_0 = OpenLayers.Class(OpenLayers.Format.GML.v3, OpenLayers.Format.WCSCapabilities.v1, {
    "namespaces": {
        "wcs": "http://www.opengis.net/wcs",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "ows": "http://www.opengis.net/ows"
    },
    "errorProperty": "serviceIdentification",
    "readers": {
        "wcs": {
            "WCS_Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Service": function(e, t) {
                var i = {};
                this.readChildNodes(e, i);
                var n = i.serviceContact.providerName;
                delete i.serviceContact.providerName, t.serviceProvider = {
                    "providerName": n,
                    "serviceContact": i.serviceContact
                }, i.serviceContact = void 0, t.serviceIdentification = i;
            },
            "keywords": function(e, t) {
                t.keywords = [], this.readChildNodes(e, t.keywords);
            },
            "keyword": function(e, t) {
                t.push(this.getChildValue(e));
            },
            "responsibleParty": function(e, t) {
                t.serviceContact = {}, this.readChildNodes(e, t.serviceContact);
            },
            "individualName": function(e, t) {
                t.individualName = this.getChildValue(e);
            },
            "organisationName": function(e, t) {
                t.providerName = this.getChildValue(e);
            },
            "positionName": function(e, t) {
                t.positionName = this.getChildValue(e);
            },
            "contactInfo": function(e, t) {
                t.contactInfo = {}, this.readChildNodes(e, t.contactInfo);
            },
            "phone": function(e, t) {
                t.phone = {}, this.readChildNodes(e, t.phone);
            },
            "voice": function(e, t) {
                t.voice = this.getChildValue(e);
            },
            "facsimile": function(e, t) {
                t.facsimile = this.getChildValue(e);
            },
            "address": function(e, t) {
                t.address = {}, this.readChildNodes(e, t.address);
            },
            "deliveryPoint": function(e, t) {
                t.deliveryPoint = this.getChildValue(e);
            },
            "city": function(e, t) {
                t.city = this.getChildValue(e);
            },
            "postalCode": function(e, t) {
                t.postalCode = this.getChildValue(e);
            },
            "country": function(e, t) {
                t.country = this.getChildValue(e);
            },
            "electronicMailAddress": function(e, t) {
                t.electronicMailAddress = this.getChildValue(e);
            },
            "fees": function(e, t) {
                t.fees = this.getChildValue(e);
            },
            "accessConstraints": function(e, t) {
                t.accessConstraints = this.getChildValue(e);
            },
            "ContentMetadata": function(e, t) {
                t.contentMetadata = [], this.readChildNodes(e, t.contentMetadata);
            },
            "CoverageOfferingBrief": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.push(i);
            },
            "name": function(e, t) {
                "Service" === e.parentNode.nodeName.split(":").pop() ? t.title = this.getChildValue(e) : t.identifier = this.getChildValue(e);
            },
            "label": function(e, t) {
                "Service" === e.parentNode.nodeName.split(":").pop() ? t.abstract = this.getChildValue(e) : t.title = this.getChildValue(e);
            },
            "lonLatEnvelope": function(e, t) {
                var i = this.getElementsByTagNameNS(e, "http://www.opengis.net/gml", "pos");
                if (2 == i.length) {
                    var n = {}, r = {};
                    this.xy = !0, this.readers.gml.pos.apply(this, [ i[0], n ]), this.readers.gml.pos.apply(this, [ i[1], r ]), 
                    t.lonLatEnvelope = {}, t.lonLatEnvelope.srsName = e.getAttribute("srsName"), t.lonLatEnvelope.min = n.points[0], 
                    t.lonLatEnvelope.max = r.points[0];
                }
            }
        },
        "gml": OpenLayers.Format.GML.v3.prototype.readers.gml
    },
    "CLASS_NAME": "OpenLayers.Format.WCSCapabilities.v1_0_0"
}), OpenLayers.Format.WCSCapabilities.v1_1_0 = OpenLayers.Class(OpenLayers.Format.WCSCapabilities.v1, {
    "namespaces": {
        "wcs": "http://www.opengis.net/wcs/1.1",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "ows": "http://www.opengis.net/ows/1.1"
    },
    "errorProperty": "operationsMetadata",
    "readers": {
        "wcs": OpenLayers.Util.applyDefaults({
            "Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Contents": function(e, t) {
                t.contentMetadata = [], this.readChildNodes(e, t.contentMetadata);
            },
            "CoverageSummary": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.push(i);
            },
            "Identifier": function(e, t) {
                t.identifier = this.getChildValue(e);
            },
            "Title": function(e, t) {
                t.title = this.getChildValue(e);
            },
            "Abstract": function(e, t) {
                t.abstract = this.getChildValue(e);
            },
            "SupportedCRS": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.supportedCRS || (t.supportedCRS = []), t.supportedCRS.push(i));
            },
            "SupportedFormat": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.supportedFormat || (t.supportedFormat = []), t.supportedFormat.push(i));
            }
        }, OpenLayers.Format.WCSCapabilities.v1.prototype.readers.wcs),
        "ows": OpenLayers.Util.applyDefaults({
            "Keywords": function(e, t) {
                t.keywords = [], this.readChildNodes(e, t.keywords);
            },
            "Keyword": function(e, t) {
                t.push(this.getChildValue(e));
            }
        }, OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows)
    },
    "CLASS_NAME": "OpenLayers.Format.WCSCapabilities.v1_1_0"
}), OpenLayers.Format.WCSDescribeCoverage.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "splitSpace": /\s+/
    },
    "defaultPrefix": "wcs",
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        if ("ExceptionReport" === e.nodeName.split(":").pop()) {
            var i = new OpenLayers.Format.OGCExceptionReport();
            t.error = i.read(e);
        } else this.readNode(e, t);
        return t;
    },
    "CLASS_NAME": "OpenLayers.Format.WCSDescribeCoverage.v1"
}), OpenLayers.Format.WCSDescribeCoverage.v1_0_0 = OpenLayers.Class(OpenLayers.Format.WCSDescribeCoverage.v1, {
    "namespaces": {
        "wcs": "http://www.opengis.net/wcs",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "ows": "http://www.opengis.net/ows",
        "gml": "http://www.opengis.net/gml"
    },
    "readers": {
        "wcs": {
            "CoverageDescription": function(e, t) {
                t.coverageDescriptions = {}, this.readChildNodes(e, t.coverageDescriptions), t.coverageDescriptionKeys = [];
                for (var i in t.coverageDescriptions) t.coverageDescriptionKeys.push(i);
            },
            "CoverageOffering": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t[i.identifier] = i, i.nativeCRS = i.supportedCRSs.nativeCRSs[0];
            },
            "name": function(e, t) {
                t.identifier = this.getChildValue(e);
            },
            "label": function(e, t) {
                t.title = this.getChildValue(e);
            },
            "lonLatEnvelope": function(e, t) {
                OpenLayers.Format.WCSCapabilities.v1_0_0.prototype.readers.wcs.lonLatEnvelope.call(this, e, t);
            },
            "domainSet": function(e, t) {
                t.domain = {}, this.readChildNodes(e, t.domain);
            },
            "spatialDomain": function(e, t) {
                t.spatialDomain = {
                    "boundingBoxes": {}
                }, this.readChildNodes(e, t.spatialDomain);
            },
            "nativeCRSs": function(e, t) {
                t.nativeCRSs || (t.nativeCRSs = []);
                var i = this.getChildValue(e);
                t.nativeCRSs.push(i);
            },
            "supportedCRSs": function(e, t) {
                t.supportedCRSs || (t.supportedCRSs = []), this.readChildNodes(e, t.supportedCRSs);
            },
            "requestResponseCRSs": function(e, t) {
                t.push(this.getChildValue(e));
            },
            "supportedFormats": function(e, t) {
                t.supportedFormats || (t.supportedFormats = []), this.readChildNodes(e, t.supportedFormats);
            },
            "formats": function(e, t) {
                t.push(this.getChildValue(e));
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows,
        "gml": OpenLayers.Util.applyDefaults({
            "Envelope": function(e, t) {
                var i = e.getAttribute("srsName");
                if (i) {
                    var n = {
                        "points": []
                    };
                    this.readChildNodes(e, n);
                    var r = n.points[0], s = n.points[1], a = new OpenLayers.Bounds(r.x, r.y, s.x, s.y);
                    t.boundingBoxes[i] = a;
                }
            }
        }, OpenLayers.Format.GML.v3.prototype.readers.gml)
    },
    "CLASS_NAME": "OpenLayers.Format.WCSDescribeCoverage.v1_0_0"
}), OpenLayers.Format.WCSDescribeCoverage.v1_1_0 = OpenLayers.Class(OpenLayers.Format.WCSDescribeCoverage.v1, {
    "namespaces": {
        "wcs": "http://www.opengis.net/wcs/1.1",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "ows": "http://www.opengis.net/ows/1.1",
        "owsesri": "http://www.opengis.net/ows"
    },
    "readers": {
        "wcs": {
            "CoverageDescriptions": function(e, t) {
                t.coverageDescriptions = {}, this.readChildNodes(e, t.coverageDescriptions), t.coverageDescriptionKeys = [];
                for (var i in t.coverageDescriptions) t.coverageDescriptionKeys.push(i);
            },
            "CoverageDescription": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t[i.identifier] = i, i.nativeCRS = i.domain.spatialDomain.gridCRS.gridBaseCRS;
            },
            "Identifier": function(e, t) {
                t.identifier = this.getChildValue(e);
            },
            "Title": function(e, t) {
                t.title = this.getChildValue(e);
            },
            "Domain": function(e, t) {
                t.domain = {}, this.readChildNodes(e, t.domain);
            },
            "SpatialDomain": function(e, t) {
                t.spatialDomain = {
                    "boundingBoxes": {}
                };
                var i = {
                    "BoundingBox": []
                };
                this.readChildNodes(e, i);
                for (var n = 0, r = i.BoundingBox.length; n < r; n++) i.BoundingBox[n].crs && (t.spatialDomain.boundingBoxes[i.BoundingBox[n].crs] = i.BoundingBox[n].bounds);
                t.spatialDomain.gridCRS = i.gridCRS;
            },
            "GridCRS": function(e, t) {
                t.gridCRS = {}, this.readChildNodes(e, t.gridCRS);
            },
            "GridBaseCRS": function(e, t) {
                t.gridBaseCRS = this.getChildValue(e);
            },
            "GridType": function(e, t) {
                t.gridType = this.getChildValue(e);
            },
            "GridOrigin": function(e, t) {
                var i = this.getChildValue(e).split(" ");
                2 == i.length && (t.gridOrigin = {}, t.gridOrigin.x = Number(i[0]), t.gridOrigin.y = Number(i[1]));
            },
            "GridOffsets": function(e, t) {
                var i = this.getChildValue(e).split(" ");
                2 == i.length && (t.gridOffsets = {}, t.gridOffsets.x = Number(i[0]), t.gridOffsets.y = Number(i[1]));
            },
            "GridCS": function(e, t) {
                t.gridCS = this.getChildValue(e);
            },
            "SupportedCRS": function(e, t) {
                t.supportedCRSs || (t.supportedCRSs = []);
                var i = this.getChildValue(e);
                t.supportedCRSs.push(i);
            },
            "SupportedFormat": function(e, t) {
                t.supportedFormats || (t.supportedFormats = []);
                var i = this.getChildValue(e);
                t.supportedFormats.push(i);
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows,
        "owsesri": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WCSDescribeCoverage.v1_1_0"
}), OpenLayers.Format.WFSCapabilities.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "wfs": "http://www.opengis.net/wfs",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "ows": "http://www.opengis.net/ows"
    },
    "errorProperty": "featureTypeList",
    "defaultPrefix": "wfs",
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "readers": {
        "wfs": {
            "WFS_Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "FeatureTypeList": function(e, t) {
                t.featureTypeList = {
                    "featureTypes": []
                }, this.readChildNodes(e, t.featureTypeList);
            },
            "FeatureType": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.featureTypes.push(i);
            },
            "Name": function(e, t) {
                var i = this.getChildValue(e);
                if (i) {
                    var n = i.split(":");
                    t.name = n.pop(), n.length > 0 && (t.featureNS = this.lookupNamespaceURI(e, n[0]));
                }
            },
            "Title": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.title = i);
            },
            "Abstract": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.abstract = i);
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.WFSCapabilities.v1"
}), OpenLayers.Format.WFSCapabilities.v1_0_0 = OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1, {
    "readers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "Service": function(e, t) {
                t.service = {}, this.readChildNodes(e, t.service);
            },
            "Fees": function(e, t) {
                var i = this.getChildValue(e);
                i && "none" != i.toLowerCase() && (t.fees = i);
            },
            "AccessConstraints": function(e, t) {
                var i = this.getChildValue(e);
                i && "none" != i.toLowerCase() && (t.accessConstraints = i);
            },
            "OnlineResource": function(e, t) {
                var i = this.getChildValue(e);
                i && "none" != i.toLowerCase() && (t.onlineResource = i);
            },
            "Keywords": function(e, t) {
                var i = this.getChildValue(e);
                i && "none" != i.toLowerCase() && (t.keywords = i.split(", "));
            },
            "Capability": function(e, t) {
                t.capability = {}, this.readChildNodes(e, t.capability);
            },
            "Request": function(e, t) {
                t.request = {}, this.readChildNodes(e, t.request);
            },
            "GetFeature": function(e, t) {
                t.getfeature = {
                    "href": {},
                    "formats": []
                }, this.readChildNodes(e, t.getfeature);
            },
            "ResultFormat": function(e, t) {
                for (var i, n = e.childNodes, r = 0; r < n.length; r++) 1 == (i = n[r]).nodeType && t.formats.push(i.nodeName);
            },
            "DCPType": function(e, t) {
                this.readChildNodes(e, t);
            },
            "HTTP": function(e, t) {
                this.readChildNodes(e, t.href);
            },
            "Get": function(e, t) {
                t.get = e.getAttribute("onlineResource");
            },
            "Post": function(e, t) {
                t.post = e.getAttribute("onlineResource");
            },
            "SRS": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.srs = i);
            },
            "LatLongBoundingBox": function(e, t) {
                t.latLongBoundingBox = [ parseFloat(e.getAttribute("minx")), parseFloat(e.getAttribute("miny")), parseFloat(e.getAttribute("maxx")), parseFloat(e.getAttribute("maxy")) ];
            }
        }, OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs)
    },
    "CLASS_NAME": "OpenLayers.Format.WFSCapabilities.v1_0_0"
}), OpenLayers.Format.WFSCapabilities.v1_1_0 = OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1, {
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "readers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "DefaultSRS": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.srs = i);
            }
        }, OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs),
        "ows": OpenLayers.Format.OWSCommon.v1.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WFSCapabilities.v1_1_0"
}), OpenLayers.Format.WFSCapabilities.v2_0_0 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "wfs": "http://www.opengis.net/wfs/2.0",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "ows": "http://www.opengis.net/ows/1.1"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "errorProperty": "featureTypeList",
    "defaultPrefix": "wfs",
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "readers": {
        "wfs": {
            "WFS_Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "FeatureTypeList": function(e, t) {
                t.featureTypeList = {
                    "featureTypes": []
                }, this.readChildNodes(e, t.featureTypeList);
            },
            "FeatureType": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.featureTypes.push(i);
            },
            "Name": function(e, t) {
                var i = this.getChildValue(e);
                if (i) {
                    var n = i.split(":");
                    t.name = n.pop(), n.length > 0 && (t.featureNS = this.lookupNamespaceURI(e, n[0]));
                }
            },
            "Title": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.title = i);
            },
            "Abstract": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.abstract = i);
            },
            "DefaultCRS": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.srs = i);
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WFSCapabilities.v2_0_0"
}), OpenLayers.Format.WFST.v1_0_0 = OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0, OpenLayers.Format.WFST.v1, {
    "version": "1.0.0",
    "srsNameInQuery": !1,
    "schemaLocations": {
        "wfs": "http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd"
    },
    "initialize": function(e) {
        OpenLayers.Format.Filter.v1_0_0.prototype.initialize.apply(this, [ e ]), OpenLayers.Format.WFST.v1.prototype.initialize.apply(this, [ e ]);
    },
    "readNode": function(e, t, i) {
        return OpenLayers.Format.GML.v2.prototype.readNode.apply(this, arguments);
    },
    "readers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "WFS_TransactionResponse": function(e, t) {
                t.insertIds = [], t.success = !1, this.readChildNodes(e, t);
            },
            "InsertResult": function(e, t) {
                var i = {
                    "fids": []
                };
                this.readChildNodes(e, i), t.insertIds = t.insertIds.concat(i.fids);
            },
            "TransactionResult": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Status": function(e, t) {
                this.readChildNodes(e, t);
            },
            "SUCCESS": function(e, t) {
                t.success = !0;
            }
        }, OpenLayers.Format.WFST.v1.prototype.readers.wfs),
        "gml": OpenLayers.Format.GML.v2.prototype.readers.gml,
        "feature": OpenLayers.Format.GML.v2.prototype.readers.feature,
        "ogc": OpenLayers.Format.Filter.v1_0_0.prototype.readers.ogc
    },
    "writers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "Query": function(e) {
                var t = (e = OpenLayers.Util.extend({
                    "featureNS": this.featureNS,
                    "featurePrefix": this.featurePrefix,
                    "featureType": this.featureType,
                    "srsName": this.srsName,
                    "srsNameInQuery": this.srsNameInQuery
                }, e)).featurePrefix, i = this.createElementNSPlus("wfs:Query", {
                    "attributes": {
                        "typeName": (e.featureNS ? t + ":" : "") + e.featureType
                    }
                });
                if (e.srsNameInQuery && e.srsName && i.setAttribute("srsName", e.srsName), e.featureNS && this.setAttributeNS(i, this.namespaces.xmlns, "xmlns:" + t, e.featureNS), 
                e.propertyNames) for (var n = 0, r = e.propertyNames.length; n < r; n++) this.writeNode("ogc:PropertyName", {
                    "property": e.propertyNames[n]
                }, i);
                return e.filter && (this.setFilterProperty(e.filter), this.writeNode("ogc:Filter", e.filter, i)), 
                i;
            }
        }, OpenLayers.Format.WFST.v1.prototype.writers.wfs),
        "gml": OpenLayers.Format.GML.v2.prototype.writers.gml,
        "feature": OpenLayers.Format.GML.v2.prototype.writers.feature,
        "ogc": OpenLayers.Format.Filter.v1_0_0.prototype.writers.ogc
    },
    "CLASS_NAME": "OpenLayers.Format.WFST.v1_0_0"
}), OpenLayers.Format.WFST.v2_0_0 = OpenLayers.Class(OpenLayers.Format.Filter.v2_0_0, OpenLayers.Format.WFST.v1, {
    "namespaces": {
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "wfs": "http://www.opengis.net/wfs/2.0",
        "gml": "http://www.opengis.net/gml/3.2",
        "fes": "http://www.opengis.net/fes/2.0",
        "xmlns": "http://www.w3.org/2000/xmlns/"
    },
    "version": "2.0.0",
    "schemaLocations": {
        "wfs": "http://schemas.opengis.net/wfs/2.0/wfs.xsd"
    },
    "initialize": function(e) {
        OpenLayers.Format.Filter.v2_0_0.prototype.initialize.apply(this, [ e ]), OpenLayers.Format.WFST.v1.prototype.initialize.apply(this, [ e ]);
    },
    "readNode": function(e, t, i) {
        return OpenLayers.Format.GML.v3.prototype.readNode.apply(this, arguments);
    },
    "readers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "FeatureCollection": function(e, t) {
                t.numberReturned = parseInt(e.getAttribute("numberReturned")), t.numberMatched = parseInt(e.getAttribute("numberMatched")), 
                OpenLayers.Format.WFST.v1.prototype.readers.wfs.FeatureCollection.apply(this, arguments);
            },
            "TransactionResponse": function(e, t) {
                t.insertIds = [], t.success = !1, this.readChildNodes(e, t);
            },
            "TransactionSummary": function(e, t) {
                t.success = !0;
            },
            "InsertResults": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Feature": function(e, t) {
                var i = {
                    "fids": []
                };
                this.readChildNodes(e, i), t.insertIds.push(i.fids[0]);
            },
            "member": function(e, t) {
                this.readChildNodes(e, t);
            },
            "boundedBy": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), i.components && i.components.length > 0 && (t.bounds = i.components[0]);
            }
        }, OpenLayers.Format.WFST.v1.prototype.readers.wfs),
        "gml": OpenLayers.Format.GML.v3.prototype.readers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.readers.feature,
        "ows": OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows,
        "fes": OpenLayers.Format.Filter.v2_0_0.prototype.readers.fes
    },
    "writers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "GetFeature": function(e) {
                var t = OpenLayers.Format.WFST.v1.prototype.writers.wfs.GetFeature.apply(this, arguments);
                return e && this.setAttributes(t, {
                    "resultType": e.resultType,
                    "startIndex": e.startIndex,
                    "count": e.count
                }), t;
            },
            "Query": function(e) {
                var t = (e = OpenLayers.Util.extend({
                    "featureNS": this.featureNS,
                    "featurePrefix": this.featurePrefix,
                    "featureType": this.featureType,
                    "srsName": this.srsName
                }, e)).featurePrefix, i = this.createElementNSPlus("wfs:Query", {
                    "attributes": {
                        "typeNames": (e.featureNS ? t + ":" : "") + e.featureType,
                        "srsName": e.srsName
                    }
                });
                if (e.featureNS && this.setAttributeNS(i, this.namespaces.xmlns, "xmlns:" + t, e.featureNS), 
                e.propertyNames) for (var n = 0, r = e.propertyNames.length; n < r; n++) this.writeNode("wfs:PropertyName", {
                    "property": e.propertyNames[n]
                }, i);
                return e.filter && (this.setFilterProperty(e.filter), this.writeNode("fes:Filter", e.filter, i)), 
                i;
            },
            "Update": function(e) {
                var t = e.feature, i = e.options, n = this.createElementNSPlus("wfs:Update", {
                    "attributes": {
                        "handle": i && i.handle,
                        "typeName": (this.featureNS ? this.featurePrefix + ":" : "") + this.featureType
                    }
                });
                this.featureNS && this.setAttributeNS(n, this.namespaces.xmlns, "xmlns:" + this.featurePrefix, this.featureNS);
                var r = t.modified;
                null === this.geometryName || r && void 0 === r.geometry || (this.srsName = this.getSrsName(t), 
                this.writeNode("Property", {
                    "name": this.geometryName,
                    "value": t.geometry
                }, n));
                for (var s in t.attributes) void 0 === t.attributes[s] || r && r.attributes && !(r.attributes && s in r.attributes) || this.writeNode("Property", {
                    "name": s,
                    "value": t.attributes[s]
                }, n);
                return this.writeNode("fes:Filter", new OpenLayers.Filter.FeatureId({
                    "fids": [ t.fid ]
                }), n), n;
            },
            "Property": function(e) {
                var t = this.createElementNSPlus("wfs:Property");
                return this.writeNode("ValueReference", e.name, t), null !== e.value && this.writeNode("Value", e.value, t), 
                t;
            },
            "PropertyName": function(e) {
                return this.createElementNSPlus("wfs:PropertyName", {
                    "value": e.property
                });
            },
            "ValueReference": function(e) {
                return this.createElementNSPlus("wfs:ValueReference", {
                    "value": e
                });
            },
            "Delete": function(e) {
                var t = e.feature, i = e.options, n = this.createElementNSPlus("wfs:Delete", {
                    "attributes": {
                        "handle": i && i.handle,
                        "typeName": (this.featureNS ? this.featurePrefix + ":" : "") + this.featureType
                    }
                });
                return this.featureNS && this.setAttributeNS(n, this.namespaces.xmlns, "xmlns:" + this.featurePrefix, this.featureNS), 
                this.writeNode("fes:Filter", new OpenLayers.Filter.FeatureId({
                    "fids": [ t.fid ]
                }), n), n;
            }
        }, OpenLayers.Format.WFST.v1.prototype.writers.wfs),
        "gml": OpenLayers.Format.GML.v3.prototype.writers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.writers.feature,
        "fes": OpenLayers.Format.Filter.v2_0_0.prototype.writers.fes
    },
    "CLASS_NAME": "OpenLayers.Format.WFST.v2_0_0"
}), OpenLayers.Format.WMC.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "ol": "http://openlayers.org/context",
        "wmc": "http://www.opengis.net/context",
        "sld": "http://www.opengis.net/sld",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "schemaLocation": "",
    "getNamespacePrefix": function(e) {
        var t = null;
        if (null == e) t = this.namespaces[this.defaultPrefix]; else for (t in this.namespaces) if (this.namespaces[t] == e) break;
        return t;
    },
    "defaultPrefix": "wmc",
    "rootPrefix": null,
    "defaultStyleName": "",
    "defaultStyleTitle": "Default",
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var t = e.documentElement;
        this.rootPrefix = t.prefix;
        var i = {
            "version": t.getAttribute("version")
        };
        return this.runChildNodes(i, t), i;
    },
    "runChildNodes": function(e, t) {
        for (var i, n, r = t.childNodes, s = 0, a = r.length; s < a; ++s) 1 == (i = r[s]).nodeType && (n = this["read_" + this.getNamespacePrefix(i.namespaceURI) + "_" + i.nodeName.split(":").pop()]) && n.apply(this, [ e, i ]);
    },
    "read_wmc_General": function(e, t) {
        this.runChildNodes(e, t);
    },
    "read_wmc_BoundingBox": function(e, t) {
        e.projection = t.getAttribute("SRS"), e.bounds = new OpenLayers.Bounds(t.getAttribute("minx"), t.getAttribute("miny"), t.getAttribute("maxx"), t.getAttribute("maxy"));
    },
    "read_wmc_LayerList": function(e, t) {
        e.layersContext = [], this.runChildNodes(e, t);
    },
    "read_wmc_Layer": function(e, t) {
        var i = {
            "visibility": "1" != t.getAttribute("hidden"),
            "queryable": "1" == t.getAttribute("queryable"),
            "formats": [],
            "styles": [],
            "metadata": {}
        };
        this.runChildNodes(i, t), e.layersContext.push(i);
    },
    "read_wmc_Extension": function(e, t) {
        this.runChildNodes(e, t);
    },
    "read_ol_units": function(e, t) {
        e.units = this.getChildValue(t);
    },
    "read_ol_maxExtent": function(e, t) {
        var i = new OpenLayers.Bounds(t.getAttribute("minx"), t.getAttribute("miny"), t.getAttribute("maxx"), t.getAttribute("maxy"));
        e.maxExtent = i;
    },
    "read_ol_transparent": function(e, t) {
        e.transparent = this.getChildValue(t);
    },
    "read_ol_numZoomLevels": function(e, t) {
        e.numZoomLevels = parseInt(this.getChildValue(t));
    },
    "read_ol_opacity": function(e, t) {
        e.opacity = parseFloat(this.getChildValue(t));
    },
    "read_ol_singleTile": function(e, t) {
        e.singleTile = "true" == this.getChildValue(t);
    },
    "read_ol_tileSize": function(e, t) {
        var i = {
            "width": t.getAttribute("width"),
            "height": t.getAttribute("height")
        };
        e.tileSize = i;
    },
    "read_ol_gutter": function(e, t) {
        e.gutter = parseInt(this.getChildValue(t));
    },
    "read_ol_isBaseLayer": function(e, t) {
        e.isBaseLayer = "true" == this.getChildValue(t);
    },
    "read_ol_displayInLayerSwitcher": function(e, t) {
        e.displayInLayerSwitcher = "true" == this.getChildValue(t);
    },
    "read_ol_attribution": function(e, t) {
        e.attribution = {}, this.runChildNodes(e.attribution, t);
    },
    "read_wmc_Server": function(e, t) {
        e.version = t.getAttribute("version"), e.url = this.getOnlineResource_href(t), e.metadata.servertitle = t.getAttribute("title");
    },
    "read_wmc_FormatList": function(e, t) {
        this.runChildNodes(e, t);
    },
    "read_wmc_Format": function(e, t) {
        var i = {
            "value": this.getChildValue(t)
        };
        "1" == t.getAttribute("current") && (i.current = !0), e.formats.push(i);
    },
    "read_wmc_StyleList": function(e, t) {
        this.runChildNodes(e, t);
    },
    "read_wmc_Style": function(e, t) {
        var i = {};
        this.runChildNodes(i, t), "1" == t.getAttribute("current") && (i.current = !0), 
        e.styles.push(i);
    },
    "read_wmc_SLD": function(e, t) {
        this.runChildNodes(e, t);
    },
    "read_sld_StyledLayerDescriptor": function(e, t) {
        var i = OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
        e.body = i;
    },
    "read_sld_FeatureTypeStyle": function(e, t) {
        var i = OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
        e.body = i;
    },
    "read_wmc_OnlineResource": function(e, t) {
        e.href = this.getAttributeNS(t, this.namespaces.xlink, "href");
    },
    "read_wmc_Name": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.name = i);
    },
    "read_wmc_Title": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.title = i);
    },
    "read_wmc_MetadataURL": function(e, t) {
        e.metadataURL = this.getOnlineResource_href(t);
    },
    "read_wmc_KeywordList": function(e, t) {
        e.keywords = [], this.runChildNodes(e.keywords, t);
    },
    "read_wmc_Keyword": function(e, t) {
        e.push(this.getChildValue(t));
    },
    "read_wmc_Abstract": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.abstract = i);
    },
    "read_wmc_LogoURL": function(e, t) {
        e.logo = {
            "width": t.getAttribute("width"),
            "height": t.getAttribute("height"),
            "format": t.getAttribute("format"),
            "href": this.getOnlineResource_href(t)
        };
    },
    "read_wmc_DescriptionURL": function(e, t) {
        e.descriptionURL = this.getOnlineResource_href(t);
    },
    "read_wmc_ContactInformation": function(e, t) {
        var i = {};
        this.runChildNodes(i, t), e.contactInformation = i;
    },
    "read_wmc_ContactPersonPrimary": function(e, t) {
        var i = {};
        this.runChildNodes(i, t), e.personPrimary = i;
    },
    "read_wmc_ContactPerson": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.person = i);
    },
    "read_wmc_ContactOrganization": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.organization = i);
    },
    "read_wmc_ContactPosition": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.position = i);
    },
    "read_wmc_ContactAddress": function(e, t) {
        var i = {};
        this.runChildNodes(i, t), e.contactAddress = i;
    },
    "read_wmc_AddressType": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.type = i);
    },
    "read_wmc_Address": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.address = i);
    },
    "read_wmc_City": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.city = i);
    },
    "read_wmc_StateOrProvince": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.stateOrProvince = i);
    },
    "read_wmc_PostCode": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.postcode = i);
    },
    "read_wmc_Country": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.country = i);
    },
    "read_wmc_ContactVoiceTelephone": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.phone = i);
    },
    "read_wmc_ContactFacsimileTelephone": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.fax = i);
    },
    "read_wmc_ContactElectronicMailAddress": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.email = i);
    },
    "read_wmc_DataURL": function(e, t) {
        e.dataURL = this.getOnlineResource_href(t);
    },
    "read_wmc_LegendURL": function(e, t) {
        var i = {
            "width": t.getAttribute("width"),
            "height": t.getAttribute("height"),
            "format": t.getAttribute("format"),
            "href": this.getOnlineResource_href(t)
        };
        e.legend = i;
    },
    "read_wmc_DimensionList": function(e, t) {
        e.dimensions = {}, this.runChildNodes(e.dimensions, t);
    },
    "read_wmc_Dimension": function(e, t) {
        var i = {
            "name": t.getAttribute("name").toLowerCase(),
            "units": t.getAttribute("units") || "",
            "unitSymbol": t.getAttribute("unitSymbol") || "",
            "userValue": t.getAttribute("userValue") || "",
            "nearestValue": "1" === t.getAttribute("nearestValue"),
            "multipleValues": "1" === t.getAttribute("multipleValues"),
            "current": "1" === t.getAttribute("current"),
            "default": t.getAttribute("default") || ""
        }, n = this.getChildValue(t);
        i.values = n.split(","), e[i.name] = i;
    },
    "write": function(e, t) {
        var i = this.createElementDefaultNS("ViewContext");
        return this.setAttributes(i, {
            "version": this.VERSION,
            "id": t && "string" == typeof t.id ? t.id : OpenLayers.Util.createUniqueID("OpenLayers_Context_")
        }), this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        i.appendChild(this.write_wmc_General(e)), i.appendChild(this.write_wmc_LayerList(e)), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "createElementDefaultNS": function(e, t, i) {
        var n = this.createElementNS(this.namespaces[this.defaultPrefix], e);
        return t && n.appendChild(this.createTextNode(t)), i && this.setAttributes(n, i), 
        n;
    },
    "setAttributes": function(e, t) {
        var i;
        for (var n in t) (i = t[n].toString()).match(/[A-Z]/) ? this.setAttributeNS(e, null, n, i) : e.setAttribute(n, i);
    },
    "write_wmc_General": function(e) {
        var t = this.createElementDefaultNS("General");
        e.size && t.appendChild(this.createElementDefaultNS("Window", null, {
            "width": e.size.w,
            "height": e.size.h
        }));
        var i = e.bounds;
        return t.appendChild(this.createElementDefaultNS("BoundingBox", null, {
            "minx": i.left.toPrecision(18),
            "miny": i.bottom.toPrecision(18),
            "maxx": i.right.toPrecision(18),
            "maxy": i.top.toPrecision(18),
            "SRS": e.projection
        })), t.appendChild(this.createElementDefaultNS("Title", e.title)), e.keywords && t.appendChild(this.write_wmc_KeywordList(e.keywords)), 
        e.abstract && t.appendChild(this.createElementDefaultNS("Abstract", e.abstract)), 
        e.logo && t.appendChild(this.write_wmc_URLType("LogoURL", e.logo.href, e.logo)), 
        e.descriptionURL && t.appendChild(this.write_wmc_URLType("DescriptionURL", e.descriptionURL)), 
        e.contactInformation && t.appendChild(this.write_wmc_ContactInformation(e.contactInformation)), 
        t.appendChild(this.write_ol_MapExtension(e)), t;
    },
    "write_wmc_KeywordList": function(e) {
        for (var t = this.createElementDefaultNS("KeywordList"), i = 0, n = e.length; i < n; i++) t.appendChild(this.createElementDefaultNS("Keyword", e[i]));
        return t;
    },
    "write_wmc_ContactInformation": function(e) {
        var t = this.createElementDefaultNS("ContactInformation");
        return e.personPrimary && t.appendChild(this.write_wmc_ContactPersonPrimary(e.personPrimary)), 
        e.position && t.appendChild(this.createElementDefaultNS("ContactPosition", e.position)), 
        e.contactAddress && t.appendChild(this.write_wmc_ContactAddress(e.contactAddress)), 
        e.phone && t.appendChild(this.createElementDefaultNS("ContactVoiceTelephone", e.phone)), 
        e.fax && t.appendChild(this.createElementDefaultNS("ContactFacsimileTelephone", e.fax)), 
        e.email && t.appendChild(this.createElementDefaultNS("ContactElectronicMailAddress", e.email)), 
        t;
    },
    "write_wmc_ContactPersonPrimary": function(e) {
        var t = this.createElementDefaultNS("ContactPersonPrimary");
        return e.person && t.appendChild(this.createElementDefaultNS("ContactPerson", e.person)), 
        e.organization && t.appendChild(this.createElementDefaultNS("ContactOrganization", e.organization)), 
        t;
    },
    "write_wmc_ContactAddress": function(e) {
        var t = this.createElementDefaultNS("ContactAddress");
        return e.type && t.appendChild(this.createElementDefaultNS("AddressType", e.type)), 
        e.address && t.appendChild(this.createElementDefaultNS("Address", e.address)), e.city && t.appendChild(this.createElementDefaultNS("City", e.city)), 
        e.stateOrProvince && t.appendChild(this.createElementDefaultNS("StateOrProvince", e.stateOrProvince)), 
        e.postcode && t.appendChild(this.createElementDefaultNS("PostCode", e.postcode)), 
        e.country && t.appendChild(this.createElementDefaultNS("Country", e.country)), t;
    },
    "write_ol_MapExtension": function(e) {
        var t = this.createElementDefaultNS("Extension"), i = e.maxExtent;
        if (i) {
            var n = this.createElementNS(this.namespaces.ol, "ol:maxExtent");
            this.setAttributes(n, {
                "minx": i.left.toPrecision(18),
                "miny": i.bottom.toPrecision(18),
                "maxx": i.right.toPrecision(18),
                "maxy": i.top.toPrecision(18)
            }), t.appendChild(n);
        }
        return t;
    },
    "write_wmc_LayerList": function(e) {
        for (var t = this.createElementDefaultNS("LayerList"), i = 0, n = e.layersContext.length; i < n; ++i) t.appendChild(this.write_wmc_Layer(e.layersContext[i]));
        return t;
    },
    "write_wmc_Layer": function(e) {
        var t = this.createElementDefaultNS("Layer", null, {
            "queryable": e.queryable ? "1" : "0",
            "hidden": e.visibility ? "0" : "1"
        });
        return t.appendChild(this.write_wmc_Server(e)), t.appendChild(this.createElementDefaultNS("Name", e.name)), 
        t.appendChild(this.createElementDefaultNS("Title", e.title)), e.abstract && t.appendChild(this.createElementDefaultNS("Abstract", e.abstract)), 
        e.dataURL && t.appendChild(this.write_wmc_URLType("DataURL", e.dataURL)), e.metadataURL && t.appendChild(this.write_wmc_URLType("MetadataURL", e.metadataURL)), 
        t;
    },
    "write_ol_attribution": function(e) {
        "string" == typeof e && (e = {
            "title": e
        });
        var t = this.createElementNS(this.namespaces.ol, "ol:attribution");
        return t.appendChild(this.createElementDefaultNS("Title", e.title)), e.href && t.appendChild(this.write_wmc_OnlineResource(e.href)), 
        e.logo && t.appendChild(this.write_wmc_URLType("LogoURL", e.logo.href, e.logo)), 
        t;
    },
    "write_wmc_LayerExtension": function(e) {
        var t = this.createElementDefaultNS("Extension"), i = e.maxExtent, n = this.createElementNS(this.namespaces.ol, "ol:maxExtent");
        if (this.setAttributes(n, {
            "minx": i.left.toPrecision(18),
            "miny": i.bottom.toPrecision(18),
            "maxx": i.right.toPrecision(18),
            "maxy": i.top.toPrecision(18)
        }), t.appendChild(n), e.tileSize && !e.singleTile) {
            var r = this.createElementNS(this.namespaces.ol, "ol:tileSize");
            this.setAttributes(r, e.tileSize), t.appendChild(r);
        }
        for (var s, a = [ "transparent", "numZoomLevels", "units", "isBaseLayer", "opacity", "displayInLayerSwitcher", "singleTile", "gutter" ], o = 0, l = a.length; o < l; ++o) (s = this.createOLPropertyNode(e, a[o])) && t.appendChild(s);
        if (e.attribution) {
            var h = this.write_ol_attribution(e.attribution);
            t.appendChild(h);
        }
        return t;
    },
    "createOLPropertyNode": function(e, t) {
        var i = null;
        return null != e[t] && (i = this.createElementNS(this.namespaces.ol, "ol:" + t)).appendChild(this.createTextNode(e[t].toString())), 
        i;
    },
    "write_wmc_Server": function(e) {
        var t = e.server, i = this.createElementDefaultNS("Server"), n = {
            "service": "OGC:WMS",
            "version": t.version
        };
        return t.title && (n.title = t.title), this.setAttributes(i, n), i.appendChild(this.write_wmc_OnlineResource(t.url)), 
        i;
    },
    "write_wmc_URLType": function(e, t, i) {
        var n = this.createElementDefaultNS(e);
        if (n.appendChild(this.write_wmc_OnlineResource(t)), i) for (var r = [ "width", "height", "format" ], s = 0; s < r.length; s++) r[s] in i && n.setAttribute(r[s], i[r[s]]);
        return n;
    },
    "write_wmc_DimensionList": function(e) {
        var t = this.createElementDefaultNS("DimensionList");
        for (var i in e.dimensions) {
            var n = {}, r = e.dimensions[i];
            for (var s in r) "boolean" == typeof r[s] ? n[s] = Number(r[s]) : n[s] = r[s];
            var a = "";
            n.values && (a = n.values.join(","), delete n.values), t.appendChild(this.createElementDefaultNS("Dimension", a, n));
        }
        return t;
    },
    "write_wmc_FormatList": function(e) {
        for (var t = this.createElementDefaultNS("FormatList"), i = 0, n = e.formats.length; i < n; i++) {
            var r = e.formats[i];
            t.appendChild(this.createElementDefaultNS("Format", r.value, r.current && 1 == r.current ? {
                "current": "1"
            } : null));
        }
        return t;
    },
    "write_wmc_StyleList": function(e) {
        var t = this.createElementDefaultNS("StyleList"), i = e.styles;
        if (i && OpenLayers.Util.isArray(i)) for (var n, r = 0, s = i.length; r < s; r++) {
            var a = i[r], o = this.createElementDefaultNS("Style", null, a.current && 1 == a.current ? {
                "current": "1"
            } : null);
            if (a.href) {
                n = this.createElementDefaultNS("SLD"), a.name && n.appendChild(this.createElementDefaultNS("Name", a.name)), 
                a.title && n.appendChild(this.createElementDefaultNS("Title", a.title)), a.legend && n.appendChild(this.write_wmc_URLType("LegendURL", a.legend.href, a.legend));
                var l = this.write_wmc_OnlineResource(a.href);
                n.appendChild(l), o.appendChild(n);
            } else if (a.body) {
                n = this.createElementDefaultNS("SLD"), a.name && n.appendChild(this.createElementDefaultNS("Name", a.name)), 
                a.title && n.appendChild(this.createElementDefaultNS("Title", a.title)), a.legend && n.appendChild(this.write_wmc_URLType("LegendURL", a.legend.href, a.legend));
                var h = OpenLayers.Format.XML.prototype.read.apply(this, [ a.body ]).documentElement;
                n.ownerDocument && n.ownerDocument.importNode && (h = n.ownerDocument.importNode(h, !0)), 
                n.appendChild(h), o.appendChild(n);
            } else o.appendChild(this.createElementDefaultNS("Name", a.name)), o.appendChild(this.createElementDefaultNS("Title", a.title)), 
            a.abstract && o.appendChild(this.createElementDefaultNS("Abstract", a.abstract)), 
            a.legend && o.appendChild(this.write_wmc_URLType("LegendURL", a.legend.href, a.legend));
            t.appendChild(o);
        }
        return t;
    },
    "write_wmc_OnlineResource": function(e) {
        var t = this.createElementDefaultNS("OnlineResource");
        return this.setAttributeNS(t, this.namespaces.xlink, "xlink:type", "simple"), this.setAttributeNS(t, this.namespaces.xlink, "xlink:href", e), 
        t;
    },
    "getOnlineResource_href": function(e) {
        var t = {}, i = e.getElementsByTagName("OnlineResource");
        return i.length > 0 && this.read_wmc_OnlineResource(t, i[0]), t.href;
    },
    "CLASS_NAME": "OpenLayers.Format.WMC.v1"
}), OpenLayers.Format.WMC.v1_0_0 = OpenLayers.Class(OpenLayers.Format.WMC.v1, {
    "VERSION": "1.0.0",
    "schemaLocation": "http://www.opengis.net/context http://schemas.opengis.net/context/1.0.0/context.xsd",
    "initialize": function(e) {
        OpenLayers.Format.WMC.v1.prototype.initialize.apply(this, [ e ]);
    },
    "read_wmc_SRS": function(e, t) {
        var i = this.getChildValue(t);
        "object" != typeof e.projections && (e.projections = {});
        for (var n = i.split(/ +/), r = 0, s = n.length; r < s; r++) e.projections[n[r]] = !0;
    },
    "write_wmc_Layer": function(e) {
        var t = OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this, [ e ]);
        if (e.srs) {
            var i = [];
            for (var n in e.srs) i.push(n);
            t.appendChild(this.createElementDefaultNS("SRS", i.join(" ")));
        }
        t.appendChild(this.write_wmc_FormatList(e)), t.appendChild(this.write_wmc_StyleList(e)), 
        e.dimensions && t.appendChild(this.write_wmc_DimensionList(e)), t.appendChild(this.write_wmc_LayerExtension(e));
    },
    "CLASS_NAME": "OpenLayers.Format.WMC.v1_0_0"
}), OpenLayers.Format.WMC.v1_1_0 = OpenLayers.Class(OpenLayers.Format.WMC.v1, {
    "VERSION": "1.1.0",
    "schemaLocation": "http://www.opengis.net/context http://schemas.opengis.net/context/1.1.0/context.xsd",
    "initialize": function(e) {
        OpenLayers.Format.WMC.v1.prototype.initialize.apply(this, [ e ]);
    },
    "read_sld_MinScaleDenominator": function(e, t) {
        var i = parseFloat(this.getChildValue(t));
        i > 0 && (e.maxScale = i);
    },
    "read_sld_MaxScaleDenominator": function(e, t) {
        e.minScale = parseFloat(this.getChildValue(t));
    },
    "read_wmc_SRS": function(e, t) {
        "srs" in e || (e.srs = {}), e.srs[this.getChildValue(t)] = !0;
    },
    "write_wmc_Layer": function(e) {
        var t = OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this, [ e ]);
        if (e.maxScale) {
            var i = this.createElementNS(this.namespaces.sld, "sld:MinScaleDenominator");
            i.appendChild(this.createTextNode(e.maxScale.toPrecision(16))), t.appendChild(i);
        }
        if (e.minScale) {
            var n = this.createElementNS(this.namespaces.sld, "sld:MaxScaleDenominator");
            n.appendChild(this.createTextNode(e.minScale.toPrecision(16))), t.appendChild(n);
        }
        if (e.srs) for (var r in e.srs) t.appendChild(this.createElementDefaultNS("SRS", r));
        return t.appendChild(this.write_wmc_FormatList(e)), t.appendChild(this.write_wmc_StyleList(e)), 
        e.dimensions && t.appendChild(this.write_wmc_DimensionList(e)), t.appendChild(this.write_wmc_LayerExtension(e)), 
        t;
    },
    "CLASS_NAME": "OpenLayers.Format.WMC.v1_1_0"
}), OpenLayers.Format.WMSCapabilities.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "wms": "http://www.opengis.net/wms",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "defaultPrefix": "wms",
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var t = e;
        e && 9 == e.nodeType && (e = e.documentElement);
        var i = {};
        if (this.readNode(e, i), void 0 === i.service) {
            var n = new OpenLayers.Format.OGCExceptionReport();
            i.error = n.read(t);
        }
        return i;
    },
    "readers": {
        "wms": {
            "Service": function(e, t) {
                t.service = {}, this.readChildNodes(e, t.service);
            },
            "Name": function(e, t) {
                t.name = this.getChildValue(e);
            },
            "Title": function(e, t) {
                t.title = this.getChildValue(e);
            },
            "Abstract": function(e, t) {
                t.abstract = this.getChildValue(e);
            },
            "BoundingBox": function(e, t) {
                var i = {};
                i.bbox = [ parseFloat(e.getAttribute("minx")), parseFloat(e.getAttribute("miny")), parseFloat(e.getAttribute("maxx")), parseFloat(e.getAttribute("maxy")) ];
                var n = {
                    "x": parseFloat(e.getAttribute("resx")),
                    "y": parseFloat(e.getAttribute("resy"))
                };
                return isNaN(n.x) && isNaN(n.y) || (i.res = n), i;
            },
            "OnlineResource": function(e, t) {
                t.href = this.getAttributeNS(e, this.namespaces.xlink, "href");
            },
            "ContactInformation": function(e, t) {
                t.contactInformation = {}, this.readChildNodes(e, t.contactInformation);
            },
            "ContactPersonPrimary": function(e, t) {
                t.personPrimary = {}, this.readChildNodes(e, t.personPrimary);
            },
            "ContactPerson": function(e, t) {
                t.person = this.getChildValue(e);
            },
            "ContactOrganization": function(e, t) {
                t.organization = this.getChildValue(e);
            },
            "ContactPosition": function(e, t) {
                t.position = this.getChildValue(e);
            },
            "ContactAddress": function(e, t) {
                t.contactAddress = {}, this.readChildNodes(e, t.contactAddress);
            },
            "AddressType": function(e, t) {
                t.type = this.getChildValue(e);
            },
            "Address": function(e, t) {
                t.address = this.getChildValue(e);
            },
            "City": function(e, t) {
                t.city = this.getChildValue(e);
            },
            "StateOrProvince": function(e, t) {
                t.stateOrProvince = this.getChildValue(e);
            },
            "PostCode": function(e, t) {
                t.postcode = this.getChildValue(e);
            },
            "Country": function(e, t) {
                t.country = this.getChildValue(e);
            },
            "ContactVoiceTelephone": function(e, t) {
                t.phone = this.getChildValue(e);
            },
            "ContactFacsimileTelephone": function(e, t) {
                t.fax = this.getChildValue(e);
            },
            "ContactElectronicMailAddress": function(e, t) {
                t.email = this.getChildValue(e);
            },
            "Fees": function(e, t) {
                var i = this.getChildValue(e);
                i && "none" != i.toLowerCase() && (t.fees = i);
            },
            "AccessConstraints": function(e, t) {
                var i = this.getChildValue(e);
                i && "none" != i.toLowerCase() && (t.accessConstraints = i);
            },
            "Capability": function(e, t) {
                t.capability = {
                    "nestedLayers": [],
                    "layers": []
                }, this.readChildNodes(e, t.capability);
            },
            "Request": function(e, t) {
                t.request = {}, this.readChildNodes(e, t.request);
            },
            "GetCapabilities": function(e, t) {
                t.getcapabilities = {
                    "formats": []
                }, this.readChildNodes(e, t.getcapabilities);
            },
            "Format": function(e, t) {
                OpenLayers.Util.isArray(t.formats) ? t.formats.push(this.getChildValue(e)) : t.format = this.getChildValue(e);
            },
            "DCPType": function(e, t) {
                this.readChildNodes(e, t);
            },
            "HTTP": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Get": function(e, t) {
                t.get = {}, this.readChildNodes(e, t.get), t.href || (t.href = t.get.href);
            },
            "Post": function(e, t) {
                t.post = {}, this.readChildNodes(e, t.post), t.href || (t.href = t.get.href);
            },
            "GetMap": function(e, t) {
                t.getmap = {
                    "formats": []
                }, this.readChildNodes(e, t.getmap);
            },
            "GetFeatureInfo": function(e, t) {
                t.getfeatureinfo = {
                    "formats": []
                }, this.readChildNodes(e, t.getfeatureinfo);
            },
            "Exception": function(e, t) {
                t.exception = {
                    "formats": []
                }, this.readChildNodes(e, t.exception);
            },
            "Layer": function(e, t) {
                var i, n;
                t.capability ? (n = t.capability, i = t) : n = t;
                var r = e.getAttributeNode("queryable"), s = r && r.specified ? e.getAttribute("queryable") : null, a = (r = e.getAttributeNode("cascaded")) && r.specified ? e.getAttribute("cascaded") : null, o = (r = e.getAttributeNode("opaque")) && r.specified ? e.getAttribute("opaque") : null, l = e.getAttribute("noSubsets"), h = e.getAttribute("fixedWidth"), u = e.getAttribute("fixedHeight"), p = i || {}, c = OpenLayers.Util.extend, d = {
                    "nestedLayers": [],
                    "styles": i ? [].concat(i.styles) : [],
                    "srs": i ? c({}, p.srs) : {},
                    "metadataURLs": [],
                    "bbox": i ? c({}, p.bbox) : {},
                    "llbbox": p.llbbox,
                    "dimensions": i ? c({}, p.dimensions) : {},
                    "authorityURLs": i ? c({}, p.authorityURLs) : {},
                    "identifiers": {},
                    "keywords": [],
                    "queryable": s && "" !== s ? "1" === s || "true" === s : p.queryable || !1,
                    "cascaded": null !== a ? parseInt(a) : p.cascaded || 0,
                    "opaque": o ? "1" === o || "true" === o : p.opaque || !1,
                    "noSubsets": null !== l ? "1" === l || "true" === l : p.noSubsets || !1,
                    "fixedWidth": null != h ? parseInt(h) : p.fixedWidth || 0,
                    "fixedHeight": null != u ? parseInt(u) : p.fixedHeight || 0,
                    "minScale": p.minScale,
                    "maxScale": p.maxScale,
                    "attribution": p.attribution
                };
                if (t.nestedLayers.push(d), d.capability = n, this.readChildNodes(e, d), delete d.capability, 
                d.name) {
                    var f = d.name.split(":"), y = n.request, m = y.getfeatureinfo;
                    f.length > 0 && (d.prefix = f[0]), n.layers.push(d), void 0 === d.formats && (d.formats = y.getmap.formats), 
                    void 0 === d.infoFormats && m && (d.infoFormats = m.formats);
                }
            },
            "Attribution": function(e, t) {
                t.attribution = {}, this.readChildNodes(e, t.attribution);
            },
            "LogoURL": function(e, t) {
                t.logo = {
                    "width": e.getAttribute("width"),
                    "height": e.getAttribute("height")
                }, this.readChildNodes(e, t.logo);
            },
            "Style": function(e, t) {
                var i = {};
                t.styles.push(i), this.readChildNodes(e, i);
            },
            "LegendURL": function(e, t) {
                var i = {
                    "width": e.getAttribute("width"),
                    "height": e.getAttribute("height")
                };
                t.legend = i, this.readChildNodes(e, i);
            },
            "MetadataURL": function(e, t) {
                var i = {
                    "type": e.getAttribute("type")
                };
                t.metadataURLs.push(i), this.readChildNodes(e, i);
            },
            "DataURL": function(e, t) {
                t.dataURL = {}, this.readChildNodes(e, t.dataURL);
            },
            "FeatureListURL": function(e, t) {
                t.featureListURL = {}, this.readChildNodes(e, t.featureListURL);
            },
            "AuthorityURL": function(e, t) {
                var i = e.getAttribute("name"), n = {};
                this.readChildNodes(e, n), t.authorityURLs[i] = n.href;
            },
            "Identifier": function(e, t) {
                var i = e.getAttribute("authority");
                t.identifiers[i] = this.getChildValue(e);
            },
            "KeywordList": function(e, t) {
                this.readChildNodes(e, t);
            },
            "SRS": function(e, t) {
                t.srs[this.getChildValue(e)] = !0;
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities.v1"
}), OpenLayers.Format.WMSCapabilities.v1_1 = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1, {
    "readers": {
        "wms": OpenLayers.Util.applyDefaults({
            "WMT_MS_Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Keyword": function(e, t) {
                t.keywords && t.keywords.push(this.getChildValue(e));
            },
            "DescribeLayer": function(e, t) {
                t.describelayer = {
                    "formats": []
                }, this.readChildNodes(e, t.describelayer);
            },
            "GetLegendGraphic": function(e, t) {
                t.getlegendgraphic = {
                    "formats": []
                }, this.readChildNodes(e, t.getlegendgraphic);
            },
            "GetStyles": function(e, t) {
                t.getstyles = {
                    "formats": []
                }, this.readChildNodes(e, t.getstyles);
            },
            "PutStyles": function(e, t) {
                t.putstyles = {
                    "formats": []
                }, this.readChildNodes(e, t.putstyles);
            },
            "UserDefinedSymbolization": function(e, t) {
                var i = {
                    "supportSLD": 1 == parseInt(e.getAttribute("SupportSLD")),
                    "userLayer": 1 == parseInt(e.getAttribute("UserLayer")),
                    "userStyle": 1 == parseInt(e.getAttribute("UserStyle")),
                    "remoteWFS": 1 == parseInt(e.getAttribute("RemoteWFS"))
                };
                t.userSymbols = i;
            },
            "LatLonBoundingBox": function(e, t) {
                t.llbbox = [ parseFloat(e.getAttribute("minx")), parseFloat(e.getAttribute("miny")), parseFloat(e.getAttribute("maxx")), parseFloat(e.getAttribute("maxy")) ];
            },
            "BoundingBox": function(e, t) {
                var i = OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this, [ e, t ]);
                i.srs = e.getAttribute("SRS"), t.bbox[i.srs] = i;
            },
            "ScaleHint": function(e, t) {
                var i = e.getAttribute("min"), n = e.getAttribute("max"), r = Math.pow(2, .5), s = OpenLayers.INCHES_PER_UNIT.m;
                0 != i && (t.maxScale = parseFloat((i / r * s * OpenLayers.DOTS_PER_INCH).toPrecision(13))), 
                n != Number.POSITIVE_INFINITY && (t.minScale = parseFloat((n / r * s * OpenLayers.DOTS_PER_INCH).toPrecision(13)));
            },
            "Dimension": function(e, t) {
                var i = {
                    "name": e.getAttribute("name").toLowerCase(),
                    "units": e.getAttribute("units"),
                    "unitsymbol": e.getAttribute("unitSymbol")
                };
                t.dimensions[i.name] = i;
            },
            "Extent": function(e, t) {
                var i = e.getAttribute("name").toLowerCase();
                if (i in t.dimensions) {
                    var n = t.dimensions[i];
                    n.nearestVal = "1" === e.getAttribute("nearestValue"), n.multipleVal = "1" === e.getAttribute("multipleValues"), 
                    n.current = "1" === e.getAttribute("current"), n.default = e.getAttribute("default") || "";
                    var r = this.getChildValue(e);
                    n.values = r.split(",");
                }
            }
        }, OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms)
    },
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities.v1_1"
}), OpenLayers.Format.WMSCapabilities.v1_1_0 = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1, {
    "version": "1.1.0",
    "readers": {
        "wms": OpenLayers.Util.applyDefaults({
            "SRS": function(e, t) {
                for (var i = this.getChildValue(e).split(/ +/), n = 0, r = i.length; n < r; n++) t.srs[i[n]] = !0;
            }
        }, OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)
    },
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities.v1_1_0"
}), OpenLayers.Format.WMSCapabilities.v1_1_1 = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1, {
    "version": "1.1.1",
    "readers": {
        "wms": OpenLayers.Util.applyDefaults({
            "SRS": function(e, t) {
                t.srs[this.getChildValue(e)] = !0;
            }
        }, OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)
    },
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities.v1_1_1"
}), OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1_1, {
    "version": "1.1.1",
    "profile": "WMSC",
    "readers": {
        "wms": OpenLayers.Util.applyDefaults({
            "VendorSpecificCapabilities": function(e, t) {
                t.vendorSpecific = {
                    "tileSets": []
                }, this.readChildNodes(e, t.vendorSpecific);
            },
            "TileSet": function(e, t) {
                var i = {
                    "srs": {},
                    "bbox": {},
                    "resolutions": []
                };
                this.readChildNodes(e, i), t.tileSets.push(i);
            },
            "Resolutions": function(e, t) {
                for (var i = this.getChildValue(e).split(" "), n = 0, r = i.length; n < r; n++) "" != i[n] && t.resolutions.push(parseFloat(i[n]));
            },
            "Width": function(e, t) {
                t.width = parseInt(this.getChildValue(e));
            },
            "Height": function(e, t) {
                t.height = parseInt(this.getChildValue(e));
            },
            "Layers": function(e, t) {
                t.layers = this.getChildValue(e);
            },
            "Styles": function(e, t) {
                t.styles = this.getChildValue(e);
            }
        }, OpenLayers.Format.WMSCapabilities.v1_1_1.prototype.readers.wms)
    },
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC"
}), OpenLayers.Format.WMSCapabilities.v1_3 = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1, {
    "readers": {
        "wms": OpenLayers.Util.applyDefaults({
            "WMS_Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "LayerLimit": function(e, t) {
                t.layerLimit = parseInt(this.getChildValue(e));
            },
            "MaxWidth": function(e, t) {
                t.maxWidth = parseInt(this.getChildValue(e));
            },
            "MaxHeight": function(e, t) {
                t.maxHeight = parseInt(this.getChildValue(e));
            },
            "BoundingBox": function(e, t) {
                var i = OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this, [ e, t ]);
                i.srs = e.getAttribute("CRS"), t.bbox[i.srs] = i;
            },
            "CRS": function(e, t) {
                this.readers.wms.SRS.apply(this, [ e, t ]);
            },
            "EX_GeographicBoundingBox": function(e, t) {
                t.llbbox = [], this.readChildNodes(e, t.llbbox);
            },
            "westBoundLongitude": function(e, t) {
                t[0] = this.getChildValue(e);
            },
            "eastBoundLongitude": function(e, t) {
                t[2] = this.getChildValue(e);
            },
            "southBoundLatitude": function(e, t) {
                t[1] = this.getChildValue(e);
            },
            "northBoundLatitude": function(e, t) {
                t[3] = this.getChildValue(e);
            },
            "MinScaleDenominator": function(e, t) {
                var i = parseFloat(this.getChildValue(e)).toPrecision(16);
                0 != i && (t.maxScale = i);
            },
            "MaxScaleDenominator": function(e, t) {
                var i = parseFloat(this.getChildValue(e)).toPrecision(16);
                i != Number.POSITIVE_INFINITY && (t.minScale = i);
            },
            "Dimension": function(e, t) {
                var i = {
                    "name": e.getAttribute("name").toLowerCase(),
                    "units": e.getAttribute("units"),
                    "unitsymbol": e.getAttribute("unitSymbol"),
                    "nearestVal": "1" === e.getAttribute("nearestValue"),
                    "multipleVal": "1" === e.getAttribute("multipleValues"),
                    "default": e.getAttribute("default") || "",
                    "current": "1" === e.getAttribute("current"),
                    "values": this.getChildValue(e).split(",")
                };
                t.dimensions[i.name] = i;
            },
            "Keyword": function(e, t) {
                var i = {
                    "value": this.getChildValue(e),
                    "vocabulary": e.getAttribute("vocabulary")
                };
                t.keywords && t.keywords.push(i);
            }
        }, OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms),
        "sld": {
            "UserDefinedSymbolization": function(e, t) {
                this.readers.wms.UserDefinedSymbolization.apply(this, [ e, t ]), t.userSymbols.inlineFeature = 1 == parseInt(e.getAttribute("InlineFeature")), 
                t.userSymbols.remoteWCS = 1 == parseInt(e.getAttribute("RemoteWCS"));
            },
            "DescribeLayer": function(e, t) {
                this.readers.wms.DescribeLayer.apply(this, [ e, t ]);
            },
            "GetLegendGraphic": function(e, t) {
                this.readers.wms.GetLegendGraphic.apply(this, [ e, t ]);
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities.v1_3"
}), OpenLayers.Format.WMSCapabilities.v1_3_0 = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_3, {
    "version": "1.3.0",
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities.v1_3_0"
}), OpenLayers.Format.WMSDescribeLayer.v1_1_1 = OpenLayers.Class(OpenLayers.Format.WMSDescribeLayer, {
    "initialize": function(e) {
        OpenLayers.Format.WMSDescribeLayer.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        for (var t, i, n = e.documentElement.childNodes, r = {
            "layerDescriptions": []
        }, s = 0; s < n.length; ++s) if (t = n[s], "LayerDescription" == (i = t.nodeName)) {
            var a = t.getAttribute("name"), o = "", l = "", h = "";
            t.getAttribute("owsType") ? (o = t.getAttribute("owsType"), l = t.getAttribute("owsURL")) : "" != t.getAttribute("wfs") ? (o = "WFS", 
            l = t.getAttribute("wfs")) : "" != t.getAttribute("wcs") && (o = "WCS", l = t.getAttribute("wcs"));
            var u = t.getElementsByTagName("Query");
            u.length > 0 && ((h = u[0].getAttribute("typeName")) || (h = u[0].getAttribute("typename")));
            var p = {
                "layerName": a,
                "owsType": o,
                "owsURL": l,
                "typeName": h
            };
            r.layerDescriptions.push(p), r.length = r.layerDescriptions.length, r[r.length - 1] = p;
        } else if ("ServiceException" == i) return {
            "error": new OpenLayers.Format.OGCExceptionReport().read(e)
        };
        return r;
    },
    "CLASS_NAME": "OpenLayers.Format.WMSDescribeLayer.v1_1_1"
}), OpenLayers.Format.WMSDescribeLayer.v1_1_0 = OpenLayers.Format.WMSDescribeLayer.v1_1_1, 
OpenLayers.Format.WMTSCapabilities.v1_0_0 = OpenLayers.Class(OpenLayers.Format.OWSCommon.v1_1_0, {
    "version": "1.0.0",
    "namespaces": {
        "ows": "http://www.opengis.net/ows/1.1",
        "wmts": "http://www.opengis.net/wmts/1.0",
        "xlink": "http://www.w3.org/1999/xlink"
    },
    "yx": null,
    "defaultPrefix": "wmts",
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]), this.options = e;
        var t = OpenLayers.Util.extend({}, OpenLayers.Format.WMTSCapabilities.prototype.yx);
        this.yx = OpenLayers.Util.extend(t, this.yx);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t.version = this.version, t;
    },
    "readers": {
        "wmts": {
            "Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Contents": function(e, t) {
                t.contents = {}, t.contents.layers = [], t.contents.tileMatrixSets = {}, this.readChildNodes(e, t.contents);
            },
            "Layer": function(e, t) {
                var i = {
                    "styles": [],
                    "formats": [],
                    "dimensions": [],
                    "tileMatrixSetLinks": []
                };
                this.readChildNodes(e, i), t.layers.push(i);
            },
            "Style": function(e, t) {
                var i = {};
                i.isDefault = "true" === e.getAttribute("isDefault"), this.readChildNodes(e, i), 
                t.styles.push(i);
            },
            "Format": function(e, t) {
                t.formats.push(this.getChildValue(e));
            },
            "TileMatrixSetLink": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.tileMatrixSetLinks.push(i);
            },
            "TileMatrixSet": function(e, t) {
                if (t.layers) {
                    var i = {
                        "matrixIds": []
                    };
                    this.readChildNodes(e, i), t.tileMatrixSets[i.identifier] = i;
                } else t.tileMatrixSet = this.getChildValue(e);
            },
            "TileMatrixSetLimits": function(e, t) {
                t.tileMatrixSetLimits = [], this.readChildNodes(e, t);
            },
            "TileMatrixLimits": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.tileMatrixSetLimits.push(i);
            },
            "MinTileRow": function(e, t) {
                t.minTileRow = parseInt(this.getChildValue(e));
            },
            "MaxTileRow": function(e, t) {
                t.maxTileRow = parseInt(this.getChildValue(e));
            },
            "MinTileCol": function(e, t) {
                t.minTileCol = parseInt(this.getChildValue(e));
            },
            "MaxTileCol": function(e, t) {
                t.maxTileCol = parseInt(this.getChildValue(e));
            },
            "TileMatrix": function(e, t) {
                if (t.identifier) {
                    var i = {
                        "supportedCRS": t.supportedCRS
                    };
                    this.readChildNodes(e, i), t.matrixIds.push(i);
                } else t.tileMatrix = this.getChildValue(e);
            },
            "ScaleDenominator": function(e, t) {
                t.scaleDenominator = parseFloat(this.getChildValue(e));
            },
            "TopLeftCorner": function(e, t) {
                var i, n = this.getChildValue(e).split(" ");
                if (t.supportedCRS) {
                    var r = t.supportedCRS.replace(/urn:ogc:def:crs:(\w+):.+:(\w+)$/, "urn:ogc:def:crs:$1::$2");
                    i = !!this.yx[r];
                }
                t.topLeftCorner = i ? new OpenLayers.LonLat(n[1], n[0]) : new OpenLayers.LonLat(n[0], n[1]);
            },
            "TileWidth": function(e, t) {
                t.tileWidth = parseInt(this.getChildValue(e));
            },
            "TileHeight": function(e, t) {
                t.tileHeight = parseInt(this.getChildValue(e));
            },
            "MatrixWidth": function(e, t) {
                t.matrixWidth = parseInt(this.getChildValue(e));
            },
            "MatrixHeight": function(e, t) {
                t.matrixHeight = parseInt(this.getChildValue(e));
            },
            "ResourceURL": function(e, t) {
                t.resourceUrl = t.resourceUrl || {};
                var i = e.getAttribute("resourceType");
                t.resourceUrls || (t.resourceUrls = []);
                var n = t.resourceUrl[i] = {
                    "format": e.getAttribute("format"),
                    "template": e.getAttribute("template"),
                    "resourceType": i
                };
                t.resourceUrls.push(n);
            },
            "LegendURL": function(e, t) {
                t.legends = t.legends || [];
                var i = {
                    "format": e.getAttribute("format"),
                    "href": e.getAttribute("xlink:href")
                }, n = e.getAttribute("width"), r = e.getAttribute("height"), s = e.getAttribute("minScaleDenominator"), a = e.getAttribute("maxScaleDenominator");
                null !== n && (i.width = parseInt(n)), null !== r && (i.height = parseInt(r)), null !== s && (i.minScaleDenominator = parseInt(s)), 
                null !== a && (i.maxScaleDenominator = parseInt(a)), t.legends.push(i);
            },
            "InfoFormat": function(e, t) {
                t.infoFormats = t.infoFormats || [], t.infoFormats.push(this.getChildValue(e));
            },
            "WSDL": function(e, t) {
                t.wsdl = {}, t.wsdl.href = e.getAttribute("xlink:href");
            },
            "ServiceMetadataURL": function(e, t) {
                t.serviceMetadataUrl = {}, t.serviceMetadataUrl.href = e.getAttribute("xlink:href");
            },
            "Dimension": function(e, t) {
                var i = {
                    "values": []
                };
                this.readChildNodes(e, i), t.dimensions.push(i);
            },
            "Default": function(e, t) {
                t.default = this.getChildValue(e);
            },
            "Value": function(e, t) {
                t.values.push(this.getChildValue(e));
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WMTSCapabilities.v1_0_0"
}), OpenLayers.Format.WPSCapabilities.v1_0_0 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "ows": "http://www.opengis.net/ows/1.1",
        "wps": "http://www.opengis.net/wps/1.0.0",
        "xlink": "http://www.w3.org/1999/xlink"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "readers": {
        "wps": {
            "Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "ProcessOfferings": function(e, t) {
                t.processOfferings = {}, this.readChildNodes(e, t.processOfferings);
            },
            "Process": function(e, t) {
                var i = {
                    "processVersion": this.getAttributeNS(e, this.namespaces.wps, "processVersion")
                };
                this.readChildNodes(e, i), t[i.identifier] = i;
            },
            "Languages": function(e, t) {
                t.languages = [], this.readChildNodes(e, t.languages);
            },
            "Default": function(e, t) {
                var i = {
                    "isDefault": !0
                };
                this.readChildNodes(e, i), t.push(i);
            },
            "Supported": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.push(i);
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WPSCapabilities.v1_0_0"
}), OpenLayers.Format.WPSDescribeProcess.v1_0_0 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "wps": "http://www.opengis.net/wps/1.0.0",
        "ows": "http://www.opengis.net/ows/1.1",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "errorProperty": "processDescriptions",
    "schemaLocation": "http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",
    "defaultPrefix": "wps",
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "readers": {
        "wps": {
            "ProcessDescriptions": function(e, t) {
                t.processDescriptions = {}, this.readChildNodes(e, t.processDescriptions);
            },
            "ProcessDescription": function(e, t) {
                var i = {
                    "processVersion": this.getAttributeNS(e, this.namespaces.wps, "processVersion"),
                    "statusSupported": "true" === e.getAttribute("statusSupported"),
                    "storeSupported": "true" === e.getAttribute("storeSupported")
                };
                this.readChildNodes(e, i), t[i.identifier] = i;
            },
            "DataInputs": function(e, t) {
                t.dataInputs = [], this.readChildNodes(e, t.dataInputs);
            },
            "ProcessOutputs": function(e, t) {
                t.processOutputs = [], this.readChildNodes(e, t.processOutputs);
            },
            "Output": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.push(i);
            },
            "ComplexOutput": function(e, t) {
                t.complexOutput = {}, this.readChildNodes(e, t.complexOutput);
            },
            "LiteralOutput": function(e, t) {
                t.literalOutput = {}, this.readChildNodes(e, t.literalOutput);
            },
            "Input": function(e, t) {
                var i = {
                    "maxOccurs": parseInt(e.getAttribute("maxOccurs")),
                    "minOccurs": parseInt(e.getAttribute("minOccurs"))
                };
                this.readChildNodes(e, i), t.push(i);
            },
            "BoundingBoxData": function(e, t) {
                t.boundingBoxData = {}, this.readChildNodes(e, t.boundingBoxData);
            },
            "CRS": function(e, t) {
                t.CRSs || (t.CRSs = {}), t.CRSs[this.getChildValue(e)] = !0;
            },
            "LiteralData": function(e, t) {
                t.literalData = {}, this.readChildNodes(e, t.literalData);
            },
            "ComplexData": function(e, t) {
                t.complexData = {}, this.readChildNodes(e, t.complexData);
            },
            "Default": function(e, t) {
                t.default = {}, this.readChildNodes(e, t.default);
            },
            "Supported": function(e, t) {
                t.supported = {}, this.readChildNodes(e, t.supported);
            },
            "Format": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.formats || (t.formats = {}), t.formats[i.mimeType] = !0;
            },
            "MimeType": function(e, t) {
                t.mimeType = this.getChildValue(e);
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WPSDescribeProcess"
}), OpenLayers.Format.XLS.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "xls": "http://www.opengis.net/xls",
        "gml": "http://www.opengis.net/gml",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "xy": !0,
    "defaultPrefix": "xls",
    "schemaLocation": null,
    "read": function(e, t) {
        t = OpenLayers.Util.applyDefaults(t, this.options);
        var i = {};
        return this.readChildNodes(e, i), i;
    },
    "readers": {
        "xls": {
            "XLS": function(e, t) {
                t.version = e.getAttribute("version"), this.readChildNodes(e, t);
            },
            "Response": function(e, t) {
                this.readChildNodes(e, t);
            },
            "GeocodeResponse": function(e, t) {
                t.responseLists = [], this.readChildNodes(e, t);
            },
            "GeocodeResponseList": function(e, t) {
                var i = {
                    "features": [],
                    "numberOfGeocodedAddresses": parseInt(e.getAttribute("numberOfGeocodedAddresses"))
                };
                t.responseLists.push(i), this.readChildNodes(e, i);
            },
            "GeocodedAddress": function(e, t) {
                var i = new OpenLayers.Feature.Vector();
                t.features.push(i), this.readChildNodes(e, i), i.geometry = i.components[0];
            },
            "GeocodeMatchCode": function(e, t) {
                t.attributes.matchCode = {
                    "accuracy": parseFloat(e.getAttribute("accuracy")),
                    "matchType": e.getAttribute("matchType")
                };
            },
            "Address": function(e, t) {
                var i = {
                    "countryCode": e.getAttribute("countryCode"),
                    "addressee": e.getAttribute("addressee"),
                    "street": [],
                    "place": []
                };
                t.attributes.address = i, this.readChildNodes(e, i);
            },
            "freeFormAddress": function(e, t) {
                t.freeFormAddress = this.getChildValue(e);
            },
            "StreetAddress": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Building": function(e, t) {
                t.building = {
                    "number": e.getAttribute("number"),
                    "subdivision": e.getAttribute("subdivision"),
                    "buildingName": e.getAttribute("buildingName")
                };
            },
            "Street": function(e, t) {
                t.street.push(this.getChildValue(e));
            },
            "Place": function(e, t) {
                t.place[e.getAttribute("type")] = this.getChildValue(e);
            },
            "PostalCode": function(e, t) {
                t.postalCode = this.getChildValue(e);
            }
        },
        "gml": OpenLayers.Format.GML.v3.prototype.readers.gml
    },
    "write": function(e) {
        return this.writers.xls.XLS.apply(this, [ e ]);
    },
    "writers": {
        "xls": {
            "XLS": function(e) {
                var t = this.createElementNSPlus("xls:XLS", {
                    "attributes": {
                        "version": this.VERSION,
                        "xsi:schemaLocation": this.schemaLocation
                    }
                });
                return this.writeNode("RequestHeader", e.header, t), this.writeNode("Request", e, t), 
                t;
            },
            "RequestHeader": function(e) {
                return this.createElementNSPlus("xls:RequestHeader");
            },
            "Request": function(e) {
                var t = this.createElementNSPlus("xls:Request", {
                    "attributes": {
                        "methodName": "GeocodeRequest",
                        "requestID": e.requestID || "",
                        "version": this.VERSION
                    }
                });
                return this.writeNode("GeocodeRequest", e.addresses, t), t;
            },
            "GeocodeRequest": function(e) {
                for (var t = this.createElementNSPlus("xls:GeocodeRequest"), i = 0, n = e.length; i < n; i++) this.writeNode("Address", e[i], t);
                return t;
            },
            "Address": function(e) {
                var t = this.createElementNSPlus("xls:Address", {
                    "attributes": {
                        "countryCode": e.countryCode
                    }
                });
                return e.freeFormAddress ? this.writeNode("freeFormAddress", e.freeFormAddress, t) : (e.street && this.writeNode("StreetAddress", e, t), 
                e.municipality && this.writeNode("Municipality", e.municipality, t), e.countrySubdivision && this.writeNode("CountrySubdivision", e.countrySubdivision, t), 
                e.postalCode && this.writeNode("PostalCode", e.postalCode, t)), t;
            },
            "freeFormAddress": function(e) {
                return this.createElementNSPlus("freeFormAddress", {
                    "value": e
                });
            },
            "StreetAddress": function(e) {
                var t = this.createElementNSPlus("xls:StreetAddress");
                e.building && this.writeNode(t, "Building", e.building);
                var i = e.street;
                OpenLayers.Util.isArray(i) || (i = [ i ]);
                for (var n = 0, r = i.length; n < r; n++) this.writeNode("Street", i[n], t);
                return t;
            },
            "Building": function(e) {
                return this.createElementNSPlus("xls:Building", {
                    "attributes": {
                        "number": e.number,
                        "subdivision": e.subdivision,
                        "buildingName": e.buildingName
                    }
                });
            },
            "Street": function(e) {
                return this.createElementNSPlus("xls:Street", {
                    "value": e
                });
            },
            "Municipality": function(e) {
                return this.createElementNSPlus("xls:Place", {
                    "attributes": {
                        "type": "Municipality"
                    },
                    "value": e
                });
            },
            "CountrySubdivision": function(e) {
                return this.createElementNSPlus("xls:Place", {
                    "attributes": {
                        "type": "CountrySubdivision"
                    },
                    "value": e
                });
            },
            "PostalCode": function(e) {
                return this.createElementNSPlus("xls:PostalCode", {
                    "value": e
                });
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.XLS.v1"
}), OpenLayers.Format.XLS.v1_1_0 = OpenLayers.Class(OpenLayers.Format.XLS.v1, {
    "VERSION": "1.1",
    "schemaLocation": "http://www.opengis.net/xls http://schemas.opengis.net/ols/1.1.0/LocationUtilityService.xsd",
    "CLASS_NAME": "OpenLayers.Format.XLS.v1_1_0"
}), OpenLayers.Format.XLS.v1_1 = OpenLayers.Format.XLS.v1_1_0, OpenLayers.Layer.ArcGIS93Rest = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "DEFAULT_PARAMS": {
        "format": "png"
    },
    "isBaseLayer": !0,
    "initialize": function(e, t, i, n) {
        var r = [];
        i = OpenLayers.Util.upperCaseObject(i), r.push(e, t, i, n), OpenLayers.Layer.Grid.prototype.initialize.apply(this, r), 
        OpenLayers.Util.applyDefaults(this.params, OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)), 
        this.params.TRANSPARENT && "true" == this.params.TRANSPARENT.toString().toLowerCase() && (null != n && n.isBaseLayer || (this.isBaseLayer = !1), 
        "jpg" == this.params.FORMAT && (this.params.FORMAT = OpenLayers.Util.alphaHack() ? "gif" : "png"));
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.ArcGIS93Rest(this.name, this.url, this.params, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = this.projection.getCode().split(":"), i = t[t.length - 1], n = this.getImageSize(e), r = {
            "BBOX": e.toBBOX(),
            "SIZE": n.w + "," + n.h,
            "F": "image",
            "BBOXSR": i,
            "IMAGESR": i
        };
        if (this.layerDefs) {
            var s, a = [];
            for (s in this.layerDefs) this.layerDefs.hasOwnProperty(s) && this.layerDefs[s] && (a.push(s), 
            a.push(":"), a.push(this.layerDefs[s]), a.push(";"));
            a.length > 0 && (r.LAYERDEFS = a.join(""));
        }
        return this.getFullRequestString(r);
    },
    "setLayerFilter": function(e, t) {
        this.layerDefs || (this.layerDefs = {}), t ? this.layerDefs[e] = t : delete this.layerDefs[e];
    },
    "clearLayerFilter": function(e) {
        e ? delete this.layerDefs[e] : delete this.layerDefs;
    },
    "mergeNewParams": function(e) {
        var t = [ OpenLayers.Util.upperCaseObject(e) ];
        return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this, t);
    },
    "CLASS_NAME": "OpenLayers.Layer.ArcGIS93Rest"
}), OpenLayers.Layer.XYZ = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "isBaseLayer": !0,
    "sphericalMercator": !1,
    "zoomOffset": 0,
    "serverResolutions": null,
    "initialize": function(e, t, i) {
        (i && i.sphericalMercator || this.sphericalMercator) && (i = OpenLayers.Util.extend({
            "projection": "EPSG:900913",
            "numZoomLevels": this.serverResolutions ? this.serverResolutions.length : 19
        }, i)), OpenLayers.Layer.Grid.prototype.initialize.apply(this, [ e || this.name, t || this.url, {}, i ]);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.XYZ(this.name, this.url, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getURL": function(e) {
        var t = this.getXYZ(e), i = this.url;
        if (OpenLayers.Util.isArray(i)) {
            var n = "" + t.x + t.y + t.z;
            i = this.selectUrl(n, i);
        }
        return OpenLayers.String.format(i, t);
    },
    "getXYZ": function(e) {
        var t = this.getServerResolution(), i = Math.round((e.left - this.tileOrigin.lon) / (t * this.tileSize.w)), n = Math.round((this.tileOrigin.lat - e.top) / (t * this.tileSize.h)), r = this.getServerZoom();
        if (this.wrapDateLine) {
            var s = Math.pow(2, r);
            i = (i % s + s) % s;
        }
        return {
            "x": i,
            "y": n,
            "z": r
        };
    },
    "setMap": function(e) {
        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments), this.tileOrigin || (this.tileOrigin = new OpenLayers.LonLat(this.maxExtent.left, this.maxExtent.top));
    },
    "CLASS_NAME": "OpenLayers.Layer.XYZ"
}), OpenLayers.Layer.ArcGISCache = OpenLayers.Class(OpenLayers.Layer.XYZ, {
    "url": null,
    "tileOrigin": null,
    "tileSize": new OpenLayers.Size(256, 256),
    "useArcGISServer": !0,
    "type": "png",
    "useScales": !1,
    "overrideDPI": !1,
    "hexZoom": !1,
    "initialize": function(e, t, i) {
        if (OpenLayers.Layer.XYZ.prototype.initialize.apply(this, arguments), this.resolutions && (this.serverResolutions = this.resolutions, 
        this.maxExtent = this.getMaxExtentForResolution(this.resolutions[0])), this.layerInfo) {
            var n = this.layerInfo, r = new OpenLayers.Bounds(n.fullExtent.xmin, n.fullExtent.ymin, n.fullExtent.xmax, n.fullExtent.ymax);
            if (this.projection = "EPSG:" + n.spatialReference.wkid, this.sphericalMercator = 102100 == n.spatialReference.wkid, 
            this.units = "esriFeet" == n.units ? "ft" : "m", n.tileInfo) {
                this.tileSize = new OpenLayers.Size(n.tileInfo.width || n.tileInfo.cols, n.tileInfo.height || n.tileInfo.rows), 
                this.tileOrigin = new OpenLayers.LonLat(n.tileInfo.origin.x, n.tileInfo.origin.y);
                var s = new OpenLayers.Geometry.Point(r.left, r.top), a = new OpenLayers.Geometry.Point(r.right, r.bottom);
                this.useScales ? this.scales = [] : this.resolutions = [], this.lods = [];
                for (var o in n.tileInfo.lods) if (n.tileInfo.lods.hasOwnProperty(o)) {
                    var l = n.tileInfo.lods[o];
                    this.useScales ? this.scales.push(l.scale) : this.resolutions.push(l.resolution);
                    var h = this.getContainingTileCoords(s, l.resolution);
                    l.startTileCol = h.x, l.startTileRow = h.y;
                    var u = this.getContainingTileCoords(a, l.resolution);
                    l.endTileCol = u.x, l.endTileRow = u.y, this.lods.push(l);
                }
                this.maxExtent = this.calculateMaxExtentWithLOD(this.lods[0]), this.serverResolutions = this.resolutions, 
                this.overrideDPI && n.tileInfo.dpi && (OpenLayers.DOTS_PER_INCH = n.tileInfo.dpi);
            }
        }
    },
    "getContainingTileCoords": function(e, t) {
        return new OpenLayers.Pixel(Math.max(Math.floor((e.x - this.tileOrigin.lon) / (this.tileSize.w * t)), 0), Math.max(Math.floor((this.tileOrigin.lat - e.y) / (this.tileSize.h * t)), 0));
    },
    "calculateMaxExtentWithLOD": function(e) {
        var t = e.endTileCol - e.startTileCol + 1, i = e.endTileRow - e.startTileRow + 1, n = this.tileOrigin.lon + e.startTileCol * this.tileSize.w * e.resolution, r = n + t * this.tileSize.w * e.resolution, s = this.tileOrigin.lat - e.startTileRow * this.tileSize.h * e.resolution, a = s - i * this.tileSize.h * e.resolution;
        return new OpenLayers.Bounds(n, a, r, s);
    },
    "calculateMaxExtentWithExtent": function(e, t) {
        var i = new OpenLayers.Geometry.Point(e.left, e.top), n = new OpenLayers.Geometry.Point(e.right, e.bottom), r = this.getContainingTileCoords(i, t), s = this.getContainingTileCoords(n, t), a = {
            "resolution": t,
            "startTileCol": r.x,
            "startTileRow": r.y,
            "endTileCol": s.x,
            "endTileRow": s.y
        };
        return this.calculateMaxExtentWithLOD(a);
    },
    "getUpperLeftTileCoord": function(e) {
        var t = new OpenLayers.Geometry.Point(this.maxExtent.left, this.maxExtent.top);
        return this.getContainingTileCoords(t, e);
    },
    "getLowerRightTileCoord": function(e) {
        var t = new OpenLayers.Geometry.Point(this.maxExtent.right, this.maxExtent.bottom);
        return this.getContainingTileCoords(t, e);
    },
    "getMaxExtentForResolution": function(e) {
        var t = this.getUpperLeftTileCoord(e), i = this.getLowerRightTileCoord(e), n = i.x - t.x + 1, r = i.y - t.y + 1, s = this.tileOrigin.lon + t.x * this.tileSize.w * e, a = s + n * this.tileSize.w * e, o = this.tileOrigin.lat - t.y * this.tileSize.h * e, l = o - r * this.tileSize.h * e;
        return new OpenLayers.Bounds(s, l, a, o);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.ArcGISCache(this.name, this.url, this.options)), 
        OpenLayers.Layer.XYZ.prototype.clone.apply(this, [ e ]);
    },
    "initGriddedTiles": function(e) {
        delete this._tileOrigin, OpenLayers.Layer.XYZ.prototype.initGriddedTiles.apply(this, arguments);
    },
    "getMaxExtent": function() {
        var e = this.map.getResolution();
        return this.maxExtent = this.getMaxExtentForResolution(e);
    },
    "getTileOrigin": function() {
        if (!this._tileOrigin) {
            var e = this.getMaxExtent();
            this._tileOrigin = new OpenLayers.LonLat(e.left, e.bottom);
        }
        return this._tileOrigin;
    },
    "getURL": function(e) {
        var t = this.getResolution(), i = this.tileOrigin.lon + t * this.tileSize.w / 2, n = this.tileOrigin.lat - t * this.tileSize.h / 2, r = e.getCenterLonLat(), s = (r.lon, 
        r.lat, Math.round(Math.abs((r.lon - i) / (t * this.tileSize.w)))), a = Math.round(Math.abs((n - r.lat) / (t * this.tileSize.h))), o = this.map.getZoom();
        if (this.lods) {
            var l = this.lods[this.map.getZoom()];
            if (s < l.startTileCol || s > l.endTileCol || a < l.startTileRow || a > l.endTileRow) return null;
        } else {
            var h = this.getUpperLeftTileCoord(t), u = this.getLowerRightTileCoord(t);
            if (s < h.x || s >= u.x || a < h.y || a >= u.y) return null;
        }
        var p = this.url, c = "" + s + a + o;
        return OpenLayers.Util.isArray(p) && (p = this.selectUrl(c, p)), this.useArcGISServer ? p += "/tile/${z}/${y}/${x}" : (s = "C" + OpenLayers.Number.zeroPad(s, 8, 16), 
        a = "R" + OpenLayers.Number.zeroPad(a, 8, 16), o = "L" + OpenLayers.Number.zeroPad(o, 2, this.hexZoom ? 16 : 10), 
        p = p + "/${z}/${y}/${x}." + this.type), p = OpenLayers.String.format(p, {
            "x": s,
            "y": a,
            "z": o
        }), OpenLayers.Util.urlAppend(p, OpenLayers.Util.getParameterString(this.params));
    },
    "CLASS_NAME": "OpenLayers.Layer.ArcGISCache"
}), OpenLayers.Layer.ArcIMS = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "DEFAULT_PARAMS": {
        "ClientVersion": "9.2",
        "ServiceName": ""
    },
    "featureCoordSys": "4326",
    "filterCoordSys": "4326",
    "layers": null,
    "async": !0,
    "name": "ArcIMS",
    "isBaseLayer": !0,
    "DEFAULT_OPTIONS": {
        "tileSize": new OpenLayers.Size(512, 512),
        "featureCoordSys": "4326",
        "filterCoordSys": "4326",
        "layers": null,
        "isBaseLayer": !0,
        "async": !0,
        "name": "ArcIMS"
    },
    "initialize": function(e, t, i) {
        this.tileSize = new OpenLayers.Size(512, 512), this.params = OpenLayers.Util.applyDefaults({
            "ServiceName": i.serviceName
        }, this.DEFAULT_PARAMS), this.options = OpenLayers.Util.applyDefaults(i, this.DEFAULT_OPTIONS), 
        OpenLayers.Layer.Grid.prototype.initialize.apply(this, [ e, t, this.params, i ]), 
        this.transparent && (this.isBaseLayer || (this.isBaseLayer = !1), "image/jpeg" == this.format && (this.format = OpenLayers.Util.alphaHack() ? "image/gif" : "image/png")), 
        null === this.options.layers && (this.options.layers = []);
    },
    "getURL": function(e) {
        var t = "";
        e = this.adjustBounds(e);
        var i = new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options, {
            "requesttype": "image",
            "envelope": e.toArray(),
            "tileSize": this.tileSize
        })), n = new OpenLayers.Request.POST({
            "url": this.getFullRequestString(),
            "data": i.write(),
            "async": !1
        });
        if (null != n) {
            var r = n.responseXML;
            r && r.documentElement || (r = n.responseText);
            var s = new OpenLayers.Format.ArcXML().read(r);
            t = this.getUrlOrImage(s.image.output);
        }
        return t;
    },
    "getURLasync": function(e, t, i) {
        e = this.adjustBounds(e);
        var n = new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options, {
            "requesttype": "image",
            "envelope": e.toArray(),
            "tileSize": this.tileSize
        }));
        OpenLayers.Request.POST({
            "url": this.getFullRequestString(),
            "async": !0,
            "data": n.write(),
            "callback": function(e) {
                var n = e.responseXML;
                n && n.documentElement || (n = e.responseText);
                var r = new OpenLayers.Format.ArcXML().read(n);
                t.call(i, this.getUrlOrImage(r.image.output));
            },
            "scope": this
        });
    },
    "getUrlOrImage": function(e) {
        var t = "";
        return e.url ? t = e.url : e.data && (t = "data:image/" + e.type + ";base64," + e.data), 
        t;
    },
    "setLayerQuery": function(e, t) {
        for (var i = 0; i < this.options.layers.length; i++) if (e == this.options.layers[i].id) return void (this.options.layers[i].query = t);
        this.options.layers.push({
            "id": e,
            "visible": !0,
            "query": t
        });
    },
    "getFeatureInfo": function(e, t, i) {
        var n = i.buffer || 1, r = i.callback || function() {}, s = i.scope || window, a = {};
        OpenLayers.Util.extend(a, this.options), a.requesttype = "feature", e instanceof OpenLayers.LonLat ? (a.polygon = null, 
        a.envelope = [ e.lon - n, e.lat - n, e.lon + n, e.lat + n ]) : e instanceof OpenLayers.Geometry.Polygon && (a.envelope = null, 
        a.polygon = e);
        var o = new OpenLayers.Format.ArcXML(a);
        if (OpenLayers.Util.extend(o.request.get_feature, i), o.request.get_feature.layer = t.id, 
        "number" == typeof t.query.accuracy) o.request.get_feature.query.accuracy = t.query.accuracy; else {
            var l = this.map.getCenter(), h = this.map.getViewPortPxFromLonLat(l);
            h.x++;
            var u = this.map.getLonLatFromPixel(h);
            o.request.get_feature.query.accuracy = u.lon - l.lon;
        }
        o.request.get_feature.query.where = t.query.where, o.request.get_feature.query.spatialfilter.relation = "area_intersection", 
        OpenLayers.Request.POST({
            "url": this.getFullRequestString({
                "CustomService": "Query"
            }),
            "data": o.write(),
            "callback": function(e) {
                var t = o.parseResponse(e.responseText);
                o.iserror() ? r.call(s, null) : r.call(s, t.features);
            }
        });
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.ArcIMS(this.name, this.url, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "CLASS_NAME": "OpenLayers.Layer.ArcIMS"
}), OpenLayers.Layer.Bing = OpenLayers.Class(OpenLayers.Layer.XYZ, {
    "key": null,
    "serverResolutions": [ 156543.03390625, 78271.516953125, 39135.7584765625, 19567.87923828125, 9783.939619140625, 4891.9698095703125, 2445.9849047851562, 1222.9924523925781, 611.4962261962891, 305.74811309814453, 152.87405654907226, 76.43702827453613, 38.218514137268066, 19.109257068634033, 9.554628534317017, 4.777314267158508, 2.388657133579254, 1.194328566789627, .5971642833948135, .29858214169740677, .14929107084870338, .07464553542435169, .03732276771218, .01866138385609 ],
    "attributionTemplate": '<span class="olBingAttribution ${type}"><div><a target="_blank" href="http://www.bing.com/maps/"><img src="${logo}" /></a></div>${copyrights}<a style="white-space: nowrap" target="_blank" href="http://www.microsoft.com/maps/product/terms.html">Terms of Use</a></span>',
    "metadata": null,
    "protocolRegex": /^http:/i,
    "type": "Road",
    "culture": "en-US",
    "metadataParams": null,
    "tileOptions": null,
    "protocol": ~window.location.href.indexOf("http") ? "" : "http:",
    "initialize": function(e) {
        var t = [ (e = OpenLayers.Util.applyDefaults({
            "sphericalMercator": !0
        }, e)).name || "Bing " + (e.type || this.type), null, e ];
        OpenLayers.Layer.XYZ.prototype.initialize.apply(this, t), this.tileOptions = OpenLayers.Util.extend({
            "crossOriginKeyword": "anonymous"
        }, this.options.tileOptions), this.loadMetadata();
    },
    "loadMetadata": function() {
        this._callbackId = "_callback_" + this.id.replace(/\./g, "_"), window[this._callbackId] = OpenLayers.Function.bind(OpenLayers.Layer.Bing.processMetadata, this);
        var e = OpenLayers.Util.applyDefaults({
            "key": this.key,
            "jsonp": this._callbackId,
            "include": "ImageryProviders"
        }, this.metadataParams), t = this.protocol + "//dev.virtualearth.net/REST/v1/Imagery/Metadata/" + this.type + "?" + OpenLayers.Util.getParameterString(e), i = document.createElement("script");
        i.type = "text/javascript", i.src = t, i.id = this._callbackId, document.getElementsByTagName("head")[0].appendChild(i);
    },
    "initLayer": function() {
        var e = this.metadata.resourceSets[0].resources[0], t = e.imageUrl.replace("{quadkey}", "${quadkey}");
        t = (t = t.replace("{culture}", this.culture)).replace(this.protocolRegex, this.protocol), 
        this.url = [];
        for (var i = 0; i < e.imageUrlSubdomains.length; ++i) this.url.push(t.replace("{subdomain}", e.imageUrlSubdomains[i]));
        this.addOptions({
            "maxResolution": Math.min(this.serverResolutions[e.zoomMin], this.maxResolution || Number.POSITIVE_INFINITY),
            "numZoomLevels": Math.min(e.zoomMax + 1 - e.zoomMin, this.numZoomLevels)
        }, !0), this.isBaseLayer || this.redraw(), this.updateAttribution();
    },
    "getURL": function(e) {
        if (this.url) {
            for (var t = this.getXYZ(e), i = t.x, n = t.y, r = t.z, s = [], a = r; a > 0; --a) {
                var o = "0", l = 1 << a - 1;
                0 != (i & l) && o++, 0 != (n & l) && (o++, o++), s.push(o);
            }
            var h = s.join(""), u = this.selectUrl("" + i + n + r, this.url);
            return OpenLayers.String.format(u, {
                "quadkey": h
            });
        }
    },
    "updateAttribution": function() {
        var e = this.metadata;
        if (e.resourceSets && this.map && this.map.center) {
            var t, i, n, r, s, a, o, l = e.resourceSets[0].resources[0], h = this.map.getExtent().transform(this.map.getProjectionObject(), new OpenLayers.Projection("EPSG:4326")), u = l.imageryProviders || [], p = OpenLayers.Util.indexOf(this.serverResolutions, this.getServerResolution()), c = "";
            for (i = 0, n = u.length; i < n; ++i) for (r = 0, s = (t = u[i]).coverageAreas.length; r < s; ++r) o = t.coverageAreas[r], 
            a = OpenLayers.Bounds.fromArray(o.bbox, !0), h.intersectsBounds(a) && p <= o.zoomMax && p >= o.zoomMin && (c += t.attribution + " ");
            var d = e.brandLogoUri.replace(this.protocolRegex, this.protocol);
            this.attribution = OpenLayers.String.format(this.attributionTemplate, {
                "type": this.type.toLowerCase(),
                "logo": d,
                "copyrights": c
            }), this.map && this.map.events.triggerEvent("changelayer", {
                "layer": this,
                "property": "attribution"
            });
        }
    },
    "setMap": function() {
        OpenLayers.Layer.XYZ.prototype.setMap.apply(this, arguments), this.map.events.register("moveend", this, this.updateAttribution);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.Bing(this.options)), e = OpenLayers.Layer.XYZ.prototype.clone.apply(this, [ e ]);
    },
    "destroy": function() {
        this.map && this.map.events.unregister("moveend", this, this.updateAttribution), 
        OpenLayers.Layer.XYZ.prototype.destroy.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Layer.Bing"
}), OpenLayers.Layer.Bing.processMetadata = function(e) {
    this.metadata = e, this.initLayer();
    var t = document.getElementById(this._callbackId);
    t.parentNode.removeChild(t), window[this._callbackId] = void 0, delete this._callbackId;
}, OpenLayers.Layer.Markers = OpenLayers.Class(OpenLayers.Layer, {
    "isBaseLayer": !1,
    "markers": null,
    "drawn": !1,
    "initialize": function(e, t) {
        OpenLayers.Layer.prototype.initialize.apply(this, arguments), this.markers = [];
    },
    "destroy": function() {
        this.clearMarkers(), this.markers = null, OpenLayers.Layer.prototype.destroy.apply(this, arguments);
    },
    "setOpacity": function(e) {
        if (e != this.opacity) {
            this.opacity = e;
            for (var t = 0, i = this.markers.length; t < i; t++) this.markers[t].setOpacity(this.opacity);
        }
    },
    "moveTo": function(e, t, i) {
        if (OpenLayers.Layer.prototype.moveTo.apply(this, arguments), t || !this.drawn) {
            for (var n = 0, r = this.markers.length; n < r; n++) this.drawMarker(this.markers[n]);
            this.drawn = !0;
        }
    },
    "addMarker": function(e) {
        this.markers.push(e), this.opacity < 1 && e.setOpacity(this.opacity), this.map && this.map.getExtent() && (e.map = this.map, 
        this.drawMarker(e));
    },
    "removeMarker": function(e) {
        this.markers && this.markers.length && (OpenLayers.Util.removeItem(this.markers, e), 
        e.erase());
    },
    "clearMarkers": function() {
        if (null != this.markers) for (;this.markers.length > 0; ) this.removeMarker(this.markers[0]);
    },
    "drawMarker": function(e) {
        var t = this.map.getLayerPxFromLonLat(e.lonlat);
        if (null == t) e.display(!1); else if (e.isDrawn()) e.icon && e.icon.moveTo(t); else {
            var i = e.draw(t);
            this.div.appendChild(i);
        }
    },
    "getDataExtent": function() {
        e = null;
        if (this.markers && this.markers.length > 0) for (var e = new OpenLayers.Bounds(), t = 0, i = this.markers.length; t < i; t++) {
            var n = this.markers[t];
            e.extend(n.lonlat);
        }
        return e;
    },
    "CLASS_NAME": "OpenLayers.Layer.Markers"
}), OpenLayers.Layer.Boxes = OpenLayers.Class(OpenLayers.Layer.Markers, {
    "drawMarker": function(e) {
        var t = this.map.getLayerPxFromLonLat({
            "lon": e.bounds.left,
            "lat": e.bounds.top
        }), i = this.map.getLayerPxFromLonLat({
            "lon": e.bounds.right,
            "lat": e.bounds.bottom
        });
        if (null == i || null == t) e.display(!1); else {
            var n = e.draw(t, {
                "w": Math.max(1, i.x - t.x),
                "h": Math.max(1, i.y - t.y)
            });
            e.drawn || (this.div.appendChild(n), e.drawn = !0);
        }
    },
    "removeMarker": function(e) {
        OpenLayers.Util.removeItem(this.markers, e), null != e.div && e.div.parentNode == this.div && this.div.removeChild(e.div);
    },
    "CLASS_NAME": "OpenLayers.Layer.Boxes"
}), OpenLayers.Layer.EventPane = OpenLayers.Class(OpenLayers.Layer, {
    "smoothDragPan": !0,
    "isBaseLayer": !0,
    "isFixed": !0,
    "pane": null,
    "mapObject": null,
    "initialize": function(e, t) {
        OpenLayers.Layer.prototype.initialize.apply(this, arguments), null == this.pane && (this.pane = OpenLayers.Util.createDiv(this.div.id + "_EventPane"));
    },
    "destroy": function() {
        this.mapObject = null, this.pane = null, OpenLayers.Layer.prototype.destroy.apply(this, arguments);
    },
    "setMap": function(e) {
        OpenLayers.Layer.prototype.setMap.apply(this, arguments), this.pane.style.zIndex = parseInt(this.div.style.zIndex) + 1, 
        this.pane.style.display = this.div.style.display, this.pane.style.width = "100%", 
        this.pane.style.height = "100%", "msie" == OpenLayers.BROWSER_NAME && (this.pane.style.background = "url(" + OpenLayers.Util.getImageLocation("blank.gif") + ")"), 
        this.isFixed ? this.map.viewPortDiv.appendChild(this.pane) : this.map.layerContainerDiv.appendChild(this.pane), 
        this.loadMapObject(), null == this.mapObject && this.loadWarningMessage(), this.map.events.register("zoomstart", this, this.onZoomStart);
    },
    "removeMap": function(e) {
        this.map.events.unregister("zoomstart", this, this.onZoomStart), this.pane && this.pane.parentNode && this.pane.parentNode.removeChild(this.pane), 
        OpenLayers.Layer.prototype.removeMap.apply(this, arguments);
    },
    "onZoomStart": function(e) {
        if (null != this.mapObject) {
            var t = this.getMapObjectLonLatFromOLLonLat(e.center), i = this.getMapObjectZoomFromOLZoom(e.zoom);
            this.setMapObjectCenter(t, i, !1);
        }
    },
    "loadWarningMessage": function() {
        this.div.style.backgroundColor = "darkblue";
        var e = this.map.getSize(), t = Math.min(e.w, 300), i = Math.min(e.h, 200), n = new OpenLayers.Size(t, i), r = new OpenLayers.Pixel(e.w / 2, e.h / 2).add(-n.w / 2, -n.h / 2), s = OpenLayers.Util.createDiv(this.name + "_warning", r, n, null, null, null, "auto");
        s.style.padding = "7px", s.style.backgroundColor = "yellow", s.innerHTML = this.getWarningHTML(), 
        this.div.appendChild(s);
    },
    "getWarningHTML": function() {
        return "";
    },
    "display": function(e) {
        OpenLayers.Layer.prototype.display.apply(this, arguments), this.pane.style.display = this.div.style.display;
    },
    "setZIndex": function(e) {
        OpenLayers.Layer.prototype.setZIndex.apply(this, arguments), this.pane.style.zIndex = parseInt(this.div.style.zIndex) + 1;
    },
    "moveByPx": function(e, t) {
        OpenLayers.Layer.prototype.moveByPx.apply(this, arguments), this.dragPanMapObject ? this.dragPanMapObject(e, -t) : this.moveTo(this.map.getCachedCenter());
    },
    "moveTo": function(e, t, i) {
        if (OpenLayers.Layer.prototype.moveTo.apply(this, arguments), null != this.mapObject) {
            var n = this.map.getCenter(), r = this.map.getZoom();
            if (null != n) {
                var s = this.getMapObjectCenter(), a = this.getOLLonLatFromMapObjectLonLat(s), o = this.getMapObjectZoom(), l = this.getOLZoomFromMapObjectZoom(o);
                if (!n.equals(a) || r != l) if (!t && a && this.dragPanMapObject && this.smoothDragPan) {
                    var h = this.map.getViewPortPxFromLonLat(a), u = this.map.getViewPortPxFromLonLat(n);
                    this.dragPanMapObject(u.x - h.x, h.y - u.y);
                } else {
                    var p = this.getMapObjectLonLatFromOLLonLat(n), c = this.getMapObjectZoomFromOLZoom(r);
                    this.setMapObjectCenter(p, c, i);
                }
            }
        }
    },
    "getLonLatFromViewPortPx": function(e) {
        var t = null;
        if (null != this.mapObject && null != this.getMapObjectCenter()) {
            var i = this.getMapObjectPixelFromOLPixel(e), n = this.getMapObjectLonLatFromMapObjectPixel(i);
            t = this.getOLLonLatFromMapObjectLonLat(n);
        }
        return t;
    },
    "getViewPortPxFromLonLat": function(e) {
        var t = null;
        if (null != this.mapObject && null != this.getMapObjectCenter()) {
            var i = this.getMapObjectLonLatFromOLLonLat(e), n = this.getMapObjectPixelFromMapObjectLonLat(i);
            t = this.getOLPixelFromMapObjectPixel(n);
        }
        return t;
    },
    "getOLLonLatFromMapObjectLonLat": function(e) {
        var t = null;
        if (null != e) {
            var i = this.getLongitudeFromMapObjectLonLat(e), n = this.getLatitudeFromMapObjectLonLat(e);
            t = new OpenLayers.LonLat(i, n);
        }
        return t;
    },
    "getMapObjectLonLatFromOLLonLat": function(e) {
        var t = null;
        return null != e && (t = this.getMapObjectLonLatFromLonLat(e.lon, e.lat)), t;
    },
    "getOLPixelFromMapObjectPixel": function(e) {
        var t = null;
        if (null != e) {
            var i = this.getXFromMapObjectPixel(e), n = this.getYFromMapObjectPixel(e);
            t = new OpenLayers.Pixel(i, n);
        }
        return t;
    },
    "getMapObjectPixelFromOLPixel": function(e) {
        var t = null;
        return null != e && (t = this.getMapObjectPixelFromXY(e.x, e.y)), t;
    },
    "CLASS_NAME": "OpenLayers.Layer.EventPane"
}), OpenLayers.Layer.FixedZoomLevels = OpenLayers.Class({
    "initialize": function() {},
    "initResolutions": function() {
        for (var e = [ "minZoomLevel", "maxZoomLevel", "numZoomLevels" ], t = 0, i = e.length; t < i; t++) {
            var n = e[t];
            this[n] = null != this.options[n] ? this.options[n] : this.map[n];
        }
        (null == this.minZoomLevel || this.minZoomLevel < this.MIN_ZOOM_LEVEL) && (this.minZoomLevel = this.MIN_ZOOM_LEVEL);
        var r, s = this.MAX_ZOOM_LEVEL - this.minZoomLevel + 1;
        if (r = null == this.options.numZoomLevels && null != this.options.maxZoomLevel || null == this.numZoomLevels && null != this.maxZoomLevel ? this.maxZoomLevel - this.minZoomLevel + 1 : this.numZoomLevels, 
        this.numZoomLevels = null != r ? Math.min(r, s) : s, this.maxZoomLevel = this.minZoomLevel + this.numZoomLevels - 1, 
        null != this.RESOLUTIONS) {
            var a = 0;
            this.resolutions = [];
            for (t = this.minZoomLevel; t <= this.maxZoomLevel; t++) this.resolutions[a++] = this.RESOLUTIONS[t];
            this.maxResolution = this.resolutions[0], this.minResolution = this.resolutions[this.resolutions.length - 1];
        }
    },
    "getResolution": function() {
        if (null != this.resolutions) return OpenLayers.Layer.prototype.getResolution.apply(this, arguments);
        var e = null, t = this.map.getSize(), i = this.getExtent();
        return null != t && null != i && (e = Math.max(i.getWidth() / t.w, i.getHeight() / t.h)), 
        e;
    },
    "getExtent": function() {
        var e = this.map.getSize(), t = this.getLonLatFromViewPortPx({
            "x": 0,
            "y": 0
        }), i = this.getLonLatFromViewPortPx({
            "x": e.w,
            "y": e.h
        });
        return null != t && null != i ? new OpenLayers.Bounds(t.lon, i.lat, i.lon, t.lat) : null;
    },
    "getZoomForResolution": function(e) {
        if (null != this.resolutions) return OpenLayers.Layer.prototype.getZoomForResolution.apply(this, arguments);
        var t = OpenLayers.Layer.prototype.getExtent.apply(this, []);
        return this.getZoomForExtent(t);
    },
    "getOLZoomFromMapObjectZoom": function(e) {
        var t = null;
        return null != e && (t = e - this.minZoomLevel, this.map.baseLayer !== this && (t = this.map.baseLayer.getZoomForResolution(this.getResolutionForZoom(t)))), 
        t;
    },
    "getMapObjectZoomFromOLZoom": function(e) {
        var t = null;
        return null != e && (t = e + this.minZoomLevel, this.map.baseLayer !== this && (t = this.getZoomForResolution(this.map.baseLayer.getResolutionForZoom(t)))), 
        t;
    },
    "CLASS_NAME": "OpenLayers.Layer.FixedZoomLevels"
}), OpenLayers.Layer.GeoRSS = OpenLayers.Class(OpenLayers.Layer.Markers, {
    "location": null,
    "features": null,
    "formatOptions": null,
    "selectedFeature": null,
    "icon": null,
    "popupSize": null,
    "useFeedTitle": !0,
    "initialize": function(e, t, i) {
        OpenLayers.Layer.Markers.prototype.initialize.apply(this, [ e, i ]), this.location = t, 
        this.features = [];
    },
    "destroy": function() {
        OpenLayers.Layer.Markers.prototype.destroy.apply(this, arguments), this.clearFeatures(), 
        this.features = null;
    },
    "loadRSS": function() {
        this.loaded || (this.events.triggerEvent("loadstart"), OpenLayers.Request.GET({
            "url": this.location,
            "success": this.parseData,
            "scope": this
        }), this.loaded = !0);
    },
    "moveTo": function(e, t, i) {
        OpenLayers.Layer.Markers.prototype.moveTo.apply(this, arguments), this.visibility && !this.loaded && this.loadRSS();
    },
    "parseData": function(e) {
        var t = e.responseXML;
        if (t && t.documentElement || (t = OpenLayers.Format.XML.prototype.read(e.responseText)), 
        this.useFeedTitle) {
            var i = null;
            try {
                i = t.getElementsByTagNameNS("*", "title")[0].firstChild.nodeValue;
            } catch (e) {
                i = t.getElementsByTagName("title")[0].firstChild.nodeValue;
            }
            i && this.setName(i);
        }
        var n = {};
        OpenLayers.Util.extend(n, this.formatOptions), this.map && !this.projection.equals(this.map.getProjectionObject()) && (n.externalProjection = this.projection, 
        n.internalProjection = this.map.getProjectionObject());
        for (var r = new OpenLayers.Format.GeoRSS(n).read(t), s = 0, a = r.length; s < a; s++) {
            var o = {};
            if ((d = r[s]).geometry) {
                var l = d.attributes.title ? d.attributes.title : "Untitled", h = d.attributes.description ? d.attributes.description : "No description.", u = d.attributes.link ? d.attributes.link : "", p = d.geometry.getBounds().getCenterLonLat();
                if (o.icon = null == this.icon ? OpenLayers.Marker.defaultIcon() : this.icon.clone(), 
                o.popupSize = this.popupSize ? this.popupSize.clone() : new OpenLayers.Size(250, 120), 
                l || h) {
                    o.title = l, o.description = h;
                    var c = '<div class="olLayerGeoRSSClose">[x]</div>';
                    c += '<div class="olLayerGeoRSSTitle">', u && (c += '<a class="link" href="' + u + '" target="_blank">'), 
                    c += l, u && (c += "</a>"), c += "</div>", c += '<div style="" class="olLayerGeoRSSDescription">', 
                    c += h, c += "</div>", o.popupContentHTML = c;
                }
                var d = new OpenLayers.Feature(this, p, o);
                this.features.push(d);
                var f = d.createMarker();
                f.events.register("click", d, this.markerClick), this.addMarker(f);
            }
        }
        this.events.triggerEvent("loadend");
    },
    "markerClick": function(e) {
        var t = this == this.layer.selectedFeature;
        this.layer.selectedFeature = t ? null : this;
        for (var i = 0, n = this.layer.map.popups.length; i < n; i++) this.layer.map.removePopup(this.layer.map.popups[i]);
        if (!t) {
            var r = this.createPopup();
            OpenLayers.Event.observe(r.div, "click", OpenLayers.Function.bind(function() {
                for (var e = 0, t = this.layer.map.popups.length; e < t; e++) this.layer.map.removePopup(this.layer.map.popups[e]);
            }, this)), this.layer.map.addPopup(r);
        }
        OpenLayers.Event.stop(e);
    },
    "clearFeatures": function() {
        if (null != this.features) for (;this.features.length > 0; ) {
            var e = this.features[0];
            OpenLayers.Util.removeItem(this.features, e), e.destroy();
        }
    },
    "CLASS_NAME": "OpenLayers.Layer.GeoRSS"
}), OpenLayers.Layer.SphericalMercator = {
    "getExtent": function() {
        return this.sphericalMercator ? this.map.calculateBounds() : OpenLayers.Layer.FixedZoomLevels.prototype.getExtent.apply(this);
    },
    "getLonLatFromViewPortPx": function(e) {
        return OpenLayers.Layer.prototype.getLonLatFromViewPortPx.apply(this, arguments);
    },
    "getViewPortPxFromLonLat": function(e) {
        return OpenLayers.Layer.prototype.getViewPortPxFromLonLat.apply(this, arguments);
    },
    "initMercatorParameters": function() {
        this.RESOLUTIONS = [];
        for (var e = 0; e <= this.MAX_ZOOM_LEVEL; ++e) this.RESOLUTIONS[e] = 156543.03390625 / Math.pow(2, e);
        this.units = "m", this.projection = this.projection || "EPSG:900913";
    },
    "forwardMercator": function() {
        var e = new OpenLayers.Projection("EPSG:4326"), t = new OpenLayers.Projection("EPSG:900913");
        return function(i, n) {
            var r = OpenLayers.Projection.transform({
                "x": i,
                "y": n
            }, e, t);
            return new OpenLayers.LonLat(r.x, r.y);
        };
    }(),
    "inverseMercator": function() {
        var e = new OpenLayers.Projection("EPSG:4326"), t = new OpenLayers.Projection("EPSG:900913");
        return function(i, n) {
            var r = OpenLayers.Projection.transform({
                "x": i,
                "y": n
            }, t, e);
            return new OpenLayers.LonLat(r.x, r.y);
        };
    }()
}, OpenLayers.Layer.Google = OpenLayers.Class(OpenLayers.Layer.EventPane, OpenLayers.Layer.FixedZoomLevels, {
    "MIN_ZOOM_LEVEL": 0,
    "MAX_ZOOM_LEVEL": 21,
    "RESOLUTIONS": [ 1.40625, .703125, .3515625, .17578125, .087890625, .0439453125, .02197265625, .010986328125, .0054931640625, .00274658203125, .001373291015625, .0006866455078125, .00034332275390625, .000171661376953125, 858306884765625e-19, 4291534423828125e-20, 2145767211914062e-20, 1072883605957031e-20, 536441802978515e-20, 268220901489257e-20, 1341104507446289e-21, 6.705522537231445e-7 ],
    "type": null,
    "wrapDateLine": !0,
    "sphericalMercator": !1,
    "useTiltImages": !1,
    "version": null,
    "initialize": function(e, t) {
        (t = t || {}).version = "3";
        var i = OpenLayers.Layer.Google["v" + t.version.replace(/\./g, "_")];
        if (!i) throw "Unsupported Google Maps API version: " + t.version;
        OpenLayers.Util.applyDefaults(t, i), OpenLayers.Util.applyDefaults(t, i.DEFAULTS), 
        t.maxExtent && (t.maxExtent = t.maxExtent.clone()), OpenLayers.Layer.EventPane.prototype.initialize.apply(this, [ e, t ]), 
        OpenLayers.Layer.FixedZoomLevels.prototype.initialize.apply(this, [ e, t ]), this.sphericalMercator && (OpenLayers.Util.extend(this, OpenLayers.Layer.SphericalMercator), 
        this.initMercatorParameters());
    },
    "clone": function() {
        return new OpenLayers.Layer.Google(this.name, this.getOptions());
    },
    "setVisibility": function(e) {
        var t = null == this.opacity ? 1 : this.opacity;
        OpenLayers.Layer.EventPane.prototype.setVisibility.apply(this, arguments), this.setOpacity(t);
    },
    "display": function(e) {
        this._dragging || this.setGMapVisibility(e), OpenLayers.Layer.EventPane.prototype.display.apply(this, arguments);
    },
    "moveTo": function(e, t, i) {
        this._dragging = i, OpenLayers.Layer.EventPane.prototype.moveTo.apply(this, arguments), 
        delete this._dragging;
    },
    "setOpacity": function(e) {
        if (e !== this.opacity && (null != this.map && this.map.events.triggerEvent("changelayer", {
            "layer": this,
            "property": "opacity"
        }), this.opacity = e), this.getVisibility()) {
            var t = this.getMapContainer();
            OpenLayers.Util.modifyDOMElement(t, null, null, null, null, null, null, e);
        }
    },
    "destroy": function() {
        if (this.map) {
            this.setGMapVisibility(!1);
            var e = OpenLayers.Layer.Google.cache[this.map.id];
            e && e.count <= 1 && this.removeGMapElements();
        }
        OpenLayers.Layer.EventPane.prototype.destroy.apply(this, arguments);
    },
    "removeGMapElements": function() {
        var e = OpenLayers.Layer.Google.cache[this.map.id];
        if (e) {
            var t = this.mapObject && this.getMapContainer();
            t && t.parentNode && t.parentNode.removeChild(t);
            var i = e.termsOfUse;
            i && i.parentNode && i.parentNode.removeChild(i);
            var n = e.poweredBy;
            n && n.parentNode && n.parentNode.removeChild(n), this.mapObject && window.google && google.maps && google.maps.event && google.maps.event.clearListeners && google.maps.event.clearListeners(this.mapObject, "tilesloaded");
        }
    },
    "removeMap": function(e) {
        this.visibility && this.mapObject && this.setGMapVisibility(!1);
        var t = OpenLayers.Layer.Google.cache[e.id];
        t && (t.count <= 1 ? (this.removeGMapElements(), delete OpenLayers.Layer.Google.cache[e.id]) : --t.count), 
        delete this.termsOfUse, delete this.poweredBy, delete this.mapObject, delete this.dragObject, 
        OpenLayers.Layer.EventPane.prototype.removeMap.apply(this, arguments);
    },
    "getOLBoundsFromMapObjectBounds": function(e) {
        var t = null;
        if (null != e) {
            var i = e.getSouthWest(), n = e.getNorthEast();
            this.sphericalMercator ? (i = this.forwardMercator(i.lng(), i.lat()), n = this.forwardMercator(n.lng(), n.lat())) : (i = new OpenLayers.LonLat(i.lng(), i.lat()), 
            n = new OpenLayers.LonLat(n.lng(), n.lat())), t = new OpenLayers.Bounds(i.lon, i.lat, n.lon, n.lat);
        }
        return t;
    },
    "getWarningHTML": function() {
        return OpenLayers.i18n("googleWarning");
    },
    "getMapObjectCenter": function() {
        return this.mapObject.getCenter();
    },
    "getMapObjectZoom": function() {
        return this.mapObject.getZoom();
    },
    "getLongitudeFromMapObjectLonLat": function(e) {
        return this.sphericalMercator ? this.forwardMercator(e.lng(), e.lat()).lon : e.lng();
    },
    "getLatitudeFromMapObjectLonLat": function(e) {
        return this.sphericalMercator ? this.forwardMercator(e.lng(), e.lat()).lat : e.lat();
    },
    "getXFromMapObjectPixel": function(e) {
        return e.x;
    },
    "getYFromMapObjectPixel": function(e) {
        return e.y;
    },
    "CLASS_NAME": "OpenLayers.Layer.Google"
}), OpenLayers.Layer.Google.cache = {}, OpenLayers.Layer.Image = OpenLayers.Class(OpenLayers.Layer, {
    "isBaseLayer": !0,
    "url": null,
    "extent": null,
    "size": null,
    "tile": null,
    "aspectRatio": null,
    "initialize": function(e, t, i, n, r) {
        this.url = t, this.extent = i, this.maxExtent = i, this.size = n, OpenLayers.Layer.prototype.initialize.apply(this, [ e, r ]), 
        this.aspectRatio = this.extent.getHeight() / this.size.h / (this.extent.getWidth() / this.size.w);
    },
    "destroy": function() {
        this.tile && (this.removeTileMonitoringHooks(this.tile), this.tile.destroy(), this.tile = null), 
        OpenLayers.Layer.prototype.destroy.apply(this, arguments);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.Image(this.name, this.url, this.extent, this.size, this.getOptions())), 
        e = OpenLayers.Layer.prototype.clone.apply(this, [ e ]);
    },
    "setMap": function(e) {
        null == this.options.maxResolution && (this.options.maxResolution = this.aspectRatio * this.extent.getWidth() / this.size.w), 
        OpenLayers.Layer.prototype.setMap.apply(this, arguments);
    },
    "moveTo": function(e, t, i) {
        OpenLayers.Layer.prototype.moveTo.apply(this, arguments);
        var n = null == this.tile;
        if (t || n) {
            this.setTileSize();
            var r = this.map.getLayerPxFromLonLat({
                "lon": this.extent.left,
                "lat": this.extent.top
            });
            n ? (this.tile = new OpenLayers.Tile.Image(this, r, this.extent, null, this.tileSize), 
            this.addTileMonitoringHooks(this.tile)) : (this.tile.size = this.tileSize.clone(), 
            this.tile.position = r.clone()), this.tile.draw();
        }
    },
    "setTileSize": function() {
        var e = this.extent.getWidth() / this.map.getResolution(), t = this.extent.getHeight() / this.map.getResolution();
        this.tileSize = new OpenLayers.Size(e, t);
    },
    "addTileMonitoringHooks": function(e) {
        e.onLoadStart = function() {
            this.events.triggerEvent("loadstart");
        }, e.events.register("loadstart", this, e.onLoadStart), e.onLoadEnd = function() {
            this.events.triggerEvent("loadend");
        }, e.events.register("loadend", this, e.onLoadEnd), e.events.register("unload", this, e.onLoadEnd);
    },
    "removeTileMonitoringHooks": function(e) {
        e.unload(), e.events.un({
            "loadstart": e.onLoadStart,
            "loadend": e.onLoadEnd,
            "unload": e.onLoadEnd,
            "scope": this
        });
    },
    "setUrl": function(e) {
        this.url = e, this.tile.draw();
    },
    "getURL": function(e) {
        return this.url;
    },
    "CLASS_NAME": "OpenLayers.Layer.Image"
}), OpenLayers.Layer.KaMap = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "isBaseLayer": !0,
    "DEFAULT_PARAMS": {
        "i": "jpeg",
        "map": ""
    },
    "initialize": function(e, t, i, n) {
        OpenLayers.Layer.Grid.prototype.initialize.apply(this, arguments), this.params = OpenLayers.Util.applyDefaults(this.params, this.DEFAULT_PARAMS);
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = this.map.getResolution(), i = Math.round(1e4 * this.map.getScale()) / 1e4, n = Math.round(e.left / t), r = -Math.round(e.top / t);
        return this.getFullRequestString({
            "t": r,
            "l": n,
            "s": i
        });
    },
    "calculateGridLayout": function(e, t, i) {
        var n = i * this.tileSize.w, r = i * this.tileSize.h, s = e.left, a = Math.floor(s / n) - this.buffer, o = e.top;
        return {
            "tilelon": n,
            "tilelat": r,
            "startcol": a,
            "startrow": Math.floor(o / r) + this.buffer
        };
    },
    "getTileBoundsForGridIndex": function(e, t) {
        this.getTileOrigin();
        var i = this.gridLayout, n = i.tilelon, r = i.tilelat, s = (i.startcol + t) * n, a = (i.startrow - e) * r;
        return new OpenLayers.Bounds(s, a, s + n, a + r);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.KaMap(this.name, this.url, this.params, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]), null != this.tileSize && (e.tileSize = this.tileSize.clone()), 
        e.grid = [], e;
    },
    "getTileBounds": function(e) {
        var t = this.getResolution(), i = t * this.tileSize.w, n = t * this.tileSize.h, r = this.getLonLatFromViewPortPx(e), s = i * Math.floor(r.lon / i), a = n * Math.floor(r.lat / n);
        return new OpenLayers.Bounds(s, a, s + i, a + n);
    },
    "CLASS_NAME": "OpenLayers.Layer.KaMap"
}), OpenLayers.Layer.KaMapCache = OpenLayers.Class(OpenLayers.Layer.KaMap, {
    "IMAGE_EXTENSIONS": {
        "jpeg": "jpg",
        "gif": "gif",
        "png": "png",
        "png8": "png",
        "png24": "png",
        "dithered": "png"
    },
    "DEFAULT_FORMAT": "jpeg",
    "initialize": function(e, t, i, n) {
        OpenLayers.Layer.KaMap.prototype.initialize.apply(this, arguments), this.extension = this.IMAGE_EXTENSIONS[this.params.i.toLowerCase() || this.DEFAULT_FORMAT];
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = this.map.getResolution(), i = Math.round(1e4 * this.map.getScale()) / 1e4, n = Math.round(e.left / t), r = -Math.round(e.top / t), s = Math.floor(n / this.tileSize.w / this.params.metaTileSize.w) * this.tileSize.w * this.params.metaTileSize.w, a = Math.floor(r / this.tileSize.h / this.params.metaTileSize.h) * this.tileSize.h * this.params.metaTileSize.h, o = [ "/", this.params.map, "/", i, "/", this.params.g.replace(/\s/g, "_"), "/def/t", a, "/l", s, "/t", r, "l", n, ".", this.extension ], l = this.url;
        return OpenLayers.Util.isArray(l) && (l = this.selectUrl(o.join(""), l)), l + o.join("");
    },
    "CLASS_NAME": "OpenLayers.Layer.KaMapCache"
}), OpenLayers.Layer.MapGuide = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "isBaseLayer": !0,
    "useHttpTile": !1,
    "singleTile": !1,
    "useOverlay": !1,
    "useAsyncOverlay": !0,
    "TILE_PARAMS": {
        "operation": "GETTILEIMAGE",
        "version": "1.2.0"
    },
    "SINGLE_TILE_PARAMS": {
        "operation": "GETMAPIMAGE",
        "format": "PNG",
        "locale": "en",
        "clip": "1",
        "version": "1.0.0"
    },
    "OVERLAY_PARAMS": {
        "operation": "GETDYNAMICMAPOVERLAYIMAGE",
        "format": "PNG",
        "locale": "en",
        "clip": "1",
        "version": "2.0.0"
    },
    "FOLDER_PARAMS": {
        "tileColumnsPerFolder": 30,
        "tileRowsPerFolder": 30,
        "format": "png",
        "querystring": null
    },
    "defaultSize": new OpenLayers.Size(300, 300),
    "tileOriginCorner": "tl",
    "initialize": function(e, t, i, n) {
        OpenLayers.Layer.Grid.prototype.initialize.apply(this, arguments), null != n && null != n.isBaseLayer || (this.isBaseLayer = "true" != this.transparent && 1 != this.transparent), 
        n && null != n.useOverlay && (this.useOverlay = n.useOverlay), this.singleTile ? this.useOverlay ? (OpenLayers.Util.applyDefaults(this.params, this.OVERLAY_PARAMS), 
        this.useAsyncOverlay || (this.params.version = "1.0.0")) : OpenLayers.Util.applyDefaults(this.params, this.SINGLE_TILE_PARAMS) : (this.useHttpTile ? OpenLayers.Util.applyDefaults(this.params, this.FOLDER_PARAMS) : OpenLayers.Util.applyDefaults(this.params, this.TILE_PARAMS), 
        this.setTileSize(this.defaultSize));
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.MapGuide(this.name, this.url, this.params, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getURL": function(e) {
        var t, i = e.getCenterLonLat(), n = this.map.getSize();
        if (this.singleTile) {
            var r = {
                "setdisplaydpi": OpenLayers.DOTS_PER_INCH,
                "setdisplayheight": n.h * this.ratio,
                "setdisplaywidth": n.w * this.ratio,
                "setviewcenterx": i.lon,
                "setviewcentery": i.lat,
                "setviewscale": this.map.getScale()
            };
            if (this.useOverlay && !this.useAsyncOverlay) {
                var s = {};
                (s = OpenLayers.Util.extend(s, r)).operation = "GETVISIBLEMAPEXTENT", s.version = "1.0.0", 
                s.session = this.params.session, s.mapName = this.params.mapName, s.format = "text/xml", 
                t = this.getFullRequestString(s), OpenLayers.Request.GET({
                    "url": t,
                    "async": !1
                });
            }
            t = this.getFullRequestString(r);
        } else {
            var a = this.map.getResolution(), o = Math.floor((e.left - this.maxExtent.left) / a);
            o = Math.round(o / this.tileSize.w);
            var l = Math.floor((this.maxExtent.top - e.top) / a);
            l = Math.round(l / this.tileSize.h), t = this.useHttpTile ? this.getImageFilePath({
                "tilecol": o,
                "tilerow": l,
                "scaleindex": this.resolutions.length - this.map.zoom - 1
            }) : this.getFullRequestString({
                "tilecol": o,
                "tilerow": l,
                "scaleindex": this.resolutions.length - this.map.zoom - 1
            });
        }
        return t;
    },
    "getFullRequestString": function(e, t) {
        var i = null == t ? this.url : t;
        "object" == typeof i && (i = i[Math.floor(Math.random() * i.length)]);
        var n = i, r = OpenLayers.Util.extend({}, this.params);
        r = OpenLayers.Util.extend(r, e);
        var s = OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(i));
        for (var a in r) a.toUpperCase() in s && delete r[a];
        var o = OpenLayers.Util.getParameterString(r);
        if ("" != (o = o.replace(/,/g, "+"))) {
            var l = i.charAt(i.length - 1);
            "&" == l || "?" == l ? n += o : -1 == i.indexOf("?") ? n += "?" + o : n += "&" + o;
        }
        return n;
    },
    "getImageFilePath": function(e, t) {
        var i = null == t ? this.url : t;
        "object" == typeof i && (i = i[Math.floor(Math.random() * i.length)]);
        var n = i, r = "", s = "";
        e.tilerow < 0 && (r = "-"), 0 == e.tilerow ? r += "0" : r += Math.floor(Math.abs(e.tilerow / this.params.tileRowsPerFolder)) * this.params.tileRowsPerFolder, 
        e.tilecol < 0 && (s = "-"), 0 == e.tilecol ? s += "0" : s += Math.floor(Math.abs(e.tilecol / this.params.tileColumnsPerFolder)) * this.params.tileColumnsPerFolder;
        var a = "/S" + Math.floor(e.scaleindex) + "/" + this.params.basemaplayergroupname + "/R" + r + "/C" + s + "/" + e.tilerow % this.params.tileRowsPerFolder + "_" + e.tilecol % this.params.tileColumnsPerFolder + "." + this.params.format;
        return this.params.querystring && (a += "?" + this.params.querystring), n += a;
    },
    "CLASS_NAME": "OpenLayers.Layer.MapGuide"
}), OpenLayers.Layer.MapServer = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "DEFAULT_PARAMS": {
        "mode": "map",
        "map_imagetype": "png"
    },
    "initialize": function(e, t, i, n) {
        OpenLayers.Layer.Grid.prototype.initialize.apply(this, arguments), this.params = OpenLayers.Util.applyDefaults(this.params, this.DEFAULT_PARAMS), 
        null != n && null != n.isBaseLayer || (this.isBaseLayer = "true" != this.params.transparent && 1 != this.params.transparent);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.MapServer(this.name, this.url, this.params, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getURL": function(e) {
        var t = [ (e = this.adjustBounds(e)).left, e.bottom, e.right, e.top ], i = this.getImageSize(e);
        return this.getFullRequestString({
            "mapext": t,
            "imgext": t,
            "map_size": [ i.w, i.h ],
            "imgx": i.w / 2,
            "imgy": i.h / 2,
            "imgxy": [ i.w, i.h ]
        });
    },
    "getFullRequestString": function(e, t) {
        var i = null == t ? this.url : t, n = OpenLayers.Util.extend({}, this.params);
        n = OpenLayers.Util.extend(n, e);
        var r = OpenLayers.Util.getParameterString(n);
        OpenLayers.Util.isArray(i) && (i = this.selectUrl(r, i));
        var s = OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(i));
        for (var a in n) a.toUpperCase() in s && delete n[a];
        var o = i;
        if ("" != (r = (r = OpenLayers.Util.getParameterString(n)).replace(/,/g, "+"))) {
            var l = i.charAt(i.length - 1);
            "&" == l || "?" == l ? o += r : -1 == i.indexOf("?") ? o += "?" + r : o += "&" + r;
        }
        return o;
    },
    "CLASS_NAME": "OpenLayers.Layer.MapServer"
}), OpenLayers.Layer.OSM = OpenLayers.Class(OpenLayers.Layer.XYZ, {
    "name": "OpenStreetMap",
    "url": [ "//a.tile.openstreetmap.org/${z}/${x}/${y}.png", "//b.tile.openstreetmap.org/${z}/${x}/${y}.png", "//c.tile.openstreetmap.org/${z}/${x}/${y}.png" ],
    "attribution": "&copy; <a href='//www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors",
    "sphericalMercator": !0,
    "wrapDateLine": !0,
    "tileOptions": null,
    "initialize": function(e, t, i) {
        OpenLayers.Layer.XYZ.prototype.initialize.apply(this, arguments), this.tileOptions = OpenLayers.Util.extend({
            "crossOriginKeyword": "anonymous"
        }, this.options && this.options.tileOptions);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.OSM(this.name, this.url, this.getOptions())), 
        e = OpenLayers.Layer.XYZ.prototype.clone.apply(this, [ e ]);
    },
    "CLASS_NAME": "OpenLayers.Layer.OSM"
}), OpenLayers.Layer.PointGrid = OpenLayers.Class(OpenLayers.Layer.Vector, {
    "dx": null,
    "dy": null,
    "ratio": 1.5,
    "maxFeatures": 250,
    "rotation": 0,
    "origin": null,
    "gridBounds": null,
    "initialize": function(e) {
        e = e || {}, OpenLayers.Layer.Vector.prototype.initialize.apply(this, [ e.name, e ]);
    },
    "setMap": function(e) {
        OpenLayers.Layer.Vector.prototype.setMap.apply(this, arguments), e.events.register("moveend", this, this.onMoveEnd);
    },
    "removeMap": function(e) {
        e.events.unregister("moveend", this, this.onMoveEnd), OpenLayers.Layer.Vector.prototype.removeMap.apply(this, arguments);
    },
    "setRatio": function(e) {
        this.ratio = e, this.updateGrid(!0);
    },
    "setMaxFeatures": function(e) {
        this.maxFeatures = e, this.updateGrid(!0);
    },
    "setSpacing": function(e, t) {
        this.dx = e, this.dy = t || e, this.updateGrid(!0);
    },
    "setOrigin": function(e) {
        this.origin = e, this.updateGrid(!0);
    },
    "getOrigin": function() {
        return this.origin || (this.origin = this.map.getExtent().getCenterLonLat()), this.origin;
    },
    "setRotation": function(e) {
        this.rotation = e, this.updateGrid(!0);
    },
    "onMoveEnd": function() {
        this.updateGrid();
    },
    "getViewBounds": function() {
        var e = this.map.getExtent();
        if (this.rotation) {
            var t = this.getOrigin(), i = new OpenLayers.Geometry.Point(t.lon, t.lat), n = e.toGeometry();
            n.rotate(-this.rotation, i), e = n.getBounds();
        }
        return e;
    },
    "updateGrid": function(e) {
        if (e || this.invalidBounds()) {
            var t = this.getViewBounds(), i = this.getOrigin(), n = new OpenLayers.Geometry.Point(i.lon, i.lat), r = t.getWidth(), s = t.getHeight(), a = r / s, o = Math.sqrt(this.dx * this.dy * this.maxFeatures / a), l = o * a, h = Math.min(r * this.ratio, l), u = Math.min(s * this.ratio, o), p = t.getCenterLonLat();
            this.gridBounds = new OpenLayers.Bounds(p.lon - h / 2, p.lat - u / 2, p.lon + h / 2, p.lat + u / 2);
            for (var c, d, f, y = Math.floor(u / this.dy), m = Math.floor(h / this.dx), g = i.lon + this.dx * Math.ceil((this.gridBounds.left - i.lon) / this.dx), v = i.lat + this.dy * Math.ceil((this.gridBounds.bottom - i.lat) / this.dy), L = new Array(y * m), O = 0; O < m; ++O) {
                c = g + O * this.dx;
                for (var b = 0; b < y; ++b) d = v + b * this.dy, f = new OpenLayers.Geometry.Point(c, d), 
                this.rotation && f.rotate(this.rotation, n), L[O * y + b] = new OpenLayers.Feature.Vector(f);
            }
            this.destroyFeatures(this.features, {
                "silent": !0
            }), this.addFeatures(L, {
                "silent": !0
            });
        }
    },
    "invalidBounds": function() {
        return !this.gridBounds || !this.gridBounds.containsBounds(this.getViewBounds());
    },
    "CLASS_NAME": "OpenLayers.Layer.PointGrid"
}), OpenLayers.Layer.PointTrack = OpenLayers.Class(OpenLayers.Layer.Vector, {
    "dataFrom": null,
    "styleFrom": null,
    "addNodes": function(e, t) {
        if (e.length < 2) throw new Error("At least two point features have to be added to create a line from");
        for (var i, n, r, s = new Array(e.length - 1), a = 0, o = e.length; a < o; a++) {
            if (i = e[a], r = i.geometry) {
                if ("OpenLayers.Geometry.Point" != r.CLASS_NAME) throw new TypeError("Only features with point geometries are supported.");
            } else {
                var l = i.lonlat;
                r = new OpenLayers.Geometry.Point(l.lon, l.lat);
            }
            if (a > 0) {
                var h = null != this.dataFrom ? e[a + this.dataFrom].data || e[a + this.dataFrom].attributes : null, u = null != this.styleFrom ? e[a + this.styleFrom].style : null, p = new OpenLayers.Geometry.LineString([ n, r ]);
                s[a - 1] = new OpenLayers.Feature.Vector(p, h, u);
            }
            n = r;
        }
        this.addFeatures(s, t);
    },
    "CLASS_NAME": "OpenLayers.Layer.PointTrack"
}), OpenLayers.Layer.PointTrack.SOURCE_NODE = -1, OpenLayers.Layer.PointTrack.TARGET_NODE = 0, 
OpenLayers.Layer.PointTrack.dataFrom = {
    "SOURCE_NODE": -1,
    "TARGET_NODE": 0
}, OpenLayers.Layer.Text = OpenLayers.Class(OpenLayers.Layer.Markers, {
    "location": null,
    "features": null,
    "formatOptions": null,
    "selectedFeature": null,
    "initialize": function(e, t) {
        OpenLayers.Layer.Markers.prototype.initialize.apply(this, arguments), this.features = [];
    },
    "destroy": function() {
        OpenLayers.Layer.Markers.prototype.destroy.apply(this, arguments), this.clearFeatures(), 
        this.features = null;
    },
    "loadText": function() {
        if (!this.loaded && null != this.location) {
            this.events.triggerEvent("loadstart"), OpenLayers.Request.GET({
                "url": this.location,
                "success": this.parseData,
                "failure": function(e) {
                    this.events.triggerEvent("loadend");
                },
                "scope": this
            }), this.loaded = !0;
        }
    },
    "moveTo": function(e, t, i) {
        OpenLayers.Layer.Markers.prototype.moveTo.apply(this, arguments), this.visibility && !this.loaded && this.loadText();
    },
    "parseData": function(e) {
        var t = e.responseText, i = {};
        OpenLayers.Util.extend(i, this.formatOptions), this.map && !this.projection.equals(this.map.getProjectionObject()) && (i.externalProjection = this.projection, 
        i.internalProjection = this.map.getProjectionObject());
        for (var n = new OpenLayers.Format.Text(i).read(t), r = 0, s = n.length; r < s; r++) {
            var a, o, l, h = {}, u = n[r];
            a = new OpenLayers.LonLat(u.geometry.x, u.geometry.y), u.style.graphicWidth && u.style.graphicHeight && (o = new OpenLayers.Size(u.style.graphicWidth, u.style.graphicHeight)), 
            void 0 !== u.style.graphicXOffset && void 0 !== u.style.graphicYOffset && (l = new OpenLayers.Pixel(u.style.graphicXOffset, u.style.graphicYOffset)), 
            null != u.style.externalGraphic ? h.icon = new OpenLayers.Icon(u.style.externalGraphic, o, l) : (h.icon = OpenLayers.Marker.defaultIcon(), 
            null != o && h.icon.setSize(o)), null != u.attributes.title && null != u.attributes.description && (h.popupContentHTML = "<h2>" + u.attributes.title + "</h2><p>" + u.attributes.description + "</p>"), 
            h.overflow = u.attributes.overflow || "auto";
            var p = new OpenLayers.Feature(this, a, h);
            this.features.push(p);
            var c = p.createMarker();
            null != u.attributes.title && null != u.attributes.description && c.events.register("click", p, this.markerClick), 
            this.addMarker(c);
        }
        this.events.triggerEvent("loadend");
    },
    "markerClick": function(e) {
        var t = this == this.layer.selectedFeature;
        this.layer.selectedFeature = t ? null : this;
        for (var i = 0, n = this.layer.map.popups.length; i < n; i++) this.layer.map.removePopup(this.layer.map.popups[i]);
        t || this.layer.map.addPopup(this.createPopup()), OpenLayers.Event.stop(e);
    },
    "clearFeatures": function() {
        if (null != this.features) for (;this.features.length > 0; ) {
            var e = this.features[0];
            OpenLayers.Util.removeItem(this.features, e), e.destroy();
        }
    },
    "CLASS_NAME": "OpenLayers.Layer.Text"
}), OpenLayers.Layer.TileCache = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "isBaseLayer": !0,
    "format": "image/png",
    "serverResolutions": null,
    "initialize": function(e, t, i, n) {
        this.layername = i, OpenLayers.Layer.Grid.prototype.initialize.apply(this, [ e, t, {}, n ]), 
        this.extension = this.format.split("/")[1].toLowerCase(), this.extension = "jpg" == this.extension ? "jpeg" : this.extension;
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.TileCache(this.name, this.url, this.layername, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getURL": function(e) {
        var t = this.getServerResolution(), i = this.maxExtent, n = this.tileSize, r = Math.round((e.left - i.left) / (t * n.w)), s = Math.round((e.bottom - i.bottom) / (t * n.h)), a = null != this.serverResolutions ? OpenLayers.Util.indexOf(this.serverResolutions, t) : this.map.getZoom(), o = [ this.layername, OpenLayers.Number.zeroPad(a, 2), OpenLayers.Number.zeroPad(parseInt(r / 1e6), 3), OpenLayers.Number.zeroPad(parseInt(r / 1e3) % 1e3, 3), OpenLayers.Number.zeroPad(parseInt(r) % 1e3, 3), OpenLayers.Number.zeroPad(parseInt(s / 1e6), 3), OpenLayers.Number.zeroPad(parseInt(s / 1e3) % 1e3, 3), OpenLayers.Number.zeroPad(parseInt(s) % 1e3, 3) + "." + this.extension ].join("/"), l = this.url;
        return OpenLayers.Util.isArray(l) && (l = this.selectUrl(o, l)), (l = "/" == l.charAt(l.length - 1) ? l : l + "/") + o;
    },
    "CLASS_NAME": "OpenLayers.Layer.TileCache"
}), OpenLayers.Layer.TMS = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "serviceVersion": "1.0.0",
    "layername": null,
    "type": null,
    "isBaseLayer": !0,
    "tileOrigin": null,
    "serverResolutions": null,
    "zoomOffset": 0,
    "initialize": function(e, t, i) {
        var n = [];
        n.push(e, t, {}, i), OpenLayers.Layer.Grid.prototype.initialize.apply(this, n);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.TMS(this.name, this.url, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = this.getServerResolution(), i = Math.round((e.left - this.tileOrigin.lon) / (t * this.tileSize.w)), n = Math.round((e.bottom - this.tileOrigin.lat) / (t * this.tileSize.h)), r = this.getServerZoom(), s = this.serviceVersion + "/" + this.layername + "/" + r + "/" + i + "/" + n + "." + this.type, a = this.url;
        return OpenLayers.Util.isArray(a) && (a = this.selectUrl(s, a)), a + s;
    },
    "setMap": function(e) {
        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments), this.tileOrigin || (this.tileOrigin = new OpenLayers.LonLat(this.map.maxExtent.left, this.map.maxExtent.bottom));
    },
    "CLASS_NAME": "OpenLayers.Layer.TMS"
}), OpenLayers.Tile.UTFGrid = OpenLayers.Class(OpenLayers.Tile, {
    "url": null,
    "utfgridResolution": 2,
    "json": null,
    "format": null,
    "destroy": function() {
        this.clear(), OpenLayers.Tile.prototype.destroy.apply(this, arguments);
    },
    "draw": function() {
        var e = OpenLayers.Tile.prototype.draw.apply(this, arguments);
        if (e) if (this.isLoading ? (this.abortLoading(), this.events.triggerEvent("reload")) : (this.isLoading = !0, 
        this.events.triggerEvent("loadstart")), this.url = this.layer.getURL(this.bounds), 
        this.layer.useJSONP) {
            var t = new OpenLayers.Protocol.Script({
                "url": this.url,
                "callback": function(e) {
                    this.isLoading = !1, this.events.triggerEvent("loadend"), this.json = e.data;
                },
                "scope": this
            });
            t.read(), this.request = t;
        } else this.request = OpenLayers.Request.GET({
            "url": this.url,
            "callback": function(e) {
                this.isLoading = !1, this.events.triggerEvent("loadend"), 200 === e.status && this.parseData(e.responseText);
            },
            "scope": this
        }); else this.unload();
        return e;
    },
    "abortLoading": function() {
        this.request && (this.request.abort(), delete this.request), this.isLoading = !1;
    },
    "getFeatureInfo": function(e, t) {
        var i = null;
        if (this.json) {
            var n = this.getFeatureId(e, t);
            null !== n && (i = {
                "id": n,
                "data": this.json.data[n]
            });
        }
        return i;
    },
    "getFeatureId": function(e, t) {
        var i = null;
        if (this.json) {
            var n = this.utfgridResolution, r = Math.floor(t / n), s = Math.floor(e / n), a = this.json.grid[r].charCodeAt(s), o = this.indexFromCharCode(a), l = this.json.keys;
            !isNaN(o) && o in l && (i = l[o]);
        }
        return i;
    },
    "indexFromCharCode": function(e) {
        return e >= 93 && e--, e >= 35 && e--, e - 32;
    },
    "parseData": function(e) {
        this.format || (this.format = new OpenLayers.Format.JSON()), this.json = this.format.read(e);
    },
    "clear": function() {
        this.json = null;
    },
    "CLASS_NAME": "OpenLayers.Tile.UTFGrid"
}), OpenLayers.Layer.UTFGrid = OpenLayers.Class(OpenLayers.Layer.XYZ, {
    "isBaseLayer": !1,
    "projection": new OpenLayers.Projection("EPSG:900913"),
    "useJSONP": !1,
    "tileClass": OpenLayers.Tile.UTFGrid,
    "initialize": function(e) {
        OpenLayers.Layer.Grid.prototype.initialize.apply(this, [ e.name, e.url, {}, e ]), 
        this.tileOptions = OpenLayers.Util.extend({
            "utfgridResolution": this.utfgridResolution
        }, this.tileOptions);
    },
    "createBackBuffer": function() {},
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.UTFGrid(this.getOptions())), e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getFeatureInfo": function(e) {
        var t = null, i = this.getTileData(e);
        return i && i.tile && (t = i.tile.getFeatureInfo(i.i, i.j)), t;
    },
    "getFeatureId": function(e) {
        var t = null, i = this.getTileData(e);
        return i.tile && (t = i.tile.getFeatureId(i.i, i.j)), t;
    },
    "CLASS_NAME": "OpenLayers.Layer.UTFGrid"
}), OpenLayers.Layer.WMTS = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "isBaseLayer": !0,
    "version": "1.0.0",
    "requestEncoding": "KVP",
    "url": null,
    "layer": null,
    "matrixSet": null,
    "style": null,
    "format": "image/jpeg",
    "tileOrigin": null,
    "tileFullExtent": null,
    "formatSuffix": null,
    "matrixIds": null,
    "dimensions": null,
    "params": null,
    "zoomOffset": 0,
    "serverResolutions": null,
    "formatSuffixMap": {
        "image/png": "png",
        "image/png8": "png",
        "image/png24": "png",
        "image/png32": "png",
        "png": "png",
        "image/jpeg": "jpg",
        "image/jpg": "jpg",
        "jpeg": "jpg",
        "jpg": "jpg"
    },
    "matrix": null,
    "initialize": function(e) {
        var t = {
            "url": !0,
            "layer": !0,
            "style": !0,
            "matrixSet": !0
        };
        for (var i in t) if (!(i in e)) throw new Error("Missing property '" + i + "' in layer configuration.");
        e.params = OpenLayers.Util.upperCaseObject(e.params);
        var n = [ e.name, e.url, e.params, e ];
        if (OpenLayers.Layer.Grid.prototype.initialize.apply(this, n), this.formatSuffix || (this.formatSuffix = this.formatSuffixMap[this.format] || this.format.split("/").pop()), 
        this.matrixIds) {
            var r = this.matrixIds.length;
            if (r && "string" == typeof this.matrixIds[0]) {
                var s = this.matrixIds;
                this.matrixIds = new Array(r);
                for (var a = 0; a < r; ++a) this.matrixIds[a] = {
                    "identifier": s[a]
                };
            }
        }
    },
    "setMap": function() {
        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments);
    },
    "updateMatrixProperties": function() {
        this.matrix = this.getMatrix(), this.matrix && (this.matrix.topLeftCorner && (this.tileOrigin = this.matrix.topLeftCorner), 
        this.matrix.tileWidth && this.matrix.tileHeight && (this.tileSize = new OpenLayers.Size(this.matrix.tileWidth, this.matrix.tileHeight)), 
        this.tileOrigin || (this.tileOrigin = new OpenLayers.LonLat(this.maxExtent.left, this.maxExtent.top)), 
        this.tileFullExtent || (this.tileFullExtent = this.maxExtent));
    },
    "moveTo": function(e, t, i) {
        return !t && this.matrix || this.updateMatrixProperties(), OpenLayers.Layer.Grid.prototype.moveTo.apply(this, arguments);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.WMTS(this.options)), e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getIdentifier": function() {
        return this.getServerZoom();
    },
    "getMatrix": function() {
        var e;
        if (this.matrixIds && 0 !== this.matrixIds.length) if ("scaleDenominator" in this.matrixIds[0]) for (var t, i = OpenLayers.METERS_PER_INCH * OpenLayers.INCHES_PER_UNIT[this.units] * this.getServerResolution() / 28e-5, n = Number.POSITIVE_INFINITY, r = 0, s = this.matrixIds.length; r < s; ++r) (t = Math.abs(1 - this.matrixIds[r].scaleDenominator / i)) < n && (n = t, 
        e = this.matrixIds[r]); else e = this.matrixIds[this.getIdentifier()]; else e = {
            "identifier": this.getIdentifier()
        };
        return e;
    },
    "getTileInfo": function(e) {
        var t = this.getServerResolution(), i = (e.lon - this.tileOrigin.lon) / (t * this.tileSize.w), n = (this.tileOrigin.lat - e.lat) / (t * this.tileSize.h), r = Math.floor(i), s = Math.floor(n);
        return {
            "col": r,
            "row": s,
            "i": Math.floor((i - r) * this.tileSize.w),
            "j": Math.floor((n - s) * this.tileSize.h)
        };
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = "";
        if (!this.tileFullExtent || this.tileFullExtent.intersectsBounds(e)) {
            var i, n = e.getCenterLonLat(), r = this.getTileInfo(n), s = (this.matrix.identifier, 
            this.dimensions);
            if (t = OpenLayers.Util.isArray(this.url) ? this.selectUrl([ this.version, this.style, this.matrixSet, this.matrix.identifier, r.row, r.col ].join(","), this.url) : this.url, 
            "REST" === this.requestEncoding.toUpperCase()) if (i = this.params, -1 !== t.indexOf("{")) {
                var a = t.replace(/\{/g, "${"), o = {
                    "style": this.style,
                    "Style": this.style,
                    "TileMatrixSet": this.matrixSet,
                    "TileMatrix": this.matrix.identifier,
                    "TileRow": r.row,
                    "TileCol": r.col
                };
                if (s) {
                    var l;
                    for (u = s.length - 1; u >= 0; --u) o[l = s[u]] = i[l.toUpperCase()];
                }
                t = OpenLayers.String.format(a, o);
            } else {
                var h = this.version + "/" + this.layer + "/" + this.style + "/";
                if (s) for (var u = 0; u < s.length; u++) void 0 !== i[s[u]] && (h = h + i[s[u]] + "/");
                h = h + this.matrixSet + "/" + this.matrix.identifier + "/" + r.row + "/" + r.col + "." + this.formatSuffix, 
                t.match(/\/$/) || (t += "/"), t += h;
            } else "KVP" === this.requestEncoding.toUpperCase() && (i = {
                "SERVICE": "WMTS",
                "REQUEST": "GetTile",
                "VERSION": this.version,
                "LAYER": this.layer,
                "STYLE": this.style,
                "TILEMATRIXSET": this.matrixSet,
                "TILEMATRIX": this.matrix.identifier,
                "TILEROW": r.row,
                "TILECOL": r.col,
                "FORMAT": this.format
            }, t = OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this, [ i ]));
        }
        return t;
    },
    "mergeNewParams": function(e) {
        return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this, [ OpenLayers.Util.upperCaseObject(e) ]);
    },
    "CLASS_NAME": "OpenLayers.Layer.WMTS"
}), OpenLayers.Layer.WorldWind = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "DEFAULT_PARAMS": {},
    "isBaseLayer": !0,
    "lzd": null,
    "zoomLevels": null,
    "initialize": function(e, t, i, n, r, s) {
        this.lzd = i, this.zoomLevels = n;
        var a = [];
        a.push(e, t, r, s), OpenLayers.Layer.Grid.prototype.initialize.apply(this, a), this.params = OpenLayers.Util.applyDefaults(this.params, this.DEFAULT_PARAMS);
    },
    "getZoom": function() {
        var e = this.map.getZoom();
        this.map.getMaxExtent();
        return e -= Math.log(this.maxResolution / (this.lzd / 512)) / Math.log(2);
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = this.getZoom(), i = this.map.getMaxExtent(), n = this.lzd / Math.pow(2, this.getZoom()), r = Math.floor((e.left - i.left) / n), s = Math.floor((e.bottom - i.bottom) / n);
        return this.map.getResolution() <= this.lzd / 512 && this.getZoom() <= this.zoomLevels ? this.getFullRequestString({
            "L": t,
            "X": r,
            "Y": s
        }) : OpenLayers.Util.getImageLocation("blank.gif");
    },
    "CLASS_NAME": "OpenLayers.Layer.WorldWind"
}), OpenLayers.Layer.Zoomify = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "size": null,
    "isBaseLayer": !0,
    "standardTileSize": 256,
    "tileOriginCorner": "tl",
    "numberOfTiers": 0,
    "tileCountUpToTier": null,
    "tierSizeInTiles": null,
    "tierImageSize": null,
    "initialize": function(e, t, i, n) {
        this.initializeZoomify(i), OpenLayers.Layer.Grid.prototype.initialize.apply(this, [ e, t, {}, n ]);
    },
    "initializeZoomify": function(e) {
        var t = e.clone();
        this.size = e.clone();
        var i = new OpenLayers.Size(Math.ceil(t.w / this.standardTileSize), Math.ceil(t.h / this.standardTileSize));
        for (this.tierSizeInTiles = [ i ], this.tierImageSize = [ t ]; t.w > this.standardTileSize || t.h > this.standardTileSize; ) t = new OpenLayers.Size(Math.floor(t.w / 2), Math.floor(t.h / 2)), 
        i = new OpenLayers.Size(Math.ceil(t.w / this.standardTileSize), Math.ceil(t.h / this.standardTileSize)), 
        this.tierSizeInTiles.push(i), this.tierImageSize.push(t);
        this.tierSizeInTiles.reverse(), this.tierImageSize.reverse(), this.numberOfTiers = this.tierSizeInTiles.length;
        var n = [ 1 ];
        this.tileCountUpToTier = [ 0 ];
        for (var r = 1; r < this.numberOfTiers; r++) n.unshift(Math.pow(2, r)), this.tileCountUpToTier.push(this.tierSizeInTiles[r - 1].w * this.tierSizeInTiles[r - 1].h + this.tileCountUpToTier[r - 1]);
        this.serverResolutions || (this.serverResolutions = n);
    },
    "destroy": function() {
        OpenLayers.Layer.Grid.prototype.destroy.apply(this, arguments), this.tileCountUpToTier.length = 0, 
        this.tierSizeInTiles.length = 0, this.tierImageSize.length = 0;
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.Zoomify(this.name, this.url, this.size, this.options)), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "createBackBuffer": function() {
        var e = OpenLayers.Layer.Grid.prototype.createBackBuffer.apply(this, arguments);
        if (e) for (var t, i = e.childNodes.length - 1; i >= 0; --i) (t = e.childNodes[i])._w = t.width, 
        t._h = t.height;
        return e;
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = this.getServerResolution(), i = Math.round((e.left - this.tileOrigin.lon) / (t * this.tileSize.w)), n = Math.round((this.tileOrigin.lat - e.top) / (t * this.tileSize.h)), r = this.getZoomForResolution(t), s = i + n * this.tierSizeInTiles[r].w + this.tileCountUpToTier[r], a = "TileGroup" + Math.floor(s / 256) + "/" + r + "-" + i + "-" + n + ".jpg", o = this.url;
        return OpenLayers.Util.isArray(o) && (o = this.selectUrl(a, o)), o + a;
    },
    "getImageSize": function() {
        if (arguments.length > 0) {
            var e = this.adjustBounds(arguments[0]), t = this.getServerResolution(), i = Math.round((e.left - this.tileOrigin.lon) / (t * this.tileSize.w)), n = Math.round((this.tileOrigin.lat - e.top) / (t * this.tileSize.h)), r = this.getZoomForResolution(t), s = this.standardTileSize, a = this.standardTileSize;
            return i == this.tierSizeInTiles[r].w - 1 && 0 == (s = this.tierImageSize[r].w % this.standardTileSize) && (s = this.standardTileSize), 
            n == this.tierSizeInTiles[r].h - 1 && 0 == (a = this.tierImageSize[r].h % this.standardTileSize) && (a = this.standardTileSize), 
            i == this.tierSizeInTiles[r].w && (s = Math.ceil(this.size.w / Math.pow(2, this.numberOfTiers - 1 - r) - this.tierImageSize[r].w)), 
            n == this.tierSizeInTiles[r].h && (a = Math.ceil(this.size.h / Math.pow(2, this.numberOfTiers - 1 - r) - this.tierImageSize[r].h)), 
            new OpenLayers.Size(s, a);
        }
        return this.tileSize;
    },
    "setMap": function(e) {
        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments), this.tileOrigin = new OpenLayers.LonLat(this.map.maxExtent.left, this.map.maxExtent.top);
    },
    "CLASS_NAME": "OpenLayers.Layer.Zoomify"
}), OpenLayers.Layer.Google.v3 = {
    "DEFAULTS": {
        "sphericalMercator": !0,
        "projection": "EPSG:900913"
    },
    "animationEnabled": !0,
    "loadMapObject": function() {
        this.type || (this.type = google.maps.MapTypeId.ROADMAP);
        var e, t = OpenLayers.Layer.Google.cache[this.map.id];
        if (t) e = t.mapObject, ++t.count; else {
            var i = this.map.getCenter(), n = document.createElement("div");
            n.className = "olForeignContainer", n.style.width = "100%", n.style.height = "100%", 
            e = new google.maps.Map(n, {
                "center": i ? new google.maps.LatLng(i.lat, i.lon) : new google.maps.LatLng(0, 0),
                "zoom": this.map.getZoom() || 0,
                "mapTypeId": this.type,
                "disableDefaultUI": !0,
                "keyboardShortcuts": !1,
                "draggable": !1,
                "disableDoubleClickZoom": !0,
                "scrollwheel": !1,
                "streetViewControl": !1,
                "tilt": this.useTiltImages ? 45 : 0
            });
            var r = document.createElement("div");
            r.style.width = "100%", r.style.height = "100%", e.controls[google.maps.ControlPosition.TOP_LEFT].push(r), 
            t = {
                "googleControl": r,
                "mapObject": e,
                "count": 1
            }, OpenLayers.Layer.Google.cache[this.map.id] = t;
        }
        this.mapObject = e, this.setGMapVisibility(this.visibility);
    },
    "onMapResize": function() {
        this.visibility && google.maps.event.trigger(this.mapObject, "resize");
    },
    "setGMapVisibility": function(e) {
        var t = OpenLayers.Layer.Google.cache[this.map.id], i = this.map;
        if (t) {
            for (var n, r = this.type, s = i.layers, a = s.length - 1; a >= 0; --a) if ((n = s[a]) instanceof OpenLayers.Layer.Google && !0 === n.visibility && !0 === n.inRange) {
                r = n.type, e = !0;
                break;
            }
            var o = this.mapObject.getDiv();
            if (!0 === e) {
                if (o.parentNode !== i.div) {
                    if (t.rendered) t.googleControl.appendChild(i.viewPortDiv); else {
                        o.style.visibility = "hidden";
                        var l = this;
                        google.maps.event.addListenerOnce(this.mapObject, "tilesloaded", function() {
                            t.rendered = !0, o.style.visibility = "", l.setGMapVisibility(!0), l.moveTo(l.map.getCenter()), 
                            t.googleControl.appendChild(i.viewPortDiv), l.setGMapVisibility(l.visible);
                        });
                    }
                    i.div.appendChild(o), google.maps.event.trigger(this.mapObject, "resize");
                }
                this.mapObject.setMapTypeId(r);
            } else t.googleControl.hasChildNodes() && (i.div.appendChild(i.viewPortDiv), i.div.contains(o) && i.div.removeChild(o));
        }
    },
    "getMapContainer": function() {
        return this.mapObject.getDiv();
    },
    "getMapObjectBoundsFromOLBounds": function(e) {
        var t = null;
        if (null != e) {
            var i = this.sphericalMercator ? this.inverseMercator(e.bottom, e.left) : new OpenLayers.LonLat(e.bottom, e.left), n = this.sphericalMercator ? this.inverseMercator(e.top, e.right) : new OpenLayers.LonLat(e.top, e.right);
            t = new google.maps.LatLngBounds(new google.maps.LatLng(i.lat, i.lon), new google.maps.LatLng(n.lat, n.lon));
        }
        return t;
    },
    "getMapObjectLonLatFromMapObjectPixel": function(e) {
        var t = this.map.getSize(), i = this.getLongitudeFromMapObjectLonLat(this.mapObject.center), n = this.getLatitudeFromMapObjectLonLat(this.mapObject.center), r = this.map.getResolution(), s = e.x - t.w / 2, a = e.y - t.h / 2, o = new OpenLayers.LonLat(i + s * r, n - a * r);
        return this.wrapDateLine && (o = o.wrapDateLine(this.maxExtent)), this.getMapObjectLonLatFromLonLat(o.lon, o.lat);
    },
    "getMapObjectPixelFromMapObjectLonLat": function(e) {
        var t = this.getLongitudeFromMapObjectLonLat(e), i = this.getLatitudeFromMapObjectLonLat(e), n = this.map.getResolution(), r = this.map.getExtent();
        return this.getMapObjectPixelFromXY(1 / n * (t - r.left), 1 / n * (r.top - i));
    },
    "setMapObjectCenter": function(e, t) {
        if (!1 === this.animationEnabled && t != this.mapObject.zoom) {
            var i = this.getMapContainer();
            google.maps.event.addListenerOnce(this.mapObject, "idle", function() {
                i.style.visibility = "";
            }), i.style.visibility = "hidden";
        }
        this.mapObject.setOptions({
            "center": e,
            "zoom": t
        });
    },
    "getMapObjectZoomFromMapObjectBounds": function(e) {
        return this.mapObject.getBoundsZoomLevel(e);
    },
    "getMapObjectLonLatFromLonLat": function(e, t) {
        var i;
        if (this.sphericalMercator) {
            var n = this.inverseMercator(e, t);
            i = new google.maps.LatLng(n.lat, n.lon);
        } else i = new google.maps.LatLng(t, e);
        return i;
    },
    "getMapObjectPixelFromXY": function(e, t) {
        return new google.maps.Point(e, t);
    }
}, OpenLayers.Marker.Box = OpenLayers.Class(OpenLayers.Marker, {
    "bounds": null,
    "div": null,
    "initialize": function(e, t, i) {
        this.bounds = e, this.div = OpenLayers.Util.createDiv(), this.div.style.overflow = "hidden", 
        this.events = new OpenLayers.Events(this, this.div), this.setBorder(t, i);
    },
    "destroy": function() {
        this.bounds = null, this.div = null, OpenLayers.Marker.prototype.destroy.apply(this, arguments);
    },
    "setBorder": function(e, t) {
        e || (e = "red"), t || (t = 2), this.div.style.border = t + "px solid " + e;
    },
    "draw": function(e, t) {
        return OpenLayers.Util.modifyDOMElement(this.div, null, e, t), this.div;
    },
    "onScreen": function() {
        var e = !1;
        return this.map && (e = this.map.getExtent().containsBounds(this.bounds, !0, !0)), 
        e;
    },
    "display": function(e) {
        this.div.style.display = e ? "" : "none";
    },
    "CLASS_NAME": "OpenLayers.Marker.Box"
}), OpenLayers.Popup.Anchored = OpenLayers.Class(OpenLayers.Popup, {
    "relativePosition": null,
    "keepInMap": !0,
    "anchor": null,
    "initialize": function(e, t, i, n, r, s, a) {
        var o = [ e, t, i, n, s, a ];
        OpenLayers.Popup.prototype.initialize.apply(this, o), this.anchor = null != r ? r : {
            "size": new OpenLayers.Size(0, 0),
            "offset": new OpenLayers.Pixel(0, 0)
        };
    },
    "destroy": function() {
        this.anchor = null, this.relativePosition = null, OpenLayers.Popup.prototype.destroy.apply(this, arguments);
    },
    "show": function() {
        this.updatePosition(), OpenLayers.Popup.prototype.show.apply(this, arguments);
    },
    "moveTo": function(e) {
        var t = this.relativePosition;
        this.relativePosition = this.calculateRelativePosition(e), OpenLayers.Popup.prototype.moveTo.call(this, this.calculateNewPx(e)), 
        this.relativePosition != t && this.updateRelativePosition();
    },
    "setSize": function(e) {
        if (OpenLayers.Popup.prototype.setSize.apply(this, arguments), this.lonlat && this.map) {
            var t = this.map.getLayerPxFromLonLat(this.lonlat);
            this.moveTo(t);
        }
    },
    "calculateRelativePosition": function(e) {
        var t = this.map.getLonLatFromLayerPx(e), i = this.map.getExtent().determineQuadrant(t);
        return OpenLayers.Bounds.oppositeQuadrant(i);
    },
    "updateRelativePosition": function() {},
    "calculateNewPx": function(e) {
        var t = e.offset(this.anchor.offset), i = this.size || this.contentSize, n = "t" == this.relativePosition.charAt(0);
        t.y += n ? -i.h : this.anchor.size.h;
        var r = "l" == this.relativePosition.charAt(1);
        return t.x += r ? -i.w : this.anchor.size.w, t;
    },
    "CLASS_NAME": "OpenLayers.Popup.Anchored"
}), OpenLayers.Popup.Framed = OpenLayers.Class(OpenLayers.Popup.Anchored, {
    "imageSrc": null,
    "imageSize": null,
    "isAlphaImage": !1,
    "positionBlocks": null,
    "blocks": null,
    "fixedRelativePosition": !1,
    "initialize": function(e, t, i, n, r, s, a) {
        OpenLayers.Popup.Anchored.prototype.initialize.apply(this, arguments), this.fixedRelativePosition && (this.updateRelativePosition(), 
        this.calculateRelativePosition = function(e) {
            return this.relativePosition;
        }), this.contentDiv.style.position = "absolute", this.contentDiv.style.zIndex = 1, 
        s && (this.closeDiv.style.zIndex = 1), this.groupDiv.style.position = "absolute", 
        this.groupDiv.style.top = "0px", this.groupDiv.style.left = "0px", this.groupDiv.style.height = "100%", 
        this.groupDiv.style.width = "100%";
    },
    "destroy": function() {
        this.imageSrc = null, this.imageSize = null, this.isAlphaImage = null, this.fixedRelativePosition = !1, 
        this.positionBlocks = null;
        for (var e = 0; e < this.blocks.length; e++) {
            var t = this.blocks[e];
            t.image && t.div.removeChild(t.image), t.image = null, t.div && this.groupDiv.removeChild(t.div), 
            t.div = null;
        }
        this.blocks = null, OpenLayers.Popup.Anchored.prototype.destroy.apply(this, arguments);
    },
    "setBackgroundColor": function(e) {},
    "setBorder": function() {},
    "setOpacity": function(e) {},
    "setSize": function(e) {
        OpenLayers.Popup.Anchored.prototype.setSize.apply(this, arguments), this.updateBlocks();
    },
    "updateRelativePosition": function() {
        if (this.padding = this.positionBlocks[this.relativePosition].padding, this.closeDiv) {
            var e = this.getContentDivPadding();
            this.closeDiv.style.right = e.right + this.padding.right + "px", this.closeDiv.style.top = e.top + this.padding.top + "px";
        }
        this.updateBlocks();
    },
    "calculateNewPx": function(e) {
        var t = OpenLayers.Popup.Anchored.prototype.calculateNewPx.apply(this, arguments);
        return t = t.offset(this.positionBlocks[this.relativePosition].offset);
    },
    "createBlocks": function() {
        this.blocks = [];
        var e = null;
        for (var t in this.positionBlocks) {
            e = t;
            break;
        }
        for (var i = this.positionBlocks[e], n = 0; n < i.blocks.length; n++) {
            var r = {};
            this.blocks.push(r);
            var s = this.id + "_FrameDecorationDiv_" + n;
            r.div = OpenLayers.Util.createDiv(s, null, null, null, "absolute", null, "hidden", null);
            var a = this.id + "_FrameDecorationImg_" + n, o = this.isAlphaImage ? OpenLayers.Util.createAlphaImageDiv : OpenLayers.Util.createImage;
            r.image = o(a, null, this.imageSize, this.imageSrc, "absolute", null, null, null), 
            r.div.appendChild(r.image), this.groupDiv.appendChild(r.div);
        }
    },
    "updateBlocks": function() {
        if (this.blocks || this.createBlocks(), this.size && this.relativePosition) {
            for (var e = this.positionBlocks[this.relativePosition], t = 0; t < e.blocks.length; t++) {
                var i = e.blocks[t], n = this.blocks[t], r = i.anchor.left, s = i.anchor.bottom, a = i.anchor.right, o = i.anchor.top, l = isNaN(i.size.w) ? this.size.w - (a + r) : i.size.w, h = isNaN(i.size.h) ? this.size.h - (s + o) : i.size.h;
                n.div.style.width = (l < 0 ? 0 : l) + "px", n.div.style.height = (h < 0 ? 0 : h) + "px", 
                n.div.style.left = null != r ? r + "px" : "", n.div.style.bottom = null != s ? s + "px" : "", 
                n.div.style.right = null != a ? a + "px" : "", n.div.style.top = null != o ? o + "px" : "", 
                n.image.style.left = i.position.x + "px", n.image.style.top = i.position.y + "px";
            }
            this.contentDiv.style.left = this.padding.left + "px", this.contentDiv.style.top = this.padding.top + "px";
        }
    },
    "CLASS_NAME": "OpenLayers.Popup.Framed"
}), OpenLayers.Popup.FramedCloud = OpenLayers.Class(OpenLayers.Popup.Framed, {
    "contentDisplayClass": "olFramedCloudPopupContent",
    "autoSize": !0,
    "panMapIfOutOfView": !0,
    "imageSize": new OpenLayers.Size(1276, 736),
    "isAlphaImage": !1,
    "fixedRelativePosition": !1,
    "positionBlocks": {
        "tl": {
            "offset": new OpenLayers.Pixel(44, 0),
            "padding": new OpenLayers.Bounds(8, 40, 8, 9),
            "blocks": [ {
                "size": new OpenLayers.Size("auto", "auto"),
                "anchor": new OpenLayers.Bounds(0, 51, 22, 0),
                "position": new OpenLayers.Pixel(0, 0)
            }, {
                "size": new OpenLayers.Size(22, "auto"),
                "anchor": new OpenLayers.Bounds(null, 50, 0, 0),
                "position": new OpenLayers.Pixel(-1238, 0)
            }, {
                "size": new OpenLayers.Size("auto", 19),
                "anchor": new OpenLayers.Bounds(0, 32, 22, null),
                "position": new OpenLayers.Pixel(0, -631)
            }, {
                "size": new OpenLayers.Size(22, 18),
                "anchor": new OpenLayers.Bounds(null, 32, 0, null),
                "position": new OpenLayers.Pixel(-1238, -632)
            }, {
                "size": new OpenLayers.Size(81, 35),
                "anchor": new OpenLayers.Bounds(null, 0, 0, null),
                "position": new OpenLayers.Pixel(0, -688)
            } ]
        },
        "tr": {
            "offset": new OpenLayers.Pixel(-45, 0),
            "padding": new OpenLayers.Bounds(8, 40, 8, 9),
            "blocks": [ {
                "size": new OpenLayers.Size("auto", "auto"),
                "anchor": new OpenLayers.Bounds(0, 51, 22, 0),
                "position": new OpenLayers.Pixel(0, 0)
            }, {
                "size": new OpenLayers.Size(22, "auto"),
                "anchor": new OpenLayers.Bounds(null, 50, 0, 0),
                "position": new OpenLayers.Pixel(-1238, 0)
            }, {
                "size": new OpenLayers.Size("auto", 19),
                "anchor": new OpenLayers.Bounds(0, 32, 22, null),
                "position": new OpenLayers.Pixel(0, -631)
            }, {
                "size": new OpenLayers.Size(22, 19),
                "anchor": new OpenLayers.Bounds(null, 32, 0, null),
                "position": new OpenLayers.Pixel(-1238, -631)
            }, {
                "size": new OpenLayers.Size(81, 35),
                "anchor": new OpenLayers.Bounds(0, 0, null, null),
                "position": new OpenLayers.Pixel(-215, -687)
            } ]
        },
        "bl": {
            "offset": new OpenLayers.Pixel(45, 0),
            "padding": new OpenLayers.Bounds(8, 9, 8, 40),
            "blocks": [ {
                "size": new OpenLayers.Size("auto", "auto"),
                "anchor": new OpenLayers.Bounds(0, 21, 22, 32),
                "position": new OpenLayers.Pixel(0, 0)
            }, {
                "size": new OpenLayers.Size(22, "auto"),
                "anchor": new OpenLayers.Bounds(null, 21, 0, 32),
                "position": new OpenLayers.Pixel(-1238, 0)
            }, {
                "size": new OpenLayers.Size("auto", 21),
                "anchor": new OpenLayers.Bounds(0, 0, 22, null),
                "position": new OpenLayers.Pixel(0, -629)
            }, {
                "size": new OpenLayers.Size(22, 21),
                "anchor": new OpenLayers.Bounds(null, 0, 0, null),
                "position": new OpenLayers.Pixel(-1238, -629)
            }, {
                "size": new OpenLayers.Size(81, 33),
                "anchor": new OpenLayers.Bounds(null, null, 0, 0),
                "position": new OpenLayers.Pixel(-101, -674)
            } ]
        },
        "br": {
            "offset": new OpenLayers.Pixel(-44, 0),
            "padding": new OpenLayers.Bounds(8, 9, 8, 40),
            "blocks": [ {
                "size": new OpenLayers.Size("auto", "auto"),
                "anchor": new OpenLayers.Bounds(0, 21, 22, 32),
                "position": new OpenLayers.Pixel(0, 0)
            }, {
                "size": new OpenLayers.Size(22, "auto"),
                "anchor": new OpenLayers.Bounds(null, 21, 0, 32),
                "position": new OpenLayers.Pixel(-1238, 0)
            }, {
                "size": new OpenLayers.Size("auto", 21),
                "anchor": new OpenLayers.Bounds(0, 0, 22, null),
                "position": new OpenLayers.Pixel(0, -629)
            }, {
                "size": new OpenLayers.Size(22, 21),
                "anchor": new OpenLayers.Bounds(null, 0, 0, null),
                "position": new OpenLayers.Pixel(-1238, -629)
            }, {
                "size": new OpenLayers.Size(81, 33),
                "anchor": new OpenLayers.Bounds(0, null, null, 0),
                "position": new OpenLayers.Pixel(-311, -674)
            } ]
        }
    },
    "minSize": new OpenLayers.Size(105, 10),
    "maxSize": new OpenLayers.Size(1200, 660),
    "initialize": function(e, t, i, n, r, s, a) {
        this.imageSrc = OpenLayers.Util.getImageLocation("cloud-popup-relative.png"), OpenLayers.Popup.Framed.prototype.initialize.apply(this, arguments), 
        this.contentDiv.className = this.contentDisplayClass;
    },
    "CLASS_NAME": "OpenLayers.Popup.FramedCloud"
}), OpenLayers.Protocol.CSW = function(e) {
    e = OpenLayers.Util.applyDefaults(e, OpenLayers.Protocol.CSW.DEFAULTS);
    var t = OpenLayers.Protocol.CSW["v" + e.version.replace(/\./g, "_")];
    if (!t) throw "Unsupported CSW version: " + e.version;
    return new t(e);
}, OpenLayers.Protocol.CSW.DEFAULTS = {
    "version": "2.0.2"
}, OpenLayers.Protocol.HTTP = OpenLayers.Class(OpenLayers.Protocol, {
    "url": null,
    "headers": null,
    "params": null,
    "callback": null,
    "scope": null,
    "readWithPOST": !1,
    "updateWithPOST": !1,
    "deleteWithPOST": !1,
    "wildcarded": !1,
    "srsInBBOX": !1,
    "initialize": function(e) {
        if (e = e || {}, this.params = {}, this.headers = {}, OpenLayers.Protocol.prototype.initialize.apply(this, arguments), 
        !this.filterToParams && OpenLayers.Format.QueryStringFilter) {
            var t = new OpenLayers.Format.QueryStringFilter({
                "wildcarded": this.wildcarded,
                "srsInBBOX": this.srsInBBOX
            });
            this.filterToParams = function(e, i) {
                return t.write(e, i);
            };
        }
    },
    "destroy": function() {
        this.params = null, this.headers = null, OpenLayers.Protocol.prototype.destroy.apply(this);
    },
    "read": function(e) {
        OpenLayers.Protocol.prototype.read.apply(this, arguments), (e = e || {}).params = OpenLayers.Util.applyDefaults(e.params, this.options.params), 
        (e = OpenLayers.Util.applyDefaults(e, this.options)).filter && this.filterToParams && (e.params = this.filterToParams(e.filter, e.params));
        var t = void 0 !== e.readWithPOST ? e.readWithPOST : this.readWithPOST, i = new OpenLayers.Protocol.Response({
            "requestType": "read"
        });
        if (t) {
            var n = e.headers || {};
            n["Content-Type"] = "application/x-www-form-urlencoded", i.priv = OpenLayers.Request.POST({
                "url": e.url,
                "callback": this.createCallback(this.handleRead, i, e),
                "data": OpenLayers.Util.getParameterString(e.params),
                "headers": n
            });
        } else i.priv = OpenLayers.Request.GET({
            "url": e.url,
            "callback": this.createCallback(this.handleRead, i, e),
            "params": e.params,
            "headers": e.headers
        });
        return i;
    },
    "handleRead": function(e, t) {
        this.handleResponse(e, t);
    },
    "create": function(e, t) {
        t = OpenLayers.Util.applyDefaults(t, this.options);
        var i = new OpenLayers.Protocol.Response({
            "reqFeatures": e,
            "requestType": "create"
        });
        return i.priv = OpenLayers.Request.POST({
            "url": t.url,
            "callback": this.createCallback(this.handleCreate, i, t),
            "headers": t.headers,
            "data": this.format.write(e)
        }), i;
    },
    "handleCreate": function(e, t) {
        this.handleResponse(e, t);
    },
    "update": function(e, t) {
        var i = (t = t || {}).url || e.url || this.options.url + "/" + e.fid;
        t = OpenLayers.Util.applyDefaults(t, this.options);
        var n = new OpenLayers.Protocol.Response({
            "reqFeatures": e,
            "requestType": "update"
        }), r = this.updateWithPOST ? "POST" : "PUT";
        return n.priv = OpenLayers.Request[r]({
            "url": i,
            "callback": this.createCallback(this.handleUpdate, n, t),
            "headers": t.headers,
            "data": this.format.write(e)
        }), n;
    },
    "handleUpdate": function(e, t) {
        this.handleResponse(e, t);
    },
    "delete": function(e, t) {
        var i = (t = t || {}).url || e.url || this.options.url + "/" + e.fid;
        t = OpenLayers.Util.applyDefaults(t, this.options);
        var n = new OpenLayers.Protocol.Response({
            "reqFeatures": e,
            "requestType": "delete"
        }), r = this.deleteWithPOST ? "POST" : "DELETE", s = {
            "url": i,
            "callback": this.createCallback(this.handleDelete, n, t),
            "headers": t.headers
        };
        return this.deleteWithPOST && (s.data = this.format.write(e)), n.priv = OpenLayers.Request[r](s), 
        n;
    },
    "handleDelete": function(e, t) {
        this.handleResponse(e, t);
    },
    "handleResponse": function(e, t) {
        var i = e.priv;
        t.callback && (i.status >= 200 && i.status < 300 ? ("delete" != e.requestType && (e.features = this.parseFeatures(i)), 
        e.code = OpenLayers.Protocol.Response.SUCCESS) : e.code = OpenLayers.Protocol.Response.FAILURE, 
        t.callback.call(t.scope, e));
    },
    "parseFeatures": function(e) {
        var t = e.responseXML;
        return t && t.documentElement || (t = e.responseText), !t || t.length <= 0 ? null : this.format.read(t);
    },
    "commit": function(e, t) {
        function i(e) {
            this.callUserCallback(e, t), c = c && e.success(), ++r >= p && t.callback && (d.code = c ? OpenLayers.Protocol.Response.SUCCESS : OpenLayers.Protocol.Response.FAILURE, 
            t.callback.apply(t.scope, [ d ]));
        }
        t = OpenLayers.Util.applyDefaults(t, this.options);
        var n = [], r = 0, s = {};
        s[OpenLayers.State.INSERT] = [], s[OpenLayers.State.UPDATE] = [], s[OpenLayers.State.DELETE] = [];
        for (var a, o, l = [], h = 0, u = e.length; h < u; ++h) (o = s[(a = e[h]).state]) && (o.push(a), 
        l.push(a));
        var p = (s[OpenLayers.State.INSERT].length > 0 ? 1 : 0) + s[OpenLayers.State.UPDATE].length + s[OpenLayers.State.DELETE].length, c = !0, d = new OpenLayers.Protocol.Response({
            "reqFeatures": l
        }), f = s[OpenLayers.State.INSERT];
        f.length > 0 && n.push(this.create(f, OpenLayers.Util.applyDefaults({
            "callback": function(e) {
                for (var t = e.features ? e.features.length : 0, n = new Array(t), r = 0; r < t; ++r) n[r] = e.features[r].fid;
                d.insertIds = n, i.apply(this, [ e ]);
            },
            "scope": this
        }, t.create)));
        for (h = (f = s[OpenLayers.State.UPDATE]).length - 1; h >= 0; --h) n.push(this.update(f[h], OpenLayers.Util.applyDefaults({
            "callback": i,
            "scope": this
        }, t.update)));
        for (h = (f = s[OpenLayers.State.DELETE]).length - 1; h >= 0; --h) n.push(this.delete(f[h], OpenLayers.Util.applyDefaults({
            "callback": i,
            "scope": this
        }, t.delete)));
        return n;
    },
    "abort": function(e) {
        e && e.priv.abort();
    },
    "callUserCallback": function(e, t) {
        var i = t[e.requestType];
        i && i.callback && i.callback.call(i.scope, e);
    },
    "CLASS_NAME": "OpenLayers.Protocol.HTTP"
}), OpenLayers.Protocol.Script = OpenLayers.Class(OpenLayers.Protocol, {
    "url": null,
    "params": null,
    "callback": null,
    "callbackTemplate": "OpenLayers.Protocol.Script.registry.${id}",
    "callbackKey": "callback",
    "callbackPrefix": "",
    "scope": null,
    "format": null,
    "pendingRequests": null,
    "srsInBBOX": !1,
    "initialize": function(e) {
        if (e = e || {}, this.params = {}, this.pendingRequests = {}, OpenLayers.Protocol.prototype.initialize.apply(this, arguments), 
        this.format || (this.format = new OpenLayers.Format.GeoJSON()), !this.filterToParams && OpenLayers.Format.QueryStringFilter) {
            var t = new OpenLayers.Format.QueryStringFilter({
                "srsInBBOX": this.srsInBBOX
            });
            this.filterToParams = function(e, i) {
                return t.write(e, i);
            };
        }
    },
    "read": function(e) {
        OpenLayers.Protocol.prototype.read.apply(this, arguments), (e = OpenLayers.Util.applyDefaults(e, this.options)).params = OpenLayers.Util.applyDefaults(e.params, this.options.params), 
        e.filter && this.filterToParams && (e.params = this.filterToParams(e.filter, e.params));
        var t = new OpenLayers.Protocol.Response({
            "requestType": "read"
        }), i = this.createRequest(e.url, e.params, OpenLayers.Function.bind(function(i) {
            t.data = i, this.handleRead(t, e);
        }, this));
        return t.priv = i, t;
    },
    "createRequest": function(e, t, i) {
        var n = OpenLayers.Protocol.Script.register(i), r = OpenLayers.String.format(this.callbackTemplate, {
            "id": n
        });
        (t = OpenLayers.Util.extend({}, t))[this.callbackKey] = this.callbackPrefix + r, 
        e = OpenLayers.Util.urlAppend(e, OpenLayers.Util.getParameterString(t));
        var s = document.createElement("script");
        return s.type = "text/javascript", s.src = e, s.id = "OpenLayers_Protocol_Script_" + n, 
        this.pendingRequests[s.id] = s, document.getElementsByTagName("head")[0].appendChild(s), 
        s;
    },
    "destroyRequest": function(e) {
        OpenLayers.Protocol.Script.unregister(e.id.split("_").pop()), delete this.pendingRequests[e.id], 
        e.parentNode && e.parentNode.removeChild(e);
    },
    "handleRead": function(e, t) {
        this.handleResponse(e, t);
    },
    "handleResponse": function(e, t) {
        t.callback && (e.data ? (e.features = this.parseFeatures(e.data), e.code = OpenLayers.Protocol.Response.SUCCESS) : e.code = OpenLayers.Protocol.Response.FAILURE, 
        this.destroyRequest(e.priv), t.callback.call(t.scope, e));
    },
    "parseFeatures": function(e) {
        return this.format.read(e);
    },
    "abort": function(e) {
        if (e) this.destroyRequest(e.priv); else for (var t in this.pendingRequests) this.destroyRequest(this.pendingRequests[t]);
    },
    "destroy": function() {
        this.abort(), delete this.params, delete this.format, OpenLayers.Protocol.prototype.destroy.apply(this);
    },
    "CLASS_NAME": "OpenLayers.Protocol.Script"
}), function() {
    var e = OpenLayers.Protocol.Script, t = 0;
    e.registry = {}, e.register = function(i) {
        var n = "c" + ++t;
        return e.registry[n] = function() {
            i.apply(this, arguments);
        }, n;
    }, e.unregister = function(t) {
        delete e.registry[t];
    };
}(), OpenLayers.Protocol.SOS = function(e) {
    e = OpenLayers.Util.applyDefaults(e, OpenLayers.Protocol.SOS.DEFAULTS);
    var t = OpenLayers.Protocol.SOS["v" + e.version.replace(/\./g, "_")];
    if (!t) throw "Unsupported SOS version: " + e.version;
    return new t(e);
}, OpenLayers.Protocol.SOS.DEFAULTS = {
    "version": "1.0.0"
}, OpenLayers.Protocol.WFS = function(e) {
    e = OpenLayers.Util.applyDefaults(e, OpenLayers.Protocol.WFS.DEFAULTS);
    var t = OpenLayers.Protocol.WFS["v" + e.version.replace(/\./g, "_")];
    if (!t) throw "Unsupported WFS version: " + e.version;
    return new t(e);
}, OpenLayers.Protocol.WFS.fromWMSLayer = function(e, t) {
    var i, n, r = e.params.LAYERS, s = (OpenLayers.Util.isArray(r) ? r[0] : r).split(":");
    s.length > 1 && (n = s[0]), i = s.pop();
    var a = {
        "url": e.url,
        "featureType": i,
        "featurePrefix": n,
        "srsName": e.projection && e.projection.getCode() || e.map && e.map.getProjectionObject().getCode(),
        "version": "1.1.0"
    };
    return new OpenLayers.Protocol.WFS(OpenLayers.Util.applyDefaults(t, a));
}, OpenLayers.Protocol.WFS.DEFAULTS = {
    "version": "1.0.0"
}, OpenLayers.Protocol.CSW.v2_0_2 = OpenLayers.Class(OpenLayers.Protocol, {
    "formatOptions": null,
    "initialize": function(e) {
        OpenLayers.Protocol.prototype.initialize.apply(this, [ e ]), e.format || (this.format = new OpenLayers.Format.CSWGetRecords.v2_0_2(OpenLayers.Util.extend({}, this.formatOptions)));
    },
    "destroy": function() {
        this.options && !this.options.format && this.format.destroy(), this.format = null, 
        OpenLayers.Protocol.prototype.destroy.apply(this);
    },
    "read": function(e) {
        e = OpenLayers.Util.extend({}, e), OpenLayers.Util.applyDefaults(e, this.options || {});
        var t = new OpenLayers.Protocol.Response({
            "requestType": "read"
        }), i = this.format.write(e.params || e);
        return t.priv = OpenLayers.Request.POST({
            "url": e.url,
            "callback": this.createCallback(this.handleRead, t, e),
            "params": e.params,
            "headers": e.headers,
            "data": i
        }), t;
    },
    "handleRead": function(e, t) {
        if (t.callback) {
            var i = e.priv;
            i.status >= 200 && i.status < 300 ? (e.data = this.parseData(i), e.code = OpenLayers.Protocol.Response.SUCCESS) : e.code = OpenLayers.Protocol.Response.FAILURE, 
            t.callback.call(t.scope, e);
        }
    },
    "parseData": function(e) {
        var t = e.responseXML;
        return t && t.documentElement || (t = e.responseText), !t || t.length <= 0 ? null : this.format.read(t);
    },
    "CLASS_NAME": "OpenLayers.Protocol.CSW.v2_0_2"
}), OpenLayers.Protocol.SOS.v1_0_0 = OpenLayers.Class(OpenLayers.Protocol, {
    "fois": null,
    "formatOptions": null,
    "initialize": function(e) {
        OpenLayers.Protocol.prototype.initialize.apply(this, [ e ]), e.format || (this.format = new OpenLayers.Format.SOSGetFeatureOfInterest(this.formatOptions));
    },
    "destroy": function() {
        this.options && !this.options.format && this.format.destroy(), this.format = null, 
        OpenLayers.Protocol.prototype.destroy.apply(this);
    },
    "read": function(e) {
        e = OpenLayers.Util.extend({}, e), OpenLayers.Util.applyDefaults(e, this.options || {});
        var t = new OpenLayers.Protocol.Response({
            "requestType": "read"
        }), i = this.format, n = OpenLayers.Format.XML.prototype.write.apply(i, [ i.writeNode("sos:GetFeatureOfInterest", {
            "fois": this.fois
        }) ]);
        return t.priv = OpenLayers.Request.POST({
            "url": e.url,
            "callback": this.createCallback(this.handleRead, t, e),
            "data": n
        }), t;
    },
    "handleRead": function(e, t) {
        if (t.callback) {
            var i = e.priv;
            i.status >= 200 && i.status < 300 ? (e.features = this.parseFeatures(i), e.code = OpenLayers.Protocol.Response.SUCCESS) : e.code = OpenLayers.Protocol.Response.FAILURE, 
            t.callback.call(t.scope, e);
        }
    },
    "parseFeatures": function(e) {
        var t = e.responseXML;
        return t && t.documentElement || (t = e.responseText), !t || t.length <= 0 ? null : this.format.read(t);
    },
    "CLASS_NAME": "OpenLayers.Protocol.SOS.v1_0_0"
}), OpenLayers.Protocol.WFS.v1 = OpenLayers.Class(OpenLayers.Protocol, {
    "version": null,
    "srsName": "EPSG:4326",
    "featureType": null,
    "featureNS": null,
    "geometryName": "the_geom",
    "schema": null,
    "featurePrefix": "feature",
    "formatOptions": null,
    "readFormat": null,
    "readOptions": null,
    "initialize": function(e) {
        OpenLayers.Protocol.prototype.initialize.apply(this, [ e ]), e.format || (this.format = OpenLayers.Format.WFST(OpenLayers.Util.extend({
            "version": this.version,
            "featureType": this.featureType,
            "featureNS": this.featureNS,
            "featurePrefix": this.featurePrefix,
            "geometryName": this.geometryName,
            "srsName": this.srsName,
            "schema": this.schema
        }, this.formatOptions))), !e.geometryName && parseFloat(this.format.version) > 1 && this.setGeometryName(null);
    },
    "destroy": function() {
        this.options && !this.options.format && this.format.destroy(), this.format = null, 
        OpenLayers.Protocol.prototype.destroy.apply(this);
    },
    "read": function(e) {
        OpenLayers.Protocol.prototype.read.apply(this, arguments), e = OpenLayers.Util.extend({}, e), 
        OpenLayers.Util.applyDefaults(e, this.options || {});
        var t = new OpenLayers.Protocol.Response({
            "requestType": "read"
        }), i = OpenLayers.Format.XML.prototype.write.apply(this.format, [ this.format.writeNode("wfs:GetFeature", e) ]);
        return t.priv = OpenLayers.Request.POST({
            "url": e.url,
            "callback": this.createCallback(this.handleRead, t, e),
            "params": e.params,
            "headers": e.headers,
            "data": i
        }), t;
    },
    "setFeatureType": function(e) {
        this.featureType = e, this.format.featureType = e;
    },
    "setGeometryName": function(e) {
        this.geometryName = e, this.format.geometryName = e;
    },
    "handleRead": function(e, t) {
        if (t = OpenLayers.Util.extend({}, t), OpenLayers.Util.applyDefaults(t, this.options), 
        t.callback) {
            var i = e.priv;
            if (i.status >= 200 && i.status < 300) {
                var n = this.parseResponse(i, t.readOptions);
                n && !1 !== n.success ? (t.readOptions && "object" == t.readOptions.output ? OpenLayers.Util.extend(e, n) : e.features = n, 
                e.code = OpenLayers.Protocol.Response.SUCCESS) : (e.code = OpenLayers.Protocol.Response.FAILURE, 
                e.error = n);
            } else e.code = OpenLayers.Protocol.Response.FAILURE;
            t.callback.call(t.scope, e);
        }
    },
    "parseResponse": function(e, t) {
        var i = e.responseXML;
        if (i && i.documentElement || (i = e.responseText), !i || i.length <= 0) return null;
        var n = null !== this.readFormat ? this.readFormat.read(i) : this.format.read(i, t);
        if (!this.featureNS) {
            var r = this.readFormat || this.format;
            this.featureNS = r.featureNS, r.autoConfig = !1, this.geometryName || this.setGeometryName(r.geometryName);
        }
        return n;
    },
    "commit": function(e, t) {
        t = OpenLayers.Util.extend({}, t), OpenLayers.Util.applyDefaults(t, this.options);
        var i = new OpenLayers.Protocol.Response({
            "requestType": "commit",
            "reqFeatures": e
        });
        return i.priv = OpenLayers.Request.POST({
            "url": t.url,
            "headers": t.headers,
            "data": this.format.write(e, t),
            "callback": this.createCallback(this.handleCommit, i, t)
        }), i;
    },
    "handleCommit": function(e, t) {
        if (t.callback) {
            var i = e.priv, n = i.responseXML;
            n && n.documentElement || (n = i.responseText);
            var r = this.format.read(n) || {};
            e.insertIds = r.insertIds || [], r.success ? e.code = OpenLayers.Protocol.Response.SUCCESS : (e.code = OpenLayers.Protocol.Response.FAILURE, 
            e.error = r), t.callback.call(t.scope, e);
        }
    },
    "filterDelete": function(e, t) {
        t = OpenLayers.Util.extend({}, t), OpenLayers.Util.applyDefaults(t, this.options);
        new OpenLayers.Protocol.Response({
            "requestType": "commit"
        });
        var i = this.format.createElementNSPlus("wfs:Transaction", {
            "attributes": {
                "service": "WFS",
                "version": this.version
            }
        }), n = this.format.createElementNSPlus("wfs:Delete", {
            "attributes": {
                "typeName": (t.featureNS ? this.featurePrefix + ":" : "") + t.featureType
            }
        });
        t.featureNS && n.setAttribute("xmlns:" + this.featurePrefix, t.featureNS);
        var r = this.format.writeNode("ogc:Filter", e);
        n.appendChild(r), i.appendChild(n);
        var s = OpenLayers.Format.XML.prototype.write.apply(this.format, [ i ]);
        return OpenLayers.Request.POST({
            "url": this.url,
            "callback": t.callback || function() {},
            "data": s
        });
    },
    "abort": function(e) {
        e && e.priv.abort();
    },
    "CLASS_NAME": "OpenLayers.Protocol.WFS.v1"
}), OpenLayers.Protocol.WFS.v1_0_0 = OpenLayers.Class(OpenLayers.Protocol.WFS.v1, {
    "version": "1.0.0",
    "CLASS_NAME": "OpenLayers.Protocol.WFS.v1_0_0"
}), OpenLayers.Protocol.WFS.v1_1_0 = OpenLayers.Class(OpenLayers.Protocol.WFS.v1, {
    "version": "1.1.0",
    "initialize": function(e) {
        OpenLayers.Protocol.WFS.v1.prototype.initialize.apply(this, arguments), this.outputFormat && !this.readFormat && ("gml2" == this.outputFormat.toLowerCase() ? this.readFormat = new OpenLayers.Format.GML.v2({
            "featureType": this.featureType,
            "featureNS": this.featureNS,
            "geometryName": this.geometryName
        }) : "json" == this.outputFormat.toLowerCase() && (this.readFormat = new OpenLayers.Format.GeoJSON()));
    },
    "CLASS_NAME": "OpenLayers.Protocol.WFS.v1_1_0"
}), OpenLayers.Protocol.WFS.v2_0_0 = OpenLayers.Class(OpenLayers.Protocol.WFS.v1, {
    "version": "2.0.0",
    "initialize": function(e) {
        OpenLayers.Protocol.WFS.v1.prototype.initialize.apply(this, arguments), this.outputFormat && !this.readFormat && ("gml3" == this.outputFormat.toLowerCase() ? this.readFormat = new OpenLayers.Format.GML.v3({
            "featureType": this.featureType,
            "featureNS": this.featureNS,
            "geometryName": this.geometryName
        }) : "json" == this.outputFormat.toLowerCase() && (this.readFormat = new OpenLayers.Format.GeoJSON()));
    },
    "CLASS_NAME": "OpenLayers.Protocol.WFS.v2_0_0"
}), OpenLayers.Renderer.Canvas = OpenLayers.Class(OpenLayers.Renderer, {
    "hitDetection": !0,
    "hitOverflow": 0,
    "canvas": null,
    "features": null,
    "pendingRedraw": !1,
    "cachedSymbolBounds": {},
    "initialize": function(e, t) {
        OpenLayers.Renderer.prototype.initialize.apply(this, arguments), this.root = document.createElement("canvas"), 
        this.container.appendChild(this.root), this.canvas = this.root.getContext("2d"), 
        this._clearRectId = OpenLayers.Util.createUniqueID(), this.features = {}, this.hitDetection && (this.hitCanvas = document.createElement("canvas"), 
        this.hitContext = this.hitCanvas.getContext("2d"));
    },
    "setExtent": function() {
        return OpenLayers.Renderer.prototype.setExtent.apply(this, arguments), !1;
    },
    "eraseGeometry": function(e, t) {
        this.eraseFeatures(this.features[t][0]);
    },
    "supported": function() {
        return OpenLayers.CANVAS_SUPPORTED;
    },
    "setSize": function(e) {
        this.size = e.clone();
        var t = this.root;
        if (t.style.width = e.w + "px", t.style.height = e.h + "px", t.width = e.w, t.height = e.h, 
        this.resolution = null, this.hitDetection) {
            var i = this.hitCanvas;
            i.style.width = e.w + "px", i.style.height = e.h + "px", i.width = e.w, i.height = e.h;
        }
    },
    "drawFeature": function(e, t) {
        var i;
        if (e.geometry) {
            t = this.applyDefaultSymbolizer(t || e.style);
            var n, r = e.geometry.getBounds();
            this.map.baseLayer && this.map.baseLayer.wrapDateLine && (n = this.map.getMaxExtent());
            var s = r && r.intersectsBounds(this.extent, {
                "worldBounds": n
            });
            (i = "none" !== t.display && !!r && s) ? this.features[e.id] = [ e, t ] : delete this.features[e.id], 
            this.pendingRedraw = !0;
        }
        return this.pendingRedraw && !this.locked && (this.redraw(), this.pendingRedraw = !1), 
        i;
    },
    "drawGeometry": function(e, t, i) {
        var n = e.CLASS_NAME;
        if ("OpenLayers.Geometry.Collection" != n && "OpenLayers.Geometry.MultiPoint" != n && "OpenLayers.Geometry.MultiLineString" != n && "OpenLayers.Geometry.MultiPolygon" != n) switch (e.CLASS_NAME) {
          case "OpenLayers.Geometry.Point":
            this.drawPoint(e, t, i);
            break;

          case "OpenLayers.Geometry.LineString":
            this.drawLineString(e, t, i);
            break;

          case "OpenLayers.Geometry.LinearRing":
            this.drawLinearRing(e, t, i);
            break;

          case "OpenLayers.Geometry.Polygon":
            this.drawPolygon(e, t, i);
        } else for (var r = this.map.baseLayer && this.map.baseLayer.wrapDateLine && this.map.getMaxExtent(), s = 0; s < e.components.length; s++) this.calculateFeatureDx(e.components[s].getBounds(), r), 
        this.drawGeometry(e.components[s], t, i);
    },
    "drawExternalGraphic": function(e, t, i) {
        var n = new Image(), r = t.title || t.graphicTitle;
        r && (n.title = r);
        var s = t.graphicWidth || t.graphicHeight, a = t.graphicHeight || t.graphicWidth;
        s = s || 2 * t.pointRadius, a = a || 2 * t.pointRadius;
        var o = void 0 != t.graphicXOffset ? t.graphicXOffset : -.5 * s, l = void 0 != t.graphicYOffset ? t.graphicYOffset : -.5 * a, h = this._clearRectId, u = t.graphicOpacity || t.fillOpacity;
        n.onload = OpenLayers.Function.bind(function() {
            if (this.features[i] && h === this._clearRectId) {
                var t = this.getLocalXY(e), r = t[0], p = t[1];
                if (!isNaN(r) && !isNaN(p)) {
                    var c = r + o | 0, d = p + l | 0, f = this.canvas;
                    f.globalAlpha = u;
                    var y = OpenLayers.Renderer.Canvas.drawImageScaleFactor || (OpenLayers.Renderer.Canvas.drawImageScaleFactor = /android 2.1/.test(navigator.userAgent.toLowerCase()) ? 320 / window.screen.width : 1);
                    f.drawImage(n, c * y, d * y, s * y, a * y), this.hitDetection && (this.setHitContextStyle("fill", i), 
                    this.hitContext.fillRect(c, d, s, a));
                }
            }
        }, this), n.src = t.externalGraphic, n.complete && (n.onload(), n.onload = null);
    },
    "drawNamedSymbol": function(e, t, i) {
        var n, r, s, a, o, l, h, u, p, c = Math.PI / 180, d = OpenLayers.Renderer.symbol[t.graphicName];
        if (!d) throw new Error(t.graphicName + " is not a valid symbol name");
        if (d.length && !(d.length < 2)) {
            var f = this.getLocalXY(e), y = f[0], m = f[1];
            if (!isNaN(y) && !isNaN(m)) {
                if (this.canvas.lineCap = "round", this.canvas.lineJoin = "round", this.hitDetection && (this.hitContext.lineCap = "round", 
                this.hitContext.lineJoin = "round"), t.graphicName in this.cachedSymbolBounds) l = this.cachedSymbolBounds[t.graphicName]; else {
                    for (l = new OpenLayers.Bounds(), o = 0; o < d.length; o += 2) l.extend(new OpenLayers.LonLat(d[o], d[o + 1]));
                    this.cachedSymbolBounds[t.graphicName] = l;
                }
                if (this.canvas.save(), this.hitDetection && this.hitContext.save(), this.canvas.translate(y, m), 
                this.hitDetection && this.hitContext.translate(y, m), u = c * t.rotation, isNaN(u) || (this.canvas.rotate(u), 
                this.hitDetection && this.hitContext.rotate(u)), h = 2 * t.pointRadius / Math.max(l.getWidth(), l.getHeight()), 
                this.canvas.scale(h, h), this.hitDetection && this.hitContext.scale(h, h), s = l.getCenterLonLat().lon, 
                a = l.getCenterLonLat().lat, this.canvas.translate(-s, -a), this.hitDetection && this.hitContext.translate(-s, -a), 
                p = t.strokeWidth, t.strokeWidth = p / h, !1 !== t.fill) {
                    for (this.setCanvasStyle("fill", t), this.canvas.beginPath(), o = 0; o < d.length; o += 2) n = d[o], 
                    r = d[o + 1], 0 == o && this.canvas.moveTo(n, r), this.canvas.lineTo(n, r);
                    if (this.canvas.closePath(), this.canvas.fill(), this.hitDetection) {
                        for (this.setHitContextStyle("fill", i, t), this.hitContext.beginPath(), o = 0; o < d.length; o += 2) n = d[o], 
                        r = d[o + 1], 0 == o && this.canvas.moveTo(n, r), this.hitContext.lineTo(n, r);
                        this.hitContext.closePath(), this.hitContext.fill();
                    }
                }
                if (!1 !== t.stroke) {
                    for (this.setCanvasStyle("stroke", t), this.canvas.beginPath(), o = 0; o < d.length; o += 2) n = d[o], 
                    r = d[o + 1], 0 == o && this.canvas.moveTo(n, r), this.canvas.lineTo(n, r);
                    if (this.canvas.closePath(), this.canvas.stroke(), this.hitDetection) {
                        for (this.setHitContextStyle("stroke", i, t, h), this.hitContext.beginPath(), o = 0; o < d.length; o += 2) n = d[o], 
                        r = d[o + 1], 0 == o && this.hitContext.moveTo(n, r), this.hitContext.lineTo(n, r);
                        this.hitContext.closePath(), this.hitContext.stroke();
                    }
                }
                t.strokeWidth = p, this.canvas.restore(), this.hitDetection && this.hitContext.restore(), 
                this.setCanvasStyle("reset");
            }
        }
    },
    "setCanvasStyle": function(e, t) {
        "fill" === e ? (this.canvas.globalAlpha = t.fillOpacity, this.canvas.fillStyle = t.fillColor) : "stroke" === e ? (this.canvas.globalAlpha = t.strokeOpacity, 
        this.canvas.strokeStyle = t.strokeColor, this.canvas.lineWidth = t.strokeWidth) : (this.canvas.globalAlpha = 0, 
        this.canvas.lineWidth = 1);
    },
    "featureIdToHex": function(e) {
        var t = Number(e.split("_").pop()) + 1;
        t >= 16777216 && (this.hitOverflow = t - 16777215, t = t % 16777216 + 1);
        var i = "000000" + t.toString(16), n = i.length;
        return i = "#" + i.substring(n - 6, n);
    },
    "setHitContextStyle": function(e, t, i, n) {
        var r = this.featureIdToHex(t);
        "fill" == e ? (this.hitContext.globalAlpha = 1, this.hitContext.fillStyle = r) : "stroke" == e ? (this.hitContext.globalAlpha = 1, 
        this.hitContext.strokeStyle = r, void 0 === n ? this.hitContext.lineWidth = i.strokeWidth + 2 : isNaN(n) || (this.hitContext.lineWidth = i.strokeWidth + 2 / n)) : (this.hitContext.globalAlpha = 0, 
        this.hitContext.lineWidth = 1);
    },
    "drawPoint": function(e, t, i) {
        if (!1 !== t.graphic) if (t.externalGraphic) this.drawExternalGraphic(e, t, i); else if (t.graphicName && "circle" != t.graphicName) this.drawNamedSymbol(e, t, i); else {
            var n = this.getLocalXY(e), r = n[0], s = n[1];
            if (!isNaN(r) && !isNaN(s)) {
                var a = 2 * Math.PI, o = t.pointRadius;
                !1 !== t.fill && (this.setCanvasStyle("fill", t), this.canvas.beginPath(), this.canvas.arc(r, s, o, 0, a, !0), 
                this.canvas.fill(), this.hitDetection && (this.setHitContextStyle("fill", i, t), 
                this.hitContext.beginPath(), this.hitContext.arc(r, s, o, 0, a, !0), this.hitContext.fill())), 
                !1 !== t.stroke && (this.setCanvasStyle("stroke", t), this.canvas.beginPath(), this.canvas.arc(r, s, o, 0, a, !0), 
                this.canvas.stroke(), this.hitDetection && (this.setHitContextStyle("stroke", i, t), 
                this.hitContext.beginPath(), this.hitContext.arc(r, s, o, 0, a, !0), this.hitContext.stroke()), 
                this.setCanvasStyle("reset"));
            }
        }
    },
    "drawLineString": function(e, t, i) {
        t = OpenLayers.Util.applyDefaults({
            "fill": !1
        }, t), this.drawLinearRing(e, t, i);
    },
    "drawLinearRing": function(e, t, i) {
        !1 !== t.fill && (this.setCanvasStyle("fill", t), this.renderPath(this.canvas, e, t, i, "fill"), 
        this.hitDetection && (this.setHitContextStyle("fill", i, t), this.renderPath(this.hitContext, e, t, i, "fill"))), 
        !1 !== t.stroke && (this.setCanvasStyle("stroke", t), this.renderPath(this.canvas, e, t, i, "stroke"), 
        this.hitDetection && (this.setHitContextStyle("stroke", i, t), this.renderPath(this.hitContext, e, t, i, "stroke"))), 
        this.setCanvasStyle("reset");
    },
    "renderPath": function(e, t, i, n, r) {
        var s = t.components, a = s.length;
        e.beginPath();
        var o = this.getLocalXY(s[0]), l = o[0], h = o[1];
        if (!isNaN(l) && !isNaN(h)) {
            e.moveTo(o[0], o[1]);
            for (var u = 1; u < a; ++u) {
                var p = this.getLocalXY(s[u]);
                e.lineTo(p[0], p[1]);
            }
            "fill" === r ? e.fill() : e.stroke();
        }
    },
    "drawPolygon": function(e, t, i) {
        var n = e.components, r = n.length;
        this.drawLinearRing(n[0], t, i);
        for (var s = 1; s < r; ++s) this.canvas.globalCompositeOperation = "destination-out", 
        this.hitDetection && (this.hitContext.globalCompositeOperation = "destination-out"), 
        this.drawLinearRing(n[s], OpenLayers.Util.applyDefaults({
            "stroke": !1,
            "fillOpacity": 1
        }, t), i), this.canvas.globalCompositeOperation = "source-over", this.hitDetection && (this.hitContext.globalCompositeOperation = "source-over"), 
        this.drawLinearRing(n[s], OpenLayers.Util.applyDefaults({
            "fill": !1
        }, t), i);
    },
    "drawText": function(e, t) {
        var i = this.getLocalXY(e);
        this.setCanvasStyle("reset"), this.canvas.fillStyle = t.fontColor, this.canvas.globalAlpha = t.fontOpacity || 1;
        var n = [ t.fontStyle ? t.fontStyle : "normal", "normal", t.fontWeight ? t.fontWeight : "normal", t.fontSize ? t.fontSize : "1em", t.fontFamily ? t.fontFamily : "sans-serif" ].join(" "), r = t.label.split("\n"), s = r.length;
        if (this.canvas.fillText) {
            this.canvas.font = n, this.canvas.textAlign = OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[0]] || "center", 
            this.canvas.textBaseline = OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[1]] || "middle", 
            null == (o = OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]]) && (o = -.5);
            l = this.canvas.measureText("Mg").height || this.canvas.measureText("xx").width;
            i[1] += l * o * (s - 1);
            for (h = 0; h < s; h++) t.labelOutlineWidth && (this.canvas.save(), this.canvas.globalAlpha = t.labelOutlineOpacity || t.fontOpacity || 1, 
            this.canvas.strokeStyle = t.labelOutlineColor, this.canvas.lineWidth = t.labelOutlineWidth, 
            this.canvas.strokeText(r[h], i[0], i[1] + l * h + 1), this.canvas.restore()), this.canvas.fillText(r[h], i[0], i[1] + l * h);
        } else if (this.canvas.mozDrawText) {
            this.canvas.mozTextStyle = n;
            var a = OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[0]];
            null == a && (a = -.5);
            var o = OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]];
            null == o && (o = -.5);
            var l = this.canvas.mozMeasureText("xx");
            i[1] += l * (1 + o * s);
            for (var h = 0; h < s; h++) {
                var u = i[0] + a * this.canvas.mozMeasureText(r[h]), p = i[1] + h * l;
                this.canvas.translate(u, p), this.canvas.mozDrawText(r[h]), this.canvas.translate(-u, -p);
            }
        }
        this.setCanvasStyle("reset");
    },
    "getLocalXY": function(e) {
        var t = this.getResolution(), i = this.extent;
        return [ (e.x - this.featureDx) / t + -i.left / t, i.top / t - e.y / t ];
    },
    "clear": function() {
        this.clearCanvas(), this.features = {};
    },
    "clearCanvas": function() {
        var e = this.root.height, t = this.root.width;
        this.canvas.clearRect(0, 0, t, e), this._clearRectId = OpenLayers.Util.createUniqueID(), 
        this.hitDetection && this.hitContext.clearRect(0, 0, t, e);
    },
    "getFeatureIdFromEvent": function(e) {
        var t, i;
        if (this.hitDetection && "none" !== this.root.style.display && !this.map.dragging) {
            var n = e.xy, r = 0 | n.x, s = 0 | n.y, a = this.hitContext.getImageData(r, s, 1, 1).data;
            if (255 === a[3]) {
                var o = a[2] + 256 * (a[1] + 256 * a[0]);
                if (o) {
                    t = "OpenLayers_Feature_Vector_" + (o - 1 + this.hitOverflow);
                    try {
                        i = this.features[t][0];
                    } catch (e) {}
                }
            }
        }
        return i;
    },
    "eraseFeatures": function(e) {
        OpenLayers.Util.isArray(e) || (e = [ e ]);
        for (var t = 0; t < e.length; ++t) delete this.features[e[t].id];
        this.redraw();
    },
    "redraw": function() {
        if (!this.locked) {
            this.clearCanvas();
            var e, t, i, n = [], r = this.map.baseLayer && this.map.baseLayer.wrapDateLine && this.map.getMaxExtent();
            for (var s in this.features) this.features.hasOwnProperty(s) && (t = (e = this.features[s][0]).geometry, 
            this.calculateFeatureDx(t.getBounds(), r), i = this.features[s][1], this.drawGeometry(t, i, e.id), 
            i.label && n.push([ e, i ]));
            for (var a, o = 0, l = n.length; o < l; ++o) a = n[o], this.drawText(a[0].geometry.getCentroid(), a[1]);
        }
    },
    "CLASS_NAME": "OpenLayers.Renderer.Canvas"
}), OpenLayers.Renderer.Canvas.LABEL_ALIGN = {
    "l": "left",
    "r": "right",
    "t": "top",
    "b": "bottom"
}, OpenLayers.Renderer.Canvas.LABEL_FACTOR = {
    "l": 0,
    "r": -1,
    "t": 0,
    "b": -1
}, OpenLayers.Renderer.Canvas.drawImageScaleFactor = null, OpenLayers.ElementsIndexer = OpenLayers.Class({
    "maxZIndex": null,
    "order": null,
    "indices": null,
    "compare": null,
    "initialize": function(e) {
        this.compare = e ? OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_Y_ORDER : OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_DRAWING_ORDER, 
        this.clear();
    },
    "insert": function(e) {
        this.exists(e) && this.remove(e);
        var t = e.id;
        this.determineZIndex(e);
        for (var i, n = -1, r = this.order.length; r - n > 1; ) i = parseInt((n + r) / 2), 
        this.compare(this, e, OpenLayers.Util.getElement(this.order[i])) > 0 ? n = i : r = i;
        return this.order.splice(r, 0, t), this.indices[t] = this.getZIndex(e), this.getNextElement(r);
    },
    "remove": function(e) {
        var t = e.id, i = OpenLayers.Util.indexOf(this.order, t);
        if (i >= 0) if (this.order.splice(i, 1), delete this.indices[t], this.order.length > 0) {
            var n = this.order[this.order.length - 1];
            this.maxZIndex = this.indices[n];
        } else this.maxZIndex = 0;
    },
    "clear": function() {
        this.order = [], this.indices = {}, this.maxZIndex = 0;
    },
    "exists": function(e) {
        return null != this.indices[e.id];
    },
    "getZIndex": function(e) {
        return e._style.graphicZIndex;
    },
    "determineZIndex": function(e) {
        var t = e._style.graphicZIndex;
        null == t ? (t = this.maxZIndex, e._style.graphicZIndex = t) : t > this.maxZIndex && (this.maxZIndex = t);
    },
    "getNextElement": function(e) {
        for (var t = e + 1, i = void 0; t < this.order.length && void 0 == i; t++) i = OpenLayers.Util.getElement(this.order[t]);
        return i || null;
    },
    "CLASS_NAME": "OpenLayers.ElementsIndexer"
}), OpenLayers.ElementsIndexer.IndexingMethods = {
    "Z_ORDER": function(e, t, i) {
        var n = e.getZIndex(t), r = 0;
        return i && (r = n - e.getZIndex(i)), r;
    },
    "Z_ORDER_DRAWING_ORDER": function(e, t, i) {
        var n = OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e, t, i);
        return i && 0 == n && (n = 1), n;
    },
    "Z_ORDER_Y_ORDER": function(e, t, i) {
        var n = OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e, t, i);
        if (i && 0 === n) {
            var r = i._boundsBottom - t._boundsBottom;
            n = 0 === r ? 1 : r;
        }
        return n;
    }
}, OpenLayers.Renderer.Elements = OpenLayers.Class(OpenLayers.Renderer, {
    "rendererRoot": null,
    "root": null,
    "vectorRoot": null,
    "textRoot": null,
    "xmlns": null,
    "xOffset": 0,
    "indexer": null,
    "BACKGROUND_ID_SUFFIX": "_background",
    "LABEL_ID_SUFFIX": "_label",
    "LABEL_OUTLINE_SUFFIX": "_outline",
    "initialize": function(e, t) {
        OpenLayers.Renderer.prototype.initialize.apply(this, arguments), this.rendererRoot = this.createRenderRoot(), 
        this.root = this.createRoot("_root"), this.vectorRoot = this.createRoot("_vroot"), 
        this.textRoot = this.createRoot("_troot"), this.root.appendChild(this.vectorRoot), 
        this.root.appendChild(this.textRoot), this.rendererRoot.appendChild(this.root), 
        this.container.appendChild(this.rendererRoot), t && (t.zIndexing || t.yOrdering) && (this.indexer = new OpenLayers.ElementsIndexer(t.yOrdering));
    },
    "destroy": function() {
        this.clear(), this.rendererRoot = null, this.root = null, this.xmlns = null, OpenLayers.Renderer.prototype.destroy.apply(this, arguments);
    },
    "clear": function() {
        var e, t = this.vectorRoot;
        if (t) for (;e = t.firstChild; ) t.removeChild(e);
        if (t = this.textRoot) for (;e = t.firstChild; ) t.removeChild(e);
        this.indexer && this.indexer.clear();
    },
    "setExtent": function(e, t) {
        var i = OpenLayers.Renderer.prototype.setExtent.apply(this, arguments), n = this.getResolution();
        if (this.map.baseLayer && this.map.baseLayer.wrapDateLine) {
            var r, s = e.getWidth() / this.map.getExtent().getWidth(), e = e.scale(1 / s), a = this.map.getMaxExtent();
            a.right > e.left && a.right < e.right ? r = !0 : a.left > e.left && a.left < e.right && (r = !1), 
            (r !== this.rightOfDateLine || t) && (i = !1, this.xOffset = !0 === r ? a.getWidth() / n : 0), 
            this.rightOfDateLine = r;
        }
        return i;
    },
    "getNodeType": function(e, t) {},
    "drawGeometry": function(e, t, i) {
        var n = e.CLASS_NAME, r = !0;
        if ("OpenLayers.Geometry.Collection" == n || "OpenLayers.Geometry.MultiPoint" == n || "OpenLayers.Geometry.MultiLineString" == n || "OpenLayers.Geometry.MultiPolygon" == n) {
            for (var s = 0, a = e.components.length; s < a; s++) r = this.drawGeometry(e.components[s], t, i) && r;
            return r;
        }
        r = !1;
        var o = !1;
        if ("none" != t.display && (t.backgroundGraphic ? this.redrawBackgroundNode(e.id, e, t, i) : o = !0, 
        r = this.redrawNode(e.id, e, t, i)), 0 == r && (l = document.getElementById(e.id)) && (l._style.backgroundGraphic && (o = !0), 
        l.parentNode.removeChild(l)), o) {
            var l = document.getElementById(e.id + this.BACKGROUND_ID_SUFFIX);
            l && l.parentNode.removeChild(l);
        }
        return r;
    },
    "redrawNode": function(e, t, i, n) {
        i = this.applyDefaultSymbolizer(i);
        var r = this.nodeFactory(e, this.getNodeType(t, i));
        r._featureId = n, r._boundsBottom = t.getBounds().bottom, r._geometryClass = t.CLASS_NAME, 
        r._style = i;
        var s = this.drawGeometryNode(r, t, i);
        if (!1 === s) return !1;
        if (r = s.node, this.indexer) {
            var a = this.indexer.insert(r);
            a ? this.vectorRoot.insertBefore(r, a) : this.vectorRoot.appendChild(r);
        } else r.parentNode !== this.vectorRoot && this.vectorRoot.appendChild(r);
        return this.postDraw(r), s.complete;
    },
    "redrawBackgroundNode": function(e, t, i, n) {
        var r = OpenLayers.Util.extend({}, i);
        return r.externalGraphic = r.backgroundGraphic, r.graphicXOffset = r.backgroundXOffset, 
        r.graphicYOffset = r.backgroundYOffset, r.graphicZIndex = r.backgroundGraphicZIndex, 
        r.graphicWidth = r.backgroundWidth || r.graphicWidth, r.graphicHeight = r.backgroundHeight || r.graphicHeight, 
        r.backgroundGraphic = null, r.backgroundXOffset = null, r.backgroundYOffset = null, 
        r.backgroundGraphicZIndex = null, this.redrawNode(e + this.BACKGROUND_ID_SUFFIX, t, r, null);
    },
    "drawGeometryNode": function(e, t, i) {
        var n, r = {
            "isFilled": void 0 === (i = i || e._style).fill || i.fill,
            "isStroked": void 0 === i.stroke ? !!i.strokeWidth : i.stroke
        };
        switch (t.CLASS_NAME) {
          case "OpenLayers.Geometry.Point":
            !1 === i.graphic && (r.isFilled = !1, r.isStroked = !1), n = this.drawPoint(e, t);
            break;

          case "OpenLayers.Geometry.LineString":
            r.isFilled = !1, n = this.drawLineString(e, t);
            break;

          case "OpenLayers.Geometry.LinearRing":
            n = this.drawLinearRing(e, t);
            break;

          case "OpenLayers.Geometry.Polygon":
            n = this.drawPolygon(e, t);
            break;

          case "OpenLayers.Geometry.Rectangle":
            n = this.drawRectangle(e, t);
        }
        return e._options = r, 0 != n && {
            "node": this.setStyle(e, i, r, t),
            "complete": n
        };
    },
    "postDraw": function(e) {},
    "drawPoint": function(e, t) {},
    "drawLineString": function(e, t) {},
    "drawLinearRing": function(e, t) {},
    "drawPolygon": function(e, t) {},
    "drawRectangle": function(e, t) {},
    "drawCircle": function(e, t) {},
    "removeText": function(e) {
        var t = document.getElementById(e + this.LABEL_ID_SUFFIX);
        t && this.textRoot.removeChild(t);
        var i = document.getElementById(e + this.LABEL_OUTLINE_SUFFIX);
        i && this.textRoot.removeChild(i);
    },
    "getFeatureIdFromEvent": function(e) {
        var t = e.target, i = t && t.correspondingUseElement;
        return (i || (t || e.srcElement))._featureId;
    },
    "eraseGeometry": function(e, t) {
        if ("OpenLayers.Geometry.MultiPoint" == e.CLASS_NAME || "OpenLayers.Geometry.MultiLineString" == e.CLASS_NAME || "OpenLayers.Geometry.MultiPolygon" == e.CLASS_NAME || "OpenLayers.Geometry.Collection" == e.CLASS_NAME) for (var i = 0, n = e.components.length; i < n; i++) this.eraseGeometry(e.components[i], t); else {
            var r = OpenLayers.Util.getElement(e.id);
            if (r && r.parentNode && (r.geometry && (r.geometry.destroy(), r.geometry = null), 
            r.parentNode.removeChild(r), this.indexer && this.indexer.remove(r), r._style.backgroundGraphic)) {
                var s = e.id + this.BACKGROUND_ID_SUFFIX, a = OpenLayers.Util.getElement(s);
                a && a.parentNode && a.parentNode.removeChild(a);
            }
        }
    },
    "nodeFactory": function(e, t) {
        var i = OpenLayers.Util.getElement(e);
        return i ? this.nodeTypeCompare(i, t) || (i.parentNode.removeChild(i), i = this.nodeFactory(e, t)) : i = this.createNode(t, e), 
        i;
    },
    "nodeTypeCompare": function(e, t) {},
    "createNode": function(e, t) {},
    "moveRoot": function(e) {
        var t = this.root;
        e.root.parentNode == this.rendererRoot && (t = e.root), t.parentNode.removeChild(t), 
        e.rendererRoot.appendChild(t);
    },
    "getRenderLayerId": function() {
        return this.root.parentNode.parentNode.id;
    },
    "isComplexSymbol": function(e) {
        return "circle" != e && !!e;
    },
    "CLASS_NAME": "OpenLayers.Renderer.Elements"
}), OpenLayers.Renderer.SVG = OpenLayers.Class(OpenLayers.Renderer.Elements, {
    "xmlns": "http://www.w3.org/2000/svg",
    "xlinkns": "http://www.w3.org/1999/xlink",
    "MAX_PIXEL": 15e3,
    "translationParameters": null,
    "symbolMetrics": null,
    "initialize": function(e) {
        this.supported() && (OpenLayers.Renderer.Elements.prototype.initialize.apply(this, arguments), 
        this.translationParameters = {
            "x": 0,
            "y": 0
        }, this.symbolMetrics = {});
    },
    "supported": function() {
        var e = "http://www.w3.org/TR/SVG11/feature#";
        return document.implementation && (document.implementation.hasFeature("org.w3c.svg", "1.0") || document.implementation.hasFeature(e + "SVG", "1.1") || document.implementation.hasFeature(e + "BasicStructure", "1.1"));
    },
    "inValidRange": function(e, t, i) {
        var n = e + (i ? 0 : this.translationParameters.x), r = t + (i ? 0 : this.translationParameters.y);
        return n >= -this.MAX_PIXEL && n <= this.MAX_PIXEL && r >= -this.MAX_PIXEL && r <= this.MAX_PIXEL;
    },
    "setExtent": function(e, t) {
        var i = OpenLayers.Renderer.Elements.prototype.setExtent.apply(this, arguments), n = this.getResolution(), r = -e.left / n, s = e.top / n;
        if (t) {
            this.left = r, this.top = s;
            var a = "0 0 " + this.size.w + " " + this.size.h;
            return this.rendererRoot.setAttributeNS(null, "viewBox", a), this.translate(this.xOffset, 0), 
            !0;
        }
        var o = this.translate(r - this.left + this.xOffset, s - this.top);
        return o || this.setExtent(e, !0), i && o;
    },
    "translate": function(e, t) {
        if (this.inValidRange(e, t, !0)) {
            var i = "";
            return (e || t) && (i = "translate(" + e + "," + t + ")"), this.root.setAttributeNS(null, "transform", i), 
            this.translationParameters = {
                "x": e,
                "y": t
            }, !0;
        }
        return !1;
    },
    "setSize": function(e) {
        OpenLayers.Renderer.prototype.setSize.apply(this, arguments), this.rendererRoot.setAttributeNS(null, "width", this.size.w), 
        this.rendererRoot.setAttributeNS(null, "height", this.size.h);
    },
    "getNodeType": function(e, t) {
        var i = null;
        switch (e.CLASS_NAME) {
          case "OpenLayers.Geometry.Point":
            i = t.externalGraphic ? "image" : this.isComplexSymbol(t.graphicName) ? "svg" : "circle";
            break;

          case "OpenLayers.Geometry.Rectangle":
            i = "rect";
            break;

          case "OpenLayers.Geometry.LineString":
            i = "polyline";
            break;

          case "OpenLayers.Geometry.LinearRing":
            i = "polygon";
            break;

          case "OpenLayers.Geometry.Polygon":
          case "OpenLayers.Geometry.Curve":
            i = "path";
        }
        return i;
    },
    "setStyle": function(e, t, i) {
        t = t || e._style, i = i || e._options;
        var n = t.title || t.graphicTitle;
        if (n) {
            e.setAttributeNS(null, "title", n);
            var r = e.getElementsByTagName("title");
            if (r.length > 0) r[0].firstChild.textContent = n; else {
                var s = this.nodeFactory(null, "title");
                s.textContent = n, e.appendChild(s);
            }
        }
        var a, o = parseFloat(e.getAttributeNS(null, "r")), l = 1;
        if ("OpenLayers.Geometry.Point" == e._geometryClass && o) {
            if (e.style.visibility = "", !1 === t.graphic) e.style.visibility = "hidden"; else if (t.externalGraphic) {
                a = this.getPosition(e), t.graphicWidth && t.graphicHeight && e.setAttributeNS(null, "preserveAspectRatio", "none");
                var h = t.graphicWidth || t.graphicHeight, u = t.graphicHeight || t.graphicWidth;
                h = h || 2 * t.pointRadius, u = u || 2 * t.pointRadius;
                var p = void 0 != t.graphicXOffset ? t.graphicXOffset : -.5 * h, c = void 0 != t.graphicYOffset ? t.graphicYOffset : -.5 * u, d = t.graphicOpacity || t.fillOpacity;
                e.setAttributeNS(null, "x", (a.x + p).toFixed()), e.setAttributeNS(null, "y", (a.y + c).toFixed()), 
                e.setAttributeNS(null, "width", h), e.setAttributeNS(null, "height", u), e.setAttributeNS(this.xlinkns, "xlink:href", t.externalGraphic), 
                e.setAttributeNS(null, "style", "opacity: " + d), e.onclick = OpenLayers.Event.preventDefault;
            } else if (this.isComplexSymbol(t.graphicName)) {
                var f = 3 * t.pointRadius, y = 2 * f, m = this.importSymbol(t.graphicName);
                a = this.getPosition(e), l = 3 * this.symbolMetrics[m.id][0] / y;
                var g = e.parentNode, v = e.nextSibling;
                g && g.removeChild(e), e.firstChild && e.removeChild(e.firstChild), e.appendChild(m.firstChild.cloneNode(!0)), 
                e.setAttributeNS(null, "viewBox", m.getAttributeNS(null, "viewBox")), e.setAttributeNS(null, "width", y), 
                e.setAttributeNS(null, "height", y), e.setAttributeNS(null, "x", a.x - f), e.setAttributeNS(null, "y", a.y - f), 
                v ? g.insertBefore(e, v) : g && g.appendChild(e);
            } else e.setAttributeNS(null, "r", t.pointRadius);
            var L = t.rotation;
            if ((void 0 !== L || void 0 !== e._rotation) && a) if (e._rotation = L, L |= 0, 
            "svg" !== e.nodeName) e.setAttributeNS(null, "transform", "rotate(" + L + " " + a.x + " " + a.y + ")"); else {
                var O = this.symbolMetrics[m.id];
                e.firstChild.setAttributeNS(null, "transform", "rotate(" + L + " " + O[1] + " " + O[2] + ")");
            }
        }
        return i.isFilled ? (e.setAttributeNS(null, "fill", t.fillColor), e.setAttributeNS(null, "fill-opacity", t.fillOpacity)) : e.setAttributeNS(null, "fill", "none"), 
        i.isStroked ? (e.setAttributeNS(null, "stroke", t.strokeColor), e.setAttributeNS(null, "stroke-opacity", t.strokeOpacity), 
        e.setAttributeNS(null, "stroke-width", t.strokeWidth * l), e.setAttributeNS(null, "stroke-linecap", t.strokeLinecap || "round"), 
        e.setAttributeNS(null, "stroke-linejoin", "round"), t.strokeDashstyle && e.setAttributeNS(null, "stroke-dasharray", this.dashStyle(t, l))) : e.setAttributeNS(null, "stroke", "none"), 
        t.pointerEvents && e.setAttributeNS(null, "pointer-events", t.pointerEvents), null != t.cursor && e.setAttributeNS(null, "cursor", t.cursor), 
        e;
    },
    "dashStyle": function(e, t) {
        var i = e.strokeWidth * t, n = e.strokeDashstyle;
        switch (n) {
          case "solid":
            return "none";

          case "dot":
            return [ 1, 4 * i ].join();

          case "dash":
            return [ 4 * i, 4 * i ].join();

          case "dashdot":
            return [ 4 * i, 4 * i, 1, 4 * i ].join();

          case "longdash":
            return [ 8 * i, 4 * i ].join();

          case "longdashdot":
            return [ 8 * i, 4 * i, 1, 4 * i ].join();

          default:
            return OpenLayers.String.trim(n).replace(/\s+/g, ",");
        }
    },
    "createNode": function(e, t) {
        var i = document.createElementNS(this.xmlns, e);
        return t && i.setAttributeNS(null, "id", t), i;
    },
    "nodeTypeCompare": function(e, t) {
        return t == e.nodeName;
    },
    "createRenderRoot": function() {
        var e = this.nodeFactory(this.container.id + "_svgRoot", "svg");
        return e.style.display = "block", e;
    },
    "createRoot": function(e) {
        return this.nodeFactory(this.container.id + e, "g");
    },
    "createDefs": function() {
        var e = this.nodeFactory(this.container.id + "_defs", "defs");
        return this.rendererRoot.appendChild(e), e;
    },
    "drawPoint": function(e, t) {
        return this.drawCircle(e, t, 1);
    },
    "drawCircle": function(e, t, i) {
        var n = this.getResolution(), r = (t.x - this.featureDx) / n + this.left, s = this.top - t.y / n;
        return !!this.inValidRange(r, s) && (e.setAttributeNS(null, "cx", r), e.setAttributeNS(null, "cy", s), 
        e.setAttributeNS(null, "r", i), e);
    },
    "drawLineString": function(e, t) {
        var i = this.getComponentsString(t.components);
        return !!i.path && (e.setAttributeNS(null, "points", i.path), i.complete ? e : null);
    },
    "drawLinearRing": function(e, t) {
        var i = this.getComponentsString(t.components);
        return !!i.path && (e.setAttributeNS(null, "points", i.path), i.complete ? e : null);
    },
    "drawPolygon": function(e, t) {
        for (var i, n, r = "", s = !0, a = !0, o = 0, l = t.components.length; o < l; o++) r += " M", 
        (n = (i = this.getComponentsString(t.components[o].components, " ")).path) ? (r += " " + n, 
        a = i.complete && a) : s = !1;
        return r += " z", !!s && (e.setAttributeNS(null, "d", r), e.setAttributeNS(null, "fill-rule", "evenodd"), 
        a ? e : null);
    },
    "drawRectangle": function(e, t) {
        var i = this.getResolution(), n = (t.x - this.featureDx) / i + this.left, r = this.top - t.y / i;
        return !!this.inValidRange(n, r) && (e.setAttributeNS(null, "x", n), e.setAttributeNS(null, "y", r), 
        e.setAttributeNS(null, "width", t.width / i), e.setAttributeNS(null, "height", t.height / i), 
        e);
    },
    "drawText": function(e, t, i) {
        var n = !!t.labelOutlineWidth;
        if (n) {
            var r = OpenLayers.Util.extend({}, t);
            r.fontColor = r.labelOutlineColor, r.fontStrokeColor = r.labelOutlineColor, r.fontStrokeWidth = t.labelOutlineWidth, 
            t.labelOutlineOpacity && (r.fontOpacity = t.labelOutlineOpacity), delete r.labelOutlineWidth, 
            this.drawText(e, r, i);
        }
        var s = this.getResolution(), a = (i.x - this.featureDx) / s + this.left, o = i.y / s - this.top, l = n ? this.LABEL_OUTLINE_SUFFIX : this.LABEL_ID_SUFFIX, h = this.nodeFactory(e + l, "text");
        h.setAttributeNS(null, "x", a), h.setAttributeNS(null, "y", -o), t.fontColor && h.setAttributeNS(null, "fill", t.fontColor), 
        t.fontStrokeColor && h.setAttributeNS(null, "stroke", t.fontStrokeColor), t.fontStrokeWidth && h.setAttributeNS(null, "stroke-width", t.fontStrokeWidth), 
        t.fontOpacity && h.setAttributeNS(null, "opacity", t.fontOpacity), t.fontFamily && h.setAttributeNS(null, "font-family", t.fontFamily), 
        t.fontSize && h.setAttributeNS(null, "font-size", t.fontSize), t.fontWeight && h.setAttributeNS(null, "font-weight", t.fontWeight), 
        t.fontStyle && h.setAttributeNS(null, "font-style", t.fontStyle), !0 === t.labelSelect ? (h.setAttributeNS(null, "pointer-events", "visible"), 
        h._featureId = e) : h.setAttributeNS(null, "pointer-events", "none");
        var u = t.labelAlign || OpenLayers.Renderer.defaultSymbolizer.labelAlign;
        h.setAttributeNS(null, "text-anchor", OpenLayers.Renderer.SVG.LABEL_ALIGN[u[0]] || "middle"), 
        !0 === OpenLayers.IS_GECKO && h.setAttributeNS(null, "dominant-baseline", OpenLayers.Renderer.SVG.LABEL_ALIGN[u[1]] || "central");
        for (var p = t.label.split("\n"), c = p.length; h.childNodes.length > c; ) h.removeChild(h.lastChild);
        for (var d = 0; d < c; d++) {
            var f = this.nodeFactory(e + l + "_tspan_" + d, "tspan");
            if (!0 === t.labelSelect && (f._featureId = e, f._geometry = i, f._geometryClass = i.CLASS_NAME), 
            !1 === OpenLayers.IS_GECKO && f.setAttributeNS(null, "baseline-shift", OpenLayers.Renderer.SVG.LABEL_VSHIFT[u[1]] || "-35%"), 
            f.setAttribute("x", a), 0 == d) {
                var y = OpenLayers.Renderer.SVG.LABEL_VFACTOR[u[1]];
                null == y && (y = -.5), f.setAttribute("dy", y * (c - 1) + "em");
            } else f.setAttribute("dy", "1em");
            f.textContent = "" === p[d] ? " " : p[d], f.parentNode || h.appendChild(f);
        }
        h.parentNode || this.textRoot.appendChild(h);
    },
    "getComponentsString": function(e, t) {
        for (var i, n, r = [], s = !0, a = e.length, o = [], l = 0; l < a; l++) n = e[l], 
        r.push(n), (i = this.getShortString(n)) ? o.push(i) : (l > 0 && this.getShortString(e[l - 1]) && o.push(this.clipLine(e[l], e[l - 1])), 
        l < a - 1 && this.getShortString(e[l + 1]) && o.push(this.clipLine(e[l], e[l + 1])), 
        s = !1);
        return {
            "path": o.join(t || ","),
            "complete": s
        };
    },
    "clipLine": function(e, t) {
        if (t.equals(e)) return "";
        var i, n = this.getResolution(), r = this.MAX_PIXEL - this.translationParameters.x, s = this.MAX_PIXEL - this.translationParameters.y, a = (t.x - this.featureDx) / n + this.left, o = this.top - t.y / n, l = (e.x - this.featureDx) / n + this.left, h = this.top - e.y / n;
        return (l < -r || l > r) && (i = (h - o) / (l - a), h = o + ((l = l < 0 ? -r : r) - a) * i), 
        (h < -s || h > s) && (i = (l - a) / (h - o), l = a + ((h = h < 0 ? -s : s) - o) * i), 
        l + "," + h;
    },
    "getShortString": function(e) {
        var t = this.getResolution(), i = (e.x - this.featureDx) / t + this.left, n = this.top - e.y / t;
        return !!this.inValidRange(i, n) && i + "," + n;
    },
    "getPosition": function(e) {
        return {
            "x": parseFloat(e.getAttributeNS(null, "cx")),
            "y": parseFloat(e.getAttributeNS(null, "cy"))
        };
    },
    "importSymbol": function(e) {
        this.defs || (this.defs = this.createDefs());
        var t = this.container.id + "-" + e, i = document.getElementById(t);
        if (null != i) return i;
        var n = OpenLayers.Renderer.symbol[e];
        if (!n) throw new Error(e + " is not a valid symbol name");
        var r = this.nodeFactory(t, "symbol"), s = this.nodeFactory(null, "polygon");
        r.appendChild(s);
        for (var a, o, l = new OpenLayers.Bounds(Number.MAX_VALUE, Number.MAX_VALUE, 0, 0), h = [], u = 0; u < n.length; u += 2) a = n[u], 
        o = n[u + 1], l.left = Math.min(l.left, a), l.bottom = Math.min(l.bottom, o), l.right = Math.max(l.right, a), 
        l.top = Math.max(l.top, o), h.push(a, ",", o);
        s.setAttributeNS(null, "points", h.join(" "));
        var p = l.getWidth(), c = l.getHeight(), d = [ l.left - p, l.bottom - c, 3 * p, 3 * c ];
        return r.setAttributeNS(null, "viewBox", d.join(" ")), this.symbolMetrics[t] = [ Math.max(p, c), l.getCenterLonLat().lon, l.getCenterLonLat().lat ], 
        this.defs.appendChild(r), r;
    },
    "getFeatureIdFromEvent": function(e) {
        var t = OpenLayers.Renderer.Elements.prototype.getFeatureIdFromEvent.apply(this, arguments);
        if (!t) {
            var i = e.target;
            t = i.parentNode && i != this.rendererRoot ? i.parentNode._featureId : void 0;
        }
        return t;
    },
    "CLASS_NAME": "OpenLayers.Renderer.SVG"
}), OpenLayers.Renderer.SVG.LABEL_ALIGN = {
    "l": "start",
    "r": "end",
    "b": "bottom",
    "t": "hanging"
}, OpenLayers.Renderer.SVG.LABEL_VSHIFT = {
    "t": "-70%",
    "b": "0"
}, OpenLayers.Renderer.SVG.LABEL_VFACTOR = {
    "t": 0,
    "b": -1
}, OpenLayers.Renderer.SVG.preventDefault = function(e) {
    OpenLayers.Event.preventDefault(e);
}, OpenLayers.Renderer.VML = OpenLayers.Class(OpenLayers.Renderer.Elements, {
    "xmlns": "urn:schemas-microsoft-com:vml",
    "symbolCache": {},
    "offset": null,
    "initialize": function(e) {
        if (this.supported()) {
            if (!document.namespaces.olv) {
                document.namespaces.add("olv", this.xmlns);
                for (var t = document.createStyleSheet(), i = [ "shape", "rect", "oval", "fill", "stroke", "imagedata", "group", "textbox" ], n = 0, r = i.length; n < r; n++) t.addRule("olv\\:" + i[n], "behavior: url(#default#VML); position: absolute; display: inline-block;");
            }
            OpenLayers.Renderer.Elements.prototype.initialize.apply(this, arguments);
        }
    },
    "supported": function() {
        return !!document.namespaces;
    },
    "setExtent": function(e, t) {
        var i = OpenLayers.Renderer.Elements.prototype.setExtent.apply(this, arguments), n = this.getResolution(), r = e.left / n | 0, s = e.top / n - this.size.h | 0;
        t || !this.offset ? (this.offset = {
            "x": r,
            "y": s
        }, r = 0, s = 0) : (r -= this.offset.x, s -= this.offset.y);
        var a = r - this.xOffset + " " + s;
        this.root.coordorigin = a;
        for (var o, l = [ this.root, this.vectorRoot, this.textRoot ], h = 0, u = l.length; h < u; ++h) {
            o = l[h];
            var p = this.size.w + " " + this.size.h;
            o.coordsize = p;
        }
        return this.root.style.flip = "y", i;
    },
    "setSize": function(e) {
        OpenLayers.Renderer.prototype.setSize.apply(this, arguments);
        for (var t, i = [ this.rendererRoot, this.root, this.vectorRoot, this.textRoot ], n = this.size.w + "px", r = this.size.h + "px", s = 0, a = i.length; s < a; ++s) (t = i[s]).style.width = n, 
        t.style.height = r;
    },
    "getNodeType": function(e, t) {
        var i = null;
        switch (e.CLASS_NAME) {
          case "OpenLayers.Geometry.Point":
            i = t.externalGraphic ? "olv:rect" : this.isComplexSymbol(t.graphicName) ? "olv:shape" : "olv:oval";
            break;

          case "OpenLayers.Geometry.Rectangle":
            i = "olv:rect";
            break;

          case "OpenLayers.Geometry.LineString":
          case "OpenLayers.Geometry.LinearRing":
          case "OpenLayers.Geometry.Polygon":
          case "OpenLayers.Geometry.Curve":
            i = "olv:shape";
        }
        return i;
    },
    "setStyle": function(e, t, i, n) {
        t = t || e._style, i = i || e._options;
        var r = t.fillColor, s = t.title || t.graphicTitle;
        if (s && (e.title = s), "OpenLayers.Geometry.Point" === e._geometryClass) if (t.externalGraphic) {
            i.isFilled = !0;
            var a = t.graphicWidth || t.graphicHeight, o = t.graphicHeight || t.graphicWidth;
            a = a || 2 * t.pointRadius, o = o || 2 * t.pointRadius;
            var l = this.getResolution(), h = void 0 != t.graphicXOffset ? t.graphicXOffset : -.5 * a, u = void 0 != t.graphicYOffset ? t.graphicYOffset : -.5 * o;
            e.style.left = ((n.x - this.featureDx) / l - this.offset.x + h | 0) + "px", e.style.top = (n.y / l - this.offset.y - (u + o) | 0) + "px", 
            e.style.width = a + "px", e.style.height = o + "px", e.style.flip = "y", r = "none", 
            i.isStroked = !1;
        } else if (this.isComplexSymbol(t.graphicName)) {
            var p = this.importSymbol(t.graphicName);
            e.path = p.path, e.coordorigin = p.left + "," + p.bottom;
            var c = p.size;
            e.coordsize = c + "," + c, this.drawCircle(e, n, t.pointRadius), e.style.flip = "y";
        } else this.drawCircle(e, n, t.pointRadius);
        i.isFilled ? e.fillcolor = r : e.filled = "false";
        var d = e.getElementsByTagName("fill"), f = 0 == d.length ? null : d[0];
        i.isFilled ? (f || (f = this.createNode("olv:fill", e.id + "_fill")), f.opacity = t.fillOpacity, 
        "OpenLayers.Geometry.Point" === e._geometryClass && t.externalGraphic && (t.graphicOpacity && (f.opacity = t.graphicOpacity), 
        f.src = t.externalGraphic, f.type = "frame", t.graphicWidth && t.graphicHeight || (f.aspect = "atmost")), 
        f.parentNode != e && e.appendChild(f)) : f && e.removeChild(f);
        var y = t.rotation;
        void 0 === y && void 0 === e._rotation || (e._rotation = y, t.externalGraphic ? (this.graphicRotate(e, h, u, t), 
        f.opacity = 0) : "OpenLayers.Geometry.Point" === e._geometryClass && (e.style.rotation = y || 0));
        var m = e.getElementsByTagName("stroke"), g = 0 == m.length ? null : m[0];
        return i.isStroked ? (g || (g = this.createNode("olv:stroke", e.id + "_stroke"), 
        e.appendChild(g)), g.on = !0, g.color = t.strokeColor, g.weight = t.strokeWidth + "px", 
        g.opacity = t.strokeOpacity, g.endcap = "butt" == t.strokeLinecap ? "flat" : t.strokeLinecap || "round", 
        t.strokeDashstyle && (g.dashstyle = this.dashStyle(t))) : (e.stroked = !1, g && (g.on = !1)), 
        "inherit" != t.cursor && null != t.cursor && (e.style.cursor = t.cursor), e;
    },
    "graphicRotate": function(e, t, i, n) {
        var r, s, a = (n = n || e._style).rotation || 0;
        if (!n.graphicWidth || !n.graphicHeight) {
            var o = new Image();
            return o.onreadystatechange = OpenLayers.Function.bind(function() {
                "complete" != o.readyState && "interactive" != o.readyState || (r = o.width / o.height, 
                s = Math.max(2 * n.pointRadius, n.graphicWidth || 0, n.graphicHeight || 0), t *= r, 
                n.graphicWidth = s * r, n.graphicHeight = s, this.graphicRotate(e, t, i, n));
            }, this), void (o.src = n.externalGraphic);
        }
        s = Math.max(n.graphicWidth, n.graphicHeight), r = n.graphicWidth / n.graphicHeight;
        var l = Math.round(n.graphicWidth || s * r), h = Math.round(n.graphicHeight || s);
        e.style.width = l + "px", e.style.height = h + "px";
        var u = document.getElementById(e.id + "_image");
        u || (u = this.createNode("olv:imagedata", e.id + "_image"), e.appendChild(u)), 
        u.style.width = l + "px", u.style.height = h + "px", u.src = n.externalGraphic, 
        u.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='', sizingMethod='scale')";
        var p = a * Math.PI / 180, c = Math.sin(p), d = Math.cos(p), f = "progid:DXImageTransform.Microsoft.Matrix(M11=" + d + ",M12=" + -c + ",M21=" + c + ",M22=" + d + ",SizingMethod='auto expand')\n", y = n.graphicOpacity || n.fillOpacity;
        y && 1 != y && (f += "progid:DXImageTransform.Microsoft.BasicImage(opacity=" + y + ")\n"), 
        e.style.filter = f;
        var m = new OpenLayers.Geometry.Point(-t, -i), g = new OpenLayers.Bounds(0, 0, l, h).toGeometry();
        g.rotate(n.rotation, m);
        var v = g.getBounds();
        e.style.left = Math.round(parseInt(e.style.left) + v.left) + "px", e.style.top = Math.round(parseInt(e.style.top) - v.bottom) + "px";
    },
    "postDraw": function(e) {
        e.style.visibility = "visible";
        var t = e._style.fillColor, i = e._style.strokeColor;
        "none" == t && e.fillcolor != t && (e.fillcolor = t), "none" == i && e.strokecolor != i && (e.strokecolor = i);
    },
    "setNodeDimension": function(e, t) {
        var i = t.getBounds();
        if (i) {
            var n = this.getResolution(), r = new OpenLayers.Bounds((i.left - this.featureDx) / n - this.offset.x | 0, i.bottom / n - this.offset.y | 0, (i.right - this.featureDx) / n - this.offset.x | 0, i.top / n - this.offset.y | 0);
            e.style.left = r.left + "px", e.style.top = r.top + "px", e.style.width = r.getWidth() + "px", 
            e.style.height = r.getHeight() + "px", e.coordorigin = r.left + " " + r.top, e.coordsize = r.getWidth() + " " + r.getHeight();
        }
    },
    "dashStyle": function(e) {
        var t = e.strokeDashstyle;
        switch (t) {
          case "solid":
          case "dot":
          case "dash":
          case "dashdot":
          case "longdash":
          case "longdashdot":
            return t;

          default:
            var i = t.split(/[ ,]/);
            return 2 == i.length ? 1 * i[0] >= 2 * i[1] ? "longdash" : 1 == i[0] || 1 == i[1] ? "dot" : "dash" : 4 == i.length ? 1 * i[0] >= 2 * i[1] ? "longdashdot" : "dashdot" : "solid";
        }
    },
    "createNode": function(e, t) {
        var i = document.createElement(e);
        return t && (i.id = t), i.unselectable = "on", i.onselectstart = OpenLayers.Function.False, 
        i;
    },
    "nodeTypeCompare": function(e, t) {
        var i = t, n = i.indexOf(":");
        -1 != n && (i = i.substr(n + 1));
        var r = e.nodeName;
        return -1 != (n = r.indexOf(":")) && (r = r.substr(n + 1)), i == r;
    },
    "createRenderRoot": function() {
        return this.nodeFactory(this.container.id + "_vmlRoot", "div");
    },
    "createRoot": function(e) {
        return this.nodeFactory(this.container.id + e, "olv:group");
    },
    "drawPoint": function(e, t) {
        return this.drawCircle(e, t, 1);
    },
    "drawCircle": function(e, t, i) {
        if (!isNaN(t.x) && !isNaN(t.y)) {
            var n = this.getResolution();
            e.style.left = ((t.x - this.featureDx) / n - this.offset.x | 0) - i + "px", e.style.top = (t.y / n - this.offset.y | 0) - i + "px";
            var r = 2 * i;
            return e.style.width = r + "px", e.style.height = r + "px", e;
        }
        return !1;
    },
    "drawLineString": function(e, t) {
        return this.drawLine(e, t, !1);
    },
    "drawLinearRing": function(e, t) {
        return this.drawLine(e, t, !0);
    },
    "drawLine": function(e, t, i) {
        this.setNodeDimension(e, t);
        for (var n, r, s, a = this.getResolution(), o = t.components.length, l = new Array(o), h = 0; h < o; h++) r = ((n = t.components[h]).x - this.featureDx) / a - this.offset.x | 0, 
        s = n.y / a - this.offset.y | 0, l[h] = " " + r + "," + s + " l ";
        var u = i ? " x e" : " e";
        return e.path = "m" + l.join("") + u, e;
    },
    "drawPolygon": function(e, t) {
        this.setNodeDimension(e, t);
        var i, n, r, s, a, o, l, h, u, p, c = this.getResolution(), d = [];
        for (i = 0, n = t.components.length; i < n; i++) {
            for (d.push("m"), s = 0 === i, a = null, o = null, l = 0, h = (r = t.components[i].components).length; l < h; l++) p = " " + (((u = r[l]).x - this.featureDx) / c - this.offset.x | 0) + "," + (u.y / c - this.offset.y | 0), 
            d.push(p), 0 == l && d.push(" l"), s || (a ? a != p && (o ? o != p && (s = !0) : o = p) : a = p);
            d.push(s ? " x " : " ");
        }
        return d.push("e"), e.path = d.join(""), e;
    },
    "drawRectangle": function(e, t) {
        var i = this.getResolution();
        return e.style.left = ((t.x - this.featureDx) / i - this.offset.x | 0) + "px", e.style.top = (t.y / i - this.offset.y | 0) + "px", 
        e.style.width = (t.width / i | 0) + "px", e.style.height = (t.height / i | 0) + "px", 
        e;
    },
    "drawText": function(e, t, i) {
        var n = this.nodeFactory(e + this.LABEL_ID_SUFFIX, "olv:rect"), r = this.nodeFactory(e + this.LABEL_ID_SUFFIX + "_textbox", "olv:textbox"), s = this.getResolution();
        n.style.left = ((i.x - this.featureDx) / s - this.offset.x | 0) + "px", n.style.top = (i.y / s - this.offset.y | 0) + "px", 
        n.style.flip = "y", r.innerText = t.label, "inherit" != t.cursor && null != t.cursor && (r.style.cursor = t.cursor), 
        t.fontColor && (r.style.color = t.fontColor), t.fontOpacity && (r.style.filter = "alpha(opacity=" + 100 * t.fontOpacity + ")"), 
        t.fontFamily && (r.style.fontFamily = t.fontFamily), t.fontSize && (r.style.fontSize = t.fontSize), 
        t.fontWeight && (r.style.fontWeight = t.fontWeight), t.fontStyle && (r.style.fontStyle = t.fontStyle), 
        !0 === t.labelSelect && (n._featureId = e, r._featureId = e, r._geometry = i, r._geometryClass = i.CLASS_NAME), 
        r.style.whiteSpace = "nowrap", r.inset = "1px,0px,0px,0px", n.parentNode || (n.appendChild(r), 
        this.textRoot.appendChild(n));
        var a = t.labelAlign || "cm";
        1 == a.length && (a += "m");
        var o = r.clientWidth * OpenLayers.Renderer.VML.LABEL_SHIFT[a.substr(0, 1)], l = r.clientHeight * OpenLayers.Renderer.VML.LABEL_SHIFT[a.substr(1, 1)];
        n.style.left = parseInt(n.style.left) - o - 1 + "px", n.style.top = parseInt(n.style.top) + l + "px";
    },
    "moveRoot": function(e) {
        var t = this.map.getLayer(e.container.id);
        t instanceof OpenLayers.Layer.Vector.RootContainer && (t = this.map.getLayer(this.container.id)), 
        t && t.renderer.clear(), OpenLayers.Renderer.Elements.prototype.moveRoot.apply(this, arguments), 
        t && t.redraw();
    },
    "importSymbol": function(e) {
        var t = this.container.id + "-" + e, i = this.symbolCache[t];
        if (i) return i;
        var n = OpenLayers.Renderer.symbol[e];
        if (!n) throw new Error(e + " is not a valid symbol name");
        for (var r = new OpenLayers.Bounds(Number.MAX_VALUE, Number.MAX_VALUE, 0, 0), s = [ "m" ], a = 0; a < n.length; a += 2) {
            var o = n[a], l = n[a + 1];
            r.left = Math.min(r.left, o), r.bottom = Math.min(r.bottom, l), r.right = Math.max(r.right, o), 
            r.top = Math.max(r.top, l), s.push(o), s.push(l), 0 == a && s.push("l");
        }
        s.push("x e");
        var h = s.join(" "), u = (r.getWidth() - r.getHeight()) / 2;
        return u > 0 ? (r.bottom = r.bottom - u, r.top = r.top + u) : (r.left = r.left + u, 
        r.right = r.right - u), i = {
            "path": h,
            "size": r.getWidth(),
            "left": r.left,
            "bottom": r.bottom
        }, this.symbolCache[t] = i, i;
    },
    "CLASS_NAME": "OpenLayers.Renderer.VML"
}), OpenLayers.Renderer.VML.LABEL_SHIFT = {
    "l": 0,
    "c": .5,
    "r": 1,
    "t": 0,
    "m": .5,
    "b": 1
}, OpenLayers.Strategy.BBOX = OpenLayers.Class(OpenLayers.Strategy, {
    "bounds": null,
    "resolution": null,
    "ratio": 2,
    "resFactor": null,
    "response": null,
    "activate": function() {
        var e = OpenLayers.Strategy.prototype.activate.call(this);
        return e && (this.layer.events.on({
            "moveend": this.update,
            "refresh": this.update,
            "visibilitychanged": this.update,
            "scope": this
        }), this.update()), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Strategy.prototype.deactivate.call(this);
        return e && this.layer.events.un({
            "moveend": this.update,
            "refresh": this.update,
            "visibilitychanged": this.update,
            "scope": this
        }), e;
    },
    "update": function(e) {
        var t = this.getMapBounds();
        null !== t && (e && e.force || this.layer.visibility && this.layer.calculateInRange() && this.invalidBounds(t)) && (this.calculateBounds(t), 
        this.resolution = this.layer.map.getResolution(), this.triggerRead(e));
    },
    "getMapBounds": function() {
        if (null === this.layer.map) return null;
        var e = this.layer.map.getExtent();
        return e && this.layer.projection && !this.layer.projection.equals(this.layer.map.getProjectionObject()) && (e = e.clone().transform(this.layer.map.getProjectionObject(), this.layer.projection)), 
        e;
    },
    "invalidBounds": function(e) {
        e || (e = this.getMapBounds());
        var t = !this.bounds || !this.bounds.containsBounds(e);
        if (!t && this.resFactor) {
            var i = this.resolution / this.layer.map.getResolution();
            t = i >= this.resFactor || i <= 1 / this.resFactor;
        }
        return t;
    },
    "calculateBounds": function(e) {
        e || (e = this.getMapBounds());
        var t = e.getCenterLonLat(), i = e.getWidth() * this.ratio, n = e.getHeight() * this.ratio;
        this.bounds = new OpenLayers.Bounds(t.lon - i / 2, t.lat - n / 2, t.lon + i / 2, t.lat + n / 2);
    },
    "triggerRead": function(e) {
        !this.response || e && !0 === e.noAbort || (this.layer.protocol.abort(this.response), 
        this.layer.events.triggerEvent("loadend"));
        var t = {
            "filter": this.createFilter()
        };
        this.layer.events.triggerEvent("loadstart", t), this.response = this.layer.protocol.read(OpenLayers.Util.applyDefaults({
            "filter": t.filter,
            "callback": this.merge,
            "scope": this
        }, e));
    },
    "createFilter": function() {
        var e = new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.BBOX,
            "value": this.bounds,
            "projection": this.layer.projection
        });
        return this.layer.filter && (e = new OpenLayers.Filter.Logical({
            "type": OpenLayers.Filter.Logical.AND,
            "filters": [ this.layer.filter, e ]
        })), e;
    },
    "merge": function(e) {
        if (this.layer.destroyFeatures(), e.success()) {
            var t = e.features;
            if (t && t.length > 0) {
                var i = this.layer.projection, n = this.layer.map.getProjectionObject();
                if (i && n && !n.equals(i)) for (var r, s = 0, a = t.length; s < a; ++s) (r = t[s].geometry) && r.transform(i, n);
                this.layer.addFeatures(t);
            }
        } else this.bounds = null;
        this.response = null, this.layer.events.triggerEvent("loadend", {
            "response": e
        });
    },
    "CLASS_NAME": "OpenLayers.Strategy.BBOX"
}), OpenLayers.Strategy.Cluster = OpenLayers.Class(OpenLayers.Strategy, {
    "distance": 20,
    "threshold": null,
    "features": null,
    "clusters": null,
    "clustering": !1,
    "resolution": null,
    "activate": function() {
        var e = OpenLayers.Strategy.prototype.activate.call(this);
        return e && this.layer.events.on({
            "beforefeaturesadded": this.cacheFeatures,
            "featuresremoved": this.clearCache,
            "moveend": this.cluster,
            "scope": this
        }), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Strategy.prototype.deactivate.call(this);
        return e && (this.clearCache(), this.layer.events.un({
            "beforefeaturesadded": this.cacheFeatures,
            "featuresremoved": this.clearCache,
            "moveend": this.cluster,
            "scope": this
        })), e;
    },
    "cacheFeatures": function(e) {
        var t = !0;
        return this.clustering || (this.clearCache(), this.features = e.features, this.cluster(), 
        t = !1), t;
    },
    "clearCache": function() {
        this.clustering || (this.features = null);
    },
    "cluster": function(e) {
        if ((!e || e.zoomChanged) && this.features) {
            var t = this.layer.map.getResolution();
            if (t != this.resolution || !this.clustersExist()) {
                this.resolution = t;
                for (var i, n, r, s = [], a = 0; a < this.features.length; ++a) if ((i = this.features[a]).geometry) {
                    n = !1;
                    for (var o = s.length - 1; o >= 0; --o) if (r = s[o], this.shouldCluster(r, i)) {
                        this.addToCluster(r, i), n = !0;
                        break;
                    }
                    n || s.push(this.createCluster(this.features[a]));
                }
                if (this.clustering = !0, this.layer.removeAllFeatures(), this.clustering = !1, 
                s.length > 0) {
                    if (this.threshold > 1) {
                        var l = s.slice();
                        s = [];
                        for (var h, a = 0, u = l.length; a < u; ++a) (h = l[a]).attributes.count < this.threshold ? Array.prototype.push.apply(s, h.cluster) : s.push(h);
                    }
                    this.clustering = !0, this.layer.addFeatures(s), this.clustering = !1;
                }
                this.clusters = s;
            }
        }
    },
    "clustersExist": function() {
        var e = !1;
        if (this.clusters && this.clusters.length > 0 && this.clusters.length == this.layer.features.length) {
            e = !0;
            for (var t = 0; t < this.clusters.length; ++t) if (this.clusters[t] != this.layer.features[t]) {
                e = !1;
                break;
            }
        }
        return e;
    },
    "shouldCluster": function(e, t) {
        var i = e.geometry.getBounds().getCenterLonLat(), n = t.geometry.getBounds().getCenterLonLat();
        return Math.sqrt(Math.pow(i.lon - n.lon, 2) + Math.pow(i.lat - n.lat, 2)) / this.resolution <= this.distance;
    },
    "addToCluster": function(e, t) {
        e.cluster.push(t), e.attributes.count += 1;
    },
    "createCluster": function(e) {
        var t = e.geometry.getBounds().getCenterLonLat(), i = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(t.lon, t.lat), {
            "count": 1
        });
        return i.cluster = [ e ], i;
    },
    "CLASS_NAME": "OpenLayers.Strategy.Cluster"
}), OpenLayers.Strategy.Filter = OpenLayers.Class(OpenLayers.Strategy, {
    "filter": null,
    "cache": null,
    "caching": !1,
    "activate": function() {
        var e = OpenLayers.Strategy.prototype.activate.apply(this, arguments);
        return e && (this.cache = [], this.layer.events.on({
            "beforefeaturesadded": this.handleAdd,
            "beforefeaturesremoved": this.handleRemove,
            "scope": this
        })), e;
    },
    "deactivate": function() {
        return this.cache = null, this.layer && this.layer.events && this.layer.events.un({
            "beforefeaturesadded": this.handleAdd,
            "beforefeaturesremoved": this.handleRemove,
            "scope": this
        }), OpenLayers.Strategy.prototype.deactivate.apply(this, arguments);
    },
    "handleAdd": function(e) {
        if (!this.caching && this.filter) {
            var t = e.features;
            e.features = [];
            for (var i, n = 0, r = t.length; n < r; ++n) i = t[n], this.filter.evaluate(i) ? e.features.push(i) : this.cache.push(i);
        }
    },
    "handleRemove": function(e) {
        this.caching || (this.cache = []);
    },
    "setFilter": function(e) {
        this.filter = e;
        var t = this.cache;
        if (this.cache = [], this.handleAdd({
            "features": this.layer.features
        }), this.cache.length > 0 && (this.caching = !0, this.layer.removeFeatures(this.cache.slice()), 
        this.caching = !1), t.length > 0) {
            var i = {
                "features": t
            };
            this.handleAdd(i), i.features.length > 0 && (this.caching = !0, this.layer.addFeatures(i.features), 
            this.caching = !1);
        }
    },
    "CLASS_NAME": "OpenLayers.Strategy.Filter"
}), OpenLayers.Strategy.Fixed = OpenLayers.Class(OpenLayers.Strategy, {
    "preload": !1,
    "activate": function() {
        var e = OpenLayers.Strategy.prototype.activate.apply(this, arguments);
        return e && (this.layer.events.on({
            "refresh": this.load,
            "scope": this
        }), 1 == this.layer.visibility || this.preload ? this.load() : this.layer.events.on({
            "visibilitychanged": this.load,
            "scope": this
        })), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Strategy.prototype.deactivate.call(this);
        return e && this.layer.events.un({
            "refresh": this.load,
            "visibilitychanged": this.load,
            "scope": this
        }), e;
    },
    "load": function(e) {
        var t = this.layer;
        t.events.triggerEvent("loadstart", {
            "filter": t.filter
        }), t.protocol.read(OpenLayers.Util.applyDefaults({
            "callback": this.merge,
            "filter": t.filter,
            "scope": this
        }, e)), t.events.un({
            "visibilitychanged": this.load,
            "scope": this
        });
    },
    "merge": function(e) {
        var t = this.layer;
        t.destroyFeatures();
        var i = e.features;
        if (i && i.length > 0) {
            var n = t.projection, r = t.map.getProjectionObject();
            if (!r.equals(n)) for (var s, a = 0, o = i.length; a < o; ++a) (s = i[a].geometry) && s.transform(n, r);
            t.addFeatures(i);
        }
        t.events.triggerEvent("loadend", {
            "response": e
        });
    },
    "CLASS_NAME": "OpenLayers.Strategy.Fixed"
}), OpenLayers.Strategy.Paging = OpenLayers.Class(OpenLayers.Strategy, {
    "features": null,
    "length": 10,
    "num": null,
    "paging": !1,
    "activate": function() {
        var e = OpenLayers.Strategy.prototype.activate.call(this);
        return e && this.layer.events.on({
            "beforefeaturesadded": this.cacheFeatures,
            "scope": this
        }), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Strategy.prototype.deactivate.call(this);
        return e && (this.clearCache(), this.layer.events.un({
            "beforefeaturesadded": this.cacheFeatures,
            "scope": this
        })), e;
    },
    "cacheFeatures": function(e) {
        this.paging || (this.clearCache(), this.features = e.features, this.pageNext(e));
    },
    "clearCache": function() {
        if (this.features) for (var e = 0; e < this.features.length; ++e) this.features[e].destroy();
        this.features = null, this.num = null;
    },
    "pageCount": function() {
        var e = this.features ? this.features.length : 0;
        return Math.ceil(e / this.length);
    },
    "pageNum": function() {
        return this.num;
    },
    "pageLength": function(e) {
        return e && e > 0 && (this.length = e), this.length;
    },
    "pageNext": function(e) {
        var t = !1;
        if (this.features) {
            null === this.num && (this.num = -1);
            var i = (this.num + 1) * this.length;
            t = this.page(i, e);
        }
        return t;
    },
    "pagePrevious": function() {
        var e = !1;
        if (this.features) {
            null === this.num && (this.num = this.pageCount());
            var t = (this.num - 1) * this.length;
            e = this.page(t);
        }
        return e;
    },
    "page": function(e, t) {
        var i = !1;
        if (this.features && e >= 0 && e < this.features.length) {
            var n = Math.floor(e / this.length);
            if (n != this.num) {
                this.paging = !0;
                var r = this.features.slice(e, e + this.length);
                this.layer.removeFeatures(this.layer.features), this.num = n, t && t.features ? t.features = r : this.layer.addFeatures(r), 
                this.paging = !1, i = !0;
            }
        }
        return i;
    },
    "CLASS_NAME": "OpenLayers.Strategy.Paging"
}), OpenLayers.Strategy.Refresh = OpenLayers.Class(OpenLayers.Strategy, {
    "force": !1,
    "interval": 0,
    "timer": null,
    "activate": function() {
        var e = OpenLayers.Strategy.prototype.activate.call(this);
        return e && (!0 === this.layer.visibility && this.start(), this.layer.events.on({
            "visibilitychanged": this.reset,
            "scope": this
        })), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Strategy.prototype.deactivate.call(this);
        return e && (this.stop(), this.layer.events.un({
            "visibilitychanged": this.reset,
            "scope": this
        })), e;
    },
    "reset": function() {
        !0 === this.layer.visibility ? this.start() : this.stop();
    },
    "start": function() {
        this.interval && "number" == typeof this.interval && this.interval > 0 && (this.timer = window.setInterval(OpenLayers.Function.bind(this.refresh, this), this.interval));
    },
    "refresh": function() {
        this.layer && this.layer.refresh && "function" == typeof this.layer.refresh && this.layer.refresh({
            "force": this.force
        });
    },
    "stop": function() {
        null !== this.timer && (window.clearInterval(this.timer), this.timer = null);
    },
    "CLASS_NAME": "OpenLayers.Strategy.Refresh"
}), OpenLayers.Strategy.Save = OpenLayers.Class(OpenLayers.Strategy, {
    "events": null,
    "auto": !1,
    "timer": null,
    "initialize": function(e) {
        OpenLayers.Strategy.prototype.initialize.apply(this, [ e ]), this.events = new OpenLayers.Events(this);
    },
    "activate": function() {
        var e = OpenLayers.Strategy.prototype.activate.call(this);
        return e && this.auto && ("number" == typeof this.auto ? this.timer = window.setInterval(OpenLayers.Function.bind(this.save, this), 1e3 * this.auto) : this.layer.events.on({
            "featureadded": this.triggerSave,
            "afterfeaturemodified": this.triggerSave,
            "scope": this
        })), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Strategy.prototype.deactivate.call(this);
        return e && this.auto && ("number" == typeof this.auto ? window.clearInterval(this.timer) : this.layer.events.un({
            "featureadded": this.triggerSave,
            "afterfeaturemodified": this.triggerSave,
            "scope": this
        })), e;
    },
    "triggerSave": function(e) {
        var t = e.feature;
        t.state !== OpenLayers.State.INSERT && t.state !== OpenLayers.State.UPDATE && t.state !== OpenLayers.State.DELETE || this.save([ e.feature ]);
    },
    "save": function(e) {
        e || (e = this.layer.features), this.events.triggerEvent("start", {
            "features": e
        });
        var t = this.layer.projection, i = this.layer.map.getProjectionObject();
        if (!i.equals(t)) {
            for (var n, r, s = e.length, a = new Array(s), o = 0; o < s; ++o) (r = (n = e[o]).clone()).fid = n.fid, 
            r.state = n.state, n.url && (r.url = n.url), r._original = n, r.geometry.transform(i, t), 
            a[o] = r;
            e = a;
        }
        this.layer.protocol.commit(e, {
            "callback": this.onCommit,
            "scope": this
        });
    },
    "onCommit": function(e) {
        var t = {
            "response": e
        };
        if (e.success()) {
            for (var i, n, r = e.reqFeatures, s = [], a = e.insertIds || [], o = 0, l = 0, h = r.length; l < h; ++l) (i = (n = (n = r[l])._original || n).state) && (i == OpenLayers.State.DELETE ? s.push(n) : i == OpenLayers.State.INSERT && (n.fid = a[o], 
            ++o), n.state = null);
            s.length > 0 && this.layer.destroyFeatures(s), this.events.triggerEvent("success", t);
        } else this.events.triggerEvent("fail", t);
    },
    "CLASS_NAME": "OpenLayers.Strategy.Save"
}), OpenLayers.Tile.Image.IFrame = {
    "useIFrame": null,
    "blankImageUrl": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAQAIBRAA7",
    "draw": function() {
        if (OpenLayers.Tile.Image.prototype.shouldDraw.call(this)) {
            var e = this.layer.getURL(this.bounds), t = this.useIFrame;
            this.useIFrame = null !== this.maxGetUrlLength && !this.layer.async && e.length > this.maxGetUrlLength;
            var i = t && !this.useIFrame, n = !t && this.useIFrame;
            (i || n) && (this.imgDiv && this.imgDiv.parentNode === this.frame && this.frame.removeChild(this.imgDiv), 
            this.imgDiv = null, i && this.frame.removeChild(this.frame.firstChild));
        }
        return OpenLayers.Tile.Image.prototype.draw.apply(this, arguments);
    },
    "getImage": function() {
        if (!0 === this.useIFrame) {
            if (!this.frame.childNodes.length) {
                var e = document.createElement("div"), t = e.style;
                t.position = "absolute", t.width = "100%", t.height = "100%", t.zIndex = 1, t.backgroundImage = "url(" + this.blankImageUrl + ")", 
                this.frame.appendChild(e);
            }
            var i, n = this.id + "_iFrame";
            parseFloat(navigator.appVersion.split("MSIE")[1]) < 9 ? ((i = document.createElement('<iframe name="' + n + '">')).style.backgroundColor = "#FFFFFF", 
            i.style.filter = "chroma(color=#FFFFFF)") : ((i = document.createElement("iframe")).style.backgroundColor = "transparent", 
            i.name = n), i.scrolling = "no", i.marginWidth = "0px", i.marginHeight = "0px", 
            i.frameBorder = "0", i.style.position = "absolute";
            var r = 0, s = 0;
            return this.layer.gutter && (r = this.layer.gutter / this.layer.tileSize.w * 100, 
            s = this.layer.gutter / this.layer.tileSize.h * 100), i.style.left = -r + "%", i.style.top = -s + "%", 
            i.style.width = 2 * r + 100 + "%", i.style.height = 2 * s + 100 + "%", this.layer.opacity < 1 && OpenLayers.Util.modifyDOMElement(i, null, null, null, null, null, null, this.layer.opacity), 
            this.frame.appendChild(i), this.imgDiv = i, i;
        }
        return OpenLayers.Tile.Image.prototype.getImage.apply(this, arguments);
    },
    "createRequestForm": function() {
        var e = document.createElement("form");
        e.method = "POST";
        var t = this.layer.params._OLSALT;
        t = (t ? t + "_" : "") + this.bounds.toBBOX(), e.action = OpenLayers.Util.urlAppend(this.layer.url, t), 
        e.target = this.id + "_iFrame";
        this.layer.getImageSize(this.bounds);
        var i, n = OpenLayers.Util.getParameters(this.url);
        for (var r in n) (i = document.createElement("input")).type = "hidden", i.name = r, 
        i.value = n[r], e.appendChild(i);
        return e;
    },
    "setImgSrc": function(e) {
        if (!0 === this.useIFrame) if (e) {
            var t = this.createRequestForm();
            this.frame.appendChild(t), t.submit(), this.frame.removeChild(t);
        } else this.imgDiv.parentNode === this.frame && (this.frame.removeChild(this.imgDiv), 
        this.imgDiv = null); else OpenLayers.Tile.Image.prototype.setImgSrc.apply(this, arguments);
    },
    "onImageLoad": function() {
        OpenLayers.Tile.Image.prototype.onImageLoad.apply(this, arguments), !0 === this.useIFrame && (this.imgDiv.style.opacity = 1, 
        this.frame.style.opacity = this.layer.opacity);
    },
    "createBackBuffer": function() {
        var e;
        return !1 === this.useIFrame && (e = OpenLayers.Tile.Image.prototype.createBackBuffer.call(this)), 
        e;
    }
}, OpenLayers.Console.warn("OpenLayers.Rico is deprecated"), OpenLayers.Rico = OpenLayers.Rico || {}, 
OpenLayers.Rico.Color = OpenLayers.Class({
    "initialize": function(e, t, i) {
        this.rgb = {
            "r": e,
            "g": t,
            "b": i
        };
    },
    "setRed": function(e) {
        this.rgb.r = e;
    },
    "setGreen": function(e) {
        this.rgb.g = e;
    },
    "setBlue": function(e) {
        this.rgb.b = e;
    },
    "setHue": function(e) {
        var t = this.asHSB();
        t.h = e, this.rgb = OpenLayers.Rico.Color.HSBtoRGB(t.h, t.s, t.b);
    },
    "setSaturation": function(e) {
        var t = this.asHSB();
        t.s = e, this.rgb = OpenLayers.Rico.Color.HSBtoRGB(t.h, t.s, t.b);
    },
    "setBrightness": function(e) {
        var t = this.asHSB();
        t.b = e, this.rgb = OpenLayers.Rico.Color.HSBtoRGB(t.h, t.s, t.b);
    },
    "darken": function(e) {
        var t = this.asHSB();
        this.rgb = OpenLayers.Rico.Color.HSBtoRGB(t.h, t.s, Math.max(t.b - e, 0));
    },
    "brighten": function(e) {
        var t = this.asHSB();
        this.rgb = OpenLayers.Rico.Color.HSBtoRGB(t.h, t.s, Math.min(t.b + e, 1));
    },
    "blend": function(e) {
        this.rgb.r = Math.floor((this.rgb.r + e.rgb.r) / 2), this.rgb.g = Math.floor((this.rgb.g + e.rgb.g) / 2), 
        this.rgb.b = Math.floor((this.rgb.b + e.rgb.b) / 2);
    },
    "isBright": function() {
        this.asHSB();
        return this.asHSB().b > .5;
    },
    "isDark": function() {
        return !this.isBright();
    },
    "asRGB": function() {
        return "rgb(" + this.rgb.r + "," + this.rgb.g + "," + this.rgb.b + ")";
    },
    "asHex": function() {
        return "#" + this.rgb.r.toColorPart() + this.rgb.g.toColorPart() + this.rgb.b.toColorPart();
    },
    "asHSB": function() {
        return OpenLayers.Rico.Color.RGBtoHSB(this.rgb.r, this.rgb.g, this.rgb.b);
    },
    "toString": function() {
        return this.asHex();
    }
}), OpenLayers.Rico.Color.createFromHex = function(e) {
    if (4 == e.length) for (var t = e, e = "#", i = 1; i < 4; i++) e += t.charAt(i) + t.charAt(i);
    0 == e.indexOf("#") && (e = e.substring(1));
    var n = e.substring(0, 2), r = e.substring(2, 4), s = e.substring(4, 6);
    return new OpenLayers.Rico.Color(parseInt(n, 16), parseInt(r, 16), parseInt(s, 16));
}, OpenLayers.Rico.Color.createColorFromBackground = function(e) {
    var t = OpenLayers.Element.getStyle(OpenLayers.Util.getElement(e), "backgroundColor");
    if ("transparent" == t && e.parentNode) return OpenLayers.Rico.Color.createColorFromBackground(e.parentNode);
    if (null == t) return new OpenLayers.Rico.Color(255, 255, 255);
    if (0 == t.indexOf("rgb(")) {
        var i = t.substring(4, t.length - 1).split(",");
        return new OpenLayers.Rico.Color(parseInt(i[0]), parseInt(i[1]), parseInt(i[2]));
    }
    return 0 == t.indexOf("#") ? OpenLayers.Rico.Color.createFromHex(t) : new OpenLayers.Rico.Color(255, 255, 255);
}, OpenLayers.Rico.Color.HSBtoRGB = function(e, t, i) {
    var n = 0, r = 0, s = 0;
    if (0 == t) r = n = parseInt(255 * i + .5), s = n; else {
        var a = 6 * (e - Math.floor(e)), o = a - Math.floor(a), l = i * (1 - t), h = i * (1 - t * o), u = i * (1 - t * (1 - o));
        switch (parseInt(a)) {
          case 0:
            n = 255 * i + .5, r = 255 * u + .5, s = 255 * l + .5;
            break;

          case 1:
            n = 255 * h + .5, r = 255 * i + .5, s = 255 * l + .5;
            break;

          case 2:
            n = 255 * l + .5, r = 255 * i + .5, s = 255 * u + .5;
            break;

          case 3:
            n = 255 * l + .5, r = 255 * h + .5, s = 255 * i + .5;
            break;

          case 4:
            n = 255 * u + .5, r = 255 * l + .5, s = 255 * i + .5;
            break;

          case 5:
            n = 255 * i + .5, r = 255 * l + .5, s = 255 * h + .5;
        }
    }
    return {
        "r": parseInt(n),
        "g": parseInt(r),
        "b": parseInt(s)
    };
}, OpenLayers.Rico.Color.RGBtoHSB = function(e, t, i) {
    var n, r, s, a = e > t ? e : t;
    i > a && (a = i);
    var o = e < t ? e : t;
    if (i < o && (o = i), s = a / 255, 0 == (r = 0 != a ? (a - o) / a : 0)) n = 0; else {
        var l = (a - e) / (a - o), h = (a - t) / (a - o), u = (a - i) / (a - o);
        n = e == a ? u - h : t == a ? 2 + l - u : 4 + h - l, (n /= 6) < 0 && (n += 1);
    }
    return {
        "h": n,
        "s": r,
        "b": s
    };
}, OpenLayers.Console.warn("OpenLayers.Rico is deprecated"), OpenLayers.Rico = OpenLayers.Rico || {}, 
OpenLayers.Rico.Corner = {
    "round": function(e, t) {
        e = OpenLayers.Util.getElement(e), this._setOptions(t);
        var i = this.options.color;
        "fromElement" == this.options.color && (i = this._background(e));
        var n = this.options.bgColor;
        "fromParent" == this.options.bgColor && (n = this._background(e.offsetParent)), 
        this._roundCornersImpl(e, i, n);
    },
    "changeColor": function(e, t) {
        e.style.backgroundColor = t;
        for (var i = e.parentNode.getElementsByTagName("span"), n = 0; n < i.length; n++) i[n].style.backgroundColor = t;
    },
    "changeOpacity": function(e, t) {
        var i = t, n = "alpha(opacity=" + 100 * t + ")";
        e.style.opacity = i, e.style.filter = n;
        for (var r = e.parentNode.getElementsByTagName("span"), s = 0; s < r.length; s++) r[s].style.opacity = i, 
        r[s].style.filter = n;
    },
    "reRound": function(e, t) {
        var i = e.parentNode.childNodes[0], n = e.parentNode.childNodes[2];
        e.parentNode.removeChild(i), e.parentNode.removeChild(n), this.round(e.parentNode, t);
    },
    "_roundCornersImpl": function(e, t, i) {
        this.options.border && this._renderBorder(e, i), this._isTopRounded() && this._roundTopCorners(e, t, i), 
        this._isBottomRounded() && this._roundBottomCorners(e, t, i);
    },
    "_renderBorder": function(e, t) {
        var i = "1px solid " + this._borderColor(t), n = "style='" + ("border-left: " + i) + ";" + ("border-right: " + i) + "'";
        e.innerHTML = "<div " + n + ">" + e.innerHTML + "</div>";
    },
    "_roundTopCorners": function(e, t, i) {
        for (var n = this._createCorner(i), r = 0; r < this.options.numSlices; r++) n.appendChild(this._createCornerSlice(t, i, r, "top"));
        e.style.paddingTop = 0, e.insertBefore(n, e.firstChild);
    },
    "_roundBottomCorners": function(e, t, i) {
        for (var n = this._createCorner(i), r = this.options.numSlices - 1; r >= 0; r--) n.appendChild(this._createCornerSlice(t, i, r, "bottom"));
        e.style.paddingBottom = 0, e.appendChild(n);
    },
    "_createCorner": function(e) {
        var t = document.createElement("div");
        return t.style.backgroundColor = this._isTransparent() ? "transparent" : e, t;
    },
    "_createCornerSlice": function(e, t, i, n) {
        var r = document.createElement("span"), s = r.style;
        s.backgroundColor = e, s.display = "block", s.height = "1px", s.overflow = "hidden", 
        s.fontSize = "1px";
        var a = this._borderColor(e, t);
        return this.options.border && 0 == i ? (s.borderTopStyle = "solid", s.borderTopWidth = "1px", 
        s.borderLeftWidth = "0px", s.borderRightWidth = "0px", s.borderBottomWidth = "0px", 
        s.height = "0px", s.borderColor = a) : a && (s.borderColor = a, s.borderStyle = "solid", 
        s.borderWidth = "0px 1px"), this.options.compact || i != this.options.numSlices - 1 || (s.height = "2px"), 
        this._setMargin(r, i, n), this._setBorder(r, i, n), r;
    },
    "_setOptions": function(e) {
        this.options = {
            "corners": "all",
            "color": "fromElement",
            "bgColor": "fromParent",
            "blend": !0,
            "border": !1,
            "compact": !1
        }, OpenLayers.Util.extend(this.options, e || {}), this.options.numSlices = this.options.compact ? 2 : 4, 
        this._isTransparent() && (this.options.blend = !1);
    },
    "_whichSideTop": function() {
        return this._hasString(this.options.corners, "all", "top") ? "" : this.options.corners.indexOf("tl") >= 0 && this.options.corners.indexOf("tr") >= 0 ? "" : this.options.corners.indexOf("tl") >= 0 ? "left" : this.options.corners.indexOf("tr") >= 0 ? "right" : "";
    },
    "_whichSideBottom": function() {
        return this._hasString(this.options.corners, "all", "bottom") ? "" : this.options.corners.indexOf("bl") >= 0 && this.options.corners.indexOf("br") >= 0 ? "" : this.options.corners.indexOf("bl") >= 0 ? "left" : this.options.corners.indexOf("br") >= 0 ? "right" : "";
    },
    "_borderColor": function(e, t) {
        return "transparent" == e ? t : this.options.border ? this.options.border : this.options.blend ? this._blend(t, e) : "";
    },
    "_setMargin": function(e, t, i) {
        var n = this._marginSize(t), r = "top" == i ? this._whichSideTop() : this._whichSideBottom();
        "left" == r ? (e.style.marginLeft = n + "px", e.style.marginRight = "0px") : "right" == r ? (e.style.marginRight = n + "px", 
        e.style.marginLeft = "0px") : (e.style.marginLeft = n + "px", e.style.marginRight = n + "px");
    },
    "_setBorder": function(e, t, i) {
        var n = this._borderSize(t), r = "top" == i ? this._whichSideTop() : this._whichSideBottom();
        "left" == r ? (e.style.borderLeftWidth = n + "px", e.style.borderRightWidth = "0px") : "right" == r ? (e.style.borderRightWidth = n + "px", 
        e.style.borderLeftWidth = "0px") : (e.style.borderLeftWidth = n + "px", e.style.borderRightWidth = n + "px"), 
        0 != this.options.border && (e.style.borderLeftWidth = n + "px", e.style.borderRightWidth = n + "px");
    },
    "_marginSize": function(e) {
        if (this._isTransparent()) return 0;
        var t = [ 5, 3, 2, 1 ], i = [ 3, 2, 1, 0 ], n = [ 2, 1 ], r = [ 1, 0 ];
        return this.options.compact && this.options.blend ? r[e] : this.options.compact ? n[e] : this.options.blend ? i[e] : t[e];
    },
    "_borderSize": function(e) {
        var t = [ 5, 3, 2, 1 ], i = [ 2, 1, 1, 1 ], n = [ 1, 0 ], r = [ 0, 2, 0, 0 ];
        return this.options.compact && (this.options.blend || this._isTransparent()) ? 1 : this.options.compact ? n[e] : this.options.blend ? i[e] : this.options.border ? r[e] : this._isTransparent() ? t[e] : 0;
    },
    "_hasString": function(e) {
        for (var t = 1; t < arguments.length; t++) if (e.indexOf(arguments[t]) >= 0) return !0;
        return !1;
    },
    "_blend": function(e, t) {
        var i = OpenLayers.Rico.Color.createFromHex(e);
        return i.blend(OpenLayers.Rico.Color.createFromHex(t)), i;
    },
    "_background": function(e) {
        try {
            return OpenLayers.Rico.Color.createColorFromBackground(e).asHex();
        } catch (e) {
            return "#ffffff";
        }
    },
    "_isTransparent": function() {
        return "transparent" == this.options.color;
    },
    "_isTopRounded": function() {
        return this._hasString(this.options.corners, "all", "top", "tl", "tr");
    },
    "_isBottomRounded": function() {
        return this._hasString(this.options.corners, "all", "bottom", "bl", "br");
    },
    "_hasSingleTextChild": function(e) {
        return 1 == e.childNodes.length && 3 == e.childNodes[0].nodeType;
    }
}, OpenLayers.Handler.Geometry = OpenLayers.Class(OpenLayers.Handler.Drag, {
    "layerOptions": null,
    "geometry": null,
    "feature": null,
    "angle": 0,
    "width": null,
    "layer": null,
    "origin": null,
    "wkt": null,
    "initialize": function(e, t, i) {
        i && i.layerOptions && i.layerOptions.styleMap || (this.style = OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default, {})), 
        OpenLayers.Handler.Drag.prototype.initialize.apply(this, [ e, t, i ]), this.options = i || {};
    },
    "setOptions": function(e) {
        OpenLayers.Util.extend(this.options, e), OpenLayers.Util.extend(this, e);
    },
    "setGeometry": function(e) {
        this.geometry = e;
    },
    "activate": function() {
        var e = !1;
        return OpenLayers.Handler.Drag.prototype.activate.apply(this, arguments) && (this.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, OpenLayers.Util.extend({
            "displayInLayerSwitcher": !1,
            "calculateInRange": OpenLayers.Function.True
        }, this.layerOptions)), this.map.addLayer(this.layer), e = !0), e;
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Handler.Drag.prototype.deactivate.apply(this, arguments) && (null !== this.layer.map && (this.layer.destroy(!1), 
        this.feature && this.feature.destroy()), this.layer = null, this.feature = null, 
        e = !0), e;
    },
    "down": function(e) {
        if (this.geometry) {
            this.clear(), this.dragGeometry = this.geometry.clone();
            var t = this.layer.getLonLatFromViewPortPx(e.xy);
            this.origin = new OpenLayers.Geometry.Point(t.lon, t.lat), this.radius = this.measureWidth(), 
            this.feature = new OpenLayers.Feature.Vector(), this.feature.geometry = this.dragGeometry, 
            this.layer.addFeatures([ this.feature ], {
                "silent": !0
            });
            var i = t.lon - this.dragGeometry.bounds.left, n = t.lat - this.dragGeometry.bounds.bottom;
            this.dragGeometry.move(i, n), this.callback("create", [ this.origin, this.feature ]);
        }
    },
    "move": function(e) {
        if (this.geometry) {
            var t = this.layer.getLonLatFromViewPortPx(e.xy), i = new OpenLayers.Geometry.Point(t.lon, t.lat), n = this.angle;
            this.angle = this.calculateAngle(i, e), this.dragGeometry.rotate(this.angle - n, this.origin);
            var r = this.radius;
            this.radius = i.distanceTo(this.origin), this.dragGeometry.resize(this.radius / r, this.origin), 
            this.layer.drawFeature(this.feature, this.style);
        }
    },
    "calculateAngle": function(e, t) {
        return Math.atan2(e.y - this.origin.y, e.x - this.origin.x) * (180 / Math.PI);
    },
    "measureWidth": function() {
        return this.dragGeometry.calculateBounds(), Math.abs(this.dragGeometry.bounds.right - this.dragGeometry.bounds.left);
    },
    "up": function(e) {
        this.finalize();
    },
    "out": function(e) {
        this.finalize();
    },
    "cancel": function() {
        this.callback("cancel", null), this.finalize();
    },
    "finalize": function() {
        this.origin = null, this.angle = 0;
    },
    "clear": function() {
        this.layer && (this.layer.renderer.clear(), this.layer.destroyFeatures());
    },
    "callback": function(e, t) {
        this.geometry && ("done" != e && "cancel" != e || this.clear(), this.callbacks[e] && this.callbacks[e].apply(this.control, [ this.dragGeometry.clone() ]));
    },
    "CLASS_NAME": "OpenLayers.Handler.Geometry"
}), function(e) {
    function t(e, t, n) {
        for (var r = i(e), o = 0; o < t.length; o++) {
            var l = [ e, t[o] ].join("-");
            a[l] = s(l, n || r.type, r.minZoom, r.maxZoom);
        }
    }
    function i(e) {
        if (e in a) return a[e];
        throw "No such provider (" + e + ")";
    }
    function n(e) {
        return e.replace(/({.})/g, function(e) {
            return "$" + e.toLowerCase();
        });
    }
    var r = " a. b. c. d.".split(" "), s = function(e, t, i, n) {
        return {
            "url": [ "http://{S}tile.stamen.com/", e, "/{Z}/{X}/{Y}.", t ].join(""),
            "type": t,
            "subdomains": r.slice(),
            "minZoom": i,
            "maxZoom": n,
            "attribution": o
        };
    }, a = {
        "toner": s("toner", "png", 0, 20),
        "terrain": s("terrain", "jpg", 4, 18),
        "watercolor": s("watercolor", "jpg", 1, 16),
        "trees-cabs-crime": {
            "url": "http://{S}.tiles.mapbox.com/v3/stamen.trees-cabs-crime/{Z}/{X}/{Y}.png",
            "type": "png",
            "subdomains": "a b c d".split(" "),
            "minZoom": 11,
            "maxZoom": 18,
            "extent": [ {
                "lat": 37.853,
                "lon": -122.577
            }, {
                "lat": 37.684,
                "lon": -122.313
            } ],
            "attribution": [ 'Design by Shawn Allen at <a href="http://stamen.com">Stamen</a>.', 'Data courtesy of <a href="http://fuf.net">FuF</a>,', '<a href="http://www.yellowcabsf.com">Yellow Cab</a>', '&amp; <a href="http://sf-police.org">SFPD</a>.' ].join(" ")
        }
    }, o = [ 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, ', 'under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. ', 'Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, ', 'under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.' ].join("");
    t("toner", [ "hybrid", "labels", "lines", "background", "lite" ]), t("toner", [ "2010" ]), 
    t("toner", [ "2011", "2011-lines", "2011-labels", "2011-lite" ]), t("terrain", [ "background" ]), 
    t("terrain", [ "labels", "lines" ], "png"), e.stamen = e.stamen || {}, e.stamen.tile = e.stamen.tile || {}, 
    e.stamen.tile.providers = a, e.stamen.tile.getProvider = i, "object" == typeof OpenLayers && (OpenLayers.Layer.Stamen = OpenLayers.Class(OpenLayers.Layer.OSM, {
        "initialize": function(e, t) {
            var r = i(e), s = r.url, a = r.subdomains, o = [];
            if (s.indexOf("{S}") > -1) for (var l = 0; l < a.length; l++) o.push(n(s.replace("{S}", a[l]))); else o.push(n(s));
            return t = OpenLayers.Util.extend({
                "numZoomLevels": r.maxZoom,
                "buffer": 0,
                "transitionEffect": "resize",
                "tileOptions": {
                    "crossOriginKeyword": null
                }
            }, t), OpenLayers.Layer.OSM.prototype.initialize.call(this, e, o, t);
        }
    }));
}("undefined" == typeof exports ? this : exports), function() {
    var e, t, i, n, r = [].indexOf || function(e) {
        for (var t = 0, i = this.length; t < i; t++) if (t in this && this[t] === e) return t;
        return -1;
    }, s = function(e, t) {
        return function() {
            return e.apply(t, arguments);
        };
    }, a = [].slice, o = {}.hasOwnProperty, l = function(e, t) {
        function i() {
            this.constructor = e;
        }
        for (var n in t) o.call(t, n) && (e[n] = t[n]);
        return i.prototype = t.prototype, e.prototype = new i(), e.__super__ = t.prototype, 
        e;
    };
    e = {
        "binders": {},
        "components": {},
        "formatters": {},
        "adapters": {},
        "config": {
            "prefix": "rv",
            "templateDelimiters": [ "{", "}" ],
            "rootInterface": ".",
            "preloadData": !0,
            "handler": function(e, t, i) {
                return this.call(e, t, i.view.models);
            }
        }
    }, "jQuery" in window ? (n = "on" in jQuery.prototype ? [ "on", "off" ] : [ "bind", "unbind" ], 
    t = n[0], i = n[1], e.Util = {
        "bindEvent": function(e, i, n) {
            return jQuery(e)[t](i, n);
        },
        "unbindEvent": function(e, t, n) {
            return jQuery(e)[i](t, n);
        },
        "getInputValue": function(e) {
            var t;
            return "checkbox" === (t = jQuery(e)).attr("type") ? t.is(":checked") : t.val();
        }
    }) : e.Util = {
        "bindEvent": "addEventListener" in window ? function(e, t, i) {
            return e.addEventListener(t, i, !1);
        } : function(e, t, i) {
            return e.attachEvent("on" + t, i);
        },
        "unbindEvent": "removeEventListener" in window ? function(e, t, i) {
            return e.removeEventListener(t, i, !1);
        } : function(e, t, i) {
            return e.detachEvent("on" + t, i);
        },
        "getInputValue": function(e) {
            var t, i, n, r;
            if ("checkbox" === e.type) return e.checked;
            if ("select-multiple" === e.type) {
                for (r = [], i = 0, n = e.length; i < n; i++) (t = e[i]).selected && r.push(t.value);
                return r;
            }
            return e.value;
        }
    }, e.KeypathParser = function() {
        function e() {}
        return e.parse = function(e, t, i) {
            var n, s, a, o, l, h;
            for (o = [], s = {
                "interface": i,
                "path": ""
            }, a = l = 0, h = e.length; l < h; a = l += 1) n = e.charAt(a), r.call(t, n) >= 0 ? (o.push(s), 
            s = {
                "interface": n,
                "path": ""
            }) : s.path += n;
            return o.push(s), o;
        }, e;
    }(), e.TextTemplateParser = function() {
        function e() {}
        return e.types = {
            "text": 0,
            "binding": 1
        }, e.parse = function(e, t) {
            var i, n, r, s, a, o, l;
            for (o = [], s = e.length, i = 0, n = 0; n < s; ) {
                if ((i = e.indexOf(t[0], n)) < 0) {
                    o.push({
                        "type": this.types.text,
                        "value": e.slice(n)
                    });
                    break;
                }
                if (i > 0 && n < i && o.push({
                    "type": this.types.text,
                    "value": e.slice(n, i)
                }), n = i + t[0].length, (i = e.indexOf(t[1], n)) < 0) {
                    a = e.slice(n - t[1].length), (null != (r = o[o.length - 1]) ? r.type : void 0) === this.types.text ? r.value += a : o.push({
                        "type": this.types.text,
                        "value": a
                    });
                    break;
                }
                l = e.slice(n, i).trim(), o.push({
                    "type": this.types.binding,
                    "value": l
                }), n = i + t[1].length;
            }
            return o;
        }, e;
    }(), e.Observer = function() {
        function t(e, t, i, n) {
            this.view = e, this.model = t, this.keypath = i, this.callback = n, this.unobserve = s(this.unobserve, this), 
            this.realize = s(this.realize, this), this.value = s(this.value, this), this.publish = s(this.publish, this), 
            this.read = s(this.read, this), this.set = s(this.set, this), this.adapter = s(this.adapter, this), 
            this.update = s(this.update, this), this.initialize = s(this.initialize, this), 
            this.parse = s(this.parse, this), this.parse(), this.initialize();
        }
        return t.prototype.parse = function() {
            var t, i, n, s, a, o;
            return t = function() {
                var e, t;
                e = this.view.adapters, t = [];
                for (i in e) (a = e[i]) && t.push(i);
                return t;
            }.call(this), o = this.keypath[0], r.call(t, o) >= 0 ? (s = this.keypath[0], n = this.keypath.substr(1)) : (s = this.view.config.rootInterface, 
            n = this.keypath), this.tokens = e.KeypathParser.parse(n, t, s), this.key = this.tokens.pop();
        }, t.prototype.initialize = function() {
            if (this.objectPath = [], this.target = this.realize(), null != this.target) return this.set(!0, this.key, this.target, this.callback);
        }, t.prototype.update = function() {
            var e, t;
            if ((e = this.realize()) !== this.target && (null != this.target && this.set(!1, this.key, this.target, this.callback), 
            null != e && this.set(!0, this.key, e, this.callback), t = this.value(), this.target = e, 
            this.value() !== t)) return this.callback();
        }, t.prototype.adapter = function(e) {
            return this.view.adapters[e.interface];
        }, t.prototype.set = function(e, t, i, n) {
            var r;
            return r = e ? "subscribe" : "unsubscribe", this.adapter(t)[r](i, t.path, n);
        }, t.prototype.read = function(e, t) {
            return this.adapter(e).read(t, e.path);
        }, t.prototype.publish = function(e) {
            if (null != this.target) return this.adapter(this.key).publish(this.target, this.key.path, e);
        }, t.prototype.value = function() {
            if (null != this.target) return this.read(this.key, this.target);
        }, t.prototype.realize = function() {
            var e, t, i, n, r, s, a, o;
            for (e = this.model, r = null, t = s = 0, a = (o = this.tokens).length; s < a; t = ++s) n = o[t], 
            null != e ? (null != this.objectPath[t] ? e !== (i = this.objectPath[t]) && (this.set(!1, n, i, this.update), 
            this.set(!0, n, e, this.update), this.objectPath[t] = e) : (this.set(!0, n, e, this.update), 
            this.objectPath[t] = e), e = this.read(n, e)) : (null == r && (r = t), (i = this.objectPath[t]) && this.set(!1, n, i, this.update));
            return null != r && this.objectPath.splice(r), e;
        }, t.prototype.unobserve = function() {
            var e, t, i, n, r, s;
            for (e = n = 0, r = (s = this.tokens).length; n < r; e = ++n) i = s[e], (t = this.objectPath[e]) && this.set(!1, i, t, this.update);
            if (null != this.target) return this.set(!1, this.key, this.target, this.callback);
        }, t;
    }(), e.View = function() {
        function t(t, i, n) {
            var r, a, o, l, h, u, p, c, d;
            for (this.els = t, this.models = i, this.options = null != n ? n : {}, this.update = s(this.update, this), 
            this.publish = s(this.publish, this), this.sync = s(this.sync, this), this.unbind = s(this.unbind, this), 
            this.bind = s(this.bind, this), this.select = s(this.select, this), this.build = s(this.build, this), 
            this.componentRegExp = s(this.componentRegExp, this), this.bindingRegExp = s(this.bindingRegExp, this), 
            this.els.jquery || this.els instanceof Array || (this.els = [ this.els ]), h = 0, 
            u = (p = [ "config", "binders", "formatters", "adapters" ]).length; h < u; h++) {
                if (a = p[h], this[a] = {}, this.options[a]) {
                    c = this.options[a];
                    for (r in c) o = c[r], this[a][r] = o;
                }
                d = e[a];
                for (r in d) o = d[r], null == (l = this[a])[r] && (l[r] = o);
            }
            this.build();
        }
        return t.prototype.bindingRegExp = function() {
            return new RegExp("^" + this.config.prefix + "-");
        }, t.prototype.componentRegExp = function() {
            return new RegExp("^" + this.config.prefix.toUpperCase() + "-");
        }, t.prototype.build = function() {
            var t, i, n, s, a, o, l, h, u;
            for (this.bindings = [], o = [], t = this.bindingRegExp(), n = this.componentRegExp(), 
            i = function(t) {
                return function(i, n, r, s) {
                    var a, o, l, h, u, p, c;
                    return u = {}, c = function() {
                        var e, t, i, n;
                        for (n = [], e = 0, t = (i = s.split("|")).length; e < t; e++) p = i[e], n.push(p.trim());
                        return n;
                    }(), a = function() {
                        var e, t, i, n;
                        for (n = [], e = 0, t = (i = c.shift().split("<")).length; e < t; e++) o = i[e], 
                        n.push(o.trim());
                        return n;
                    }(), h = a.shift(), u.formatters = c, (l = a.shift()) && (u.dependencies = l.split(/\s+/)), 
                    t.bindings.push(new e[i](t, n, r, h, u));
                };
            }(this), a = function(s) {
                return function(l) {
                    var h, u, p, c, d, f, y, m, g, v, L, O, b, w, C, S, x, _, E, N, P, T, M, F, A, k, I, R, D;
                    if (r.call(o, l) < 0) {
                        if (3 === l.nodeType) {
                            if (m = e.TextTemplateParser, (d = s.config.templateDelimiters) && (L = m.parse(l.data, d)).length && (1 !== L.length || L[0].type !== m.types.text)) {
                                for (w = 0, _ = L.length; w < _; w++) v = L[w], g = document.createTextNode(v.value), 
                                l.parentNode.insertBefore(g, l), 1 === v.type && i("TextBinding", g, null, v.value);
                                l.parentNode.removeChild(l);
                            }
                        } else if (n.test(l.tagName)) O = l.tagName.replace(n, "").toLowerCase(), s.bindings.push(new e.ComponentBinding(s, l, O)); else if (null != l.attributes) {
                            for (C = 0, E = (F = l.attributes).length; C < E; C++) if (h = F[C], t.test(h.name)) {
                                if (O = h.name.replace(t, ""), !(p = s.binders[O])) {
                                    A = s.binders;
                                    for (f in A) b = A[f], "*" !== f && -1 !== f.indexOf("*") && new RegExp("^" + f.replace("*", ".+") + "$").test(O) && (p = b);
                                }
                                if (p || (p = s.binders["*"]), p.block) {
                                    for (S = 0, N = (k = l.childNodes).length; S < N; S++) y = k[S], o.push(y);
                                    u = [ h ];
                                }
                            }
                            for (x = 0, P = (I = u || l.attributes).length; x < P; x++) h = I[x], t.test(h.name) && (O = h.name.replace(t, ""), 
                            i("Binding", l, O, h.value));
                        }
                        for (R = function() {
                            var e, t, i, n;
                            for (n = [], t = 0, e = (i = l.childNodes).length; t < e; t++) y = i[t], n.push(y);
                            return n;
                        }(), D = [], M = 0, T = R.length; M < T; M++) c = R[M], D.push(a(c));
                        return D;
                    }
                };
            }(this), l = 0, h = (u = this.els).length; l < h; l++) s = u[l], a(s);
        }, t.prototype.select = function(e) {
            var t, i, n, r, s;
            for (s = [], i = 0, n = (r = this.bindings).length; i < n; i++) e(t = r[i]) && s.push(t);
            return s;
        }, t.prototype.bind = function() {
            var e, t, i, n, r;
            for (r = [], t = 0, i = (n = this.bindings).length; t < i; t++) e = n[t], r.push(e.bind());
            return r;
        }, t.prototype.unbind = function() {
            var e, t, i, n, r;
            for (r = [], t = 0, i = (n = this.bindings).length; t < i; t++) e = n[t], r.push(e.unbind());
            return r;
        }, t.prototype.sync = function() {
            var e, t, i, n, r;
            for (r = [], t = 0, i = (n = this.bindings).length; t < i; t++) e = n[t], r.push(e.sync());
            return r;
        }, t.prototype.publish = function() {
            var e, t, i, n, r;
            for (r = [], t = 0, i = (n = this.select(function(e) {
                return e.binder.publishes;
            })).length; t < i; t++) e = n[t], r.push(e.publish());
            return r;
        }, t.prototype.update = function(e) {
            var t, i, n, r, s, a, o;
            null == e && (e = {});
            for (i in e) n = e[i], this.models[i] = n;
            for (o = [], r = 0, s = (a = this.bindings).length; r < s; r++) t = a[r], o.push(t.update(e));
            return o;
        }, t;
    }(), e.Binding = function() {
        function t(e, t, i, n, r) {
            this.view = e, this.el = t, this.type = i, this.keypath = n, this.options = null != r ? r : {}, 
            this.update = s(this.update, this), this.unbind = s(this.unbind, this), this.bind = s(this.bind, this), 
            this.publish = s(this.publish, this), this.sync = s(this.sync, this), this.set = s(this.set, this), 
            this.eventHandler = s(this.eventHandler, this), this.formattedValue = s(this.formattedValue, this), 
            this.setBinder = s(this.setBinder, this), this.formatters = this.options.formatters || [], 
            this.dependencies = [], this.model = void 0, this.setBinder();
        }
        return t.prototype.setBinder = function() {
            var e, t, i;
            if (!(this.binder = this.view.binders[this.type])) {
                i = this.view.binders;
                for (e in i) t = i[e], "*" !== e && -1 !== e.indexOf("*") && new RegExp("^" + e.replace("*", ".+") + "$").test(this.type) && (this.binder = t, 
                this.args = new RegExp("^" + e.replace("*", "(.+)") + "$").exec(this.type), this.args.shift());
            }
            if (this.binder || (this.binder = this.view.binders["*"]), this.binder instanceof Function) return this.binder = {
                "routine": this.binder
            };
        }, t.prototype.formattedValue = function(e) {
            var t, i, n, r, s, o;
            for (r = 0, s = (o = this.formatters).length; r < s; r++) n = (t = (i = o[r]).split(/\s+/)).shift(), 
            (null != (i = this.view.formatters[n]) ? i.read : void 0) instanceof Function ? e = i.read.apply(i, [ e ].concat(a.call(t))) : i instanceof Function && (e = i.apply(null, [ e ].concat(a.call(t))));
            return e;
        }, t.prototype.eventHandler = function(e) {
            var t, i;
            return i = (t = this).view.config.handler, function(n) {
                return i.call(e, this, n, t);
            };
        }, t.prototype.set = function(e) {
            var t;
            return e = e instanceof Function && !this.binder.function ? this.formattedValue(e.call(this.model)) : this.formattedValue(e), 
            null != (t = this.binder.routine) ? t.call(this, this.el, e) : void 0;
        }, t.prototype.sync = function() {
            var t, i, n, r, s, a, o, l, h;
            if (this.model !== this.observer.target) {
                for (n = 0, s = (o = this.dependencies).length; n < s; n++) (i = o[n]).unobserve();
                if (this.dependencies = [], null != (this.model = this.observer.target) && (null != (l = this.options.dependencies) ? l.length : void 0)) for (r = 0, 
                a = (h = this.options.dependencies).length; r < a; r++) t = h[r], i = new e.Observer(this.view, this.model, t, this.sync), 
                this.dependencies.push(i);
            }
            return this.set(this.observer.value());
        }, t.prototype.publish = function() {
            var t, i, n, r, s, o, l, h;
            for (n = e.Util.getInputValue(this.el), r = 0, s = (o = this.formatters.slice(0).reverse()).length; r < s; r++) i = (t = o[r].split(/\s+/)).shift(), 
            (null != (l = this.view.formatters[i]) ? l.publish : void 0) && (n = (h = this.view.formatters[i]).publish.apply(h, [ n ].concat(a.call(t))));
            return this.observer.publish(n);
        }, t.prototype.bind = function() {
            var t, i, n, r, s, a, o;
            if (null != (s = this.binder.bind) && s.call(this, this.el), this.observer = new e.Observer(this.view, this.view.models, this.keypath, this.sync), 
            this.model = this.observer.target, null != this.model && (null != (a = this.options.dependencies) ? a.length : void 0)) for (n = 0, 
            r = (o = this.options.dependencies).length; n < r; n++) t = o[n], i = new e.Observer(this.view, this.model, t, this.sync), 
            this.dependencies.push(i);
            if (this.view.config.preloadData) return this.sync();
        }, t.prototype.unbind = function() {
            var e, t, i, n;
            for (null != (i = this.binder.unbind) && i.call(this, this.el), this.observer.unobserve(), 
            e = 0, t = (n = this.dependencies).length; e < t; e++) n[e].unobserve();
            return this.dependencies = [];
        }, t.prototype.update = function(e) {
            var t;
            return null == e && (e = {}), this.model = this.observer.target, this.unbind(), 
            null != (t = this.binder.update) && t.call(this, e), this.bind();
        }, t;
    }(), e.ComponentBinding = function(t) {
        function i(t, i, n) {
            var a, o, l, h, u;
            for (this.view = t, this.el = i, this.type = n, this.unbind = s(this.unbind, this), 
            this.bind = s(this.bind, this), this.update = s(this.update, this), this.locals = s(this.locals, this), 
            this.component = e.components[this.type], this.attributes = {}, this.inflections = {}, 
            o = 0, l = (h = this.el.attributes || []).length; o < l; o++) u = (a = h[o]).name, 
            r.call(this.component.attributes, u) >= 0 ? this.attributes[a.name] = a.value : this.inflections[a.name] = a.value;
        }
        return l(i, t), i.prototype.sync = function() {}, i.prototype.locals = function(e) {
            var t, i, n, r, s, a, o, l;
            null == e && (e = this.view.models), r = {}, o = this.inflections;
            for (t in o) for (s = 0, a = (l = o[t].split(".")).length; s < a; s++) n = l[s], 
            r[t] = (r[t] || e)[n];
            for (t in e) i = e[t], null == r[t] && (r[t] = i);
            return r;
        }, i.prototype.update = function(e) {
            var t;
            return null != (t = this.componentView) ? t.update(this.locals(e)) : void 0;
        }, i.prototype.bind = function() {
            var t, i;
            return null != this.componentView ? null != (i = this.componentView) ? i.bind() : void 0 : (t = this.component.build.call(this.attributes), 
            (this.componentView = new e.View(t, this.locals(), this.view.options)).bind(), this.el.parentNode.replaceChild(t, this.el));
        }, i.prototype.unbind = function() {
            var e;
            return null != (e = this.componentView) ? e.unbind() : void 0;
        }, i;
    }(e.Binding), e.TextBinding = function(e) {
        function t(e, t, i, n, r) {
            this.view = e, this.el = t, this.type = i, this.keypath = n, this.options = null != r ? r : {}, 
            this.sync = s(this.sync, this), this.formatters = this.options.formatters || [], 
            this.dependencies = [];
        }
        return l(t, e), t.prototype.binder = {
            "routine": function(e, t) {
                return e.data = null != t ? t : "";
            }
        }, t.prototype.sync = function() {
            return t.__super__.sync.apply(this, arguments);
        }, t;
    }(e.Binding), e.adapters["."] = {
        "id": "_rv",
        "counter": 0,
        "weakmap": {},
        "weakReference": function(e) {
            var t;
            return e.hasOwnProperty(this.id) || (t = this.counter++, this.weakmap[t] = {
                "callbacks": {}
            }, Object.defineProperty(e, this.id, {
                "value": t
            })), this.weakmap[e[this.id]];
        },
        "stubFunction": function(e, t) {
            var i, n, r;
            return n = e[t], i = this.weakReference(e), r = this.weakmap, e[t] = function() {
                var t, s, a, o, l, h, u, p, c;
                a = n.apply(e, arguments), h = i.pointers;
                for (s in h) for (t = h[s], o = 0, l = (c = null != (u = null != (p = r[s]) ? p.callbacks[t] : void 0) ? u : []).length; o < l; o++) (0, 
                c[o])();
                return a;
            };
        },
        "observeMutations": function(e, t, i) {
            var n, s, a, o, l, h;
            if (Array.isArray(e)) {
                if (null == (a = this.weakReference(e)).pointers) for (a.pointers = {}, l = 0, h = (s = [ "push", "pop", "shift", "unshift", "sort", "reverse", "splice" ]).length; l < h; l++) n = s[l], 
                this.stubFunction(e, n);
                if (null == (o = a.pointers)[t] && (o[t] = []), r.call(a.pointers[t], i) < 0) return a.pointers[t].push(i);
            }
        },
        "unobserveMutations": function(e, t, i) {
            var n, r, s;
            if (Array.isArray(e && null != e[this.id]) && (r = null != (s = this.weakReference(e).pointers) ? s[t] : void 0) && (n = r.indexOf(i)) >= 0) return r.splice(n, 1);
        },
        "subscribe": function(e, t, i) {
            var n, s;
            return null == (n = this.weakReference(e).callbacks)[t] && (n[t] = [], s = e[t], 
            Object.defineProperty(e, t, {
                "enumerable": !0,
                "get": function() {
                    return s;
                },
                "set": function(a) {
                    return function(o) {
                        var l, h, u;
                        if (o !== s) {
                            for (s = o, l = 0, h = (u = n[t].slice()).length; l < h; l++) i = u[l], r.call(n[t], i) >= 0 && i();
                            return a.observeMutations(o, e[a.id], t);
                        }
                    };
                }(this)
            })), r.call(n[t], i) < 0 && n[t].push(i), this.observeMutations(e[t], e[this.id], t);
        },
        "unsubscribe": function(e, t, i) {
            var n, r;
            return n = this.weakmap[e[this.id]].callbacks[t], (r = n.indexOf(i)) >= 0 && n.splice(r, 1), 
            this.unobserveMutations(e[t], e[this.id], t);
        },
        "read": function(e, t) {
            return e[t];
        },
        "publish": function(e, t, i) {
            return e[t] = i;
        }
    }, e.binders.text = function(e, t) {
        return null != e.textContent ? e.textContent = null != t ? t : "" : e.innerText = null != t ? t : "";
    }, e.binders.html = function(e, t) {
        return e.innerHTML = null != t ? t : "";
    }, e.binders.show = function(e, t) {
        return e.style.display = t ? "" : "none";
    }, e.binders.hide = function(e, t) {
        return e.style.display = t ? "none" : "";
    }, e.binders.enabled = function(e, t) {
        return e.disabled = !t;
    }, e.binders.disabled = function(e, t) {
        return e.disabled = !!t;
    }, e.binders.checked = {
        "publishes": !0,
        "bind": function(t) {
            return e.Util.bindEvent(t, "change", this.publish);
        },
        "unbind": function(t) {
            return e.Util.unbindEvent(t, "change", this.publish);
        },
        "routine": function(e, t) {
            var i;
            return "radio" === e.type ? e.checked = (null != (i = e.value) ? i.toString() : void 0) === (null != t ? t.toString() : void 0) : e.checked = !!t;
        }
    }, e.binders.unchecked = {
        "publishes": !0,
        "bind": function(t) {
            return e.Util.bindEvent(t, "change", this.publish);
        },
        "unbind": function(t) {
            return e.Util.unbindEvent(t, "change", this.publish);
        },
        "routine": function(e, t) {
            var i;
            return "radio" === e.type ? e.checked = (null != (i = e.value) ? i.toString() : void 0) !== (null != t ? t.toString() : void 0) : e.checked = !t;
        }
    }, e.binders.value = {
        "publishes": !0,
        "bind": function(t) {
            return e.Util.bindEvent(t, "change", this.publish);
        },
        "unbind": function(t) {
            return e.Util.unbindEvent(t, "change", this.publish);
        },
        "routine": function(e, t) {
            var i, n, s, a, o, l, h;
            if (null != window.jQuery) {
                if (e = jQuery(e), (null != t ? t.toString() : void 0) !== (null != (a = e.val()) ? a.toString() : void 0)) return e.val(null != t ? t : "");
            } else if ("select-multiple" === e.type) {
                if (null != t) {
                    for (h = [], n = 0, s = e.length; n < s; n++) i = e[n], h.push(i.selected = (o = i.value, 
                    r.call(t, o) >= 0));
                    return h;
                }
            } else if ((null != t ? t.toString() : void 0) !== (null != (l = e.value) ? l.toString() : void 0)) return e.value = null != t ? t : "";
        }
    }, e.binders.if = {
        "block": !0,
        "bind": function(e) {
            var t, i;
            if (null == this.marker) return t = [ this.view.config.prefix, this.type ].join("-").replace("--", "-"), 
            i = e.getAttribute(t), this.marker = document.createComment(" rivets: " + this.type + " " + i + " "), 
            this.bound = !1, e.removeAttribute(t), e.parentNode.insertBefore(this.marker, e), 
            e.parentNode.removeChild(e);
        },
        "unbind": function() {
            var e;
            return null != (e = this.nested) ? e.unbind() : void 0;
        },
        "routine": function(t, i) {
            var n, r, s, a, o;
            if (!!i == !this.bound) {
                if (i) {
                    s = {}, o = this.view.models;
                    for (n in o) r = o[n], s[n] = r;
                    return a = {
                        "binders": this.view.options.binders,
                        "formatters": this.view.options.formatters,
                        "adapters": this.view.options.adapters,
                        "config": this.view.options.config
                    }, (this.nested || (this.nested = new e.View(t, s, a))).bind(), this.marker.parentNode.insertBefore(t, this.marker.nextSibling), 
                    this.bound = !0;
                }
                return t.parentNode.removeChild(t), this.nested.unbind(), this.bound = !1;
            }
        },
        "update": function(e) {
            var t;
            return null != (t = this.nested) ? t.update(e) : void 0;
        }
    }, e.binders.unless = {
        "block": !0,
        "bind": function(t) {
            return e.binders.if.bind.call(this, t);
        },
        "unbind": function() {
            return e.binders.if.unbind.call(this);
        },
        "routine": function(t, i) {
            return e.binders.if.routine.call(this, t, !i);
        },
        "update": function(t) {
            return e.binders.if.update.call(this, t);
        }
    }, e.binders["on-*"] = {
        "function": !0,
        "unbind": function(t) {
            if (this.handler) return e.Util.unbindEvent(t, this.args[0], this.handler);
        },
        "routine": function(t, i) {
            return this.handler && e.Util.unbindEvent(t, this.args[0], this.handler), e.Util.bindEvent(t, this.args[0], this.handler = this.eventHandler(i));
        }
    }, e.binders["each-*"] = {
        "block": !0,
        "bind": function(e) {
            var t, i, n, r;
            if (null == this.marker) t = [ this.view.config.prefix, this.type ].join("-").replace("--", "-"), 
            this.marker = document.createComment(" rivets: " + this.type + " "), this.iterated = [], 
            e.removeAttribute(t), e.parentNode.insertBefore(this.marker, e), e.parentNode.removeChild(e); else for (i = 0, 
            n = (r = this.iterated).length; i < n; i++) r[i].bind();
        },
        "unbind": function(e) {
            var t, i, n, r, s;
            if (null != this.iterated) {
                for (s = [], i = 0, n = (r = this.iterated).length; i < n; i++) t = r[i], s.push(t.unbind());
                return s;
            }
        },
        "routine": function(t, i) {
            var n, r, s, a, o, l, h, u, p, c, d, f, y, m, g, v, L, O, b, w, C, S, x;
            if (h = this.args[0], i = i || [], this.iterated.length > i.length) for (y = 0, 
            v = (b = Array(this.iterated.length - i.length)).length; y < v; y++) b[y], (f = this.iterated.pop()).unbind(), 
            this.marker.parentNode.removeChild(f.els[0]);
            for (s = m = 0, L = i.length; m < L; s = ++m) if (l = i[s], r = {
                "index": s
            }, r[h] = l, null == this.iterated[s]) {
                w = this.view.models;
                for (o in w) l = w[o], null == r[o] && (r[o] = l);
                p = this.iterated.length ? this.iterated[this.iterated.length - 1].els[0] : this.marker, 
                u = {
                    "binders": this.view.options.binders,
                    "formatters": this.view.options.formatters,
                    "adapters": this.view.options.adapters,
                    "config": {}
                }, C = this.view.options.config;
                for (a in C) d = C[a], u.config[a] = d;
                u.config.preloadData = !0, c = t.cloneNode(!0), (f = new e.View(c, r, u)).bind(), 
                this.iterated.push(f), this.marker.parentNode.insertBefore(c, p.nextSibling);
            } else this.iterated[s].models[h] !== l && this.iterated[s].update(r);
            if ("OPTION" === t.nodeName) {
                for (x = [], g = 0, O = (S = this.view.bindings).length; g < O; g++) (n = S[g]).el === this.marker.parentNode && "value" === n.type ? x.push(n.sync()) : x.push(void 0);
                return x;
            }
        },
        "update": function(e) {
            var t, i, n, r, s, a, o, l;
            t = {};
            for (i in e) n = e[i], i !== this.args[0] && (t[i] = n);
            for (l = [], s = 0, a = (o = this.iterated).length; s < a; s++) r = o[s], l.push(r.update(t));
            return l;
        }
    }, e.binders["class-*"] = function(e, t) {
        var i;
        if (i = " " + e.className + " ", !t == (-1 !== i.indexOf(" " + this.args[0] + " "))) return e.className = t ? e.className + " " + this.args[0] : i.replace(" " + this.args[0] + " ", " ").trim();
    }, e.binders["*"] = function(e, t) {
        return null != t ? e.setAttribute(this.type, t) : e.removeAttribute(this.type);
    }, e.factory = function(t) {
        return t._ = e, t.binders = e.binders, t.components = e.components, t.formatters = e.formatters, 
        t.adapters = e.adapters, t.config = e.config, t.configure = function(t) {
            var i, n;
            null == t && (t = {});
            for (i in t) n = t[i], e.config[i] = n;
        }, t.bind = function(t, i, n) {
            var r;
            return null == i && (i = {}), null == n && (n = {}), (r = new e.View(t, i, n)).bind(), 
            r;
        };
    }, "object" == typeof exports ? e.factory(exports) : "function" == typeof define && define.amd ? define([ "exports" ], function(t) {
        return e.factory(this.rivets = t), t;
    }) : e.factory(this.rivets = {});
}.call(this), rivets.adapters[":"] = {
    "subscribe": function(e, t, i) {
        e.on("change:" + t, i);
    },
    "unsubscribe": function(e, t, i) {
        e.off("change:" + t, i);
    },
    "read": function(e, t) {
        return e.get(t);
    },
    "publish": function(e, t, i) {
        "" === i && (i = null), e.set(t, i);
    }
}, Neatline = new Marionette.Application(), Neatline.module("Shared", function(e) {
    e.Controller = Marionette.Controller.extend({
        "slug": "",
        "events": [],
        "commands": [],
        "requests": [],
        "initialize": function() {
            this._initEvents(), this._initCommands(), this._initRequests(), this.init.apply(this, arguments);
        },
        "init": function() {},
        "_bind": function(e, t) {
            _.each(e, function(e) {
                _.isString(e) ? t(e, e) : _.isObject(e) && _.each(e, function(e, i) {
                    t(i, e);
                });
            });
        },
        "_initEvents": function() {
            this._bind(this.events, _.bind(function(e, t) {
                Neatline.vent.on(e, _.bind(this[t], this));
            }, this));
        },
        "_initCommands": function() {
            this._bind(this.commands, _.bind(function(e, t) {
                Neatline.commands.setHandler(this.slug + ":" + e, _.bind(this[t], this));
            }, this));
        },
        "_initRequests": function() {
            this._bind(this.requests, _.bind(function(e, t) {
                Neatline.reqres.setHandler(this.slug + ":" + e, _.bind(this[t], this));
            }, this));
        }
    });
}), Neatline.module("Shared", function(e) {
    e.Router = Backbone.Router.extend({
        "before": function() {
            Neatline.vent.trigger("ROUTER:before");
        }
    });
}), Neatline.module("Shared", function(e) {
    e.View = Backbone.View.extend({
        "initialize": function(e) {
            this._initTemplate(), this._initSelections(), this.init(e);
        },
        "init": function(e) {},
        "_initTemplate": function() {
            this.template && this.$el.append(_.template($(this.template).html()));
        },
        "_initSelections": function() {
            this.__ui = _.extend({}, this.ui), _.bind(function e(t) {
                _.each(t, _.bind(function(i, n) {
                    _.isString(i) ? t[n] = this.$el.find(i) : _.isObject(i) && _.bind(e, this)(i);
                }, this));
            }, this)(this.__ui);
        },
        "showIn": function(e) {
            this.$el.appendTo(e);
        }
    });
}), Neatline.module("Shared.Exhibit", function(e) {
    e.Model = Backbone.Model.extend({
        "url": function() {
            return Neatline.g.neatline.exhibit_api;
        },
        "defaults": function() {
            return Neatline.g.neatline.exhibit;
        }
    });
}), Neatline.module("Shared.Record", function(e) {
    e.Model = Backbone.Model.extend({
        "mutators": {
            "title": {
                "get": function() {
                    return this.attributes.title || this.attributes.item_title;
                }
            },
            "item": {
                "get": function() {
                    return _.isUndefined(this.attributes.item) && this.loadItem(), this.attributes.item;
                }
            }
        },
        "initialize": function() {
            new Backbone.Schema(this).define({
                "item_id": {
                    "type": "number"
                },
                "fill_opacity": {
                    "type": "number"
                },
                "fill_opacity_select": {
                    "type": "number"
                },
                "stroke_opacity": {
                    "type": "number"
                },
                "stroke_opacity_select": {
                    "type": "number"
                },
                "point_radius": {
                    "type": "number"
                },
                "stroke_width": {
                    "type": "number"
                },
                "zindex": {
                    "type": "number"
                },
                "weight": {
                    "type": "number"
                },
                "min_zoom": {
                    "type": "number"
                },
                "max_zoom": {
                    "type": "number"
                },
                "map_zoom": {
                    "type": "number"
                }
            });
        },
        "toJSON": function() {
            return _.omit(_.clone(this.attributes), "item");
        },
        "url": function() {
            var e = Neatline.g.neatline.record_api;
            return this.isNew() || (e += "/" + this.id), e;
        },
        "defaults": function() {
            return _.extend(Neatline.g.neatline.styles, {
                "exhibit_id": Neatline.g.neatline.exhibit.id
            });
        },
        "loadItem": function(e) {
            if (this.has("item_id")) {
                var t = Neatline.g.neatline.item_body_api + "/" + this.get("item_id"), i = {
                    "record": this.id
                };
                $.get(t, i, _.bind(function(t) {
                    this.set("item", t), e && e(t);
                }, this));
            }
        },
        "resetItem": function() {
            this.attributes.item = void 0, this.trigger("change:item");
        },
        "hasTag": function(e) {
            return _.contains(this.splitTags(), e);
        },
        "splitTags": function() {
            var e = this.get("tags");
            return e ? _.map(e.split(","), function(e) {
                return _.string.trim(e);
            }) : [];
        },
        "getStyleMap": function() {
            var e = this.get("fill_color"), t = this.get("fill_color_select"), i = this.get("stroke_color"), n = this.get("stroke_color_select"), r = this.get("fill_opacity"), s = this.get("fill_opacity_select"), a = this.get("stroke_opacity"), o = this.get("stroke_opacity_select"), l = this.get("point_image"), h = this.get("stroke_width"), u = this.get("point_radius");
            return r = parseFloat(r), s = parseFloat(s), a = parseFloat(a), o = parseFloat(o), 
            h = Number(h), u = Number(u), new OpenLayers.StyleMap({
                "default": new OpenLayers.Style({
                    "fillColor": e,
                    "strokeColor": i,
                    "fillOpacity": r,
                    "graphicOpacity": r,
                    "strokeOpacity": a,
                    "strokeWidth": h,
                    "pointRadius": u,
                    "externalGraphic": l
                }),
                "select": new OpenLayers.Style({
                    "fillColor": t,
                    "strokeColor": n,
                    "fillOpacity": s,
                    "graphicOpacity": s,
                    "strokeOpacity": o,
                    "strokeWidth": h,
                    "pointRadius": u,
                    "externalGraphic": l
                }),
                "temporary": new OpenLayers.Style({
                    "fillColor": t,
                    "strokeColor": n,
                    "fillOpacity": (1 + s) / 2,
                    "graphicOpacity": (1 + s) / 2,
                    "strokeOpacity": o,
                    "strokeWidth": h,
                    "pointRadius": u,
                    "externalGraphic": l
                })
            });
        }
    });
}), Neatline.module("Shared.Record", function(e) {
    e.Collection = Backbone.Collection.extend({
        "model": Neatline.Shared.Record.Model,
        "url": function() {
            return Neatline.g.neatline.record_api;
        },
        "parse": function(e) {
            return this.metadata = {
                "start": Number(e.start),
                "numFound": Number(e.numFound),
                "removed": e.removed
            }, _.each(e.removed, _.bind(function(e) {
                this.remove(e);
            }, this)), e.records;
        },
        "update": function(e, t) {
            (e = e || {}).exhibit_id = Neatline.g.neatline.exhibit.id, this.fetch({
                "data": $.param(e),
                "success": t
            });
        },
        "getOrFetch": function(e, t) {
            var i = this.get(e);
            i ? t(i) : (i = new this.model({
                "id": e
            })).fetch({
                "success": function() {
                    t(i);
                }
            });
        }
    });
}), Neatline.module("Shared.Widget", function(e) {
    e.View = Neatline.Shared.View.extend({
        "className": "widget",
        "constructor": function(t) {
            t = t || {};
            var i = $("#" + this.id);
            i.length && (t.el = i), e.View.__super__.constructor.call(this, t);
        },
        "initialize": function(t) {
            t = t || {}, $.contains(document, this.el) || this.$el.appendTo($("#neatline-map")), 
            e.View.__super__.initialize.call(this, t);
        }
    });
}), Neatline.module("Events", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "EVENTS",
        "events": [ "highlight", "unhighlight", "select", "unselect" ],
        "commands": [ "unhighlightCurrent", "unselectCurrent" ],
        "init": function() {
            this.highlighted = null, this.selected = null;
        },
        "highlight": function(e) {
            this.unhighlightCurrent(), this.highlighted = e.model;
        },
        "unhighlight": function(e) {
            this.highlighted = null;
        },
        "select": function(e) {
            this.setRoute(e.model), this.unselectCurrent(), this.selected = e.model;
        },
        "unselect": function(e) {
            this.selected = null;
        },
        "setRoute": function(e) {
            Neatline.Editor || Backbone.history.navigate("records/" + e.id, {
                "replace": !0
            });
        },
        "unhighlightCurrent": function() {
            _.isNull(this.highlighted) || Neatline.vent.trigger("unhighlight", {
                "model": this.highlighted,
                "source": this.slug
            });
        },
        "unselectCurrent": function() {
            _.isNull(this.selected) || Neatline.vent.trigger("unselect", {
                "model": this.selected,
                "source": this.slug
            });
        }
    });
}), Neatline.module("Events", {
    "startWithParent": !1,
    "define": function(e) {
        Neatline.on("initialize:after", function() {
            e.start(), Backbone.history.start();
        }), e.addInitializer(function() {
            e.__controller = new e.Controller(), e.__router = new e.Router();
        });
    }
}), Neatline.module("Events", function(e) {
    e.Router = Neatline.Shared.Router.extend({
        "slug": "EVENTS",
        "routes": {
            "records/:id": "records/:id"
        },
        "initialize": function() {
            this.records = new Neatline.Shared.Record.Collection();
        },
        "records/:id": function(e) {
            this.records.getOrFetch(e, _.bind(function(e) {
                Neatline.vent.trigger("select", {
                    "model": e,
                    "source": this.slug
                });
            }, this));
        }
    });
}), Neatline.module("Records", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "RECORDS",
        "init": function() {
            _.bindAll(this, "ready"), this.records = new Neatline.Shared.Record.Collection(), 
            Neatline.g.neatline.exhibit.spatial_querying ? this.ready() : this.records.update({}, this.ready);
        },
        "ready": function() {
            Neatline.vent.trigger(this.slug + ":ready");
        }
    });
}), Neatline.module("Records", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map.Layers.Google", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "MAP:LAYERS",
        "requests": [ "Google" ],
        "Google": function(e) {
            switch (e.properties.provider) {
              case "physical":
                return new OpenLayers.Layer.Google(e.title, {
                    "type": google.maps.MapTypeId.TERRAIN,
                    "numZoomLevels": 22,
                    "useTiltImages": !1
                });

              case "streets":
                return new OpenLayers.Layer.Google(e.title, {
                    "type": google.maps.MapTypeId.ROADMAP,
                    "numZoomLevels": 22,
                    "useTiltImages": !1
                });

              case "satellite":
                return new OpenLayers.Layer.Google(e.title, {
                    "type": google.maps.MapTypeId.SATELLITE,
                    "numZoomLevels": 21,
                    "useTiltImages": !1
                });

              case "hybrid":
                return new OpenLayers.Layer.Google(e.title, {
                    "type": google.maps.MapTypeId.HYBRID,
                    "numZoomLevels": 21,
                    "useTiltImages": !1
                });
            }
        }
    });
}), Neatline.module("Map.Layers.Google", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map.Layers.OpenStreetMap", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "MAP:LAYERS",
        "requests": [ "OpenStreetMap" ],
        "OpenStreetMap": function(e) {
            return new OpenLayers.Layer.OSM(e.title);
        }
    });
}), Neatline.module("Map.Layers.OpenStreetMap", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map.Layers.Stamen", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "MAP:LAYERS",
        "requests": [ "Stamen" ],
        "Stamen": function(e) {
            var t = new OpenLayers.Layer.Stamen(e.properties.provider);
            return t.name = e.title, t;
        }
    });
}), Neatline.module("Map.Layers.Stamen", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map.Layers.WMS", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "MAP:LAYERS",
        "requests": [ "WMS" ],
        "WMS": function(e) {
            return new OpenLayers.Layer.WMS(e.title, e.properties.address, {
                "layers": e.properties.layers
            });
        }
    });
}), Neatline.module("Map.Layers.WMS", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map.Layers.XYZ", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "MAP:LAYERS",
        "requests": [ "XYZ" ],
        "XYZ": function(e) {
            e.properties.id;
            return new OpenLayers.Layer.XYZ(e.title, e.properties.urls, {
                "sphericalMercator": !0,
                "wrapDateLine": !0
            });
        }
    });
}), Neatline.module("Map.Layers.XYZ", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map.Layers", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "MAP:LAYERS",
        "requests": [ "getLayer" ],
        "getLayer": function(e) {
            return Neatline.request("MAP:LAYERS:" + e.type, e);
        }
    });
}), Neatline.module("Map.Layers", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "MAP",
        "events": [ "highlight", "unhighlight", "select", "unselect", "setFilter", "removeFilter", "refresh" ],
        "commands": [ "load", "updateSize", "showHighlight", "hideHighlight" ],
        "requests": [ "getMap", "getRecords", "getVectorLayer", "getVectorLayers", "getWmsLayers", "getCenter", "getZoom", "getMinZoom", "getExtent" ],
        "init": function() {
            this.view = new Neatline.Map.View({
                "slug": this.slug
            });
        },
        "highlight": function(e) {
            this.view.highlight(e.model);
        },
        "unhighlight": function(e) {
            this.view.unhighlight(e.model);
        },
        "select": function(e) {
            e.source !== this.slug && (this.view.focusByModel(e.model), this.view.select(e.model));
        },
        "unselect": function(e) {
            this.view.unselect(e.model);
        },
        "setFilter": function(e) {
            this.view.setFilter(e.key, e.evaluator);
        },
        "removeFilter": function(e) {
            this.view.removeFilter(e.key);
        },
        "refresh": function() {
            this.view.removeAllLayers(), this.view.publishPosition();
        },
        "load": function(e) {
            this.view.loadRecords(e);
        },
        "updateSize": function() {
            this.view.map.updateSize();
        },
        "showHighlight": function(e) {
            this.view.renderVectorHighlightIntent(e);
        },
        "hideHighlight": function(e) {
            this.view.renderVectorDefaultIntent(e);
        },
        "getMap": function() {
            return this.view.map;
        },
        "getRecords": function() {
            return this.view.records;
        },
        "getVectorLayer": function(e) {
            return this.view.getOrCreateVectorLayer(e);
        },
        "getVectorLayers": function() {
            return this.view.getVectorLayers();
        },
        "getWmsLayers": function() {
            return this.view.getWmsLayers();
        },
        "getCenter": function() {
            return this.view.map.getCenter();
        },
        "getZoom": function() {
            return this.view.map.getZoom();
        },
        "getMinZoom": function() {
            var e = this.view.map.baseLayer;
            if (e) {
                if (e.minZoomLevel) return e.minZoomLevel;
                if (e.zoomOffset) return e.zoomOffset;
                if (this.view.otherZoomOffset) return this.view.otherZoomOffset;
            }
            return 0;
        },
        "getExtent": function() {
            return this.view.map.getExtent().toString();
        }
    });
}), Neatline.module("Map", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map", function(e) {
    e.View = Backbone.View.extend({
        "el": "#neatline-map",
        "tags": null,
        "options": {
            "defaultZoom": 6
        },
        "initialize": function(e) {
            this.slug = e.slug, this._initGlobals(), this._initOpenLayers(), this._initControls(), 
            this._initEvents(), this._initBaseLayers(), this._initViewport(), this.publishPosition();
        },
        "_initGlobals": function() {
            this.records = new Neatline.Shared.Record.Collection(), this.exhibit = Neatline.g.neatline.exhibit, 
            this.wmsMime = Neatline.g.neatline.wms_mime, this.formatWkt = new OpenLayers.Format.WKT(), 
            this.layers = {
                "vector": {},
                "wms": {}
            }, this.selected = {
                "vector": {},
                "wms": {}
            }, this.filters = {}, this.selectedModel = null, this.loading = !1;
        },
        "_initOpenLayers": function() {
            OpenLayers.ImgPath = Neatline.g.neatline.openlayers_theme, this.map = new OpenLayers.Map(this.el, {
                "projection": "EPSG:900913",
                "theme": null,
                "zoomMethod": null,
                "fallThrough": !0,
                "panMethod": null,
                "restrictedExtent": _.isString(this.exhibit.map_restricted_extent) ? new OpenLayers.Bounds.fromString(this.exhibit.map_restricted_extent) : null,
                "controls": [ new OpenLayers.Control.PanZoom(), new OpenLayers.Control.Navigation({
                    "dragPanOptions": {
                        "enableKinetic": !1
                    },
                    "documentDrag": !0
                }) ]
            });
        },
        "_initControls": function() {
            _.bindAll(this, [ "onBeforeHighlight", "onHighlight", "onUnhighlight", "onSelect", "onUnselect" ]), 
            this.highlightControl = new OpenLayers.Control.SelectFeature(this.getVectorLayers(), {
                "hover": !0,
                "renderIntent": "temporary",
                "highlightOnly": !0,
                "eventListeners": {
                    "beforefeaturehighlighted": this.onBeforeHighlight,
                    "featurehighlighted": this.onHighlight,
                    "featureunhighlighted": this.onUnhighlight
                }
            }), this.selectControl = new OpenLayers.Control.SelectFeature(this.getVectorLayers(), {
                "onSelect": this.onSelect,
                "onUnselect": this.onUnselect
            }), this.highlightControl.handlers.feature.stopDown = !1, this.selectControl.handlers.feature.stopDown = !1, 
            this.map.addControls([ this.highlightControl, this.selectControl ]), this.highlightControl.activate(), 
            this.selectControl.activate();
        },
        "_initEvents": function() {
            this.map.events.register("movestart", this.map, _.bind(function(e) {
                Neatline.vent.trigger("MAP:moveStart", e);
            }, this)), this.map.events.register("moveend", this.map, _.bind(function(e) {
                this.exhibit.spatial_querying && this.publishPosition(), Neatline.vent.trigger("MAP:moveEnd", e);
            }, this));
        },
        "_initBaseLayers": function() {
            var e = _.isString(this.exhibit.image_layer), t = _.isString(this.exhibit.wms_address);
            e ? this._initImageLayer() : t && this._initWmsLayer(), this._initSpatialLayers();
        },
        "_initImageLayer": function() {
            var e = this.exhibit.image_height, t = this.exhibit.image_width;
            if (e && t) this._addImageLayer(t, e); else {
                var i = new Image(), n = this;
                i.onload = function() {
                    e = this.height, t = this.width, n._addImageLayer(t, e);
                }, i.src = this.exhibit.image_layer;
            }
        },
        "_addImageLayer": function(e, t) {
            var i = new OpenLayers.Layer.Image(this.exhibit.title, this.exhibit.image_layer, new OpenLayers.Bounds(0, 0, e, t), new OpenLayers.Size(e / 5, t / 5), {
                "maxExtent": new OpenLayers.Bounds(-e, -t, 2 * e, 2 * t),
                "numZoomLevels": this.exhibit.zoom_levels,
                "minResolution": .5
            });
            this.map.addLayer(i);
            var n = this.getZoomLimits(), r = _.isNumber(n.minZ) ? n.minZ : 0, s = _.isNumber(n.maxZ) ? n.maxZ : i.numZoomLevels - 1;
            i.numZoomLevels = Math.abs(s - r + 1), i.resolutions = i.resolutions.splice(r, Math.abs(s - r + 1)), 
            this.baseLayerIsImage = !0, this.imageFocus = [ e / 2, t / 2 ], this.otherZoomOffset = r;
        },
        "_initWmsLayer": function() {
            var e, t, i, n = this.exhibit.wms_address.split("/").pop(), r = this.exhibit.wms_layers || n, s = new OpenLayers.Layer.WMS(this.exhibit.title, this.exhibit.wms_address, {
                "layers": r,
                "transparent": "false",
                "format": "image/png"
            }, {
                "isBaseLayer": "no_spatial_layer" === this.exhibit.spatial_layer,
                "visibility": !0
            });
            this.map.addLayer(s), e = this.getZoomLimits(), t = _.isNumber(e.minZ) ? e.minZ : 0, 
            i = _.isNumber(e.maxZ) ? e.maxZ : s.numZoomLevels - 1, s.numZoomLevels = Math.abs(i - t + 1), 
            s.resolutions = s.resolutions.splice(t, Math.abs(i - t + 1)), this.otherZoomOffset = t;
        },
        "_initSpatialLayers": function() {
            var e, t, i, n = {};
            _.each(Neatline.g.neatline.spatial_layers, function(e) {
                var t = Neatline.request("MAP:LAYERS:getLayer", e);
                _.isObject(t) && (n[e.id] = t);
            }), _.each(_.values(n), _.bind(function(e) {
                this.map.addLayer(e), this.map.setLayerIndex(e, 0);
            }, this)), null === (e = this.getZoomLimits()).minZ && null === e.maxZ || (this.map.numZoomLevels = null), 
            _.each(n, function(r, s) {
                switch (t = _.isNumber(e.minZ) ? e.minZ : n[s].MIN_ZOOM_LEVEL || 0, i = _.isNumber(e.maxZ) ? e.maxZ : n[s].MAX_ZOOM_LEVEL || r.numZoomLevels - 1, 
                n[s].numZoomLevels = Math.abs(i - t + 1), n[s].resolutions = n[s].resolutions.splice(t, Math.abs(i - t + 1)), 
                s) {
                  case "GooglePhysical":
                  case "GoogleSatellite":
                  case "GoogleStreets":
                  case "GoogleHybrid":
                    n[s].minZoomLevel = t;
                    break;

                  case "OpenStreetMap":
                  case "StamenToner":
                  case "StamenTerrain":
                  case "StamenWatercolor":
                    n[s].zoomOffset = t;
                }
            }.bind(this)), this.exhibit.spatial_layer && "no_spatial_layer" !== this.exhibit.spatial_layer && this.map.setBaseLayer(n[this.exhibit.spatial_layer]), 
            this.map.addControl(new OpenLayers.Control.LayerSwitcher());
        },
        "getZoomLimits": function() {
            return {
                "minZ": _.isNumber(this.exhibit.map_min_zoom) ? this.exhibit.map_min_zoom : null,
                "maxZ": _.isNumber(this.exhibit.map_max_zoom) ? this.exhibit.map_max_zoom : null
            };
        },
        "_initViewport": function() {
            var e = Neatline.g.neatline.exhibit.map_focus, t = Neatline.g.neatline.exhibit.map_zoom;
            t = _.isNumber(t) ? t : this.options.defaultZoom, this.baseLayerIsImage && (t = Math.min(t, this.exhibit.zoom_levels - 1));
            var i = this.getZoomLimits();
            _.isNumber(i.maxZ) && t > i.maxZ && (t = i.maxZ), _.isNumber(i.minZ) && (t = Math.max(0, t - i.minZ)), 
            _.isString(e) ? this.setFocus(e) : _.isString(this.exhibit.map_restricted_extent) ? this.map.zoomToExtent(this.exhibit.map_restricted_extent) : this.baseLayerIsImage ? this.map.setCenter(this.imageFocus, t, !1, !0) : this.geolocate(), 
            this.map.zoomTo(t);
        },
        "updatePublicControls": function() {
            var e = this.getVectorLayers();
            this.highlightControl.setLayer(e), this.selectControl.setLayer(e), _.isNull(this.selectedModel) || this.select(this.selectedModel);
        },
        "focusByModel": function(e) {
            var t = this.getOrCreateVectorLayer(e), i = e.get("coverage") && !e.get("is_wms"), n = e.get("map_focus"), r = e.get("map_zoom");
            if (_.isNumber(r)) this.setZoom(r); else if (i) {
                r = this.map.getZoomForExtent(t.getDataExtent());
                this.setZoom(r);
            }
            if (_.isString(n)) this.setFocus(n); else if (i) {
                var s = t.getDataExtent().getCenterLonLat();
                this.setFocus(s);
            }
            Neatline.vent.trigger("MAP:focused");
        },
        "setFocus": function(e) {
            _.isString(e) && (e = e.split(",")), this.map.setCenter(e);
        },
        "setZoom": function(e) {
            this.map.zoomTo(e);
        },
        "geolocate": function() {
            var e = new OpenLayers.Control.Geolocate({
                "bind": !0,
                "watch": !1,
                "failure": function() {
                    this.map.setCenter([ 0, 0 ], this.map.getZoom(), !1, !0);
                }.bind(this)
            });
            this.map.addControl(e), e.activate();
        },
        "publishPosition": function() {
            var e = {};
            this.exhibit.spatial_querying && null !== this.map.getExtent() && _.extend(e, {
                "extent": this.getExtentAsWKT(),
                "zoom": this.getMinZoom() + this.getZoom()
            }), this.loadRecords(e), this.loading = !0;
        },
        "loadRecords": function(e) {
            null === e.tags ? this.tags = null : void 0 === e.tags && null != this.tags ? e.tags = this.tags : this.tags = e.tags, 
            this.records.update(e, _.bind(function(e) {
                this.ingestRecords(e);
            }, this));
        },
        "ingestRecords": function(e) {
            this.map.dragging || (this.ingestVectorLayers(e), this.ingestWmsLayers(e), Neatline.vent.trigger("MAP:ingest", e), 
            this.updatePublicControls(), this.loading = !1);
        },
        "ingestVectorLayers": function(e) {
            var t = this.getVectorLayerIds(), i = _.pluck(e.models, "id");
            _.each(_.difference(i, t), _.bind(function(t) {
                e.get(t).get("coverage") && this.buildVectorLayer(e.get(t));
            }, this)), _.each(_.difference(t, i), _.bind(function(e) {
                var t = this.layers.vector[e];
                _.isObject(t) && !t.neatline.frozen && this.removeVectorLayer(t);
            }, this));
        },
        "ingestWmsLayers": function(e) {
            var t = this.getWmsLayerIds(), i = _.pluck(e.models, "id");
            _.each(_.difference(i, t), _.bind(function(t) {
                var i = e.get(t);
                i.get("wms_address") && this.buildWmsLayer(i);
            }, this)), _.each(_.difference(t, i), _.bind(function(e) {
                var t = this.layers.wms[e];
                _.isObject(t) && this.removeWmsLayer(t);
            }, this));
        },
        "buildVectorLayer": function(e) {
            var t = new OpenLayers.Layer.Vector(e.get("title"), {
                "displayInLayerSwitcher": !1,
                "styleMap": e.getStyleMap(),
                "neatline": {
                    "model": e,
                    "frozen": !1
                }
            });
            if (e.get("coverage")) {
                var i = this.formatWkt.read(e.get("coverage"));
                t.addFeatures(i);
            }
            return this.filterLayer(t), this.layers.vector[e.id] = t, this.map.addLayer(t), 
            _.isNumber(e.get("zindex")) && this.setZIndex(t, e.get("zindex")), t;
        },
        "buildWmsLayer": function(e) {
            var t = e.get("wms_address").split("/").pop(), i = e.get("wms_layers") || t, n = new OpenLayers.Layer.WMS(e.get("title"), e.get("wms_address"), {
                "layers": i,
                "transparent": !0,
                "format": this.wmsMime,
                "tiled": !0
            }, {
                "displayOutsideMaxExtent": !0,
                "opacity": Number(e.get("fill_opacity")),
                "transitionEffect": "map-resize",
                "isBaseLayer": !1,
                "neatline": {
                    "model": e
                }
            });
            return this.filterLayer(n), this.layers.wms[e.id] = n, this.map.addLayer(n), _.isNumber(e.get("zindex")) && this.setZIndex(n, e.get("zindex")), 
            n;
        },
        "setZIndex": function(e, t) {
            this.map.setLayerIndex(e, t);
        },
        "getOrCreateVectorLayer": function(e) {
            var t = this.layers.vector[e.id];
            return t || (t = this.buildVectorLayer(e)), t;
        },
        "removeVectorLayer": function(e) {
            this.map.removeLayer(e), delete this.layers.vector[e.neatline.model.id], OpenLayers.Util.removeItem(this.highlightControl.layers, e), 
            OpenLayers.Util.removeItem(this.selectControl.layers, e), e.destroy();
        },
        "removeWmsLayer": function(e) {
            this.map.removeLayer(e), delete this.layers.wms[e.neatline.model.id], e.destroy();
        },
        "removeAllLayers": function() {
            _.each(this.getVectorLayers(), _.bind(function(e) {
                e.neatline.frozen || this.removeVectorLayer(e);
            }, this)), _.each(this.getWmsLayers(), _.bind(function(e) {
                this.removeWmsLayer(e);
            }, this));
        },
        "setFilter": function(e, t) {
            this.filters[e] = t, this.filterAllLayers();
        },
        "removeFilter": function(e) {
            delete this.filters[e], this.filterAllLayers();
        },
        "filterLayer": function(e) {
            var t = !0;
            _.each(this.filters, _.bind(function(i, n) {
                t = t && i(e.neatline.model);
            }, this)), e.setVisibility(t);
        },
        "filterAllLayers": function() {
            _.each(this.layers, _.bind(function(e, t) {
                _.each(e, _.bind(function(e, t) {
                    this.filterLayer(e);
                }, this));
            }, this));
        },
        "highlight": function(e) {
            if (!this.modelIsSelected(e)) {
                var t = this.layers.vector[e.id];
                t && (this.stopPropagation = !0, _.each(t.features, _.bind(function(e) {
                    this.highlightControl.highlight(e);
                }, this)), this.stopPropagation = !1), (t = this.layers.wms[e.id]) && t.setOpacity(e.get("fill_opacity_select"));
            }
        },
        "renderVectorHighlightIntent": function(e) {
            var t = this.layers.vector[e.id];
            t && _.each(t.features, _.bind(function(e) {
                t.drawFeature(e, "temporary");
            }, this));
        },
        "unhighlight": function(e) {
            if (!this.modelIsSelected(e)) {
                var t = this.layers.vector[e.id];
                t && (this.stopPropagation = !0, _.each(t.features, _.bind(function(e) {
                    this.highlightControl.unhighlight(e);
                }, this)), this.stopPropagation = !1), (t = this.layers.wms[e.id]) && t.setOpacity(e.get("fill_opacity"));
            }
        },
        "renderVectorDefaultIntent": function(e) {
            var t = this.layers.vector[e.id];
            t && _.each(t.features, _.bind(function(e) {
                t.drawFeature(e, "default");
            }, this));
        },
        "select": function(e) {
            var t = this.layers.vector[e.id];
            t && (this.stopPropagation = !0, _.each(t.features, _.bind(function(e) {
                this.selectControl.select(e);
            }, this)), this.stopPropagation = !1), (t = this.layers.wms[e.id]) && t.setOpacity(e.get("fill_opacity_select")), 
            this.selectedModel = e;
        },
        "unselect": function(e) {
            var t = this.layers.vector[e.id];
            t && (this.stopPropagation = !0, _.each(t.features, _.bind(function(e) {
                this.selectControl.unselect(e);
            }, this)), this.stopPropagation = !1), (t = this.layers.wms[e.id]) && t.setOpacity(e.get("fill_opacity")), 
            this.selectedModel = null;
        },
        "onBeforeHighlight": function(e) {
            return !this.map.dragging && !this.loading;
        },
        "onHighlight": function(e) {
            this.stopPropagation || (this.highlight(e.feature.layer.neatline.model), Neatline.vent.trigger("highlight", {
                "model": e.feature.layer.neatline.model,
                "source": this.slug
            }));
        },
        "onUnhighlight": function(e) {
            this.stopPropagation || (this.unhighlight(e.feature.layer.neatline.model), Neatline.vent.trigger("unhighlight", {
                "model": e.feature.layer.neatline.model,
                "source": this.slug
            }));
        },
        "onSelect": function(e) {
            this.stopPropagation || (this.select(e.layer.neatline.model), Neatline.vent.trigger("select", {
                "model": e.layer.neatline.model,
                "source": this.slug
            }));
        },
        "onUnselect": function(e) {
            this.stopPropagation || (this.unselect(e.layer.neatline.model), Neatline.vent.trigger("unselect", {
                "model": e.layer.neatline.model,
                "source": this.slug
            }));
        },
        "modelIsSelected": function(e) {
            return this.selectedModel && this.selectedModel.id == e.id;
        },
        "getZoom": function(e) {
            return this.map.getZoom();
        },
        "getMinZoom": function() {
            var e = this.getZoomLimits();
            return _.isNumber(e.minZ) ? e.minZ : 0;
        },
        "getExtentAsWKT": function() {
            var e = this.map.getExtent().toGeometry(), t = new OpenLayers.Feature.Vector(e);
            return this.formatWkt.write(t);
        },
        "getVectorLayers": function() {
            return _.values(this.layers.vector);
        },
        "getVectorLayerIds": function() {
            return _.map(_.keys(this.layers.vector), Number);
        },
        "getWmsLayers": function() {
            return _.values(this.layers.wms);
        },
        "getWmsLayerIds": function() {
            return _.map(_.keys(this.layers.wms), Number);
        }
    });
}), Neatline.module("Presenter", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "PRESENTER",
        "events": [ "highlight", "unhighlight", "select", "unselect" ],
        "highlight": function(e) {
            Neatline.execute("PRESENTER:" + e.model.get("presenter") + ":highlight", e.model);
        },
        "unhighlight": function(e) {
            Neatline.execute("PRESENTER:" + e.model.get("presenter") + ":unhighlight", e.model);
        },
        "select": function(e) {
            Neatline.execute("PRESENTER:" + e.model.get("presenter") + ":select", e.model);
        },
        "unselect": function(e) {
            Neatline.execute("PRESENTER:" + e.model.get("presenter") + ":unselect", e.model);
        }
    });
}), Neatline.module("Presenter", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Presenter.StaticBubble", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "PRESENTER:StaticBubble",
        "events": [ "activatePresenter", "deactivatePresenter" ],
        "commands": [ "highlight", "unhighlight", "select", "unselect" ],
        "init": function() {
            this.view = new e.View({
                "slug": this.slug
            });
        },
        "highlight": function(e) {
            this.view.highlight(e);
        },
        "unhighlight": function() {
            this.view.unhighlight();
        },
        "select": function(e) {
            this.view.select(e);
        },
        "unselect": function(e) {
            this.view.unselect(e);
        },
        "activatePresenter": function() {
            this.view.activate();
        },
        "deactivatePresenter": function() {
            this.view.deactivate(), this.view.unselect();
        }
    });
}), Neatline.module("Presenter.StaticBubble", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Presenter.StaticBubble", function(e) {
    e.View = Neatline.Shared.Widget.View.extend({
        "id": "static-bubble",
        "template": "#static-bubble-template",
        "className": "bubble static",
        "events": {
            "click .close": "onClose"
        },
        "ui": {
            "close": ".close",
            "body": ".body"
        },
        "init": function(e) {
            this.slug = e.slug, this.selected = !1, this.active = !0;
        },
        "onClose": function() {
            Neatline.vent.trigger("unselect", {
                "model": this.model,
                "source": this.slug
            });
        },
        "bind": function(e) {
            this.model = e, this.onMouseOut = _.bind(this.unhighlight, this), Neatline.request("MAP:getMap").events.register("mouseout", null, this.onMouseOut), 
            rivets.bind(this.$el, {
                "record": this.model
            }), this.$el.addClass("bound");
        },
        "unbind": function() {
            Neatline.request("MAP:getMap").events.unregister("mouseout", null, this.onMouseOut), 
            this.$el.removeClass("bound");
        },
        "highlight": function(e) {
            !this.selected && this.active && this.bind(e);
        },
        "unhighlight": function() {
            this.selected || this.unbind();
        },
        "select": function(e) {
            this.active && (this.$el.addClass("selected"), this.selected = !0, this.bind(e));
        },
        "unselect": function(e) {
            (!e || this.model && this.model.id == e.id) && (this.$el.removeClass("selected"), 
            this.selected = !1, this.unbind());
        },
        "activate": function() {
            this.active = !0;
        },
        "deactivate": function() {
            this.active = !1;
        }
    });
});